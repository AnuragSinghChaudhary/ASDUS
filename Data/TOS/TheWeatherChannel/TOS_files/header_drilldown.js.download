!function(e,n,o){"use strict";function i(i,t,a,r,l,s,c,u,d,f,m,g,p){function h(e){c.setEditionLocale(e.code,function(){window.location.href=e.link_url})}function v(){var e=n&&n.Configs&&n.Configs.dsx&&n.Configs.dsx.locale;if(e&&"en_US"!==e){var o=e.split("_");e="/"+o[0]+(o[1]?"-"+o[1].toUpperCase():"")}else e="";return e+"/life/manage-notifications"}function w(){r(function(){e.element("body").addClass("is-main-menu-opened"),M.isOpenMenu=!0}),P&&(P.style.zIndex=1102)}function _(){e.element("body").removeClass("is-main-menu-opened"),M.isOpenMenu=!1,P&&(P.style.zIndex=1100)}function k(){return!!o.cookie("uplogin")}function C(){return"wx"===u.getNodeValue("profile","provider")}function U(){t.location.href="/profile/login"}function T(){t.location.href="/profile/signup"}function S(){m.pcoDatasource.savedLocations.removeAll().then(function(){O(),t.location.reload()})}function y(e,n){M.tempUnit=e;var o="F"===e?"farenheit":"celsius";s.getEvent("track-string-event").notify({module_id:f.module_id,trackStr:o}),c.setTempUnit(e,function(){location.reload()}),n.stopPropagation()}function x(e){var n=[];return g.each(e,function(e){var o,i={title:e.catName,items:[]};g.each(e.countryName,function(e){"north korea"!==e.name.toLowerCase()&&(o={link_url:"/"+e.code,code:e.code,title:e.name,language:e.language,from_str:e.name},i.items.push(o))}),n.push(i)}),n}function L(e){var n=[];return g.each(e,function(e){e.items=e.left||[],e.link_url=a(e.link_url)(i),delete e.left,e.items=L(e.items),n.push(e)}),n}function O(){var e="uplogin",n="upxfer",i="Ticket_urs",t="Ticket_web",a="dsx",r="Ticket_urs",l={path:"/",domain:".weather.com"};o.removeCookie(e,l),o.removeCookie(n,l),o.removeCookie(i,l),o.removeCookie(t,l),o.removeCookie(a,l),o.removeCookie(r,l),o.removeCookie(t,l)}var M=this,N=(n&&n.Configs&&n.Configs.profile&&n.Configs.profile.base_url,e.element("#wx-header-wrap")),P="0"in N&&N[0];M.modal={height:600,width:750},M.isOpenMenu=!1,M.showSignOn=!1,M.isTouch=i.isTouch,M.isShowSignOnBtn=f.isShowSignOnBtn,M.isShowChangePasswordBtn=C(),M.isLoggedIn=k,M.signIn=U,M.signUp=T,M.signOut=S,M.setTempUnit=y,M.openMenu=w,M.closeMenu=_,M.getTargetUrl=v,M.setLocale=h,p.done(function(){M.mainMenu=L(g.uniq(f.main_menu_links,function(e){return e.title})),M.locales=x(f.header_international_links),M.tempUnit=c.getTempUnit();var e=u&&u.getNodeValue("page","locale")&&u.getNodeValue("page","locale").split("-");M.localeTitleDisplay=e&&e[1]||"US"})}e.module("header_drilldown").controller("twc_header_drilldown_controller",i),i.$inject=["$scope","$window","$interpolate","$timeout","DrupalSettings","customEvent","pcoUser","twcPco","PcoPage","settings","gmLocations","twcUtil","dynamicLocResolvedEvent"]}(angular,TWC,jQuery);
//# sourceMappingURL=/sites/all/modules/glomo/modules/header_drilldown/header_drilldown.controller.min.js.map
