(function(window,undefined){var rootjQuery,readyList,document=window.document,location=window.location,navigator=window.navigator,_jQuery=window.jQuery,_$=window.$,core_push=Array.prototype.push,core_slice=Array.prototype.slice,core_indexOf=Array.prototype.indexOf,core_toString=Object.prototype.toString,core_hasOwn=Object.prototype.hasOwnProperty,core_trim=String.prototype.trim,jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},core_pnum=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,
core_rnotwhite=/\S/,core_rspace=/\s+/,rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rquickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,rvalidchars=/^[\],:{}\s]*$/,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rvalidescape=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,rvalidtokens=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},DOMContentLoaded=function(){if(document.addEventListener){document.removeEventListener("DOMContentLoaded",
DOMContentLoaded,false);jQuery.ready()}else if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready()}},class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector)return this;if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=
3)match=[null,selector,null];else match=rquickExpr.exec(selector);if(match&&(match[1]||!context))if(match[1]){context=context instanceof jQuery?context[0]:context;doc=context&&context.nodeType?context.ownerDocument||context:document;selector=jQuery.parseHTML(match[1],doc,true);if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context))this.attr.call(selector,context,true);return jQuery.merge(this,selector)}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);
this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}else if(!context||context.jquery)return(context||rootjQuery).find(selector);else return this.constructor(context).find(selector)}else if(jQuery.isFunction(selector))return rootjQuery.ready(selector);if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return core_slice.call(this)},
get:function(num){return num==null?this.toArray():num<0?this[this.length+num]:this[num]},pushStack:function(elems,name,selector){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;if(name==="find")ret.selector=this.selector+(this.selector?" ":"")+selector;else if(name)ret.selector=this.selector+"."+name+"("+selector+")";return ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){jQuery.ready.promise().done(fn);return this},
eq:function(i){i=+i;return i===-1?this.slice(i):this.slice(i,i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(core_slice.apply(this,arguments),"slice",core_slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:core_push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=
jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!jQuery.isFunction(target))target={};if(length===i){target=this;--i}for(;i<length;i++)if((options=arguments[i])!=null)for(name in options){src=target[name];copy=options[name];if(target===copy)continue;if(deep&&copy&&(jQuery.isPlainObject(copy)||
(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else clone=src&&jQuery.isPlainObject(src)?src:{};target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined)target[name]=copy}return target};jQuery.extend({noConflict:function(deep){if(window.$===jQuery)window.$=_$;if(deep&&window.jQuery===jQuery)window.jQuery=_jQuery;return jQuery},isReady:false,readyWait:1,holdReady:function(hold){if(hold)jQuery.readyWait++;else jQuery.ready(true)},
ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady)return;if(!document.body)return setTimeout(jQuery.ready,1);jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0)return;readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger)jQuery(document).trigger("ready").off("ready")},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array"},isWindow:function(obj){return obj!=null&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&
isFinite(obj)},type:function(obj){return obj==null?String(obj):class2type[core_toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj))return false;try{if(obj.constructor&&!core_hasOwn.call(obj,"constructor")&&!core_hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return false}catch(e){return false}var key;for(key in obj);return key===undefined||core_hasOwn.call(obj,key)},isEmptyObject:function(obj){var name;for(name in obj)return false;
return true},error:function(msg){throw new Error(msg);},parseHTML:function(data,context,scripts){var parsed;if(!data||typeof data!=="string")return null;if(typeof context==="boolean"){scripts=context;context=0}context=context||document;if(parsed=rsingleTag.exec(data))return[context.createElement(parsed[1])];parsed=jQuery.buildFragment([data],context,scripts?null:[]);return jQuery.merge([],(parsed.cacheable?jQuery.clone(parsed.fragment):parsed.fragment).childNodes)},parseJSON:function(data){if(!data||
typeof data!=="string")return null;data=jQuery.trim(data);if(window.JSON&&window.JSON.parse)return window.JSON.parse(data);if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))return(new Function("return "+data))();jQuery.error("Invalid JSON: "+data)},parseXML:function(data){var xml,tmp;if(!data||typeof data!=="string")return null;try{if(window.DOMParser){tmp=new DOMParser;xml=tmp.parseFromString(data,"text/xml")}else{xml=new ActiveXObject("Microsoft.XMLDOM");
xml.async="false";xml.loadXML(data)}}catch(e){xml=undefined}if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length)jQuery.error("Invalid XML: "+data);return xml},noop:function(){},globalEval:function(data){if(data&&core_rnotwhite.test(data))(window.execScript||function(data){window["eval"].call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===
name.toLowerCase()},each:function(obj,callback,args){var name,i=0,length=obj.length,isObj=length===undefined||jQuery.isFunction(obj);if(args)if(isObj)for(name in obj){if(callback.apply(obj[name],args)===false)break}else for(;i<length;){if(callback.apply(obj[i++],args)===false)break}else if(isObj)for(name in obj){if(callback.call(obj[name],name,obj[name])===false)break}else for(;i<length;)if(callback.call(obj[i],i,obj[i++])===false)break;return obj},trim:core_trim&&!core_trim.call("\ufeff\u00a0")?
function(text){return text==null?"":core_trim.call(text)}:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var type,ret=results||[];if(arr!=null){type=jQuery.type(arr);if(arr.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(arr))core_push.call(ret,arr);else jQuery.merge(ret,arr)}return ret},inArray:function(elem,arr,i){var len;if(arr){if(core_indexOf)return core_indexOf.call(arr,elem,i);len=arr.length;i=i?i<0?Math.max(0,
len+i):i:0;for(;i<len;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){var l=second.length,i=first.length,j=0;if(typeof l==="number")for(;j<l;j++)first[i++]=second[j];else while(second[j]!==undefined)first[i++]=second[j++];first.length=i;return first},grep:function(elems,callback,inv){var retVal,ret=[],i=0,length=elems.length;inv=!!inv;for(;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal)ret.push(elems[i])}return ret},map:function(elems,callback,arg){var value,
key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length==="number"&&(length>0&&elems[0]&&elems[length-1]||length===0||jQuery.isArray(elems));if(isArray)for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null)ret[ret.length]=value}else for(key in elems){value=callback(elems[key],key,arg);if(value!=null)ret[ret.length]=value}return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];
context=fn;fn=tmp}if(!jQuery.isFunction(fn))return undefined;args=core_slice.call(arguments,2);proxy=function(){return fn.apply(context,args.concat(core_slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key==="object"){for(i in key)jQuery.access(elems,fn,i,key[i],1,emptyGet,value);chainable=1}else if(value!==undefined){exec=pass===undefined&&jQuery.isFunction(value);
if(bulk)if(exec){exec=fn;fn=function(elem,key,value){return exec.call(jQuery(elem),value)}}else{fn.call(elems,value);fn=null}if(fn)for(;i<length;i++)fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);chainable=1}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()}});jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete")setTimeout(jQuery.ready,1);else if(document.addEventListener){document.addEventListener("DOMContentLoaded",
DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false)}else{document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var top=false;try{top=window.frameElement==null&&document.documentElement}catch(e){}if(top&&top.doScroll)(function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}jQuery.ready()}})()}}return readyList.promise(obj)};jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),
function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});rootjQuery=jQuery(document);var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.split(core_rspace),function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&
[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}firing=false;if(list)if(stack){if(stack.length)fire(stack.shift())}else if(memory)list=[];else self.disable()},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=
jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg))list.push(arg)}else if(arg&&arg.length&&type!=="string")add(arg)})})(arguments);if(firing)firingLength=list.length;else if(memory){firingStart=start;fire(memory)}}return this},remove:function(){if(list)jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength)firingLength--;if(index<=firingIndex)firingIndex--}}});return this},has:function(fn){return jQuery.inArray(fn,
list)>-1},empty:function(){list=[];return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return!list},lock:function(){stack=undefined;if(!memory)self.disable();return this},locked:function(){return!stack},fireWith:function(context,args){args=args||[];args=[context,args.slice?args.slice():args];if(list&&(!fired||stack))if(firing)stack.push(args);else fire(args);return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};
return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var action=tuple[0],fn=
fns[i];deferred[tuple[1]](jQuery.isFunction(fn)?function(){var returned=fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise))returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);else newDefer[action+"With"](this===deferred?newDefer:this,[returned])}:newDefer[action])});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=
tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString)list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock);deferred[tuple[0]]=list.fire;deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func)func.call(deferred,deferred);return deferred},when:function(subordinate){var i=0,resolveValues=core_slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===
1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?core_slice.call(arguments):value;if(values===progressValues)deferred.notifyWith(contexts,values);else if(!--remaining)deferred.resolveWith(contexts,values)}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++)if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise))resolveValues[i].promise().done(updateFunc(i,
resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues));else--remaining}if(!remaining)deferred.resolveWith(resolveContexts,resolveValues);return deferred.promise()}});jQuery.support=function(){var support,all,a,select,opt,input,fragment,eventName,i,isSupported,clickFn,div=document.createElement("div");div.setAttribute("className","t");div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");
a=div.getElementsByTagName("a")[0];if(!all||!a||!all.length)return{};select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];a.style.cssText="top:1px;float:left;opacity:.5";support={leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")==="/a",
opacity:/^0.5/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:input.value==="on",optSelected:opt.selected,getSetAttribute:div.className!=="t",enctype:!!document.createElement("form").enctype,html5Clone:document.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:document.compatMode==="CSS1Compat",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,
boxSizingReliable:true,pixelPosition:false};input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=false}if(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent("onclick",clickFn=function(){support.noCloneEvent=false});div.cloneNode(true).fireEvent("onclick");div.detachEvent("onclick",clickFn)}input=document.createElement("input");input.value="t";input.setAttribute("type",
"radio");support.radioValue=input.value==="t";input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);fragment=document.createDocumentFragment();fragment.appendChild(div.lastChild);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;support.appendChecked=input.checked;fragment.removeChild(input);fragment.appendChild(div);if(div.attachEvent)for(i in{submit:true,change:true,focusin:true}){eventName="on"+i;isSupported=eventName in div;if(!isSupported){div.setAttribute(eventName,
"return;");isSupported=typeof div[eventName]==="function"}support[i+"Bubbles"]=isSupported}jQuery(function(){var container,div,tds,marginDiv,divReset="padding:0;margin:0;border:0;display:block;overflow:hidden;",body=document.getElementsByTagName("body")[0];if(!body)return;container=document.createElement("div");container.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";body.insertBefore(container,body.firstChild);div=document.createElement("div");container.appendChild(div);
div.innerHTML="<table><tr><td></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");tds[0].style.cssText="padding:0;margin:0;border:0;display:none";isSupported=tds[0].offsetHeight===0;tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&tds[0].offsetHeight===0;div.innerHTML="";div.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";
support.boxSizing=div.offsetWidth===4;support.doesNotIncludeMarginInBodyOffset=body.offsetTop!==1;if(window.getComputedStyle){support.pixelPosition=(window.getComputedStyle(div,null)||{}).top!=="1%";support.boxSizingReliable=(window.getComputedStyle(div,null)||{width:"4px"}).width==="4px";marginDiv=document.createElement("div");marginDiv.style.cssText=div.style.cssText=divReset;marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";div.appendChild(marginDiv);support.reliableMarginRight=
!parseFloat((window.getComputedStyle(marginDiv,null)||{}).marginRight)}if(typeof div.style.zoom!=="undefined"){div.innerHTML="";div.style.cssText=divReset+"width:1px;padding:1px;display:inline;zoom:1";support.inlineBlockNeedsLayout=div.offsetWidth===3;div.style.display="block";div.style.overflow="visible";div.innerHTML="<div></div>";div.firstChild.style.width="5px";support.shrinkWrapBlocks=div.offsetWidth!==3;container.style.zoom=1}body.removeChild(container);container=div=tds=marginDiv=null});fragment.removeChild(div);
all=a=select=opt=input=fragment=div=null;return support}();var rbrace=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{"embed":true,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000","applet":true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem))return;
var thisCache,ret,internalKey=jQuery.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if((!id||!cache[id]||!pvt&&!cache[id].data)&&getByName&&data===undefined)return;if(!id)if(isNode)elem[internalKey]=id=jQuery.deletedIds.pop()||jQuery.guid++;else id=internalKey;if(!cache[id]){cache[id]={};if(!isNode)cache[id].toJSON=jQuery.noop}if(typeof name==="object"||typeof name==="function")if(pvt)cache[id]=
jQuery.extend(cache[id],name);else cache[id].data=jQuery.extend(cache[id].data,name);thisCache=cache[id];if(!pvt){if(!thisCache.data)thisCache.data={};thisCache=thisCache.data}if(data!==undefined)thisCache[jQuery.camelCase(name)]=data;if(getByName){ret=thisCache[name];if(ret==null)ret=thisCache[jQuery.camelCase(name)]}else ret=thisCache;return ret},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem))return;var thisCache,i,l,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?
elem[jQuery.expando]:jQuery.expando;if(!cache[id])return;if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){if(!jQuery.isArray(name))if(name in thisCache)name=[name];else{name=jQuery.camelCase(name);if(name in thisCache)name=[name];else name=name.split(" ")}for(i=0,l=name.length;i<l;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id]))return}if(isNode)jQuery.cleanData([elem],true);
else if(jQuery.support.deleteExpando||cache!=cache.window)delete cache[id];else cache[id]=null},_data:function(elem,name,data){return jQuery.data(elem,name,data,true)},acceptData:function(elem){var noData=elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()];return!noData||noData!==true&&elem.getAttribute("classid")===noData}});jQuery.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===
1&&!jQuery._data(elem,"parsedAttrs")){attr=elem.attributes;for(l=attr.length;i<l;i++){name=attr[i].name;if(!name.indexOf("data-")){name=jQuery.camelCase(name.substring(5));dataAttr(elem,name,data[name])}}jQuery._data(elem,"parsedAttrs",true)}}return data}if(typeof key==="object")return this.each(function(){jQuery.data(this,key)});parts=key.split(".",2);parts[1]=parts[1]?"."+parts[1]:"";part=parts[1]+"!";return jQuery.access(this,function(value){if(value===undefined){data=this.triggerHandler("getData"+
part,[parts[0]]);if(data===undefined&&elem){data=jQuery.data(elem,key);data=dataAttr(elem,key,data)}return data===undefined&&parts[1]?this.data(parts[0]):data}parts[1]=value;this.each(function(){var self=jQuery(this);self.triggerHandler("setData"+part,parts);jQuery.data(this,key,value);self.triggerHandler("changeData"+part,parts)})},null,value,arguments.length>1,null,false)},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}});function dataAttr(elem,key,data){if(data===
undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){var name;for(name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name]))continue;if(name!=="toJSON")return false}return true}
jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=jQuery._data(elem,type);if(data)if(!queue||jQuery.isArray(data))queue=jQuery._data(elem,type,jQuery.makeArray(data));else queue.push(data);return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type===
"fx")queue.unshift("inprogress");delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks)hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery.removeData(elem,type+"queue",true);jQuery.removeData(elem,key,true)})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter)return jQuery.queue(this[0],
type);return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress")jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||
"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count)defer.resolveWith(elements,[elements])};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=jQuery._data(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var nodeHook,boolHook,fixSpecified,rclass=/[\t\r\n]/g,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,
rclickable=/^a(?:rea|)$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},
removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(value&&typeof value==="string"){classNames=value.split(core_rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1)if(!elem.className&&classNames.length===1)elem.className=
value;else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++)if(setClass.indexOf(" "+classNames[c]+" ")<0)setClass+=classNames[c]+" ";elem.className=jQuery.trim(setClass)}}}return this},removeClass:function(value){var removes,className,elem,c,cl,i,l;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(value&&typeof value==="string"||value===undefined){removes=(value||"").split(core_rspace);for(i=0,l=this.length;i<
l;i++){elem=this[i];if(elem.nodeType===1&&elem.className){className=(" "+elem.className+" ").replace(rclass," ");for(c=0,cl=removes.length;c<cl;c++)while(className.indexOf(" "+removes[c]+" ")>=0)className=className.replace(" "+removes[c]+" "," ");elem.className=value?jQuery.trim(className):""}}}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value))return this.each(function(i){jQuery(this).toggleClass(value.call(this,
i,this.className,stateVal),stateVal)});return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(core_rspace);while(className=classNames[i++]){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}}else if(type==="undefined"||type==="boolean"){if(this.className)jQuery._data(this,"__className__",this.className);this.className=this.className||value===false?"":jQuery._data(this,"__className__")||""}})},
hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++)if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return true;return false},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined)return ret;ret=elem.value;return typeof ret==="string"?
ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val,self=jQuery(this);if(this.nodeType!==1)return;if(isFunction)val=value.call(this,i,self.val());else val=value;if(val==null)val="";else if(typeof val==="number")val+="";else if(jQuery.isArray(val))val=jQuery.map(val,function(value){return value==null?"":value+""});hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,
val,"value")===undefined)this.value=val})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===
null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one)return value;values.push(value)}}return values},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0});if(!values.length)elem.selectedIndex=-1;return values}}},attrFn:{},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===
8||nType===2)return;if(pass&&jQuery.isFunction(jQuery.fn[name]))return jQuery(elem)[name](value);if(typeof elem.getAttribute==="undefined")return jQuery.prop(elem,name,value);notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook)}if(value!==undefined)if(value===null){jQuery.removeAttr(elem,name);return}else if(hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else{elem.setAttribute(name,
value+"");return value}else if(hooks&&"get"in hooks&&notxml&&(ret=hooks.get(elem,name))!==null)return ret;else{ret=elem.getAttribute(name);return ret===null?undefined:ret}},removeAttr:function(elem,value){var propName,attrNames,name,isBool,i=0;if(value&&elem.nodeType===1){attrNames=value.split(core_rspace);for(;i<attrNames.length;i++){name=attrNames[i];if(name){propName=jQuery.propFix[name]||name;isBool=rboolean.test(name);if(!isBool)jQuery.attr(elem,name,"");elem.removeAttribute(getSetAttribute?
name:propName);if(isBool&&propName in elem)elem[propName]=false}}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode)jQuery.error("type property can't be changed");else if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val)elem.value=val;return value}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button"))return nodeHook.get(elem,name);return name in elem?
elem.value:null},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button"))return nodeHook.set(elem,value,name);elem.value=value}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||
nType===3||nType===8||nType===2)return;notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined)if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined)return ret;else return elem[name]=value;else if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null)return ret;else return elem[name]},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?
parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}});boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===true||typeof property!=="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined},set:function(elem,value,name){var propName;if(value===false)jQuery.removeAttr(elem,name);else{propName=jQuery.propFix[name]||name;if(propName in elem)elem[propName]=
true;elem.setAttribute(name,name.toLowerCase())}return name}};if(!getSetAttribute){fixSpecified={name:true,id:true,coords:true};nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&(fixSpecified[name]?ret.value!=="":ret.specified)?ret.value:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret)}return ret.value=value+""}};jQuery.each(["width","height"],
function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value}}})});jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){if(value==="")value="false";nodeHook.set(elem,value,name)}}}if(!jQuery.support.hrefNormalized)jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,
2);return ret===null?undefined:ret}})});if(!jQuery.support.style)jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return elem.style.cssText=value+""}};if(!jQuery.support.optSelected)jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode)parent.parentNode.selectedIndex}return null}});if(!jQuery.support.enctype)jQuery.propFix.enctype=
"encoding";if(!jQuery.support.checkOn)jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}})});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*|)(?:\.(.+)|)$/,rhoverHack=
/(?:^|\s)hover(\.\S+|)\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,handlers,special;if(elem.nodeType===3||elem.nodeType===8||!types||!handler||!(elemData=jQuery._data(elem)))return;
if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid)handler.guid=jQuery.guid++;events=elemData.events;if(!events)elemData.events=events={};eventHandle=elemData.handle;if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof jQuery!=="undefined"&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.dispatch.apply(eventHandle.elem,arguments):undefined};eventHandle.elem=elem}types=jQuery.trim(hoverHack(types)).split(" ");for(t=
0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=tns[1];namespaces=(tns[2]||"").split(".").sort();special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);handlers=events[type];
if(!handlers){handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false)if(elem.addEventListener)elem.addEventListener(type,eventHandle,false);else if(elem.attachEvent)elem.attachEvent("on"+type,eventHandle)}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid)handleObj.handler.guid=handler.guid}if(selector)handlers.splice(handlers.delegateCount++,0,handleObj);else handlers.push(handleObj);jQuery.event.global[type]=
true}elem=null},global:{},remove:function(elem,types,handler,selector,mappedTypes){var t,tns,type,origType,namespaces,origCount,j,events,special,eventType,handleObj,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(!elemData||!(events=elemData.events))return;types=jQuery.trim(hoverHack(types||"")).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[];type=origType=tns[1];namespaces=tns[2];if(!type){for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,
true);continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;eventType=events[type]||[];origCount=eventType.length;namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(j=0;j<eventType.length;j++){handleObj=eventType[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!namespaces||namespaces.test(handleObj.namespace))&&(!selector||selector===
handleObj.selector||selector==="**"&&handleObj.selector)){eventType.splice(j--,1);if(handleObj.selector)eventType.delegateCount--;if(special.remove)special.remove.call(elem,handleObj)}}if(eventType.length===0&&origCount!==eventType.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false)jQuery.removeEvent(elem,type,elemData.handle);delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;jQuery.removeData(elem,"events",true)}},customEvent:{"getData":true,
"setData":true,"changeData":true},trigger:function(event,data,elem,onlyHandlers){if(elem&&(elem.nodeType===3||elem.nodeType===8))return;var cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType,type=event.type||event,namespaces=[];if(rfocusMorph.test(type+jQuery.event.triggered))return;if(type.indexOf("!")>=0){type=type.slice(0,-1);exclusive=true}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}if((!elem||jQuery.event.customEvent[type])&&
!jQuery.event.global[type])return;event=typeof event==="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type);event.type=type;event.isTrigger=true;event.exclusive=exclusive;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;ontype=type.indexOf(":")<0?"on"+type:"";if(!elem){cache=jQuery.cache;for(i in cache)if(cache[i].events&&cache[i].events[type])jQuery.event.trigger(event,
data,cache[i].handle.elem,true);return}event.result=undefined;if(!event.target)event.target=elem;data=data!=null?jQuery.makeArray(data):[];data.unshift(event);special=jQuery.event.special[type]||{};if(special.trigger&&special.trigger.apply(elem,data)===false)return;eventPath=[[elem,special.bindType||type]];if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode;for(old=elem;cur;cur=cur.parentNode){eventPath.push([cur,
bubbleType]);old=cur}if(old===(elem.ownerDocument||document))eventPath.push([old.defaultView||old.parentWindow||window,bubbleType])}for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++){cur=eventPath[i][0];event.type=eventPath[i][1];handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle");if(handle)handle.apply(cur,data);handle=ontype&&cur[ontype];if(handle&&jQuery.acceptData(cur)&&handle.apply&&handle.apply(cur,data)===false)event.preventDefault()}event.type=type;
if(!onlyHandlers&&!event.isDefaultPrevented())if((!special._default||special._default.apply(elem.ownerDocument,data)===false)&&!(type==="click"&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem))if(ontype&&elem[type]&&(type!=="focus"&&type!=="blur"||event.target.offsetWidth!==0)&&!jQuery.isWindow(elem)){old=elem[ontype];if(old)elem[ontype]=null;jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(old)elem[ontype]=old}return event.result},dispatch:function(event){event=jQuery.event.fix(event||
window.event);var i,j,cur,ret,selMatch,matched,matches,handleObj,sel,related,handlers=(jQuery._data(this,"events")||{})[event.type]||[],delegateCount=handlers.delegateCount,args=core_slice.call(arguments),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[];args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false)return;if(delegateCount&&!(event.button&&event.type==="click"))for(cur=event.target;cur!=
this;cur=cur.parentNode||this)if(cur.disabled!==true||event.type!=="click"){selMatch={};matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector;if(selMatch[sel]===undefined)selMatch[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length;if(selMatch[sel])matches.push(handleObj)}if(matches.length)handlerQueue.push({elem:cur,matches:matches})}if(handlers.length>delegateCount)handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)});
for(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++){matched=handlerQueue[i];event.currentTarget=matched.elem;for(j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++){handleObj=matched.matches[j];if(run_all||!event.namespace&&!handleObj.namespace||event.namespace_re&&event.namespace_re.test(handleObj.namespace)){event.data=handleObj.data;event.handleObj=handleObj;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);
if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch)special.postDispatch.call(this,event);return event.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null)event.which=original.charCode!=
null?original.charCode:original.keyCode;return event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||
0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.relatedTarget&&fromElement)event.relatedTarget=fromElement===event.target?original.toElement:fromElement;if(!event.which&&button!==undefined)event.which=button&1?1:button&2?3:button&4?2:0;return event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||
{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=jQuery.Event(originalEvent);for(i=copy.length;i;){prop=copy[--i];event[prop]=originalEvent[prop]}if(!event.target)event.target=originalEvent.srcElement||document;if(event.target.nodeType===3)event.target=event.target.parentNode;event.metaKey=!!event.metaKey;return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,
namespaces,eventHandle){if(jQuery.isWindow(this))this.onbeforeunload=eventHandle},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle)this.onbeforeunload=null}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true,originalEvent:{}});if(bubble)jQuery.event.trigger(e,null,elem);else jQuery.event.dispatch.call(elem,e);if(e.isDefaultPrevented())event.preventDefault()}};jQuery.event.handle=jQuery.event.dispatch;jQuery.removeEvent=
document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener)elem.removeEventListener(type,handle,false)}:function(elem,type,handle){var name="on"+type;if(elem.detachEvent){if(typeof elem[name]==="undefined")elem[name]=null;elem.detachEvent(name,handle)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.returnValue===
false||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse}else this.type=src;if(props)jQuery.extend(this,props);this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};function returnFalse(){return false}function returnTrue(){return true}jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e)return;if(e.preventDefault)e.preventDefault();else e.returnValue=false},stopPropagation:function(){this.isPropagationStopped=
returnTrue;var e=this.originalEvent;if(!e)return;if(e.stopPropagation)e.stopPropagation();e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,
related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!jQuery.support.submitBubbles)jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return false;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,
"button")?elem.form:undefined;if(form&&!jQuery._data(form,"_submit_attached")){jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=true});jQuery._data(form,"_submit_attached",true)}})},postDispatch:function(event){if(event._submit_bubble){delete event._submit_bubble;if(this.parentNode&&!event.isTrigger)jQuery.event.simulate("submit",this.parentNode,event,true)}},teardown:function(){if(jQuery.nodeName(this,"form"))return false;jQuery.event.remove(this,"._submit")}};if(!jQuery.support.changeBubbles)jQuery.event.special.change=
{setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){jQuery.event.add(this,"propertychange._change",function(event){if(event.originalEvent.propertyName==="checked")this._just_changed=true});jQuery.event.add(this,"click._change",function(event){if(this._just_changed&&!event.isTrigger)this._just_changed=false;jQuery.event.simulate("change",this,event,true)})}return false}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;if(rformElems.test(elem.nodeName)&&
!jQuery._data(elem,"_change_attached")){jQuery.event.add(elem,"change._change",function(event){if(this.parentNode&&!event.isSimulated&&!event.isTrigger)jQuery.event.simulate("change",this.parentNode,event,true)});jQuery._data(elem,"_change_attached",true)}})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||elem.type!=="radio"&&elem.type!=="checkbox")return event.handleObj.handler.apply(this,arguments)},teardown:function(){jQuery.event.remove(this,"._change");
return!rformElems.test(this.nodeName)}};if(!jQuery.support.focusinBubbles)jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function(){if(attaches++===0)document.addEventListener(orig,handler,true)},teardown:function(){if(--attaches===0)document.removeEventListener(orig,handler,true)}}});jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,
type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types)this.on(type,selector,data,types[type],one);return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null)if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}if(fn===false)fn=returnFalse;else if(!fn)return this;if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};
fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types===
"object"){for(type in types)this.off(type,selector,types[type]);return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false)fn=returnFalse;return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},live:function(types,data,fn){jQuery(this.context).on(types,this.selector,data,fn);return this},die:function(types,fn){jQuery(this.context).off(types,
this.selector||"**",fn);return this},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){if(this[0])return jQuery.event.trigger(type,data,this[0],true)},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,
i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false};toggler.guid=guid;while(i<args.length)args[i++].guid=guid;return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+
"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null}return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)};if(rkeyEvent.test(name))jQuery.event.fixHooks[name]=jQuery.event.keyHooks;if(rmouseEvent.test(name))jQuery.event.fixHooks[name]=jQuery.event.mouseHooks});(function(window,undefined){var cachedruns,assertGetIdNotName,Expr,getText,isXML,contains,compile,sortOrder,hasDuplicate,
outermostContext,baseHasDuplicate=true,strundefined="undefined",expando=("sizcache"+Math.random()).replace(".",""),Token=String,document=window.document,docElem=document.documentElement,dirruns=0,done=0,pop=[].pop,push=[].push,slice=[].slice,indexOf=[].indexOf||function(elem){var i=0,len=this.length;for(;i<len;i++)if(this[i]===elem)return i;return-1},markFunction=function(fn,value){fn[expando]=value==null||value;return fn},createCache=function(){var cache={},keys=[];return markFunction(function(key,
value){if(keys.push(key)>Expr.cacheLength)delete cache[keys.shift()];return cache[key+" "]=value},cache)},classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),operators="([*^$|!~]?=)",attributes="\\["+whitespace+"*("+characterEncoding+")"+whitespace+"*(?:"+operators+whitespace+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+identifier+")|)|)"+whitespace+
"*\\]",pseudos=":("+characterEncoding+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+attributes+")|[^:]|\\\\.)*|.*))\\)|)",pos=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)",rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([\\x20\\t\\r\\n\\f>+~])"+whitespace+"*"),rpseudo=new RegExp(pseudos),rquickExpr=
/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,rnot=/^:not/,rsibling=/[\x20\t\r\n\f]*[+~]/,rendsWithNot=/:not\($/,rheader=/h\d/i,rinputs=/input|select|textarea|button/i,rbackslash=/\\(?!\\)/g,matchExpr={"ID":new RegExp("^#("+characterEncoding+")"),"CLASS":new RegExp("^\\.("+characterEncoding+")"),"NAME":new RegExp("^\\[name=['\"]?("+characterEncoding+")['\"]?\\]"),"TAG":new RegExp("^("+characterEncoding.replace("w","w*")+")"),"ATTR":new RegExp("^"+attributes),"PSEUDO":new RegExp("^"+pseudos),"POS":new RegExp(pos,
"i"),"CHILD":new RegExp("^:(only|nth|first|last)-child(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),"needsContext":new RegExp("^"+whitespace+"*[>+~]|"+pos,"i")},assert=function(fn){var div=document.createElement("div");try{return fn(div)}catch(e){return false}finally{div=null}},assertTagNameNoComments=assert(function(div){div.appendChild(document.createComment(""));return!div.getElementsByTagName("*").length}),assertHrefNotNormalized=
assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild&&typeof div.firstChild.getAttribute!==strundefined&&div.firstChild.getAttribute("href")==="#"}),assertAttributes=assert(function(div){div.innerHTML="<select></select>";var type=typeof div.lastChild.getAttribute("multiple");return type!=="boolean"&&type!=="string"}),assertUsableClassName=assert(function(div){div.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!div.getElementsByClassName||!div.getElementsByClassName("e").length)return false;
div.lastChild.className="e";return div.getElementsByClassName("e").length===2}),assertUsableName=assert(function(div){div.id=expando+0;div.innerHTML="<a name='"+expando+"'></a><div name='"+expando+"'></div>";docElem.insertBefore(div,docElem.firstChild);var pass=document.getElementsByName&&document.getElementsByName(expando).length===2+document.getElementsByName(expando+0).length;assertGetIdNotName=!document.getElementById(expando);docElem.removeChild(div);return pass});try{slice.call(docElem.childNodes,
0)[0].nodeType}catch(e){slice=function(i){var elem,results=[];for(;elem=this[i];i++)results.push(elem);return results}}function Sizzle(selector,context,results,seed){results=results||[];context=context||document;var match,elem,xml,m,nodeType=context.nodeType;if(!selector||typeof selector!=="string")return results;if(nodeType!==1&&nodeType!==9)return[];xml=isXML(context);if(!xml&&!seed)if(match=rquickExpr.exec(selector))if(m=match[1])if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===
m){results.push(elem);return results}}else return results}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}else if(match[2]){push.apply(results,slice.call(context.getElementsByTagName(selector),0));return results}else if((m=match[3])&&assertUsableClassName&&context.getElementsByClassName){push.apply(results,slice.call(context.getElementsByClassName(m),0));return results}return select(selector.replace(rtrim,
"$1"),context,results,seed,xml)}Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){return Sizzle(expr,null,null,[elem]).length>0};function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=
+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--)if(seed[j=matchIndexes[i]])seed[j]=!(matches[j]=seed[j])})})}getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType)if(nodeType===1||nodeType===9||nodeType===11)if(typeof elem.textContent==="string")return elem.textContent;else for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem);else{if(nodeType===3||nodeType===
4)return elem.nodeValue}else for(;node=elem[i];i++)ret+=getText(node);return ret};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};contains=Sizzle.contains=docElem.contains?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&adown.contains&&adown.contains(bup))}:docElem.compareDocumentPosition?function(a,b){return b&&
!!(a.compareDocumentPosition(b)&16)}:function(a,b){while(b=b.parentNode)if(b===a)return true;return false};Sizzle.attr=function(elem,name){var val,xml=isXML(elem);if(!xml)name=name.toLowerCase();if(val=Expr.attrHandle[name])return val(elem);if(xml||assertAttributes)return elem.getAttribute(name);val=elem.getAttributeNode(name);return val?typeof elem[name]==="boolean"?elem[name]?name:null:val.specified?val.value:null:null};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,
attrHandle:assertHrefNotNormalized?{}:{"href":function(elem){return elem.getAttribute("href",2)},"type":function(elem){return elem.getAttribute("type")}},find:{"ID":assertGetIdNotName?function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}}:function(id,context,xml){if(typeof context.getElementById!==strundefined&&!xml){var m=context.getElementById(id);return m?m.id===id||typeof m.getAttributeNode!==strundefined&&
m.getAttributeNode("id").value===id?[m]:undefined:[]}},"TAG":assertTagNameNoComments?function(tag,context){if(typeof context.getElementsByTagName!==strundefined)return context.getElementsByTagName(tag)}:function(tag,context){var results=context.getElementsByTagName(tag);if(tag==="*"){var elem,tmp=[],i=0;for(;elem=results[i];i++)if(elem.nodeType===1)tmp.push(elem);return tmp}return results},"NAME":assertUsableName&&function(tag,context){if(typeof context.getElementsByName!==strundefined)return context.getElementsByName(name)},
"CLASS":assertUsableClassName&&function(className,context,xml){if(typeof context.getElementsByClassName!==strundefined&&!xml)return context.getElementsByClassName(className)}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(match){match[1]=match[1].replace(rbackslash,"");match[3]=(match[4]||match[5]||"").replace(rbackslash,"");if(match[2]==="~=")match[3]=" "+match[3]+" ";return match.slice(0,
4)},"CHILD":function(match){match[1]=match[1].toLowerCase();if(match[1]==="nth"){if(!match[2])Sizzle.error(match[0]);match[3]=+(match[3]?match[4]+(match[5]||1):2*(match[2]==="even"||match[2]==="odd"));match[4]=+(match[6]+match[7]||match[2]==="odd")}else if(match[2])Sizzle.error(match[0]);return match},"PSEUDO":function(match){var unquoted,excess;if(matchExpr["CHILD"].test(match[0]))return null;if(match[3])match[2]=match[3];else if(unquoted=match[4]){if(rpseudo.test(unquoted)&&(excess=tokenize(unquoted,
true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){unquoted=unquoted.slice(0,excess);match[0]=match[0].slice(0,excess)}match[2]=unquoted}return match.slice(0,3)}},filter:{"ID":assertGetIdNotName?function(id){id=id.replace(rbackslash,"");return function(elem){return elem.getAttribute("id")===id}}:function(id){id=id.replace(rbackslash,"");return function(elem){var node=typeof elem.getAttributeNode!==strundefined&&elem.getAttributeNode("id");return node&&node.value===id}},
"TAG":function(nodeName){if(nodeName==="*")return function(){return true};nodeName=nodeName.replace(rbackslash,"").toLowerCase();return function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},"CLASS":function(className){var pattern=classCache[expando][className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(elem.className||typeof elem.getAttribute!==strundefined&&elem.getAttribute("class")||
"")})},"ATTR":function(name,operator,check){return function(elem,context){var result=Sizzle.attr(elem,name);if(result==null)return operator==="!=";if(!operator)return true;result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.substr(result.length-check.length)===check:operator==="~="?(" "+result+" ").indexOf(check)>-1:operator==="|="?result===check||
result.substr(0,check.length+1)===check+"-":false}},"CHILD":function(type,argument,first,last){if(type==="nth")return function(elem){var node,diff,parent=elem.parentNode;if(first===1&&last===0)return true;if(parent){diff=0;for(node=parent.firstChild;node;node=node.nextSibling)if(node.nodeType===1){diff++;if(elem===node)break}}diff-=last;return diff===first||diff%first===0&&diff/first>=0};return function(elem){var node=elem;switch(type){case "only":case "first":while(node=node.previousSibling)if(node.nodeType===
1)return false;if(type==="first")return true;node=elem;case "last":while(node=node.nextSibling)if(node.nodeType===1)return false;return true}}},"PSEUDO":function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando])return fn(argument);if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),
i=matched.length;while(i--){idx=indexOf.call(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{"not":markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--)if(elem=unmatched[i])seed[i]=!(matches[i]=elem)}):function(elem,context,xml){input[0]=elem;
matcher(input,null,xml,results);return!results.pop()}}),"has":markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),"contains":markFunction(function(text){return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),"enabled":function(elem){return elem.disabled===false},"disabled":function(elem){return elem.disabled===true},"checked":function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||
nodeName==="option"&&!!elem.selected},"selected":function(elem){if(elem.parentNode)elem.parentNode.selectedIndex;return elem.selected===true},"parent":function(elem){return!Expr.pseudos["empty"](elem)},"empty":function(elem){var nodeType;elem=elem.firstChild;while(elem){if(elem.nodeName>"@"||(nodeType=elem.nodeType)===3||nodeType===4)return false;elem=elem.nextSibling}return true},"header":function(elem){return rheader.test(elem.nodeName)},"text":function(elem){var type,attr;return elem.nodeName.toLowerCase()===
"input"&&(type=elem.type)==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()===type)},"radio":createInputPseudo("radio"),"checkbox":createInputPseudo("checkbox"),"file":createInputPseudo("file"),"password":createInputPseudo("password"),"image":createInputPseudo("image"),"submit":createButtonPseudo("submit"),"reset":createButtonPseudo("reset"),"button":function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},"input":function(elem){return rinputs.test(elem.nodeName)},
"focus":function(elem){var doc=elem.ownerDocument;return elem===doc.activeElement&&(!doc.hasFocus||doc.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},"active":function(elem){return elem===elem.ownerDocument.activeElement},"first":createPositionalPseudo(function(){return[0]}),"last":createPositionalPseudo(function(matchIndexes,length){return[length-1]}),"eq":createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),"even":createPositionalPseudo(function(matchIndexes,
length){for(var i=0;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"odd":createPositionalPseudo(function(matchIndexes,length){for(var i=1;i<length;i+=2)matchIndexes.push(i);return matchIndexes}),"lt":createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),"gt":createPositionalPseudo(function(matchIndexes,length,argument){for(var i=argument<0?argument+length:argument;++i<length;)matchIndexes.push(i);
return matchIndexes})}};function siblingCheck(a,b,ret){if(a===b)return ret;var cur=a.nextSibling;while(cur){if(cur===b)return-1;cur=cur.nextSibling}return 1}sortOrder=docElem.compareDocumentPosition?function(a,b){if(a===b){hasDuplicate=true;return 0}return(!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition:a.compareDocumentPosition(b)&4)?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}else if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var al,
bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup)return siblingCheck(a,b);else if(!aup)return-1;else if(!bup)return 1;while(cur){ap.unshift(cur);cur=cur.parentNode}cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode}al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++)if(ap[i]!==bp[i])return siblingCheck(ap[i],bp[i]);return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)};[0,0].sort(sortOrder);baseHasDuplicate=!hasDuplicate;Sizzle.uniqueSort=function(results){var elem,
duplicates=[],i=1,j=0;hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(;elem=results[i];i++)if(elem===results[i-1])j=duplicates.push(i);while(j--)results.splice(duplicates[j],1)}return results};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg);};function tokenize(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[expando][selector+" "];if(cached)return parseOnly?0:cached.slice(0);soFar=selector;
groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match)soFar=soFar.slice(match[0].length)||soFar;groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){tokens.push(matched=new Token(match.shift()));soFar=soFar.slice(matched.length);matched.type=match[0].replace(rtrim," ")}for(type in Expr.filter)if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){tokens.push(matched=new Token(match.shift()));soFar=
soFar.slice(matched.length);matched.type=type;matched.matches=match}if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&combinator.dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir])if(checkNonElements||elem.nodeType===1)return matcher(elem,context,xml)}:function(elem,context,xml){if(!xml){var cache,
dirkey=dirruns+" "+doneName+" ",cachedkey=dirkey+cachedruns;while(elem=elem[dir])if(checkNonElements||elem.nodeType===1)if((cache=elem[expando])===cachedkey)return elem.sizset;else if(typeof cache==="string"&&cache.indexOf(dirkey)===0){if(elem.sizset)return elem}else{elem[expando]=cachedkey;if(matcher(elem,context,xml)){elem.sizset=true;return elem}elem.sizset=false}}else while(elem=elem[dir])if(checkNonElements||elem.nodeType===1)if(matcher(elem,context,xml))return elem}}function elementMatcher(matchers){return matchers.length>
1?function(elem,context,xml){var i=matchers.length;while(i--)if(!matchers[i](elem,context,xml))return false;return true}:matchers[0]}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++)if(elem=unmatched[i])if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped)map.push(i)}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando])postFilter=
setMatcher(postFilter);if(postFinder&&!postFinder[expando])postFinder=setMatcher(postFinder,postSelector);return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher)matcher(matcherIn,
matcherOut,context,xml);if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--)if(elem=temp[i])matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--)if(elem=matcherOut[i])temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--)if((elem=matcherOut[i])&&(temp=postFinder?indexOf.call(seed,elem):preMap[i])>-1)seed[temp]=!(results[temp]=
elem)}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder)postFinder(null,results,matcherOut,xml);else push.apply(results,matcherOut)}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),
matchAnyContext=addCombinator(function(elem){return indexOf.call(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){return!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml))}];for(;i<len;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=
++i;for(;j<len;j++)if(Expr.relative[tokens[j].type])break;return setMatcher(i>1&&elementMatcher(matchers),i>1&&tokens.slice(0,i-1).join("").replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&tokens.join(""))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,
xml,results,expandContext){var elem,j,matcher,setMatched=[],matchedCount=0,i="0",unmatched=seed&&[],outermost=expandContext!=null,contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",expandContext&&context.parentNode||context),dirrunsUnique=dirruns+=contextBackup==null?1:Math.E;if(outermost){outermostContext=context!==document&&context;cachedruns=superMatcher.el}for(;(elem=elems[i])!=null;i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j];j++)if(matcher(elem,context,
xml)){results.push(elem);break}if(outermost){dirruns=dirrunsUnique;cachedruns=++superMatcher.el}}if(bySet){if(elem=!matcher&&elem)matchedCount--;if(seed)unmatched.push(elem)}}matchedCount+=i;if(bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j];j++)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)while(i--)if(!(unmatched[i]||setMatched[i]))setMatched[i]=pop.call(results);setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>
0&&matchedCount+setMatchers.length>1)Sizzle.uniqueSort(results)}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};superMatcher.el=0;return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,group){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[expando][selector+" "];if(!cached){if(!group)group=tokenize(selector);i=group.length;while(i--){cached=matcherFromTokens(group[i]);if(cached[expando])setMatchers.push(cached);
else elementMatchers.push(cached)}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers))}return cached};function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++)Sizzle(selector,contexts[i],results);return results}function select(selector,context,results,seed,xml){var i,tokens,token,type,find,match=tokenize(selector),j=match.length;if(!seed)if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type===
"ID"&&context.nodeType===9&&!xml&&Expr.relative[tokens[1].type]){context=Expr.find["ID"](token.matches[0].replace(rbackslash,""),context,xml)[0];if(!context)return results;selector=selector.slice(tokens.shift().length)}for(i=matchExpr["POS"].test(selector)?-1:tokens.length-1;i>=0;i--){token=tokens[i];if(Expr.relative[type=token.type])break;if(find=Expr.find[type])if(seed=find(token.matches[0].replace(rbackslash,""),rsibling.test(tokens[0].type)&&context.parentNode||context,xml)){tokens.splice(i,1);
selector=seed.length&&tokens.join("");if(!selector){push.apply(results,slice.call(seed,0));return results}break}}}compile(selector,match)(seed,context,xml,results,rsibling.test(selector));return results}if(document.querySelectorAll)(function(){var disconnectedMatch,oldSelect=select,rescape=/'|\\/g,rattributeQuotes=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,rbuggyQSA=[":focus"],rbuggyMatches=[":active"],matches=docElem.matchesSelector||docElem.mozMatchesSelector||docElem.webkitMatchesSelector||
docElem.oMatchesSelector||docElem.msMatchesSelector;assert(function(div){div.innerHTML="<select><option selected=''></option></select>";if(!div.querySelectorAll("[selected]").length)rbuggyQSA.push("\\["+whitespace+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)");if(!div.querySelectorAll(":checked").length)rbuggyQSA.push(":checked")});assert(function(div){div.innerHTML="<p test=''></p>";if(div.querySelectorAll("[test^='']").length)rbuggyQSA.push("[*^$]="+whitespace+"*(?:\"\"|'')");div.innerHTML=
"<input type='hidden'/>";if(!div.querySelectorAll(":enabled").length)rbuggyQSA.push(":enabled",":disabled")});rbuggyQSA=new RegExp(rbuggyQSA.join("|"));select=function(selector,context,results,seed,xml){if(!seed&&!xml&&!rbuggyQSA.test(selector)){var groups,i,old=true,nid=expando,newContext=context,newSelector=context.nodeType===9&&selector;if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if(old=context.getAttribute("id"))nid=old.replace(rescape,"\\$&");
else context.setAttribute("id",nid);nid="[id='"+nid+"'] ";i=groups.length;while(i--)groups[i]=nid+groups[i].join("");newContext=rsibling.test(selector)&&context.parentNode||context;newSelector=groups.join(",")}if(newSelector)try{push.apply(results,slice.call(newContext.querySelectorAll(newSelector),0));return results}catch(qsaError){}finally{if(!old)context.removeAttribute("id")}}return oldSelect(selector,context,results,seed,xml)};if(matches){assert(function(div){disconnectedMatch=matches.call(div,
"div");try{matches.call(div,"[test!='']:sizzle");rbuggyMatches.push("!=",pseudos)}catch(e){}});rbuggyMatches=new RegExp(rbuggyMatches.join("|"));Sizzle.matchesSelector=function(elem,expr){expr=expr.replace(rattributeQuotes,"='$1']");if(!isXML(elem)&&!rbuggyMatches.test(expr)&&!rbuggyQSA.test(expr))try{var ret=matches.call(elem,expr);if(ret||disconnectedMatch||elem.document&&elem.document.nodeType!==11)return ret}catch(e){}return Sizzle(expr,null,null,[elem]).length>0}}})();Expr.pseudos["nth"]=Expr.pseudos["eq"];
function setFilters(){}Expr.filters=setFilters.prototype=Expr.pseudos;Expr.setFilters=new setFilters;Sizzle.attr=jQuery.attr;jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains})(window);var runtil=/Until$/,rparentsprev=/^(?:parents|prev(?:Until|All))/,isSimple=/^.[^:#\[\.,]*$/,rneedsContext=jQuery.expr.match.needsContext,guaranteedUnique={children:true,
contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var i,l,length,n,r,ret,self=this;if(typeof selector!=="string")return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++)if(jQuery.contains(self[i],this))return true});ret=this.pushStack("","find",selector);for(i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0)for(n=length;n<ret.length;n++)for(r=0;r<length;r++)if(ret[r]===ret[n]){ret.splice(n--,1);break}}return ret},has:function(target){var i,
targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;i<len;i++)if(jQuery.contains(this,targets[i]))return true})},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector)},is:function(selector){return!!selector&&(typeof selector==="string"?rneedsContext.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>
0:this.filter(selector).length>0)},closest:function(selectors,context){var cur,i=0,l=this.length,ret=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){cur=this[i];while(cur&&cur.ownerDocument&&cur!==context&&cur.nodeType!==11){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}cur=cur.parentNode}}ret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,"closest",selectors)},index:function(elem){if(!elem)return this[0]&&
this[0].parentNode?this.prevAll().length:-1;if(typeof elem==="string")return jQuery.inArray(this[0],jQuery(elem));return jQuery.inArray(elem.jquery?elem[0]:elem,this)},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},addBack:function(selector){return this.add(selector==
null?this.prevObject:this.prevObject.filter(selector))}});jQuery.fn.andSelf=jQuery.fn.addBack;function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11}function sibling(cur,dir){do cur=cur[dir];while(cur&&cur.nodeType!==1);return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",
until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},
contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name))selector=until;if(selector&&typeof selector==="string")ret=jQuery.filter(selector,ret);ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if(this.length>1&&rparentsprev.test(name))ret=ret.reverse();return this.pushStack(ret,
name,core_slice.call(arguments).join(","))}});jQuery.extend({filter:function(expr,elems,not){if(not)expr=":not("+expr+")";return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1)matched.push(cur);cur=cur[dir]}return matched},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling)if(n.nodeType===
1&&n!==elem)r.push(n);return r}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});else if(qualifier.nodeType)return jQuery.grep(elements,function(elem,i){return elem===qualifier===keep});else if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1});if(isSimple.test(qualifier))return jQuery.filter(qualifier,
filtered,!keep);else qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem,i){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)while(list.length)safeFrag.createElement(list.pop());return safeFrag}var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rcheckableType=/^(?:checkbox|radio)$/,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,
wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=
wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize)wrapMap._default=[1,"X<div>","</div>"];jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});
if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode)wrap.insertBefore(this[0]);wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))});return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length)contents.wrapAll(html);
else self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body"))jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1||this.nodeType===11)this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,true,
function(elem){if(this.nodeType===1||this.nodeType===11)this.insertBefore(elem,this.firstChild)})},before:function(){if(!isDisconnected(this[0]))return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this)});if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(set,this),"before",this.selector)}},after:function(){if(!isDisconnected(this[0]))return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)});
if(arguments.length){var set=jQuery.clean(arguments);return this.pushStack(jQuery.merge(this,set),"after",this.selector)}},remove:function(selector,keepData){var elem,i=0;for(;(elem=this[i])!=null;i++)if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem])}if(elem.parentNode)elem.parentNode.removeChild(elem)}return this},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===
1)jQuery.cleanData(elem.getElementsByTagName("*"));while(elem.firstChild)elem.removeChild(elem.firstChild)}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return elem.nodeType===
1?elem.innerHTML.replace(rinlinejQuery,""):undefined;if(typeof value==="string"&&!rnoInnerhtml.test(value)&&(jQuery.support.htmlSerialize||!rnoshimcache.test(value))&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));elem.innerHTML=value}}elem=0}catch(e){}}if(elem)this.empty().append(value)},
null,value,arguments.length)},replaceWith:function(value){if(!isDisconnected(this[0])){if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))});if(typeof value!=="string")value=jQuery(value).detach();return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next)jQuery(next).before(value);else jQuery(parent).append(value)})}return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?
value():value),"replaceWith",value):this},detach:function(selector){return this.remove(selector,true)},domManip:function(args,table,callback){args=[].concat.apply([],args);var results,first,fragment,iNoClone,i=0,value=args[0],scripts=[],l=this.length;if(!jQuery.support.checkClone&&l>1&&typeof value==="string"&&rchecked.test(value))return this.each(function(){jQuery(this).domManip(args,table,callback)});if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,
i,table?self.html():undefined);self.domManip(args,table,callback)});if(this[0]){results=jQuery.buildFragment(args,this,scripts);fragment=results.fragment;first=fragment.firstChild;if(fragment.childNodes.length===1)fragment=first;if(first){table=table&&jQuery.nodeName(first,"tr");for(iNoClone=results.cacheable||l-1;i<l;i++)callback.call(table&&jQuery.nodeName(this[i],"table")?findOrAppend(this[i],"tbody"):this[i],i===iNoClone?fragment:jQuery.clone(fragment,true,true))}fragment=first=null;if(scripts.length)jQuery.each(scripts,
function(i,elem){if(elem.src)if(jQuery.ajax)jQuery.ajax({url:elem.src,type:"GET",dataType:"script",async:false,global:false,"throws":true});else jQuery.error("no ajax");else jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,""));if(elem.parentNode)elem.parentNode.removeChild(elem)})}return this}});function findOrAppend(elem,tag){return elem.getElementsByTagName(tag)[0]||elem.appendChild(elem.ownerDocument.createElement(tag))}function cloneCopyEvent(src,dest){if(dest.nodeType!==
1||!jQuery.hasData(src))return;var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle;curData.events={};for(type in events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i])}if(curData.data)curData.data=jQuery.extend({},curData.data)}function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1)return;if(dest.clearAttributes)dest.clearAttributes();if(dest.mergeAttributes)dest.mergeAttributes(src);
nodeName=dest.nodeName.toLowerCase();if(nodeName==="object"){if(dest.parentNode)dest.outerHTML=src.outerHTML;if(jQuery.support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML))dest.innerHTML=src.innerHTML}else if(nodeName==="input"&&rcheckableType.test(src.type)){dest.defaultChecked=dest.checked=src.checked;if(dest.value!==src.value)dest.value=src.value}else if(nodeName==="option")dest.selected=src.defaultSelected;else if(nodeName==="input"||nodeName==="textarea")dest.defaultValue=src.defaultValue;
else if(nodeName==="script"&&dest.text!==src.text)dest.text=src.text;dest.removeAttribute(jQuery.expando)}jQuery.buildFragment=function(args,context,scripts){var fragment,cacheable,cachehit,first=args[0];context=context||document;context=!context.nodeType&&context[0]||context;context=context.ownerDocument||context;if(args.length===1&&typeof first==="string"&&first.length<512&&context===document&&first.charAt(0)==="<"&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||
!rnoshimcache.test(first))){cacheable=true;fragment=jQuery.fragments[first];cachehit=fragment!==undefined}if(!fragment){fragment=context.createDocumentFragment();jQuery.clean(args,context,fragment,scripts);if(cacheable)jQuery.fragments[first]=cachehit&&fragment}return{fragment:fragment,cacheable:cacheable}};jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,
i=0,ret=[],insert=jQuery(selector),l=insert.length,parent=this.length===1&&this[0].parentNode;if((parent==null||parent&&parent.nodeType===11&&parent.childNodes.length===1)&&l===1){insert[original](this[0]);return this}else{for(;i<l;i++){elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}});function getAll(elem){if(typeof elem.getElementsByTagName!=="undefined")return elem.getElementsByTagName("*");else if(typeof elem.querySelectorAll!==
"undefined")return elem.querySelectorAll("*");else return[]}function fixDefaultChecked(elem){if(rcheckableType.test(elem.type))elem.defaultChecked=elem.checked}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone;if(jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">"))clone=elem.cloneNode(true);else{fragmentDiv.innerHTML=elem.outerHTML;fragmentDiv.removeChild(clone=fragmentDiv.firstChild)}if((!jQuery.support.noCloneEvent||
!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i)if(destElements[i])cloneFixAttributes(srcElements[i],destElements[i])}if(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i)cloneCopyEvent(srcElements[i],destElements[i])}}srcElements=destElements=null;
return clone},clean:function(elems,context,fragment,scripts){var i,j,elem,tag,wrap,depth,div,hasBody,tbody,len,handleScript,jsTags,safe=context===document&&safeFragment,ret=[];if(!context||typeof context.createDocumentFragment==="undefined")context=document;for(i=0;(elem=elems[i])!=null;i++){if(typeof elem==="number")elem+="";if(!elem)continue;if(typeof elem==="string")if(!rhtml.test(elem))elem=context.createTextNode(elem);else{safe=safe||createSafeFragment(context);div=context.createElement("div");
safe.appendChild(div);elem=elem.replace(rxhtmlTag,"<$1></$2>");tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;depth=wrap[0];div.innerHTML=wrap[1]+elem+wrap[2];while(depth--)div=div.lastChild;if(!jQuery.support.tbody){hasBody=rtbody.test(elem);tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j)if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length)tbody[j].parentNode.removeChild(tbody[j])}if(!jQuery.support.leadingWhitespace&&
rleadingWhitespace.test(elem))div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);elem=div.childNodes;div.parentNode.removeChild(div)}if(elem.nodeType)ret.push(elem);else jQuery.merge(ret,elem)}if(div)elem=div=safe=null;if(!jQuery.support.appendChecked)for(i=0;(elem=ret[i])!=null;i++)if(jQuery.nodeName(elem,"input"))fixDefaultChecked(elem);else if(typeof elem.getElementsByTagName!=="undefined")jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked);
if(fragment){handleScript=function(elem){if(!elem.type||rscriptType.test(elem.type))return scripts?scripts.push(elem.parentNode?elem.parentNode.removeChild(elem):elem):fragment.appendChild(elem)};for(i=0;(elem=ret[i])!=null;i++)if(!(jQuery.nodeName(elem,"script")&&handleScript(elem))){fragment.appendChild(elem);if(typeof elem.getElementsByTagName!=="undefined"){jsTags=jQuery.grep(jQuery.merge([],elem.getElementsByTagName("script")),handleScript);ret.splice.apply(ret,[i+1,0].concat(jsTags));i+=jsTags.length}}}return ret},
cleanData:function(elems,acceptData){var data,id,elem,type,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=jQuery.support.deleteExpando,special=jQuery.event.special;for(;(elem=elems[i])!=null;i++)if(acceptData||jQuery.acceptData(elem)){id=elem[internalKey];data=id&&cache[id];if(data){if(data.events)for(type in data.events)if(special[type])jQuery.event.remove(elem,type);else jQuery.removeEvent(elem,type,data.handle);if(cache[id]){delete cache[id];if(deleteExpando)delete elem[internalKey];
else if(elem.removeAttribute)elem.removeAttribute(internalKey);else elem[internalKey]=null;jQuery.deletedIds.push(id)}}}}});(function(){var matched,browser;jQuery.uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}};matched=jQuery.uaMatch(navigator.userAgent);
browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome)browser.webkit=true;else if(browser.webkit)browser.safari=true;jQuery.browser=browser;jQuery.sub=function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,
context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub))context=jQuerySub(context);return jQuery.fn.init.call(this,selector,context,rootjQuerySub)};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub}})();var curCSS,iframe,iframeDoc,ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rposition=/^(top|right|bottom|left)$/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rmargin=/^margin/,rnumsplit=new RegExp("^("+core_pnum+")(.*)$","i"),rnumnonpx=
new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i"),rrelNum=new RegExp("^([-+])=("+core_pnum+")","i"),elemdisplay={BODY:"block"},cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:0,fontWeight:400},cssExpand=["Top","Right","Bottom","Left"],cssPrefixes=["Webkit","O","Moz","ms"],eventsToggle=jQuery.fn.toggle;function vendorPropName(style,name){if(name in style)return name;var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;
while(i--){name=cssPrefixes[i]+capName;if(name in style)return name}return origName}function isHidden(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)}function showHide(elements,show){var elem,display,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style)continue;values[index]=jQuery._data(elem,"olddisplay");if(show){if(!values[index]&&elem.style.display==="none")elem.style.display="";if(elem.style.display===
""&&isHidden(elem))values[index]=jQuery._data(elem,"olddisplay",css_defaultDisplay(elem.nodeName))}else{display=curCSS(elem,"display");if(!values[index]&&display!=="none")jQuery._data(elem,"olddisplay",display)}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style)continue;if(!show||elem.style.display==="none"||elem.style.display==="")elem.style.display=show?values[index]||"":"none"}return elements}jQuery.fn.extend({css:function(name,value){return jQuery.access(this,function(elem,
name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state,fn2){var bool=typeof state==="boolean";if(jQuery.isFunction(state)&&jQuery.isFunction(fn2))return eventsToggle.apply(this,arguments);return this.each(function(){if(bool?state:isHidden(this))jQuery(this).show();else jQuery(this).hide()})}});jQuery.extend({cssHooks:{opacity:{get:function(elem,
computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style)return;var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=
vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||type==="number"&&isNaN(value))return;if(type==="number"&&!jQuery.cssNumber[origName])value+="px";if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined)try{style[name]=value}catch(e){}}else{if(hooks&&"get"in hooks&&(ret=
hooks.get(elem,false,extra))!==undefined)return ret;return style[name]}},css:function(elem,name,numeric,extra){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks)val=hooks.get(elem,true,extra);if(val===undefined)val=curCSS(elem,name);if(val==="normal"&&name in cssNormalTransform)val=cssNormalTransform[name];if(numeric||extra!==
undefined){num=parseFloat(val);return numeric||jQuery.isNumeric(num)?num||0:val}return val},swap:function(elem,options,callback){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.call(elem);for(name in options)elem.style[name]=old[name];return ret}});if(window.getComputedStyle)curCSS=function(elem,name){var ret,width,minWidth,maxWidth,computed=window.getComputedStyle(elem,null),style=elem.style;if(computed){ret=computed.getPropertyValue(name)||
computed[name];if(ret===""&&!jQuery.contains(elem.ownerDocument,elem))ret=jQuery.style(elem,name);if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret};else if(document.documentElement.currentStyle)curCSS=function(elem,name){var left,rsLeft,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;
if(ret==null&&style&&style[name])ret=style[name];if(rnumnonpx.test(ret)&&!rposition.test(name)){left=style.left;rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left;if(rsLeft)elem.runtimeStyle.left=elem.currentStyle.left;style.left=name==="fontSize"?"1em":ret;ret=style.pixelLeft+"px";style.left=left;if(rsLeft)elem.runtimeStyle.left=rsLeft}return ret===""?"auto":ret};function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||
"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin")val+=jQuery.css(elem,extra+cssExpand[i],true);if(isBorderBox){if(extra==="content")val-=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0;if(extra!=="margin")val-=parseFloat(curCSS(elem,"border"+cssExpand[i]+"Width"))||0}else{val+=parseFloat(curCSS(elem,"padding"+cssExpand[i]))||0;if(extra!=="padding")val+=parseFloat(curCSS(elem,
"border"+cssExpand[i]+"Width"))||0}}return val}function getWidthOrHeight(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,valueIsBorderBox=true,isBorderBox=jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box";if(val<=0||val==null){val=curCSS(elem,name);if(val<0||val==null)val=elem.style[name];if(rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(jQuery.support.boxSizingReliable||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,
name,extra||(isBorderBox?"border":"content"),valueIsBorderBox)+"px"}function css_defaultDisplay(nodeName){if(elemdisplay[nodeName])return elemdisplay[nodeName];var elem=jQuery("<"+nodeName+">").appendTo(document.body),display=elem.css("display");elem.remove();if(display==="none"||display===""){iframe=document.body.appendChild(iframe||jQuery.extend(document.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;
iframeDoc.write("<!doctype html><html><body>");iframeDoc.close()}elem=iframeDoc.body.appendChild(iframeDoc.createElement(nodeName));display=curCSS(elem,"display");document.body.removeChild(iframe)}elemdisplay[nodeName]=display;return display}jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)if(elem.offsetWidth===0&&rdisplayswap.test(curCSS(elem,"display")))return jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,
extra)});else return getWidthOrHeight(elem,name,extra)},set:function(elem,value,extra){return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.support.boxSizing&&jQuery.css(elem,"boxSizing")==="border-box"):0)}}});if(!jQuery.support.opacity)jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=
elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if(value>=1&&jQuery.trim(filter.replace(ralpha,""))===""&&style.removeAttribute){style.removeAttribute("filter");if(currentStyle&&!currentStyle.filter)return}style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}};jQuery(function(){if(!jQuery.support.reliableMarginRight)jQuery.cssHooks.marginRight=
{get:function(elem,computed){return jQuery.swap(elem,{"display":"inline-block"},function(){if(computed)return curCSS(elem,"marginRight")})}};if(!jQuery.support.pixelPosition&&jQuery.fn.position)jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]={get:function(elem,computed){if(computed){var ret=curCSS(elem,prop);return rnumnonpx.test(ret)?jQuery(elem).position()[prop]+"px":ret}}}})});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth===
0&&elem.offsetHeight===0||!jQuery.support.reliableHiddenOffsets&&(elem.style&&elem.style.display||curCSS(elem,"display"))==="none"};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}}jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value==="string"?value.split(" "):[value],expanded={};for(i=0;i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];
return expanded}};if(!rmargin.test(prefix))jQuery.cssHooks[prefix+suffix].set=setPositiveNumber});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rselectTextarea=/^(?:select|textarea)/i;jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&
!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+
"="+encodeURIComponent(value)};if(traditional===undefined)traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional;if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")};function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix))add(prefix,v);else buildParams(prefix+
"["+(typeof v==="object"?i:"")+"]",v,traditional,add)});else if(!traditional&&jQuery.type(obj)==="object")for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rts=/([?&])_=[^&]*/,
rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,_load=jQuery.fn.load,prefilters={},transports={},allTypes=["*/"]+["*"];try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,
list,placeBefore,dataTypes=dataTypeExpression.toLowerCase().split(core_rspace),i=0,length=dataTypes.length;if(jQuery.isFunction(func))for(;i<length;i++){dataType=dataTypes[i];placeBefore=/^\+/.test(dataType);if(placeBefore)dataType=dataType.substr(1)||"*";list=structure[dataType]=structure[dataType]||[];list[placeBefore?"unshift":"push"](func)}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||
{};inspected[dataType]=true;var selection,list=structure[dataType],i=0,length=list?list.length:0,executeOnly=structure===prefilters;for(;i<length&&(executeOnly||!selection);i++){selection=list[i](options,originalOptions,jqXHR);if(typeof selection==="string")if(!executeOnly||inspected[selection])selection=undefined;else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected)}}if((executeOnly||!selection)&&!inspected["*"])selection=
inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected);return selection}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)if(src[key]!==undefined)(flatOptions[key]?target:deep||(deep={}))[key]=src[key];if(deep)jQuery.extend(true,target,deep)}jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load)return _load.apply(this,arguments);if(!this.length)return this;var selector,type,response,self=
this,off=url.indexOf(" ");if(off>=0){selector=url.slice(off,url.length);url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object")type="POST";jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status){if(callback)self.each(callback,response||[jqXHR.responseText,status,jqXHR])}}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):
responseText)});return this};jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f)}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type})}});jQuery.extend({getScript:function(url,callback){return jQuery.get(url,
undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},ajaxSetup:function(target,settings){if(settings)ajaxExtend(target,jQuery.ajaxSettings);else{settings=target;target=jQuery.ajaxSettings}ajaxExtend(target,settings);return target},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",
html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=
url;url=undefined}options=options||{};var ifModifiedKey,responseHeadersString,responseHeaders,transport,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",
jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString))responseHeaders[match[1].toLowerCase()]=match[2]}match=responseHeaders[key.toLowerCase()]}return match===
undefined?null:match},overrideMimeType:function(type){if(!state)s.mimeType=type;return this},abort:function(statusText){statusText=statusText||strAbort;if(transport)transport.abort(statusText);done(0,statusText);return this}};function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2)return;state=2;if(timeoutTimer)clearTimeout(timeoutTimer);transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>
0?4:0;if(responses)response=ajaxHandleResponses(s,jqXHR,responses);if(status>=200&&status<300||status===304){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified)jQuery.lastModified[ifModifiedKey]=modified;modified=jqXHR.getResponseHeader("Etag");if(modified)jQuery.etag[ifModifiedKey]=modified}if(status===304){statusText="notmodified";isSuccess=true}else{isSuccess=ajaxConvert(s,response);statusText=isSuccess.state;success=isSuccess.data;error=isSuccess.error;isSuccess=!error}}else{error=
statusText;if(!statusText||status){statusText="error";if(status<0)status=0}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess)deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);else deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals)globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]);completeDeferred.fireWith(callbackContext,[jqXHR,
statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active)jQuery.event.trigger("ajaxStop")}}deferred.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;jqXHR.complete=completeDeferred.add;jqXHR.statusCode=function(map){if(map){var tmp;if(state<2)for(tmp in map)statusCode[tmp]=[statusCode[tmp],map[tmp]];else{tmp=map[jqXHR.status];jqXHR.always(tmp)}}return this};s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");
s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(core_rspace);if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443))))}if(s.data&&s.processData&&typeof s.data!=="string")s.data=jQuery.param(s.data,s.traditional);inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2)return jqXHR;fireGlobals=
s.global;s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);if(fireGlobals&&jQuery.active++===0)jQuery.event.trigger("ajaxStart");if(!s.hasContent){if(s.data){s.url+=(rquery.test(s.url)?"&":"?")+s.data;delete s.data}ifModifiedKey=s.url;if(s.cache===false){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+(ret===s.url?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType)jqXHR.setRequestHeader("Content-Type",s.contentType);
if(s.ifModified){ifModifiedKey=ifModifiedKey||s.url;if(jQuery.lastModified[ifModifiedKey])jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]);if(jQuery.etag[ifModifiedKey])jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey])}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&
(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport)done(-1,"No Transport");else{jqXHR.readyState=1;if(fireGlobals)globalEventContext.trigger("ajaxSend",[jqXHR,s]);if(s.async&&s.timeout>0)timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout);try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<
2)done(-1,e);else throw e;}}return jqXHR},active:0,lastModified:{},etag:{}});function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields;for(type in responseFields)if(type in responses)jqXHR[responseFields[type]]=responses[type];while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined)ct=s.mimeType||jqXHR.getResponseHeader("content-type")}if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);
break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType)firstDataType=type}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0])dataTypes.unshift(finalDataType);return responses[finalDataType]}}function ajaxConvert(s,response){var conv,conv2,current,tmp,dataTypes=s.dataTypes.slice(),prev=dataTypes[0],converters={},i=0;if(s.dataFilter)response=
s.dataFilter(response,s.dataType);if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(;current=dataTypes[++i];)if(current!=="*"){if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv)for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true)conv=converters[conv2];else if(converters[conv2]!==true){current=tmp[0];dataTypes.splice(i--,
0,current)}break}}}if(conv!==true)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}prev=current}return{state:"success",data:response}}var oldCallbacks=[],rquestion=/\?/,rjsonp=/(=)\?(?=&|$)|\?\?/,nonce=jQuery.now();jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",
function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,data=s.data,url=s.url,hasCallback=s.jsonp!==false,replaceInUrl=hasCallback&&rjsonp.test(url),replaceInData=hasCallback&&!replaceInUrl&&typeof data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(data);if(s.dataTypes[0]==="jsonp"||replaceInUrl||replaceInData){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;overwritten=window[callbackName];
if(replaceInUrl)s.url=url.replace(rjsonp,"$1"+callbackName);else if(replaceInData)s.data=data.replace(rjsonp,"$1"+callbackName);else if(hasCallback)s.url+=(rquestion.test(url)?"&":"?")+s.jsonp+"="+callbackName;s.converters["script json"]=function(){if(!responseContainer)jQuery.error(callbackName+" was not called");return responseContainer[0]};s.dataTypes[0]="json";window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=
originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten))overwritten(responseContainer[0]);responseContainer=overwritten=undefined});return"script"}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===
undefined)s.cache=false;if(s.crossDomain){s.type="GET";s.global=false}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async="async";if(s.scriptCharset)script.charset=s.scriptCharset;script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=
script.onreadystatechange=null;if(head&&script.parentNode)head.removeChild(script);script=undefined;if(!isAbort)callback(200,"success")}};head.insertBefore(script,head.firstChild)},abort:function(){if(script)script.onload(0,1)}}}});var xhrCallbacks,xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks)xhrCallbacks[key](0,1)}:false,xhrId=0;function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}
jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR;(function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&"withCredentials"in xhr})})(jQuery.ajaxSettings.xhr());if(jQuery.support.ajax)jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var handle,i,xhr=s.xhr();if(s.username)xhr.open(s.type,s.url,s.async,s.username,s.password);else xhr.open(s.type,
s.url,s.async);if(s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];if(s.mimeType&&xhr.overrideMimeType)xhr.overrideMimeType(s.mimeType);if(!s.crossDomain&&!headers["X-Requested-With"])headers["X-Requested-With"]="XMLHttpRequest";try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(_){}xhr.send(s.hasContent&&s.data||null);callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=
jQuery.noop;if(xhrOnUnloadAbort)delete xhrCallbacks[handle]}if(isAbort){if(xhr.readyState!==4)xhr.abort()}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;if(xml&&xml.documentElement)responses.xml=xml;try{responses.text=xhr.responseText}catch(e){}try{statusText=xhr.statusText}catch(e){statusText=""}if(!status&&s.isLocal&&!s.crossDomain)status=responses.text?200:404;else if(status===1223)status=204}}}catch(firefoxAccessException){if(!isAbort)complete(-1,
firefoxAccessException)}if(responses)complete(status,statusText,responses,responseHeaders)};if(!s.async)callback();else if(xhr.readyState===4)setTimeout(callback,0);else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort)}xhrCallbacks[handle]=callback}xhr.onreadystatechange=callback}},abort:function(){if(callback)callback(0,1)}}}});var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([-+])=|)("+core_pnum+")([a-z%]*)$",
"i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var end,unit,tween=this.createTween(prop,value),parts=rfxnum.exec(value),target=tween.cur(),start=+target||0,scale=1,maxIterations=20;if(parts){end=+parts[2];unit=parts[3]||(jQuery.cssNumber[prop]?"":"px");if(unit!=="px"&&start){start=jQuery.css(tween.elem,prop,true)||end||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&scale!==
1&&--maxIterations)}tween.unit=unit;tween.start=start;tween.end=parts[1]?start+(parts[1]+1)*end:end}return tween}]};function createFxNow(){setTimeout(function(){fxNow=undefined},0);return fxNow=jQuery.now()}function createTweens(animation,props){jQuery.each(props,function(prop,value){var collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++)if(collection[index].call(animation,prop,value))return})}function Animation(elem,properties,options){var result,
index=0,tweenerIndex=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++)animation.tweens[index].run(percent);deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length)return remaining;else{deferred.resolveWith(elem,
[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end,easing){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,
length=gotoEnd?animation.tweens.length:0;for(;index<length;index++)animation.tweens[index].run(1);if(gotoEnd)deferred.resolveWith(elem,[animation,gotoEnd]);else deferred.rejectWith(elem,[animation,gotoEnd]);return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result)return result}createTweens(animation,props);if(jQuery.isFunction(animation.opts.start))animation.opts.start.call(elem,
animation);jQuery.fx.timer(jQuery.extend(tick,{anim:animation,queue:animation.opts.queue,elem:elem}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==
name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value)if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}else specialEasing[name]=easing}}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else props=props.split(" ");var prop,index=0,length=props.length;for(;index<length;index++){prop=
props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend)animationPrefilters.unshift(callback);else animationPrefilters.push(callback)}});function defaultPrefilter(elem,props,opts){var index,prop,value,length,dataShow,toggle,tween,hooks,oldfire,anim=this,style=elem.style,orig={},handled=[],hidden=elem.nodeType&&isHidden(elem);if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=
hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued)oldfire()}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length)hooks.empty.fire()})})}if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];if(jQuery.css(elem,"display")==="inline"&&jQuery.css(elem,"float")==="none")if(!jQuery.support.inlineBlockNeedsLayout||css_defaultDisplay(elem.nodeName)==="inline");else style.zoom=
1}if(opts.overflow){style.overflow="hidden";if(!jQuery.support.shrinkWrapBlocks)anim.done(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}for(index in props){value=props[index];if(rfxtypes.exec(value)){delete props[index];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show"))continue;handled.push(index)}}length=handled.length;if(length){dataShow=jQuery._data(elem,"fxshow")||jQuery._data(elem,"fxshow",{});if("hidden"in dataShow)hidden=
dataShow.hidden;if(toggle)dataShow.hidden=!hidden;if(hidden)jQuery(elem).show();else anim.done(function(){jQuery(elem).hide()});anim.done(function(){var prop;jQuery.removeData(elem,"fxshow",true);for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(index=0;index<length;index++){prop=handled[index];tween=anim.createTween(prop,hidden?dataShow[prop]:0);orig[prop]=dataShow[prop]||jQuery.style(elem,prop);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=
prop==="width"||prop==="height"?1:0}}}}}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):
Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration)this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration);else this.pos=eased=percent;this.now=(this.end-this.start)*eased+this.start;if(this.options.step)this.options.step.call(this.elem,this.now,this);if(hooks&&hooks.set)hooks.set(this);else Tween.propHooks._default.set(this);return this}};Tween.prototype.init.prototype=Tween.prototype;
Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null))return tween.elem[tween.prop];result=jQuery.css(tween.elem,tween.prop,false,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop])jQuery.fx.step[tween.prop](tween);else if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop]))jQuery.style(tween.elem,tween.prop,tween.now+
tween.unit);else tween.elem[tween.prop]=tween.now}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode)tween.elem[tween.prop]=tween.now}};jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"||!i&&jQuery.isFunction(speed)&&jQuery.isFunction(easing)?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,
easing,callback)}});jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty)anim.stop(true)};return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},
stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false)this.queue(type||"fx",[]);return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index){if(data[index]&&data[index].stop)stopQueue(data[index])}else for(index in data)if(data[index]&&data[index].stop&&
rrun.test(index))stopQueue(data[index]);for(index=timers.length;index--;)if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}if(dequeue||!gotoEnd)jQuery.dequeue(this,type)})}});function genFx(type,includeWidth){var which,attrs={height:type},i=0;includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth)attrs.opacity=attrs.width=
type;return attrs}jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||
easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true)opt.queue="fx";opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old))opt.old.call(this);if(opt.queue)jQuery.dequeue(this,opt.queue)};return opt};jQuery.easing={linear:function(p){return p},swing:function(p){return 0.5-Math.cos(p*Math.PI)/
2}};jQuery.timers=[];jQuery.fx=Tween.prototype.init;jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer)timers.splice(i--,1)}if(!timers.length)jQuery.fx.stop();fxNow=undefined};jQuery.fx.timer=function(timer){if(timer()&&jQuery.timers.push(timer)&&!timerId)timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)};jQuery.fx.interval=13;jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds=
{slow:600,fast:200,_default:400};jQuery.fx.step={};if(jQuery.expr&&jQuery.expr.filters)jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var rroot=/^(?:body|html)$/i;jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,body,win,clientTop,clientLeft,scrollTop,scrollLeft,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;
if(!doc)return;if((body=doc.body)===elem)return jQuery.offset.bodyOffset(elem);docElem=doc.documentElement;if(!jQuery.contains(docElem,elem))return box;if(typeof elem.getBoundingClientRect!=="undefined")box=elem.getBoundingClientRect();win=getWindow(doc);clientTop=docElem.clientTop||body.clientTop||0;clientLeft=docElem.clientLeft||body.clientLeft||0;scrollTop=win.pageYOffset||docElem.scrollTop;scrollLeft=win.pageXOffset||docElem.scrollLeft;return{top:box.top+scrollTop-clientTop,left:box.left+scrollLeft-
clientLeft}};jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;if(jQuery.support.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.css(body,"marginTop"))||0;left+=parseFloat(jQuery.css(body,"marginLeft"))||0}return{top:top,left:left}},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if(position==="static")elem.style.position="relative";var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=
jQuery.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options))options=options.call(elem,i,curOffset);if(options.top!=null)props.top=options.top-curOffset.top+curTop;if(options.left!=null)props.left=
options.left-curOffset.left+curLeft;if("using"in options)options.using.call(elem,props);else curElem.css(props)}};jQuery.fn.extend({position:function(){if(!this[0])return;var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0;offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0;parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||
0;parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")offsetParent=offsetParent.offsetParent;return offsetParent||document.body})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},
function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined)return win?prop in win?win[prop]:win.document.documentElement[method]:elem[method];if(win)win.scrollTo(!top?val:jQuery(win).scrollLeft(),top?val:jQuery(win).scrollTop());else elem[method]=val},method,val,arguments.length,null)}});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:
false}jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return jQuery.access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem))return elem.document.documentElement["client"+name];if(elem.nodeType===
9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,value,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});window.jQuery=window.$=jQuery;if(typeof define==="function"&&define.amd&&define.amd.jQuery)define("jquery",[],function(){return jQuery})})(window);var BL={};BL.Storage={};if(typeof window.console==="undefined"){var n=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<n.length;++i)window.console[n[i]]=function(){};n=null}document.documentElement.className+=" js";
BL.Main=function(){return{SetVariables:function(variables){for(var variable in variables){var elem=$("[data-variable="+variable+"]");if(elem.length===0)return;elem.html(variables[variable])}},GenerateTitle:function(){return LANG.page_title},LoadTrigger:function(){$('[data-trig="tooltip"]').tooltip({animation:true,html:true,container:"body",placement:"top"});$('[data-trig="popover"]').popover({animation:true,html:true,placement:"right"});BL.Search.Autocomplete();$(".load-popover").one("click",function(e){if($(".load-popover.active")){$(".load-popover.active").popover("hide");
$(".load-popover.active").removeClass("active");$(".load-popover.active").data("active",false)}e.stopPropagation();var content=$(this).next().html();$(this).next().remove();$(this).attr("data-content",content);var identifier=$(this).data("identifier");$(this).attr("data-container",$(this).data("container-filler"));if($(e.target).hasClass("share"))$(this).popover({placement:function(context,source){if($(source).offset().top-$(window).scrollTop()<120)return"bottom";else return"top"},container:$(this).data("container-filler")});
$(this).popover("show");$(this).addClass("active");$(this).data("active",true);$(this).on("click",function(e){var popover_parent=$(e.target).closest(".load-popover");if(!(popover_parent.length>0))return;if($(e.target).closest(".popover .handleclick").length===0)e.stopPropagation();if($(e.target).parents(".popover").length>0)return;if(!$(".load-popover.active").is(popover_parent)){$(".load-popover.active").popover("hide");$(".load-popover.active").removeClass("active");$(".load-popover.active").data("active",
"false")}if($(popover_parent).hasClass("active")){$(popover_parent).popover("hide");$(popover_parent).removeClass("active");$(popover_parent).data("active",false)}else{$(popover_parent).popover("show");$(popover_parent).addClass("active");$(popover_parent).data("active",true)}})});$("body").on("click",function(e){$(".load-popover").each(function(){if($(this).data("active")){$(this).popover("hide");$(this).data("active",false);$(this).removeClass("active")}})});$(".content").each(function(index){var postID=
$(this).parents(".post").attr("data-post-id");$(this).find($(".popover-blog")).popover({template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title" style="display: none;"></h3><div class="popover-content"><p></p></div></div></div>',placement:function(context,source){var posTop=$(source).offset().top;posTop=posTop-$(window).scrollTop();if(posTop<200)return"bottom";return"top"},trigger:"manual",animation:false,content:function(){hoverButton=$(this).parent().find("#hover-popover-content")},
container:"[data-post-id="+postID+"] .popover-blog",html:true}).on("mouseenter",function(){var _this=this;_this.timer=setTimeout(function(){if($(".popover:hover")){$(_this).popover("show");$(_this).siblings(".popover").on("mouseleave",function(){$(_this).hide()})}},800)}).on("mouseleave",function(){var _this=this;clearInterval(_this.timer);setTimeout(function(){if(!$(".popover:hover").length)$(_this).popover("hide")},900)})})}}}();
var inject=function(name,id,type){if(!type)type="blog";if(type=="blog"){this.find("h3 strong").text(name);this.find("a.handleclick").attr("data-redirect","/blog/"+id);this.find("a.handleclick").attr("data-blog-id",id);$(this.find("h3").siblings("a")[0]).attr("href","/signup/"+id);$(this.find("h3").siblings("a")[1]).attr("href","/login?redirect=/blog/"+id)}else{this.find("h3 strong").text(name);this.find("a.handleclick").attr("data-redirect","/user/"+id);this.find("a.handleclick").attr("data-user-id",
id);$(this.find("h3").siblings("a")[0]).attr("href","/signup");$(this.find("h3").siblings("a")[1]).attr("href","/login?redirect=/user/"+id)}};String.prototype.ucfirst=function(){return this.substr(0,1).toUpperCase()+this.substr(1,this.length)};
(function($){$(function(){$("body").on("click","[data-toggle=modal-dynamic]",function(e){var $this=$(this),$target=$($this.attr("data-target"));BL.Helper.Ajax({url:$this.attr("data-href"),success:function(ret){$target.html(ret.html)}});$target.modal();e.preventDefault()});$("body").on("click","[data-func=NewGroup]",function(e){e.stopPropagation()});$("body").on("click","[data-toggle=tab-override]",function(e){if($(this).attr("data-tab-type")=="posts")$(this).parents(".navbar:first").addClass("radius-4");
else $(this).parents(".navbar:first").removeClass("radius-4");$(this).tab("show");e.preventDefault();e.stopPropagation()});$("body").on("click",".signedout.follow",function(e){var loc=$(location).attr("pathname").split("/")[1],sub=$("#subscribe-box");var extract={"default":function(){var post=$(this).parent().parent(),blogName=$(post).find("span[rel='blog_name']").text();var href=$(post).find(".post-link").attr("href");var blogID;if(typeof href!="undefined")blogID=href.match(/blog=([^&]*)/)[1];inject.call(sub,
blogName,blogID)},"blog":function(){var blogName=$(this).parents().find(".gl-profile-title").text();var href=$(this).parents().find(".gl-profile-link a").attr("href");var blogID;if(typeof href!="undefined")blogID=href.match(/blog=([^&]*)/)[1];inject.call(sub,blogName,blogID)},"blogs":function(){var type=$(this).parents(".content").parent().attr("class");var name,id;if(type==="blog"){name=$(this).parent().parent().find("span[rel='blog_name']").text(),id=$(this).closest(".blog").attr("data-blog-id");
if(!id)id=$(this).parents(".post").attr("data-blog-id")}else{var outer=$(this).parents(".user-info");type="user";if(outer.length){name=outer.find(".gl-profile-title").text();id=$(this).attr("data-user-id")}else name=outer.find("h4 a").text(),id=$(this).closest(".user").attr("data-user-id")}inject.call(sub,name,id,type)}};switch(loc){case "blog":if($(this).parents("#similar_blogs").length||$(this).parents("#followers").length)extract["blogs"].apply(this);else extract["blog"].apply(this);break;case "blogs":extract["blogs"].apply(this);
break;case "search":$(".modal.search-box").modal("hide");extract["default"].apply(this);break;default:if($(".user-profile").length)extract["blogs"].apply(this);else extract["default"].apply(this)}});new BL.LikesModal})})(jQuery);if(!$("body").hasClass("headerless-page")&&!$("body").hasClass("signup-page"))$(window).scroll(function(){setNavbarOffset()});
function setNavbarOffset(){var h=$("#header");var d=$("#dckbar_y");var b=$("body");var dyn_h=$("#feed_ads").height();var s_top=$(window).scrollTop();if(!h.hasClass("navbar-fixed-top")&&dyn_h<s_top){h.addClass("navbar-fixed-top");d.addClass("bar-offset");b.addClass("navbar-detached")}else if(h.hasClass("navbar-fixed-top")&&dyn_h>s_top||!s_top){h.removeClass("navbar-fixed-top");d.removeClass("bar-offset");b.removeClass("navbar-detached")}}$(function(){setNavbarOffset();BL.Main.LoadTrigger();$("input, textarea").placeholder()});!function($){var Affix=function(element,options){this.options=$.extend({},$.fn.affix.defaults,options);this.$window=$(window).on("scroll.affix.data-api",$.proxy(this.checkPosition,this)).on("click.affix.data-api",$.proxy(function(){setTimeout($.proxy(this.checkPosition,this),1)},this));this.$element=$(element);this.checkPosition()};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),
offset=this.options.offset,offsetBottom=offset.bottom,offsetTop=offset.top,reset="affix affix-top affix-bottom",affix;if(typeof offset!="object")offsetBottom=offsetTop=offset;if(typeof offsetTop=="function")offsetTop=offset.top();if(typeof offsetBottom=="function")offsetBottom=offset.bottom();affix=this.unpin!=null&&scrollTop+this.unpin<=position.top?false:offsetBottom!=null&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":offsetTop!=null&&scrollTop<=offsetTop?"top":false;
if(this.affixed===affix)return;this.affixed=affix;this.unpin=affix=="bottom"?position.top-scrollTop:null;this.$element.removeClass(reset).addClass("affix"+(affix?"-"+affix:""))};$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data("affix"),options=typeof option=="object"&&option;if(!data)$this.data("affix",data=new Affix(this,options));if(typeof option=="string")data[option]()})};$.fn.affix.Constructor=Affix;$.fn.affix.defaults={offset:0};$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=
$(this),data=$spy.data();data.offset=data.offset||{};data.offsetBottom&&(data.offset.bottom=data.offsetBottom);data.offsetTop&&(data.offset.top=data.offsetTop);$spy.affix(data)})})}(window.jQuery);!function($){var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){var $this=$(this),selector=$this.attr("data-target"),$parent;if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}$parent=$(selector);e&&e.preventDefault();$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent());$parent.trigger(e=$.Event("close"));if(e.isDefaultPrevented())return;$parent.removeClass("in");
function removeElement(){$parent.trigger("closed").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.on($.support.transition.end,removeElement):removeElement()};$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("alert");if(!data)$this.data("alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})};$.fn.alert.Constructor=Alert;$(document).on("click.alert.data-api",dismiss,Alert.prototype.close)}(window.jQuery);!function($){var Button=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.button.defaults,options)};Button.prototype.setState=function(state){var d="disabled",$el=this.$element,data=$el.data(),val=$el.is("input")?"val":"html";state=state+"Text";data.resetText||$el.data("resetText",$el[val]());$el[val](data[state]||this.options[state]);setTimeout(function(){state=="loadingText"?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)};Button.prototype.toggle=function(){var $parent=
this.$element.closest('[data-toggle="buttons-radio"]');$parent&&$parent.find(".active").removeClass("active");this.$element.toggleClass("active")};$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("button"),options=typeof option=="object"&&option;if(!data)$this.data("button",data=new Button(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})};$.fn.button.defaults={loadingText:"loading..."};$.fn.button.Constructor=Button;
$(document).on("click.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);if(!$btn.hasClass("btn"))$btn=$btn.closest(".btn");$btn.button("toggle")})}(window.jQuery);!function($){var Carousel=function(element,options){this.$element=$(element);this.options=options;this.options.slide&&this.slide(this.options.slide);this.options.pause=="hover"&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.prototype={cycle:function(e){if(!e)this.paused=false;this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this},to:function(pos){var $active=this.$element.find(".item.active"),
children=$active.parent().children(),activePos=children.index($active),that=this;if(pos>children.length-1||pos<0)return;if(this.sliding)return this.$element.one("slid",function(){that.to(pos)});if(activePos==pos)return this.pause().cycle();return this.slide(pos>activePos?"next":"prev",$(children[pos]))},pause:function(e){if(!e)this.paused=true;if(this.$element.find(".next, .prev").length&&$.support.transition.end){this.$element.trigger($.support.transition.end);this.cycle()}clearInterval(this.interval);
this.interval=null;return this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(type,next){var $active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction=type=="next"?"left":"right",fallback=type=="next"?"first":"last",that=this,e;this.sliding=true;isCycling&&this.pause();$next=$next.length?$next:this.$element.find(".item")[fallback]();e=$.Event("slide",
{relatedTarget:$next[0]});if($next.hasClass("active"))return;if($.support.transition&&this.$element.hasClass("slide")){this.$element.trigger(e);if(e.isDefaultPrevented())return;$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);this.$element.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger("slid")},
0)})}else{this.$element.trigger(e);if(e.isDefaultPrevented())return;$active.removeClass("active");$next.addClass("active");this.sliding=false;this.$element.trigger("slid")}isCycling&&this.cycle();return this}};$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("carousel"),options=$.extend({},$.fn.carousel.defaults,typeof option=="object"&&option),action=typeof option=="string"?option:options.slide;if(!data)$this.data("carousel",data=new Carousel(this,options));
if(typeof option=="number")data.to(option);else if(action)data[action]();else if(options.interval)data.cycle()})};$.fn.carousel.defaults={interval:5E3,pause:"hover"};$.fn.carousel.Constructor=Carousel;$(document).on("click.carousel.data-api","[data-slide]",function(e){var $this=$(this),href,$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data());$target.carousel(options);e.preventDefault()})}(window.jQuery);!function($){var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.collapse.defaults,options);if(this.options.parent)this.$parent=$(this.options.parent);this.options.toggle&&this.toggle()};Collapse.prototype={constructor:Collapse,dimension:function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},show:function(){var dimension,scroll,actives,hasData;if(this.transitioning)return;dimension=this.dimension();scroll=$.camelCase(["scroll",
dimension].join("-"));actives=this.$parent&&this.$parent.find("> .accordion-group > .in");if(actives&&actives.length){hasData=actives.data("collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide");hasData||actives.data("collapse",null)}this.$element[dimension](0);this.transition("addClass",$.Event("show"),"shown");$.support.transition&&this.$element[dimension](this.$element[0][scroll])},hide:function(){var dimension;if(this.transitioning)return;dimension=this.dimension();this.reset(this.$element[dimension]());
this.transition("removeClass",$.Event("hide"),"hidden");this.$element[dimension](0)},reset:function(size){var dimension=this.dimension();this.$element.removeClass("collapse")[dimension](size||"auto")[0].offsetWidth;this.$element[size!==null?"addClass":"removeClass"]("collapse");return this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){if(startEvent.type=="show")that.reset();that.transitioning=0;that.$element.trigger(completeEvent)};this.$element.trigger(startEvent);
if(startEvent.isDefaultPrevented())return;this.transitioning=1;this.$element[method]("in");$.support.transition&&this.$element.hasClass("collapse")?this.$element.one($.support.transition.end,complete):complete()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("collapse"),options=typeof option=="object"&&option;if(!data)$this.data("collapse",data=new Collapse(this,options));if(typeof option==
"string")data[option]()})};$.fn.collapse.defaults={toggle:true};$.fn.collapse.Constructor=Collapse;$(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var $this=$(this),href,target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""),option=$(target).data("collapse")?"toggle":$this.data();$this[$(target).hasClass("in")?"addClass":"removeClass"]("collapsed");$(target).collapse(option)})}(window.jQuery);!function($){var toggle="[data-toggle=dropdown]",Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){$el.parent().removeClass("open")})};Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $this=$(this),$parent,isActive;if($this.is(".disabled, :disabled"))return;$parent=getParent($this);isActive=$parent.hasClass("open");clearMenus();if(!isActive){$parent.toggleClass("open");$this.focus()}return false},
keydown:function(e){var $this,$items,$active,$parent,isActive,index;if(!/(38|40|27)/.test(e.keyCode))return;$this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;$parent=getParent($this);isActive=$parent.hasClass("open");if(!isActive||isActive&&e.keyCode==27)return $this.click();$items=$("[role=menu] li:not(.divider) a",$parent);if(!$items.length)return;index=$items.index($items.filter(":focus"));if(e.keyCode==38&&index>0)index--;if(e.keyCode==40&&index<$items.length-
1)index++;if(!~index)index=0;$items.eq(index).focus()}};function clearMenus(){$(toggle).each(function(){getParent($(this)).removeClass("open")})}function getParent($this){var selector=$this.attr("data-target"),$parent;if(!selector){selector=$this.attr("href");selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")}$parent=$(selector);$parent.length||($parent=$this.parent());return $parent}$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");
if(!data)$this.data("dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})};$.fn.dropdown.Constructor=Dropdown;$(document).on("click.dropdown.data-api touchstart.dropdown.data-api",clearMenus).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("touchstart.dropdown.data-api",".dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",
toggle+", [role=menu]",Dropdown.prototype.keydown)}(window.jQuery);!function($){var Modal=function(element,options){this.options=options;this.$element=$(element).on("click.dismiss.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};Modal.prototype={constructor:Modal,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var that=this,e=$.Event("show");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.escape();
this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length)that.$element.appendTo(document.body);that.$element.show();if(transition)that.$element[0].offsetWidth;that.$element.addClass("in").attr("aria-hidden",false);that.enforceFocus();transition?that.$element.one($.support.transition.end,function(){that.$element.focus().trigger("shown")}):that.$element.focus().trigger("shown")})},hide:function(e){e&&e.preventDefault();var that=this;
e=$.Event("hide");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();$(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);$.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var that=this;$(document).on("focusin.modal",function(e){if(that.$element[0]!==e.target&&!that.$element.has(e.target).length)that.$element.focus()})},escape:function(){var that=
this;if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.modal",function(e){e.which==27&&that.hide()});else if(!this.isShown)this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end);that.hideModal()},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout);that.hideModal()})},hideModal:function(that){this.$element.hide().trigger("hidden");this.backdrop()},
removeBackdrop:function(){this.$backdrop.remove();this.$backdrop=null},backdrop:function(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body);this.$backdrop.click(this.options.backdrop=="static"?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,this));if(doAnimate)this.$backdrop[0].offsetWidth;
this.$backdrop.addClass("in");doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,$.proxy(this.removeBackdrop,this)):this.removeBackdrop()}else if(callback)callback()}};$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data("modal"),options=$.extend({},$.fn.modal.defaults,$this.data(),
typeof option=="object"&&option);if(!data)$this.data("modal",data=new Modal(this,options));if(typeof option=="string")data[option]();else if(options.show)data.show()})};$.fn.modal.defaults={backdrop:true,keyboard:true,show:true};$.fn.modal.Constructor=Modal;$(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&
href},$target.data(),$this.data());e.preventDefault();$target.modal(option).one("hide",function(){$this.focus()})})}(window.jQuery);!function($){function ScrollSpy(element,options){var process=$.proxy(this.process,this),$element=$(element).is("body")?$(window):$(element),href;this.options=$.extend({},$.fn.scrollspy.defaults,options);this.$scrollElement=$element.on("scroll.scroll-spy.data-api",process);this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=$("body");this.refresh();this.process()}ScrollSpy.prototype={constructor:ScrollSpy,refresh:function(){var self=
this,$targets;this.offsets=$([]);this.targets=$([]);$targets=this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#\w/.test(href)&&$(href);return $href&&$href.length&&[[$href.position().top,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]);self.targets.push(this[1])})},process:function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||
this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget,i;if(scrollTop>=maxScroll)return activeTarget!=(i=targets.last()[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])},activate:function(target){var active,selector;this.activeTarget=target;$(this.selector).parent(".active").removeClass("active");
selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';active=$(selector).parent("li").addClass("active");if(active.parent(".dropdown-menu").length)active=active.closest("li.dropdown").addClass("active");active.trigger("activate")}};$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data("scrollspy"),options=typeof option=="object"&&option;if(!data)$this.data("scrollspy",data=new ScrollSpy(this,options));if(typeof option=="string")data[option]()})};
$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.defaults={offset:10};$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(window.jQuery);!function($){var Tab=function(element){this.element=$(element)};Tab.prototype={constructor:Tab,show:function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.attr("data-target"),previous,$target,e;if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;previous=$ul.find(".active:last a")[0];e=$.Event("show",{relatedTarget:previous});$this.trigger(e);if(e.isDefaultPrevented())return;
$target=$(selector);this.activate($this.parent("li"),$ul);this.activate($target,$target.parent(),function(){$this.trigger({type:"shown",relatedTarget:previous})})},activate:function(element,container,callback){var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");element.addClass("active");if(transition){element[0].offsetWidth;element.addClass("in")}else element.removeClass("fade");
if(element.parent(".dropdown-menu"))element.closest("li.dropdown").addClass("active");callback&&callback()}transition?$active.one($.support.transition.end,next):next();$active.removeClass("in")}};$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("tab");if(!data)$this.data("tab",data=new Tab(this));if(typeof option=="string")data[option]()})};$.fn.tab.Constructor=Tab;$(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault();
$(this).tab("show")})}(window.jQuery);!function($){var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut,triggers,trigger,i;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.enabled=true;triggers=this.options.trigger.split(" ");for(i=triggers.length;i--;){trigger=triggers[i];if(trigger=="click")this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if(trigger!=
"manual"){eventIn=trigger=="hover"?"mouseenter":"focus";eventOut=trigger=="hover"?"mouseleave":"blur";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){options=$.extend({},$.fn[this.type].defaults,this.$element.data(),options);if(options.delay&&
typeof options.delay=="number")options.delay={show:options.delay,hide:options.delay};return options},enter:function(e){var defaults=$.fn[this.type].defaults,options={},self;this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value},this);self=$(e.currentTarget)[this.type](options).data(this.type);if(!self.options.delay||!self.options.delay.show)return self.show();clearTimeout(this.timeout);self.hoverState="in";this.timeout=setTimeout(function(){if(self.hoverState==
"in")self.show()},self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout)clearTimeout(this.timeout);if(!self.options.delay||!self.options.delay.hide)return self.hide();self.hoverState="out";this.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)},show:function(){var $tip,pos,actualWidth,actualHeight,placement,tp,e=$.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(e);
if(e.isDefaultPrevented())return;$tip=this.tip();this.setContent();if(this.options.animation)$tip.addClass("fade");placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;$tip.detach().css({top:0,left:0,display:"block"});this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);pos=this.getPosition();actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;switch(placement){case "bottom":tp=
{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case "top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case "left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case "right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width};break}this.applyPlacement(tp,placement);this.$element.trigger("shown")}},applyPlacement:function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,
actualWidth,actualHeight,delta,replace;$tip.offset(offset).addClass(placement).addClass("in");actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight;replace=true}if(placement=="bottom"||placement=="top"){delta=0;if(offset.left<0){delta=offset.left*-2;offset.left=0;$tip.offset(offset);actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight}this.replaceArrow(delta-width+actualWidth,actualWidth,
"left")}else this.replaceArrow(actualHeight-height,actualHeight,"top");if(replace)$tip.offset(offset)},replaceArrow:function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")},hide:function(){var that=this,$tip=this.tip(),e=$.Event("hide");this.$element.trigger(e);if(e.isDefaultPrevented())return;
$tip.removeClass("in");function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).detach()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout);$tip.detach()})}$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.detach();this.$element.trigger("hidden");return this},fixTitle:function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string")$e.attr("data-original-title",$e.attr("title")||
"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var el=this.$element[0];return $.extend({},typeof el.getBoundingClientRect=="function"?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},getTitle:function(){var title,$e=this.$element,o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title},tip:function(){return this.$tip=this.$tip||$(this.options.template)},
arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var self=e?$(e.currentTarget)[this.type](this._options).data(this.type):this;self.tip().hasClass("in")?self.hide():self.show()},destroy:function(){this.hide().$element.off("."+
this.type).removeData(this.type)}};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options=typeof option=="object"&&option;if(!data)$this.data("tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})};$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
trigger:"hover focus",title:"",delay:0,html:false,container:false};$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(window.jQuery);!function($){$(function(){$.support.transition=function(){var transitionEnd=function(){var el=document.createElement("bootstrap"),transEndEventNames={"WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend","transition":"transitionend"},name;for(name in transEndEventNames)if(el.style[name]!==undefined)return transEndEventNames[name]}();return transitionEnd&&{end:transitionEnd}}()})}(window.jQuery);(function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}var n=e.prototype;n.getListeners=function(e){var t,n,i=this._getEvents();if("object"==typeof e){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},n.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},n.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},
n.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===t(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},n.on=n.addListener,n.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},n.once=n.addOnceListener,n.defineEvent=function(e){return this.getListeners(e),this},n.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},n.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);
for(r in o)o.hasOwnProperty(r)&&(i=t(o[r],n),-1!==i&&o[r].splice(i,1));return this},n.off=n.removeListener,n.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},n.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},n.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=
t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},n.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if("object"===n)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},n.emitEvent=function(e,t){var n,i,r,o,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(i=s[r].length;i--;)n=s[r][i],o=n.listener.apply(this,t||[]),(o===this._getOnceReturnValue()||n.once===!0)&&this.removeListener(e,
s[r][i].listener);return this},n.trigger=n.emitEvent,n.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},n.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=
e:this.EventEmitter=e}).call(this),function(e){var t=document.documentElement,n=function(){};t.addEventListener?n=function(e,t,n){e.addEventListener(t,n,!1)}:t.attachEvent&&(n=function(t,n,i){t[n+i]=i.handleEvent?function(){var t=e.event;t.target=t.target||t.srcElement,i.handleEvent.call(i,t)}:function(){var n=e.event;n.target=n.target||n.srcElement,i.call(t,n)},t.attachEvent("on"+n,t[n+i])});var i=function(){};t.removeEventListener?i=function(e,t,n){e.removeEventListener(t,n,!1)}:t.detachEvent&&
(i=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var r={bind:n,unbind:i};"function"==typeof define&&define.amd?define(r):e.eventie=r}(this),function(e){function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e){return"[object Array]"===c.call(e)}function i(e){var t=[];if(n(e))t=e;else if("number"==typeof e.length)for(var i=0,r=e.length;r>i;i++)t.push(e[i]);else t.push(e);return t}function r(e,n){function r(e,n,s){if(!(this instanceof r))return new r(e,
n);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=i(e),this.options=t({},this.options),"function"==typeof n?s=n:t(this.options,n),s&&this.on("always",s),this.getImages(),o&&(this.jqDeferred=new o.Deferred);var a=this;setTimeout(function(){a.check()})}function c(e){this.img=e}r.prototype=new e,r.prototype.options={},r.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var n=this.elements[e];"IMG"===n.nodeName&&this.addImage(n);for(var i=n.querySelectorAll("img"),
r=0,o=i.length;o>r;r++){var s=i[r];this.addImage(s)}}},r.prototype.addImage=function(e){var t=new c(e);this.images.push(t)},r.prototype.check=function(){function e(e,r){return t.options.debug&&a&&s.log("confirm",e,r),t.progress(e),n++,n===i&&t.complete(),!0}var t=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return this.complete(),void 0;for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",e),o.check()}},r.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;
var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify(t,e)})},r.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})},o&&(o.fn.imagesLoaded=function(e,t){var n=new r(this,e,t);return n.jqDeferred.promise(o(this))});var f={};return c.prototype=new e,c.prototype.check=function(){var e=f[this.img.src];
if(e)return this.useCached(e),void 0;if(f[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var t=this.proxyImage=new Image;n.bind(t,"load",this),n.bind(t,"error",this),t.src=this.img.src},c.prototype.useCached=function(e){if(e.isConfirmed)this.confirm(e.isLoaded,"cached was confirmed");else{var t=this;e.on("confirm",function(e){return t.confirm(e.isLoaded,"cache emitted confirmed"),!0})}},c.prototype.confirm=
function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},c.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},c.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},c.prototype.unbindProxyEvents=function(){n.unbind(this.proxyImage,"load",this),n.unbind(this.proxyImage,"error",this)},r}var o=e.jQuery,s=e.console,a=s!==void 0,c=Object.prototype.toString;
"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],r):e.imagesLoaded=r(e.EventEmitter,e.eventie)}(window);window.JSON||(window.JSON={}),function(){function f(a){return a<10?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b=="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g=gap,h,i=b[a];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(a)),typeof rep=="function"&&(i=rep.call(b,a,i));switch(typeof i){case "string":return quote(i);case "number":return isFinite(i)?
String(i):"null";case "boolean":case "null":return String(i);case "object":if(!i)return"null";gap+=indent,h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1)h[c]=str(c,i)||"null";return e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&typeof rep=="object"){f=rep.length;for(c=0;c<f;c+=1)d=rep[c],typeof d=="string"&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e))}else for(d in i)Object.hasOwnProperty.call(i,
d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}"use strict",typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=
function(a){return this.valueOf()});var JSON=window.JSON,cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(a,b,c){var d;gap="",indent="";if(typeof c==
"number")for(d=0;d<c;d+=1)indent+=" ";else typeof c=="string"&&(indent=c);rep=b;if(!b||typeof b=="function"||typeof b=="object"&&typeof b.length=="number")return str("",{"":a});throw new Error("JSON.stringify");}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e=="object")for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&
(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse");})}(),function(a,b){var c=a.History=a.History||{},d=a.jQuery;if(typeof c.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");
c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},typeof c.init!="undefined"&&c.init()}(window),function(a,b){var c=a.document,d=a.setTimeout||d,e=a.clearTimeout||e,f=a.setInterval||f,g=a.History=a.History||{};if(typeof g.initHtml4!="undefined")throw new Error("History.js HTML4 Support has already been loaded...");g.initHtml4=function(){if(typeof g.initHtml4.initialized!=
"undefined")return!1;g.initHtml4.initialized=!0,g.enabled=!0,g.savedHashes=[],g.isLastHash=function(a){var b=g.getHashByIndex(),c;return c=a===b,c},g.saveHash=function(a){return g.isLastHash(a)?!1:(g.savedHashes.push(a),!0)},g.getHashByIndex=function(a){var b=null;return typeof a=="undefined"?b=g.savedHashes[g.savedHashes.length-1]:a<0?b=g.savedHashes[g.savedHashes.length+a]:b=g.savedHashes[a],b},g.discardedHashes={},g.discardedStates={},g.discardState=function(a,b,c){var d=g.getHashByState(a),e;
return e={discardedState:a,backState:c,forwardState:b},g.discardedStates[d]=e,!0},g.discardHash=function(a,b,c){var d={discardedHash:a,backState:c,forwardState:b};return g.discardedHashes[a]=d,!0},g.discardedState=function(a){var b=g.getHashByState(a),c;return c=g.discardedStates[b]||!1,c},g.discardedHash=function(a){var b=g.discardedHashes[a]||!1;return b},g.recycleState=function(a){var b=g.getHashByState(a);return g.discardedState(a)&&delete g.discardedStates[b],!0},g.emulated.hashChange&&(g.hashChangeInit=
function(){g.checkerFunction=null;var b="",d,e,h,i;return g.isInternetExplorer()?(d="historyjs-iframe",e=c.createElement("iframe"),e.setAttribute("id",d),e.style.display="none",c.body.appendChild(e),e.contentWindow.document.open(),e.contentWindow.document.close(),h="",i=!1,g.checkerFunction=function(){if(i)return!1;i=!0;var c=g.getHash()||"",d=g.unescapeHash(e.contentWindow.document.location.hash)||"";return c!==b?(b=c,d!==c&&(h=d=c,e.contentWindow.document.open(),e.contentWindow.document.close(),
e.contentWindow.document.location.hash=g.escapeHash(c)),g.Adapter.trigger(a,"hashchange")):d!==h&&(h=d,g.setHash(d,!1)),i=!1,!0}):g.checkerFunction=function(){var c=g.getHash();return c!==b&&(b=c,g.Adapter.trigger(a,"hashchange")),!0},g.intervalList.push(f(g.checkerFunction,g.options.hashChangeInterval)),!0},g.Adapter.onDomLoad(g.hashChangeInit)),g.emulated.pushState&&(g.onHashChange=function(b){var d=b&&b.newURL||c.location.href,e=g.getHashByUrl(d),f=null,h=null,i=null,j;return g.isLastHash(e)?(g.busy(!1),
!1):(g.doubleCheckComplete(),g.saveHash(e),e&&g.isTraditionalAnchor(e)?(g.Adapter.trigger(a,"anchorchange"),g.busy(!1),!1):(f=g.extractState(g.getFullUrl(e||c.location.href,!1),!0),g.isLastSavedState(f)?(g.busy(!1),!1):(h=g.getHashByState(f),j=g.discardedState(f),j?(g.getHashByIndex(-2)===g.getHashByState(j.forwardState)?g.back(!1):g.forward(!1),!1):(g.pushState(f.data,f.title,f.url,!1),!0))))},g.Adapter.bind(a,"hashchange",g.onHashChange),g.pushState=function(b,d,e,f){if(g.getHashByUrl(e))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(f!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.pushState,args:arguments,queue:f}),!1;g.busy(!0);var h=g.createStateObject(b,d,e),i=g.getHashByState(h),j=g.getState(!1),k=g.getHashByState(j),l=g.getHash();return g.storeState(h),g.expectedStateId=h.id,g.recycleState(h),g.setTitle(h),i===k?(g.busy(!1),!1):i!==l&&i!==g.getShortUrl(c.location.href)?(g.setHash(i,!1),!1):(g.saveState(h),g.Adapter.trigger(a,"statechange"),g.busy(!1),!0)},g.replaceState=function(a,b,c,d){if(g.getHashByUrl(c))throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");
if(d!==!1&&g.busy())return g.pushQueue({scope:g,callback:g.replaceState,args:arguments,queue:d}),!1;g.busy(!0);var e=g.createStateObject(a,b,c),f=g.getState(!1),h=g.getStateByIndex(-2);return g.discardState(f,e,h),g.pushState(e.data,e.title,e.url,!1),!0}),g.emulated.pushState&&g.getHash()&&!g.emulated.hashChange&&g.Adapter.onDomLoad(function(){g.Adapter.trigger(a,"hashchange")})},typeof g.init!="undefined"&&g.init()}(window),function(a,b){var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||
!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode;if(typeof m.init!="undefined")throw new Error("History.js Core has already been loaded...");m.init=function(){return typeof m.Adapter=="undefined"?!1:(typeof m.initCore!="undefined"&&m.initCore(),typeof m.initHtml4!="undefined"&&m.initHtml4(),!0)},m.initCore=function(){if(typeof m.initCore.initialized!="undefined")return!1;
m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1E3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;
if(typeof b!="undefined"&&b!==null){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){(m.options.debug||!1)&&m.log.apply(m,arguments)},m.log=function(){var a=typeof c!="undefined"&&typeof c.log!="undefined"&&typeof c.log.apply!="undefined",b=d.getElementById("log"),e,f,g,h,i;a?(h=Array.prototype.slice.call(arguments),e=h.shift(),typeof c.debug!="undefined"?c.debug.apply(c,[e,h]):c.log.apply(c,[e,h])):e="\n"+arguments[0]+"\n";for(f=1,g=arguments.length;f<g;++f){i=arguments[f];
if(typeof i=="object"&&typeof k!="undefined")try{i=k.stringify(i)}catch(j){}e+="\n"+i+"\n"}return b?(b.value+=e+"\n-----\n",b.scrollTop=b.scrollHeight-b.clientHeight):a||l(e),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached=typeof m.getInternetExplorerMajorVersion.cached!="undefined"?m.getInternetExplorerMajorVersion.cached:function(){var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");while((b.innerHTML="<\!--[if gt IE "+ ++a+"]><i></i><![endif]--\>")&&
c[0]);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached=typeof m.isInternetExplorer.cached!="undefined"?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||
m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<
7)},m.isEmptyObject=function(a){for(var b in a)return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);if(d.location.port||!1)a+=":"+d.location.port;return a+="/",a},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return a.length===1&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=
m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var a=m.getState(!1,!1),b=(a||{}).url||d.location.href,c;return c=b.replace(/\/+$/,"").replace(/[^\/]+$/,function(a,b,c){return/\./.test(a)?a:a+"/"}),c},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a,b,c){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b=typeof b=="undefined"?!0:b,/[a-z]+\:\/\//.test(a)||
(d==="/"?c=m.getRootUrl()+a.replace(/^\/+/,""):d==="#"?c=m.getPageUrl().replace(/#.*/,"")+a:d==="?"?c=m.getPageUrl().replace(/[\?#].*/,"")+a:b?c=m.getBaseUrl()+a.replace(/^(\.\/)+/,""):c=m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),b},m.store={},m.idToState=m.idToState||
{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){typeof a=="undefined"&&(a=!0),typeof b=="undefined"&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b=
m.extractId(a.url),c;if(!b){c=m.getStateString(a);if(typeof m.stateToId[c]!="undefined")b=m.stateToId[c];else if(typeof m.store.stateToId[c]!="undefined")b=m.store.stateToId[c];else{for(;;){b=(new Date).getTime()+String(Math.random()).replace(/\D/g,"");if(typeof m.idToState[b]=="undefined"&&typeof m.store.idToState[b]=="undefined")break}m.stateToId[c]=b,m.idToState[b]=a}}return b},m.normalizeState=function(a){var b,c;if(!a||typeof a!="object")a={};if(typeof a.normalized!="undefined")return a;if(!a.data||
typeof a.data!="object")a.data={};b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data);if(b.title||c)b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;return b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&
m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d),d},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c),d},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id,c},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),
c=b.hash,c},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c=null,d,e;return b=b||!1,d=m.extractId(a),d&&(c=m.getStateById(d)),c||(e=m.getFullUrl(a),d=m.getIdByUrl(e)||!1,d&&(c=m.getStateById(d)),!c&&b&&!m.isTraditionalAnchor(a)&&(c=m.createStateObject(null,null,e))),c},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||
b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b=!1,c;return c=m.extractState(a.url),b=c&&c.id!==a.id,b},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b=!1,c,d,e;return m.savedStates.length&&(c=a.id,d=m.getLastSavedState(),e=d.id,b=c===e),b},m.saveState=function(a){return m.isLastSavedState(a)?
!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return typeof a=="undefined"?b=m.savedStates[m.savedStates.length-1]:a<0?b=m.savedStates[m.savedStates.length+a]:b=m.savedStates[a],b},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a},m.unescapeString=function(b){var c=b,d;for(;;){d=a.unescape(c);if(d===c)break;c=d}return c},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b),b},m.normalizeHash=function(a){var b=
a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.escape(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,
"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b),b},m.setTitle=function(a){var b=a.title,c;b||(c=m.getStateByIndex(0),c&&c.url===a.url&&(b=c.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=b.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=b,m},m.queues=[],m.busy=function(a){typeof a!="undefined"?
m.busy.flag=a:typeof m.busy.flag=="undefined"&&(m.busy.flag=!1);if(!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(m.busy.flag)return;for(a=m.queues.length-1;a>=0;--a){c=m.queues[a];if(c.length===0)continue;d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay)}};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||
0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return typeof a=="function"&&(a={callback:a}),typeof b!="undefined"&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=
!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b=m.extractState(d.location.href),c;if(!m.isLastSavedState(b))c=b;else return;return c||(c=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),
n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;c<=a;++c)m.forward(b);else{if(!(a<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m};if(m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||
o}else m.onPopState=function(b,c){var e=!1,f=!1,g,h;return m.doubleCheckComplete(),g=m.getHash(),g?(h=m.extractState(g||d.location.href,!0),h?m.replaceState(h.data,h.title,h.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(e=m.Adapter.extractEventData("state",b,c)||!1,e?f=m.getStateById(e):m.expectedStateId?f=m.getStateById(m.expectedStateId):f=m.extractState(d.location.href),f||(f=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(f)?
(m.busy(!1),!1):(m.storeState(f),m.saveState(f),m.setTitle(f),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):
(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=
f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;try{a=k.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=
a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState){if(!m.idToState.hasOwnProperty(b))continue;a.idToState[b]=m.idToState[b]}for(b in m.urlToId){if(!m.urlToId.hasOwnProperty(b))continue;a.urlToId[b]=m.urlToId[b]}for(b in m.stateToId){if(!m.stateToId.hasOwnProperty(b))continue;a.stateToId[b]=m.stateToId[b]}m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a))},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,
"unload",m.onUnload));if(!m.emulated.pushState){m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval));if(e.vendor==="Apple Computer, Inc."||(e.appCodeName||"")==="Mozilla")m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})}},m.init()}(window);(function($,window,document,undefined){var pluginName="scrolly",defaults={bgParallax:false},didScroll=false;function Plugin(element,options){this.element=element;this.$element=$(this.element);this.options=$.extend({},defaults,options);this._defaults=defaults;this._name=pluginName;this.init()}Plugin.prototype.init=function(){var self=this;this.startPosition=this.$element.position().top;this.offsetTop=this.$element.offset().top;this.height=this.$element.outerHeight(true);this.velocity=this.$element.attr("data-velocity");
this.bgStart=parseInt(this.$element.attr("data-fit"),10);$(document).scroll(function(){self.didScroll=true});setInterval(function(){if(self.didScroll){self.didScroll=false;self.scrolly()}},10)};Plugin.prototype.scrolly=function(){var dT=$(window).scrollTop(),wH=$(window).height(),position=this.startPosition;if(this.offsetTop>=dT+wH)this.$element.addClass("scrolly-invisible");else if(this.$element.hasClass("scrolly-invisible"))position=this.startPosition+(dT+(wH-this.offsetTop))*this.velocity;else position=
this.startPosition+dT*this.velocity;if(this.bgStart)position=position+this.bgStart;if(this.options.bgParallax===true)this.$element.css({backgroundPosition:"50% "+position+"px"});else this.$element.css({top:position})};$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+pluginName))$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}})(jQuery,window,document);(function($){$.fn.activity=function(opts){this.each(function(){var $this=$(this);var el=$this.data("activity");if(el){clearInterval(el.data("interval"));el.remove();$this.removeData("activity")}if(opts!==false){opts=$.extend({color:$this.css("color")},$.fn.activity.defaults,opts);el=render($this,opts).css("position","absolute").prependTo(opts.outside?"body":$this);var h=$this.outerHeight()-el.height();var w=$this.outerWidth()-el.width();var margin={top:opts.valign=="top"?opts.padding:opts.valign==
"bottom"?h-opts.padding:Math.floor(h/2),left:opts.align=="left"?opts.padding:opts.align=="right"?w-opts.padding:Math.floor(w/2)};var offset=$this.offset();if(opts.outside)el.css({top:offset.top+"px",left:offset.left+"px"});else{margin.top-=el.offset().top-offset.top;margin.left-=el.offset().left-offset.left}el.css({marginTop:margin.top+"px",marginLeft:margin.left+"px"});animate(el,opts.segments,Math.round(10/opts.speed)/10);$this.data("activity",el)}});return this};$.fn.activity.defaults={segments:12,
space:3,length:7,width:4,speed:1.2,align:"center",valign:"center",padding:4};$.fn.activity.getOpacity=function(opts,i){var steps=opts.steps||opts.segments-1;var end=opts.opacity!==undefined?opts.opacity:1/steps;return 1-Math.min(i,steps)*(1-end)/steps};var render=function(){return $("<div>").addClass("busy")};var animate=function(){};function svg(tag,attr){var el=document.createElementNS("http://www.w3.org/2000/svg",tag||"svg");if(attr)$.each(attr,function(k,v){el.setAttributeNS(null,k,v)});return $(el)}
if(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect){render=function(target,d){var innerRadius=d.width*2+d.space;var r=innerRadius+d.length+Math.ceil(d.width/2)+1;var el=svg().width(r*2).height(r*2);var g=svg("g",{"stroke-width":d.width,"stroke-linecap":"round",stroke:d.color}).appendTo(svg("g",{transform:"translate("+r+","+r+")"}).appendTo(el));for(var i=0;i<d.segments;i++)g.append(svg("line",{x1:0,y1:innerRadius,x2:0,y2:innerRadius+d.length,transform:"rotate("+
360/d.segments*i+", 0, 0)",opacity:$.fn.activity.getOpacity(d,i)}));return $("<div>").append(el).width(2*r).height(2*r)};if(document.createElement("div").style.WebkitAnimationName!==undefined){var animations={};animate=function(el,steps,duration){if(!animations[steps]){var name="spin"+steps;var rule="@-webkit-keyframes "+name+" {";for(var i=0;i<steps;i++){var p1=Math.round(1E5/steps*i)/1E3;var p2=Math.round(1E5/steps*(i+1)-1)/1E3;var value="% { -webkit-transform:rotate("+Math.round(360/steps*i)+"deg); }\n";
rule+=p1+value+p2+value}rule+="100% { -webkit-transform:rotate(100deg); }\n}";document.styleSheets[0].insertRule(rule);animations[steps]=name}el.css("-webkit-animation",animations[steps]+" "+duration+"s linear infinite")}}else animate=function(el,steps,duration){var rotation=0;var g=el.find("g g").get(0);el.data("interval",setInterval(function(){g.setAttributeNS(null,"transform","rotate("+ ++rotation%steps*(360/steps)+")")},duration*1E3/steps))}}else{var s=$("<shape>").css("behavior","url(#default#VML)").appendTo("body");
if(s.get(0)&&s.get(0).adj){var sheet=document.createStyleSheet();$.each(["group","shape","stroke"],function(){sheet.addRule(this,"behavior:url(#default#VML);")});render=function(target,d){var innerRadius=d.width*2+d.space;var r=innerRadius+d.length+Math.ceil(d.width/2)+1;var s=r*2;var o=-Math.ceil(s/2);var el=$("<group>",{coordsize:s+" "+s,coordorigin:o+" "+o}).css({top:o,left:o,width:s,height:s});for(var i=0;i<d.segments;i++)el.append($("<shape>",{path:"m "+innerRadius+",0  l "+(innerRadius+d.length)+
",0"}).css({width:s,height:s,rotation:360/d.segments*i+"deg"}).append($("<stroke>",{color:d.color,weight:d.width+"px",endcap:"round",opacity:$.fn.activity.getOpacity(d,i)})));return $("<group>",{coordsize:s+" "+s}).css({width:s,height:s,overflow:"hidden"}).append(el)};animate=function(el,steps,duration){var rotation=0;var g=el.get(0);el.data("interval",setInterval(function(){g.style.rotation=++rotation%steps*(360/steps)},duration*1E3/steps))}}$(s).remove()}})(jQuery);(function(f,h,$){var a="placeholder"in h.createElement("input"),d="placeholder"in h.createElement("textarea"),i=$.fn,c=$.valHooks,k,j;if(a&&d){j=i.placeholder=function(){return this};j.input=j.textarea=true}else{j=i.placeholder=function(){var l=this;l.filter((a?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":b,"blur.placeholder":e}).data("placeholder-enabled",true).trigger("blur.placeholder");return l};j.input=a;j.textarea=d;k={get:function(m){var l=$(m);return l.data("placeholder-enabled")&&
l.hasClass("placeholder")?"":m.value},set:function(m,n){var l=$(m);if(!l.data("placeholder-enabled"))return m.value=n;if(n==""){m.value=n;if(m!=h.activeElement)e.call(m)}else if(l.hasClass("placeholder"))b.call(m,true,n)||(m.value=n);else m.value=n;return l}};a||(c.input=k);d||(c.textarea=k);$(function(){$(h).delegate("form","submit.placeholder",function(){var l=$(".placeholder",this).each(b);setTimeout(function(){l.each(e)},10)})});$(f).bind("beforeunload.placeholder",function(){$(".placeholder").each(function(){this.value=
""})})}function g(m){var l={},n=/^jQuery\d+$/;$.each(m.attributes,function(p,o){if(o.specified&&!n.test(o.name))l[o.name]=o.value});return l}function b(m,n){var l=this,o=$(l);if(l.value==o.attr("placeholder")&&o.hasClass("placeholder"))if(o.data("placeholder-password")){o=o.hide().next().show().attr("id",o.removeAttr("id").data("placeholder-id"));if(m===true)return o[0].value=n;o.focus()}else{l.value="";o.removeClass("placeholder");l==h.activeElement&&l.select()}}function e(){var q,l=this,p=$(l),
m=p,o=this.id;if(l.value==""){if(l.type=="password"){if(!p.data("placeholder-textinput")){try{q=p.clone().attr({type:"text"})}catch(n){q=$("<input>").attr($.extend(g(this),{type:"text"}))}q.removeAttr("name").data({"placeholder-password":true,"placeholder-id":o}).bind("focus.placeholder",b);p.data({"placeholder-textinput":q,"placeholder-id":o}).before(q)}p=p.removeAttr("id").hide().prev().attr("id",o).show()}p.addClass("placeholder");p[0].value=p.attr("placeholder")}else p.removeClass("placeholder")}
})(this,document,jQuery);(function($){$.fn.activity=function(opts){return this.each(function(){var $this=$(this);var data=$this.data();if(data.spinner){data.spinner.stop();delete data.spinner}if(!opts)opts={lines:7,length:0,width:4,radius:6,corners:1,rotate:0,direction:1,color:"#000",speed:1.4,trail:35,shadow:false,hwaccel:false,className:"spinner",zIndex:1,top:"auto",left:"auto"};data.spinner=(new Spinner(opts)).spin(this)})}})(jQuery);(function(t,e){if(typeof exports=="object")module.exports=e();else if(typeof define=="function"&&define.amd)define(e);else t.Spinner=e()})(this,function(){var t=["webkit","Moz","ms","O"],e={},i;function o(t,e){var i=document.createElement(t||"div"),o;for(o in e)i[o]=e[o];return i}function n(t){for(var e=1,i=arguments.length;e<i;e++)t.appendChild(arguments[e]);return t}var r=function(){var t=o("style",{type:"text/css"});n(document.getElementsByTagName("head")[0],t);return t.sheet||t.styleSheet}();
function s(t,o,n,s){var a=["opacity",o,~~(t*100),n,s].join("-"),f=0.01+n/s*100,l=Math.max(1-(1-t)/o*(100-f),t),d=i.substring(0,i.indexOf("Animation")).toLowerCase(),u=d&&"-"+d+"-"||"";if(!e[a]){r.insertRule("@"+u+"keyframes "+a+"{"+"0%{opacity:"+l+"}"+f+"%{opacity:"+t+"}"+(f+0.01)+"%{opacity:1}"+(f+o)%100+"%{opacity:"+t+"}"+"100%{opacity:"+l+"}"+"}",r.cssRules.length);e[a]=1}return a}function a(e,i){var o=e.style,n,r;if(o[i]!==undefined)return i;i=i.charAt(0).toUpperCase()+i.slice(1);for(r=0;r<t.length;r++){n=
t[r]+i;if(o[n]!==undefined)return n}}function f(t,e){for(var i in e)t.style[a(t,i)||i]=e[i];return t}function l(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)if(t[o]===undefined)t[o]=i[o]}return t}function d(t){var e={x:t.offsetLeft,y:t.offsetTop};while(t=t.offsetParent)e.x+=t.offsetLeft,e.y+=t.offsetTop;return e}var u={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:1/4,fps:20,zIndex:2E9,className:"spinner",top:"auto",
left:"auto",position:"relative"};function p(t){if(typeof this=="undefined")return new p(t);this.opts=l(t||{},p.defaults,u)}p.defaults={};l(p.prototype,{spin:function(t){this.stop();var e=this,n=e.opts,r=e.el=f(o(0,{className:n.className}),{position:n.position,width:0,zIndex:n.zIndex}),s=n.radius+n.length+n.width,a,l;if(t){t.insertBefore(r,t.firstChild||null);l=d(t);a=d(r);f(r,{left:(n.left=="auto"?l.x-a.x+(t.offsetWidth>>1):parseInt(n.left,10)+s)+"px",top:(n.top=="auto"?l.y-a.y+(t.offsetHeight>>1):
parseInt(n.top,10)+s)+"px"})}r.setAttribute("role","progressbar");e.lines(r,e.opts);if(!i){var u=0,p=(n.lines-1)*(1-n.direction)/2,c,h=n.fps,m=h/n.speed,y=(1-n.opacity)/(m*n.trail/100),g=m/n.lines;(function v(){u++;for(var t=0;t<n.lines;t++){c=Math.max(1-(u+(n.lines-t)*g)%m*y,n.opacity);e.opacity(r,t*n.direction+p,c,n)}e.timeout=e.el&&setTimeout(v,~~(1E3/h))})()}return e},stop:function(){var t=this.el;if(t){clearTimeout(this.timeout);if(t.parentNode)t.parentNode.removeChild(t);this.el=undefined}return this},
lines:function(t,e){var r=0,a=(e.lines-1)*(1-e.direction)/2,l;function d(t,i){return f(o(),{position:"absolute",width:e.length+e.width+"px",height:e.width+"px",background:t,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/e.lines*r+e.rotate)+"deg) translate("+e.radius+"px"+",0)",borderRadius:(e.corners*e.width>>1)+"px"})}for(;r<e.lines;r++){l=f(o(),{position:"absolute",top:1+~(e.width/2)+"px",transform:e.hwaccel?"translate3d(0,0,0)":"",opacity:e.opacity,animation:i&&s(e.opacity,e.trail,
a+r*e.direction,e.lines)+" "+1/e.speed+"s linear infinite"});if(e.shadow)n(l,f(d("#000","0 0 4px "+"#000"),{top:2+"px"}));n(t,n(l,d(e.color,"0 0 1px rgba(0,0,0,.1)")))}return t},opacity:function(t,e,i){if(e<t.childNodes.length)t.childNodes[e].style.opacity=i}});function c(){function t(t,e){return o("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}r.addRule(".spin-vml","behavior:url(#default#VML)");p.prototype.lines=function(e,i){var o=i.length+i.width,r=2*o;function s(){return f(t("group",
{coordsize:r+" "+r,coordorigin:-o+" "+-o}),{width:r,height:r})}var a=-(i.width+i.length)*2+"px",l=f(s(),{position:"absolute",top:a,left:a}),d;function u(e,r,a){n(l,n(f(s(),{rotation:360/i.lines*e+"deg",left:~~r}),n(f(t("roundrect",{arcsize:i.corners}),{width:o,height:i.width,left:i.radius,top:-i.width>>1,filter:a}),t("fill",{color:i.color,opacity:i.opacity}),t("stroke",{opacity:0}))))}if(i.shadow)for(d=1;d<=i.lines;d++)u(d,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
for(d=1;d<=i.lines;d++)u(d);return n(e,l)};p.prototype.opacity=function(t,e,i,o){var n=t.firstChild;o=o.shadow&&o.lines||0;if(n&&e+o<n.childNodes.length){n=n.childNodes[e+o];n=n&&n.firstChild;n=n&&n.firstChild;if(n)n.opacity=i}}}var h=f(o("group"),{behavior:"url(#default#VML)"});if(!a(h,"transform")&&h.adj)c();else i=a(h,"animation");return p});(function($){var _={isMsie:function(){var match=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return match?parseInt(match[2],10):false},isBlankString:function(str){return!str||/^\s*$/.test(str)},escapeRegExChars:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(obj){return typeof obj==="string"},isNumber:function(obj){return typeof obj==="number"},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(obj){return typeof obj===
"undefined"},bind:$.proxy,each:function(collection,cb){$.each(collection,reverseArgs);function reverseArgs(index,value){return cb(value,index)}},map:$.map,filter:$.grep,every:function(obj,test){var result=true;if(!obj)return result;$.each(obj,function(key,val){if(!(result=test.call(null,val,key,obj)))return false});return!!result},some:function(obj,test){var result=false;if(!obj)return result;$.each(obj,function(key,val){if(result=test.call(null,val,key,obj))return false});return!!result},mixin:$.extend,
getUniqueId:function(){var counter=0;return function(){return counter++}}(),templatify:function templatify(obj){return $.isFunction(obj)?obj:template;function template(){return String(obj)}},defer:function(fn){setTimeout(fn,0)},debounce:function(func,wait,immediate){var timeout,result;return function(){var context=this,args=arguments,later,callNow;later=function(){timeout=null;if(!immediate)result=func.apply(context,args)};callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,
wait);if(callNow)result=func.apply(context,args);return result}},throttle:function(func,wait){var context,args,timeout,result,previous,later;previous=0;later=function(){previous=new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date,remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout)timeout=setTimeout(later,remaining);return result}},noop:function(){}};
var VERSION="0.9.3";var LruCache=function(root,undefined){function LruCache(maxSize){this.maxSize=maxSize||100;this.size=0;this.hash={};this.list=new List}_.mixin(LruCache.prototype,{set:function set(key,val){var tailItem=this.list.tail,node;if(this.size>=this.maxSize){this.list.remove(tailItem);delete this.hash[tailItem.key]}if(node=this.hash[key]){node.val=val;this.list.moveToFront(node)}else{node=new Node(key,val);this.list.add(node);this.hash[key]=node;this.size++}},get:function get(key){var node=
this.hash[key];if(node){this.list.moveToFront(node);return node.val}}});function List(){this.head=this.tail=null}_.mixin(List.prototype,{add:function add(node){if(this.head){node.next=this.head;this.head.prev=node}this.head=node;this.tail=this.tail||node},remove:function remove(node){node.prev?node.prev.next=node.next:this.head=node.next;node.next?node.next.prev=node.prev:this.tail=node.prev},moveToFront:function(node){this.remove(node);this.add(node)}});function Node(key,val){this.key=key;this.val=
val;this.prev=this.next=null}return LruCache}(this);var PersistentStorage=function(){var ls,methods;try{ls=window.localStorage;ls.setItem("~~~","!");ls.removeItem("~~~")}catch(err){ls=null}function PersistentStorage(namespace){this.prefix=["__",namespace,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}if(ls&&window.JSON)methods={_prefix:function(key){return this.prefix+key},_ttlKey:function(key){return this._prefix(key)+this.ttlKey},get:function(key){if(this.isExpired(key))this.remove(key);
return decode(ls.getItem(this._prefix(key)))},set:function(key,val,ttl){if(_.isNumber(ttl))ls.setItem(this._ttlKey(key),encode(now()+ttl));else ls.removeItem(this._ttlKey(key));return ls.setItem(this._prefix(key),encode(val))},remove:function(key){ls.removeItem(this._ttlKey(key));ls.removeItem(this._prefix(key));return this},clear:function(){var i,key,keys=[],len=ls.length;for(i=0;i<len;i++)if((key=ls.key(i)).match(this.keyMatcher))keys.push(key.replace(this.keyMatcher,""));for(i=keys.length;i--;)this.remove(keys[i]);
return this},isExpired:function(key){var ttl=decode(ls.getItem(this._ttlKey(key)));return _.isNumber(ttl)&&now()>ttl?true:false}};else methods={get:_.noop,set:_.noop,remove:_.noop,clear:_.noop,isExpired:_.noop};_.mixin(PersistentStorage.prototype,methods);return PersistentStorage;function now(){return(new Date).getTime()}function encode(val){return JSON.stringify(_.isUndefined(val)?null:val)}function decode(val){return JSON.parse(val)}}();var Transport=function(){var pendingRequestsCount=0,pendingRequests=
{},maxPendingRequests=6,requestCache=new LruCache(10);function Transport(o){o=o||{};this._send=o.send?callbackToDeferred(o.send):$.ajax;this._get=o.rateLimiter?o.rateLimiter(this._get):this._get}Transport.setMaxPendingRequests=function setMaxPendingRequests(num){maxPendingRequests=num};Transport.resetCache=function clearCache(){requestCache=new LruCache(10)};_.mixin(Transport.prototype,{_get:function(url,o,cb){var that=this,jqXhr;if(jqXhr=pendingRequests[url])jqXhr.done(done);else if(pendingRequestsCount<
maxPendingRequests){pendingRequestsCount++;pendingRequests[url]=this._send(url,o).done(done).always(always)}else this.onDeckRequestArgs=[].slice.call(arguments,0);function done(resp){cb&&cb(resp);requestCache.set(url,resp)}function always(){pendingRequestsCount--;delete pendingRequests[url];if(that.onDeckRequestArgs){that._get.apply(that,that.onDeckRequestArgs);that.onDeckRequestArgs=null}}},get:function(url,o,cb){var that=this,resp;if(_.isFunction(o)){cb=o;o={}}if(resp=requestCache.get(url))_.defer(function(){cb&&
cb(resp)});else this._get(url,o,cb);return!!resp}});return Transport;function callbackToDeferred(fn){return function customSendWrapper(url,o){var deferred=$.Deferred();fn(url,o,onSuccess,onError);return deferred;function onSuccess(resp){_.defer(function(){deferred.resolve(resp)})}function onError(err){_.defer(function(){deferred.reject(err)})}}}}();var SearchIndex=function(){function SearchIndex(o){o=o||{};this.tokenize=o.tokenizer||tokenize;this.datums=[];this.trie=newNode()}_.mixin(SearchIndex.prototype,
{bootstrap:function bootstrap(o){this.datums=o.datums;this.trie=o.trie},add:function(data){var that=this;data=_.isArray(data)?data:[data];_.each(data,function(datum){var id,tokens;id=that.datums.push(datum)-1;tokens=normalizeTokens(datum.tokens||that.tokenize(datum.value));delete datum.tokens;_.each(tokens,function(token){var node,chars,ch,ids;node=that.trie;chars=token.split("");while(ch=chars.shift()){node=node.children[ch]||(node.children[ch]=newNode());node.ids.push(id)}})})},remove:function remove(){$.error("not implemented")},
get:function get(query){var that=this,tokens,matches;tokens=this.tokenize(query);_.each(tokens,function(token){var node,chars,ch,ids;if(matches&&matches.length===0)return false;node=that.trie;chars=token.split("");while(node&&(ch=chars.shift()))node=node.children[ch];if(node&&chars.length===0){ids=node.ids.slice(0);matches=matches?getIntersection(matches,ids):ids}else return false});return matches?_.map(unique(matches),function(id){return that.datums[id]}):[]},serialize:function serialize(){return{datums:this.datums,
trie:this.trie}}});return SearchIndex;function tokenize(str){return $.trim(str).toLowerCase().split(/\s+/)}function normalizeTokens(tokens){tokens=_.filter(tokens,function(token){return!!token});tokens=_.map(tokens,function(token){return token.toLowerCase()});return tokens}function newNode(){return{ids:[],children:{}}}function unique(array){var seen={},uniques=[];for(var i=0;i<array.length;i++)if(!seen[array[i]]){seen[array[i]]=true;uniques.push(array[i])}return uniques}function getIntersection(arrayA,
arrayB){var ai=0,bi=0,intersection=[];arrayA=arrayA.sort(compare);arrayB=arrayB.sort(compare);while(ai<arrayA.length&&bi<arrayB.length)if(arrayA[ai]<arrayB[bi])ai++;else if(arrayA[ai]>arrayB[bi])bi++;else{intersection.push(arrayA[ai]);ai++;bi++}return intersection;function compare(a,b){return a-b}}}();var Dataset=window.Dataset=function(){var keys;keys={data:"data",protocol:"protocol",thumbprint:"thumbprint"};function Dataset(o){if(!o||!o.local&&!o.prefetch&&!o.remote)$.error("one of local, prefetch, or remote is required");
this.name=o.name||_.getUniqueId();this.limit=o.limit||5;this.valueKey=o.valueKey||"value";this.dupChecker=getDupChecker(o.dupChecker);this.sorter=getSorter(o.sorter);this.local=getLocal(o);this.prefetch=getPrefetch(o);this.remote=getRemote(o);this.index=new SearchIndex({tokenizer:o.tokenizer});this.storage=o.name?new PersistentStorage(o.name):null}_.mixin(Dataset.prototype,{_loadPrefetch:function loadPrefetch(o){var that=this,serialized,deferred;if(serialized=this._readFromStorage(o.thumbprint)){this.index.bootstrap(serialized);
deferred=$.Deferred().resolve()}else deferred=$.ajax(o.url,o.ajax).done(handlePrefetchResponse);return deferred;function handlePrefetchResponse(resp){var filtered,normalized;filtered=o.filter?o.filter(resp):resp;that.add(filtered);that._saveToStorage(that.index.serialize(),o.thumbprint,o.ttl)}},_getFromRemote:function getFromRemote(query,cb){var that=this,url,uriEncodedQuery;query=query||"";uriEncodedQuery=encodeURIComponent(query);url=this.remote.replace?this.remote.replace(this.remote.url,query):
this.remote.url.replace(this.remote.wildcard,uriEncodedQuery);return this.transport.get(url,this.remote.ajax,handleRemoteResponse);function handleRemoteResponse(resp){var filtered=that.remote.filter?that.remote.filter(resp):resp;cb(that._normalize(filtered))}},_normalize:function normalize(data){var that=this;return _.map(data,normalizeRawDatum);function normalizeRawDatum(raw){var value,datum;value=_.isString(raw)?raw:raw[that.valueKey];datum={value:value,tokens:raw.tokens};_.isString(raw)?(datum.raw=
{})[that.valueKey]=raw:datum.raw=raw;return datum}},_saveToStorage:function saveToStorage(data,thumbprint,ttl){if(this.storage){this.storage.set(keys.data,data,ttl);this.storage.set(keys.protocol,location.protocol,ttl);this.storage.set(keys.thumbprint,thumbprint,ttl)}},_readFromStorage:function readFromStorage(thumbprint){var stored={};if(this.storage){stored.data=this.storage.get(keys.data);stored.protocol=this.storage.get(keys.protocol);stored.thumbprint=this.storage.get(keys.thumbprint)}isExpired=
stored.thumbprint!==thumbprint||stored.protocol!==location.protocol;return stored.data&&!isExpired?stored.data:null},initialize:function initialize(){var that=this,deferred;deferred=this.prefetch?this._loadPrefetch(this.prefetch):$.Deferred().resolve();this.local&&deferred.done(addLocalToIndex);this.transport=this.remote?new Transport(this.remote):null;this.initialize=function initialize(){return that};return this;function addLocalToIndex(){that.add(that.local)}},add:function add(data){var normalized;
data=_.isArray(data)?data:[data];normalized=this._normalize(data);this.index.add(normalized)},get:function get(query,cb){var that=this,matches,cacheHit=false;matches=_.map(this.index.get(query),pickRaw).sort(this.sorter).slice(0,this.limit);if(matches.length<this.limit&&this.transport)cacheHit=this._getFromRemote(query,returnRemoteMatches);!cacheHit&&cb&&cb(matches);function returnRemoteMatches(remoteMatches){var matchesWithBackfill=matches.slice(0);remoteMatches=_.map(remoteMatches,pickRaw);_.each(remoteMatches,
function(remoteMatch){var isDuplicate;isDuplicate=_.some(matchesWithBackfill,function(match){return that.dupChecker(remoteMatch,match)});!isDuplicate&&matchesWithBackfill.push(remoteMatch);return matchesWithBackfill.length<that.limit});cb&&cb(matchesWithBackfill.sort(that.sorter))}function pickRaw(obj){return obj.raw}}});return Dataset;function getSorter(sorter){return sorter||defaultSorter;function defaultSorter(){return 0}}function getDupChecker(dupChecker){if(!_.isFunction(dupChecker))dupChecker=
dupChecker===false?ignoreDups:standardDupChecker;return dupChecker;function ignoreDups(){return false}function standardDupChecker(a,b){return a.value===b.value}}function getLocal(o){return o.local||null}function getPrefetch(o){var prefetch,defaults;defaults={url:null,thumbprint:"",ttl:24*60*60*1E3,filter:null,ajax:{}};if(prefetch=o.prefetch||null){prefetch=_.isString(prefetch)?{url:prefetch}:prefetch;prefetch=_.mixin(defaults,prefetch);prefetch.thumbprint=VERSION+prefetch.thumbprint;prefetch.ajax.method=
prefetch.ajax.method||"get";prefetch.ajax.dataType=prefetch.ajax.dataType||"json"}return prefetch}function getRemote(o){var remote,defaults;defaults={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(remote=o.remote||null){remote=_.isString(remote)?{url:remote}:remote;remote=_.mixin(defaults,remote);remote.rateLimiter=/^throttle$/i.test(remote.rateLimitBy)?byThrottle(remote.rateLimitWait):byDebounce(remote.rateLimitWait);remote.ajax.method=
remote.ajax.method||"get";remote.ajax.dataType=remote.ajax.dataType||"json";delete remote.rateLimitBy;delete remote.rateLimitWait}return remote;function byDebounce(wait){return function(fn){return _.debounce(fn,wait)}}function byThrottle(wait){return function(fn){return _.throttle(fn,wait)}}}}();var html={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',section:'<div class="tt-section-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',
suggestion:'<div class="tt-suggestion">%BODY%</div>'};var css={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},
ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(_.isMsie())_.mixin(css.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"});if(_.isMsie()&&_.isMsie()<=7)_.mixin(css.query,{marginTop:"-1px"});var EventBus=function(){var namespace="typeahead:";function EventBus(o){if(!o||!o.el)$.error("EventBus initialized without el");this.$el=$(o.el)}_.mixin(EventBus.prototype,{trigger:function(type){var args=[].slice.call(arguments,1);this.$el.trigger(namespace+
type,args)}});return EventBus}();var EventEmitter=function(){var splitter=/\s+/,nextTick=getNextTick();return{onSync:onSync,onAsync:onAsync,off:off,trigger:trigger};function on(method,types,cb,context){var type;if(!cb)return this;types=types.split(splitter);cb=context?bindContext(cb,context):cb;this._callbacks=this._callbacks||{};while(type=types.shift()){this._callbacks[type]=this._callbacks[type]||{sync:[],async:[]};this._callbacks[type][method].push(cb)}return this}function onAsync(types,cb,context){return on.call(this,
"async",types,cb,context)}function onSync(types,cb,context){return on.call(this,"sync",types,cb,context)}function off(types){var type;if(!this._callbacks)return this;types=types.split(splitter);while(type=types.shift())delete this._callbacks[type];return this}function trigger(types){var that=this,type,callbacks,args,syncFlush,asyncFlush;if(!this._callbacks)return this;types=types.split(splitter);args=[].slice.call(arguments,1);while((type=types.shift())&&(callbacks=this._callbacks[type])){syncFlush=
getFlush(callbacks.sync,this,[type].concat(args));asyncFlush=getFlush(callbacks.async,this,[type].concat(args));syncFlush()&&nextTick(asyncFlush)}return this}function getFlush(callbacks,context,args){return flush;function flush(){var cancelled;for(var i=0;!cancelled&&i<callbacks.length;i+=1)cancelled=callbacks[i].apply(context,args)===false;return!cancelled}}function getNextTick(){var nextTickFn,messageChannel;if(window.setImmediate)nextTickFn=function nextTickSetImmediate(fn){setImmediate(function(){fn()})};
else nextTickFn=function nextTickSetTimeout(fn){setTimeout(function(){fn()},0)};return nextTickFn}function bindContext(fn,context){return fn.bind?fn.bind(context):function(){fn.apply(context,[].slice.call(arguments,0))}}}();var highlight=function(doc){var defaults={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false};return function hightlight(o){var regex;o=_.mixin({},defaults,o);if(!o.node||!o.pattern)throw new Error("both node and pattern must be set");o.pattern=
_.isArray(o.pattern)?o.pattern:[o.pattern];regex=getRegex(o.pattern,o.caseSensitive,o.wordsOnly);traverse(o.node,hightlightTextNode);function hightlightTextNode(textNode){var match,patternNode;if(match=regex.exec(textNode.data)){wrapperNode=doc.createElement(o.tagName);o.className&&(wrapperNode.className=o.className);patternNode=textNode.splitText(match.index);patternNode.splitText(match[0].length);wrapperNode.appendChild(patternNode.cloneNode(true));textNode.parentNode.replaceChild(wrapperNode,patternNode)}return!!match}
function traverse(el,hightlightTextNode){var childNode,TEXT_NODE_TYPE=3;for(var i=0;i<el.childNodes.length;i++){childNode=el.childNodes[i];if(childNode.nodeType===TEXT_NODE_TYPE)i+=hightlightTextNode(childNode)?1:0;else traverse(childNode,hightlightTextNode)}}};function getRegex(patterns,caseSensitive,wordsOnly){var escapedPatterns=[],regexStr;for(var i=0;i<patterns.length;i++)escapedPatterns.push(_.escapeRegExChars(patterns[i]));regexStr=wordsOnly?"\\b("+escapedPatterns.join("|")+")\\b":"("+escapedPatterns.join("|")+
")";return caseSensitive?new RegExp(regexStr):new RegExp(regexStr,"i")}}(window.document);var Input=function(){var specialKeyCodeMap;specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function Input(o){var that=this,onBlur,onFocus,onKeydown,onInput;o=o||{};if(!o.input)$.error("input is missing");onBlur=_.bind(this._onBlur,this);onFocus=_.bind(this._onFocus,this);onKeydown=_.bind(this._onKeydown,this);onInput=_.bind(this._onInput,this);this.$hint=$(o.hint);this.$input=
$(o.input).on("blur.tt",onBlur).on("focus.tt",onFocus).on("keydown.tt",onKeydown);if(this.$hint.length===0)this.setHintValue=this.getHintValue=this.clearHint=_.noop;if(!_.isMsie())this.$input.on("input.tt",onInput);else this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function($e){if(specialKeyCodeMap[$e.which||$e.keyCode])return;_.defer(_.bind(that._onInput,that,$e))});this.query=this.$input.val();this.$overflowHelper=buildOverflowHelper(this.$input)}Input.normalizeQuery=function(str){return(str||
"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};_.mixin(Input.prototype,EventEmitter,{_onBlur:function onBlur($e){this.resetInputValue();this.trigger("blurred")},_onFocus:function onFocus($e){this.trigger("focused")},_onKeydown:function onKeydown($e){var keyName=specialKeyCodeMap[$e.which||$e.keyCode];this._managePreventDefault(keyName,$e);if(keyName&&this._shouldTrigger(keyName,$e))this.trigger(keyName+"Keyed",$e)},_onInput:function onInput($e){this._checkInputValue()},_managePreventDefault:function managePreventDefault(keyName,
$e){var preventDefault,hintValue,inputValue;switch(keyName){case "tab":hintValue=this.getHintValue();inputValue=this.getInputValue();preventDefault=hintValue&&hintValue!==inputValue&&!withModifier($e);break;case "up":case "down":preventDefault=!withModifier($e);break;default:preventDefault=false}preventDefault&&$e.preventDefault()},_shouldTrigger:function shouldTrigger(keyName,$e){var trigger;switch(keyName){case "tab":trigger=!withModifier($e);break;default:trigger=true}return trigger},_checkInputValue:function checkInputValue(){var inputValue,
areEquivalent,hasDifferentWhitespace;inputValue=this.getInputValue();areEquivalent=areQueriesEquivalent(inputValue,this.query);hasDifferentWhitespace=areEquivalent?this.query.length!==inputValue.length:false;if(!areEquivalent)this.trigger("queryChanged",this.query=inputValue);else if(hasDifferentWhitespace)this.trigger("whitespaceChanged",this.query)},focus:function focus(){this.$input.focus()},blur:function blur(){this.$input.blur()},getQuery:function getQuery(){return this.query},setQuery:function setQuery(query){this.query=
query},getInputValue:function getInputValue(){return this.$input.val()},setInputValue:function setInputValue(value,silent){this.$input.val(value);!silent&&this._checkInputValue()},getHintValue:function getHintValue(){return this.$hint.val()},setHintValue:function setHintValue(value){this.$hint.val(value)},resetInputValue:function resetInputValue(){this.$input.val(this.query)},clearHint:function clearHint(){this.$hint.val("")},getLanguageDirection:function getLanguageDirection(){return(this.$input.css("direction")||
"ltr").toLowerCase()},hasOverflow:function hasOverflow(){this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var valueLength,selectionStart,range;valueLength=this.$input.val().length;selectionStart=this.$input[0].selectionStart;if(_.isNumber(selectionStart))return selectionStart===valueLength;else if(document.selection){range=document.selection.createRange();range.moveStart("character",-valueLength);return valueLength===
range.text.length}return true},destroy:function destroy(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return Input;function buildOverflowHelper($input){return $("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:$input.css("font-family"),fontSize:$input.css("font-size"),fontStyle:$input.css("font-style"),fontVariant:$input.css("font-variant"),fontWeight:$input.css("font-weight"),wordSpacing:$input.css("word-spacing"),
letterSpacing:$input.css("letter-spacing"),textIndent:$input.css("text-indent"),textRendering:$input.css("text-rendering"),textTransform:$input.css("text-transform")}).insertAfter($input)}function areQueriesEquivalent(a,b){return Input.normalizeQuery(a)===Input.normalizeQuery(b)}function withModifier($e){return $e.altKey||$e.ctrlKey||$e.metaKey||$e.shiftKey}}();var Section=function(){var sectionKey="ttSection",valueKey="ttValue",datumKey="ttDatum";function Section(o){o=o||{};o.templates=o.templates||
{};if(!o.source)$.error("missing source");this.query=null;this.highlight=!!o.highlight;this.name=o.name||_.getUniqueId();this.source=setupSource(o.source);this.valueKey=getValueKeyFromDataset(o.source)||o.valueKey||"value";this.templates=getTemplates(o.templates,this.valueKey);this.$el=$(html.section.replace("%CLASS%",this.name))}Section.extractSectionName=function extractSectionName(el){return $(el).data(sectionKey)};Section.extractValue=function extractDatum(el){return $(el).data(valueKey)};Section.extractDatum=
function extractDatum(el){return $(el).data(datumKey)};_.mixin(Section.prototype,EventEmitter,{_render:function render(query,suggestions){var that=this,hasSuggestions;this.$el.children(".tt-header").remove();hasSuggestions=suggestions&&suggestions.length;if(!hasSuggestions&&this.templates.empty)this.$el.html(getEmptyHtml()).append(that.templates.header?getHeaderHtml():null).prepend(that.templates.footer?getFooterHtml():null);else if(hasSuggestions)this.$el.html(getSuggestionsHtml()).append(that.templates.header?
getHeaderHtml():null).prepend(that.templates.footer?getFooterHtml():null);this.trigger("rendered");function getEmptyHtml(){return that.templates.empty({query:query})}function getSuggestionsHtml(){var $suggestions;$suggestions=$(html.suggestions).css(css.suggestions).append(_.map(suggestions,getSuggestionNode));that.highlight&&highlight({node:$suggestions[0],pattern:query});return $suggestions;function getSuggestionNode(suggestion){var $el,innerHtml,outerHtml;innerHtml=that.templates.suggestion(suggestion);
outerHtml=html.suggestion.replace("%BODY%",innerHtml);$el=$(outerHtml).data(sectionKey,that.name).data(valueKey,suggestion[that.valueKey]).data(datumKey,suggestion);$el.children().each(function(){$(this).css(css.suggestionChild)});return $el}}function getHeaderHtml(){return that.templates.header({query:query,isEmpty:!hasSuggestions})}function getFooterHtml(){return that.templates.footer({query:query,isEmpty:!hasSuggestions})}},getRoot:function getRoot(){return this.$el},update:function update(query){var that=
this;this.query=query;this.source(query,renderIfQueryIsSame);function renderIfQueryIsSame(suggestions){query===that.query&&that._render(query,suggestions)}},clear:function clear(){this._render(this.query||"")},isEmpty:function isEmpty(){return this.$el.is(":empty")},destroy:function destroy(){this.$el=null}});return Section;function setupSource(source){if(window.Dataset&&source instanceof window.Dataset){source.initialize();source=_.bind(source.get,source)}return source}function getValueKeyFromDataset(source){return Dataset&&
source instanceof Dataset?source.valueKey:null}function getTemplates(templates,valueKey){valueKey=valueKey||"value";return{empty:templates.empty&&_.templatify(templates.empty),header:templates.header&&_.templatify(templates.header),footer:templates.footer&&_.templatify(templates.footer),suggestion:templates.suggestion||suggestionTemplate};function suggestionTemplate(context){return"<p>"+context[valueKey]+"</p>"}}}();var Dropdown=function(){function Dropdown(o){var that=this,onMouseEnter,onMouseLeave,
onSuggestionClick,onSuggestionMouseEnter,onSuggestionMouseLeave;o=o||{};if(!o.menu)$.error("menu and/or sections are required");this.isOpen=false;this.isEmpty=true;this.isMouseOverDropdown=false;this.sections=_.map(o.sections,initializeSection);onMouseEnter=_.bind(this._onMouseEnter,this);onMouseLeave=_.bind(this._onMouseLeave,this);onSuggestionClick=_.bind(this._onSuggestionClick,this);onSuggestionMouseEnter=_.bind(this._onSuggestionMouseEnter,this);onSuggestionMouseLeave=_.bind(this._onSuggestionMouseLeave,
this);this.$menu=$(o.menu).on("mouseenter.tt",onMouseEnter).on("mouseleave.tt",onMouseLeave).on("click.tt",".tt-suggestion, .tt-header",onSuggestionClick).on("mouseenter.tt",".tt-suggestion",onSuggestionMouseEnter).on("mouseleave.tt",".tt-suggestion",onSuggestionMouseLeave);_.each(this.sections,function(section){that.$menu.append(section.getRoot());section.onSync("rendered",that._onRendered,that)})}_.mixin(Dropdown.prototype,EventEmitter,{_onMouseEnter:function onMouseEnter($e){this.isMouseOverDropdown=
true},_onMouseLeave:function onMouseLeave($e){this.isMouseOverDropdown=false},_onSuggestionClick:function onSuggestionClick($e){this.trigger("suggestionClicked",$($e.currentTarget))},_onSuggestionMouseEnter:function onSuggestionMouseEnter($e){this._setCursor($($e.currentTarget))},_onSuggestionMouseLeave:function onSuggestionMouseLeave($e){this._removeCursor()},_onRendered:function onRendered(){this.isEmpty=_.every(this.sections,isSectionEmpty);this.isEmpty?this._hide():this.isOpen&&this._show();this.trigger("sectionRendered");
function isSectionEmpty(section){return section.isEmpty()}},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function getSuggestions(){return this.$menu.find(".tt-suggestion")},_getCursor:function getCursor(){return this.$menu.find(".tt-suggestions .tt-cursor").first()},_setCursor:function setCursor($el){$el.first().addClass("tt-cursor");this.trigger("cursorMoved")},_removeCursor:function removeCursor(){this._getCursor().removeClass("tt-cursor")},
_moveCursor:function moveCursor(increment){var $suggestions,$oldCursor,newCursorIndex,$newCursor;if(!this.isOpen)return;$oldCursor=this._getCursor();$suggestions=this._getSuggestions();this._removeCursor();newCursorIndex=$suggestions.index($oldCursor)+increment;newCursorIndex=(newCursorIndex+1)%($suggestions.length+1)-1;if(newCursorIndex===-1){this.trigger("cursorRemoved");return}else if(newCursorIndex<-1)newCursorIndex=$suggestions.length-1;this._setCursor($newCursor=$suggestions.eq(newCursorIndex));
this._ensureVisible($newCursor)},_ensureVisible:function ensureVisible($el){var elTop,elBottom,menuScrollTop,menuHeight;elTop=$el.position().top;elBottom=elTop+$el.outerHeight(true);menuScrollTop=this.$menu.scrollTop();menuHeight=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);if(elTop<0)this.$menu.scrollTop(menuScrollTop+elTop);else if(menuHeight<elBottom)this.$menu.scrollTop(menuScrollTop+(elBottom-menuHeight))},close:function close(){if(this.isOpen){this.isOpen=
this.isMouseOverDropdown=false;this._removeCursor();this._hide();this.trigger("closed")}},open:function open(){if(!this.isOpen){this.isOpen=true;!this.isEmpty&&this._show();this.trigger("opened")}},setLanguageDirection:function setLanguageDirection(dir){this.$menu.css(dir==="ltr"?css.ltr:css.rtl)},moveCursorUp:function moveCursorUp(){this._moveCursor(-1)},moveCursorDown:function moveCursorDown(){this._moveCursor(+1)},getDatumForSuggestion:function getDatumForSuggestion($el){var datum=null;if($el.length)datum=
{raw:Section.extractDatum($el),value:Section.extractValue($el),sectionName:Section.extractSectionName($el)};return datum},getDatumForCursor:function getDatumForCursor(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForHeader:function getDatumForHeader(){return $(".tt-input").val()},getDatumForTopSuggestion:function getDatumForTopSuggestion(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function update(query){_.each(this.sections,updateSection);
function updateSection(section){section.update(query)}},empty:function empty(){_.each(this.sections,clearSection);function clearSection(section){section.clear()}},isVisible:function isVisible(){return this.isOpen&&!this.isEmpty},destroy:function destroy(){this.$menu.off(".tt");this.$menu=null;_.each(this.sections,destroySection);function destroySection(section){section.destroy()}}});return Dropdown;function initializeSection(oSection){return new Section(oSection)}}();var Typeahead=function(){var attrsKey=
"ttAttrs";function Typeahead(o){var $menu,$input,$hint,sections;o=o||{};if(!o.input)$.error("missing input");this.autoselect=o.autoselect;this.minLength=o.minLength||0;this.$node=buildDomStructure(o.input,o.withHint);$menu=this.$node.find(".tt-dropdown-menu");$input=this.$node.find(".tt-input");$hint=this.$node.find(".tt-hint");this.eventBus=new EventBus({el:$input});this.dropdown=(new Dropdown({menu:$menu,sections:o.sections})).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",
this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("sectionRendered",this._onSectionRendered,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this);this.input=(new Input({input:$input,hint:$hint})).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",
this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this)}_.mixin(Typeahead.prototype,{_onSuggestionClicked:function onSuggestionClicked(type,$el){var datum;if(datum=this.dropdown.getDatumForSuggestion($el)){this._select(datum);this.input.focus()}},_onCursorMoved:function onCursorMoved(){var datum=this.dropdown.getDatumForCursor();this.input.clearHint();
this.eventBus.trigger("cursorchanged",datum.raw,datum.sectionName)},_onCursorRemoved:function onCursorRemoved(){this.input.resetInputValue();this._updateHint()},_onSectionRendered:function onSectionRendered(){this._updateHint()},_onOpened:function onOpened(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function onClosed(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function onFocused(){this.dropdown.open()},_onBlurred:function onBlurred(){!this.dropdown.isMouseOverDropdown&&
this.dropdown.close()},_onEnterKeyed:function onEnterKeyed(type,$e){var cursorDatum,topSuggestionDatum;cursorDatum=this.dropdown.getDatumForCursor();topSuggestionDatum=this.dropdown.getDatumForTopSuggestion();var headerDatum=this.dropdown.getDatumForHeader();if(cursorDatum){this._select(cursorDatum);$e.preventDefault()}else if(this.autoselect&&topSuggestionDatum){this._select(topSuggestionDatum);$e.preventDefault()}else{this._select(headerDatum);$e.preventDefault()}},_onTabKeyed:function onTabKeyed(type,
$e){var datum;if(datum=this.dropdown.getDatumForCursor()){this._select(datum);$e.preventDefault()}else this._autocomplete()},_onEscKeyed:function onEscKeyed(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function onUpKeyed(){this.dropdown.open();this.dropdown.moveCursorUp()},_onDownKeyed:function onDownKeyed(){this.dropdown.open();this.dropdown.moveCursorDown()},_onLeftKeyed:function onLeftKeyed(){this.dir==="rtl"&&this._autocomplete()},_onRightKeyed:function onRightKeyed(){this.dir===
"ltr"&&this._autocomplete()},_onQueryChanged:function onQueryChanged(e,query){this.input.clearHint();this.dropdown.empty();query.length>=this.minLength&&this.dropdown.update(query);this.dropdown.open();this._setLanguageDirection()},_onWhitespaceChanged:function onWhitespaceChanged(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function setLanguageDirection(){var dir;if(this.dir!==(dir=this.input.getLanguageDirection())){this.dir=dir;this.$node.css("direction",dir);this.dropdown.setLanguageDirection(dir)}},
_updateHint:function updateHint(){var datum,inputValue,query,escapedQuery,frontMatchRegEx,match;datum=this.dropdown.getDatumForTopSuggestion();if(datum&&this.dropdown.isVisible()&&!this.input.hasOverflow()){inputValue=this.input.getInputValue();query=Input.normalizeQuery(inputValue);escapedQuery=_.escapeRegExChars(query);frontMatchRegEx=new RegExp("^(?:"+escapedQuery+")(.*$)","i");match=frontMatchRegEx.exec(datum.value);this.input.setHintValue(inputValue+(match?match[1]:""))}},_autocomplete:function autocomplete(){var hint,
query,datum;hint=this.input.getHintValue();query=this.input.getQuery();if(hint&&query!==hint&&this.input.isCursorAtEnd()){datum=this.dropdown.getDatumForTopSuggestion();datum&&this.input.setInputValue(datum.value);this.eventBus.trigger("autocompleted",datum.raw,datum.sectionName)}},_select:function select(datum){this.input.clearHint();if(!datum)return;this.input.setQuery(datum.value);if(datum.value)this.input.setInputValue(datum.value,true);this._setLanguageDirection();_.defer(_.bind(this.dropdown.close,
this.dropdown));this.eventBus.trigger("selected",datum.raw,datum.sectionName)},open:function open(){this.dropdown.open()},close:function close(){this.dropdown.close()},getQuery:function getQuery(){return this.input.getQuery()},setQuery:function setQuery(val){this.input.setInputValue(val)},destroy:function destroy(){this.input.destroy();this.dropdown.destroy();destroyDomStructure(this.$node);this.$node=null}});return Typeahead;function buildDomStructure(input,withHint){var $input,$wrapper,$dropdown,
$hint;$input=$(input);$wrapper=$(html.wrapper).css(css.wrapper);$dropdown=$(html.dropdown).css(css.dropdown);$hint=$input.clone().css(css.hint).css(getBackgroundStyles($input));$hint.removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",true).attr({autocomplete:"off",spellcheck:"false"});$input.data(attrsKey,{dir:$input.attr("dir"),autocomplete:$input.attr("autocomplete"),spellcheck:$input.attr("spellcheck"),style:$input.attr("style")});$input.addClass("tt-input").attr({autocomplete:"off",
spellcheck:false}).css(withHint?css.input:css.inputWithNoHint);try{!$input.attr("dir")&&$input.attr("dir","auto")}catch(e){}return $input.wrap($wrapper).parent().prepend(withHint?$hint:null).append($dropdown)}function getBackgroundStyles($el){return{backgroundAttachment:$el.css("background-attachment"),backgroundClip:$el.css("background-clip"),backgroundColor:$el.css("background-color"),backgroundImage:$el.css("background-image"),backgroundOrigin:$el.css("background-origin"),backgroundPosition:$el.css("background-position"),
backgroundRepeat:$el.css("background-repeat"),backgroundSize:$el.css("background-size")}}function destroyDomStructure($node){var $input=$node.find(".tt-input");_.each($input.data(attrsKey),function(val,key){_.isUndefined(val)?$input.removeAttr(key):$input.attr(key,val)});$input.detach().removeData(attrsKey).removeClass("tt-input").insertAfter($node);$node.remove()}}();(function(){var typeaheadKey,methods;typeaheadKey="ttTypeahead";methods={initialize:function initialize(o){o=o||{};return this.each(attach);
function attach(){var $input=$(this),typeahead;typeahead=new Typeahead({input:$input,withHint:_.isUndefined(o.hint)?true:!!o.hint,minLength:o.minLength||0,autoselect:!!o.autoselect,sections:_.isArray(o.sections)?o.sections:[o.sections]});$input.data(typeaheadKey,typeahead)}},open:function open(){return this.each(openTypeahead);function openTypeahead(){var $input=$(this),typeahead;if(typeahead=$input.data(typeaheadKey))typeahead.open()}},close:function close(){return this.each(closeTypeahead);function closeTypeahead(){var $input=
$(this),typeahead;if(typeahead=$input.data(typeaheadKey))typeahead.close()}},val:function val(newVal){return newVal?this.each(setQuery):this.map(getQuery).get();function setQuery(){var $input=$(this),typeahead;if(typeahead=$input.data(typeaheadKey))typeahead.setQuery(newVal)}function getQuery(){var $input=$(this),typeahead,query;if(typeahead=$input.data(typeaheadKey))query=typeahead.getQuery();return query}},destroy:function destroy(){return this.each(unattach);function unattach(){var $input=$(this),
typeahead;if(typeahead=$input.data(typeaheadKey)){typeahead.destroy();$input.removeData(typeaheadKey)}}}};jQuery.fn.typeahead=function(method){if(methods[method])return methods[method].apply(this,[].slice.call(arguments,1));else return methods.initialize.apply(this,arguments)}})()})(window.jQuery);!function($){var Popover=function(element,options){this.init("popover",element,options)};Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content")[this.options.html?"html":"text"](content);$tip.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||
this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options;content=(typeof o.content=="function"?o.content.call($e[0]):o.content)||$e.attr("data-content");return content},tip:function(){if(!this.$tip)this.$tip=$(this.options.template);return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("popover"),options=typeof option==
"object"&&option;if(!data)$this.data("popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})};$.fn.popover.Constructor=Popover;$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(window.jQuery);BL.Ads=function(){var _private={ads_loaded:false,dfp_network:5388645,dfp_property:"ca-pub-6898225050716970",ad_slots:new Object,iterateResize:function(objs){var h=0,w=0,n_h=0,n_w=0;objs.each(function(){if(this.tagName=="SCRIPT")return;n_h=$(this).height();n_w=$(this).width();if(n_w<50||n_h<50)return;if(n_w>w)w=n_w;if(n_h>h)h=n_h});return{h:h,w:w,status:true}}};return{setAdSlots:function(_slots){_private.ad_slots=_slots},loadAds:function(){_private.ads_loaded=true;this.loadGoogleAsync();for(var key in _private.ad_slots){this.addSlot(_private.ad_slots[key]["placement"],
_private.ad_slots[key]["size"],_private.ad_slots[key]["div_id"]);this.startResizing(_private.ad_slots[key]["div_id"],true)}this.enableServices();for(var key in _private.ad_slots){if(_private.ad_slots[key]["autoload"]===false)continue;this.displaySlot(_private.ad_slots[key]["div_id"])}BL.Ads.moveContentBannerInPlace();BL.Ads.loadSingleSlot("sponsored")},loadSingleSlot:function(_slot_name){for(var key in _private.ad_slots)if(_private.ad_slots[key]["div_id"].search("ad_zone_"+_slot_name)!=-1)this.displaySlot(_private.ad_slots[key]["div_id"])},
loadGoogleAsync:function(){var gads=document.createElement("script");gads.async=true;gads.type="text/javascript";var useSSL="https:"==document.location.protocol;gads.src=(useSSL?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var node=document.getElementsByTagName("script")[0];node.parentNode.insertBefore(gads,node)},resize:function(_zone,_interval_id,_keep_resizing){var obj=$("#"+_zone).find("iframe:first"),doc=obj.contents(),html=doc.html();if(html===""){obj.css("height",0).css("width",
0);return}var objs=doc.find("body").find("*");if(objs.length===0){obj.css("height",0).css("width",0);return}var size=_private.iterateResize(objs),h=size.h,w=size.w;if(_zone.search(/panorama/i)>0)_private.panorama_width=w;else if(_zone.search(/content/i)>0)if(h>0||w>0)$("#ad_holder_content_1").addClass("ad-active");else $("#ad_holder_content_1").removeClass("ad-active");else if(_zone.search(/frame-left/i)>0||_zone.search(/frame-right/i)>0)if(_private.panorama_width>850){obj.css("height","0px").css("width",
"0px");return}obj.css("height",h+"px").css("width",w+"px")},startResizing:function(_zone,_keep_resizing){interval_id=setInterval(function(){BL.Ads.resize(_zone,interval_id,_keep_resizing)},1E3)},reloadAllTheTags:function(){if(typeof googletag.pubads!="undefined")googletag.pubads().refresh()},addSlot:function(_placement,_size,_zone){googletag.cmd.push(function(){googletag.defineSlot("/"+_private.dfp_network+"/"+_placement,_size,_zone).addService(googletag.pubads())})},displaySlot:function(_zone){googletag.cmd.push(function(){googletag.display(_zone)})},
moveContentBannerInPlace:function(){if($("#ad_holder_content_1").length===0)return;var banner=$("#content_banner_stash").find("div:first").detach();$("#ad_holder_content_1").html(banner);this.loadSingleSlot("content")},stashContentBanner:function(){if($("#ad_holder_content_1").length===0)return;var banner=$("#ad_holder_content_1").find("div:first").detach();$("#content_banner_stash").html(banner)},enableServices:function(){googletag.cmd.push(function(){googletag.enableServices()})},hideAds:function(){$(".ad_placement").hide()},
showAds:function(){$(".ad_placement").show();if(_private.ads_loaded===false)this.loadAds()},deleteSponsoredAd:function(e){var yes=confirm("Remove this sponsored post redirect?");if(yes){$link=$(e).first();BL.Helper.Ajax({url:"/adredirect/delete_sponsoredpostlink/",data:{placeholder_url:$link.data("placeholder")},parseStuff:false,success:function(ret){$link.closest(".entry").fadeOut();if(ret.message)$link.closest(".error-message").text(ret.message)}})}}}}();BL.Beta=function(){return{DLBeta:function(){$.ajax({type:"POST",url:"/iphone-beta/download?return=JSON",success:function(){window.location="http://blovcdn.com/r/iphone/beta/bloglovin.plist";$(".beta-dl-success").css("display","block")},error:function(){console.log("error")}})}}}();BL.Blogs=function(){$(document).on("mouseover mouseout","a.unfollow",function(e){var $this=$(this);if(e.type=="mouseover")$this.css("width",$this.width()+"px").find("span").html(LANG.unfollow);else $this.find("span").html(LANG.following)});return{Follow:function(settings){BL.Helper.Ajax({url:"/blog/follow?return=JSON",data:{blog_id:settings.blog_id,group_id:settings.group_id},success:settings.success,error:settings.error,complete:settings.complete})},Unfollow:function(settings){BL.Helper.Ajax({url:"/blog/unfollow?return=JSON",
data:{blog_id:settings.blog_id},success:settings.success,error:settings.error,complete:settings.complete})},Public:function(settings){BL.Helper.Ajax({url:"/blog/public?return=JSON",data:{blog_id:settings.blog_id},success:settings.success,error:settings.error,complete:settings.complete})},Private:function(settings){BL.Helper.Ajax({url:"/blog/private?return=JSON",data:{blog_id:settings.blog_id},success:settings.success,error:settings.error,complete:settings.complete})}}}();BL.Endless=function(){var Endless=function(container,next_url,success,error,overrideSpinner){this.container=container;this.next=next_url;this.success=success;this.error=error;this.overrideSpinner=overrideSpinner;this.active=true;this.isMobile=typeof BL.Mobile!="undefined";this.loadMore=false;this.isLoading=false;this.boundload=false;this.bindLoad();if(!this.isMobile)$(document).on("willScrollToBottom",this.boundload);if(this.isMobile)$(document).on("didScrollToBottom",$.proxy(this.showMore,this))};
Endless.prototype.bindLoad=function(){if(this.boundload)$(document).off("willScrollToBottom",this.boundload);this.boundload=$.proxy(this.load,this)};Endless.prototype.destroy=function(){if(this.boundload)$(document).off("willScrollToBottom",this.boundload)};Endless.prototype.load=function(){var self=this;if(!this.active||this.isLoading||this.next===null)return;if(this.loadMore)this.loadMore.detach();if(this.overrideSpinner!==true)$(document).trigger("endlessLoading");this.isLoading=true;var next=
self.next;self.next=null;if(!next)return;BL.Helper.Ajax({url:next,success:function(response){var results=$(response.html);if(response.toolbar.fillolder.active)self.next=response.toolbar.fillolder.url;else self.next=null;var hasCallback=false;if(self.success){var imgcount=results.find("img").length;hasCallback=self.success.length===5;var args=[self,response,results,imgcount];if(hasCallback)args.push(function(){self.isLoading=false;$(document).trigger("endlessFinishedLoading")});self.success.apply(self.success,
args)}else self.container.append(results);if(!hasCallback){self.isLoading=false;$(document).trigger("endlessFinishedLoading")}BL.Main.LoadTrigger()},error:function(err){if(self.error)self.error();self.isLoading=false;$("#temp-loader-div").remove()}})};Endless.prototype.showMore=function(event){if(!this.active)return;if(!this.loadMore){this.loadMore=$('<a href="#" class="load-more btn">Load More</a>');var self=this;this.loadMore.click(function(event){event.preventDefault();self.load();return false})}if(!this.isLoading)this.loadMore.appendTo("#liked_posts")};
return Endless}();BL.Event=function(){$(function(){$("a.event").on({click:function(){BL.Event.TrackEvent(this)},mousedown:function(){if(e.which==2||e.which==3)BL.Event.TrackEvent(this)}})});return{TrackEvent:function(event){var $this=$(event),eventfunction=$this.attr("data-function"),content=$this.attr("data-content");BL.Event[eventfunction](content)},ClickExtension:function(extension){BL.Helper.Ajax({url:"/event/extension",data:{extension:extension}})},ClickDevice:function(device){BL.Helper.Ajax({url:"/event/device",
data:{device:device}})},ClickScrollToTop:function(){BL.Helper.Ajax({url:"/event/scrolltotop"})}}}();BL.Facebook=function(){var _private={app_id:null,access_token:null,user_id:null,avatar:null,connected:false,do_login:"no",in_app:"no",redirect_uri:null,Load:function(url,params){var $con=$("#content");$con.empty().css("height","200px").activity();var data={url:url,parseStuff:false,success:function(ret){$con.html(ret.html)},complete:function(){$con.css("height","").data("spinner").stop()},error:function(){$con.html('<div class="alert">FAIL</div>')}};if(params!==null)data.data=params;BL.Helper.Ajax(data)},
PushLogin:function(uid,access_token,callback){_private.user_id=uid;_private.access_token=access_token;_private.connected=true;var data={url:"/facebook/connect",parseStuff:false,data:{access_token:access_token},success:function(ret){if(ret.err_flags)if(ret.err_flags.indexOf("fb_account_already_in_use")>-1)alert("This Facebook account is already tied to another "+"Bloglovin' account. Please log into that Bloglovin' "+"account and disconnect it from Facebook by visiting "+"the settings page. ("+ret.fb_id+
")")},complete:function(){if(callback)callback()},error:function(){console.log("something went wrong")}};BL.Helper.Ajax(data)},Login:function(callback){FB.getLoginStatus(function(response){if(response.status==="connected"){_private.user_id=response.authResponse.userID;_private.access_token=response.authResponse.accessToken;BL.Facebook.CheckLogin(callback)}else if(_private.in_app=="yes")_private.InAppLogin();else _private.WebLogin(callback)})},InAppLogin:function(){var redirect_uri=encodeURI(_private.redirect_uri);
var uri="https://m.facebook.com/dialog/oauth?";uri+="client_id="+_private.app_id;uri+="&display=touch";uri+="&scope=email";uri+="&redirect_uri="+redirect_uri;uri=encodeURI(uri);window.location=uri},WebLogin:function(callback){FB.login(function(response){if(response.authResponse)BL.Facebook.CheckLogin(callback);else{$('a[data-func="GetFromFB"]:last').css("visibility","visible").parents("div:first").css("height","").data("spinner").stop();$(".form-fancy").css("display","block");alert("You canceled your connection to Facebook! Try again or use your email instead.")}},
{scope:"email, user_friends"})},FBModalForPublishPermissions:function(cb){FB.login(function(response){if(response.authResponse)FB.api("me/permissions",function(res){if(!res||!res.data){cb(null);return}for(var i in res.data)if(res.data[i].permission==="publish_actions"&&res.data[i].status==="granted"){cb(response);return}cb(null)});else cb(null)},{scope:"publish_actions"})}};return{SetInitData:function(data){_private.app_id=data.fb_app_id;_private.do_login=data.fb_do_login;_private.in_app=data.fb_in_app;
_private.redirect_uri=data.fb_auth_uri;this.Init()},Init:function(){window.top.fbAsyncInit=function(){FB.init({appId:_private.app_id,version:"v2.0",cookie:true,status:true,xfbml:true,frictionlessRequests:true});BL.Facebook.LoginUser();$(document).trigger("Facebook:initialized")};(function(d){var js,id="facebook-jssdk";if(d.getElementById(id))return;js=d.createElement("script");js.id=id;js.async=true;js.src="//connect.facebook.net/en_US/sdk.js";d.getElementsByTagName("head")[0].appendChild(js)})(document)},
LoginUser:function(){FB.Event.subscribe("auth.statusChange",function(response){if(response.status=="connected"){_private.user_id=response.authResponse.userID;_private.access_token=response.authResponse.accessToken}});if(_private.do_login=="yes")BL.Login.GetFromFB(null)},GetCurAccesstoken:function(cb){FB.getLoginStatus(function(response){if(response.status==="connected")cb(response.authResponse.accessToken);else FB.login(function(response){if(response.authResponse)cb(response.authResponse.accessToken);
else cb(null)},{scope:"email, user_friends"})})},GetCurUserId:function(){return _private.user_id},Connect:function(callback){if(_private.connected===true){BL.Facebook.CheckLogin(callback);return}_private.Login(callback)},CheckLogin:function(callback){FB.getLoginStatus(function(response){if(response.status==="connected"){var uid=response.authResponse.userID,access_token=response.authResponse.accessToken;_private.PushLogin(uid,access_token,callback)}})},GetThumb:function(callback){FB.api("/me/picture",
function(me){_private.avatar=me;callback(me)})},GetUserInfo:function(callback){FB.api("/me",function(me){if(!me.name){console.log("Graph API fail: no name");return}callback(me)})},SendToFriends:function(e){if(typeof $(e).attr("data-uri")=="undefined")return;var obj={method:"send",link:$(e).attr("data-uri")};FB.ui(obj,function(response){console.log(response)})},UpdateButton:function(post){var $fb=$('[data-func="FbPost"]'),media=post.media;if(media==1)media=null;$fb.attr("data-pic",media).attr("data-desc",
post.desc).attr("data-caption",post.link).attr("data-name",post.title).attr("data-href",post.post_link)},FbPost:function(e){var $this=$(e),href=$this.attr("data-href");var url=["https://www.facebook.com/sharer.php"];url.push("?app_id="+_private.app_id);url.push("&sdk=joey");url.push("&u="+encodeURIComponent(href));url.push("&display=popup");var width=550;var height=300;var left=screen.width/2-width/2;var top=screen.height/2-height/2;var popupAttrs="height="+height+",width="+width+",left="+left+",top="+
top;popupAttrs+=",toolbar=0,location=0,menubar=0,scrollbars=0,status=0,resizable=no";window.open(url.join(""),"",popupAttrs);var frame_type=$this.data("frame-type");if(frame_type){var data={event:"frame_actions",action:"share",share_type:"facebook",frame_type:frame_type};BL.Tonne.GetClient().track(null,data)}},PublishLast:function(e){var $this=$(e),blog_id=$this.attr("data-blog-id");$this.siblings(".message").text("");$this.siblings(".spinner").activity();var displayMessage=function(ret){var message=
"";if(typeof ret!=="undefined"&&typeof ret.message!=="undefined")message=ret.message;else message=e.responseText;$this.siblings(".message").text(message)};var data={url:"/facebook/publish",parseStuff:false,data:{blog_id:blog_id},success:function(ret){displayMessage(ret)},complete:function(){$this.siblings(".spinner").data("spinner").stop()},error:function(e,error,n,ret){displayMessage(ret)}};BL.Helper.Ajax(data)},DisconnectBlog:function(e){var $this=$(e),blog_id=$this.attr("data-blog-id"),page_id=
$this.attr("data-page-id");_private.Load("/facebook/disconnect",{blog_id:blog_id,page_id:page_id})},Get:function(e){var $this=$(e),href=$this.attr("href");_private.Load(href,null)},AskForPublishPermissions:function(success,denied){FB.getLoginStatus(function(response){if(response.status==="connected")FB.api("me/permissions",function(res){if(!res||!res.data){denied();return}for(var i in res.data)if(res.data[i].permission==="publish_actions"&&res.data[i].status==="granted"){success();return}_private.FBModalForPublishPermissions(function(response){if(response)success();
else denied()})});else _private.FBModalForPublishPermissions(function(response){if(response)success();else denied()})})}}}();BL.Flag=function(){return{Flag:function(_e){var element=$(_e);var flag_type=element.data("flag-type");var blog_id=element.data("blog-id");var blog_name=element.data("blog-name");var post_id=element.data("post-id");var type_text=null;switch(flag_type){case 1:type_text="Nudity or Pornography";break;case 2:type_text="Spam";break;case 3:type_text="Promoting Self Harm";break;case 4:type_text="Attacking a group or individuals";break;case 5:type_text="Other";break}var flagModal=$("#flagConfirmModal");flagModal.find("h3").append("Report "+
blog_name+"?");if(flag_type!=5)flagModal.find(".modal-textholder").append("Are you sure you want to report "+blog_name+" for <b>"+type_text+"</b>?");else flagModal.find(".modal-textholder").append('Thank you for making Bloglovin better by flagging inappropriate content. To help us understand this violation, please reach out to us at <a href="http://help.bloglovin.com" alt="Help at Bloglovin" target="_blank">our feedback center</a>. Thanks!');flagModal.modal({backdrop:true}).show();$(".flag-confirmation").off("click").on("click",
function(){flagModal.find($(".alert")).css("display","none");if(flag_type==5){window.location.href="http://help.bloglovin.com";return}$("#spinner").css("height","100px").activity();if(post_id===undefined)BL.Flag.FlagBlog(flag_type,blog_id,function(ret){flagModal.find($(".alert-success")).css("display","block");setTimeout(function(){flagModal.modal("hide")},1E3)},function(xhr,textStatus){console.error("Flag failure on blog!");console.error(xhr);console.error(textStatus);flagModal.find($(".alert-error")).css("display",
"block")},function(){$("#spinner").css("height","").data("spinner").stop()});else BL.Flag.FlagPost(flag_type,blog_id,post_id,function(ret){flagModal.find($(".alert-success")).css("display","block");setTimeout(function(){$("#flagConfirmModal").modal("hide")},1E3)},function(xhr,textStatus){console.error("Flag failure on post!");console.error(xhr);console.error(textStatus);flagModal.find($(".alert-error")).css("display","block")},function(){$("#spinner").css("height","").data("spinner").stop()})});flagModal.on("hidden",
function(){flagModal.find($(".alert")).css("display","none");flagModal.find("h3").empty();flagModal.find(".modal-textholder").empty()})},FlagBlog:function(flag_type,blog_id,callback_success,callback_error,callback_complete){BL.Helper.Ajax({url:"/flag/blog",data:{flag_type:flag_type,blog_id:blog_id},success:callback_success,error:callback_error,complete:callback_complete})},FlagPost:function(flag_type,blog_id,post_id,callback_success,callback_error,callback_complete){BL.Helper.Ajax({url:"/flag/post",
data:{flag_type:flag_type,blog_id:blog_id,post_id:post_id},success:callback_success,error:callback_error,complete:callback_complete})},HideFromPopular:function(e){var confirmed=confirm("Are you sure you would like to hide this post?");if(!confirmed)return;var post_id=$(e).data("post-id");var blog_id=$(e).data("blog-id");if(typeof post_id!="undefined"&&typeof blog_id!="undefined")BL.Helper.Ajax({url:"/flag/hideFromPopular",data:{post_id:post_id,blog_id:blog_id},success:function(){$(".post[data-post-id="+
post_id+"][data-blog-id="+blog_id+"]").remove()}})}}}();window.BL.Friends=function(){return{FBFriendList:function(){$.ajax({type:"POST",url:"/friends?return=JSON",success:function(ret){$("#people-list").append(ret.html);$("#spinner").css("height","").data("spinner").stop()},dataType:"JSON"});$(".invite").attr("style","display: block;");$('a[data-func="Connect"]').remove();$(".connect-button-container").remove()},FindFriends:function(){$("#spinner").css("height","200px").activity();var complete=function(response){$("#spinner").css("height","").data("spinner").stop();
if(response)window.BL.Friends.FBFriendList()};window.FB.login(function(response){if(response.authResponse)window.FB.api("me/permissions",function(res){if(!res||!res.data){complete(null);return}for(var i in res.data)if(res.data[i].permission==="user_friends"&&res.data[i].status==="granted"){complete(response);return}complete(null)});else complete(null)},{scope:"user_friends",auth_type:"rerequest"})},CallConnect:function(){$("#spinner").css("height","200px").activity();window.BL.Facebook.GetCurAccesstoken(function(accessToken){if(accessToken)window.BL.Facebook.Connect(function(){var data=
{url:"/facebook/edit",parseStuff:false,data:{access_token:accessToken,use_for_login:1},success:function(){window.BL.Friends.FBFriendList()},complete:function(){$("#spinner").css("height","").data("spinner").stop()},error:function(){}};window.BL.Helper.Ajax(data)});else $("#spinner").css("height","").data("spinner").stop()})},UnreadFriendsFeed:function(newCount){var html='<span class="notify-badge"></span>';var currentCount=parseInt($(".notify-badge").text());var ffeedUrl=location.pathname==="/user/timeline/users";
if(isNaN(currentCount))currentCount=0;if(ffeedUrl)newCount=0;if(currentCount===newCount)return;else if(!newCount)$(".notify-badge").remove();else if(!currentCount){var badge=$(html).text(newCount);$(".sidebar-friends a").append(badge)}else $(".notify-badge").text(newCount)}}}();BL.Grid=function(){var _private={post_number:0,checkimages:null,contentBannerSet:false};$(function(){var $container=$("#content");if($container.hasClass("popular")){BL.Grid.Load($container);$(".toggleFullWidth").on("click",function(e){e.preventDefault();$(this).parent().toggleClass("full");$("#overlay").toggleClass("visible")})}$(document).on("endlessLoading",showActivity);$(document).on("endlessFinishedLoading",hideActivity)});function loadPost(post){_private.post_number++;col=shortestColumn();post.appendTo(col);
if(!_private.contentBannerSet&&col.hasClass("col-1")&&col.children().length>1){var holder=$(".content-banner-popular");holder.children().insertAfter(col.children(":nth-child(2)"));holder.remove();contentBannerSet=true}if(_private.post_number==4){var extra=$("#ad_holder_content_1:not(.ad_placement)").detach();extra.appendTo(shortestColumn())}post.removeClass("hidden-post")}function shortestColumn(){var columns=$(".post-column");var col=columns.first();columns.each(function(){if(col.height()>=$(this).height())col=
$(this)});return col}function showActivity(){if($("#content").find("> .loader").length){$("#content").find("> .loader").activity();return}var div=$('<div class="loader" />');div.appendTo("#content").activity()}function hideActivity(){$("#content > .loader").remove()}function checkImage($container,done){var $hidden_container=$container.children("div.col-hidden"),$loading_images=$hidden_container.find("img.post-media");$loading_images.each(function(){isImageLoaded(this,false)});$hidden_container.find("img.post-media:not(.pload)").addClass("pload").load(function(){isImageLoaded(this,
true)});var unloaded_images=$hidden_container.find("img.post-media").length;if(unloaded_images<10&&typeof done==="function")done();if(unloaded_images===0){window.clearInterval(_private.checkimages);_private.checkimages=null}}function isImageLoaded(self,remove){if($(self).height()>1)loadPost($(self).parents("div.hidden-post:first"));else if(self.naturalHeight>1)loadPost($(self).parents("div.hidden-post:first"));else if(self.naturalHeight==1)$(self).parents("div.hidden-post:first").remove();else if(remove)$(self).parents("div.hidden-post:first").remove()}
return{Reload:function(_this,res,results,imgcount,done){var $container=$("#content"),$hidden_container=$container.children("div.col-hidden");$(res.html).find("div.hidden-post").appendTo($hidden_container);BL.Grid.Load($container,done)},Load:function($container,done){if($container.children("div.post-column:first").children().length===0)_private.post_number=0;checkImage($container,done);if(_private.checkimages===null)_private.checkimages=self.setInterval(function(){checkImage($container,done)},500)}}}();BL.HandleClick=function(){var _private={GetToolbarSortByURL:function(){var content_data=BL.Toolbar.getContentData();var url=content_data.type;if(content_data.id>0)url+="/"+content_data.id;else url+="/0";return url},commonBarLoad:function(_e,load_func){var $this=$(_e),url=$this.attr("href"),elem_blog=$this.parent(),blog_id=elem_blog.attr("data-blog-id"),group_list=$(".main-btn-toolbar .btn-group[data-toolbar-type=128]:first");if(!(url==="/popular"||url==="/blogs")){if(url==="/user/timeline/users")$(".notify-badge").remove();
BL.Friends.UnreadFriendsFeed()}$(".main-btn-toolbar .btn-group").removeClass("open").find("input").val("");if(typeof blog_id!=="undefined")BL.Toolbar.AutoChangeGroupTitle(group_list,blog_id);if(url=="/popular"||url=="/blogs"){var c_data=BL.Toolbar.getContentData();url+="/1/"+c_data.category+"/"+c_data.country}if(url.indexOf("toplist")!==-1)BL.HandleClick.Activate('a[data-func="ToolbarToplistTop"]');else BL.HandleClick.Activate('a[data-func="ToolbarToplistRecommended"]');var index="sidebar_"+url;BL.Storage[index]=
{"elem":$(_e)};var state=History.getState();var state_url=state.url.replace(window.location.protocol+"//"+window.location.host,"");if(state_url==url)BL.History[load_func](state,BL.Storage[index]);else History.pushState({func:load_func,data:index,url:url},BL.Main.GenerateTitle(),url);if(load_func!=="LoadFromTopBar")BL.HandleClick.ToggleGroup(_e)},likedText:function(liked_bool,total_likes){var text="";if(liked_bool===true){var other_likes=total_likes-1;if(other_likes>1)text="You and "+other_likes+" people like this";
else if(other_likes==1)text="You and 1 person like this";else text="You like this"}else if(total_likes>1)text=total_likes+" people like this";else text=total_likes+" person likes this";return text}};$(function(){$(document).on("click",".handleclick",function(e){e.preventDefault();if($(this).attr("disabled"))return;var func=$(this).attr("data-func");var module=$(this).attr("data-module");if(typeof func=="undefined"||func==="")return false;if(typeof module=="undefined"||!module)module="HandleClick";
BL[module][func](this)}).on("submit",".handlesubmit",function(e){var submit=$(this).attr("data-submit");if(typeof submit=="undefined"||func==="")submit=0;if(submit===0){e.preventDefault();e.stopPropagation();if($(this).attr("disabled"))return}var func=$(this).attr("data-func");var module=$(this).attr("data-module");if(typeof func=="undefined"||func==="")return false;if(typeof module=="undefined"||!module)module="HandleClick";BL[module][func](this,e)});$(".divider").on("click",function(event){event.stopPropagation();
event.preventDefault()})});return{ShowMoreClusterPosts:function(_e){var url=$(_e).attr("href");$(_e).attr("disabled",true);BL.Helper.Ajax({url:url,parseStuff:false,success:function(ret){$(_e).parents(".blog-actions:first").before(ret.html);if(BL.Helper.ModifyNumber($(_e).find("[rel=num_more_posts]"),-ret.num_posts)<=0||!ret.has_next)$(_e).hide();else $(_e).attr("href",ret.next_url)},complete:function(){$(_e).removeAttr("disabled")}})},OnboardFollow:function(_e){var blogs=$(_e).attr("data-blogs").split(" ");
var catid=$(_e).attr("data-catid");blogs=blogs.length>1?blogs:blogs[0]===""?null:blogs;console.log(blogs);$(_e).attr("data-func","OnboardUnfollow");BL.Onboarding.Follow({blogs:blogs,catid:catid,success:function(ret){},error:function(){console.log("err");$(_e).removeClass("selected");$(_e).attr("data-func","OnboardFollow")},complete:function(){}})},OnboardUnfollow:function(_e){var blogs=$(_e).attr("data-blogs").split(" ");blogs=blogs.length>1?blogs:blogs[0]===""?null:blogs;console.log(blogs);$(_e).attr("data-func",
"OnboardFollow");BL.Onboarding.Unfollow({blogs:blogs,success:function(ret){},error:function(){console.log("error");$(_e).removeClass("selected");$(_e).attr("data-func","OnboardUnfollow")},complete:function(){}})},UserFollow:function(_e){var user_id=$(_e).attr("data-user-id");var elem_buttons=$("a[data-func=UserFollow][data-user-id="+user_id+"]");var friend_type=$(_e).closest(".opt").attr("data-friend-type");elem_buttons.attr("data-func","UserUnfollow").removeClass("follow").addClass("unfollow").find("span").html(LANG.following);
var data={user_id:user_id,friend_type:friend_type,success:function(res){$(".user-profile-blogs").find("a.follow").removeClass("follow").addClass("unfollow").data("func","Unfollow").text(LANG.following)},error:function(err){elem_buttons.attr("data-func","UserFollow").removeClass("unfollow").addClass("follow").find("span").html(LANG.follow)},complete:function(){}};BL.Helper.Ajax({url:"/user/follow?return=JSON",data:{user_id:data.user_id,page_type:"find_friends",friend_type:data.friend_type,identifier:BL.Tonne.GetClient().identifier},
success:data.success,error:data.error,complete:data.complete})},UserUnfollow:function(_e){var user_id=$(_e).attr("data-user-id");var elem_buttons=$("a[data-func=UserUnfollow][data-user-id="+user_id+"]");var friend_type=$(_e).closest(".opt").attr("data-friend-type");elem_buttons.attr("data-func","UserFollow").removeClass("unfollow").addClass("follow").find("span").html(LANG.follow);var data={user_id:user_id,success:function(res){},error:function(err){console.log("Error: ",err.responseText);elem_buttons.removeClass("follow").addClass("unfollow").attr("data-func",
"UserUnfollow").find("span").html(LANG.following)},complete:function(){}};BL.Helper.Ajax({url:"/user/unfollow?return=JSON",data:{user_id:data.user_id,page_type:"find_friends",friend_type:friend_type,identifier:BL.Tonne.GetClient().identifier},success:data.success,error:data.error,complete:data.complete})},Follow:function(_e){var blog_id=$(_e).attr("data-blog-id");var add_blog=$(_e).attr("data-add-blog");var elem_buttons=$("a[data-func=Follow][data-blog-id="+blog_id+"]");var frame_type=$(_e).data("frame-type");
if(frame_type){var data={event:"frame_actions",action:"follow_blog",frame_type:frame_type};BL.Tonne.GetClient().track(null,data)}$(_e).attr("data-func","Unfollow").removeClass("follow").addClass("unfollow").find("span").html(LANG.following);$('.post[data-blog-id="'+blog_id+'"]').one("mouseleave",function(){elem_buttons.attr("data-func","Unfollow").removeClass("follow").addClass("unfollow").find("span").html(LANG.following)});BL.Blogs.Follow({blog_id:blog_id,success:function(ret){BL.Helper.ModifyNumUnread(parseInt(ret.num_new_posts,
10));if(typeof add_blog=="undefined"||add_blog=="yes"){var blog_name=BL.Helper.GetBlogName(blog_id);BL.Sidebar.AddBlog(blog_id,blog_name,ret.num_new_posts)}BL.Toolbar.CloseMenu(128);if(BL.Helper.Length($('.btn-group[data-blog-id="'+blog_id+'"]'))==0&&add_blog=="yes"){console.log("Group created");var group_menu=BL.Toolbar.CreateGroupMenu(blog_id);group_menu.appendTo(elem_buttons.parent())}$(_e).parent().addClass("active")},error:function(e,error,n,ret){elem_buttons.removeClass("unfollow").addClass("follow").attr("data-func",
"Follow").find("span").html(LANG.follow);alert(ret.message)},complete:function(){elem_buttons.removeAttr("disabled")}})},Unfollow:function(_e){var blog_id=$(_e).data("blog-id");var elem_buttons=$("a[data-func=Unfollow][data-blog-id="+blog_id+"]");$(_e).attr("data-func","Follow").removeClass("unfollow").addClass("follow").css("width","auto").find("span").html(LANG.follow);$('.post[data-blog-id="'+blog_id+'"]').one("mouseleave",function(){elem_buttons.attr("data-func","Follow").removeClass("unfollow").addClass("follow").css("width",
"auto").find("span").html(LANG.follow)});elem_buttons.parent().find(".btn-group").detach();BL.Blogs.Unfollow({blog_id:blog_id,success:function(ret){BL.Sidebar.RemoveBlog(blog_id);BL.Helper.ModifyNumUnread(-parseInt(ret.num_deleted_posts,10));$(_e).parent().removeClass("active")},error:function(err){console.log("Error: ",err.responseText);elem_buttons.attr("data-func","Unfollow").find("span").html(LANG.unfollow)},complete:function(){elem_buttons.removeAttr("disabled")}})},ToolbarMove:function(_e){BL.Toolbar.Move(_e)},
ToolbarUnfollow:function(_e){BL.Toolbar.Unfollow(_e)},ToolbarUndoUnfollow:function(_e){this.Follow(_e);$(".content-main .alert[rel=blog_unfollow]").hide()},ToolbarMarkAsRead:function(_e){var mark=function(){$(_e).attr("disabled",true);BL.Toolbar.MarkAsRead()};if(BL.Toolbar.CheckUnread(_e)>10){var unread=BL.Toolbar.CheckUnread(_e);var data=BL.Toolbar.getContentData();var header=null;if(data.type==="all")header="all";if(data.type==="blog")header=BL.Helper.GetBlogName(data.id);if(data.type==="group")header=
BL.Helper.GetGroupName(data.id);$("#markGroupAsRead").find(".modal-textholder").append(unread+" posts will be marked as read");$("#markGroupAsRead").find("h3").append("Mark "+header+" as read");$("#markGroupAsRead").modal().on("show",function(){$(this).find(".modal-result").removeClass("modal-result")}).on("click",".btn",function(){$(this).addClass("modal-result");$("#markGroupAsRead").modal("hide")}).on("hidden",function(){$("#markGroupAsRead").find(".modal-textholder").empty();$("#markGroupAsRead").find("h3").empty();
if($(this).find(".modal-result").hasClass("btn-primary"))mark()})}else mark()},ToolbarToplistTop:function(_e){var data=BL.Toolbar.getContentData();var url="/"+BL_LANG+"/blogs/toplist/1/"+data.category+"/"+data.country;this.Activate(_e);History.pushState({func:"LoadFromToplist"},BL.Main.GenerateTitle(),url)},ToolbarToplistHot:function(_e){var data=BL.Toolbar.getContentData();var url="/"+BL_LANG+"/blogs/hotnow/1/"+data.category+"/"+data.country;this.Activate(_e);History.pushState({func:"LoadFromToplist"},
BL.Main.GenerateTitle(),url)},ToolbarToplistRecommended:function(_e){var data=BL.Toolbar.getContentData();var url="/"+BL_LANG+"/blogs/recommendations/";this.Activate(_e);var country=$(".dropdown-menu [data-country-code]")[0].textContent;History.pushState({func:"LoadFromToplist"},"Blog recommendations in "+country,url)},ToolbarSortByBlog:function(_e){var url="/feed/sortbyblog/"+_private.GetToolbarSortByURL();$('[data-toolbar-type="8"]').find(".sort").removeClass("active");$(_e).addClass("active");
BL.History.Load(url)},ToolbarSortByDateNewest:function(_e){var url="/feed/sortbydate/"+_private.GetToolbarSortByURL()+"/newest";$(".dropdown-menu").find(".sort").removeClass("active");$(_e).addClass("active");$('[data-toolbar-type="2048"]').find(".sort").removeClass("active").filter('[data-func="ToolbarSortByNewest"]').addClass("active");BL.History.Load(url)},ToolbarSortByDateOldest:function(_e){var url="/feed/sortbydate/"+_private.GetToolbarSortByURL()+"/oldest";$(".dropdown-menu").find(".sort").removeClass("active");
$(_e).addClass("active");$('[data-toolbar-type="2048"]').find(".sort").removeClass("active").filter('[data-func="ToolbarSortByOldest"]').addClass("active");BL.History.Load(url)},ToolbarSortByNewest:function(_e){var url="/feed/setsortorder/"+_private.GetToolbarSortByURL()+"/newest";$('[data-toolbar-type="2048"]').find(".sort").removeClass("active");$(_e).addClass("active");if(!$('[data-func="ToolbarSortByBlog"]').hasClass("active"))$('[data-toolbar-type="8"]').find(".sort").removeClass("active").filter('[data-func="ToolbarSortByDateNewest"]').addClass("active");
BL.History.Load(url)},ToolbarSortByOldest:function(_e){var url="/feed/setsortorder/"+_private.GetToolbarSortByURL()+"/oldest";$('[data-toolbar-type="2048"]').find(".sort").removeClass("active");$(_e).addClass("active");if(!$('[data-func="ToolbarSortByBlog"]').hasClass("active"))$('[data-toolbar-type="8"]').find(".sort").removeClass("active").filter('[data-func="ToolbarSortByDateOldest"]').addClass("active");BL.History.Load(url)},Activate:function(_e){$(_e).parents('div[data-activate-enabled="1"]:first').find("a").removeClass("active").end().end().addClass("active")},
BlogMarkAsRead:function(_e){var blog_id=$(_e).parents(".blog:first").attr("data-blog-id");$(_e).attr("disabled",true);BL.Helper.Ajax({url:"/feed/markblogasread",data:{blog_id:blog_id},success:function(ret){$("#content .blog[data-blog-id="+blog_id+"]").find("[data-func=ShowMoreClusterPosts]").hide().end().find(".post").addClass("post-read").find("[data-func=PostMarkAsRead]").attr("data-func","PostMarkAsUnread").find("span").html(LANG.markunread);BL.Sidebar.MarkBlogAsRead(blog_id)},error:function(){$(_e).removeAttr("disabled")}})},
PostMarkAsRead:function(_e){var $post=$(_e).parents(".post:first"),$but=$post.find('a[data-func="PostMarkAsRead"]'),post_id=$post.data("post-id"),blog_id=$post.data("blog-id");$but.find("span").html(LANG.markunread);$post.addClass("post-read");BL.Post.MarkAsRead(post_id,blog_id,function(ret){$but.attr("data-func","PostMarkAsUnread");var num_unread=BL.Sidebar.MarkBlogAsRead(blog_id,ret.num_marked);if(num_unread<=0)$("#content .blog[data-blog-id="+blog_id+"] [data-func=BlogMarkAsRead]").attr("disabled",
true)},function(xhr,textStatus){$but.find("span").html(LANG.markread);$post.removeClass("post-read");console.error("ERROR HAPPUNED!!")})},PostMarkAsUnread:function(_e){var elem_post=$(_e).parents(".post:first");var post_id=elem_post.data("post-id");var blog_id=elem_post.data("blog-id");$(_e).find("span").html(LANG.markread);elem_post.removeClass("post-read");BL.Post.MarkAsUnread(post_id,blog_id,function(ret){$(_e).attr("data-func","PostMarkAsRead");BL.Sidebar.MarkBlogAsUnread(blog_id,ret.num_marked);
$("#content .blog[data-blog-id="+blog_id+"] [data-func=BlogMarkAsRead]").removeAttr("disabled");$('.btn[data-func="ToolbarMarkAsRead"]').attr("disabled",false)},function(xhr,textStatus){$(_e).find("span").html(LANG.markunread);elem_post.addClass("post-read");console.error("ERROR HAPPUNED!!")})},PostLike:function(_e){if($(_e).attr("href")!=="#"){window.location=$(_e).attr("href");return true}var elem_post=$(_e).parents(".post:first");var post_id=elem_post.data("post-id");var blog_id=elem_post.data("blog-id");
$(_e).find("span").html(LANG.unlike);BL.Post.Like(post_id,blog_id,function(ret){$(_e).attr("data-func","PostUnlike").parents("div.post:first").find(".you-like-this").show().end().find("i.icon-heart").addClass("active");var likes_span=$(_e).parent(".modal-actions").find(".total-count");if(typeof likes_span!=="undefined")likes_span=$(_e).parent(".postpage-actions").find(".total-count");if(typeof likes_span!=="undefined"){var likes=likes_span.data("likes");likes_span.text(_private.likedText(true,likes+
1)).data("likes",likes+1)}},function(xhr,textStatus){$(_e).find("span").html(LANG.like);console.error("ERROR HAPPUNED!!")})},PostUnlike:function(_e){var elem_post=$(_e).parents(".post:first");var post_id=elem_post.data("post-id");var blog_id=elem_post.data("blog-id");$(_e).find("span").html(LANG.like);BL.Post.Unlike(post_id,blog_id,function(ret){$(_e).attr("data-func","PostLike").parents("div.post:first").find(".you-like-this").hide().end().find("i.icon-heart").removeClass("active");var likes_span=
$(_e).parent(".modal-actions").find(".total-count");if(typeof likes_span!=="undefined")likes_span=$(_e).parent(".postpage-actions").find(".total-count");if(typeof likes_span!=="undefined"){var likes=likes_span.data("likes");likes_span.text(_private.likedText(false,likes-1)).data("likes",likes-1)}},function(){$(_e).find("span").html(LANG.unlike);console.error("ERROR HAPPUNED!!")})},LoadFromTopBar:function(_e){_private.commonBarLoad(_e,"LoadFromTopBar")},LoadFromSidebar:function(_e){_private.commonBarLoad(_e,
"LoadFromSidebar")},SidebarToggleReadHide:function(){return $(".show-read > a").data("active")},SidebarToggleReadBlogs:function(_e){var active=$(_e).data("active");var group=$(".sidebar-nav").find(".group.active");var children=group.find("li.blog.unread");if(!active){if(group.length>0&&children.length<1){$(".sidebar-nav").find(".group.active i").removeClass().addClass("icon-caret-down");$(_e).text(LANG.hideread);$(".sidebar-nav").find(".read:not(.group)").css("display","block");$(_e).data("active",
true)}}else if(group.length>0&&children.length<1){$(".sidebar-nav").find(".group.active i").removeClass().addClass("icon-caret-right");$(_e).text(LANG.showread);$(".sidebar-nav").find(".read:not(.group)").css("display","none");$(_e).data("active",false)}},SidebarFollowToggle:function(_e){var link=$(_e);var blog_id=link.data("blog-id");var blog_name=BL.Helper.Shorten(link.data("blog-name"),19);var add_blog=link.data("add-blog");link.prop("disabled",true);if(typeof add_blog=="undefined"||add_blog==
"yes")BL.Blogs.Follow({blog_id:blog_id,success:function(ret){BL.Helper.ModifyNumUnread(parseInt(ret.num_new_posts,10));BL.Sidebar.AddBlog(blog_id,blog_name,ret.num_new_posts);link.data("add-blog","no");link.addClass("followed")},error:function(){console.log("Unable to follow blog!")},complete:function(){link.prop("disabled",false);link.html(LANG.unfollow)}});else BL.Blogs.Unfollow({blog_id:blog_id,success:function(ret){BL.Sidebar.RemoveBlog(blog_id);BL.Helper.ModifyNumUnread(-parseInt(ret.num_deleted_posts,
10));link.data("add-blog","yes");link.removeClass("followed")},error:function(){console.log("Unable to unfollow blog!")},complete:function(){link.prop("disabled",false);link.html(LANG.follow)}})},ToggleGroup:function(_e){var group_elem=$(_e);var in_group=group_elem.parents("li").hasClass("group");var group_open=group_elem.find("i").hasClass("icon-caret-down");if(!in_group)$(_e).parents(".unread.nav").find(".group i").removeClass().addClass("icon-caret-right");BL.HandleClick.ToggleGroupElement(group_elem,
group_open)},ToggleGroupElement:function(group_elem,group_open){if(group_elem.parent("li").hasClass("group")){group_elem.parents("ul:first").find("li.group > a > i").removeClass().addClass("icon-caret-right");if(group_open){group_elem.parent().removeClass("active");group_elem.next("span.blogs_toggle").slideUp("fast");group_elem.find("i").removeClass().addClass("icon-caret-right")}else{group_elem.parent().addClass("active");group_elem.parents("ul:first").find("li.group > span.blogs_toggle").hide();
group_elem.next("span.blogs_toggle").slideDown("fast");group_elem.find("i").removeClass().addClass("icon-caret-down")}}else group_elem.parent().parent().parent().toggleClass("active")},LoadFromDropdown:function(url){BL.HandleClick.Activate('a[data-func="ToolbarToplistTop"]');History.pushState({func:"LoadFromDropdown",url:url},BL.Main.GenerateTitle(),url)},CloseNews:function(_e){BL.Helper.Ajax({url:"/news/seen",data:{news:1},success:function(ret){$("#news.alert").slideUp()}})},ScrollToTop:function(){$("body,html").animate({scrollTop:0},
230);BL.Event.ClickScrollToTop()},InterceptSignup:function(button){var href=$(button).attr("href");var source=$(button).data("source");var data={event:"clicked_signup_button",source:source,method:"email"};BL.Tonne.GetClient().track(null,data,function(){window.location=href})},InterceptClick:function(button){$button=$(button);var data={event:$button.data("event")};if($button.data("subgroup"))data.subgroup=$button.data("subgroup");BL.Tonne.GetClient().track(null,data,function(){window.location=$button.attr("href")})},
ToolbarSetImageSize:function(target){var size=$(target).attr("data-size");var url="/feed/setsize/"+_private.GetToolbarSortByURL()+"/"+size;$('[data-func="ToolbarSetImageSize"]').removeClass("active");$(target).addClass("active");BL.History.Load(url)},shopAnalytics:function(){var data={event:"shop_click",context:"header_menu_bar"};BL.Tonne.GetClient().track(null,data)}}}();BL.Helper=function(){$(function(){$(".search-box form").submit(function(e){e.preventDefault();e.stopPropagation();var search_string=encodeURIComponent($(this).find("input").val()),type=$(this).attr("data-type");if(search_string.length===0)return;if(type==="whotofollow")$(".search-box .whotofollow").hide();$(".search-box .search-results").empty().show().css("height","200px").activity();BL.Helper.Ajax({url:"/search/"+search_string+"?return=JSON&type="+type+"&identifier="+BL.Tonne.GetClient().identifier,
parseStuff:false,success:function(ret){$(".search-box .search-results").html(ret.html)},complete:function(){$(".search-box .search-results").css("height","auto")}})})});return{Ajax:function(settings){var ajax={};if(typeof settings.url==="undefined")settings.url="/";if(!settings.url){console.error("Cannot execute request without URL");if(this.IsFunction(settings.error))settings.error(null,"nourl");return false}if(settings.url.indexOf("return=JSON")<0)if(settings.url.indexOf("?")<0)settings.url=settings.url+
"?return=JSON";else settings.url=settings.url+"&return=JSON";ajax.type="GET";ajax.dataType="json";ajax.cache=false;ajax.url=settings.url;if(settings.data){ajax.type="POST";ajax.data=settings.data;ajax.data.ajaxkey=AJAX_KEY;ajax.data.referer=window.location.href}if(this.IsFunction(settings.complete))ajax.complete=settings.complete;if(this.IsFunction(settings.error))ajax.error=settings.error;ajax.success=function(ret){if(AJAX_USER!=ret.user)location.reload();if(ret.success!==true){if(BL.Helper.IsFunction(settings.error))settings.error(null,
"nosuccess",null,ret);return}if(settings.parseStuff)if(ret.variables)BL.Main.SetVariables(ret.variables);if(BL.Helper.IsFunction(settings.success))settings.success(ret)};return $.ajax(ajax)},addParameter:function(_url,key,value){_url+=(_url.split("?")[1]?"&":"?")+encodeURIComponent(key)+"="+encodeURIComponent(value);return _url},GetFormFields:function($that){var fields={},Sfields=$that.serializeArray();jQuery.each(Sfields,function(i,Sfield){fields[Sfield.name]=Sfield.value});return fields},GetBlogName:function(blog_id){var elem=
$("#content [data-blog-id="+blog_id+"] [rel=blog_name]");if(elem.length===0)elem=$(".sidebar-nav li.blog[data-blog-id="+blog_id+"] [rel=blog_name]");if(elem.length===0)elem=$(".content-main .alert[rel=blog_unfollow] a[data-blog-id="+blog_id+"]").parent().find("[rel=blog_name]");if(elem.length===0)elem=$("#blog-profile").find("h1");if(elem.length===0)return null;return this.Shorten(elem.html(),19)},GetGroupName:function(group_id){var elem=$elem=$(".sidebar-nav li.group[data-group-id="+group_id+"]").find('span[rel="group_name"]').text();
return elem},IncreaseNumber:function(object){return this.ModifyNumber(object,1)},DecreaseNumber:function(object){return this.ModifyNumber(object,-1)},ModifyNumber:function(object,modifier){var number=this.GetNumber(object)+modifier;if(number<=0)number=0;if(number===0)object.addClass("hide");else object.removeClass("hide");object.html(number);return number},ModifyNumUnread:function(modifier){BL_NUM_UNREAD+=modifier;var page_title="Bloglovin ("+BL_NUM_UNREAD+")";document.title=page_title;LANG.page_title=
page_title},GetNumber:function(object){var number=parseInt(object.html(),10);if(isNaN(number))return 0;return number},IsFunction:function(object){return typeof object=="function"},Length:function(object){var count=0;for(var i=0;i<object.length;i++)if(object.hasOwnProperty(i))count++;return count},Shorten:function(string,num){if(string&&string.length>num)return string.substr(0,num-3)+"...";return string},Popup:function(href,title,height,width){window.open(href,title,"height="+height+",width="+width+
",toolbar=0,location=0,menubar=0,scrollbars=0,status=0")},ParseHash:function(){var hash=window.location.hash;var hashtags={};if(hash.length>0){var tmp=hash.substr(1);tmp=tmp.replace("#","");tmp=tmp.split("&");for(var i=0;i<tmp.length;i++){tmpparts=tmp[i].split("=");if(typeof tmpparts=="object"&&tmpparts.length>0)hashtags[tmpparts[0]]=tmpparts[1]}return hashtags}return null},ProperCase:function(string){return string.replace(/\w\S*/g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()})},
ModalScroll:function(modal){modal.bind("mousewheel DOMMouseScroll",function(e){var scrollTo=null;if(e.type=="mousewheel")scrollTo=e.originalEvent.wheelDelta*-1;else if(e.type=="DOMMouseScroll")scrollTo=e.originalEvent.detail*4;if(scrollTo){e.preventDefault();$(this).scrollTop(scrollTo+$(this).scrollTop())}})},getQueryVariable:function(variable){var query=window.location.search.substring(1);var vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(pair[0]===variable)return pair[1]}return false}}}();$(function(){$(window).bind("statechange",function(){var state=History.getState();var data=null;var url=state.hash.split("/");url.shift();var stateChangeHandlers=$._data(window,"events").statechange,offBlog=false;if(url[0]==="blog")offBlog=true;$.each(stateChangeHandlers,function(i,o){if(o.namespace==="blog")offBlog=false});if(offBlog)state.data.func=undefined;if(state.data.func==false)return;if(typeof state.data.func==="undefined"){if(url[0]!=="blog"||offBlog){window.location=state.url;return}return}if(typeof state.data.data!==
"undefined")data=BL.Storage[state.data.data];BL.History[state.data.func](state,data)})});
BL.History=function(){var _private={sidebar_request:null,cur_session:null};return{Search:function(state,data){$(".sidebar-nav li").removeClass("active");this.Load(state.url)},LoadFromToplist:function(state,data){this.Load(state.url)},LoadFromSidebar:function(state,data){$(".sidebar-nav").find(".active").removeClass("active");var datacheck=!(typeof data=="undefined");if(datacheck&&$(".sidebar-nav").find(data.elem).length>0)data.elem.parents("li:first").addClass("active");else $(".sidebar-nav").find("i.icon-caret-down").removeClass("icon-caret-down").addClass("icon-caret-right");
this.commonBarLoad(state,data,false)},LoadFromTopBar:function(state,data){$(".sidebar-nav").find(".active").removeClass("active");$("#header").find(".dropdown-menu").find(".active").removeClass("active");$("#sidebar_all").parent().addClass("active");this.commonBarLoad(state,data)},commonBarLoad:function(state,data,hidesidebar){var hideside=typeof hidesidebar=="undefined"?true:hidesidebar;if(_private.sidebar_request!==null)_private.sidebar_request.abort();if(typeof data=="undefined")return;$(".content-main > .alert").hide();
var url=state.data.url;BL.Toolbar.set(0);this.Load(url,hideside)},LoadFromDropdown:function(state,data){var url=state.data.url;this.Load(url)},LoadFromAdmin:function(state,data){var url=state.data.url;this.Load(url)},Load:function(url,hideside){$(document).trigger("historyLoad");BL.Ads.stashContentBanner();BL.Toolbar.set(0);$(document).off("willScrollToBottom");if(!this.$container){this.$container=$("#content");this.$parent=this.$container.parent();this.$top=$("body")}var identity=Math.random().toString(36).substr(2);
_private.cur_session=identity;if(hideside){$("body").removeClass("sidebar");$("#sidebar-container").addClass("hide")}$("#dckbar_w").hide();$("#dckbar_y").hide();this.$container.empty().removeClass();this.$top.activity();var self=this;_private.sidebar_request=BL.Helper.Ajax({parseStuff:true,url:url,success:function(ret){if(_private.cur_session!=identity)return;if($("#user-notifications").length!=0)BL.Notification.UpdateUnreadCount();if(ret.hasOwnProperty("unreadFFCount"))BL.Friends.UnreadFriendsFeed(ret.unreadFFCount);
var content=$(ret.html);var content_loaded=false;if(typeof ret.toolbar!="undefined"){self.$container.addClass(ret.toolbar.content_type);BL.Toolbar.Handle(ret.toolbar);if(ret.toolbar.content_type=="popular"){self.$container.html(content);BL.Grid.Load(self.$container);content_loaded=true}}if(!content_loaded)self.$container.html(content);if(typeof ret.ad!="undefined")if(ret.ad.show===true){BL.Ads.moveContentBannerInPlace();BL.Ads.reloadAllTheTags();BL.Ads.showAds()}else BL.Ads.hideAds();if(typeof _gaq!=
"undefined"&&typeof _gatags!="undefined"){if(typeof url==="undefined")url="/";var location_url=url;var url_split=url.split("/");if(typeof url_split[1]!="undefined"&&url_split[1].length==2)location_url="/"+url_split.splice(2).join("/");for(var key in _gatags){if(typeof ret.ad.category!="undefined")_gaq.push([_gatags[key]+"._setCustomVar",3,"category",ret.ad.category,3]);_gaq.push([_gatags[key]+"._trackPageview",location_url])}}if(typeof ret.meta_data!="undefined")if(typeof ret.meta_data.title!="undefined")window.document.title=
ret.meta_data.title;BL.Main.LoadTrigger()},error:function(){},complete:function(){self.$top.data("spinner").stop();self.$container.css("height","auto")}})},Null:function(){}}}();BL.LikesModal=function(){var LikesModal=function(blog_id,post_id){this.modals=[];var self=this;if(typeof blog_id=="number"&&typeof post_id=="number")self.showModalWithIDs(blog_id,post_id);else $("body").on("click",".post",function(event){if(!$(event.srcElement).hasClass("who-likes")&&!$(event.srcElement).hasClass("friends-count"))return;var post=$(event.currentTarget);if($(event.srcElement).hasClass("who-likes"))self.showModal(post);else if($(event.srcElement).hasClass("friends-count"))self.showFriendsModal(post)});
$(document).on("historyLoad",function(){self.close()})};LikesModal.prototype.showModal=function(post){var blogid=post.attr("data-blog-id");var postid=post.attr("data-post-id");this.showModalWithIDs(blogid,postid)};LikesModal.prototype.showModalWithIDs=function(blog_id,post_id){var blogid=blog_id;var postid=post_id;var id="likemodal-"+blogid+"-"+postid;for(var i in this.modals){if(this.modals[i].attr("id")==id)continue;this.modals[i].modal("hide")}var modal=$("body").find("#"+id);if(!modal.length){modal=
$(this.modalHTML());modal.attr("id",id);modal.addClass("like-modal");modal.appendTo("body");modal.find(".modal-body").activity();this.modals.push(modal)}BL.Helper.ModalScroll($(modal).find($(".modal-body")));modal.modal({show:true,remote:"/likes/post/"+blogid+"/"+postid,backdrop:true});$(".close").on("click",function(){$(modal).fadeOut(200,function(){$(modal).remove()})});$(modal).on("click",function(event){event.stopPropagation()});$("body").one("click",function(){$(modal).fadeOut(200,function(){$(modal).remove()})})};
LikesModal.prototype.showFriendsModal=function(post){var blogid=post.attr("data-blog-id");var postid=post.attr("data-post-id");var id="likemodal-"+blogid+"-"+postid+"-friends";for(var i in this.modals){if(this.modals[i].attr("id")==id)continue;this.modals[i].modal("hide")}var modal=$("body").find("#"+id);if(!modal.length){modal=$(this.modalFriendsHTML());modal.addClass("like-modal");modal.attr("id",id);modal.addClass("like-modal");post.data("moda",modal);modal.find("#"+id);modal.find(".modal-body").append(post.find($(".user")).css("display",
"block"));modal.appendTo("body");this.modals.push(modal)}BL.Helper.ModalScroll($(modal).find($(".modal-body")));modal.modal({show:true,remote:false,backdrop:true});$(".close").on("click",function(){$(modal).fadeOut(200,function(){$(modal).remove()})});$(modal).on("click",function(event){event.stopPropagation()});$("body").one("click",function(){$(modal).fadeOut(200,function(){$(modal).remove()})})},LikesModal.prototype.close=function(){for(var i in this.modals)this.modals[i].modal("hide")};LikesModal.prototype.modalFriendsHTML=
function(){return['<div class="modal hide" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">','<div class="modal-header">','<button type="button" class="close" data-dismiss="modal" aria-hidden="true">\u00d7</button>',"<h3>Friends who like this</h3>","</div>",'<div class="modal-body">',"</div>","</div>"].join("")};LikesModal.prototype.modalHTML=function(){return['<div class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">','<div class="modal-header">',
'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">\u00d7</button>','<h3 id="myModalLabel">People who like this</h3>',"</div>",'<div class="modal-body">',"</div>","</div>"].join("")};return LikesModal}();BL.Login=function(){var _private={sending:false};$(function(){if(window.location.hash==="#forgotPass"){$("#forgotPass").modal("show");var email=BL.Helper.getQueryVariable("forgot_password_email");$("#forgotPass input").val(email||"")}});$(function(){$("#forgotPass").on("show",function(){$("#forgotPass .alert").hide();$("#forgotPass form").show();$("#forgotPass input").val("")})});return{Forgotpass:function(e){var $this=$(e),fields=BL.Helper.GetFormFields($this);if(fields.login_email.length===0||_private.sending)return false;
$("#forgotPass .btn").button("loading").css("background-color","#04C");$("#forgotPass .alert").hide();_private.sending=true;BL.Helper.Ajax({url:"/login/sendnewpass?return=JSON",data:{email:fields.login_email},success:function(ret){$("#forgotPass .alert-success").html(ret.message).show();$("#forgotPass form").hide();$("#forgotPass .btn").button("reset");_private.sending=false},error:function(e,error,n,ret){$("#forgotPass .alert-error").html(ret.message).show();$("#forgotPass .btn").button("reset");
_private.sending=false}});return false},GetFromFB:function(){$('a[data-func="GetFromFB"]:last').parents("div:first").activity().end().css("visibility","hidden");$(".form-fancy").hide();BL.Facebook.GetCurAccesstoken(function(accessToken){if(accessToken)BL.Login.CheckFBLogin(accessToken);else{$('a[data-func="GetFromFB"]:last').css("visibility","visible").parents("div:first").css("height","").data("spinner").stop();$(".form-fancy").css("display","block");alert("You canceled your connection to Facebook! Try again or use your email instead.")}})},
CheckFBLogin:function(access_token){var button=$('a[data-func="GetFromFB"]:last');var login_redirect;var blog_id;if(button.length>0){login_redirect=button.attr("data-redirect");blog_id=button.attr("data-blog-id")}login_redirect=login_redirect||"";blog_id=blog_id||0;BL.Helper.Ajax({url:"/login/fblogin?return=JSON",data:{access_token:access_token,login_redirect:login_redirect,blog_id:blog_id},success:function(ret){if(ret.err_flags)if(ret.err_flags.indexOf("bl_account_connected_to_other_fb_account")>
-1){alert("Unable to login with this Facebook account because "+"a Bloglovin' account with the same email already exists "+"and is already tied to a Facebook account. For assistance, please "+"contact support@bloglovin.com.");return}if(ret.status===true)window.location=ret.url;else window.location="/signup"},error:function(){$('a[data-func="GetFromFB"]:last').css("visibility","visible").parents("div:first").data("spinner").stop();alert("Sorry, we couldn't connect to facebook right now. Please try again later")}})}}}();BL.Logout=function(){var _private={LOGOUT_PATH:"/logout",LOGOUT_ITEM:"USER_LOGOUT"};return{DoLogout:function(){window.localStorage.setItem(_private.LOGOUT_ITEM,(new Date).getTime())},StorageEvent:function(e){if(!e)e=window.event;if(e.key&&e.key===_private.LOGOUT_ITEM)window.location=_private.LOGOUT_PATH},GetLogoutPath:function(){return _private.LOGOUT_PATH}}}();
$(function(){if(window.localStorage){$("a.logout").bind("click",$.proxy(BL.Logout.DoLogout,this));window.localStorage.removeItem(BL.Logout.GetLogoutPath());if(window.addEventListener)window.addEventListener("storage",BL.Logout.StorageEvent,false);else window.attachEvent("onstorage",BL.Logout.StorageEvent)}});BL.Notification=function(){$("#user-notifications").click(function(e){if($(e.target).closest(".popover-content").length===1)return;if($(this).hasClass("loading"))return;$(this).addClass("loading");var notification_div=$("#user-notifications");$("#notification-list").activity();BL.Notification.LoadNew(function(ret){var data={event:"notifications_view"};BL.Tonne.GetClient().track(null,data);$("#notification-list").html(ret.html);$("#notification-count").hide();BL.Helper.ModalScroll($("#notification-list"))},
function(xhr,textStatus){console.error("Unable to retrieve notifications!");console.error(xhr);console.error(textStatus)},function(){notification_div.removeClass("loading");$("#notification-list").find(".spinner").remove()})});return{LoadNew:function(callback_success,callback_error,callback_complete){BL.Helper.Ajax({url:"/notification/load_new",success:callback_success,error:callback_error,complete:callback_complete})},UpdateUnreadCount:function(callback_complete){BL.Helper.Ajax({url:"/notification/fetch_unread_count",
success:function(ret){var unread_count=parseInt(ret["unread_count"]);if(unread_count==0)$("#notification-count").hide();else{$("#notification-count").show();$("#notification-count").text(unread_count)}},error:function(xhr,textStatus){console.error("Unable to retrieve notifications!");console.error(xhr);console.error(textStatus)},complete:callback_complete})},Modal:function(_e){var element=$(_e);var blog_id=element.data("blog-id");var post_id=element.data("post-id");if(typeof blog_id!="undefined"&&
typeof post_id!="undefined")var modal=new BL.LikesModal(blog_id,post_id);modal.showModalWithIDs(blog_id,post_id)}}}();BL.Post=function(){$(function(){$(document).on({click:function(e){BL.HandleClick.PostMarkAsRead(this)},mousedown:function(e){if(e.which==2||e.which==3)BL.HandleClick.PostMarkAsRead(this)}},".post.mark:not(.post-read) .post-link")});return{MarkAsRead:function(post_id,blog_id,callback_success,callback_error,callback_complete){var data={event:"post_read",post_id:post_id};BL.Tonne.GetClient().track(null,data);BL.Helper.Ajax({url:"/post/markasread",data:{post_id:post_id,blog_id:blog_id},complete:callback_complete,
success:callback_success,error:callback_error})},MarkAsUnread:function(post_id,blog_id,callback_success,callback_error,callback_complete){BL.Helper.Ajax({url:"/post/markasunread",data:{post_id:post_id,blog_id:blog_id},complete:callback_complete,success:callback_success,error:callback_error})},Like:function(post_id,blog_id,callback_success,callback_error,callback_complete,context,context_ids){BL.Helper.Ajax({url:"/post/like",data:{post_id:post_id,blog_id:blog_id,context:context,context_ids:context_ids},
complete:callback_complete,success:callback_success,error:callback_error})},Unlike:function(post_id,blog_id,callback_success,callback_error,callback_complete,context,context_ids){BL.Helper.Ajax({url:"/post/unlike",data:{post_id:post_id,blog_id:blog_id,context:context,context_ids:context_ids},complete:callback_complete,success:callback_success,error:callback_error})}}}();BL.Search=function(){var _private={u_patterns:["http://","http://www.","www."],input:"#appendedInputButton"};return{Autocomplete:function(){var blogsData=new Dataset({name:"blogs",remote:{url:"/autocomplete/?q=%QUERY&type=blogs",filter:function(req){return req.blogs}},limit:8});$(_private.input).typeahead({minLength:2,hint:false,sections:{name:"blogs",source:blogsData,templates:{footer:function(){var html=$("<div class='tt-header tt-cursor'>Search for <strong>"+$(_private.input).val().replace(/</g,
"&lt;").replace(/>/g,"&gt;")+"</strong></div>");return html},suggestion:function(item){var link=$("<a class='label' href='/blog/"+item.id+"'>"+item.value+"</a>");var clean_url=item.url.lastIndexOf("/")===item.url.length-1?item.url.substring(0,item.url.length-1):item.url;for(var i=0;i<_private.u_patterns.length;i++)clean_url=clean_url.replace(_private.u_patterns[i],"");var url=$('<a class="url" href="/blog/'+item.id+'"">'+clean_url+"</a>");var item_info=$("<div class='item-info'>").append(link).append(url);
return $("<li id='"+item.id+"'>").append(item_info).html()},empty:function(){return}}}});$(_private.input).on("typeahead:selected",function(e,item){if(item)window.location.href="/blog/"+item.id;else window.location.href="/search?q="+encodeURIComponent($(this).val());return false});$(_private.input).on("input",function(){if(!$(_private.input).val())$(this).typeahead("close")});$("body").on("keydown",_private.input,function(e){if(e.keyCode===38||e.keyCode===40)if(!$(".tt-suggestion").hasClass("tt-cursor"))if(!$(".tt-header").hasClass("tt-cursor"))$(".tt-header").addClass("tt-cursor")});
$("body").on("typeahead:cursorchanged",_private.input,function(){$(".tt-header").removeClass("tt-cursor")});$("body").on("typeahead:opened",_private.input,function(){$(".tt-header").addClass("tt-cursor")});$("body").on("mouseenter",".tt-header",function(){if($(".tt-suggestion").length>0&&!$(".tt-header").hasClass("tt-cursor"))$(".tt-header").addClass("tt-cursor")});$("body").on("mouseleave",".tt-dropdown-menu",function(){$(".tt-header").addClass("tt-cursor")});$("#searchbutton").on("click",function(){var input=
$(_private.input);if(input.val())window.location.href="/search?q="+encodeURIComponent(input.val())})}}}();BL.Settings=function(){var _private={found_error:false,ok_to_submit:false,max_size:5242880};$("#avatarModal").on("mouseenter",function(){$("input[type=file]").change(function(){if(this.files[0]){var filename=this.files[0].type;var valid=false;if(filename==="image/jpeg"||filename==="image/png"||filename==="image/gif")valid=true;if(this.files[0].size>_private.max_size){$("#avatar-upload-btn").attr("disabled",true);$(".avatar-size").css("display","block");$(".avatar-img-type").css("display","none")}if(!valid){$(".avatar-img-type").css("display",
"block");$(".avatar-size").css("display","none");$("#avatar-upload-btn").attr("disabled",true)}if($("input[type=file]").val()&&this.files[0].size<_private.max_size&&valid){$(".avatar-size").css("display","none");$(".avatar-img-type").css("display","none");$("#avatar-upload-btn").attr("disabled",false)}}})});$('input[name="fb_use_for_login"]').on("change",function(){BL.Settings.ToggleFBLogin(this)});$('input[name="fb_like_activity"]').on("change",function(){BL.Settings.ToggleFBLikeActivity(this)});
$('input[name="should_unsubscribe_all"]').on("change",function(){BL.Settings.UpdateUnsubscribeFields(this)});$(".settings-notifications").on("click",function(event){$(".settings-hidden-unsubscribe-all").val("0");if(!$(event.target).hasClass("settings-unsubscribe-all"))$(".settings-unsubscribe-all").attr("checked",false)});$("#avatarModal").modal({show:false,backdrop:true});$(".facebook-modal").modal({backdrop:true,show:false});$(".facebook-modal").keydown(function(e){if(e.keyCode==13){event.preventDefault();
$(".facebook-modal").find(".form-inline").submit()}});return{HandleForm:function(obj,e){_private.found_error=false;$("input").each(function(key,obj){BL.Settings.HandleFields(obj)});if(_private.found_error===false){_private.ok_to_submit=true;return}e.stopPropagation();e.preventDefault()},HandleFields:function(obj){var $obj=$(obj);if(BL.Helper.IsFunction(BL.Settings["Validate_"+$obj.attr("name")]))if(!BL.Settings["Validate_"+$obj.attr("name")]($obj.val())){$obj.parents(".control-group:first").addClass("error").find(".help-block").css("display",
"block");_private.found_error=true;return}if(BL.Helper.IsFunction(BL.Settings["Filter_"+$obj.attr("name")]))$obj.val(BL.Settings["Filter_"+$obj.attr("name")]($obj.val()));$obj.parents(".control-group:first").removeClass("error").find(".help-block").css("display","none");return},Validate_first_name:function(string){if(string.length<=0)return false;return true},Validate_username:function(string){if(string.length<3)return false;var find_chars=string.search(/[^a-zA-Z0-9]/g,"");if(find_chars!=-1)return false;
return true},UpdateUnsubscribeFields:function(){if($(".settings-unsubscribe-all").is(":checked")){$("#email_interval_1").prop("checked",true);$(".settings-notifications").find("input[type=checkbox]:checked").removeAttr("checked");$(".settings-unsubscribe-all").attr("checked",true)}},Filter_username:function(string){string=string.replace(/[^a-zA-Z0-9]/g,"");string=string.toLowerCase();return string},GetThumb:function(){BL.Facebook.Connect(function(){BL.Settings.RefreshThumb()})},RemoveAvatarPrompt:function(){$("#removeAvatarModal").modal().off("click").on("click",
".btn",function(){$(this).addClass("modal-result");$("#removeAvatarModal").modal("hide");BL.Settings.RemoveAvatar()}).show()},RemoveAvatar:function(){var data={url:"/settings/removeAvatar",success:function(ret){$("#user-nav .dropdown-toggle img").first().attr("src",ret.avatar);$('input[name="avatar"]').val(ret.avatar);$("img#avatar_preview").attr("src",ret.avatar)},complete:function(){},error:function(){}};BL.Helper.Ajax(data)},GetFromFB:function(){BL.Facebook.Connect(function(){BL.Facebook.GetUserInfo(function(me){BL.Settings.FillFromFB(me)})})},
RefreshThumb:function(){var data={url:"/settings/avatar",parseStuff:false,data:{fb_user_id:BL.Facebook.GetCurUserId(),save:1},success:function(ret){$("#user-nav .dropdown-toggle img").first().attr("src",ret.avatar);$('input[name="avatar"]').val(ret.avatar);$("img#avatar_preview").attr("src",ret.avatar)},complete:function(){},error:function(){}};BL.Helper.Ajax(data)},ToggleFBLogin:function(){var use_login=0;if($('input[name="fb_use_for_login"]:checked').length>0){use_login=1;$('input[name="fb_use_for_login"]').attr("checked",
false)}else $('input[name="fb_use_for_login"]').attr("checked",true);if(use_login==1)BL.Facebook.GetCurAccesstoken(function(accessToken){BL.Facebook.Connect(function(){var data={url:"/facebook/edit",parseStuff:false,data:{access_token:accessToken,use_for_login:use_login},success:function(ret){if(ret.complete===false){$('input[name="fb_use_for_login"]').attr("checked",false);$("#fb_like_activity").hide()}else{$('input[name="fb_use_for_login"]').attr("checked",true);$("#fb_like_activity").show()}},
complete:function(){},error:function(){}};BL.Helper.Ajax(data)})});else{$("#confirm_fb_wrong").hide();$("#confirm_fb").modal({show:true,backdrop:true})}},ToggleFBLikeActivity:function(e){if(!$('input[name="fb_like_activity"]').attr("checked")){$(e).closest("form").submit();return}BL.Facebook.AskForPublishPermissions(function(){$(e).closest("form").submit();$('input[name="fb_like_activity"]').attr("checked",true)},function(){$('input[name="fb_like_activity"]').attr("checked",false)})},FBModalCheckPassword:function(_e){if($(_e).find("input").val().length<
1){$("#confirm_fb_no_pw").show();$("#confirm_fb_wrong").hide();return}var data={url:"/settings/validatepassword",parseStuff:false,data:{password:$(_e).find("input").val()},success:function(){$("#confirm_fb_no_pw").hide();$("#confirm_fb_wrong").hide();BL.Settings.FBLoginCancel()},complete:function(){},error:function(){$("#confirm_fb_wrong").show();$("#confirm_fb_no_pw").hide();$('input[name="fb_use_for_login"]').prop("checked",true)}};BL.Helper.Ajax(data)},FBLoginCancel:function(){var data={url:"/facebook/disablelogin",
parseStuff:false,success:function(){$("#fb_like_activity").hide();$("#confirm_fb").modal("hide");$("#confirm_fb").find("input").val("");$('input[name="fb_use_for_login"]').attr("checked",false)},complete:function(){},error:function(){$("#fb_like_activity").hide();$('input[name="fb_use_for_login"]').attr("checked",true)}};BL.Helper.Ajax(data)},FBModalCancel:function(){$("#confirm_fb").modal("hide");$("#confirm_fb_no_pw").hide();$('input[name="fb_use_for_login"]').prop("checked",true)},FillFromFB:function(me){$('input[name="first_name"]').val(me.name);
if(typeof me.location!="undefined")$('input[name="location"]').val(me.location.name);$('input[name="facebook_profile"]').val(me.link);if(typeof me.username!="undefined")$('input[name="username"]').val(me.username);$(".hide-on-fill").hide("fast");BL.Facebook.Connect(function(){BL.Facebook.GetThumb(function(){var data={url:"/settings/avatar",parseStuff:false,data:{fb_user_id:BL.Facebook.GetCurUserId(),save:0},success:function(ret){$('input[name="avatar"]').val(ret.avatar);$("img#avatar_preview").attr("src",
ret.avatar)},complete:function(){},error:function(){}};BL.Helper.Ajax(data)})})}}}();BL.Sidebar=function(){var _private={MoveToRead:function(blog_id){var blog_elem=$(".sidebar-nav li.blog[data-blog-id="+blog_id+"]"),group_id=BL.Sidebar.IsInGroup(blog_id);if(blog_elem.length===0)return false;if(!group_id)blog_elem.addClass("read").removeClass("unread").appendTo(".nav.nav-list.read");else blog_elem.addClass("read").removeClass("unread");if(BL.HandleClick.SidebarToggleReadHide())blog_elem.show();else blog_elem.hide();if(group_id!==false)BL.Sidebar.CheckGroup(group_id,1);var sidebar_elem=
$(".show-read");sidebar_elem.show()},MoveToUnread:function(blog_id){var blog_elem=$(".sidebar-nav li.blog[data-blog-id="+blog_id+"]"),group_id=BL.Sidebar.IsInGroup(blog_id);if(blog_elem.length===0)return false;if(!group_id)blog_elem.addClass("unread").removeClass("read").appendTo(".nav.nav-list.unread:not(.nav-read)");else blog_elem.addClass("unread").removeClass("read");blog_elem.show();if(group_id!==false)BL.Sidebar.CheckGroup(group_id,1);var sidebar_elem=$(".show-read");if($(".sidebar-nav").find(".read:not(#clone .read, .nav)").length<
1)sidebar_elem.hide()}};return{ParseNumUnread:function(html){var h_length=html.length;if(h_length===0)return 0;return parseInt(html,10)},HideShowRead:function(){$(".sidebar-nav .blog").each(function(){BL.Sidebar.ParseNumUnread()})},AddBlog:function(blog_id,blog_name,num_unread){var blog_elem=$("#clone li.blog[data-blog-id=0]").clone();if(blog_elem.length===0)return;var url=blog_elem.find("a").attr("href").replace(blog_elem.data("blog-id"),blog_id);blog_elem.attr("data-blog-id",blog_id);blog_elem.find("[rel=blog_name]").html(blog_name);
blog_elem.find("[rel=num_unread]").html(num_unread);blog_elem.find("a").attr("href",url).attr("title",blog_name);if(num_unread>0){blog_elem.removeClass("read").addClass("unread");blog_elem.find("[rel=num_unread]").removeClass("hide");$(".sidebar-nav ul.unread:first").append(blog_elem)}else{blog_elem.removeClass("unread").addClass("read");$(".sidebar-nav ul.read").append(blog_elem)}blog_elem.show()},RemoveBlog:function(blog_id){var group_id=BL.Sidebar.IsInGroup(blog_id);$(".sidebar-nav li.blog[data-blog-id="+
blog_id+"]").remove();if(group_id!==false&&BL.Sidebar.NumBlogsInGroup(group_id)===0)$(".sidebar-nav .group[data-group-id="+group_id+"]").remove()},MarkAllAsRead:function(){$(".sidebar-nav .blog:not(#clone li.blog)").each(function(){BL.Sidebar.MarkBlogAsRead($(this).attr("data-blog-id"))})},MarkGroupAsRead:function(group_id){$(".sidebar-nav .group[data-group-id="+group_id+"] .blog").each(function(){BL.Sidebar.MarkBlogAsRead($(this).attr("data-blog-id"))})},AddGroup:function(group_id,group_name_raw){var group_name=
group_name_raw;if(group_id==1)return;if($("li.group[data-group-id="+group_id+"]").length!==0)return;var group_elem=$("#clone li.group[data-group-id=0]").clone();if(group_elem.length===0)return;var url=group_elem.find("a").attr("href").replace(0,group_id);group_elem.attr("data-group-id",group_id);group_elem.find("[rel=group_name]").html(group_name);group_elem.find("a").attr("href",url);$("ul.nav.nav-list.unread:first li.sidebar-likes").after(group_elem)},MoveBlog:function(blog_id,group_id_new){var blog_elem=
$(".sidebar-nav li.blog[data-blog-id="+blog_id+"]"),group_id_old=BL.Sidebar.IsInGroup(blog_id),num_unread=0;num_unread=this.ParseNumUnread(blog_elem.find("[rel=num_unread]").html());console.log("Moved blog "+blog_id+" from "+group_id_old+" to "+group_id_new+" unread "+num_unread);if(num_unread>0){if(group_id_old!==false)BL.Helper.ModifyNumber($(".sidebar-nav .group[data-group-id="+group_id_old+"] [rel=num_unread]:first"),-num_unread);BL.Helper.ModifyNumber($(".sidebar-nav .group[data-group-id="+group_id_new+
"] [rel=num_unread]:first"),num_unread);if(group_id_new==1)moveto=$(".sidebar-nav > ul.unread:first");else moveto=$(".sidebar-nav .group[data-group-id="+group_id_new+"] ul.blogs:first")}else if(group_id_new==1)moveto=$(".sidebar-nav > ul.read:first");else moveto=$(".sidebar-nav .group[data-group-id="+group_id_new+"] ul.blogs:first");blog_elem.appendTo(moveto);if(group_id_old!==false){BL.Sidebar.CheckGroup(group_id_old,num_unread);BL.HandleClick.ToggleGroupElement($(".sidebar-nav .group[data-group-id="+
group_id_old+"] a"),true)}BL.Sidebar.CheckGroup(group_id_new,num_unread);BL.HandleClick.ToggleGroupElement($(".sidebar-nav .group[data-group-id="+group_id_new+"] a"),false);if(num_unread===0&&group_id_new==1){$(".sidebar-nav > ul.nav.nav-list.read").show();$(".sidebar-nav > ul.nav-read").show();$(".sidebar-nav > ul.nav-read > li > a").text(LANG.hideread);$(".sidebar-nav > ul.nav-read > li > a").parents("ul:first").next("ul.read").show()}},CheckGroup:function(group_id,num_unread){if(group_id==1||group_id===
false){var ungroup_elm=$(".sidebar-nav > ul.nav.nav-list.read");var unsorted_unread=ungroup_elm.find("li.blog").length;if(unsorted_unread===0){$("ul.nav-read").hide();ungroup_elm.hide()}}else{var group_elm=$(".sidebar-nav").find("[data-group-id="+group_id+"]");var unread=group_elm.find("li.unread").length;var read=group_elm.find("li.read").length;var classes=["read","unread"];if(unread!==0)classes.reverse();group_elm.addClass(classes[0]).removeClass(classes[1])}},MarkBlogAsRead:function(blog_id,num_posts){var elem=
$(".sidebar-nav li.blog[data-blog-id="+blog_id+"]");var num_unread=0;if(typeof num_posts=="undefined")num_posts=this.ParseNumUnread(elem.find("[rel=num_unread]").html());num_unread=BL.Helper.ModifyNumber(elem.find("[rel=num_unread]"),-num_posts);BL.Helper.ModifyNumUnread(-num_posts);if(num_unread<=0)_private.MoveToRead(blog_id);if((group_id=BL.Sidebar.IsInGroup(blog_id))!==false)BL.Helper.ModifyNumber($(".sidebar-nav .group[data-group-id="+group_id+"] [rel=num_unread]:first"),-num_posts);return num_unread},
MarkBlogAsUnread:function(blog_id,num_posts){var elem=$(".sidebar-nav li.blog[data-blog-id="+blog_id+"]");var num_unread=BL.Helper.ModifyNumber(elem.find("[rel=num_unread]"),num_posts);BL.Helper.ModifyNumUnread(num_posts);console.log(num_posts);if(num_unread==1)_private.MoveToUnread(blog_id);if((group_id=BL.Sidebar.IsInGroup(blog_id))!==false)BL.Helper.ModifyNumber($(".sidebar-nav .group[data-group-id="+group_id+"] [rel=num_unread]:first"),num_posts)},LoadAll:function(){$("#sidebar_all").click()},
IsInGroup:function(blog_id){var group=$(".sidebar-nav li.blog[data-blog-id="+blog_id+"]").parents("li.group:first");if(group.length===0)return false;return parseInt(group.attr("data-group-id"),10)},NumBlogsInGroup:function(group_id){var group=$(".sidebar-nav li.group[data-group-id="+group_id+"]");if(group.length===0)return false;return parseInt(group.find(".blog").length,10)}}}();BL.Social=function(){return{UpdatePinterest:function(post){var $pin=$('[data-func="Pinterest"]'),href="http://pinterest.com/pin/create/button/";href+="?url="+encodeURIComponent(post.link);if(post.media!=1)href+="&media="+encodeURIComponent(post.media);if(post.title.length>0)href+="&description="+encodeURIComponent(post.title);$pin.attr("href",href)},UpdateTweet:function(post){var $tw=$('[data-func="Tweet"]'),href="https://twitter.com/share?via=bloglovin";href+="&url="+encodeURIComponent(post.link);
if(post.title.length>0)href+="&text="+encodeURIComponent(post.title);$tw.attr("href",href)},Pinterest:function(e){var $e=$(e);var href=$e.attr("href");var frame_type=$e.data("frame-type");BL.Helper.Popup(href,"Pinterest",320,665);if(frame_type){var data={event:"frame_actions",action:"share",share_type:"pinterest",frame_type:frame_type};BL.Tonne.GetClient().track(null,data)}},Tweet:function(e){var $e=$(e);var href=$e.attr("href");var frame_type=$e.data("frame-type");BL.Helper.Popup(href,"Tweet this",
300,550);if(frame_type){var data={event:"frame_actions",action:"share",share_type:"twitter",frame_type:frame_type};BL.Tonne.GetClient().track(null,data)}}}}();$("#searchBlog .search-results").on("click",".handleclick",function(e){e.preventDefault();e.stopPropagation();var $blog=$(this).parents(".blog:first"),blog_id=$blog.attr("data-blog-id"),blog_img=$blog.find("img.avatar").attr("src"),blog_name=$blog.find("[rel=blog_name]").html();$("#blog_name").val(blog_name);$(".spotlight-preview [rel=blog_name]").html(blog_name);$(".spotlight-preview img").attr("src",blog_img);$("form[name=spotlight] input[name=blog_id]").val(blog_id);$("#searchBlog").modal("hide")});
$("input#blog_name").on("focus",function(e){setTimeout(function(){$("#searchBlog").modal("show").find("input[type=text]").val($("#blog_name").val()).focus()},1E3)});$("form[name=spotlight] textarea").keyup(function(){var text=$(this).val();var charsleft=parseInt(45-text.length);$("form[name=spotlight] [rel=charsleft]").text(charsleft);$(".spotlight-preview [rel=spotlight_text]").text(text)});
$("form[name=spotlight]").submit(function(e){e.preventDefault();e.stopPropagation();var blog_id=$("form[name=spotlight] input[name=blog_id]").val();var text=$("form[name=spotlight] textarea").val();if(!blog_id){alert("SELECT A BLOG");return}if(!text){alert("WRITE SOME TEXT");return}BL.Helper.Ajax({url:"/spotlight",data:{blog_id:blog_id,spotlight_text:text},success:function(ret){var spotlight_id=ret.variables.spotlight_id;console.log(ret);$("form[name=spotlight] button[type=submit]").parent().hide();
$(".step1").hide();$(".step2").show();if(ret.is_paid)whenPaid(ret);else var interval=setInterval(function(){$.get("/spotlight/getstatus/"+spotlight_id,function(ret){if(ret.is_paid){clearInterval(interval);whenPaid(ret)}})},1E4)},error:function(jqXHR,textStatus,errorThrown,data){}})});$(".step2 input[type=radio]").change(function(){var code=$(this).attr("data-code");var cost=$(this).attr("data-cost");$("[data-variable=spotlight_code]").html(code);$("[data-variable=spotlight_cost]").html(cost)});
function whenPaid(ret){$(".step1, .step2").hide();$(".step3").show().find(".alert-success").find("[rel=success] strong").html(ret.queue+" min").end().find("[rel=prepaid] strong").html(ret.prepaid+" Spotlights");if(ret.prepaid<=0)$(".step3 [rel=prepaid]").hide()};BL.Subscription=function(){var _private={createGroupForBlog:0,OnBlogAdded:function(blog_id){var $group=this.GetGroupFromBlog(blog_id);$group.find(".alert_empty").hide();$group.find("div.editgroupname.static").show();$group.parents("div.widget-box:first").show()},OnBlogRemoved:function(blog_id,old_group_id){if(this.NumBlogsInGroup(old_group_id)===0)this.GetGroup(old_group_id).find(".alert_empty").show()},MoveBlogToGroup:function(blog_id,new_group_id){var group_id=_private.GetGroupId(blog_id);var elem_blog=
_private.GetBlog(blog_id);_private.GetGroup(new_group_id).prepend(elem_blog);_private.OnBlogAdded(blog_id);_private.OnBlogRemoved(blog_id,group_id);if(typeof do_request!="undefined"&&do_request===false)return;BL.Helper.Ajax({url:"/group/change",data:{blog_id:blog_id,new_group_id:new_group_id},success:function(ret){},error:function(){_private.GetGroup(group_id).prepend(elem_blog);_private.OnBlogAdded(blog_id);_private.OnBlogRemoved(blog_id,new_group_id)}})},HideChangeGroupName:function(group_id){var group=
this.GetGroup(group_id);group.find(".editgroupname.static").show();group.find(".editgroupname.edit").hide()},NumBlogsInGroup:function(group_id){return this.GetGroup(group_id).find(".blog:visible").length},GetBlogName:function(blog_id){return this.GetBlog(blog_id).find("[rel=blog_name]").text()},GetGroupId:function(blog_id){return this.GetGroupIdFromElem(this.GetBlog(blog_id))},GetBlogIdFromElem:function(_e){return $(_e).parents("tr.blog:first").attr("data-blog-id")},GetGroupIdFromElem:function(_e){return $(_e).parents(".group:first").attr("data-group-id")},
GetGroupFromBlog:function(blog_id){return this.GetGroup(this.GetGroupId(blog_id))},GetGroup:function(group_id){return $("table.group[data-group-id="+group_id+"]")},GetBlog:function(blog_id){return $("tr.blog[data-blog-id="+blog_id+"]")}};$(function(){$(".dropdown-toggle").on("click",function(){var menu=$(this).next();var distFromTop=$(this).offset().top-$(window).scrollTop();var d=window.innerHeight-(distFromTop+$(this).innerHeight());if(d<menu.innerHeight()&&!(menu.innerHeight()>distFromTop))$(this).next().addClass("pull-top");
else menu.removeClass("pull-top")});$("#createGroup").on("hidden",function(){_private.createGroupForBlog=0}).on("shown",function(){$(this).find("input").val("").focus()});$(".editgroupname.edit input").keyup(function(e){if(e.which==27)_private.HideChangeGroupName(_private.GetGroupIdFromElem(this))});$("#addBlog").on("shown",function(){$(this).find("input").val("").focus()});$("#addBlog .search-results").on("click",".handleclick",function(e){e.preventDefault();e.stopPropagation();var func=$(this).attr("data-func");
BL.Subscription[func](this)});$('input[name="blog_private"]').on({"change":function(e){e.stopPropagation();var checked=$(this).is(":checked");if(checked)BL.Subscription.Private(this);else BL.Subscription.Public(this)}}).parent().tooltip({animation:true,html:true,placement:"top",title:LANG["priv_tooltip"]});$('a[data-func="RemoveGroup"]').tooltip({animation:true,html:true,placement:"top",title:LANG["grrm_tooltip"]})});return{Follow:function(_e){var $blog=$(_e).parents(".blog:first"),blog_id=$blog.attr("data-blog-id"),
blog_img=$blog.find("img.avatar").attr("src"),blog_name=$blog.find("[rel=blog_name]").html(),blog_url=$blog.find("span.url").attr("data-url");var elem_buttons=$("a[data-func=Follow][data-blog-id="+blog_id+"]");$(_e).attr("data-func","Unfollow").removeClass("follow").addClass("unfollow").find("span").html(LANG["following"]);$('.post[data-blog-id="'+blog_id+'"]').one("mouseleave",function(){elem_buttons.attr("data-func","Unfollow").removeClass("follow").addClass("unfollow").find("span").html(LANG["following"])});
$("div.modal-body").activity();BL.Blogs.Follow({blog_id:blog_id,success:function(ret){var blog_elem=$("tr.blog:first").clone();blog_elem.show().attr("data-blog-id",blog_id).find("a").first().attr("href","/blog/"+blog_id).text(blog_name).end().end().find("span a").attr("href","#").html(blog_url);$(".group[data-group-id=1] .blog:first").before(blog_elem);$(".alert-blank").parents("div:first").hide();$(".widget-box").show();$("div.modal-body").data("spinner").stop();$("#addBlog").modal("hide")}})},Unfollow:function(_e){console.log(_e);
var $blog=$(_e).parents(".blog:first"),blog_id=$blog.attr("data-blog-id"),blog_img=$blog.find("img.avatar").attr("src"),blog_name=$blog.find("[rel=blog_name]").html(),blog_url=$blog.find("h2 a").attr("href");var elem_buttons=$("a[data-func=Unfollow][data-blog-id="+blog_id+"]");$(_e).attr("data-func","Follow").removeClass("unfollow").addClass("follow").find("span").html(LANG["follow"]);$('.post[data-blog-id="'+blog_id+'"]').one("mouseleave",function(){elem_buttons.attr("data-func","Follow").removeClass("unfollow").addClass("follow").find("span").html(LANG["follow"])});
$("div.modal-body").activity();BL.Blogs.Unfollow({blog_id:blog_id,success:function(ret){var blog_elem=$('tr.blog[data-blog-id="'+blog_id+'"]').detach();$("div.modal-body").data("spinner").stop();$("#addBlog").modal("hide")}})},GroupChangeName:function(_e){var th=$(_e).parents("th:first");var group_name=th.find(".editgroupname.static").hide().find("[rel=group_name]").text();th.find(".editgroupname.edit").show().find("input").val(group_name).select()},SubmitGroupChangeName:function(_e){var group_name=
$(_e).parent().find("input").val();var group_id=$(_e).parents(".group:first").attr("data-group-id");BL.Helper.Ajax({url:"/group/rename",data:{group_id:group_id,group_name:group_name},success:function(ret){_private.HideChangeGroupName(_private.GetGroupIdFromElem(_e));var group=_private.GetGroup(group_id);group.attr("data-group-id",ret.new_group_id).find("[rel=group_name]").text(group_name);$(".dropdown-menu[rel=change_group] [data-group-id="+group_id+"]").attr("data-group-id",ret.new_group_id).text(group_name)}})},
CancelGroupChangeName:function(_e){_private.HideChangeGroupName(_private.GetGroupIdFromElem(_e))},OpenCreateGroupForBlog:function(_e){var blog_id=_private.GetBlogIdFromElem(_e);_private.createGroupForBlog=blog_id},RemoveGroup:function(_e){var group_id=_private.GetGroupIdFromElem(_e),group=_private.GetGroup(group_id),reply=confirm("Are you sure you want to remove this group? No blogs will be removed.");if(!reply)return;BL.Helper.Ajax({url:"/group/remove",data:{group_id:group_id},success:function(ret){_private.GetGroup(1).prepend(group.find(".blog"));
group.parents("div.widget-box:first").remove();$("ul.dropdown-menu[rel=change_group] a[data-group-id="+group_id+"]").parent().remove()}})},CreateGroup:function(_f){var group_name=$(_f).find("input").val();var $group=$(".group:first").parents("div.widget-box:first").clone();$("#loader_stuff").css("height","50px").activity();BL.Helper.Ajax({url:"/group/new",data:{group_name:group_name},success:function(ret){var group_id=ret.group_id;$group.find(".group:first").attr("data-group-id",group_id).find("[rel=group_name]").text(group_name).end().find(".blog").remove().end().find("#alert_unfollow").remove().end().find(".alert_empty").show().end().find(".switch").show().end().find(".editgroupname.static").show();
$group.show();var dropdowns=$("ul.dropdown-menu[rel=change_group]");dropdowns.prepend(dropdowns.first().find("li:first").clone().find("a").attr("data-group-id",group_id).text(group_name).end());$(".group:first").parents("div.widget-box:first").before($group);$("thead").show();if(_private.createGroupForBlog>0)_private.MoveBlogToGroup(_private.createGroupForBlog,group_id);$("#createGroup").modal("hide")},complete:function(){$("#loader_stuff").css("height","").data("spinner").stop()},error:function(e,
error,n,ret){alert(ret.message)}})},ChangeGroup:function(_e){var blog_id=_private.GetBlogIdFromElem(_e);var new_group_id=$(_e).attr("data-group-id");_private.MoveBlogToGroup(blog_id,new_group_id);BL.Sidebar.MoveBlog(blog_id,new_group_id);$(".btn-group.open").removeClass("open")},Undo:function(_e){var blog_id=$(_e).attr("data-blog-id");var group_id=_private.GetGroupId(blog_id);BL.Blogs.Follow({blog_id:blog_id,group_id:group_id,success:function(ret){BL.Sidebar.AddBlog(blog_id);BL.Sidebar.MoveBlog(blog_id,
group_id);$("#alert_unfollow").hide();_private.GetBlog(blog_id).show();_private.OnBlogAdded(blog_id)}})},UnfollowManage:function(_e){var blog_id=_private.GetBlogIdFromElem(_e);var group_id=_private.GetGroupIdFromElem(_e);var group_name=_private.GetBlogName(blog_id);BL.Blogs.Unfollow({blog_id:blog_id,success:function(ret){var $alert=$("#alert_unfollow"),last_group=$alert.parents("table.group:first").attr("data-group-id");$alert.show().find("[rel=blog_name]").html(group_name).end().find("a").attr("data-blog-id",
blog_id);_private.GetBlog(blog_id).hide().before($alert);BL.Sidebar.RemoveBlog(blog_id);if(typeof last_group!="undefined"&&last_group!=group_id)_private.OnBlogRemoved(blog_id,last_group)},error:function(){},complete:function(){}})},Public:function(_e){var blog_id=_private.GetBlogIdFromElem(_e);BL.Blogs.Public({blog_id:blog_id,success:function(ret){console.log("Blog "+blog_id+" made public")},error:function(){},complete:function(){}})},Private:function(_e){var blog_id=_private.GetBlogIdFromElem(_e);
BL.Blogs.Private({blog_id:blog_id,success:function(ret){console.log("Blog "+blog_id+" made private")},error:function(){},complete:function(){}})}}}();window.BL.Tonne=function(){var _private={client:null};var TonneClient=function TonneClient(options){options=options||{};this.storage=new MemStore;this.country=options.country;this.geo=this._determineGeo(options.country);this.platform=options.platform;this.identifier=options.identifier;this.signedIn=options.signedIn;this.memberSince=options.memberSince||0;this.staticFields=options.staticFields||{};this.abGroups=options.abGroups||[];this.env_type=options.env_type||"unknown";this.maxAge=3600*2*1E3;this.prefix=
"tonne_";this.timeout=null;this.endpoint="https://www.bloglovin.com/metrics/datapoints?return=JSON";this.maxIntervals=[500,500,500,500,500,1E3,2E3,2E3,5E3];this.curInterval=0;this.removeOutdated();this.sendBatch()};TonneClient.prototype.getName=function(){return"TonneClient"};TonneClient.prototype.track=function tcTrack(e,data,callback){if(!this.identifier)return;var datapoint=this.createDatapoint(data);this.storage.setItem(this.prefix+datapoint.timestamp,JSON.stringify(datapoint));if(callback&&typeof callback===
"function")this.sendBatch(callback);else if(!this.timeout){var ms=Math.random()*this.maxIntervals[this.curInterval];var self=this;this.timeout=setTimeout(function(){clearTimeout(self.timeout);self.sendBatch()},ms)}};TonneClient.prototype.createDatapoint=function createDatapoint(data){var datapoint=data||{};var tsms=(new Date).getTime();datapoint.timestamp=tsms;datapoint.uri=document.URL;datapoint.country=this.country;datapoint.geo=this.geo;datapoint.referrer=document.referrer;datapoint.identifier=
this.identifier;datapoint.platform=this.platform;datapoint.ab_variation=this.abGroups;datapoint.signed_in=this.signedIn;datapoint.codebase="core-app";datapoint.env_type=this.env_type;if(this.signedIn)datapoint.member_since=this.memberSince;for(var i in this.staticFields)datapoint[i]=this.staticFields[i];return datapoint};TonneClient.prototype.removeOutdated=function removeOutdated(){var len=this.storage.length;var curTime=(new Date).getTime();var offset=this.prefix.length;for(var i=0;i<len;i++){var key=
this.storage.key(i);if(key.indexOf(this.prefix)===0){var timestamp=parseInt(key.substring(offset),10);if(curTime>timestamp+this.maxAge)this.storage.removeItem(key)}}};TonneClient.prototype.sendBatch=function sendBatch(callback){if(!this.identifier)return;var backup={};var data=[];var len=this.storage.length;var trim=[];var i=0;var key=null;for(i=0;i<len;i++){key=this.storage.key(i);if(key.indexOf(this.prefix)===0){var item=this.storage.getItem(key);if(JSON.parse(item).identifier){backup[key]=item;
data.push(JSON.parse(item))}else trim.push(key)}}if(trim.length>0)for(i=0;i<trim.length;i++)this.storage.removeItem(trim[i]);if(data.length>0){for(key in backup)this.storage.removeItem(key);var self=this;var message={localtime:(new Date).getTime(),events:data};$.ajax({url:this.endpoint,type:"POST",data:JSON.stringify(message),timeout:1500}).fail(function(){for(var key in backup)self.storage.setItem(key,backup[key])}).always(function(){self.curInterval=Math.min(self.maxIntervals.length-1,self.curInterval+
1);if(callback&&typeof callback==="function")callback()})}this.timeout=null};TonneClient.prototype._determineGeo=function determineGeo(code){code=code.toUpperCase();if(code==="US")return"USA";var regex=/(AL|AD|AM|AT|BY|BE|BA|BG|CH|CY|CZ|DE|DK|EE|ES|FO|FI|FR|GB|GE|GI|GR|HU|HR|IE|IS|IT|LT|LU|LV|MC|MK|MT|NO|NL|PO|PT|RO|RU|SE|SI|SK|SM|TR|UA|VA)/;if(regex.exec(code))return"Europe";return"ROW"};var MemStore=function MemStore(){this.data={};this.keys=[];this.length=0};MemStore.prototype.key=function keyN(key){return this.keys[key]||
null};MemStore.prototype.getItem=function getItem(key){return this.data[key]||null};MemStore.prototype.setItem=function setItem(key,value){if(!key)return;if(!this.data[key]){this.keys.push(key);this.length++}if(typeof this.data[key]==="undefined"||this.data[key]!==value){var e=$.Event("storage",{key:key,oldValue:this.data[key]||null,newValue:value,url:document.URL});$(document).trigger(e)}this.data[key]=value};MemStore.prototype.removeItem=function removeItem(key){if(!this.data[key])return;var keyIndex=
false;for(var i in this.keys)if(this.keys[i]===key){keyIndex=i;break}var value=this.data[key];var e=$.Event("storage",{key:key,oldValue:value,newValue:null,url:document.URL});$(document).trigger(e);if(keyIndex!==false)this.keys.splice(keyIndex,1);delete this.data[key];this.length--};MemStore.prototype.clear=function clear(){if(this.length){var e=$.Event("storage",{key:null,oldValue:null,newValue:null,url:document.URL});$(document).trigger(e)}this.data={};this.keys=[];this.length=0};return{SetInitData:function(data){_private.client=
new TonneClient(data);var pageLoadEvent={event:"page_load"};if($("#page-about-trendingblogs").length>0)pageLoadEvent.page_type="trending_blogs";_private.client.track(null,pageLoadEvent);var datapoint={};if($("#page-widget").length>0){datapoint={event:"widget_page_visited"};_private.client.track(null,datapoint)}if($("#signup-form").length>0){datapoint={event:"signup_page_visited"};_private.client.track(event,datapoint)}},GetClient:function(){return _private.client}}}();BL.Toolbar=function(){var _private={content_type:null,content_id:0,content_page:null,num_page:1,dckbar_type:0,mouseoutdelay:400};var endless;var timeout;$(window).scroll(function(){clearTimeout(timeout);timeout=setTimeout(function(){scroll()},100)});$(".dropdown").hover(function(){if($(this).data("dd-timeout"))clearTimeout($(this).data("dd-timeout"));$(".dropdown.open").removeClass("open");$(this).addClass("open");var data={event:"nav_drop_down_open"};BL.Tonne.GetClient().track(null,data)},function(){$(this).data("dd-timeout",
setTimeout(function(menu){return function(){$(menu).removeClass("open")}}(this),_private.mouseoutdelay))});function scroll(){var scrollPos=$(window).height()+$(window).scrollTop();var height=getDocumentHeight();var margin=900;if(scrollPos>=height-150)$(document).trigger("didScrollToBottom");if(scrollPos>=height-margin)$(document).trigger("willScrollToBottom");var windowHeight=$(window).height(),$toTopButton=$(".totop");if($toTopButton.length===0)return;var toTopButtonOffset=$toTopButton.offset().top;
if(toTopButtonOffset>=windowHeight+550)$toTopButton.find("a").addClass("active");else if(toTopButtonOffset<=windowHeight+550)$toTopButton.find("a").removeClass("active")}function getDocumentHeight(){return Math.max(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),Math.max(document.body.offsetHeight,document.documentElement.offsetHeight),Math.max(document.body.clientHeight,document.documentElement.clientHeight))}return{css_toolbars:".main-btn-toolbar > div",SetInitData:function(data){_private.content_type=
data.content_type;_private.content_id=data.content_id;_private.content_page=data.content_page;_private.num_page=data.num_page;endless=new BL.Endless($("#content"),data.fillolder.url);if(data.fillolder.active!==true)endless.active=false;if(data.fillolder.success!==null)endless.success=BL[data.fillolder.success.module][data.fillolder.success.func]},Handle:function(toolbar){this.set(toolbar.toolbars);_private.content_type=toolbar.content_type;_private.content_id=parseInt(toolbar.content_id,10);_private.num_page=
parseInt(toolbar.num_page,10);_private.content_page=toolbar.content_page;_private.dckbar_type=toolbar.dckbar_type;if(toolbar.markasread)if(toolbar.markasread.disabled)this.getToolbar(toolbar.markasread.toolbar_id).find("a").attr("disabled",true);else this.getToolbar(toolbar.markasread.toolbar_id).find("a").removeAttr("disabled");if(typeof toolbar.context!="undefined"){var layoutclasses=["span12","span9","offset1","span10"].join(" ");var container=$("#main-content-container");var body=$("body");var sidebar=
$("#sidebar-container");switch(toolbar.context){case 1:container.removeClass(layoutclasses).addClass("offset1 span10");body.removeClass("sidebar").addClass("no-sidebar");sidebar.addClass("hide");body.removeClass("full-page");break;case 2:container.removeClass(layoutclasses).addClass("span9");body.removeClass("no-sidebar").addClass("sidebar");sidebar.removeClass("hide");body.removeClass("full-page");break;case 4:container.removeClass(layoutclasses).addClass("span12");body.removeClass("sidebar").addClass("no-sidebar").removeClass("full-page");
sidebar.addClass("hide");break;case 8:container.removeClass(layoutclasses);body.removeClass("sidebar").addClass("no-sidebar").addClass("full-page");sidebar.addClass("hide");break}}if(typeof toolbar.content_type!="undefined"){var content=$("#content");switch(toolbar.content_type){case "searchresult":case "toplist":content.addClass("blog-list");break;default:content.removeClass("blog-list");break}}if(toolbar.content_page=="popular"&&toolbar.dckbar_type==1){$("#dckbar_w").show();$("#dckbar_y").hide()}else if(toolbar.dckbar_type==
1){$("#dckbar_w").hide();$("#dckbar_y").show()}else{$("#dckbar_w").hide();$("#dckbar_y").hide()}if(typeof endless.active!="undefined"){if(endless!==null)endless.destroy();endless=new BL.Endless($("#content"),toolbar.fillolder.url);endless.active=toolbar.fillolder.active||false;if(toolbar.fillolder.success!==null)endless.success=BL[toolbar.fillolder.success.module][toolbar.fillolder.success.func];else endless.success=null;if(endless.active===true)$(document).on("willScrollToBottom",endless.boundload)}else{endless.destroy();
endless.active=true}},MarkAsRead:function(){var url="/feed/mark"+_private.content_type+"asread";var data={};if(_private.content_id!==0)data[_private.content_type+"_id"]=_private.content_id;BL.Sidebar["Mark"+_private.content_type.ucfirst()+"AsRead"](_private.content_id);$("#content").find(".post").addClass("post-read").find("[data-func=PostMarkAsRead]").attr("data-func","PostMarkAsUnread").find("span").html(LANG.markunread);BL.Helper.Ajax({url:url,data:data,success:function(ret){}})},Unfollow:function(_e){if(_private.content_type!=
"blog"){console.error("Cannot Unfollow when Toolbar is not set to Blog");return}var blog_id=_private.content_id;var blog_name=BL.Helper.GetBlogName(blog_id);$(_e).attr("disabled",true);BL.Blogs.Unfollow({blog_id:blog_id,success:function(ret){BL.Sidebar.RemoveBlog(blog_id);BL.Sidebar.LoadAll();$(".content-main > .alert[rel=blog_unfollow]").show().find("a").attr("data-blog-id",blog_id).end().find("[rel=blog_name]").html(blog_name)},error:function(){},complete:function(){$(_e).removeAttr("disabled")}})},
AutoChangeGroupTitle:function(obj,blog_id){if(BL.Sidebar.IsInGroup(blog_id)!==false)return this.ChangeGroupTitle(obj,LANG["changegroup"]);else return this.ChangeGroupTitle(obj,LANG["addgroup"])},ChangeGroupTitle:function(obj,group_name){obj.find('span[rel="group_name"]').html(group_name)},RenameGroupInMenu:function(obj,group_id,group_name){obj.find("a[data-group-id="+group_id+"]").html(group_name)},CreateGroupMenu:function(blog_id){var $blog_groups=$(".main-btn-toolbar .btn-group[data-toolbar-type=128]:first").clone();
$blog_groups.show().attr("data-blog-id",blog_id).find("a").attr("data-blog-id",blog_id).end().find("form").attr("data-blog-id",blog_id);this.AutoChangeGroupTitle($blog_groups,blog_id);return $blog_groups},CloseMenu:function(menu_id){$(".btn-group[data-toolbar-type="+menu_id+"]").removeClass("open").find("input").val("")},AddGroupToMenu:function(group_id,group_name_raw){var group_name=group_name_raw,menu_list=$("div.btn-group[data-toolbar-type=128] ul.dropdown-menu"),group_item='<li><a data-group-id="'+
group_id+'" data-func="ToolbarMove" href="#" class="handleclick">'+group_name+"</a></li>";if(menu_list.find("a[data-group-id="+group_id+"]").length>0){this.RenameGroupTitle(group_id,group_name_raw);return}menu_list.find("li").show();$(group_item).prependTo(menu_list)},RenameGroupTitle:function(group_id,group_name){$("li[data-group-id="+group_id+"] span[rel=group_name]").html(group_name)},Move:function(_e){var $this=$(_e),group_id=$this.attr("data-group-id"),group_name=$this.html(),blog_id=0,url="/group/change/";
this.CloseMenu(128);if($this.attr("data-blog-id"))blog_id=$this.attr("data-blog-id");else blog_id=_private.content_id;BL.Sidebar.AddGroup(group_id,group_name);BL.Sidebar.MoveBlog(blog_id,group_id);this.ChangeGroupTitle($this.parents(".btn-group:first"),group_name);BL.Helper.Ajax({url:url,data:{blog_id:blog_id,new_group_id:group_id}})},NewGroup:function(_e){var $this=$(_e),menu_id=128,blog_id=0,url="/group/new/",fields=BL.Helper.GetFormFields($this),group_name=fields.group_name,old_name=$this.parents(".btn-group:first").find('span[rel="group_name"]').html();
if($this.attr("data-blog-id"))blog_id=$this.attr("data-blog-id");else blog_id=_private.content_id;fields.blog_id=blog_id;this.ChangeGroupTitle($this.parents(".btn-group:first"),group_name);this.CloseMenu(menu_id);BL.Helper.Ajax({url:url,data:fields,success:function(ret){var group_id=ret.group_id;BL.Sidebar.AddGroup(group_id,group_name);BL.Sidebar.MoveBlog(blog_id,group_id);BL.Toolbar.RenameGroupInMenu($this.parents("ul:first"),group_id,group_name);BL.Toolbar.AddGroupToMenu(group_id,group_name)},error:function(e,
error,n,ret){BL.Toolbar.ChangeGroupTitle($this.parents(".btn-group:first"),old_name);alert(ret.message)}})},Country:function(_e){_private.num_page=1;var $this=$(_e),$country=$(".dropdown-menu [data-country-code]"),country=$this.attr("data-country-code"),category=$("#cur_cat_item").attr("data-cat"),url="/"+_private.content_page+"/"+_private.num_page+"/"+category+"/"+country;$country.attr("data-country-code",country).html($this.html());BL.HandleClick.LoadFromDropdown(url)},Category:function(_e){_private.num_page=
1;var $this=$(_e),$category=$("#cur_cat_item"),category=$this.attr("data-cat"),page=$this.attr("data-page"),country=$("#cur_country_item").attr("data-country-code"),url="/"+page+"/"+_private.num_page+"/"+category+"/"+country,menu_id=4;$category.attr("data-cat",category);$category.attr("value",$this.text());BL.HandleClick.LoadFromDropdown(url)},getContentData:function(){return{"type":_private.content_type,"id":_private.content_id,"page":_private.content_page,"num_page":_private.num_page,"category":$("#cur_cat_item").attr("data-cat"),
"country":$("#cur_country_item").attr("data-country-code")}},CheckUnread:function(_e){var $this=$(_e);var id=false;var elem=false;var unread=0;if($this.attr("data-blog-id"))id=$this.attr("data-blog-id");else id=_private.content_id;switch(_private.content_type){case "group":elem=$(".sidebar-nav").find('[data-group-id="'+id+'"]');unread=parseInt(elem.find('[rel="num_unread"]').html(),10);break;case "blog":elem=$(".sidebar-nav").find('[data-blog-id="'+id+'"]');unread=parseInt(elem.find('[rel="num_unread"]').html(),
10);break;case "all":$('.sidebar-nav > ul > li > a [rel="num_unread"]').each(function(){unread+=parseInt($(this).html(),10)});break}return unread},getToolbar:function(toolbar){return $(this.css_toolbars+"[data-toolbar-type="+toolbar+"]")},show:function(toolbar){this.getToolbar(toolbar).show()},hide:function(toolbar){this.getToolbar(toolbar).hide()},set:function(toolbar){if(!toolbar){$(this.css_toolbars).hide();$(".main-btn-toolbar").hide();return}$(".main-btn-toolbar").show();$(this.css_toolbars).each(function(i,
e){var type=$(e).data("toolbar-type");if(toolbar&type)$(e).show();else $(e).hide()})}}}();BL.Twitter=function(){return{DisconnectBlog:function(e,success,error){var blog_id=$(e).data("blog-id");var user_id=$(e).data("user-id");BL.Helper.Ajax({url:"/twitter/disconnectBlog",data:{blog_id:blog_id,user_id:user_id},success:success,error:error})},DisconnectUser:function(e,success,error){BL.Helper.Ajax({url:"/twitter/disconnectUser",data:{},success:success,error:error})},SignIn:function(url){BL.Helper.Ajax({url:"/twitter/sign_in",data:{callback_url:url},success:function(ret){if(typeof ret.oauth_token!==
"undefined")window.location.replace("https://api.twitter.com/oauth/authenticate?oauth_token="+ret.oauth_token)},error:function(e,error,n,ret){console.log(e)}})},PublishLast:function(e){var $this=$(e),blog_id=$this.attr("data-blog-id");$this.siblings(".message").text("");$this.siblings(".spinner").activity();var data={url:"/twitter/publishLast",data:{blog_id:blog_id},success:function(ret){console.log(ret);if(typeof ret[0]!="undefined"&&typeof ret[0].errors!="undefined"&&typeof ret[0].errors[0]!="undefined"){var message=
ret[0].errors[0].message;$this.siblings(".message").text(message)}},complete:function(){$this.siblings(".spinner").data("spinner").stop()},error:function(e,error,n,ret){if(e.statusText==="Internal Server Error")$this.siblings(".message").text("Please wait a few minutes before trying again soon.")}};BL.Helper.Ajax(data)}}}();
