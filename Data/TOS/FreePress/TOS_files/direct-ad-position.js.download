define(["jquery","underscore","partner/ad-position","state","admanager"],function(t,e,i,s,o){"use strict";var n=i.extend({initialize:function(e){e=t.extend({targeting:{},exclusion:[],subSection:s.getActivePageInfo().cst,slotType:"in"},e),i.prototype.initialize.call(this,e),"in"==e.slotType&&this.refreshPosition()},prefetchAd:function(){return this.subviews.adSlot?!1:(this.adSlotPlacement=this.getAdPlacement(),this.subviews.adSlot=o.getAdSlot(this.adSlotPlacement,this.options.targeting,this.options.exclusion,this.options.adSizes,this,this.options.slotType),!0)},setTargeting:function(t){this.options.targeting=t,this.subviews.adSlot&&this.subviews.adSlot.setTargeting(this.options.targeting)},destroy:function(){this.destroyAdSlot(),i.prototype.destroy.apply(this,arguments)},destroyAdSlot:function(){this.subviews.adSlot&&(this.subviews.adSlot.destroy(),this.subviews.adSlot=null)},setPageInfo:function(e){e.cst&&this.setSubSection(e.cst),this.setTargeting(t.extend(o.getPageAdTargeting(e),this.options.targeting))},setSubSection:function(t){this.options.subSection=t},refreshPosition:function(){this.adState="pending",this.subviews.adSlot&&this.adSlotPlacement!==this.getAdPlacement()&&(this.destroyAdPlacement(),this.destroyAdSlot()),this.prefetchAd()||(this.destroyAdPlacement(),this.subviews.adSlot.refresh())}});return n});
//# sourceMappingURL=direct-ad-position.js.map