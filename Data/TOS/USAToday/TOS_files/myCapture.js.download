define(["jquery","underscore","baseview","pubsub","utils"],function(t,e,a,i,n){"use strict";var r=a.extend({events:{"click .js-mycapture-btn":"mycaptureBtnClick"},initialize:function(e){e=t.extend({target:null},e),a.prototype.initialize.call(this,e)},mycaptureBtnClick:function(t){t.preventDefault(),this.options.target?t.currentTarget.classList.contains(this.options.target)&&this.handleClick(t):this.handleClick(t)},handleClick:function(e){i.trigger("uotrack","mycapturepurchase");var a=this.buildLink(t(e.currentTarget.parentElement).parent());window.open(a,"mycapture")},switchMyCaptureBtn:function(t){var e=t.$(".single-photo"),a=e.find(".js-mycapture-btn-small"),i=e.find(".js-mycapture-btn"),n=t.$(".js-caption-wrapper");e.hasClass("expandable-collapsed")?(a.hide(),i.show(),n.addClass("expandable-photo-caption-with-mycapture")):(i.hide(),a.show(),n.removeClass("expandable-photo-caption-with-mycapture"))},toggleSmallTag:function(t){this.$(".mycapture-small-btn").toggle(t)},buildLink:function(e){var a=this.getHost(),i=".mycapture.com/mycapture/remoteimage.asp?",r=e.parent().find("img"),s={image:r.attr("data-mycapture-sm-src"),notes:r.attr("data-mycapture-src"),caption:t.trim(e.find(".js-caption").text()),credit:t.trim(e.find(".credit").text()),backtext:"Back to Site",backurl:location.href,pricingsheetid:n.getNested(window.site_vars,"THIRDPARTYAPI","MYCAPTURE","PRICING_SHEET_ID")||""};return"http://"+a+i+t.param(s)},getHost:function(){return n.getNested(window.site_vars,"THIRDPARTYAPI","MYCAPTURE","SITE_OVERRIDE")||n.getNested(window.site_vars,"site_key")}});return r});
//# sourceMappingURL=myCapture.js.map