//
//  Copyright 2017 mParticle, Inc.
//
//  Licensed under the Apache License, Version 2.0 (the "License");
//  you may not use this file except in compliance with the License.
//  You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
//  Unless required by applicable law or agreed to in writing, software
//  distributed under the License is distributed on an "AS IS" BASIS,
//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//  See the License for the specific language governing permissions and
//  limitations under the License.
//
//  Uses portions of code from jQuery
//  jQuery v1.10.2 | (c) 2005, 2013 jQuery Foundation, Inc. | jquery.org/license

window.mParticle = window.mParticle || {};
window.mParticle.config = window.mParticle.config || {};
window.mParticle.config.serviceUrl = 'jssdk.mparticle.com/v1/JS/';
window.mParticle.config.secureServiceUrl = 'jssdks.mparticle.com/v1/JS/';
window.mParticle.config.appName = "Bleacher Report";
(function(n){function lt(){var e,f,r,i,o,s,t=arguments[0]||{},u=1,c=arguments.length,h=!1,n={hasOwn:Object.prototype.hasOwnProperty,class2type:{},type:function(t){return t==null?String(t):n.class2type[Object.prototype.toString.call(t)]||"object"},isPlainObject:function(t){if(!t||n.type(t)!=="object"||t.nodeType||n.isWindow(t))return!1;try{if(t.constructor&&!n.hasOwn.call(t,"constructor")&&!n.hasOwn.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}for(var i in t);return i===undefined||n.hasOwn.call(t,i)},isArray:Array.isArray||function(t){return n.type(t)==="array"},isFunction:function(t){return n.type(t)==="function"},isWindow:function(n){return n!=null&&n==n.window}};for(typeof t=="boolean"&&(h=t,t=arguments[1]||{},u=2),typeof t=="object"||n.isFunction(t)||(t={}),c===u&&(t=this,--u);u<c;u++)if((e=arguments[u])!=null)for(f in e)(r=t[f],i=e[f],t!==i)&&(h&&i&&(n.isPlainObject(i)||(o=n.isArray(i)))?(o?(o=!1,s=r&&n.isArray(r)?r:[]):s=r&&n.isPlainObject(r)?r:{},t[f]=lt(h,s,i)):i!==undefined&&(t[f]=i));return t}function lr(i){var r;try{r=new n.XMLHttpRequest}catch(u){t("Error creating XMLHttpRequest object.")}if(r&&i&&"withCredentials"in r)r.onreadystatechange=i;else if(typeof n.XDomainRequest!="undefined"){t("Creating XDomainRequest object");try{r=new n.XDomainRequest;r.onload=i}catch(u){t("Error creating XDomainRequest object")}}return r}function ar(){return eu+(n.location.protocol==="https:"?er:fr)+kt}function ri(n,t){var i=0,r;if(Array.prototype.indexOf)return n.indexOf(t,0)>=0;for(r=n.length;i<r;i++)if(i in n&&n[i]===t)return!0}function b(r,u){if(!i.useNativeSdk)return!1;if(n.mParticleAndroid&&n.mParticleAndroid.hasOwnProperty(r))return t(h.SendAndroid+r),n.mParticleAndroid[r](u),!0;if(n.mParticle.isIOS){t(h.SendIOS+r);var f=document.createElement("IFRAME");return f.setAttribute("src","mp-sdk://"+r+"/"+u),document.documentElement.appendChild(f),f.parentNode.removeChild(f),f=null,!0}return!1}function yt(){return i.useNativeSdk?n.mParticleAndroid||n.mParticle.isIOS?!0:!1:!1}function yi(n){var i,r=function(){i.readyState===4&&(t("Received "+i.statusText+" from server"),yu(i.responseText))};if(t(h.SendBegin),!n){t(p.EventEmpty);return}if(!b(k.LogEvent,JSON.stringify(n))&&(t(h.SendHttp),i=lr(r),i))try{i.open("post",ar()+"/Events");i.send(JSON.stringify(bu(n)));n.EventName!==e.AppStateTransition&&au(n)}catch(u){t("Error sending event to mParticle servers. "+u)}}function lu(n,i){var r,u;if(n&&n.isVisible&&(r=lr(),u=JSON.stringify({mid:n.id,n:i.EventName,attrs:i.EventAttributes,sdk:i.SDKVersion,dt:i.EventDataType,et:i.EventCategory,dbg:i.Debug,ct:i.Timestamp,eec:i.ExpandedEventCount}),r))try{r.open("post",ar()+"/Forwarding");r.send(u)}catch(f){t("Error sending forwarding stats to mParticle servers.")}}function nr(n,i){f.length&&f.forEach(function(r){var f=r[n],u;if(f)try{u=r[n](i);u&&t(u)}catch(e){t(e)}})}function au(n){var r,u,h,p=function(n,t){var r,i;if(n.UserAttributes)for(i in n.UserAttributes)n.UserAttributes.hasOwnProperty(i)&&(r=ot(i),ri(t,r)&&delete n.UserAttributes[i])},w=function(n,t){var r,u,f=!1,i;try{if(n.UserAttributes&&rt(n.UserAttributes)&&Object.keys(n.UserAttributes).length&&t&&rt(t)&&Object.keys(t).length)for(i in n.UserAttributes)if(n.UserAttributes.hasOwnProperty(i)&&(r=ot(i),u=ot(n.UserAttributes[i]),r===t.userAttributeName&&u===t.userAttributeValue)){f=!0;break}return f?t.includeOnMatch?!0:!1:t.includeOnMatch?!1:!0}catch(e){return!0}},b=function(n,t){n.UserIdentities&&n.UserIdentities.length&&n.UserIdentities.forEach(function(i,r){ri(t,i.Type)&&(n.UserIdentities.splice(r,1),r>0&&r--)})},v=function(n,t){var r,i;if(t)for(i in n.EventAttributes)n.EventAttributes.hasOwnProperty(i)&&(r=ot(n.EventCategory+n.EventName+i),ri(t,r)&&delete n.EventAttributes[i])},o=function(n,t){return n&&n.length&&ri(n,t)?!0:!1},k=[e.PageEvent,e.PageView,e.Commerce],i,s,c,l,y,a;if(!yt()&&f)for(u=ot(n.EventCategory+n.EventName),h=ot(n.EventCategory),i=0;i<f.length;i++){if(k.indexOf(n.EventDataType)>-1&&f[i].filteringEventAttributeValue&&f[i].filteringEventAttributeValue.eventAttributeName&&f[i].filteringEventAttributeValue.eventAttributeValue){if(s=null,n.EventAttributes)for(c in n.EventAttributes){u=ot(c);u===f[i].filteringEventAttributeValue.eventAttributeName&&(s={name:u,value:ot(n.EventAttributes[c])});break}if(l=s!==null&&s.value===f[i].filteringEventAttributeValue.eventAttributeValue,y=f[i].filteringEventAttributeValue.includeOnMatch===!0?l:!l,!y)continue}if(r={},r=lt(!0,r,n),n.EventDataType===e.PageEvent&&(o(f[i].eventNameFilters,u)||o(f[i].eventTypeFilters,h)))continue;else if(n.EventDataType===e.Commerce&&o(f[i].eventTypeFilters,h))continue;else if(n.EventDataType===e.PageView&&o(f[i].screenNameFilters,u))continue;if(r.EventAttributes&&(n.EventDataType===e.PageEvent?v(r,f[i].attributeFilters):n.EventDataType===e.PageView&&v(r,f[i].pageViewAttributeFilters)),b(r,f[i].userIdentityFilters),p(r,f[i].userAttributeFilters),f[i].filteringUserAttributeValue&&Object.keys(f[i].filteringUserAttributeValue).length&&!w(r,f[i].filteringUserAttributeValue))break;t("Sending message to forwarder: "+f[i].name);a=f[i].process(r);a&&t(a)}}function vu(){!yt()&&f&&(f.sort(function(n,t){return n.settings.PriorityValue=n.settings.PriorityValue||0,t.settings.PriorityValue=t.settings.PriorityValue||0,-1*(n.settings.PriorityValue-t.settings.PriorityValue)}),f.forEach(function(n){n.init(n.settings,lu,!1,null,s,g,dt,ci,hr,hi)}))}function yu(n){var o=new Date,i,e=null,r,f;if(n)try{if(t("Parsing response from server"),i=JSON.parse(n),!si&&ni&&(e=ni),ni=i.mpid?i.mpid:null,vt.attemptCookieSync(e,ni),i&&i.Store){t("Parsed store from response, updating local settings");ut={};for(r in i.Store)r==="uid"&&i.Store.hasOwnProperty(r)&&(f=i.Store[r],!f.Value||new Date(f.Expires)<o?ut.hasOwnProperty(r)&&delete ut[r]:ut[r]=f);u.update()}}catch(s){t("Error parsing JSON response from server: "+s.name)}}function pu(){vi||"geolocation"in navigator&&(sr=navigator.geolocation.watchPosition(function(n){ai={lat:n.coords.latitude,lng:n.coords.longitude}}),vi=!0)}function vr(){vi&&(navigator.geolocation.clearWatch(sr),ai=null,vi=!1)}function wu(n,t){var r=[],i;t.flags={};for(i in n.CustomFlags)r=[],n.CustomFlags.hasOwnProperty(i)&&(Array.isArray(n.CustomFlags[i])?n.CustomFlags[i].forEach(function(n){(typeof n=="number"||typeof n=="string"||typeof n=="boolean")&&r.push(n.toString())}):(typeof n.CustomFlags[i]=="number"||typeof n.CustomFlags[i]=="string"||typeof n.CustomFlags[i]=="boolean")&&r.push(n.CustomFlags[i].toString()),r.length&&(t.flags[i]=r))}function bu(i){var u,r;return i.UserIdentities.length&&(u=i.UserIdentities.map(function(n){if(st.isValid(n.Type))return n;t("IdentityType is not valid. Please ensure you are using a valid IdentityType from http://docs.mparticle.com/#user-identity")})),r={n:i.EventName,et:i.EventCategory,ua:i.UserAttributes,sa:i.SessionAttributes,ui:u,str:i.Store,attrs:i.EventAttributes,sdk:i.SDKVersion,sid:i.SessionId,sl:i.SessionLength,dt:i.EventDataType,dbg:i.Debug,ct:i.Timestamp,lc:i.Location,o:i.OptOut,eec:i.ExpandedEventCount,av:i.AppVersion,cgid:i.ClientGeneratedId,das:i.DeviceId},i.EventDataType===e.AppStateTransition&&(r.fr=si,r.iu=!1,r.at=te.AppInit,r.lr=n.location.href||null,r.attrs=null),i.CustomFlags&&wu(i,r),r.pb=ku(),i.EventDataType===e.Commerce?(r.cu=gi,i.ShoppingCart&&(r.sc={pl:tr(i.ShoppingCart.ProductList)}),i.ProductAction?r.pd={an:i.ProductAction.ProductActionType,cs:at(i.ProductAction.CheckoutStep),co:i.ProductAction.CheckoutOptions,pl:tr(i.ProductAction.ProductList),ti:i.ProductAction.TransactionId,ta:i.ProductAction.Affiliation,tcc:i.ProductAction.CouponCode,tr:at(i.ProductAction.TotalAmount),ts:at(i.ProductAction.ShippingAmount),tt:at(i.ProductAction.TaxAmount)}:i.PromotionAction?r.pm={an:i.PromotionAction.PromotionActionType,pl:i.PromotionAction.PromotionList.map(function(n){return{id:n.Id,nm:n.Name,cr:n.Creative,ps:n.Position?n.Position:0}})}:i.ProductImpressions&&(r.pi=i.ProductImpressions.map(function(n){return{pil:n.ProductImpressionList,pl:tr(n.ProductList)}}))):i.EventDataType===e.Profile&&(r.pet=i.ProfileMessageType),r}function tr(n){return n?n.map(function(n){return yr(n)}):[]}function yr(n){return{id:ui(n.Sku),nm:ui(n.Name),pr:at(n.Price),qt:at(n.Quantity),br:ui(n.Brand),va:ui(n.Variant),ca:ui(n.Category),ps:at(n.Position),cc:ui(n.CouponCode),tpa:at(n.TotalAmount),attrs:n.Attributes}}function ui(n){return v.isStringOrNumber(n)?n:null}function at(n){if(isNaN(n)||!isFinite(n))return 0;var t=parseFloat(n);return isNaN(t)?0:t}function ku(){var i={},n;for(var t in a)a.hasOwnProperty(t)&&(n=a[t].map(function(n){return yr(n)}),i[t]=yt()?{ProductList:n}:{pl:n});return i}function pr(n,t){t.TransactionId=n.Id;t.Affiliation=n.Affiliation;t.CouponCode=n.CouponCode;t.TotalAmount=n.Revenue;t.ShippingAmount=n.Shipping;t.TaxAmount=n.Tax}function pt(n,t,r,u,f){var o,h=n===e.OptOut?!wt:null;return(r=li(r),y||n==e.OptOut)?(n!==e.SessionEnd&&(nt=new Date),o={EventName:t||n,EventCategory:u,UserAttributes:s,SessionAttributes:ct,UserIdentities:g,Store:ut,EventAttributes:r,SDKVersion:or,SessionId:y,EventDataType:n,Debug:i.isSandbox,Location:ai,OptOut:h,ProductBags:a,ExpandedEventCount:0,CustomFlags:f,AppVersion:dt,ClientGeneratedId:hi,DeviceId:bt},n===e.SessionEnd&&(o.SessionLength=nt.getTime()-ft.getTime()),o.Timestamp=nt.getTime(),o):null}function pi(n){switch(n){case r.AddToCart:return"AddToCart";case r.AddToWishlist:return"AddToWishlist";case r.Checkout:return"Checkout";case r.CheckoutOption:return"CheckoutOption";case r.Click:return"Click";case r.Purchase:return"Purchase";case r.Refund:return"Refund";case r.RemoveFromCart:return"RemoveFromCart";case r.RemoveFromWishlist:return"RemoveFromWishlist";case r.ViewDetail:return"ViewDetail";case r.Unknown:default:return"Unknown"}}function du(n){switch(n){case d.PromotionClick:return"PromotionClick";case d.PromotionView:return"PromotionView";default:return"Unknown"}}function gu(n){switch(n){case r.AddToCart:return o.ProductAddToCart;case r.AddToWishlist:return o.ProductAddToWishlist;case r.Checkout:return o.ProductCheckout;case r.CheckoutOption:return o.ProductCheckoutOption;case r.Click:return o.ProductClick;case r.Purchase:return o.ProductPurchase;case r.Refund:return o.ProductRefund;case r.RemoveFromCart:return o.ProductRemoveFromCart;case r.RemoveFromWishlist:return o.ProductRemoveFromWishlist;case r.Unknown:return c.Unknown;case r.ViewDetail:return o.ProductViewDetail;default:return t("Could not convert product action type "+n+" to event type"),null}}function nf(n){switch(n){case d.PromotionClick:return o.PromotionClick;case d.PromotionView:return o.PromotionView;default:return t("Could not convert promotion action type "+n+" to event type"),null}}function tf(n){var t=[],u,i,o,f;return n.ProductAction?(u=!1,n.ProductAction.ProductActionType===r.Purchase||n.ProductAction.ProductActionType===r.Refund?(i=lt(!1,{},n.EventAttributes),i["Product Count"]=n.ProductAction.ProductList?n.ProductAction.ProductList.length:0,kr(i,n.ProductAction),n.CurrencyCode&&(i["Currency Code"]=n.CurrencyCode),o=pt(e.PageEvent,wi(r.getExpansionName(n.ProductAction.ProductActionType),!0),i,c.Transaction),t.push(o)):u=!0,f=n.ProductAction.ProductList,!f)?t:(f.forEach(function(i){var f=lt(!1,n.EventAttributes,i.Attributes),o;u?kr(f,n.ProductAction):br(f,n.ProductAction);wr(f,i);o=pt(e.PageEvent,wi(r.getExpansionName(n.ProductAction.ProductActionType)),f,c.Transaction);t.push(o)}),t):t}function wr(n,t){t.CouponCode&&(n["Coupon Code"]=t.CouponCode);t.Brand&&(n.Brand=t.Brand);t.Category&&(n.Category=t.Category);t.Name&&(n.Name=t.Name);t.Sku&&(n.Id=t.Sku);t.Price&&(n["Item Price"]=t.Price);t.Quantity&&(n.Quantity=t.Quantity);t.Position&&(n.Position=t.Position);t.Variant&&(n.Variant=t.Variant);n["Total Product Amount"]=t.TotalAmount||0}function br(n,t){t.TransactionId&&(n["Transaction Id"]=t.TransactionId)}function kr(n,t){br(n,t);t.Affiliation&&(n.Affiliation=t.Affiliation);t.CouponCode&&(n["Coupon Code"]=t.CouponCode);t.TotalAmount&&(n["Total Amount"]=t.TotalAmount);t.ShippingAmount&&(n["Shipping Amount"]=t.ShippingAmount);t.TaxAmount&&(n["Tax Amount"]=t.TaxAmount);t.CheckoutOptions&&(n["Checkout Options"]=t.CheckoutOptions);t.CheckoutStep&&(n["Checkout Step"]=t.CheckoutStep)}function rf(n){var t=[],i;return n.PromotionAction?(i=n.PromotionAction.PromotionList,i.forEach(function(i){var r=lt(!1,{},n.EventAttributes),u;uf(r,i);u=pt(e.PageEvent,wi(d.getExpansionName(n.PromotionAction.PromotionActionType)),r,c.Transaction);t.push(u)}),t):t}function wi(n,t){return"eCommerce - "+n+" - "+(t?"Total":"Item")}function uf(n,t){t.Id&&(n.Id=t.Id);t.Creative&&(n.Creative=t.Creative);t.Name&&(n.Name=t.Name);t.Position&&(n.Position=t.Position)}function ff(n){var t=[];return n.ProductImpressions?(n.ProductImpressions.forEach(function(i){i.ProductList&&i.ProductList.forEach(function(r){var u=lt(!1,{},n.EventAttributes),f,o;if(r.Attributes)for(f in r.Attributes)u[f]=r.Attributes[f];wr(u,r);i.ProductImpressionList&&(u["Product Impression List"]=i.ProductImpressionList);o=pt(e.PageEvent,wi("Impression"),u,c.Transaction);t.push(o)})}),t):t}function ef(n){return n?tf(n).concat(rf(n)).concat(ff(n)):null}function fi(){var n;return(t(h.StartingLogCommerceEvent),tt())?(n=pt(e.Commerce),n.EventName="eCommerce - ",n.CurrencyCode=gi,n.ShoppingCart={ProductList:w},n):(t(h.AbandonLogEvent),null)}function of(n,t,i){var u=fi();u&&(u.EventName+=pi(r.Checkout),u.EventCategory=o.ProductCheckout,u.ProductAction={ProductActionType:r.Checkout,CheckoutStep:n,CheckoutOptions:t,ProductList:u.ShoppingCart.ProductList},ei(u,i))}function ir(n,t,i){var r=fi();r&&(r.EventCategory=gu(n),r.EventName+=pi(n),r.ProductAction={ProductActionType:n,ProductList:Array.isArray(t)?t:[t]},ei(r,i))}function sf(n,t,i){var u=fi();u&&(u.EventName+=pi(r.Purchase),u.EventCategory=o.ProductPurchase,u.ProductAction={ProductActionType:r.Purchase},u.ProductAction.ProductList=dr(u,t),pr(n,u.ProductAction),ei(u,i))}function hf(n,i,u){if(!n){t(p.TransactionRequired);return}var f=fi();f&&(f.EventName+=pi(r.Refund),f.EventCategory=o.ProductRefund,f.ProductAction={ProductActionType:r.Refund},f.ProductAction.ProductList=dr(f,i),pr(n,f.ProductAction),ei(f,u))}function dr(n,t){return t?Array.isArray(t)?t:[t]:n.ShoppingCart.ProductList}function cf(n,t,i){var r=fi();r&&(r.EventName+=du(n),r.EventCategory=nf(n),r.PromotionAction={PromotionActionType:n,PromotionList:[t]},ei(r,i))}function lf(n,t){var i=fi();i&&(i.EventName+="Impression",i.EventCategory=o.ProductImpression,Array.isArray(n)||(n=[n]),i.ProductImpressions=[],n.forEach(function(n){i.ProductImpressions.push({ProductImpressionList:n.Name,ProductList:Array.isArray(n.Product)?n.Product:[n.Product]})}),ei(i,t))}function gr(){var n=u.getCookie()||u.getLocalStorage();!y&&n&&(n.sid?y=n.sid:i.startNewSession())}function af(){t(h.StartingLogOptOut);yi(pt(e.OptOut,null,null,c.Other))}function vf(){et(e.AppStateTransition)}function et(n,i,r,f,e){t(h.StartingLogEvent+": "+i);tt()?(gr(),r&&(r=li(r)),yi(pt(n,i,r,f,e)),u.update()):t(h.AbandonLogEvent)}function ei(n,i){t(h.StartingLogCommerceEvent);i=li(i);tt()?(gr(),yt()&&(n.ShoppingCart={},n.ProductBags={}),i&&(n.EventAttributes=i),yi(n),u.update()):t(h.AbandonLogEvent)}function yf(){var n;if(t(h.StartingLogEvent+": logOut"),tt())return n=pt(e.Profile),n.ProfileMessageType=ne.Logout,yi(n),u.update(),n;t(h.AbandonLogEvent)}function nu(n){return decodeURIComponent(n.replace(ou," "))}function tu(n){return n.indexOf('"')===0&&(n=n.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")),n}function pf(t){return n.crypto&&n.crypto.getRandomValues?(t^n.crypto.getRandomValues(new Uint8Array(1))[0]%16>>t/4).toString(16):(t^Math.random()*16>>t/4).toString(16)}function gt(n){return n?pf(n):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,gt)}function t(t){i.isDebug&&n.console&&n.console.log&&n.console.log(t)}function wf(n){for(var t in c)if(c.hasOwnProperty(t)&&c[t]===n)return!0;return!1}function rr(n){t(h.LoadingConfig);for(var i in ht)ht.hasOwnProperty(i)&&(l[i]=ht[i]),n.hasOwnProperty(i)&&(l[i]=n[i])}function tt(){return wt&&(kt||yt())?!0:!1}function rt(n){var t=Object.prototype.toString.call(n);return t==="[object Object]"||t==="[object Error]"}function iu(i,r,u,f,o){var h=[],v=function(i){var r=function(){s.href?n.location.href=s.href:s.submit&&s.submit()};t("DOM event triggered, handling event");et(e.PageEvent,typeof u=="function"?u(s):u,typeof f=="function"?f(s):f,o||c.Other);(s.href&&s.target!=="_blank"||s.submit)&&(i.preventDefault?i.preventDefault():i.returnValue=!1,setTimeout(r,l.Timeout))},s,a;if(!r){t("Can't bind event, selector is required");return}if(typeof r=="string"?h=document.querySelectorAll(r):r.nodeType&&(h=[r]),h.length)for(t("Found "+h.length+" element"+(h.length>1?"s":"")+", attaching event handlers"),a=0;a<h.length;a++)s=h[a],s.addEventListener?s.addEventListener(i,v,!1):s.attachEvent?s.attachEvent("on"+i,v):s["on"+i]=v;else t("No elements found")}function ot(n){var t=0,i=0,r;if(!n)return null;if(n=n.toString().toLowerCase(),Array.prototype.reduce)return n.split("").reduce(function(n,t){return n=(n<<5)-n+t.charCodeAt(0),n&n},0);if(n.length===0)return t;for(i=0;i<n.length;i++)r=n.charCodeAt(i),t=(t<<5)-t+r,t=t&t;return t}function bf(n,i,r,u,f,e,o,s,h,c){return(c=li(c),typeof n!="string")?(t("Name is required when creating a product"),null):v.isStringOrNumber(i)?v.isStringOrNumber(r)?(u||(u=1),{Name:n,Sku:i,Price:r,Quantity:u,Brand:o,Variant:f,Category:e,Position:s,CouponCode:h,TotalAmount:u*r,Attributes:c}):(t("Price is required when creating a product, and must be a string or a number"),null):(t("SKU is required when creating a product, and must be a string or a number"),null)}function kf(n,i,r,u){return v.isStringOrNumber(n)?{Id:n,Creative:i,Name:r,Position:u}:(t(p.PromotionIdRequired),null)}function df(n,i){return typeof n!="string"?(t("Name is required when creating an impression."),null):i?{Name:n,Product:i}:(t("Product is required when creating an impression."),null)}function gf(n,i,r,u,f,e){return v.isStringOrNumber(n)?{Id:n,Affiliation:i,CouponCode:r,Revenue:u,Shipping:f,Tax:e}:(t(p.TransactionIdRequired),null)}function ru(n,i){f.length&&f.forEach(function(r){if(r.setUserAttribute&&r.userAttributeFilters&&!ri(r.userAttributeFilters,ot(n)))try{var u=r.setUserAttribute(n,i);u&&t(u)}catch(f){t(f)}})}function bi(n,t){if(t&&n)for(var i in n)if(n.hasOwnProperty(i)&&i.toLowerCase()===t.toLowerCase())return i;return null}function li(n){var r,i;if(!n||!rt(n))return null;r={};for(i in n)n.hasOwnProperty(i)&&v.isValidAttributeValue(n[i])?r[i]=n[i]:t("The attribute key of "+i+" must be a string, number, boolean, or null.");return r}function ie(){return bt}var fr="jssdk.mparticle.com/v1/JS/",er="jssdks.mparticle.com/v1/JS/",eu=n.location.protocol+"//",or="1.15.8",wt=!0,ou=/\+/g,ct={},s={},g=[],oi=[],f=[],y,si,hi,bt,ni,kt,ki=[],ut=null,nt,ft,ti={},ai,vi=!1,sr,ii=[],di=!1,a={},w=[],gi=null,dt=null,ci=null,hr=null,cr,su="$MethodName",hu="LogLTVIncrease",cu="$Amount",u,o,st,d,i;Array.prototype.forEach||(Array.prototype.forEach=function(n,t){var u,i,r,f,e;if(this==null)throw new TypeError(" this is null or not defined");if(r=Object(this),f=r.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(arguments.length>1&&(u=t),i=0;i<f;)i in r&&(e=r[i],n.call(u,e,i,r)),i++});Array.prototype.map||(Array.prototype.map=function(n,t){var e,u,i,r,f,o,s;if(this===null)throw new TypeError(" this is null or not defined");if(r=Object(this),f=r.length>>>0,typeof n!="function")throw new TypeError(n+" is not a function");for(arguments.length>1&&(e=t),u=new Array(f),i=0;i<f;)i in r&&(o=r[i],s=n.call(e,o,i,r),u[i]=s),i++;return u});Array.prototype.filter||(Array.prototype.filter=function(n){"use strict";var i,f,r,e,t,u;if(this===void 0||this===null)throw new TypeError;if(i=Object(this),f=i.length>>>0,typeof n!="function")throw new TypeError;for(r=[],e=arguments.length>=2?arguments[1]:void 0,t=0;t<f;t++)t in i&&(u=i[t],n.call(e,u,t,i)&&r.push(u));return r});Array.isArray||(Array.prototype.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"});u={isLocalStorageAvailable:null,initializeStorage:function(){var e,r,t,f;this.isLocalStorageAvailable=u.determineLocalStorageAvailability();this.isLocalStorageAvailable?(r=this.getLocalStorage(),t=this.getCookie(),e=n.localStorage,i.useCookieStorage?(r?(f=t?lt(!1,r,JSON.parse(t)):r,e.removeItem(ht.LocalStorageNameV3)):t&&(f=JSON.parse(t)),this.storeDataInMemory(f)):t?(f=r?lt(!1,r,JSON.parse(t)):JSON.parse(t),this.storeDataInMemory(f),this.expireCookies(l.CookieNameV3)):this.storeDataInMemory(r)):this.storeDataInMemory(JSON.parse(this.getCookie()));this.update()},getCookieDomain:function(){if(l.CookieDomain)return l.CookieDomain;var n=this.getDomain(document,location.hostname);return n===""?"":"."+n},update:function(){if(i.useCookieStorage||!this.isLocalStorageAvailable){var f=new Date,e=l.CookieNameV3,o=this.convertInMemoryDataForCookie(),s=new Date(f.getTime()+l.CookieExpiration*864e5).toGMTString(),r,u=this.getCookieDomain();r=u===""?"":";domain="+u;t(h.CookieSet);n.document.cookie=encodeURIComponent(e)+"="+this.encodeCookies(o)+";expires="+s+";path=/"+r}this.setLocalStorage()},determineLocalStorageAvailability:function(){var t,i;try{return(t=n.localStorage).setItem("mparticle","test"),i=t.getItem("mparticle")==="test",t.removeItem("mparticle"),i&&t?!0:!1}catch(r){return!1}},convertInMemoryDataForCookie:function(){var n={sid:y,ie:wt,sa:ct,ua:s,ui:g,ss:ut,dt:kt,les:nt?nt.getTime():null,ssd:ft?ft.getTime():null,av:dt,cgid:hi,das:bt,csd:ti,mpid:ni};for(var t in n)n.hasOwnProperty(t)&&(!n[t]||typeof n[t]=="string"&&n[t].length===0||rt(n[t])&&Object.keys(n[t]).length===0||Array.isArray(n[t])&&n[t].length===0)&&delete n[t];return JSON.stringify(n)},convertInMemoryDataForLocalStorage:function(){var n={cp:w.length<=i.maxProducts?w:w.slice(0,i.maxProducts),pb:{}};for(var t in a)n.pb[t]=a[t].length>i.maxProducts?a[t].slice(0,i.maxProducts):a[t];return n.cp.length===0&&delete n.cp,Object.keys(n.pb).length===0&&delete n.pb,n},setLocalStorage:function(){var u=l.LocalStorageNameV3,r=this.convertInMemoryDataForLocalStorage();if(i.useCookieStorage||(r=lt(!0,{},r,JSON.parse(this.convertInMemoryDataForCookie()))),rt(r))try{n.localStorage.setItem(encodeURIComponent(u),this.encodeCookies(JSON.stringify(r)))}catch(f){t("Error with setting localStorage item.")}},getLocalStorage:function(){var u=l.LocalStorageNameV3,t=n.localStorage.getItem(encodeURIComponent(u)),r={},i;if(t){t=JSON.parse(this.decodeCookies(t));for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i])}return Object.keys(r).length?r:null},storeDataInMemory:function(n){try{n?(y=n.sid||n.SessionId||y,wt=typeof n.ie!="undefined"?n.ie:n.IsEnabled||wt,ct=n.sa||n.SessionAttributes||ct,s=n.ua||n.UserAttributes||s,g=n.ui||n.UserIdentities||g,ut=n.ss||n.ServerSettings||ut,kt=n.dt||n.DeveloperToken||kt,hi=n.cgid||gt(),bt=n.das||null,ni=n.mpid||null,w=n.cp||w||[],a=n.pb||a||{},n.les?nt=new Date(n.les):n.LastEventSent&&(nt=new Date(n.LastEventSent)),ft=n.ssd?new Date(n.ssd):new Date,n.csd&&(ti=n.csd)):(hi=gt(),t(h.CookieNotFound))}catch(i){t(p.CookieParseError)}},retrieveDeviceId:function(){return bt?bt:this.parseDeviceId(ut)},parseDeviceId:function(n){try{var t={},i;return n&&n.uid&&n.uid.Value&&(n.uid.Value.split("&").forEach(function(n){i=n.split("=");t[i[0]]=i[1]}),t.g)?t.g:gt()}catch(r){return gt()}},expireCookies:function(n){var t=new Date,i,u,r;t.setTime(t.getTime()-864e5);i="; expires="+t.toUTCString();document.cookie=n+"="+i+"; path=/";r=this.getCookieDomain();u=r===""?"":";domain="+r;document.cookie=n+"="+i+"; path=/"+u},getCookie:function(){var f=n.document.cookie.split("; "),e=l.CookieNameV3,r,i,o,u,s,c;for(t(h.CookieSearch),i=0,o=f.length;i<o;i++)u=f[i].split("="),s=u.shift(),c=u.join("="),e&&e===s&&(r=this.decodeCookies(tu(c)));return r?(t(h.CookieFound),r):null},encodeCookies:function(n){n=u.convertUIFromArrayToObject(JSON.parse(n));for(var t in n)n.hasOwnProperty(t)&&(fu[t]?Object.keys(n[t]).length?n[t]=it.encode(JSON.stringify(n[t])):delete n[t]:t==="ie"&&(n[t]=n[t]?1:0));return u.replaceCommasWithPipes(u.replaceQuotesWithApostrophes(JSON.stringify(n)))},decodeCookies:function(n){var i,t,r;try{if(n=this.replacePipesWithCommas(this.replaceApostrophesWithQuotes(n)),i=[],n=JSON.parse(n),rt(n)&&Object.keys(n).length){for(t in n)if(n.hasOwnProperty(t))if(fu[t])if(t==="cp"&&Array.isArray(n[t])||t==="pb"&&rt(n[t]))continue;else n[t]=JSON.parse(it.decode(n[t]));else t==="ie"&&(n[t]=Boolean(n[t]));if(n.ui&&rt(n.ui)){for(r in n.ui)n.ui.hasOwnProperty(r)&&i.push({Identity:n.ui[r],Type:at(r)});n.ui=i.length?i:[]}}}catch(u){n={}}return JSON.stringify(n)},getDomain:function(n,t){for(var r,u="mptest=cookie",f=t.split("."),i=f.length-1;i>=0;i--)if(r=f.slice(i).join("."),n.cookie=u+";domain=."+r+";",n.cookie.indexOf(u)>-1)return n.cookie=u.split("=")[0]+"=;domain=."+r+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",r;return""},migratePersistence:function(){this.migrateCookies();this.migrateLocalStorage()},migrateCookies:function(){function w(i,r){y=new Date;p=new Date(y.getTime()+l.CookieExpiration*864e5).toGMTString();s=u.getCookieDomain();c=s===""?"":";domain="+s;t(h.CookieSet);n.document.cookie=l.CookieNameV3+"="+i+";expires="+p+";path=/"+c;r&&u.expireCookies(r)}var a=n.document.cookie.split("; "),i,f,v,o,r,e,y,p,s,c;for(t(h.CookieSearch),f=0,v=a.length;f<v;f++)if(o=a[f].split("="),r=nu(o.shift()),e=nu(o.join("=")),i,l.CookieNameV3===r){e.indexOf('"')!==-1&&(i=u.replaceQuotesWithApostrophes(e),w(i));break}else if(l.CookieName===r||l.CookieNameV2===r){i=u.encodeCookies(tu(e));w(i,r);break}},migrateLocalStorage:function(){function o(i){try{n.localStorage.setItem(encodeURIComponent(l.LocalStorageNameV3),u.encodeCookies(i))}catch(r){t("Error with setting localStorage item.")}}var f=l.LocalStorageNameV3,r=l.LocalStorageName,e=n.localStorage.getItem(f),i;e||(i=JSON.parse(decodeURIComponent(n.localStorage.getItem(r))),rt(i)&&Object.keys(i).length&&o(JSON.stringify(i),r),n.localStorage.removeItem(encodeURIComponent(r)))},replaceCommasWithPipes:function(n){return n.replace(/,/g,"|")},replacePipesWithCommas:function(n){return n.replace(/\|/g,",")},replaceApostrophesWithQuotes:function(n){return n.replace(/\'/g,'"')},replaceQuotesWithApostrophes:function(n){return n.replace(/\"/g,"'")},convertUIFromArrayToObject:function(n){return n&&n.ui&&Array.isArray(n.ui)&&(n.ui=n.ui.reduce(function(n,t){return t.hasOwnProperty("Identity")&&v.isStringOrNumber(t.Identity)&&(n[t.Type]=t.Identity),n},{})),n}};var it={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(i){try{if(n.btoa&&n.atob)return n.btoa(i)}catch(r){t("Error encoding cookie values into Base64:"+r)}return it._encode(i)},_encode:function(n){var f="",e,t,i,s,h,o,r,u=0;for(n=uu.encode(n);u<n.length;)e=n.charCodeAt(u++),t=n.charCodeAt(u++),i=n.charCodeAt(u++),s=e>>2,h=(e&3)<<4|t>>4,o=(t&15)<<2|i>>6,r=i&63,isNaN(t)?o=r=64:isNaN(i)&&(r=64),f=f+it._keyStr.charAt(s)+it._keyStr.charAt(h)+it._keyStr.charAt(o)+it._keyStr.charAt(r);return f},decode:function(t){try{if(n.btoa&&n.atob)return decodeURIComponent(escape(n.atob(t)))}catch(i){}return it._decode(t)},_decode:function(n){var t="",e,o,s,h,u,r,f,i=0;for(n=n.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<n.length;)h=it._keyStr.indexOf(n.charAt(i++)),u=it._keyStr.indexOf(n.charAt(i++)),r=it._keyStr.indexOf(n.charAt(i++)),f=it._keyStr.indexOf(n.charAt(i++)),e=h<<2|u>>4,o=(u&15)<<4|r>>2,s=(r&3)<<6|f,t=t+String.fromCharCode(e),r!==64&&(t=t+String.fromCharCode(o)),f!==64&&(t=t+String.fromCharCode(s));return uu.decode(t)}},uu={encode:function(n){for(var t,i="",r=0;r<n.length;r++)t=n.charCodeAt(r),t<128?i+=String.fromCharCode(t):t>127&&t<2048?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(t&63|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(t&63|128));return i},decode:function(n){for(var r="",t=0,i=0,u=0,f=0;t<n.length;)i=n.charCodeAt(t),i<128?(r+=String.fromCharCode(i),t++):i>191&&i<224?(u=n.charCodeAt(t+1),r+=String.fromCharCode((i&31)<<6|u&63),t+=2):(u=n.charCodeAt(t+1),f=n.charCodeAt(t+2),r+=String.fromCharCode((i&15)<<12|(u&63)<<6|f&63),t+=3);return r}},e={SessionStart:1,SessionEnd:2,PageView:3,PageEvent:4,CrashReport:5,OptOut:6,AppStateTransition:10,Profile:14,Commerce:16},c={Unknown:0,Navigation:1,Location:2,Search:3,Transaction:4,UserContent:5,UserPreference:6,Social:7,Other:8},ne={Logout:3},te={AppInit:1};c.getName=function(n){switch(n){case c.Navigation:return"Navigation";case c.Location:return"Location";case c.Search:return"Search";case c.Transaction:return"Transaction";case c.UserContent:return"User Content";case c.UserPreference:return"User Preference";case c.Social:return"Social";case o.ProductAddToCart:return"Product Added to Cart";case o.ProductAddToWishlist:return"Product Added to Wishlist";case o.ProductCheckout:return"Product Checkout";case o.ProductCheckoutOption:return"Product Checkout Options";case o.ProductClick:return"Product Click";case o.ProductImpression:return"Product Impression";case o.ProductPurchase:return"Product Purchased";case o.ProductRefund:return"Product Refunded";case o.ProductRemoveFromCart:return"Product Removed From Cart";case o.ProductRemoveFromWishlist:return"Product Removed from Wishlist";case o.ProductViewDetail:return"Product View Details";case o.PromotionClick:return"Promotion Click";case o.PromotionView:return"Promotion View";default:return"Other"}};o={ProductAddToCart:10,ProductRemoveFromCart:11,ProductCheckout:12,ProductCheckoutOption:13,ProductClick:14,ProductViewDetail:15,ProductPurchase:16,ProductRefund:17,PromotionView:18,PromotionClick:19,ProductAddToWishlist:20,ProductRemoveFromWishlist:21,ProductImpression:22};st={Other:0,CustomerId:1,Facebook:2,Twitter:3,Google:4,Microsoft:5,Yahoo:6,Email:7,Alias:8,FacebookCustomAudienceId:9};st.isValid=function(n){if(typeof n=="number")for(var t in st)if(st.hasOwnProperty(t)&&st[t]===n)return!0;return!1};st.getName=function(t){switch(t){case n.mParticle.IdentityType.CustomerId:return"Customer ID";case n.mParticle.IdentityType.Facebook:return"Facebook ID";case n.mParticle.IdentityType.Twitter:return"Twitter ID";case n.mParticle.IdentityType.Google:return"Google ID";case n.mParticle.IdentityType.Microsoft:return"Microsoft ID";case n.mParticle.IdentityType.Yahoo:return"Yahoo ID";case n.mParticle.IdentityType.Email:return"Email";case n.mParticle.IdentityType.Alias:return"Alias ID";case n.mParticle.IdentityType.FacebookCustomAudienceId:return"Facebook App User ID";default:return"Other ID"}};var ht={LocalStorageName:"mprtcl-api",LocalStorageNameV3:"mprtcl-v3",CookieName:"mprtcl-api",CookieNameV2:"mprtcl-v2",CookieNameV3:"mprtcl-v3",CookieDomain:null,Debug:!1,CookieExpiration:365,Verbose:!1,IncludeReferrer:!0,IncludeGoogleAdwords:!0,Timeout:300,SessionTimeout:30,Sandbox:!1,Version:null,MaxProducts:20},l={},p={NoToken:"A token must be specified.",EventNameInvalidType:"Event name must be a valid string value.",EventDataInvalidType:"Event data must be a valid object hash.",LoggingDisabled:"Event logging is currently disabled.",CookieParseError:"Could not parse cookie",EventEmpty:"Event object is null or undefined, cancelling send",NoEventType:"Event type must be specified.",TransactionIdRequired:"Transaction ID is required",TransactionRequired:"A transaction attributes object is required",PromotionIdRequired:"Promotion ID is required",BadAttribute:"Attribute value cannot be object or array",BadKey:"Key value cannot be object or array",BadLogPurchase:"Transaction attributes and a product are both required to log a purchase, https://docs.mparticle.com/?javascript#measuring-transactions"},h={CookieSearch:"Searching for cookie",CookieFound:"Cookie found, parsing values",CookieNotFound:"Cookies not found",CookieSet:"Setting cookie",CookieSync:"Performing cookie sync",SendBegin:"Starting to send event",SendWindowsPhone:"Sending event to Windows Phone container",SendIOS:"Calling iOS path: ",SendAndroid:"Calling Android JS interface method: ",SendHttp:"Sending event to mParticle HTTP service",StartingNewSession:"Starting new Session",StartingLogEvent:"Starting to log event",StartingLogOptOut:"Starting to log user opt in/out",StartingEndSession:"Starting to end session",StartingInitialization:"Starting to initialize",StartingLogCommerceEvent:"Starting to log commerce event",LoadingConfig:"Loading configuration options",AbandonLogEvent:"Cannot log event, logging disabled or developer token not set",AbandonStartSession:"Cannot start session, logging disabled or developer token not set",AbandonEndSession:"Cannot end session, logging disabled or developer token not set",NoSessionToEnd:"Cannot end session, no active session found"},k={LogEvent:"logEvent",SetUserIdentity:"setUserIdentity",RemoveUserIdentity:"removeUserIdentity",SetUserTag:"setUserTag",RemoveUserTag:"removeUserTag",SetUserAttribute:"setUserAttribute",RemoveUserAttribute:"removeUserAttribute",SetSessionAttribute:"setSessionAttribute",AddToProductBag:"addToProductBag",RemoveFromProductBag:"removeFromProductBag",ClearProductBag:"clearProductBag",AddToCart:"addToCart",RemoveFromCart:"removeFromCart",ClearCart:"clearCart",LogOut:"logOut",SetUserAttributeList:"setUserAttributeList",RemoveAllUserAttributes:"removeAllUserAttributes",GetUserAttributesLists:"getUserAttributesLists",GetAllUserAttributes:"getAllUserAttributes"},r={Unknown:0,AddToCart:1,RemoveFromCart:2,Checkout:3,CheckoutOption:4,Click:5,ViewDetail:6,Purchase:7,Refund:8,AddToWishlist:9,RemoveFromWishlist:10},fu={ss:1,ui:1,ua:1,sa:1,cp:1,pb:1,csd:1};r.getName=function(n){switch(n){case r.AddToCart:return"Add to Cart";case r.RemoveFromCart:return"Remove from Cart";case r.Checkout:return"Checkout";case r.CheckoutOption:return"Checkout Option";case r.Click:return"Click";case r.ViewDetail:return"View Detail";case r.Purchase:return"Purchase";case r.Refund:return"Refund";case r.AddToWishlist:return"Add to Wishlist";case r.RemoveFromWishlist:return"Remove from Wishlist";default:return"Unknown"}};r.getExpansionName=function(n){switch(n){case r.AddToCart:return"AddToCart";case r.RemoveFromCart:return"RemoveFromCart";case r.Checkout:return"Checkout";case r.CheckoutOption:return"CheckoutOption";case r.Click:return"Click";case r.ViewDetail:return"ViewDetail";case r.Purchase:return"Purchase";case r.Refund:return"Refund";case r.AddToWishlist:return"AddToWishlist";case r.RemoveFromWishlist:return"RemoveFromWishlist";default:return"Unknown"}};d={Unknown:0,PromotionView:1,PromotionClick:2};d.getName=function(n){switch(n){case d.PromotionView:return"Promotion View";case d.PromotionClick:return"Promotion Click";default:return"Unknown"}};d.getExpansionName=function(n){switch(n){case d.PromotionView:return"view";case d.PromotionClick:return"click";default:return"Unknown"}};var vt={attemptCookieSync:function(n,t){var i,u,f,e,r;t&&!yt()&&ki.forEach(function(o){if(i={moduleId:o.moduleId,frequencyCap:o.frequencyCap,pixelUrl:vt.replaceAmp(o.pixelUrl),redirectUrl:o.redirectUrl?vt.replaceAmp(o.redirectUrl):null},f=vt.replaceMPID(i.pixelUrl,t),e=i.redirectUrl?vt.replaceMPID(i.redirectUrl,t):"",r=f+encodeURIComponent(e),n&&n!==t){vt.performCookieSync(r,i.moduleId);return}u=ti[i.moduleId.toString()]?ti[i.moduleId.toString()]:null;u?(new Date).getTime()>new Date(u).getTime()+i.frequencyCap*864e5&&vt.performCookieSync(r,i.moduleId):vt.performCookieSync(r,i.moduleId)})},performCookieSync:function(n,i){var r=document.createElement("img");t(h.CookieSync);r.src=n;ti[i.toString()]=(new Date).getTime();u.update()},replaceMPID:function(n,t){return n.replace("%%mpid%%",t)},replaceAmp:function(n){return n.replace(/&amp;/g,"&")}},v={isValidAttributeValue:function(n){return n!==undefined&&!rt(n)&&!Array.isArray(n)},isValidKeyValue:function(n){return Boolean(n&&!rt(n)&&!Array.isArray(n))},isStringOrNumber:function(n){return typeof n=="string"||typeof n=="number"}},ur={initialize:function(){if(y){var n=l.SessionTimeout*6e4;new Date>new Date(nt.getTime()+n)&&(this.endSession(),this.startNewSession())}else this.startNewSession()},getSession:function(){return y},startNewSession:function(){if(t(h.StartingNewSession),tt()){if(y=gt(),!ft){var n=new Date;ft=n;nt=n}i.sessionManager.setSessionTimer();et(e.SessionStart)}else t(h.AbandonStartSession)},endSession:function(n){var r,i,f,o;if(t(h.StartingEndSession),n)et(e.SessionEnd),y=null,nt=null,ft=null,ct={},u.update();else if(tt()){if(i=u.getCookie()||u.getLocalStorage(),!i.sid){t(h.NoSessionToEnd);return}i.sid&&y!==i.sid&&(y=i.sid);i.les&&(r=l.SessionTimeout*6e4,o=(new Date).getTime(),f=o-i.les,f<r?this.setSessionTimer():(et(e.SessionEnd),y=null,nt=null,ft=null,ct={},u.update()))}else t(h.AbandonEndSession)},setSessionTimer:function(){var t=l.SessionTimeout*6e4;cr=n.setTimeout(function(){i.sessionManager.endSession()},t)},resetSessionTimer:function(){y||this.startNewSession();this.clearSessionTimeout();this.setSessionTimer()},clearSessionTimeout:function(){clearTimeout(cr)}};i={useNativeSdk:!0,isIOS:!1,isDebug:!1,isSandbox:!1,useCookieStorage:!1,maxProducts:ht.MaxProducts,getDeviceId:ie,generateHash:ot,sessionManager:ur,cookieSyncManager:vt,persistence:u,Validators:v,IdentityType:st,EventType:c,CommerceEventType:o,PromotionType:d,ProductActionType:r,init:function(){var n;t(h.StartingInitialization);rr({});u.migratePersistence();si=u.getCookie()===null&&u.getLocalStorage()===null?!0:!1;u.initializeStorage();bt=u.retrieveDeviceId();arguments&&arguments.length&&(typeof arguments[0]=="string"&&(kt=arguments[0],vu()),typeof arguments[0]=="object"?n=arguments[0]:arguments.length>1&&typeof arguments[1]=="object"&&(n=arguments[1]),n&&rr(n));i.sessionManager.initialize();ii&&ii.length&&(ii.forEach(function(n){typeof n=="function"&&n()}),ii=[]);vf();u.update();di=!0},reset:function(){wt=!0;si=null;vr();kt=null;y=null;nt=null;ft=null;ci=null;dt=null;ct={};s={};g=[];ti={};f=[];oi=[];ki=[];a={};w=[];ut=null;rr({});u.expireCookies(ht.CookieName);u.expireCookies(ht.CookieNameV2);u.expireCookies(ht.CookieNameV3);u.isLocalStorageAvailable&&(localStorage.removeItem(ht.LocalStorageName),localStorage.removeItem(ht.LocalStorageNameV3));i.sessionManager.resetSessionTimer();di=!1},ready:function(n){di&&typeof n=="function"?n():ii.push(n)},getVersion:function(){return or},setAppVersion:function(n){dt=n;u.update()},getAppName:function(){return ci},setAppName:function(n){ci=n},getAppVersion:function(){return dt},stopTrackingLocation:function(){i.sessionManager.resetSessionTimer();vr()},startTrackingLocation:function(){i.sessionManager.resetSessionTimer();pu()},setPosition:function(n,r){i.sessionManager.resetSessionTimer();typeof n=="number"&&typeof r=="number"?ai={lat:n,lng:r}:t("Position latitude and/or longitude are invalid")},setUserIdentity:function(n,r){var e;if(i.sessionManager.resetSessionTimer(),tt())if(st.isValid(r))if(n===null||n===undefined||v.isStringOrNumber(n)){if(i.removeUserIdentity(n,r),n===null||n===undefined)return;e={Identity:n,Type:r};g.push(e);b(k.SetUserIdentity,JSON.stringify(e))||f.length&&f.forEach(function(i){if(i.setUserIdentity&&(!i.userIdentityFilters||!ri(i.userIdentityFilters,r))){var u=i.setUserIdentity(n,r);u&&t(u)}});u.update()}else{t("User identities passed to setUserIdentity must be strings or numbers");return}else t("IdentityType is not valid. Please ensure you are using a valid IdentityType from http://docs.mparticle.com/#user-identity")},getUserIdentity:function(n){i.sessionManager.resetSessionTimer();var t=null;return g.forEach(function(i){i.Identity===n&&(t=i)}),t},removeUserIdentity:function(n,r){i.sessionManager.resetSessionTimer();n&&(g=g.filter(function(t){return t.Identity!==n}));r&&st.isValid(r)?g=g.filter(function(n){return n.Type!==r}):t("IdentityType is not valid. Please ensure you are using a valid IdentityType from http://docs.mparticle.com/#user-identity");b(k.RemoveUserIdentity,n);u.update()},startNewSession:function(){ur.startNewSession()},endSession:function(){ur.endSession(!0)},logEvent:function(n,r,u,f){if(i.sessionManager.resetSessionTimer(),typeof n!="string"){t(p.EventNameInvalidType);return}if(r||(r=c.Unknown),!wf(r)){t("Invalid event type: "+r+", must be one of: \n"+JSON.stringify(c));return}if(!tt()){t(p.LoggingDisabled);return}et(e.PageEvent,n,u,r,f)},logError:function(n){(i.sessionManager.resetSessionTimer(),n)&&(typeof n=="string"&&(n={message:n}),et(e.CrashReport,n.name?n.name:"Error",{m:n.message?n.message:n,s:"Error",t:n.stack},c.Other))},logLink:function(n,t,r,u){i.sessionManager.resetSessionTimer();iu("click",n,t,u,r)},logForm:function(n,t,r,u){i.sessionManager.resetSessionTimer();iu("submit",n,t,u,r)},logPageView:function(){i.sessionManager.resetSessionTimer();var t=null,r=null,u=null;tt()&&(arguments.length<=1?(t=n.location.pathname,r={hostname:n.location.hostname,title:n.document.title},arguments.length===1&&(u=arguments[0])):arguments.length>1&&(t=arguments[0],r=arguments[1],arguments.length===3&&(u=arguments[2])),et(e.PageView,t,r,c.Unknown,u))},eCommerce:{ProductBags:{add:function(n,r){if(!v.isStringOrNumber(n)){t("ProductBagName is required and must be a string or number");return}i.sessionManager.resetSessionTimer();a[n]||(a[n]=[]);a[n].push(r);a[n].length>i.maxProducts&&t(n+" contains "+a[n].length+" items. Only mParticle.maxProducts = "+i.maxProducts+" can currently be saved in cookies.");u.update();b(k.AddToProductBag,JSON.stringify(r))},remove:function(n,t){i.sessionManager.resetSessionTimer();var r=-1;a[n]&&(a[n].forEach(function(n,i){n.sku===t.sku&&(r=i)}),r>-1&&a[n].splice(r,1),u.update());b(k.RemoveFromProductBag,JSON.stringify(t))},clear:function(n){i.sessionManager.resetSessionTimer();a[n]=[];u.update();b(k.ClearProductBag,n)}},Cart:{add:function(n,f){i.sessionManager.resetSessionTimer();var e;n.Attributes=li(n.Attributes);e=Array.isArray(n)?n.slice():[n];w=w.concat(e);w.length>i.maxProducts&&t("The cart contains "+w.length+" items. Only mParticle.maxProducts = "+i.maxProducts+" can currently be saved in cookies.");yt()?b(k.AddToCart,JSON.stringify(e)):f===!0&&ir(r.AddToCart,e);u.update()},remove:function(n,t){i.sessionManager.resetSessionTimer();var f=-1,e=null;w&&(w.forEach(function(t,i){t.Sku===n.Sku&&(f=i,e=t)}),f>-1&&(w.splice(f,1),yt()?b(k.RemoveFromCart,JSON.stringify(e)):t===!0&&ir(r.RemoveFromCart,e)));u.update()},clear:function(){i.sessionManager.resetSessionTimer();w=[];b(k.ClearCart);u.update()}},setCurrencyCode:function(n){if(typeof n!="string"){t("Code must be a string");return}i.sessionManager.resetSessionTimer();gi=n},createProduct:function(n,t,r,u,f,e,o,s,h,c){return i.sessionManager.resetSessionTimer(),bf(n,t,r,u,f,e,o,s,h,c)},createPromotion:function(n,t,r,u){return i.sessionManager.resetSessionTimer(),kf(n,t,r,u)},createImpression:function(n,t){return i.sessionManager.resetSessionTimer(),df(n,t)},createTransactionAttributes:function(n,t,r,u,f,e){return i.sessionManager.resetSessionTimer(),gf(n,t,r,u,f,e)},logCheckout:function(n,t,r){i.sessionManager.resetSessionTimer();of(n,t,r)},logProductAction:function(n,t,r){i.sessionManager.resetSessionTimer();ir(n,t,r)},logPurchase:function(n,r,u,f){if(!n||!r){t(p.BadLogPurchase);return}i.sessionManager.resetSessionTimer();sf(n,r,f);u===!0&&i.eCommerce.Cart.clear()},logPromotion:function(n,t,r){i.sessionManager.resetSessionTimer();cf(n,t,r)},logImpression:function(n,t){i.sessionManager.resetSessionTimer();lf(n,t)},logRefund:function(n,t,r,u){i.sessionManager.resetSessionTimer();hf(n,t,u);r===!0&&i.eCommerce.Cart.clear()},expandCommerceEvent:function(n){return i.sessionManager.resetSessionTimer(),ef(n)}},logEcommerceTransaction:function(n,t,r,u,f,o,s,h,l,a,v){i.sessionManager.resetSessionTimer();var y={};y.$MethodName="LogEcommerceTransaction";y.ProductName=n||"";y.ProductSKU=t||"";y.ProductUnitPrice=r||0;y.ProductQuantity=u||0;y.ProductCategory=f||"";y.RevenueAmount=o||0;y.TaxAmount=s||0;y.ShippingAmount=h||0;y.CurrencyCode=l||"USD";y.TransactionAffiliation=a||"";y.TransactionID=v||gt();et(e.PageEvent,"Ecommerce",y,c.Transaction)},logLTVIncrease:function(n,r,u){if(i.sessionManager.resetSessionTimer(),typeof n!="number"){t("A valid amount must be passed to logLTVIncrease.");return}u||(u={});u[cu]=n;u[su]=hu;et(e.PageEvent,r||"Increase LTV",u,c.Transaction)},setUserTag:function(r){if(i.sessionManager.resetSessionTimer(),!v.isValidKeyValue(r)){t(p.BadKey);return}n.mParticle.setUserAttribute(r,null)},removeUserTag:function(r){if(i.sessionManager.resetSessionTimer(),!v.isValidKeyValue(r)){t(p.BadKey);return}n.mParticle.removeUserAttribute(r)},setUserAttribute:function(n,r){if(i.sessionManager.resetSessionTimer(),tt()){if(!v.isValidAttributeValue(r)){t(p.BadAttribute);return}if(!v.isValidKeyValue(n)){t(p.BadKey);return}var f=bi(s,n);f&&delete s[f];s[n]=r;u.update();b(k.SetUserAttribute,JSON.stringify({key:n,value:r}))||ru(n,r)}},removeUserAttribute:function(n){if(i.sessionManager.resetSessionTimer(),!v.isValidKeyValue(n)){t(p.BadKey);return}var r=bi(s,n);r&&(n=r);delete s[n];b(k.RemoveUserAttribute,JSON.stringify({key:n,value:null}))||nr("removeUserAttribute",n);u.update()},setUserAttributeList:function(n,r){if(i.sessionManager.resetSessionTimer(),!v.isValidKeyValue(n)){t(p.BadKey);return}if(Array.isArray(r)){var f=r.slice(),e=bi(s,n);e&&delete s[e];s[n]=f;u.update();b(k.SetUserAttributeList,JSON.stringify({key:n,value:f}))||ru(n,f)}},removeAllUserAttributes:function(){if(i.sessionManager.resetSessionTimer(),!b(k.RemoveAllUserAttributes)&&s)for(var n in s)s.hasOwnProperty(n)&&nr("removeUserAttribute",n);s={};u.update()},getUserAttributesLists:function(){var t={};for(var n in s)s.hasOwnProperty(n)&&Array.isArray(s[n])&&(t[n]=s[n].slice());return t},getAllUserAttributes:function(){var t={},n;if(s)for(n in s)s.hasOwnProperty(n)&&(t[n]=Array.isArray(s[n])?s[n].slice():s[n]);return t},setSessionAttribute:function(n,r){if(i.sessionManager.resetSessionTimer(),tt()){if(!v.isValidAttributeValue(r)){t(p.BadAttribute);return}if(!v.isValidKeyValue(n)){t(p.BadKey);return}var f=bi(ct,n);f&&(n=f);ct[n]=r;u.update();b(k.SetSessionAttribute,JSON.stringify({key:n,value:r}))||nr("setSessionAttribute",[n,r])}},setOptOut:function(n){i.sessionManager.resetSessionTimer();wt=!n;af();u.update();f.length&&f.forEach(function(i){if(i.setOptOut){var r=i.setOptOut(n);r&&t(r)}})},logOut:function(){i.sessionManager.resetSessionTimer();var n;tt()&&(b(k.LogOut)||(n=yf(),f.length&&f.forEach(function(t){t.logOut&&t.logOut(n)})))},addForwarder:function(n){oi.push(n)},configureForwarder:function(){for(var t=null,n=null,n=arguments.length===1?arguments[0]:{name:arguments[0],settings:arguments[1],eventNameFilters:arguments[2],eventTypeFilters:arguments[3],attributeFilters:arguments[4],screenNameFilters:arguments[5],pageViewAttributeFilters:arguments[6],userIdentityFilters:arguments[7],userAttributeFilters:arguments[8],moduleId:arguments[9],isSandbox:arguments[10],hasSandbox:arguments[11],isVisible:arguments[12],filteringEventAttributeValue:null},r=0;r<oi.length;r++)if(oi[r].name===n.name&&(n.isDebug===i.isSandbox||n.isSandbox===i.isSandbox)){t=new oi[r].constructor;t.id=n.moduleId;t.isSandbox=n.isDebug||n.isSandbox;t.hasSandbox=n.hasDebugString==="true";t.isVisible=n.isVisible;t.settings=n.settings;t.eventNameFilters=n.eventNameFilters;t.eventTypeFilters=n.eventTypeFilters;t.attributeFilters=n.attributeFilters;t.screenNameFilters=n.screenNameFilters;t.screenNameFilters=n.screenNameFilters;t.pageViewAttributeFilters=n.pageViewAttributeFilters;t.userIdentityFilters=n.userIdentityFilters;t.userAttributeFilters=n.userAttributeFilters;t.filteringEventAttributeValue=n.filteringEventAttributeValue;t.filteringUserAttributeValue=n.filteringUserAttributeValue;f.push(t);break}},configurePixel:function(n){(n.isDebug===i.isSandbox||n.isProduction!==i.isSandbox)&&ki.push(n)}};n.mParticle&&n.mParticle.config&&(n.mParticle.config.serviceUrl&&(fr=n.mParticle.config.serviceUrl),n.mParticle.config.secureServiceUrl&&(er=n.mParticle.config.secureServiceUrl),n.mParticle.config.rq&&(ii=n.mParticle.config.rq),n.mParticle.config.hasOwnProperty("isDebug")&&(i.isDebug=n.mParticle.config.isDebug),n.mParticle.config.hasOwnProperty("isSandbox")&&(i.isSandbox=n.mParticle.config.isSandbox),n.mParticle.config.hasOwnProperty("useNativeSdk")&&(i.useNativeSdk=n.mParticle.config.useNativeSdk),n.mParticle.config.hasOwnProperty("useCookieStorage")&&(i.useCookieStorage=n.mParticle.config.useCookieStorage),n.mParticle.config.hasOwnProperty("maxProducts")&&(i.maxProducts=n.mParticle.config.maxProducts),n.mParticle.config.hasOwnProperty("appName")&&(ci=n.mParticle.config.appName),n.mParticle.config.hasOwnProperty("appVersion")&&(dt=n.mParticle.config.appVersion),n.mParticle.config.hasOwnProperty("sessionTimeout")&&(l.SessionTimeout=n.mParticle.config.sessionTimeout),n.mParticle.config.hasOwnProperty("customFlags")&&(hr=n.mParticle.config.customFlags));n.mParticle=i})(window) ;


if (window.mParticle.hasOwnProperty('configurePixel')) {

}

delete window.mParticle.addForwarder;
delete window.mParticle.configureForwarder;
if (window.mParticle.hasOwnProperty('configurePixel')) {
    delete window.mParticle.configurePixel;
}

mParticle.init('12bb4ddb4c497e43a61bf40d9d807a76');