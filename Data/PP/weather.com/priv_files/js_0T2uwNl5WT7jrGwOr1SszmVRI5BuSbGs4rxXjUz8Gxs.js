!function(t){function i(){var t=document.createElement("smartbanner"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in i)if(void 0!==t.style[n])return{end:i[n]};return!1}var n=function(i){this.origHtmlMargin=parseFloat(t("html")),this.options=t.extend({},t.smartbanner.defaults,i);var n=navigator.standalone,s=navigator.userAgent;this.options.force?this.type=this.options.force:null!=s.match(/iPhone|iPod/i)||s.match(/iPad/)&&this.options.iOSUniversalApp?null!=s.match(/Safari/i)&&null!=s.match(/CriOS/i)&&(this.type="ios"):s.match(/\bSilk\/(.*\bMobile Safari\b)?/)||s.match(/\bKF\w/)||s.match("Kindle Fire")?this.type="kindle":null!=s.match(/Android/i)?this.type="android":null!=s.match(/Windows NT 6.2/i)&&null!==s.match(/Touch/i)&&(this.type="windows");var e=this.getCookie("sb-closed"),o=!!e&&this.showDismissed(e);if(this.type&&!n&&!o&&!this.getCookie("sb-installed")){this.scale="auto"===this.options.scale?t(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var a=t("android"===this.type?'meta[name="google-play-app"]':"kindle"===this.type?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');0===a.length&&"ios"!==this.type||("windows"===this.type?(this.pfn=t('meta[name="msApplication-PackageFamilyName"]').attr("content"),this.appId=a.attr("content")[1]):"ios"===this.type?navigator.userAgent.match(/iPad/i)?this.appId=364252504:(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i))&&(this.appId=295646461):this.appId=/app-id=([^\s,]+)/.exec(a.attr("content"))[1],this.title=this.options.title?this.options.title:a.data("title")||t("title").text().replace(/\s*[|\-Â·].*$/,""),this.author=this.options.author?this.options.author:a.data("author")||(t('meta[name="author"]').length?t('meta[name="author"]').attr("content"):window.location.hostname),this.iconUrl=a.data("icon-url"),this.price=a.data("price"),this.androidSmartBannerUrl=this.options.androidSmartBannerUrl?this.options.androidSmartBannerUrl:"market://details?id=",this.create(),this.show(),this.listen())}};n.prototype={constructor:n,create:function(){var i,n=this.options.url?this.options.url:("windows"===this.type?"ms-windows-store:PDP?PFN="+this.pfn:"android"===this.type?this.androidSmartBannerUrl:"kindle"===this.type?"amzn://apps/android?asin=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,s=this.price||this.options.price,e=s?s+" "+("kindle"===this.type?this.options.inAmazonAppStore:"ios"===this.type?this.options.inAppStore:this.options.inWindowsStore):"",o=null!==this.options.iconGloss&&this.options.iconGloss;this.options.url&&(n=this.options.url),"android"===this.type&&(e=s?s+" - "+this.options.inGooglePlay:"",this.options.GooglePlayParams&&(n=n+"&referrer="+this.options.GooglePlayParams));var a='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close"> <span class="x-letter">&times;</span><span  class="wx-iconfont-global wx-icon-close"></span></a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+'</span > <span class="star-rating-img"> </span> <span>'+e+'</span></div><a href="'+n+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>";this.options.layer?t(this.options.appendToSelector).append(a):t(this.options.appendToSelector).prepend(a);var r="android"===this.type?"https://s.w-x.co/audience/star-rating-android-green.svg":"https://s.w-x.co/audience/sm_star_rating.png";t("#smartbanner .star-rating-img").css("background-image","url("+r+")"),this.options.icon?i=this.options.icon:this.iconUrl?i=this.iconUrl:t('link[rel="apple-touch-icon-precomposed"]').length>0?(i=t('link[rel="apple-touch-icon-precomposed"]').attr("href"),null===this.options.iconGloss&&(o=!1)):t('link[rel="apple-touch-icon"]').length>0?i=t('link[rel="apple-touch-icon"]').attr("href"):t('meta[name="msApplication-TileImage"]').length>0?i=t('meta[name="msApplication-TileImage"]').attr("content"):t('meta[name="msapplication-TileImage"]').length>0&&(i=t('meta[name="msapplication-TileImage"]').attr("content")),i?(t("#smartbanner .sb-icon").css("background-image","url("+i+")"),o&&t("#smartbanner .sb-icon").addClass("gloss")):t("#smartbanner").addClass("no-icon"),this.bannerHeight=t("#smartbanner").outerHeight()+2,t("#smartbanner").css("position",this.options.layer?"absolute":"static")},listen:function(){t("#smartbanner .sb-close").on("click",t.proxy(this.close,this)),t("#smartbanner .sb-button").on("click",t.proxy(this.install,this))},show:function(i){var n=t("#smartbanner");if(n.stop(),this.options.layer)n.animate({top:0,display:"block"},this.options.speedIn).addClass("shown").show(),t("html").animate({marginTop:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",i);else if(t.support.transition){n.animate({top:0},this.options.speedIn).addClass("shown");var s=function(){t("html").removeClass("sb-animation"),i&&i()};t("html").addClass("sb-animation").one(t.support.transition.end,s).emulateTransitionEnd(this.options.speedIn).css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale)}else n.slideDown(this.options.speedIn).addClass("shown")},hide:function(i){var n=t("#smartbanner");if(n.stop(),this.options.layer)n.animate({top:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown"),t("html").animate({marginTop:this.origHtmlMargin},this.options.speedIn,"swing",i);else if(t.support.transition){n.css("top",-1*this.bannerHeight*this.scale).removeClass("shown");var s=function(){t("html").removeClass("sb-animation"),i&&i()};t("html").addClass("sb-animation").one(t.support.transition.end,s).emulateTransitionEnd(this.options.speedOut).css("margin-top",this.origHtmlMargin)}else n.slideUp(this.options.speedOut).removeClass("shown");n.hide()},close:function(t){t.preventDefault(),this.hide();var i=this.getCookie("sb-closed"),n=i?i.substr(0,i.indexOf("-")):0,s=null!==n?Number(n)+1:1;window.sendActionTrackEvent(s),this.setCookie("sb-closed",s+"-"+new Date,90)},install:function(t){this.options.hideOnInstall&&this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(t,i,n){var s=new Date;s.setDate(s.getDate()+n),i=encodeURI(i)+(null==n?"":"; expires="+s.toUTCString()),document.cookie=t+"="+i+"; path=/;"},getCookie:function(t){var i,n,s,e=document.cookie.split(";");for(i=0;i<e.length;i++)if(n=e[i].substr(0,e[i].indexOf("=")),s=e[i].substr(e[i].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n===t)return decodeURI(s);return null},showDismissed:function(t){var i=t.indexOf("-"),n=t.substr(0,i),s=new Date(t.substr(i+1,t.length-i)),e=new Date,o=Math.round(Math.abs((e.getTime()-s.getTime())/864e5));return 0===o||(1===n&&o<5||(2===n&&o<10||n>2&&o<30))},switchType:function(){var i=this;this.hide(function(){i.type="android"===i.type?"ios":"android";var n=t("android"===i.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");i.appId=/app-id=([^\s,]+)/.exec(n)[1],t("#smartbanner").detach(),i.create(),i.show()})}},t.smartbanner=function(i){var s=t(window),e=s.data("smartbanner"),o="object"==typeof i&&i;e||s.data("smartbanner",e=new n(o)),"string"==typeof i&&e[i]()},t.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"on the App Store",inGooglePlay:"In Google Play",inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:!0,layer:!1,iOSUniversalApp:!0,appendToSelector:"body"},t.smartbanner.Constructor=n,void 0===t.support.transition&&(t.fn.emulateTransitionEnd=function(i){var n=!1,s=this;t(this).one(t.support.transition.end,function(){n=!0});var e=function(){n||t(s).trigger(t.support.transition.end)};return setTimeout(e,i),this},t(function(){t.support.transition=i()}))}(window.jQuery);
//# sourceMappingURL=/sites/all/modules/glomo/shared/glomo_smart_banner/vendor/jquery.smartbanner.min.js.map
;
