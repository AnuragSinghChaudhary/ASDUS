try{!function(e,t,r,i,n){var a,o={utilities:{cookieHelper:{get:function(r){return r?e.decodeURIComponent(t.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+e.encodeURIComponent(r).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},create:function(r,i,n,a,o,s){if(!r||/^(?:expires|max\-age|path|domain|secure)$/i.test(r))return!1;var c="";if(n)switch(n.constructor){case Number:c=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:c="; expires="+n;break;case Date:c="; expires="+n.toUTCString()}return t.cookie=e.encodeURIComponent(r)+"="+e.encodeURIComponent(i)+c+(o?"; domain="+o:"")+(a?"; path="+a:"")+(s?"; secure":""),!0},removeItem:function(r,i,n){return!!this.hasItem(r)&&(t.cookie=e.encodeURIComponent(r)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(i?"; path="+i:""),!0)},hasItem:function(r){return!!r&&new RegExp("(?:^|;\\s*)"+e.encodeURIComponent(r).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(t.cookie)}},transformations:{toLowerCase:function(e){return"string"==typeof e?e.toLowerCase():e},trim:function(e){return"string"==typeof e?e.trim():e}},logMessage:function(e){var t={};console&&e&&(e.message&&(t.message=e.message),e.data&&(t.data=e.data),"error"===e.type&&console.error?console.error(t):console.log&&console.log(t))},safeJSONParse:function(e){if(e&&"string"==typeof e)try{return JSON.parse(e)}catch(e){return null}},padLeft:function(e,t,r){return Array(t-String(e).length+1).join(r||"0")+e},safeDateParse:function(e){var t;if(e&&("string"==typeof e||"number"==typeof e))try{return t=new Date(e),o.utilities.padLeft(t.getMonth()+1,2)+"/"+o.utilities.padLeft(t.getDate(),2)+"/"+t.getFullYear()}catch(e){return null}},isFunction:function(e){return"function"==typeof e},combineArraysWithoutDuplicates:function(e,t){var r;if((e||t)&&(e.length||t.length)){if(!e||!e.length)return t;if(!t||!t.length)return e;for(r=0;r<t.length;r++)-1===e.indexOf(t[r])&&e.push(t[r]);return e}},getQueryParameters:function(r){var i,n,a,o={};if(r=r||t.location.search){for(i=r.replace("?","").split("&"),a=0;a<i.length;a++){n=i[a].split("=");try{o[n[0]]=e.decodeURIComponent(e.encodeURIComponent(n[1]||""))}catch(e){o[n[0]]=""}}return o}},transform:function(e,t,r){var i,n,a=o.utilities.combineArraysWithoutDuplicates([o.utilities.transformations.trim],t.transformations);if(!e)return e;for(i=0;i<a.length;i++)o.utilities.isFunction(a[i])&&(n=a[i](i?n:e));return n},map:function(e,t){var r,i,n;for(r=0;r<e.length;r++)(n=e[r]).source&&(i=o.utilities.isFunction(n.source)?n.source():n.source,((i=o.utilities.transform(i,n,t))||!1===i||0===i)&&(t[n.key]=i))}},session:{key:"tas",create:function(){var e=new Date(Number(Date.now())+63072e6),t=Number(Date.now()),r=o.utilities.safeJSONParse(o.utilities.cookieHelper.get(o.session.key));!r||r.lastVisitedDate&&t>=r.lastVisitedDate+18e5?r={createdDate:t,ID:Math.random().toString(36).substr(2)+"."+t,status:r?"renewed":"new"}:r.status="existing",r.lastVisitedDate=t,o.utilities.cookieHelper.removeItem(o.session.key,"/","delta.com"),o.utilities.cookieHelper.create(o.session.key,JSON.stringify(r),e,"/","delta.com")},getID:function(){var e=o.utilities.safeJSONParse(o.utilities.cookieHelper.get(o.session.key));return e&&e.ID},getCreatedDate:function(){var e=o.utilities.safeJSONParse(o.utilities.cookieHelper.get(o.session.key));return e&&e.createdDate},getStatus:function(){var e=o.utilities.safeJSONParse(o.utilities.cookieHelper.get(o.session.key));return e&&e.status},getServerSessionID:function(){return a&&a.attributes.sessionID},getAdobeVisitorID:function(){var e=o.utilities.cookieHelper.get("s_vi");return e&&e.replace("[CS]v1|","").replace("[CE]","")},getAdobeFallbackVisitorID:function(){return e.visitor&&e.visitor.getMarketingCloudVisitorID&&e.visitor.getMarketingCloudVisitorID()},getForeseeID:function(){return e.FSR&&e.FSR.getKey&&FSR.getKey().uid}},page:{notifyWhenReady:function(e){if(i.isEDLReady)return e();r(t).on("edl-ready",e)},getURL:function(){return e.location.href},getReferrer:function(){return e.document.referrer},getTrackingCode:function(){var e=o.utilities.getQueryParameters();return e&&e.mkcpgn},getCountry:function(){return a&&a.attributes&&a.attributes.country},getLanguage:function(){return a&&a.page&&a.page.pageInfo&&a.page.pageInfo.language},getEnvironment:function(){return i&&i.ensightenOptions&&i.ensightenOptions.publishPath},getCurrentTimestamp:function(){return(new Date).getTime()},getTimezoneOffset:function(){return(new Date).getTimezoneOffset()}},user:{getID:function(){return a&&a.user&&a.user.profile&&a.user.profile.length&&a.user.profile[0].attributes&&a.user.profile[0].attributes.skymilesNumber||""},getIsLoggedIn:function(){return a&&a.user&&a.user.profile&&!!a.user.profile.length&&a.user.profile[0].attributes&&a.user.profile[0].attributes.isLoggedIn},getAvailableMiles:function(){return a&&a.user&&a.user.profile&&a.user.profile.length&&a.user.profile[0].attributes&&a.user.profile[0].attributes.availableMiles||""},getSegment:function(){return a&&a.user&&a.user.segment&&a.user.segment.medallionStatus}},itinerary:{fetchItineraries:function(t){var r,i,n,s=function(t){var r;if(e.totalFares&&e.totalFares.length)for(r=0;r<e.totalFares.length;r++)if(e.totalFares[r].selectedFare){t.t7=a&&a.cart&&a.cart.item&&a.cart.item.length&&a.cart.item[0].productInfo&&a.cart.item[0].productInfo.numberOfTravellers||"",e.totalFares[r].total&&(t.t8=e.totalFares[r].total),e.totalFares[r].taxesFees&&(t.t9=e.totalFares[r].taxesFees),e.totalFares[r].totalAwardMiles&&(t.t10=e.totalFares[r].totalAwardMiles);break}},c=function(t){var r;e.flightSlices&&e.flightSlices.length&&((r=o.utilities.safeDateParse(e.flightSlices[0].sliceDepartureDateFull))&&(t.t3=r),(r=2===e.flightSlices.length&&o.utilities.safeDateParse(e.flightSlices[1].sliceDepartureDateFull))&&(t.t4=r))},u=function(e,t){t&&(t.sliceOrigin&&t.sliceOrigin.code&&(e.t1=t.sliceOrigin.code.toLowerCase()),t.sliceDestination&&t.sliceDestination.code&&(e.t2=t.sliceDestination.code.toLowerCase()))},l=function(e){a.attributes&&a.attributes.ticketType&&(e.t6=a.attributes.ticketType.toLowerCase())},f=function(t){e.flightSlices[0].flightType&&0===e.flightSlices[0].flightType.toLowerCase().indexOf("flight")?t.t5="multicity":1===e.flightSlices.length?t.t5="oneway":2===e.flightSlices.length&&(t.t5="roundtrip")},g=function(e){a&&a.cart&&a.cart.transaction&&a.cart.transaction.pnr&&(e.t11=a.cart.transaction.pnr)},p=function(t){var r=a&&a.cart&&a.cart.price&&a.cart.price.cartTotal||e.grandTotal;r&&(t.t12=r)},h=function(t){var r=a&&a.cart&&a.cart.price&&a.cart.price.currency||e.currCode;r&&(t.t13=r)},d=function(){var t;if(e.msgDATA&&e.msgDATA.pageJSONResponse){try{t=JSON.parse(JSON.parse(e.msgDATA.pageJSONResponse).secDisplayInfo).ItineraryDO}catch(e){}t&&t.totalFare&&t.totalFare.length&&t.selectedFareIndex&&t.totalFare[t.selectedFareIndex]&&(n=t.totalFare[t.selectedFareIndex].fareRestrictionsBySlice)}},m=function(e,t){var r,i,a;if(t&&t.cabinInfo&&t.cabinInfo.length)for(e.ta12=[],r=0;r<t.cabinInfo.length;r++){if(a={},t.cabinInfo[r].depertureAirportCode&&(a.t1=t.cabinInfo[r].depertureAirportCode.toLowerCase()),t.cabinInfo[r].arrivalAirportCode&&(a.t2=t.cabinInfo[r].arrivalAirportCode.toLowerCase()),t.cabinInfo[r].bookingCode&&(a.t3=t.cabinInfo[r].bookingCode.toLowerCase()),t.cabinInfo[r].airlineCode&&(a.t4=t.cabinInfo[r].airlineCode.toLowerCase()),t.cabinInfo[r].fltNbr&&(a.t5=t.cabinInfo[r].fltNbr),t.flights&&t.flights.length&&t.flights[r]&&(t.flights[r].flightDepartureDate&&(a.t6=t.flights[r].flightDepartureDate.replace(/-/g,"/")),t.flights[r].flightDepartureTime&&(a.t7=t.flights[r].flightDepartureTime),t.flights[r].flightArrivalDate&&(a.t8=t.flights[r].flightArrivalDate.replace(/-/g,"/")),t.flights[r].flightArrivalTime&&(a.t9=t.flights[r].flightArrivalTime)),n&&n.length)for(i=0;i<n.length;i++)n[i]&&(n[i].origin||"").toLowerCase()===a.t1&&(n[i].destination||"").toLowerCase()===a.t2&&(a.t10=n[i].fareBasisCode);e.ta12.push(a)}},y=function(e,t){t&&t.flightType&&(e.t14=t.flightType.toLowerCase())},I=function(e,t){t&&t.cabinInfo&&t.cabinInfo.length&&(e.t15=t.cabinInfo[0].cabinName||"")},k=function(t){e.flightSlices&&e.flightSlices.length&&(t.t16=e.flightSlices.length)};if(t()&&e.flightSlices&&e.flightSlices.length)for(r=[],i=0;i<e.flightSlices.length;i++)!function(e){var t={};e&&(d(),u(t,e),c(t),f(t),l(t),s(t),m(t,e),g(t),p(t),h(t),I(t,e),k(t),y(t,e),r.push(t))}(e.flightSlices[i]);return r},searched:{isExecutionPage:function(){return e.location.pathname.indexOf("/air-shopping/findFlights.action")>-1||e.location.pathname.indexOf("/flight-search/search-results")>-1},getOriginAirportCode:function(){return o.itinerary.searched.isExecutionPage()&&a&&a.cart&&a.cart.item&&a.cart.item.length&&a.cart.item[0].productInfo&&a.cart.item[0].productInfo.originAirportCode||""},getDestinationAirportCode:function(){return o.itinerary.searched.isExecutionPage()&&a&&a.cart&&a.cart.item&&a.cart.item.length&&a.cart.item[0].productInfo&&a.cart.item[0].productInfo.destinationAirportCode||""},getOutboundDate:function(){return o.itinerary.searched.isExecutionPage()&&a&&a.cart&&a.cart.item&&a.cart.item.length&&a.cart.item[0].productInfo&&a.cart.item[0].productInfo.departureDate||""},getReturnDate:function(){return o.itinerary.searched.isExecutionPage()&&a&&a.cart&&a.cart.item&&a.cart.item.length&&a.cart.item[0].productInfo&&a.cart.item[0].productInfo.arrivalDate||""},getPassengerCount:function(){return o.itinerary.searched.isExecutionPage()&&a&&a.cart&&a.cart.item&&a.cart.item.length&&a.cart.item[0].productInfo&&a.cart.item[0].productInfo.numberOfTravellers||""},getFareType:function(){return o.itinerary.searched.isExecutionPage()&&a&&a.cart&&a.cart.item&&a.cart.item.length&&a.cart.item[0].productInfo&&a.cart.item[0].productInfo.fareType||""},getTripType:function(){return o.itinerary.searched.isExecutionPage()&&a&&a.cart&&a.cart.item&&a.cart.item.length&&a.cart.item[0].productInfo&&a.cart.item[0].productInfo.flightType||""},getShopType:function(){return o.itinerary.searched.isExecutionPage()&&a&&a.attributes&&a.attributes.ticketType}},selected:{isExecutionPage:function(){return/(\/cart\/activity\/tripsummary\.action|\/cart\/activity\/fareChangeAction\.action)/i.test(e.location.pathname)},fetch:function(){return o.itinerary.fetchItineraries(o.itinerary.selected.isExecutionPage)}},purchased:{isExecutionPage:function(){return/(\/cart\/activity\/flightPurchase\.action|\/cart\/activity\/ccCheckReqAction\.action|\/cart\/activity\/VBVToCart\.action|\/cart\/activity\/ticketFulfillment\.action|\/cart\/activity\/alipayPaymentResult\.action|\/cart\/activity\/onlineBankingPaymentReturnAction\.action|\/cart\/activity\/acculynkPinSubmitResultAction\.action)/i.test(e.location.pathname)},fetch:function(){return o.itinerary.fetchItineraries(o.itinerary.purchased.isExecutionPage)}}},dataCollect:function(e,t,i){var n;e&&(n={url:"https://tkpi.delta.com/datacollect",httpMethod:i=i||"POST"},e&&(e.id=79992,e.requesttype=t||"page.load","POST"===i?r.ajax({url:n.url,type:n.httpMethod,contentType:"application/json",data:JSON.stringify(e),dataType:"json",crossDomain:!0,xhrFields:{withCredentials:!0}}):"GET"===i&&r.ajax({url:n.url,method:n.httpMethod,data:e})))}},s=[{key:"t1",source:o.session.getID},{key:"t2",source:o.session.getCreatedDate},{key:"t3",source:o.session.getStatus,transformations:[o.utilities.transformations.toLowerCase]},{key:"t4",source:o.session.getServerSessionID},{key:"t5",source:o.session.getAdobeVisitorID},{key:"t6",source:o.session.getForeseeID},{key:"t7",source:o.user.getID},{key:"t8",source:o.user.getIsLoggedIn},{key:"t9",source:o.user.getAvailableMiles},{key:"t10",source:o.user.getSegment,transformations:[o.utilities.transformations.toLowerCase]},{key:"t11",source:o.itinerary.searched.getOriginAirportCode,transformations:[o.utilities.transformations.toLowerCase]},{key:"t12",source:o.itinerary.searched.getDestinationAirportCode,transformations:[o.utilities.transformations.toLowerCase]},{key:"t13",source:o.itinerary.searched.getOutboundDate},{key:"t14",source:o.itinerary.searched.getReturnDate},{key:"t15",source:o.itinerary.searched.getFareType,transformations:[o.utilities.transformations.toLowerCase]},{key:"t16",source:o.itinerary.searched.getPassengerCount},{key:"t17",source:o.itinerary.searched.getTripType,transformations:[o.utilities.transformations.toLowerCase]},{key:"t18",source:o.itinerary.searched.getShopType,transformations:[o.utilities.transformations.toLowerCase]},{key:"ta1",source:o.itinerary.selected.fetch},{key:"ta2",source:o.itinerary.purchased.fetch},{key:"t19",source:o.page.getURL},{key:"t20",source:o.page.getReferrer},{key:"t22",source:o.page.getCountry,transformations:[o.utilities.transformations.toLowerCase]},{key:"t23",source:o.page.getLanguage,transformations:[o.utilities.transformations.toLowerCase]},{key:"t24",source:o.page.getEnvironment,transformations:[o.utilities.transformations.toLowerCase]},{key:"t30",source:o.page.getTrackingCode},{key:"t31",source:o.session.getAdobeFallbackVisitorID},{key:"c1",source:o.page.getCurrentTimestamp},{key:"c2",source:o.page.getTimezoneOffset},{key:"c4",source:"ctd"}],c={},u=function(){o.utilities.isFunction(n.getData)&&(a=n.getData()),o.session.create(),o.utilities.map(s,c),o.dataCollect(c)};o.page.notifyWhenReady(function(){u()})}(window,window.document,window.jQuery,window.Bootstrapper,window.delta.dataLayer)}catch(e){}