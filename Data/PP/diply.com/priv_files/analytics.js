var diplyAnalytics=function(){"use strict";function i(i){function t(i,t){var e,r,n,o,s,a,u,c;for(e=3&i.length,r=i.length-e,n=t,s=3432918353,a=461845907,c=0;c<r;)u=255&i.charCodeAt(c)|(255&i.charCodeAt(++c))<<8|(255&i.charCodeAt(++c))<<16|(255&i.charCodeAt(++c))<<24,++c,u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295,n^=u,n=n<<13|n>>>19,o=5*(65535&n)+((5*(n>>>16)&65535)<<16)&4294967295,n=(65535&o)+27492+(((o>>>16)+58964&65535)<<16);switch(u=0,e){case 3:u^=(255&i.charCodeAt(c+2))<<16;break;case 2:u^=(255&i.charCodeAt(c+1))<<8;break;case 1:u^=255&i.charCodeAt(c),u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295,n^=u}return n^=i.length,n^=n>>>16,n=2246822507*(65535&n)+((2246822507*(n>>>16)&65535)<<16)&4294967295,n^=n>>>13,n=3266489909*(65535&n)+((3266489909*(n>>>16)&65535)<<16)&4294967295,n^=n>>>16,n>>>0}function e(){var i=Date.now(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?e:3&e|8).toString(16)});return t}this.createWithParams=function(){var i=this.idString.split(".");this.domainHash=i[0],this.visitorHash=i[1],this.initial=i[2],this.previousSession=i[3],this.currentSession=i[4],this.sessionCounter=i[5],this.type="Visitor",this.fire=this.checkVisit(),this.updateIdString()},this.create=function(){this.domainHash=1,this.visitorHash=t(navigator.userAgent+e()),this.initial=Math.round(Date.now()/1e3),this.previousSession=this.initial,this.currentSession=this.initial,this.sessionCounter=1,this.type="UniqueVisitor",this.fire=!0,this.updateIdString()},this.checkVisit=function(){var i=Math.round(Date.now()/1e3);return i-this.currentSession>1800?(this.previousSession=this.currentSession,this.currentSession=i,this.sessionCounter++,!0):(this.currentSession=i,!1)},this.updateIdString=function(){this.idString=this.domainHash+"."+this.visitorHash+"."+this.initial+"."+this.previousSession+"."+this.currentSession+"."+this.sessionCounter;var i=new Date;i.setTime(i.getTime()+63072e6),Cookies.set("_gveuid",this.idString,{expires:i,path:"/"})},this.idString=Cookies.get(i),void 0===this.idString||null===this.idString||""===this.idString?this.create():this.createWithParams()}function t(i){var t=Cookies.get("userLang"),n="en";if(t)t=decodeURIComponent(t),t=JSON.parse(t),n=t.lang;else{var o=navigator.language||navigator.userLanguage;n=o.split("-")[0]}var s={platformId:r.platformId,platformVersion:r.platformVersion,visitor:i.visitorHash,initial:i.initial,previous:i.previousSession,current:i.currentSession,visits:i.sessionCounter,language:n,type:i.type};e(s)}function e(i){var t=Cookies.get("_gveuid");if(""!==t){var e=t.split(".");i.visitorId=e[1]+"."+e[2]}$.ajax({type:"GET",url:environmentConfig.authApi+"v1/auth/view",success:function(t){$.ajax({type:"POST",url:environmentConfig.goViralServiceBusURI+environmentConfig.goViralViewHubName+"/messages/?timeout=60",data:JSON.stringify(i),contentType:"application/json",beforeSend:function(i){i.setRequestHeader("Authorization",t),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Access-Control-Allow-Credentials","true"),i.setRequestHeader("Access-Control-Allow-Origin","true")}})}})}var r={platformId:1,platformVersion:2,articleId:null,publication:null,rootArticleId:null},n=new i("_gveuid");return n.fire&&t(n),{articleTrack:function(i){var t={platformId:r.platformId,platformVersion:r.platformVersion,articleId:i.Slug||0,rootArticleId:i.UserArticleId,page:(0===i.PageNumber?1:i.PageNumber)||0,category:i.Category.id,parentCategory:i.Category.ParentCategoryId,isFraudulent:i.IsFraudulent,hasAddBlock:i.AdBlock,articleUrl:window.location.href,publication:i.Publication.id||"none",userAgent:navigator.userAgent||"none",referrer:document.referrer,language:i.Language||"en",type:"ViewMetric"};r.articleId=t.articleId,r.publication=t.publication,r.rootArticleId=t.rootArticleId,e(t),i.VisitorId=t.visitorId,i.PlatformId=r.platformId},videoTrack:function(i,t,n){var o={platformId:r.platformId,platformVersion:r.platformVersion,articleId:0,publication:"none",videoId:i,durationBoxIndex:t,videoDuration:n,type:"VideoMetric"};r.articleId&&r.publication&&(o.articleId=r.articleId,o.publication=r.publication),r.rootArticleId&&(o.rootArticleId=r.rootArticleId),e(o)}}}();