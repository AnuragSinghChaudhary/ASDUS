define(["jquery","eventDispatcher","overlay","formEndpointValidation","ajaxConfig","ajaxLoader","formValidation","litelog","handlebars","accordion"],function(e,t,n,r,i,s,o,u,a,f){function E(){e(window).on("overlay.loaded",function(){h=e("#share-by-email-overlay-ajax-form"),p=e("#share-by-email-send-more-friends"),p=e("#share-by-email-send-more-friends, #share-by-email-send-more-friends-ajax"),d=e(".share-by-email-send-more-friends-accordion-button"),r.newInstance(h,S),E()}),f.setAccordians(),p.off("change").on("change",function(){C(),N(v,T)}),r.newInstance(c,S),e(".js-wishlistsharemobile").on("click",function(t){t.preventDefault(),l.debug("loading wishlist code"),e.ajax({url:e(".js-wishlistsharemobile").data("wishlistcodeAjaxEndpoint"),data:{code:e(".js-wishlistsharemobile").data("wishlistcode")},success:function(t){l.debug("generated url is",t),window.location=e(".js-wishlistsharemobile").attr("href")+"%0A"+t}})}),e(".social-overlay-icon a").off("mouseover").on("mouseover",function(){e(this).addClass("_active")}).on("mouseout",function(){e(this).removeClass("_active")})}function S(t){var n=h.find('input[name="type"]').val();l.log(n);switch(n){case"WISHLIST":case"PRODUCT":case"STORE":switch(t.status){case"ok":e.event.trigger({type:"formOk",form:this.$form});var r=e(".share-by-email-overlay-form"),i=e(".share-by-email-confirmation-container");e(r).fadeOut(),e(i).fadeIn();break;default:x(t)}break;default:x(t)}}function x(e){return n.close("#share-by-email-overlay"),L(),e}function T(){return e(this).closest(".accordion-item").hasClass("_open")}function N(e,t){t?e.attr("required","required"):(e.removeAttr("required"),e.removeClass("error"),e.next().remove())}function C(){d.click()}function k(){var t=e(".share-email").attr("data-socialTitle"),n=e(".share-email").attr("data-socialDescription"),r=e("textarea[name=comment]").val(),i=e(".share-email").attr("data-socialUrl"),s=e(".share-by-email-recepient"),o="";s.length==1?o=e(s[0]).val():e.each(s,function(t,n){o+=e(n).val()+","}),t&&(t=t.replace("&","and")),n&&(n=n.replace("&","and"),n=n.replace(" ,",","),n=e.trim(n)),t&&n?window.location="mailto:"+o+"?body="+r+" "+n+", "+i+"&subject="+t:t?window.location="mailto:"+o+"?body="+r+" "+t+", "+i+"&subject="+t:n?window.location="mailto:"+o+"?body="+r+" "+n+", "+i+"&subject=Gucci product":window.location="mailto:"+o+"?body="+r+" "+i+"&subject=Gucci product"}function L(){e('#share-by-email-overlay-form input[name="recipientName1"]').val(""),e('#share-by-email-overlay-form input[name="recipientEmail1"]').val(""),e('#share-by-email-overlay-form input[name="recipientName2"]').val(""),e('#share-by-email-overlay-form input[name="recipientEmail2"]').val(""),e('#share-by-email-overlay-form input[name="recipientName3"]').val(""),e('#share-by-email-overlay-form input[name="recipientEmail3"]').val(""),e('#share-by-email-overlay-form textarea[name="comment"]').val("")}var l=new u("Share by email"),c=e("#share-by-email-overlay-form"),h=e("#share-by-email-overlay-ajax-form"),p=e("#share-by-email-send-more-friends, #share-by-email-send-more-friends-ajax"),d=e(".share-by-email-send-more-friends-accordion-button"),v=e(".share-by-email-overlay-form-container.accordion-drawer input"),m=e(document).find("title").text(),g=window.location.href,y=e("#top-right-share"),b=e(".share-by-email-overlay-form-send-button"),w=e(".share-by-email-overlay");return{load:function(){function e(){}E(),t.dispatchAndListen("overlayShareByEmail",e)}}});