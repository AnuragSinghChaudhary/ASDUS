define(["jquery","eventDispatcher","overlay","formEndpointValidation","ajaxConfig","ajaxLoader","passwordAttempts"],function(e,t,n,r,i,s,o){function d(){e(a).on("click",b),e(f).on("click",b),h.prop("action",c),r.newInstance(h,m),E(),e("body").on("click","#btn-attempt-continue",v),e("body").on("click",".sign-in-button",function(){e(p).removeClass("form-error"),e(p+" input").removeClass("error"),e(p+" span.error-text").remove(),e("#accountLockedError").html("")})}function v(){o.failedPasswordAttemptsContinue()}function m(e){e.status==="ok"&&(g(),y())}function g(){n.close(l)}function y(){var t="header-my-account-menu";s.loadJson(t,"header-nav-sign-in-group",e(this),"header-nav-sign-in-group"),n.close(l),hybris.fav.signInCB(),e(".header-nav-back").removeClass("nav-back-white"),e(".header-nav-drawer.header-nav-drawer-child").removeClass("drawer-white")}function b(t){var r=e(this).attr("href");w(),n.close(l),n.open(r),S(t)}function w(){e(".global-error-message").html(""),e("#email-error").html(""),e(".forgot-password-email").removeClass("error")}function E(){e("input[type=checkbox]",u).on("click",function(){var t=e(this);t.is(":checked")?t.val("true"):t.val("false")})}function S(e){e&&e.preventDefault&&e.preventDefault()}var u="#loginForm1",a=".recover-password",f=".recover-account",l="#sign-in-overlay",c=i.getRemoteService("SIGN-IN-ENDPOINT"),h=e(u,".sign-in-overlay-body"),p="#loginForm1";return{load:function(){function e(){}d(),t.dispatchAndListen("signInAjax",e)}}});