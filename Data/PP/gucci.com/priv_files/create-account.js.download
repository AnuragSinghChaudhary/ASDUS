define(["jquery","eventDispatcher","overlay","formEndpointValidation","ajaxConfig","ajaxLoader","strongPassword"],function(e,t,n,r,i,s,o){function k(){n.nextSlideOverlay(),d.val(e(f).val())}function L(t){t.status==="recognized"&&k(),t.status==="error"&&(e(T).addClass("hide"),e(".subscribe-mailing",u).find(".error-text").length&&e(".initials-checkbox",u).addClass("error"))}function A(e){e.status==="ok"&&(_(),P())}function O(){g.val("").removeClass("ok-ico"),n.prevSlideOverlay()}function M(t){var n=e(this);n.toggleClass(l),b.val(n.is("._active")?"true":"false"),t.preventDefault()}function _(){n.close(u)}function D(){hybris.fav.createAccountCB()}function P(){var t="header-my-account-menu";s.loadJson(t,"header-nav-sign-in-group",e(this),"header-nav-sign-in-group"),window.location=hybris.contextPath+"/my-account",e(".header-nav-back").removeClass("nav-back-white"),e(".header-nav-drawer.header-nav-drawer-child").removeClass("drawer-white")}function H(){m.on("click",M),n.onOpen(B),F(w,u,a),y.on("click",j),v.on("click",O);var t=e("#create-account-form",u);r.newInstance(t,D,L);var i=e("#recognized-email-form",u);i.prop("action",c),r.newInstance(i,P,A),N.bind("keyup change",o.checkStrongPw)}function B(){e(u).hasClass("_active")&&b.val()=="true"&&(m.addClass("_active"),e(".subscribe-mailing .error-text").remove())}function j(t){var r=e(this).attr("href");_(),n.open(r),I(t)}function F(t,n,r){t.on("click",function(t){t.preventDefault();var i=e(n),s=e(this).parents(r),o=i.data("redirect-url")||s.find('input[name="referer"]').val(),u=i.data("save-item")||s.find('input[name="productCode"]').val(),a=i.data("shopping-bag")||s.find('input[name="cartEntryNumber"]').val(),f=i.data("ajax-form")||s.find('input[name="ajaxFormName"]').val(),l=hybris.contextPath+f;f.length>0&&e.post(l,{productCode:u,referer:o,cartEntryNumber:a,CSRFToken:hybris.CSRFToken},function(){window.location=l})})}function I(e){e&&e.preventDefault&&e.preventDefault()}var u=".form-create-account",a=".content",f=".create-account-input-mail",l="_active",c=i.getRemoteService("RECOGNIZED-EMAIL-ENDPOINT"),h=e(".continue-with-login"),p=e(".new-account-button"),d=e(".input-recognized-email-mail"),v=e(".overlay-other-account-link"),m=e(".create-account-form").find(".initials-checkbox"),g=e('.create-account-form input[type="password"], .create-account-form input[type="text"]'),y=e(".overlay-recover-password",e(".overlay-recover-message-line")),b=e("#subscribeToNewsletter"),w=e("._submit-form-data"),E="#strong-pw-criterias",S=e(E).data("name-pw"),x=e(E).data("name-pw-check"),T=".error-balloon-force-pw",N=e('input[name="'+S+'"]'),C=e('input[name="'+x+'"]');return{load:function(){function e(){h.removeClass("inactive-module"),p.removeClass("inactive-module")}H(),t.dispatchAndListen("createAccount",e)}}});