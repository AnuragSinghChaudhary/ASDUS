/*! AGR-AS9-SHOE2-3 */
!function(a){dlp=document.location.protocol;var b="https://www.amtrakguestrewards.com",c="tickets.amtrak.com",d=c;d="https://"+d,formatNumber=function(a){x1=Number(a).toFixed();for(var b=/(\d+)(\d{3})/;b.test(x1);)x1=x1.replace(b,"$1,$2");return x1},sso_get_cookie=function(a){var b=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)");return b?unescape(b[2]):null},createSSOCookie=function(a,b,c){if(console.log(a+" :: "+b+" ::"+c),c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+";domain=.amtrak.com;path=/"},cnvrt2Upper=function(a){function b(){return arguments[0].toUpperCase()}return a.toLowerCase().replace(/\b[a-z]/g,b)},eraseCookie=function(a){createSSOCookie(a,"",-1),console.log(a+" cookie erased.")},ssoCheckEnrollStatus=function(){var a=sso_get_cookie("GRC"),b=sso_get_cookie("NGRC");if(!a&&""!=getFirstName()){b&&eraseCookie("NGRC");var c=getFirstName()+"|p=0|v=0|t=C|ted=12/31/4000|r=0|c=0|rq=false|nt=S|ntd=Select|ntc=select|ntpr=5000|cc=N|at=MBR";createSSOCookie("GRC",c,1)}},ssoBuildInitBox=function(){var a='.ocoAMT a{color:#167fa6 !important}.ocoAMT strong{font-size:1em}.ocoAMT .my-account-popover__container_details_basic-info_stats_item{text-align:left !important;width:575px;max-width:575px}.ocoAMT .signout-form__content_btn{color:#ffffff !important}.ocoAMT .my-account-popover__container_details_basic-info_AMT{display:inline-block !important;width:72% !important;float:left !important}.site-topnav__navlink_menu-icon{background:inherit !important}form.signout-form.am-js__signout-form.oco{display:inherit !important;padding:0 !important;background:inherit;margin:0 !important}#top_navigation_body .my-account-popover__container_details_basic-info_primary_picture{margin-bottom:0 !important}.my-account-popover__container_details_basic-info_primary_membership_name{margin-top:0 !important}.my-account-popover__container_details_basic-info_primary_membership_core{text-align:left;margin-bottom:0;font-size:1.6rem;color:#167fa6;margin-top:5px;position:relative;display:inline-block}.site-topnav__navlink_my-account_content{font-size:1.4rem}.signout-form__content_btn{font-size:1.4rem;border-radius:3px;display:inline-block;vertical-align:middle;margin:0;outline:0;text-align:center;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid transparent;text-decoration:none;line-height:1;font-weight:600;-webkit-transition:all .3 cubic-bezier(.77, 0, .175, 1);transition:all .3 cubic-bezier(.77, 0, .175, 1);padding:12px 10px;text-transform:uppercase;letter-spacing:2px;background-color:#167fa6;color:#ffffff}.signout-form{padding:0 !important;margin-top:0 !important;background:inherit !important}.my-account-popover__complete-profile_details{max-width:286px}a.my-account-popover__complete-profile_edit-btn:hover{color:#ffffff !important}.page-content{z-index:0 !important}.site-topnav__navlink_my-account_btn{padding:0 10px !important}.my-account-popover__container_details_basic-info_stats{clear:both;width:575px;max-width:575px}.my-account-popover__container_details_basic-info_primary{display:inline-block !important;width:60% !important;float:left !important}.my-account-popover__container_links_header{min-height:60px;background:#002436;border-color:#00344d;padding-left:40px;text-transform:uppercase;font-size:1.4rem;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #d4d8d9;font-weight:400;text-align:left}#top_navigation_body .my-account-popover__container_details_basic-info_stats_item{letter-spacing:0 !important}#top_navigation_body .my-account-popover__container_details_basic-info_stats_item_label{font-weight:400;letter-spacing:0}a.signout-form__content_btn{background:#167fa6}a.signout-form__content_btn:hover{background-color:#1ca1d3 !important;color:#ffffff !important}.my-account-popover__container_details_basic-info_learn-tier{text-align:left;letter-spacing:0;padding-top:30px;padding-bottom:5px;clear:both}.my-account-popover__container_details_basic-info_learn-tier a{color:#167FA6 !important;display:inline-block !important;font-size:1.4rem;text-decoration:underline !important}.my-account-popover__container_details_basic-info_learn-tier a:hover{color:#75e1ff !important}.my-account-popover__container_details_basic-info_progresstier{display:block;float:left;padding-bottom:20px;text-align:left;padding-top:5px}.my-account-popover__container_details_basic-info_progresstier a{color:#167FA6 !important;display:inline-block !important;font-size:1.4rem;text-decoration:underline !important}.my-account-popover__container_details_basic-info_progresstier a:hover{color:#75e1ff !important}.my-account-popover__container_details_basic-info_signoutbtn{text-align:center;background:#167fa6;border-radius:3px 3px 3px 3px;-moz-border-radius:3px 3px 3px 3px;-webkit-border-radius:3px 3px 3px 3px;color:#ffffff;font-size:1.4rem;font-weight:600;padding:6px 15px}.my-account-popover__container_details_basic-info_signoutbtn:hover{background:#1ca1d3;color:#ffffff}.my-account-popover__container_details_basic-info_stats{clear:both}#gr-summary{display:none}#gr-summary.loggedin{display:block}@media only screen and (max-width:62.5em){#top_navigation_body .site-primary-nav,#top_navigation_body .site-topnav__my-account,.mobile-nav-content{padding-top:10px;margin-top:46px}#top_navigation_body .my-account-popover__container_details_basic-info{padding:20px 15px 100px !important}.nomob{display:none !important}.site-topnav__my-account{vertical-align:top !important;margin-top:50px !important;top:0 !important;padding-top:0 !important}}@media only screen and (min-width:37.5625em){[data-accordion] .my-account-popover__container_links_content[data-content]{max-height:100%}}@media only screen and (max-width:1000px){.agr-modal .modal-content{width:90% !important}}[data-accordion] [data-content]{overflow:hidden;max-height:0}.my-account-popover__container_links_content{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.my-account-popover__container_details_basic-info_stats{width:100%}.my-account-popover__container_details_basic-info_stats_item{width:100%}a.my-account-popover__container_details_basic-info_stats_item_value{font-size:1.8rem;color:#167fa6 !important;display:block;margin-top:3px}#top_nav_wrapper{position:relative}.agr-modal{display:none;position:fixed;z-index:200;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000000;background-color:rgba(0,0,0,0.4)}.agr-modal .close{color:#fff;float:right;font-size:17px;font-weight:bold;text-align:center;margin-top:10px;width:20px;height:20px;border-radius:50%;border:2px solid #fff;background-color:#21628a;line-height:.9;margin-right:10px;padding-left:1px}.agr-modal .signout-form__content_btn{color:#ffffff;text-decoration:none}.agr-modal .close:hover,.agr-modal .close:focus{color:rgba(255,255,255,0.8);text-decoration:none;cursor:pointer}.agr-modal .modal-header{padding:2px 16px}.agr-modal .modal-body{padding:30px}.agr-modal .modal-content{position:relative;background-color:#fefefe;margin:auto;padding:0;border:1px solid #888;border-radius:10px;width:500px;margin-top:100px;box-shadow:0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);-webkit-animation-name:agr-animatetop;-webkit-animation-duration:.4s;animation-name:agr-animatetop;animation-duration:.4s}.agr-modal .modal-content h1{font-weight:bold;font-family:"Helvetica","myriad-pro",sans-serif;color:#003A5D;font-size:135%;line-height:1;text-transform:uppercase}.agr-modal .modal-content strong{font-size:100%}.agr-modal .modal-content p{font-size:1.3rem;font-family:"Helvetica","myriad-pro",sans-serif}.agr-modal .modal-content p sup{display:inline-block;font-size:90%}.agr-modal .modal-content button{color:#ffffff;text-transform:uppercase;font-weight:bold;font-size:135%;line-height:1.25;background-color:#21628a;padding:10px 20px;border-radius:8px;border:0 solid transparent;cursor:pointer}@-webkit-keyframes agr-animatetop{from{top:-300px;opacity:0}to{top:0;opacity:1}}@keyframes agr-animatetop{from{top:-300px;opacity:0}to{top:0;opacity:1}}',b=document.createElement("style");parseInt(navigator.userAgent.substring(navigator.userAgent.indexOf("MSIE")+5));b.setAttribute("type","text/css");var c=document.createTextNode(a);b.appendChild(c);var d=document.getElementsByTagName("head")[0];d.appendChild(b)},ssoBuildBox=function(){ssoCheckEnrollStatus();var c=sso_get_cookie("GRC"),e=sso_get_cookie("NGRC");if(ssoBuildInitBox(),a(document).ready(function(){var c=a(".am-js__signout-form").detach();c.appendTo(".my-account-popover__container_details_basic-info_signout"),a(".my-account-popover__container_links_header").click(function(){a(".my-account-popover__container_links_content_item").slideToggle()}),a("li.site-topnav__navlink_my-account").before('<li class="nomob" style="display: inline-block; padding: 10px;"><a href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'">Guest Rewards</a></li>')}),c){var f=c,g=!0;if(f.indexOf("|")>=0){f=f.split("|"),f.reverse(),g=!0;var h=(new Date).getFullYear(),i=(new Date).getFullYear()+1,j=f.pop();j=j.replace(/\+/g," ");var k,l,m,n,o,p,q,r,s,s,t,u,v,w=(cnvrt2Upper(j.replace(/\+/g," ")),0),x=0;pointHTML="",F="";for(var y="",z=0;z<f.length;z++){var A=f[z].split("=");switch(A[0]){case"at":v=A[1];break;case"p":k=A[1];break;case"v":l=parseInt(A[1]);break;case"t":m=A[1];break;case"ted":n=A[1];break;case"r":o=parseInt(A[1]);break;case"c":p=parseInt(A[1]);break;case"rq":q=A[1];break;case"nt":r=A[1];break;case"ntd":s=A[1].replace(/\+/g," ");break;case"ntc":t=A[1];break;case"ntpr":u=parseInt(A[1]);break;case"sts":y=A[1]}}var B=document.querySelector(".site-topnav__my-account"),C=document.createElement("div"),D=(Math.min(Math.round(o/200),100),""),w=0,x=0,E="",F="";F="S"==m?"Select":"E"==m?"Select Executive":"P"==m?"Select Plus":"Member",CouponDetails='<div class="my-account-popover__container_details_basic-info_stats_item"><span class="my-account-popover__container_details_basic-info_stats_item_label">MY COUPONS</span><a class="my-account-popover__container_details_basic-info_stats_item_value" href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/vouchers/show" data-automation-id="lnkMyAccountCoupons">'+p+'</a><span class="my-account-popover__container_details_basic-info_stats_item_value"></span></div>',myAcctNavigation='<div class="my-account-popover__container_links_content_item"><a class="my-account-popover__container_links_content_item_link" href="'+d+'/itd/amtrak/Reservations" data-automation-id="lnkMyAccountMy Trips"><span class="my-account-popover__container_links_content_item_link_item">My Trips</span></a></div><div class="my-account-popover__container_links_content_item"><a class="my-account-popover__container_links_content_item_link" href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'" target="_blank"><span class="my-account-popover__container_links_content_item_link_item">My Guest Rewards</span></a></div><div class="my-account-popover__container_links_content_item"><a class="my-account-popover__container_links_content_item_link" href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/redeem" data-automation-id="lnkMyAccountRedeemForTravel"><span class="my-account-popover__container_links_content_item_link_item">Redeem for Travel</span></a></div><div class="my-account-popover__container_links_content_item"><a class="my-account-popover__container_links_content_item_link" href="'+d+'/itd/amtrak?handler=amtrak%2epresentation%2ehandler%2erequest%2eprofile%2eAmtrakPresProfilePreDisplayRequestHandler" data-automation-id="lnkMyAccountMy Profile"><span class="my-account-popover__container_links_content_item_link_item">My Profile</span></a></div><div class="my-account-popover__container_links_content_item"><a class="my-account-popover__container_links_content_item_link" href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/retro" data-automation-id="lnkMyAccountMissingPoints"><span class="my-account-popover__container_links_content_item_link_item">Missing Points?</span></a></div><div class="my-account-popover__container_links_content_item"><a class="my-account-popover__container_links_content_item_link" href="'+d+'/itd/amtrak?handler=amtrak%2epresentation%2ehandler%2erequest%2eprofile%2eAmtrakPresProfilePreDisplayRequestHandler#register_form_buttons" data-automation-id="lnkMyAccountCommunication Preferences"><span class="my-account-popover__container_links_content_item_link_item">Communication Preferences</span></a></div>',"P"==y&&(E='<div class="my-account-popover__complete-profile"><div class="my-account-popover__complete-profile_details"><div><span class="my-account-popover__complete-profile_details_label">READY TO REDEEM?</span></div><span class="my-account-popover__complete-profile_details_text">In order to redeem points, please provide your address to complete your profile.</span></div><a class="my-account-popover__complete-profile_edit-btn" href="'+d+'/itd/amtrak?handler=amtrak%2epresentation%2ehandler%2erequest%2eprofile%2eAmtrakPresProfilePreDisplayRequestHandler#billing_address">Edit Profile</a></div>'),D='<span class="my-account-popover__container_details_basic-info_primary_membership_core">'+F+"</span>","C"!=m&&(D='<span class="my-account-popover__container_details_basic-info_primary_membership_type">'+F+'</span><span class="my-account-popover__container_details_basic-info_primary_membership_left">Until '+n+"</span>",w=2e4==u?1e4:u-5e3,"E"==r&&o>19999?pointHTML='<div class="my-account-popover__container_details_basic-info_progresstier"><span class="my-account-popover__container_details_basic-info_stats_item_label">Congrats, you\'ve earned Select Executive</span></div>':o>0||"true"==q?(x=u-o,"true"==q&&m==r?pointHTML='<div class="my-account-popover__container_details_basic-info_progresstier"><span class="my-account-popover__container_details_basic-info_stats_item_label"><a href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/transactions/list">'+formatNumber(x)+" TQPs</a> to renew "+s+" for "+i+"</span></div>":"true"==q&&m!=r?(x="E"==m?2e4-o:1e4-o,pointHTML='<div class="my-account-popover__container_details_basic-info_progresstier"><span class="my-account-popover__container_details_basic-info_stats_item_label"><a href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/transactions/list">'+formatNumber(x)+" TQPs</a> to renew "+F+" for "+i+"</span></div>"):pointHTML='<div class="my-account-popover__container_details_basic-info_progresstier"><span class="my-account-popover__container_details_basic-info_stats_item_label"><a href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/transactions/list">'+formatNumber(x)+" TQPs</a> to reach "+h+" "+s+"</span></div>"):k>0?pointHTML='<div class="my-account-popover__container_details_basic-info_progresstier"><span class="my-account-popover__container_details_basic-info_stats_item_label">You have <a href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/transactions/list">'+formatNumber(o)+" TQPs</a> year to date.</span></div>":pointHTML='<div class="my-account-popover__container_details_basic-info_progresstier"><span class="my-account-popover__container_details_basic-info_stats_item_label">Learn more about your member benefits and earning</span> <a href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/info">tier status</a></div>'),"C"==m&&(x=u-o,0==p&&(CouponDetails=""),0==x?pointHTML='<div class="my-account-popover__container_details_basic-info_progresstier"><span class="my-account-popover__container_details_basic-info_stats_item_label">You have <a href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/transactions/list">'+formatNumber(o)+" TQPs</a> year to date.</span></div>":pointHTML='<div class="my-account-popover__container_details_basic-info_progresstier"><span class="my-account-popover__container_details_basic-info_stats_item_label"><a href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/transactions/list">'+formatNumber(x)+" TQPs</a> to reach "+h+" "+s+"</span></div>",0==k&&(pointHTML='<div class="my-account-popover__container_details_basic-info_progresstier"><span class="my-account-popover__container_details_basic-info_stats_item_label">Learn more about your member benefits and earning</span> <a href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/info">tier status</a></div>')),C.innerHTML='<div class="oco"><div class="my-account-popover am-js__my-account-popover" data-account-data-url="etc/designs/dotcom-assets/dam-assets/mock-data/my-account-popover.json" data-method="GET">'+E+'<div class="my-account-popover__held-trip hide"><div class="my-account-popover__held-trip_details"><div><span class="my-account-popover__held-trip_details_label"></span><span class="my-account-popover__held-trip_details_expiry"></span></div><span class="my-account-popover__held-trip_details_trip"></span></div><button class="my-account-popover__held-trip_book-btn" data-automation-id="bookHeldTripNowBtn" type="button"><span class="hide-from__screen">Held trip</span></button></div><div class="my-account-popover__container"><div class="my-account-popover__container_details"><div class="my-account-popover__container_details_basic-info"><div class="my-account-popover__container_details_basic-info_primary"><div class="c100 green my-account-popover__container_details_basic-info_primary_picture p65"><div class="slice"><div class="bar"></div><div class="fill"></div></div></div><div class="my-account-popover__container_details_basic-info_primary_membership"><h2 class="my-account-popover__container_details_basic-info_primary_membership_name">'+j+"</h2>"+D+'</div></div><div class="my-account-popover__container_details_basic-info_signout"></div>'+pointHTML+'<div class="my-account-popover__container_details_basic-info_stats"><div class="my-account-popover__container_details_basic-info_stats_item"><span class="my-account-popover__container_details_basic-info_stats_item_label">TOTAL POINTS</span><a class="my-account-popover__container_details_basic-info_stats_item_link" href="'+d+"/itd/amtrak/SendSAMLResponse?targetPage="+b+'/transactions/list"><span class="my-account-popover__container_details_basic-info_stats_item_value">'+formatNumber(k)+"</span></a></div>"+CouponDetails+'</div></div></div><div data-accordion="" class="my-account-popover__container_links"><div data-control="" class="my-account-popover__container_links_header"><h3 class="my-account-popover__container_links_header_title">My Account</h3></div>'+myAcctNavigation+"</div></div></div></div></div>"}}else if(e){var G=e;G.indexOf("/")>=0&&(G=G.split("/")[1]);var g=!0,B=document.querySelector(".site-topnav__my-account"),C=(document.querySelector("#top_nav_wrapper"),document.createElement("div")),H='<h1>Keep your account access</h1><p><strong>Your current Amtrak<sup>&reg;</sup> account access will expire on May 14, 2018.</strong> To keep your access and enjoy more benefits, become an <a href="https://www.amtrakguestrewards.com/info" title="Amtrak Guest Rewards Program Info">Amtrak Guest Rewards<sup>&reg;</sup></a> member today.</p><p>Becoming a member means you&#8217;ll still be able to see your travel history and upcoming trips in one place, plus your preferences and address settings will be saved. If you don&#8217;t join, you will still be able to book tickets online as a guest.</p><p><a class="signout-form__content_btn" href="'+b+'/members/new">Join Now</a></p><p><a href="http://www.amtrakguestrewards.com/info/terms" title="Amtrak Guest Rewards Program Terms and Conditions">View complete program Terms and Conditions &raquo;</a></p><p><strong>Still seeing this message after joining Amtrak Guest Rewards? Please log out and log back in to prevent it from displaying in the future.</strong></p>';"false"==e&&(ssoAddModal(H),ssoShowModal()),"false"==e||""==e?(NGRCheadline='<h2 class="my-account-popover__container_details_basic-info_primary_membership_name">&nbsp;</h2>',NGRCbodycopy='<p>Get started with 500 bonus points when you travel within 90 days of joining.<br /><br/ ><a class="signout-form__content_btn" href="'+b+'/members/new">Join Now</a>'):(NGRCheadline='<h2 class="my-account-popover__container_details_basic-info_primary_membership_name">&nbsp;</h2>',""!=G?NGRCbodycopy="<p>Welcome, "+G+". Be sure to use your member number when booking travel and transacting with program partners to earn points as you go.</p>":NGRCbodycopy="<p>Welcome. Be sure to use your member number when booking travel and transacting with program partners to earn points as you go.</p>"),C.innerHTML='<div class="ocoAMT"><div class="my-account-popover am-js__my-account-popover" data-account-data-url="etc/designs/dotcom-assets/dam-assets/mock-data/my-account-popover.json" data-method="GET"><div class="my-account-popover__held-trip hide"><div class="my-account-popover__held-trip_details"><div><span class="my-account-popover__held-trip_details_label"></span><span class="my-account-popover__held-trip_details_expiry"></span></div><span class="my-account-popover__held-trip_details_trip"></span></div></div><div class="my-account-popover__container"><div class="my-account-popover__container_details"><div class="my-account-popover__container_details_basic-info"><div class="my-account-popover__container_details_basic-info_AMT"><div class="c100 green my-account-popover__container_details_basic-info_primary_picture p65"><div class="slice"><div class="bar"></div><div class="fill"></div></div></div><div class="my-account-popover__container_details_basic-info_primary_membership">'+NGRCheadline+'</div></div><div class="my-account-popover__container_details_basic-info_signout"></div><div class="my-account-popover__container_details_basic-info_stats"><div class="my-account-popover__container_details_basic-info_stats_item"><span class="my-account-popover__container_details_basic-info_stats_item_label">'+NGRCbodycopy+"</span></div></div></div></div></div></div></div>"}B.appendChild(C)},ssoAddModal=function(b){var c='<div class="agr-modal" id="convert-modal"><div class="modal-content"><span id="convert-close" class="close">&times;</span><div class="modal-body">'+b+"</div></div>";a("#top_nav_wrapper").append(c)},ssoShowModal=function(){var a=document.getElementById("convert-modal"),b=document.getElementById("convert-close");a.style.display="block",b.onclick=function(){a.style.display="none"},window.onclick=function(b){b.target==a&&(a.style.display="none")}},getParameterByName=function(a,b){b||(b=window.location.href),a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null},getFirstName=function(){return url=window.location.href,idx=url.indexOf("#"),name=-1!=idx?url.substring(idx+1):"",name}}(jQuery);