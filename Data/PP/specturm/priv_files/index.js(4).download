!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("util/index"),require("localization-view/index")):"function"==typeof define&&define.amd?define(["react","util/index","localization-view/index"],t):"object"==typeof exports?exports.localization=t(require("react"),require("util/index"),require("localization-view/index")):(e.mui=e.mui||{},e.mui.localization=t(e.React,e.mui.util,e.mui["localization-view"]))}(this,function(e,t,s){return function(e){function t(r){if(s[r])return s[r].exports;var i=s[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var s={};return t.m=e,t.c=s,t.p="",t(0)}([function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayLoader=t.AddressSearchForm=t.LocalizationForm=void 0;var i=s(1),a=r(i),n=s(14),o=r(n),d=s(15),l=r(d);t.LocalizationForm=a["default"],t.AddressSearchForm=o["default"],t.OverlayLoader=l["default"]},function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},a=s(2),n=r(a),o=s(3),d=s(4),l=s(6),u=s(8),p=s(9),c=s(10),h=s(11),f=r(h),v=s(13),y={queryParams:{},uiErrors:{},addresses:[],onLoad:null,displayLoaderHandler:null,numberOfAddressesToRestrict:1e3,enabledFields:{existingAccount:!1,salesId:!1,isCustomerPresent:!1,isBarOrRestaurant:!1,evo:!1,autosuggestAddress:!1,disableErrors:!1,disableQuestions:!1,dialogSubmitButton:!1,autoSubmit:!1,showLoadingWhileProcessing:!1,enableAddressSearchCall:!0},defaultValues:{address1:"",apt:"",zip:"",salesId:"",isCustomerPresent:"",isBarOrRestaurant:"",evo:"",account:"",displayCase:""},dynamicContent:{errorMessages:u.errorMessages,buttonText:"Go",accountLabel:"* Account #",accountPlaceholder:"Account Number",accountDescription:"What is this?",addressLabel:"* Street Address",addressPlaceholder:"Start typing your address",aptLabel:"Apartment",aptPlaceholder:"Apt/Unit",zipLabel:"* Zip Code",zipPlaceholder:"Zip Code",salesIdLabel:"* SalesID",salesIdPlaceholder:"",isCustomerPresentLabel:"* Is the customer present?",isBarOrRestaurantLabel:"* Is this a Bar or Restaurant?",evoLabel:"* What is the Estimated Viewer Occupancy (EVO)?",evoPlaceholder:"EVO",evoTooltipText:'Estimated Viewing Occupancy (EVO) is used to determine applicable packages and pricing for your Bar/Restaurant establishment.The EVO&hellip;<br /><a href="#" data-modal-link="evo">Read More...</a>',evoTooltipFullText:"Estimated Viewing Occupancy (EVO) is used to determine applicable packages and pricing for your Bar/Restaurant establishment.The EVO represents the number of persons who can view any television programming provided by Spectrum Business at any given time.",accountTooltipText:"Please enter your 16-digit account number found at the top of your monthly statement.",addressAnchorText:"Why do I need to enter my exact address?",localizationTooltipText:"Residential Services and Rates vary per location. By entering your address, we'll be able to provide you with the most accurate information for your home.",localizationDescription:"",isCustomerPresentYesValue:"yes",isCustomerPresentNoValue:"no",newlyBuiltEntered:"You have entered: ",newlyBuiltQuestion:"Is this address a newly built home or part of a new apartment complex?",multipleLocationsEntered:"We found multiple locations at: ",multipleLocationsQuestion:"Is this address correct?",nonExactMatchEntered:"We could not find an exact match for this apartment/suite: ",nonExactMatchQuestion:"Is this address correct?",loadingText:"Please wait a moment",messageToRestrictAddresses:"We have determined that there may be multiple units in your building."}},g=void 0,m=n["default"].createClass({getdisplayName:function(){return"localization/components/localization-form"},propTypes:{timeout:a.PropTypes.number,formSubmissionHandler:a.PropTypes.func,queryParams:a.PropTypes.object,uiErrors:a.PropTypes.object,addresses:a.PropTypes.array,onLoad:a.PropTypes.func,displayLoaderHandler:a.PropTypes.func,parentTransaction:a.PropTypes.object,addressType:a.PropTypes.string.isRequired,countryCode:a.PropTypes.string,multipleAddressViewType:a.PropTypes.string,numberOfAddressesToRestrict:a.PropTypes.number,enabledFields:a.PropTypes.shape({autosuggestAddress:a.PropTypes.bool,existingAccount:a.PropTypes.bool,salesId:a.PropTypes.bool,isCustomerPresent:a.PropTypes.bool,isBarOrRestaurant:a.PropTypes.bool,evo:a.PropTypes.bool,disableErrors:a.PropTypes.bool,disableQuestions:a.PropTypes.bool,dialogSubmitButton:a.PropTypes.bool,autoSubmit:a.PropTypes.bool,showLoadingWhileProcessing:a.PropTypes.bool,enableAddressSearchCall:a.PropTypes.bool,disableAptQuestion:a.PropTypes.bool}),defaultValues:a.PropTypes.shape({address1:a.PropTypes.string,apt:a.PropTypes.string,zip:a.PropTypes.string,salesId:a.PropTypes.string,isCustomerPresent:a.PropTypes.string,isBarOrRestaurant:a.PropTypes.string,evo:a.PropTypes.string,account:a.PropTypes.string,displayCase:a.PropTypes.string}),dynamicContent:a.PropTypes.shape({validationErrorMessages:a.PropTypes.object,errorMessages:a.PropTypes.object,buttonText:a.PropTypes.string,accountLabel:a.PropTypes.string,addressLabel:a.PropTypes.string,addressPlaceholder:a.PropTypes.string,accountPlaceholder:a.PropTypes.string,aptLabel:a.PropTypes.string,aptPlaceholder:a.PropTypes.string,zipLabel:a.PropTypes.string,zipPlaceholder:a.PropTypes.string,salesIdLabel:a.PropTypes.string,salesIdPlaceholder:a.PropTypes.string,isCustomerPresentLabel:a.PropTypes.string,addressAnchorText:a.PropTypes.string,localizationTooltipText:a.PropTypes.string,localizationDescription:a.PropTypes.string,isCustomerPresentYesValue:a.PropTypes.string,isCustomerPresentNoValue:a.PropTypes.string,newlyBuiltEntered:a.PropTypes.string,newlyBuiltQuestion:a.PropTypes.string,multipleLocationsEntered:a.PropTypes.string,multipleLocationsQuestion:a.PropTypes.string,nonExactMatchEntered:a.PropTypes.string,nonExactMatchQuestion:a.PropTypes.string,messageToRestrictAddresses:a.PropTypes.string}),smartyStreetsCaseMapping:a.PropTypes.shape({ErrorCases:a.PropTypes.array,QuestionCases:a.PropTypes.array,SuccessCases:a.PropTypes.array}),isSubmitModalEnabled:a.PropTypes.bool},mixins:[o.LoadPromiseMixin],getDefaultProps:function(){return y},getInitialState:function(){var e=this.preserveObjectPropDefaults("defaultValues"),t=e.address1,s=e.apt,r=e.zip,i=e.salesId,a=e.isCustomerPresent,n=e.isBarOrRestaurant,o=e.evo,d=e.account;return{address1:t,apt:s,zip:r,salesId:i,isCustomerPresent:a,isBarOrRestaurant:n,evo:o,account:d,validatedCity:"",validatedState:"",validatedAddress1:"",validatedApt:"",validatedZip:"",validatedZ4:"",errors:[],generalError:"",generalErrorFields:[],verificationEntered:"",verificationQuestion:"",showConfirmAddress:!1,addresses:{result:[],loading:!1,error:null}}},componentWillMount:function(){g=o.LoggerManager.getLogger(this.getdisplayName()),this.mountTx=o.LoggerMixin.createTransaction("MUI.Localization",this.props.parentTransaction),g.info("The localization MUI component was successfully initialized.",Object.assign({},this.mountTx)),this.props.parentTransaction||g.error("The parent transaction object for the localization form was not found.");var e=this.preserveObjectPropDefaults("defaultValues"),t=this.preserveObjectPropDefaults("dynamicContent"),s="undefined"!=typeof e.prevalidation&&e.businessInds.includes("confirmNewHome"),r=e.address1+(s&&""!==e.apt?e.apt+", ":" ")+e.zip,i={generalError:"undefined"!=typeof this.props.uiErrors.generalErrorFields?this.props.uiErrors.generalError:"",generalErrorFields:"undefined"!=typeof this.props.uiErrors.generalErrorFields?this.props.uiErrors.generalErrorFields:[],errors:"undefined"!=typeof this.props.uiErrors.errors?this.props.uiErrors.errors:[]},a=this.getValidatedAddress(e),n=this.getOtherFields(e,t,s,r);this.setState(Object.assign({},i,a,n))},getValidatedAddress:function(e){return{validatedCity:e.validatedCity?e.validatedCity:"",validatedState:e.validatedState?e.validatedState:"",validatedAddress1:e.validatedAddress1?e.validatedAddress1:"",validatedApt:e.validatedApt?e.validatedApt:"",validatedZip:e.validatedZip?e.validatedZip:"",validatedZ4:e.validatedZ4?e.validatedZ4:""}},getOtherFields:function(e,t,s,r){return{verificationEntered:s?t.newlyBuiltEntered:"",verificationQuestion:s?t.newlyBuiltQuestion:"",prevalidation:s?"new":"",businessInds:s?e.businessInds:"",addressToVerify:r,showConfirmAddress:s,addresses:{result:s?this.props.addresses:[],loading:!1,error:null}}},componentDidMount:function(){"function"==typeof this.props.onLoad&&this.props.onLoad();var e=this.preserveObjectPropDefaults("enabledFields");this.props.defaultValues.displayCase&&this.updateDisplayCaseState(this.props.defaultValues.displayCase),e.autoSubmit&&this.onSubmitHandler()},componentDidUpdate:function(e,t){t.addresses===this.state.addresses||this.state.addresses.loading||this.displayErrorOrContinueToBuyflow()},componentWillUnmount:function(){this.mountTx.success(),g.info("The localization MUI component is exiting",Object.assign({},this.mountTx))},updateFormState:function(e){this.setState(i({errors:[]},e))},onChangeAccount:function(e){var t=e.target;this.updateFormState({account:t.value})},onChangeSalesId:function(e){var t=e.target;this.updateFormState({salesId:t.value})},onChangeIsCustomerPresent:function(e){var t=e.target;this.updateFormState({isCustomerPresent:t.value})},onChangeEvo:function(e){var t=e.target;this.updateFormState({evo:t.value})},onChangeIsBarOrRestaurant:function(e){var t=e.target;this.updateFormState({isBarOrRestaurant:t.value})},removeErrorField:function(e){var t=[];if(this.state.errors){t=this.state.errors;var s=t.indexOf(e);s>=0&&t.splice(s,1)}return t},onChangeAddress1:function(e){var t=void 0;this.state.address1!==e.newValue&&(t=this.removeErrorField("address1"),this.state.errors&&this.state.errors.indexOf("apt")>=0&&(this.props.enabledFields.apt=!1,t=this.removeErrorField("apt"))),this.setState({errors:t&&t.length>0&&JSON.stringify(t)!==JSON.stringify(this.state.errors)?t:this.state.errors,generalError:"",generalErrorFields:[],address1:e.newValue})},onChangeApt:function(e){var t=e.target;this.updateFormState({apt:t.value})},onChangeZip:function(e){var t=e.target,s=(0,v.formatZip)(t.value);isNaN(s)||this.updateFormState({zip:s})},onConfirmAddress:function(e){var t=this.preserveObjectPropDefaults("enabledFields");e?(this.setState({verificationAnswer:e}),t.dialogSubmitButton||(this.state.submissionQueryStr?this.continueToBuyFlow(!1):this.continueToBuyFlow())):this.setState({generalErrorFields:["address1","zip"],generalError:"",verificationAnswer:e,submissionData:this.getFormSubmissionData()})},onSubmitFromDialog:function(){this.state.submissionQueryStr?this.continueToBuyFlow(!1):this.continueToBuyFlow()},updateErrorsState:function(e){this.setState({errors:this.state.errors.concat(e)})},getCaseInfoMapping:function(){var e=this.preserveObjectPropDefaults("dynamicContent"),t={errorInvalidZip:{generalError:e.errorMessages.errorInvalidZip,generalErrorFields:["zip"]},errorZipMatch:{generalError:e.errorMessages.errorZipMatch,generalErrorFields:["zip"]},errorLine1Match:{generalError:e.errorMessages.errorLine1Match,generalErrorFields:["address1","zip"]},errorMissingNumber:{generalError:e.errorMessages.errorMissingNumber,generalErrorFields:["address1"]},errorMissingPobox:{generalError:e.errorMessages.errorMissingPobox,generalErrorFields:["address1","zip"]},confirmNewHome:{verificationEntered:e.newlyBuiltEntered,verificationQuestion:e.newlyBuiltQuestion,showConfirmAddress:!0,prevalidation:"new",verificationAnswer:null}};return t},updateDisplayCaseState:function(e){var t=this.getCaseInfoMapping();if(e&&e in t){var s=(this.state.apt?this.state.apt+", ":"")+this.state.address1+" "+this.state.zip;this.setState(Object.assign({addressToVerify:s},t[e]))}},updateZipCode:function(e,t){var s=e.zipcode,r=[];(0,u.isStringBlank)(s)&&(g.warn("SmartyStreet validation does not return zip code for street: "+t.street_line),s="",this.state.errors&&this.state.errors.indexOf("zip")<0&&r.push("zip")),(0,u.isStringBlank)(s)||this.state.zip===s||(r=this.removeErrorField("zip")),this.setState({errors:r&&r.length>0&&JSON.stringify(r)!==JSON.stringify(this.state.errors)?r:this.state.errors,zip:s})},onSuggestionSelected:function(e,t){var s=this;t.preventDefault();var r=function(e,t){s.updateZipCode(e,t)},i=function(e){s.setState({address1:e.street_line,zip:""})};(0,d.resolveSuggestion)(e,r,i)},makeAddressValidationCall:function(e){var t=this,s=this.preserveObjectPropDefaults("enabledFields");this.addressValidationTx=o.LoggerMixin.createTransaction("MUI.Localization.Validation",this.mountTx),g.info("SmartyStreet validation begins with auto submit: "+s.autoSubmit,Object.assign({},this.addressValidationTx,e));var r=function(e){return e?void t.setState({displayCase:e.mappedResult.displayCase,allCases:e.mappedResult.allCases,validatedCity:e.validatedAddress.city,validatedState:e.validatedAddress.state,validatedAddress1:e.validatedAddress.address1,validatedApt:e.validatedAddress.apt,validatedZip:e.validatedAddress.zip,validatedZ4:e.validatedAddress.z4},t.onValidateAddressReturn):void t.setState({prevalidation:"none",allCases:"",displayCase:"",validatedCity:"",validatedState:"",validatedAddress1:"",validatedApt:"",validatedZip:"",validatedZ4:""},t.continueToBuyFlow)},i=this.props.smartyStreetsCaseMapping||c.DefaultSmartyStreetsMapping;(0,l.validateAddressValues)(e,i,g,this.addressValidationTx).then(r)},onSubmitHandler:function(e){this.setState({errors:[],generalError:"",generalErrorFields:[]}),e&&e.preventDefault();var t=(0,u.validateFields)(this.state,this.props.enabledFields);if(t.length>0)return void this.updateErrorsState(t);if("function"!=typeof this.props.formSubmissionHandler)return void g.error("Localization Form: Must provide handler for form submission");var s=this.state,r=s.address1,i=s.apt,a=s.zip,n={a:r,aptnum:i,zip:a};this.makeAddressValidationCall(n)},getCaseConfiguration:function(){var e=this.state.displayCase,t=this.getCaseInfoMapping(),s=t[e];return s},displayErrorOrContinueToBuyflow:function(){var e=this.getCaseConfiguration(),t=this.preserveObjectPropDefaults("enabledFields");e?e.generalError&&""!==e.generalError?t.disableErrors?this.continueToBuyFlow(!0,e.generalErrorFields,e.generalError):this.updateDisplayCaseState(this.state.displayCase):e.showConfirmAddress&&!t.disableQuestions&&!this.state.addresses.error&&Array.isArray(this.state.addresses.result)&&1===this.state.addresses.result.length?this.updateDisplayCaseState(this.state.displayCase):this.continueToBuyFlow():this.determineBuyFlow()},determineBuyFlow:function(){var e=this.props.numberOfAddressesToRestrict||y.numberOfAddressesToRestrict;Array.isArray(this.state.addresses.result)&&this.state.addresses.result.length>=e?this.props.enabledFields.disableAptQuestion?this.continueToBuyFlow(!0,["apt"],this.props.dynamicContent.messageToRestrictAddresses||y.dynamicContent.messageToRestrictAddresses,["apt"]):this.setState({generalErrorFields:["apt"],generalError:this.props.dynamicContent.messageToRestrictAddresses||y.dynamicContent.messageToRestrictAddresses,errors:["apt"]}):this.continueToBuyFlow()},onValidateAddressReturn:function(){var e=this.getCaseConfiguration();e?e.generalError&&""!==e.generalError?this.displayErrorOrContinueToBuyflow():e.showConfirmAddress?this.findAddress():(this.addressValidationTx.failure(),g.error("FAILURE: address validation was disabled by configuration, continuing form submission. Business indicator: "+this.state.displayCase,Object.assign({},this.addressValidationTx)),this.setState({prevalidation:"disabled"},this.continueToBuyFlow)):this.props.enabledFields.enableAddressSearchCall?this.setState({prevalidation:"valid"},this.findAddress):this.continueToBuyFlow()},findAddress:function(){var e=this,t=this.state,s=t.address1,r=t.apt,i=t.zip,a=t.validatedAddress1,n=t.validatedApt,d=t.validatedZip,l=t.validatedZ4,u={address1:s,apt:r,zip:i,validatedAddress1:a,validatedApt:n,validatedZip:d,validatedZ4:l,countryCode:this.props.countryCode,addressType:this.props.addressType};this.addressSearchTx=o.LoggerMixin.createTransaction("MUI.Address.Submit",this.addressValidationTx),g.info("The address search form has been submitted.",Object.assign({},this.addressSearchTx,u));var p=f["default"].getAddresses(u,this.addressSearchTx,this.props.timeout);p.then(function(t){t.length>=1&&"function"==typeof e.props.displayLoaderHandler&&(e.props.displayLoaderHandler(!1),e.addressSearchTx.success(),1===t.length?g.info("Single address response from WebApi.",Object.assign({},e.addressSearchTx,t)):g.info("Multiple addresses response from WebApi.",Object.assign({},e.addressSearchTx,{numberOfAddress:t.length})))})["catch"](function(){"function"==typeof e.props.displayLoaderHandler&&e.props.displayLoaderHandler(!1)}),this.loadPromise("addresses",p,!0)},continueToBuyFlow:function(){var e=arguments.length<=0||void 0===arguments[0]||arguments[0],t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],s=arguments.length<=2||void 0===arguments[2]?"":arguments[2],r=arguments.length<=3||void 0===arguments[3]?[]:arguments[3],i=Array.isArray(this.state.addresses.result)?this.state.addresses.result:[],a=e?1===i.length?this.getFormSubmissionData(i[0]):this.getFormSubmissionData():this.state.submissionData,n=o.QueryString.encode(a);a.config=this.props,this.props.formSubmissionHandler(""+n,a,i,this.state.addresses.error,{generalErrorFields:t,generalError:s,errors:r})},isAddressSrubbed:function b(e,t){var b=!0;return(0,u.isStringBlank)(t.line2)&&(t.line2=""),(0,u.isStringBlank)(t.line1)?b=!1:e.address1.toLowerCase().trim()===t.line1.toLowerCase().trim()&&e.apt.toLowerCase().trim()===t.line2.toLowerCase().trim()&&e.zip.trim()===t.postalCode.trim()?b=!1:g.info("Input address "+JSON.stringify(e)+" scrubbed to "+JSON.stringify(t)),b},getFormSubmissionData:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=this.state,s=t.address1,r=t.apt,i=t.zip,a=t.account,n=t.salesId,o=t.isCustomerPresent,d=t.isBarOrRestaurant,l=t.evo,u=t.prevalidation,p=t.validatedCity,c=t.validatedState,h=t.validatedAddress1,f=t.validatedApt,v=t.validatedZip,y=t.validatedZ4,g=t.allCases,m={validatedCity:p,validatedState:c,validatedAddress1:h,validatedApt:f,validatedZip:v,validatedZ4:y},b={prevalidation:u,businessInds:g?g:this.state.businessInds},T=a?{uacc:a}:{},S=n?{sid:n}:{},P=o?{v:"yes"===o?this.props.dynamicContent.isCustomerPresentYesValue:this.props.dynamicContent.isCustomerPresentNoValue}:{},A=d?{isBarOrRestaurant:d}:{},C=l?{evo:l}:{};return Object.assign({},this.props.queryParams,this.getFormQueryFields(e,s,r,i),T,S,P,A,C,b,m)},getFormQueryFields:function(e,t,s,r){var i=e.address?e.address:{},a=e.billingControlArea?e.billingControlArea:{},n={isAddressSrubbed:this.isAddressSrubbed({address1:t,apt:s,zip:r},i),a:t,aptnum:s,zip:r};return Object.assign({},n,this.getSpaInfo(e,a))},getSpaInfo:function(e,t){var s={serviceStatus:e.serviceStatus?e.serviceStatus:"",businessUnit:t.businessUnit?t.businessUnit:"",level1:t.level1?t.level1:"",level2:t.level2?t.level2:"",level3:t.level3?t.level3:"",level4:t.level4?t.level4:""};return s},preserveObjectPropDefaults:function(e){var t=Object.assign({},y[e],this.props[e]);for(var s in t)t[s]instanceof Object&&(t[s]=Object.assign({},y[e][s],this.props[e][s]));return t},render:function(){var e=this.preserveObjectPropDefaults("enabledFields"),t=this.preserveObjectPropDefaults("dynamicContent"),s=this.state,r=s.showConfirmAddress,i=s.verificationAnswer,a=this.state.addresses?this.state.addresses:{},o=this.props.enabledFields.showLoadingWhileProcessing&&a.loading;return a.loading&&"function"==typeof this.props.displayLoaderHandler&&this.props.displayLoaderHandler(!0),n["default"].createElement(p.LocalizationFormView,{account:this.state.account,address1:this.state.address1,apt:this.state.apt,zip:this.state.zip,salesId:this.state.salesId,isCustomerPresent:this.state.isCustomerPresent,isBarOrRestaurant:this.state.isBarOrRestaurant,evo:this.state.evo,onSubmit:this.onSubmitHandler,onChangeAccount:this.onChangeAccount,onChangeAddress1:this.onChangeAddress1,onChangeApt:this.onChangeApt,onChangeZip:this.onChangeZip,onKeyPressZip:this.onKeyPressZip,onChangeSalesId:this.onChangeSalesId,onChangeIsCustomerPresent:this.onChangeIsCustomerPresent,onChangeIsBarOrRestaurant:this.onChangeIsBarOrRestaurant,onChangeEvo:this.onChangeEvo,filterSuggestions:d.filterSuggestions,onSuggestionSelected:this.onSuggestionSelected,enabledFields:e,dynamicContent:t,errors:this.state.errors,errorMessages:t.errorMessages,generalError:this.state.generalError,generalErrorFields:this.state.generalErrorFields,showConfirmAddress:r,onConfirmAddress:this.onConfirmAddress,verificationEntered:this.state.verificationEntered,addressToVerify:this.state.addressToVerify,verificationQuestion:this.state.verificationQuestion,verificationAnswer:i,onSubmitFromAddressVerificationDialog:this.onSubmitFromDialog,dialogSubmitButton:e.dialogSubmitButton,autoSubmit:e.autoSubmit,showLoading:o,multipleAddressViewType:this.props.multipleAddressViewType})}});t["default"]=m},function(t,s){t.exports=e},function(e,s){e.exports=t},function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSuggestion=t.filterSuggestions=void 0;var i=s(5),a=r(i);t.filterSuggestions=function(e,t){a["default"].getSuggestions(e).then(function(e){t(null,e.suggestions)})},t.resolveSuggestion=function(e,t,s){a["default"].getAddressFromSuggestion(e,!0).then(function(r){if(r.length){var i=r[0].components;t(i,e)}else s(e)})}},function(e,t,s){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},o=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),d=s(3),l={"auth-id":"5477094801663295"},u=function(e){function t(){var e,s,a,n;r(this,t);for(var o=arguments.length,d=Array(o),l=0;l<o;l++)d[l]=arguments[l];return s=a=i(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(d))),a.url="",n=s,i(a,n)}return a(t,e),o(t,[{key:"getSuggestions",value:function(e){var t=d.QueryString.encode(n({},l,{prefix:e}));return this.get("https://autocomplete-api.smartystreets.com/suggest?"+t).acceptJson().disableDefaultHeaders().send().then(this.parseJson).then(this.body)}},{key:"getAddressFromSuggestion",value:function(e,t){var s=d.QueryString.encode(n({},l,{street:e.street_line,city:e.city,state:e.state,candidates:10}));return this.get("https://api.smartystreets.com/street-address?"+s).acceptJson().disableDefaultHeaders().setRequestHeader("X-Include-Invalid",""+t).send().then(this.parseJson).then(this.body)}},{key:"getAddressFootnotes",value:function(e,t){var s=e||{},r=d.QueryString.encode(n({},l,{street:s.a,secondary:s.aptnum,zipcode:s.zip,candidates:10,match:"invalid"}));return this.get("https://api.smartystreets.com/street-address?"+r).acceptJson().disableDefaultHeaders().setRequestHeader("X-Include-Invalid",""+t).send().then(this.parseJson).then(this.body)["catch"](function(e){return e})}}]),t}(d.Model);t["default"]=new u},function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,s,r){var i=e[0].analysis,n=i.dpv_footnotes,o=i.footnotes,l={deliveryLine1:e[0].delivery_line_1},u={deliveryLine2:e[0].delivery_line_2},p=e[0].components,c={cityName:p.city_name},h={stateAbbreviation:p.state_abbreviation},f={zipCode:p.zipcode},v={zipPlus4:p.plus4_code},y={secondaryNumber:p.secondary_number},g=a(Object.assign({},c,h,l,u,y,f,v)),m=(o||"")+(n||""),b=(0,d.mapSmartyStreetsResponse)(m,t);return b.displayCase?(r.failure(),s.error("FAILURE: address: "+e[0].delivery_line_1+", city: "+p.city_name+", state: "+p.state_abbreviation+", zip: "+p.zipcode+", footnotes: "+m,Object.assign({},r))):(r.success(),s.info("SUCCESS: address: "+e[0].delivery_line_1+", city: "+p.city_name+", state: "+p.state_abbreviation+", zip: "+p.zipcode,Object.assign({},r))),{validatedAddress:g,mappedResult:b}}function a(e){return{city:e.cityName||"",state:e.stateAbbreviation||"",address1:e.deliveryLine1||"",apt:e.deliveryLine2||"",zip:e.zipCode||"",z4:e.zipPlus4||""}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateAddressValues=void 0;var n=s(5),o=r(n),d=s(7);t.validateAddressValues=function(e,t,s,r){var a=o["default"].getAddressFootnotes(e,!0).then(function(e){return e.length?i(e,t,s,r):null});return a}},function(e,t){"use strict";function s(e,t){var s="",i=[],a=r(t.ErrorCases,e,i);s=s.length?s:a;var n=r(t.QuestionCases,e,i);s=s.length?s:n,r(t.SuccessCases,e,i);var o={displayCase:s,allCases:i.join("|")};return o}function r(e,t,s){var r="",i=!0,a=!1,n=void 0;try{for(var o,d=e[Symbol.iterator]();!(i=(o=d.next()).done);i=!0){var l=o.value,u=l.match,p=l.code;t.match(u)&&(r||(r=p),s.includes(p)||s.push(p))}}catch(c){a=!0,n=c}finally{try{!i&&d["return"]&&d["return"]()}finally{if(a)throw n}}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.mapSmartyStreetsResponse=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(t.errorMessages={account:"Please enter a valid 16 digit account number",salesId:"Please enter your Sales ID",address1:"Please enter your street address",isCustomerPresent:"Please select a choice",isBarOrRestaurant:"Yes or No is a required selection",evo:"Please enter a valid estimated viewer occupancy between 1-100000",zip:"Please enter a valid five-digit zip code",apt:"Apt./Unit is required",errorLine1Match:"We're sorry, but we are unable to find a valid address based on the information provided. Please review your entry and submit again.",errorInvalidZip:"We are unable to find a valid address with the zip code provided. Please review your entry and submit again.",errorZipMatch:"We are unable to find a valid address with the zip code provided. Please review your entry and submit again.",errorMissingNumber:"We're sorry, but we are unable to find a valid address based on the information provided. Please confirm your street number and submit again.",errorMissingPobox:"We're sorry, but we are unable to find a valid address based on the information provided. Please confirm your PO, RR, or HC Box Number and submit again.",verificationInvalidError:"We're sorry, but we are unable to find a valid address based on the information provided. Please review your entry and submit again.",verificationServiceableError:"We are unable to determine if this address is serviceable by Charter. Please review the address and submit again. If you need help please speak with an Online Chat Representative."},16),r=5,i=3,a=/^\d{5}$/,n=1,o=1e5,d=/^[0-9]{1,6}$/,l=t.fieldValidators={account:function(e){return e.length===s&&!isNaN(e)},salesId:function(e){return e.length>0&&e.length<=r},isCustomerPresent:function(e){return"yes"===e||"no"===e},isBarOrRestaurant:function(e){return"yes"===e||"no"===e},evo:function(e){var t=parseInt(e,10);return d.test(e)&&t>=n&&t<=o},address1:function(e){return e.length>i},zip:function(e){return a.test(e)},apt:function(e){return e.length>0}},u=function(e,t){var s=t||{},r=s.existingAccount?"account":null,i=s.salesId?"salesId":null,a=s.isCustomerPresent?"isCustomerPresent":null,n=s.isBarOrRestaurant?"isBarOrRestaurant":null,o=s.evo&&s.isBarOrRestaurant&&"yes"===e.isBarOrRestaurant?"evo":null,d=s.apt?"apt":null;return[r,i,a,n,o,d,"address1","zip"].filter(function(e){return e})};t.validateFields=function(e,t){var s=function(t){var s=e[t].toString(),r=l[t](s);return r?"":t},r=u(e,t).map(s).filter(function(e){return""!==e});return r},t.isStringBlank=function(e){return!e||/^\s*$/.test(e)}},function(e,t){e.exports=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DefaultSmartyStreetsMapping={ErrorCases:[],QuestionCases:[{match:"M3",code:"confirmNewHome"}],SuccessCases:[{match:"E#|H#|I#|K#|O#|S#|N1",code:"valid_possible_multiple"},{match:"A#|B#|G#|J#|L#|M#|N#|P#|T#|U#|V#|CC",code:"valid_input_corrected"},{match:"D#|LL#|LI#|Q#|R#|W#|X#|Y#|Z#|AA|BB|F1|G1|RR|R1|U1",code:"valid_modified"}]}},function(e,t,s){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var s=[],r=!0,i=!1,a=void 0;try{for(var n,o=e[Symbol.iterator]();!(r=(n=o.next()).done)&&(s.push(n.value),!t||s.length!==t);r=!0);}catch(d){i=!0,a=d}finally{try{!r&&o["return"]&&o["return"]()}finally{if(i)throw a}}return s}return function(t,s){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),d=s(3),l=s(12),u=function(e){function t(){r(this,t);var e=i(this,Object.getPrototypeOf(t).call(this));return e.url="/api/serviceabilityaddresses/v1",e.errorHandler=function(t){return new Promise(function(e){return e(t)}).then(e.rejectNotOk)},e}return a(t,e),o(t,[{key:"filterProperties",value:function(e,t){return Object.entries(e).reduce(function(e,s){var r=n(s,2),i=r[0],a=r[1];return t.includes(i)&&"undefined"!=typeof a&&(e[i]=a),e},{})}},{key:"createQueryValues",value:function(e){return"undefined"!=typeof e.validatedAddress1&&e.validatedAddress1?{line1:e.validatedAddress1,line2:e.validatedApt,postalCode:e.validatedZip}:{line1:e.address1,line2:e.apt,postalCode:e.zip}}},{key:"getAddresses",value:function(e,t,s){var r=this.createQueryValues(e),i=d.QueryString.encode(Object.assign({},r,this.filterProperties(e,["countryCode","addressType"]))),a=1e4;return this.get("/serviceabilityaddress?"+i).acceptJson().setTransaction(t).setTimeout(s||a).send().then(this.errorHandler).then(this.parseJson).then(function(e){return e.body.content})["catch"](function(e){throw new l.ServiceError("An error occurred when checking address servicability",e.toString(),e)})}}]),t}(d.Model);t["default"]=new u},function(e,t,s){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceError=void 0;var n=s(3),o=function(e){function t(e,s,a){r(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e,s,a));return n.name="ServiceError",n.message=e||"Error occurred while processing request.",n}return a(t,e),t}(n.ExtendableError);t.ServiceError=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.formatZip=function(e){return e.replace(/[^\d]/g,"")}},function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},a=s(2),n=r(a),o=s(3),d=s(9),l=s(11),u=r(l),p={queryParams:{},addresses:[],multipleAddressViewType:"TILE",noAptFoundValue:"",dialogSubmitButton:!1,dynamicContent:{multipleLoadingText:"Please wait a moment",multipleAddressAptOnlyText:"We have determined there are multiple units in your building. Please select your apartment number so we can find the best deals available for your home.",buttonText:"Submit"},enabledFields:{showLoadingWhileProcessing:!1,enableAddressSearchCall:!0}},c=void 0,h=void 0,f=n["default"].createClass({getdisplayName:function(){return"localization/components/multiple-address-form"},propTypes:{queryParams:a.PropTypes.object,onLoad:a.PropTypes.func,formSubmissionHandler:a.PropTypes.func,multipleAddressViewType:a.PropTypes.string.isRequired,noAptFoundValue:a.PropTypes.string,enabledFields:a.PropTypes.shape({showLoadingWhileProcessing:a.PropTypes.bool,enableAddressSearchCall:a.PropTypes.bool}),dynamicContent:a.PropTypes.shape({multipleLoadingText:a.PropTypes.string,multipleAddressAptOnlyText:a.PropTypes.string,buttonText:a.PropTypes.string}),addresses:a.PropTypes.array,parentTransaction:a.PropTypes.object,timeout:a.PropTypes.number,dialogSubmitButton:a.PropTypes.bool},mixins:[o.LoggerMixin,o.LoadPromiseMixin],getDefaultProps:function(){return p},getInitialState:function(){var e=this.preserveObjectPropDefaults("defaultValues");return{address1:e.address1,apt:e.apt,zip:e.zip,prevalidation:e.prevalidation,validatedCity:e.validatedCity,validatedState:e.validatedState,validatedAddress1:e.validatedAddress1,validatedApt:e.validatedApt,validatedZip:e.validatedZip,validatedZ4:e.validatedZ4,allCases:e.businessInds,showLoading:e.showLoading,addresses:{result:[],loading:!1,error:null}}},componentWillMount:function(){c=o.LoggerManager.getLogger(this.getdisplayName()),this.mountTx=o.LoggerMixin.createTransaction("MUI.Localization.MultipleAddress",this.props.parentTransaction),c.info("The MultipleAddress MUI component was successfully initialized.",Object.assign({},this.mountTx)),this.props.parentTransaction||c.error("The parent transaction object for the localization form was not found."),this.props.enabledFields.enableAddressSearchCall&&this.findAddress()},updateFormState:function(e){this.setState(i({errors:[]},e))},onSubmitFromDialog:function(){this.submit()},onConfirmSelectedAddress:function(e){var t=e.target,s=this.state.addresses?this.state.addresses:{},r=s.error?[]:s&&s.result&&null!==s.result?s.result:[],i=this.props.enabledFields.enableAddressSearchCall?r:this.props.addresses,a=t.value,n=i.filter(function(e){return e.id===a});h=n[0],this.setState({addressSelectedAnswer:a});var o=this.props.dialogSubmitButton||p.dialogSubmitButton;o||this.submit()},submit:function(){var e=this.getFormSubmissionData(h),t=this.props.enabledFields.enableAddressSearchCall?this.addressSearchTx:this.mountTx;this.addressSelectedTx=o.LoggerMixin.createTransaction("MUI.Localization.MultipleAddress.AddressSelection",t),c.info("Address selection has been submitted.",Object.assign({},this.addressSelectedTx,e)),this.continueToBuyFlow(e,h)},findAddress:function(){var e=this.state,t=e.address1,s=e.apt,r=e.zip,i=e.validatedAddress1,a=e.validatedApt,n=e.validatedZip,d=e.validatedZ4,l={address1:t,apt:s,zip:r,validatedAddress1:i,validatedApt:a,validatedZip:n,validatedZ4:d};this.addressSearchTx=o.LoggerMixin.createTransaction("MUI.Localization.MultipleAddress.Submit",this.mountTx),c.info("The multiple address search form has been submitted.",Object.assign({},this.addressSearchTx,l));var p=u["default"].getAddresses(l,this.addressSearchTx,this.props.timeout);this.loadPromise("addresses",p,!0)},continueToBuyFlow:function(e,t){var s=o.QueryString.encode(e);this.props.formSubmissionHandler(""+s,e,t)},getFormSubmissionData:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=this.state,s=t.address1,r=t.zip,i=t.prevalidation,a=t.validatedCity,n=t.validatedState,o=t.validatedAddress1,d=t.validatedApt,l=t.validatedZip,u=t.validatedZ4,p=t.allCases,c=e.billingControlArea?e.billingControlArea:{},h={a:s,aptnum:e.address.line2,zip:r,serviceStatus:e.serviceStatus?e.serviceStatus:"",businessUnit:c.businessUnit?c.businessUnit:"",level1:c.level1?c.level1:"",level2:c.level2?c.level2:"",level3:c.level3?c.level3:"",level4:c.level4?c.level4:""},f={validatedCity:a,validatedState:n,validatedAddress1:o,validatedApt:d,validatedZip:l,validatedZ4:u},v={prevalidation:i,businessInds:p};return Object.assign({},this.props.queryParams,h,v,f)},preserveObjectPropDefaults:function(e){var t=Object.assign({},p[e],this.props[e]);for(var s in t)t[s]instanceof Object&&(t[s]=Object.assign({},p[e][s],this.props[e][s]));return t},renderTileOrDropDownView:function(e,t,s,r,i){return n["default"].createElement(d.AddressFormView,{onConfirmSelectedAddress:this.onConfirmSelectedAddress,addressesToShow:e,addressSelectedAnswer:t,showLoading:s,multipleLoadingText:r.multipleLoadingText,multipleAddressViewType:i,noAptFoundValue:this.props.noAptFoundValue||p.noAptFoundValue})},shouldDisplaySubmitButton:function(e,t){var s=e.filter(function(e){return e.id===t}),r=!1,i=this.props.dialogSubmitButton||p.dialogSubmitButton;return i&&1===s.length&&(r=!0),r},renderAptOnlyTilView:function(e,t,s,r){return n["default"].createElement(d.AddressAptOnlyTileView,{onConfirmSelectedAddress:this.onConfirmSelectedAddress,addressesToShow:e,addressSelectedAnswer:t,showLoading:s,multipleLoadingText:r.multipleLoadingText,multipleAddressAptOnlyText:this.props.dynamicContent.multipleAddressAptOnlyText||p.dynamicContent.multipleAddressAptOnlyText,validatedStreet:this.state.validatedAddress1,validatedCity:this.state.validatedCity,validatedState:this.state.validatedState,validatedZipCode:this.state.validatedZip,noAptFoundValue:this.props.noAptFoundValue||p.noAptFoundValue,buttonText:this.props.dynamicContent.buttonText||p.buttonText,onSubmit:this.onSubmitFromDialog,displaySubmitButton:this.shouldDisplaySubmitButton(e,t)})},render:function(){var e=this.state.addressSelectedAnswer,t=this.state.addresses?this.state.addresses:{},s=t.error?[]:t&&t.result&&null!==t.result?t.result:[],r=this.props.enabledFields.enableAddressSearchCall?s:this.props.addresses,i=this.preserveObjectPropDefaults("dynamicContent"),a=this.props.enabledFields.showLoadingWhileProcessing&&t.loading,o=this.props.multipleAddressViewType||p.multipleAddressViewType;return n["default"].createElement("div",null,o===d.Constants.MULTIPLE_ADDRESS_VIEW_TYPE_APTONLYTILE?this.renderAptOnlyTilView(r,e,a,i):this.renderTileOrDropDownView(r,e,a,i,o))}});t["default"]=f},function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=s(2),a=r(i),n=a["default"].createClass({propTypes:{loadingText:i.PropTypes.string},render:function(){var e=this.props.loadingText?this.props.loadingText:"Loading . . .";return a["default"].createElement("div",null,a["default"].createElement("div",{className:"dim"}),a["default"].createElement("div",{className:"loadingIndicatorContainer"},a["default"].createElement("div",{className:"loaderText"},a["default"].createElement("strong",null,e)),a["default"].createElement("div",{className:"loader"})))}});t["default"]=n}])});
//# sourceMappingURL=index.js.map