/*./static/js/src/sugar-one-signal.js, ./static/js/vendor/jquery/plugins/jquery.hoverIntent.min.js, ./static/js/vendor/jquery/plugins/bootstrap-modal.min.js, ./static/js/vendor/beforeafter/jquery.beforeafter.js, ./static/js/vendor/beforeafter/jquery.event.move.js, ./static/js/vendor/jquery/plugins/jquery.visible.js, ./static/js/src/sugar.ab-test.js, ./static/js/src/sugar.ellipsis.js, ./static/js/src/sugar-postmessage.js, ./static/js/src/sugar.js-template.js, ./static/js/src/sugar.redesign.js, ./static/js/src/sugar.before-after.js, ./static/js/src/molasses.js, ./static/js/src/sugar-video-youtube.js, ./static/js/src/sugar.overlay-menu.js, ./static/js/src/sugar.cta-tags.js, ./themes/onsugar_themes/lightspeed/js/sugar.nav.js, ./themes/onsugar_themes/lightspeed/js/sugar.search.js, ./themes/onsugar_themes/lightspeed/js/sugar.email.js, ./themes/onsugar_themes/lightspeed/js/sugar.login.js, ./themes/onsugar_themes/lightspeed/js/sugar.link-share-copy-btn.js, ./themes/onsugar_themes/lightspeed/js/sugar.social-hover-share.js, ./themes/onsugar_themes/lightspeed/js/sugar-share-buttons.js, ./themes/onsugar_themes/lightspeed/js/sugar.socialcount.js, ./themes/onsugar_themes/lightspeed/js/sugar.comments.js, ./themes/onsugar_themes/lightspeed/js/sugar.country-selector.js, ./themes/onsugar_themes/lightspeed/js/sugar.gallery.js, ./themes/onsugar_themes/lightspeed/js/sugar.favorite.js, ./static/js/src/sugar-stars-voting.js, ./static/js/src/top-nav-ad.js, ./static/js/src/sugar.highlight-share.js, ./static/js/src/sugar.pullquote-share.js, ./themes/onsugar_themes/lightspeed/js/sugar.infinite-scroll.js, ./themes/onsugar_themes/lightspeed/js/sugar.ipad.js, ./themes/onsugar_themes/lightspeed/js/sugar-cookie-consent.js, ./static/js/src/node-survey.js, ./static/js/src/sugar-bparty.js, ./static/js/src/sugar-dispatcher-2.0.js, ./static/js/vendor/pubexchange/pubexchange-tracker.js*/
var OneSignal=window.OneSignal||[];(function(window,$){var NTF_TRACKER_COOKIE='one_signal_ntf_tracker';var NTF_EXPIRE_TIME=90;var NTF_VISITS_TO_MODAL=1;var NTF_CANCELED_MARK=999;function get_ntf_tracker(){return+ONSUGAR.Util.getCookie(NTF_TRACKER_COOKIE)||1}
function set_ntf_tracker(num){return ONSUGAR.Util.setCookie(NTF_TRACKER_COOKIE,num,{expires:NTF_EXPIRE_TIME,path:'/'})}
function cancel_ntf_tracker(){return set_ntf_tracker(NTF_CANCELED_MARK)}
function check_ntf_tracker(){var tracker_num=get_ntf_tracker();if(tracker_num<NTF_VISITS_TO_MODAL){set_ntf_tracker(tracker_num+1);return!1}
return tracker_num<NTF_CANCELED_MARK}
function init_one_signal_ntf_modal(){var $one_signal_ntf_modal=$("#one-signal-ntf-modal");var switch_ntf_modal=function _switch_ntf_modal(to_class){var all_classes='step-one step-two hidden';$one_signal_ntf_modal.removeClass(all_classes).addClass(to_class)};var cancel_ntf_modal=function _cancel_ntf_modal(e){if(!!e){e.preventDefault()}
switch_ntf_modal('hidden');cancel_ntf_tracker()};var confirm_ntf_modal=function _confirm_ntf_modal(e){e.preventDefault();switch_ntf_modal('step-two');OneSignal.push(function(){OneSignal.on('notificationPermissionChange',function(permission){if(permission.to=='granted'){switch_ntf_modal('step-done');setTimeout(cancel_ntf_modal,3000)}
else{cancel_ntf_modal()}});OneSignal.setDefaultTitle("POPSUGAR");OneSignal.registerForPushNotifications()})};switch_ntf_modal('step-one');$one_signal_ntf_modal.on('click','.cancel-button',cancel_ntf_modal).on('click','.confirm-button',confirm_ntf_modal)}
window.addEventListener('load',function(){var app_id=$('body').data('one-signal-app-id');var ps_safari_web_id=$('body').data('one-signal-safari-web-id');var is_push_supported=OneSignal.isPushNotificationsSupported();if(!app_id||!ps_safari_web_id||!is_push_supported){return}
OneSignal.push(["init",{appId:app_id,safari_web_id:ps_safari_web_id,autoRegister:!1,notifyButton:{enable:!1}}]);OneSignal.push(["getNotificationPermission",function(permission){if(permission=='granted'||permission=='denied'){cancel_ntf_tracker()}}]);OneSignal.push(function(){OneSignal.isPushNotificationsEnabled().then(function(is_enabled){if(!is_enabled&&check_ntf_tracker()){init_one_signal_ntf_modal()}})})})})(window,jQuery); /* jsmin */
/*!
 * hoverIntent r7 // 2013.03.11 // jQuery 1.9.1+
 * http://cherne.net/brian/resources/jquery.hoverIntent.html
 *
 * You may use hoverIntent under the terms of the MIT license.
 * Copyright 2007, 2013 Brian Cherne
 */
(function(e){e.fn.hoverIntent=function(t,n,r){var i={interval:100,sensitivity:7,timeout:0};if(typeof t==="object"){i=e.extend(i,t)}else if(e.isFunction(n)){i=e.extend(i,{over:t,out:n,selector:r})}else{i=e.extend(i,{over:t,out:t,selector:n})}var s,o,u,a;var f=function(e){s=e.pageX;o=e.pageY};var l=function(t,n){n.hoverIntent_t=clearTimeout(n.hoverIntent_t);if(Math.abs(u-s)+Math.abs(a-o)<i.sensitivity){e(n).off("mousemove.hoverIntent",f);n.hoverIntent_s=1;return i.over.apply(n,[t])}else{u=s;a=o;n.hoverIntent_t=setTimeout(function(){l(t,n)},i.interval)}};var c=function(e,t){t.hoverIntent_t=clearTimeout(t.hoverIntent_t);t.hoverIntent_s=0;return i.out.apply(t,[e])};var h=function(t){var n=jQuery.extend({},t);var r=this;if(r.hoverIntent_t){r.hoverIntent_t=clearTimeout(r.hoverIntent_t)}if(t.type=="mouseenter"){u=n.pageX;a=n.pageY;e(r).on("mousemove.hoverIntent",f);if(r.hoverIntent_s!=1){r.hoverIntent_t=setTimeout(function(){l(n,r)},i.interval)}}else{e(r).off("mousemove.hoverIntent",f);if(r.hoverIntent_s==1){r.hoverIntent_t=setTimeout(function(){c(n,r)},i.timeout)}}};return this.on({"mouseenter.hoverIntent":h,"mouseleave.hoverIntent":h},i.selector)}})(jQuery);
+function(d){var b=function(f,e){this.options=e;this.$body=d(document.body);this.$element=d(f);this.$backdrop=this.isShown=null;this.scrollbarWidth=0;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,d.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};b.VERSION="3.2.0";b.DEFAULTS={backdrop:true,keyboard:true,show:true};b.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)};b.prototype.show=function(h){var f=this;var g=d.Event("show.bs.modal",{relatedTarget:h});this.$element.trigger(g);if(this.isShown||g.isDefaultPrevented()){return}this.isShown=true;this.checkScrollbar();this.$body.addClass("modal-open");this.setScrollbar();this.escape();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',d.proxy(this.hide,this));this.backdrop(function(){var j=d.support.transition&&f.$element.hasClass("fade");if(!f.$element.parent().length){f.$element.appendTo(f.$body)}f.$element.show().scrollTop(0);if(j){f.$element[0].offsetWidth}f.$element.addClass("in").attr("aria-hidden",false);f.enforceFocus();var i=d.Event("shown.bs.modal",{relatedTarget:h});j?f.$element.find(".modal-dialog").one("bsTransitionEnd",function(){f.$element.trigger("focus").trigger(i)}).emulateTransitionEnd(300):f.$element.trigger("focus").trigger(i)})};b.prototype.hide=function(f){if(f){f.preventDefault()}f=d.Event("hide.bs.modal");this.$element.trigger(f);if(!this.isShown||f.isDefaultPrevented()){return}this.isShown=false;this.$body.removeClass("modal-open");this.resetScrollbar();this.escape();d(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",true).off("click.dismiss.bs.modal");d.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",d.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal()};b.prototype.enforceFocus=function(){d(document).off("focusin.bs.modal").on("focusin.bs.modal",d.proxy(function(f){if(this.$element[0]!==f.target&&!this.$element.has(f.target).length){this.$element.trigger("focus")}},this))};b.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.bs.modal",d.proxy(function(f){f.which==27&&this.hide()},this))}else{if(!this.isShown){this.$element.off("keyup.dismiss.bs.modal")}}};b.prototype.hideModal=function(){var e=this;this.$element.hide();this.backdrop(function(){e.$element.trigger("hidden.bs.modal")})};b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};b.prototype.backdrop=function(i){var h=this;var f=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=d.support.transition&&f;this.$backdrop=d('<div class="modal-backdrop '+f+'" />').appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",d.proxy(function(j){if(j.target!==j.currentTarget){return}this.options.backdrop=="static"?this.$element[0].focus.call(this.$element[0]):this.hide.call(this)},this));if(e){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");if(!i){return}e?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(150):i()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){h.removeBackdrop();i&&i()};d.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}else{if(i){i()}}}};b.prototype.checkScrollbar=function(){if(document.body.clientWidth>=window.innerWidth){return}this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar()};b.prototype.setScrollbar=function(){var e=parseInt((this.$body.css("padding-right")||0),10);if(this.scrollbarWidth){this.$body.css("padding-right",e+this.scrollbarWidth)}};b.prototype.resetScrollbar=function(){this.$body.css("padding-right","")};b.prototype.measureScrollbar=function(){var f=document.createElement("div");f.className="modal-scrollbar-measure";this.$body.append(f);var e=f.offsetWidth-f.clientWidth;this.$body[0].removeChild(f);return e};function c(e,f){return this.each(function(){var i=d(this);var h=i.data("bs.modal");var g=d.extend({},b.DEFAULTS,i.data(),typeof e=="object"&&e);if(!h){i.data("bs.modal",(h=new b(this,g)))}if(typeof e=="string"){h[e](f)}else{if(g.show){h.show(f)}}})}var a=d.fn.modal;d.fn.modal=c;d.fn.modal.Constructor=b;d.fn.modal.noConflict=function(){d.fn.modal=a;return this};d(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(j){var i=d(this);var g=i.attr("href");var f=d(i.attr("data-target")||(g&&g.replace(/.*(?=#[^\s]+$)/,"")));var h=f.data("bs.modal")?"toggle":d.extend({remote:!/#/.test(g)&&g},f.data(),i.data());if(i.is("a")){j.preventDefault()}f.one("show.bs.modal",function(e){if(e.isDefaultPrevented()){return}f.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})});c.call(f,h,this)})}(jQuery);
(function($){$.fn.beforeafter=function(options){var options=$.extend({default_offset_pct:0.5,orientation:'horizontal',move_on_hover:!1,before_link_text:'Before',after_link_text:'After'},options);return this.each(function(){var sliderPct=options.default_offset_pct;var container=$(this);var sliderOrientation=options.orientation;var beforeDirection=(sliderOrientation==='vertical')?'down':'left';var afterDirection=(sliderOrientation==='vertical')?'up':'right';var moveOnHover=options.move_on_hover;var beforeLinkText=options.before_link_text;var afterLinkText=options.after_link_text;container.wrap("<div class='beforeafter-wrapper beforeafter-"+sliderOrientation+"'></div>");container.append("<div class='beforeafter-overlay'></div>");var beforeImg=container.find("img:first");var afterImg=container.find("img:last");container.append("<div class='beforeafter-handle'></div>");var slider=container.find(".beforeafter-handle");slider.append("<span class='beforeafter-"+beforeDirection+"-arrow'></span>");slider.append("<span class='beforeafter-"+afterDirection+"-arrow'></span>");container.addClass("beforeafter-container");beforeImg.addClass("beforeafter-before");afterImg.addClass("beforeafter-after");var overlay=container.find(".beforeafter-overlay");overlay.append("<div class='beforeafter-before-label' data-content='"+beforeLinkText+"'></div>");overlay.append("<div class='beforeafter-after-label' data-content='"+afterLinkText+"'></div>");var calcOffset=function(dimensionPct){var w=beforeImg.width();var h=beforeImg.height();return{w:w+"px",h:h+"px",cw:(dimensionPct*w)+"px",ch:(dimensionPct*h)+"px"}};var adjustContainer=function(offset){if(sliderOrientation==='vertical'){beforeImg.css("clip","rect(0,"+offset.w+","+offset.ch+",0)")}
else{beforeImg.css("clip","rect(0,"+offset.cw+","+offset.h+",0)")}
container.css("height",offset.h)};var adjustSlider=function(pct){var offset=calcOffset(pct);slider.css((sliderOrientation==="vertical")?"top":"left",(sliderOrientation==="vertical")?offset.ch:offset.cw);adjustContainer(offset)}
$(window).on("resize.beforeafter",function(e){adjustSlider(sliderPct)});var offsetX=0;var imgWidth=0;slider.on("movestart",function(e){if(((e.distX>e.distY&&e.distX<-e.distY)||(e.distX<e.distY&&e.distX>-e.distY))&&sliderOrientation!=='vertical'){e.preventDefault()}
else if(((e.distX<e.distY&&e.distX<-e.distY)||(e.distX>e.distY&&e.distX>-e.distY))&&sliderOrientation==='vertical'){e.preventDefault()}
container.addClass("active");offsetX=container.offset().left;offsetY=container.offset().top;imgWidth=beforeImg.width();imgHeight=beforeImg.height()});slider.on("moveend",function(e){if(!moveOnHover)
container.removeClass("active")});slider.on("move",function(e){if(container.hasClass("active")){sliderPct=(sliderOrientation==='vertical')?(e.pageY-offsetY)/imgHeight:(e.pageX-offsetX)/imgWidth;if(sliderPct<0){sliderPct=0}
if(sliderPct>1){sliderPct=1}
adjustSlider(sliderPct)}});container.find("img").on("mousedown",function(event){event.preventDefault()});if(moveOnHover){container.on("mouseenter",function(event){container.addClass("active");offsetX=container.offset().left;offsetY=container.offset().top;imgWidth=beforeImg.width();imgHeight=beforeImg.height()});container.on("mouseleave",function(event){container.removeClass("active")});container.on("mousemove",function(event){if(container.hasClass("active")){sliderPct=(sliderOrientation==='vertical')?(event.pageY-offsetY)/imgHeight:(event.pageX-offsetX)/imgWidth;if(sliderPct<0){sliderPct=0}
if(sliderPct>1){sliderPct=1}
adjustSlider(sliderPct)}})}
$(window).trigger("resize.beforeafter")})}})(jQuery); /* jsmin */
(function(module){if(typeof define==='function'&&define.amd){define(['jquery'],module)}else{module(jQuery)}})(function(jQuery,undefined){var
threshold=6,add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node)},requestFrame=(function(){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(fn,element){return window.setTimeout(function(){fn()},25)})})(),ignoreTags={textarea:!0,input:!0,select:!0,button:!0},mouseevents={move:'mousemove',cancel:'mouseup dragstart',end:'mouseup'},touchevents={move:'touchmove',cancel:'touchend',end:'touchend'};function Timer(fn){var callback=fn,active=!1,running=!1;function trigger(time){if(active){callback();requestFrame(trigger);running=!0;active=!1}
else{running=!1}}
this.kick=function(fn){active=!0;if(!running){trigger()}};this.end=function(fn){var cb=callback;if(!fn){return}
if(!running){fn()}
else{callback=active?function(){cb();fn()}:fn;active=!0}}}
function returnTrue(){return!0}
function returnFalse(){return!1}
function preventDefault(e){e.preventDefault()}
function preventIgnoreTags(e){if(ignoreTags[e.target.tagName.toLowerCase()]){return}
e.preventDefault()}
function isLeftButton(e){return(e.which===1&&!e.ctrlKey&&!e.altKey)}
function identifiedTouch(touchList,id){var i,l;if(touchList.identifiedTouch){return touchList.identifiedTouch(id)}
i=-1;l=touchList.length;while(++i<l){if(touchList[i].identifier===id){return touchList[i]}}}
function changedTouch(e,event){var touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch){return}
if(touch.pageX===event.pageX&&touch.pageY===event.pageY){return}
return touch}
function mousedown(e){var data;if(!isLeftButton(e)){return}
data={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp};add(document,mouseevents.move,mousemove,data);add(document,mouseevents.cancel,mouseend,data)}
function mousemove(e){var data=e.data;checkThreshold(e,data,e,removeMouse)}
function mouseend(e){removeMouse()}
function removeMouse(){remove(document,mouseevents.move,mousemove);remove(document,mouseevents.cancel,mouseend)}
function touchstart(e){var touch,template;if(ignoreTags[e.target.tagName.toLowerCase()]){return}
touch=e.changedTouches[0];template={target:touch.target,startX:touch.pageX,startY:touch.pageY,timeStamp:e.timeStamp,identifier:touch.identifier};add(document,touchevents.move+'.'+touch.identifier,touchmove,template);add(document,touchevents.cancel+'.'+touch.identifier,touchend,template)}
function touchmove(e){var data=e.data,touch=changedTouch(e,data);if(!touch){return}
checkThreshold(e,data,touch,removeTouch)}
function touchend(e){var template=e.data,touch=identifiedTouch(e.changedTouches,template.identifier);if(!touch){return}
removeTouch(template.identifier)}
function removeTouch(identifier){remove(document,'.'+identifier,touchmove);remove(document,'.'+identifier,touchend)}
function checkThreshold(e,template,touch,fn){var distX=touch.pageX-template.startX,distY=touch.pageY-template.startY;if((distX*distX)+(distY*distY)<(threshold*threshold)){return}
triggerStart(e,template,touch,distX,distY,fn)}
function handled(){this._handled=returnTrue;return!1}
function flagAsHandled(e){e._handled()}
function triggerStart(e,template,touch,distX,distY,fn){var node=template.target,touches,time;touches=e.targetTouches;time=e.timeStamp-template.timeStamp;template.type='movestart';template.distX=distX;template.distY=distY;template.deltaX=distX;template.deltaY=distY;template.pageX=touch.pageX;template.pageY=touch.pageY;template.velocityX=distX/time;template.velocityY=distY/time;template.targetTouches=touches;template.finger=touches?touches.length:1;template._handled=handled;template._preventTouchmoveDefault=function(){e.preventDefault()};trigger(template.target,template);fn(template.identifier)}
function activeMousemove(e){var timer=e.data.timer;e.data.touch=e;e.data.timeStamp=e.timeStamp;timer.kick()}
function activeMouseend(e){var event=e.data.event,timer=e.data.timer;removeActiveMouse();endEvent(event,timer,function(){setTimeout(function(){remove(event.target,'click',returnFalse)},0)})}
function removeActiveMouse(event){remove(document,mouseevents.move,activeMousemove);remove(document,mouseevents.end,activeMouseend)}
function activeTouchmove(e){var event=e.data.event,timer=e.data.timer,touch=changedTouch(e,event);if(!touch){return}
e.preventDefault();event.targetTouches=e.targetTouches;e.data.touch=touch;e.data.timeStamp=e.timeStamp;timer.kick()}
function activeTouchend(e){var event=e.data.event,timer=e.data.timer,touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch){return}
removeActiveTouch(event);endEvent(event,timer)}
function removeActiveTouch(event){remove(document,'.'+event.identifier,activeTouchmove);remove(document,'.'+event.identifier,activeTouchend)}
function updateEvent(event,touch,timeStamp,timer){var time=timeStamp-event.timeStamp;event.type='move';event.distX=touch.pageX-event.startX;event.distY=touch.pageY-event.startY;event.deltaX=touch.pageX-event.pageX;event.deltaY=touch.pageY-event.pageY;event.velocityX=0.3*event.velocityX+0.7*event.deltaX/time;event.velocityY=0.3*event.velocityY+0.7*event.deltaY/time;event.pageX=touch.pageX;event.pageY=touch.pageY}
function endEvent(event,timer,fn){timer.end(function(){event.type='moveend';trigger(event.target,event);return fn&&fn()})}
function setup(data,namespaces,eventHandle){add(this,'movestart.move',flagAsHandled);return!0}
function teardown(namespaces){remove(this,'dragstart drag',preventDefault);remove(this,'mousedown touchstart',preventIgnoreTags);remove(this,'movestart',flagAsHandled);return!0}
function addMethod(handleObj){if(handleObj.namespace==="move"||handleObj.namespace==="moveend"){return}
add(this,'dragstart.'+handleObj.guid+' drag.'+handleObj.guid,preventDefault,undefined,handleObj.selector);add(this,'mousedown.'+handleObj.guid,preventIgnoreTags,undefined,handleObj.selector)}
function removeMethod(handleObj){if(handleObj.namespace==="move"||handleObj.namespace==="moveend"){return}
remove(this,'dragstart.'+handleObj.guid+' drag.'+handleObj.guid);remove(this,'mousedown.'+handleObj.guid)}
jQuery.event.special.movestart={setup:setup,teardown:teardown,add:addMethod,remove:removeMethod,_default:function(e){var event,data;if(!e._handled()){return}
function update(time){updateEvent(event,data.touch,data.timeStamp);trigger(e.target,event)}
event={target:e.target,startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,timeStamp:e.timeStamp,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger};data={event:event,timer:new Timer(update),touch:undefined,timeStamp:undefined};if(e.identifier===undefined){add(e.target,'click',returnFalse);add(document,mouseevents.move,activeMousemove,data);add(document,mouseevents.end,activeMouseend,data)}
else{e._preventTouchmoveDefault();add(document,touchevents.move+'.'+e.identifier,activeTouchmove,data);add(document,touchevents.end+'.'+e.identifier,activeTouchend,data)}}};jQuery.event.special.move={setup:function(){add(this,'movestart.move',jQuery.noop)},teardown:function(){remove(this,'movestart.move',jQuery.noop)}};jQuery.event.special.moveend={setup:function(){add(this,'movestart.moveend',jQuery.noop)},teardown:function(){remove(this,'movestart.moveend',jQuery.noop)}};add(document,'mousedown.move',mousedown);add(document,'touchstart.move',touchstart);if(typeof Array.prototype.indexOf==='function'){(function(jQuery,undefined){var props=["changedTouches","targetTouches"],l=props.length;while(l--){if(jQuery.event.props.indexOf(props[l])===-1){jQuery.event.props.push(props[l])}}})(jQuery)}}); /* jsmin */
(function($){var $w=$(window);$.fn.visible=function(partial,hidden,direction){if(this.length<1)
return;var $t=this.length>1?this.eq(0):this,t=$t.get(0),vpWidth=$w.width(),vpHeight=$w.height(),direction=(direction)?direction:'both',clientSize=hidden===!0?t.offsetWidth*t.offsetHeight:!0;if(typeof t.getBoundingClientRect==='function'){var rec=t.getBoundingClientRect(),tViz=rec.top>=0&&rec.top<vpHeight,bViz=rec.bottom>0&&rec.bottom<=vpHeight,lViz=rec.left>=0&&rec.left<vpWidth,rViz=rec.right>0&&rec.right<=vpWidth,vVisible=partial?tViz||bViz:tViz&&bViz,hVisible=partial?lViz||rViz:lViz&&rViz;if(direction==='both')
return clientSize&&vVisible&&hVisible;else if(direction==='vertical')
return clientSize&&vVisible;else if(direction==='horizontal')
return clientSize&&hVisible}else{var viewTop=$w.scrollTop(),viewBottom=viewTop+vpHeight,viewLeft=$w.scrollLeft(),viewRight=viewLeft+vpWidth,offset=$t.offset(),_top=offset.top,_bottom=_top+$t.height(),_left=offset.left,_right=_left+$t.width(),compareTop=partial===!0?_bottom:_top,compareBottom=partial===!0?_top:_bottom,compareLeft=partial===!0?_right:_left,compareRight=partial===!0?_left:_right;if(direction==='both')
return!!clientSize&&((compareBottom<=viewBottom)&&(compareTop>=viewTop))&&((compareRight<=viewRight)&&(compareLeft>=viewLeft));else if(direction==='vertical')
return!!clientSize&&((compareBottom<=viewBottom)&&(compareTop>=viewTop));else if(direction==='horizontal')
return!!clientSize&&((compareRight<=viewRight)&&(compareLeft>=viewLeft))}}})(jQuery); /* jsmin */
SUGAR=window.SUGAR||{};SUGAR.ABTest=window.SUGAR.ABTest||function(){var API_UPDATE_URL=$('body').data('ab-api-host')||'https://ab_api.circleofmoms.com/ab/';var ACTION_PATH='update';var GROUP_PATH='group';var COOKIE_NAME='ab_groups';var NO_STATS_COOKIE='no_ab_stats';var COOKIE_KEY=$('body').hasClass('mobile')?'mobile':'fullsite';var assignedGroups={};var tests={};var callCOMApi=function(data,path){if(!ONSUGAR.UserProfile.isBot()&&!ONSUGAR.Util.getCookie(NO_STATS_COOKIE)){data=JSON.stringify(data);return $.ajax({type:'POST',url:API_UPDATE_URL+path,data:{'data':data}})}};var sendGroups=function(){var user_id=ONSUGAR.Util.getCookie('PHPSESSID');if(!user_id||user_id.length<1){return}
var data=[];var cookie_tests=$.parseJSON(ONSUGAR.Util.getCookie(COOKIE_NAME));$.each(assignedGroups,function(test,group){if(tests[test].config.group_on_load==!0&&SUGAR.ABTest.validateCookieTests(cookie_tests,test)&&!(cookie_tests[COOKIE_KEY][test].sent)){data.push([test,group,user_id]);SUGAR.ABTest.markTestAsSent(test)}});if(data.length>0){callCOMApi(data,GROUP_PATH)}};return{validateCookieTests:function(cookie_tests,test){if(cookie_tests&&COOKIE_KEY in cookie_tests){return cookie_tests[COOKIE_KEY].hasOwnProperty(test)&&cookie_tests[COOKIE_KEY][test].hasOwnProperty('sent')}
return!1},markTestAsSent:function(test){var cookie_tests=$.parseJSON(ONSUGAR.Util.getCookie(COOKIE_NAME));if(SUGAR.ABTest.validateCookieTests(cookie_tests,test)&&!(cookie_tests[COOKIE_KEY][test].sent)){cookie_tests[COOKIE_KEY][test].sent=!0}
var options={expires:Date.now()/1000+60*60*24*30,path:'/'};ONSUGAR.Util.setCookie(COOKIE_NAME,JSON.stringify(cookie_tests),options)},sendGroup:function(test,group){var user_id=ONSUGAR.Util.getCookie('PHPSESSID');var data=[[test,group,user_id]];var cookie_tests=$.parseJSON(ONSUGAR.Util.getCookie(COOKIE_NAME));if(SUGAR.ABTest.validateCookieTests(cookie_tests,test)&&!(cookie_tests[COOKIE_KEY][test].sent)){SUGAR.ABTest.markTestAsSent(test);return callCOMApi(data,GROUP_PATH)}
else{return $.Deferred().resolve()}},init:function(){var loaded=!1;if(SUGAR.TestSettings.testRunning()){tests=JSON.parse(SUGAR.TestSettings.getTests());if(SUGAR.TestSettings.getRunTest()){assignedGroups=JSON.parse(SUGAR.TestSettings.getGroups())}
if(!loaded){loaded=!0;if(SUGAR.TestSettings.getRunTest()){$.each(tests,function(index,test){var test_name=test.test_name;var test_group=assignedGroups[test.test_name];if(test.config.group_on_load==!0){SUGAR.ABTest.group(test_name,test_group)}
sendGroups()})}
ONSUGAR.Event.fire('groupSelected')}
ONSUGAR.Event.fire('ABTestLoaded')}},group:function(test,groups){var test_group=this.getGroup(test,!1);if(!test_group){var sum=0;for(var g in groups){sum+=groups[g]}
var part=Math.floor(Math.random()*sum);sum=0;for(var g in groups){sum+=groups[g];if(part<sum){test_group=g;break}}}
assignedGroups[test]=test_group;return test_group},action:function(action,uniqueAction){if(SUGAR.TestSettings.testRunning()){var user_id=ONSUGAR.Util.getCookie('PHPSESSID');var data=[user_id,action];if(typeof uniqueAction!=='undefined'){data.push(uniqueAction)}
callCOMApi([data],ACTION_PATH)}},trackPageView:function(){SUGAR.ABTest.action('page_view')},isTestRunning:(function(){var cache={};return function(testGroups){var testGroupsStringified=JSON.stringify(testGroups);if(testGroupsStringified in cache){return cache[testGroupsStringified]}
else{for(var key in testGroups){if(key in assignedGroups&&this.getGroup(key)===testGroups[key]){return cache[testGroupsStringified]=!0}}
return cache[testGroupsStringified]=!1}}})(),getGroup:function(test,send_group){var group;var GET_params=ONSUGAR.Util.getGETParameters();var key=test;var value=GET_params[key];send_group=typeof send_group!=='undefined'?send_group:!0;if(value){group=value}
else if(assignedGroups[test]){group=assignedGroups[test]}
else{var cookie_tests=$.parseJSON(ONSUGAR.Util.getCookie(COOKIE_NAME));if(cookie_tests&&cookie_tests.hasOwnProperty(COOKIE_KEY)&&cookie_tests[COOKIE_KEY].hasOwnProperty(test)&&cookie_tests[COOKIE_KEY][test].hasOwnProperty('group')){group=cookie_tests[COOKIE_KEY][test].group}}
if(send_group){this.sendGroup(test,group)}
return group},getTestNames:function(){var testNames=[];for(var k in assignedGroups){testNames.push(k)}
return testNames},getGroupingString:function(){var testNames=SUGAR.ABTest.getTestNames();var grouping='';$.each(testNames,function(index,value){grouping=grouping+value+':'+SUGAR.ABTest.getGroup(value,!1)+'|'});return grouping},getTestNamesString:function(){var names='';var testNames=SUGAR.ABTest.getTestNames();$.each(testNames,function(index,value){names=names+value+'|'});return names},}}();ONSUGAR.Event.registerEventHandler('loadedTestSettings',function(){SUGAR.ABTest.init();if(SUGAR.TestSettings.testRunning()){var startViewtimeCounters=function(){setTimeout(function(){SUGAR.ABTest.action('view_time_2','unique_view_time_2')},2000);setTimeout(function(){SUGAR.ABTest.action('view_time_5','unique_view_time_5')},5000);setTimeout(function(){SUGAR.ABTest.action('view_time_20','unique_view_time_20')},20000);setTimeout(function(){SUGAR.ABTest.action('view_time_60','unique_view_time_60')},60000)};var readystateListener=function(){if(document.readyState=='interactive'||document.readyState=='complete'){$(document).off('readystatechange',readystateListener);startViewtimeCounters()}};if(document.readyState=='interactive'||document.readyState=='complete'){startViewtimeCounters()}else{$(document).on('readystatechange',readystateListener)}}}); /* jsmin */
(function($){$.fn.ellipsis=$.fn.ellipsis||function(options){var settings=$.extend({url:''},options);var $link='';if(settings.url){$link=$('<a>more</a>').attr('href',settings.url)}
return this.each(function(){var $dot=$(this);if($dot.css('overflow')=='hidden'){var text=$dot.html().split(' ');var $t=$dot.clone(!0);$t.css({maxHeight:'none',position:'absolute',overflow:'visible',width:$dot.width(),height:'auto'}).hide();$dot.after($t);function test(){return $t.height()>$dot.height()}
while(test()&&text.length>0){text=text.slice(0,text.length-1);$t.html(text.join(' ')+'... ');$t.append($link)}
$dot.html($t.html());$t.remove()}})}})(jQuery); /* jsmin */
SUGAR=window.SUGAR||{};SUGAR.PostMessage=window.SUGAR.PostMessage||function(){var message_index=0;var event_handlers=[];var callback_wrapper;var createCallbackWrapper=function createCallbackWrapper(namespace,callback,message_id,is_post_message){return function(event){event=event.originalEvent;if(event.origin.indexOf('sugar')>-1){try{var message=JSON.parse(event.data);if(message&&message.namespace&&message.namespace==namespace&&(!is_post_message||message.id==message_id)){if(!message.payload){message.payload={}}
message.payload.source=event.source;message.payload.origin=event.origin;callback.call(window,message.payload);if(is_post_message){$(window).off('message',arguments.callee)}}}catch(e){/*invalid message*/}}}}
return{send:function(element,message,origin,callback){if(element&&message){message.id=message_index++;if(callback){var callback_wrapper=createCallbackWrapper(message.namespace,callback,message.id,!0);$(window).on('message',callback_wrapper)}
element.postMessage(JSON.stringify(message),origin)}},subscribe:function(event_name,callback){if(!event_handlers[event_name]){event_handlers[event_name]=[];var callEventHandlers=function callEventHandlers(){for(var i=0,l=event_handlers[event_name].length;i<l;i++){event_handlers[event_name][i].apply(window,arguments)}};callback_wrapper=createCallbackWrapper(event_name,callEventHandlers);$(window).on('message',callback_wrapper)}
event_handlers[event_name].push(callback)},unsubscribe:function(event_name,callback){if(event_handlers[event_name]){var handler_index=event_handlers[event_name].indexOf(callback);if(handler_index>-1){event_handlers[event_name].splice(handler_index,1)}
if(event_handlers[event_name].length==0){event_handlers.splice(event_handlers[event_name].index,1)}
if(event_handlers.length==0){$(window).on('message',callback_wrapper)}}}}}(); /* jsmin */
(function($){var replace_markup=function(html,obj,param){var temp;for(var key in obj){temp=(param&&param.length>0)?param+'.'+key:key;if(key&&obj.hasOwnProperty(key)){if(typeof obj[key]!=='object'&&typeof obj[key]!=='undefined'){html=html.replace(new RegExp('#{'+temp+'}','g'),obj[key].toString())}
else{html=replace_markup(html,obj[key],temp)}}}
return html};$.fn.tpl=function(obj){var html=$.trim(this.html());html=replace_markup(html,obj);return $(html)}})(window.jQuery);JTEngine={compile:function(template){return{render:function(context){return $('#'+template).tpl(context).html()}}}}; /* jsmin */
$(function(){var $toggle_link=$('#redesign-toggle-link');$toggle_link.on('click',function(e){e.preventDefault();var url=$(this).attr('href');url+='?destination='+encodeURIComponent(window.location.href);var cookie=ONSUGAR.Util.getCookie('sugarTestGroup');var new_cookie=cookie=='control'?'lightspeed':'control';ONSUGAR.Util.setPersistentCookie('sugarTestGroup',new_cookie,{expires:30});window.setTimeout(function(){window.location.href=url},600)})}); /* jsmin */
SUGAR=window.SUGAR||{};SUGAR.BeforeAfter=window.SUGAR.BeforeAfter||function(){return{init:function(id,orientation,default_offset_pct,hover,before_link_text,after_link_text){var $img=$('#beforeafter-'+id).find('img').eq(0),options={default_offset_pct:default_offset_pct,orientation:orientation,move_on_hover:hover,before_link_text:before_link_text,after_link_text:after_link_text};if($img.height()){$('#beforeafter-'+id+' .beforeafter-container').beforeafter(options)}
else{$img.on('load',function(){$(this).parent().beforeafter(options)})}}}}(); /* jsmin */
var molasses={getFacebookEventHandler:function(url,quote){"use strict";return function(event){FB.ui({method:'share',href:url,quote:quote||null});if(event&&event.preventDefault){event.preventDefault()}}},getPinterestLink:function(image,url,description){return 'http://pinterest.com/pin/create/button/?url='+encodeURIComponent(url)+'&media='+encodeURIComponent(image)+'&description='+encodeURIComponent(description)},getPinterestEventHandler:function(image,url,description){return function(){PinUtils.pinOne({media:image,url:url,description:description})}},getTwitterLink:function(tweet,shareUrl){var twitter_via=$("meta[property='twitter:site']").attr('content').slice(1);return 'https://twitter.com/intent/tweet?text='+encodeURIComponent(tweet)+'&url='+encodeURIComponent(shareUrl)+'&via='+twitter_via},getEmailLink:function(subject,body,url){return 'mailto:?subject='+encodeURIComponent(subject)+'&body='+body+encodeURIComponent('\n\r')+url},getGooglePlusLink:function(url){return 'https://plus.google.com/share?url='+encodeURIComponent(url)},getTumblrLink:function(image,caption,url,title){return 'https://www.tumblr.com/widgets/share/tool?posttype=photo'+'&content='+encodeURIComponent(image)+'&title='+encodeURIComponent(title)+'&caption='+encodeURIComponent(caption)+'&canonicalUrl='+encodeURIComponent(url)+'&clickthroughUrl='+encodeURIComponent(url)},getSMSLink:function(body,url){return 'sms:&body='+body+encodeURIComponent('\n')+url},replaceEncodedSingleQuotes:function(string){return string.split("&#039;").join("'")},addUTMParams:function(url,medium,escaped,is_tablet){if(!url){return}
var utm_query='';var separator=escaped?'&amp;':'&';var query_string='';var device='';if(is_tablet){device='tablet_share'}
else{device=($('body').hasClass('mobile')?'mobile_share':'desktop_share')}
medium=medium||'';var params={'utm_campaign':device,'utm_medium':medium,'utm_source':$('body').data('login-site')};if(url.search(/\?/)>-1){query_string=separator}
else{query_string='?'}
for(var param in params){if(params.hasOwnProperty(param)){utm_query+=separator+param+'='+params[param]}}
query_string+=utm_query.substring(separator.length);var generateUrl=function(url,query_string){var encodedUrl=!1;if(url.indexOf(encodeURIComponent('http://'))===0||url.indexOf(encodeURIComponent('https://'))===0){encodedUrl=!0}
var hashRegex=encodedUrl?/(%23.*)$/:/(#.*)$/;var m=url.match(hashRegex);var hash=m&&m[1];if(hash){url=url.slice(0,url.length-hash.length);return url+query_string+hash}
else{return url+query_string}};return generateUrl(url,query_string)}}; /* jsmin */
SUGAR=window.SUGAR||{};SUGAR.YouTubeVideo=window.SUGAR.YouTubeVideo||function(window,$){var SugarYouTubePlayer=function(options){this.config=$.extend(SugarYouTubePlayer.defaults,options)};SugarYouTubePlayer.defaults={'container':null,'height':"100%",'width':"100%",'embed_code':null,'autoplay':!1,'first_play':!0};var createYouTubePlayers=function(){var length=window.YouTubePlayers.length;for(var i=0;i<length;i++){window.YouTubePlayers[i]()}
try{delete window.YouTubePlayers}catch(e){window.YouTubePlayers=undefined}};var createYouTubePlayer=function(obj){var option=obj.config;var player=new YT.Player(option.container,{height:option.height,width:option.width,videoId:option.embed_code,playerVars:{'autoplay':option.autoplay},events:{'onStateChange':function(e){if(e.data==YT.PlayerState.PLAYING){var length=window.youtube_player_instances.length;for(var i=0;i<length;i++){var instance=window.youtube_player_instances[i];if(instance.getIframe().id!=e.target.getIframe().id&&instance.getPlayerState()==YT.PlayerState.PLAYING){instance.pauseVideo()}}
length=window.sugar_player_instances&&window.sugar_player_instances.length;for(var i=0;i<length;i++){try{window.sugar_player_instances[i].contentWindow.sugar_player.pause(!0)}catch(e){}}
if(obj.config.first_play){try{SUGAR.Analytics.trackCustomLink('event59','o','content:youtube-play',{linkTrackVars:'eVar1,eVar3,eVar9,eVar98,prop13,events'});if(typeof fbq!='undefined'){fbq('track','ViewContent')}}catch(e){}}
obj.config.first_play=!1}}}});window.youtube_player_instances.push(player)};var parseDomToPlayerOption=function($player){return{'container':$player.attr("id"),'height':$player.data("height"),'width':$player.data("width"),'embed_code':$player.data("code"),'autoplay':$player.data("autoplay")}};return{init:function($player){if(!$player.length){return}
if(typeof window.youtube_player_instances==='undefined'){window.youtube_player_instances=[]}
if(typeof YT==='undefined'){if(typeof window.YouTubePlayers==='undefined'){window.YouTubePlayers=[];var tag=document.createElement('script');tag.src="https://www.youtube.com/iframe_api";var script_tag=document.getElementsByTagName('script')[0];script_tag.parentNode.insertBefore(tag,script_tag);window.onYouTubeIframeAPIReady=createYouTubePlayers}
$player.each(function(){var player_id=$(this).attr('id');window.YouTubePlayers.push(function(){var options=parseDomToPlayerOption($("#"+player_id));var obj=new SugarYouTubePlayer(options);createYouTubePlayer(obj)})})}else{$player.each(function(){var options=parseDomToPlayerOption($(this));var obj=new SugarYouTubePlayer(options);createYouTubePlayer(obj)})}}}}(window,window.jQuery);$(document).ready(function(){var $players=$(".sugar-embed-youtube");window.SUGAR.YouTubeVideo.init($players)}); /* jsmin */
!function($){"use strict";$(function(){var _isOpen=!1;var className='side-menu-active';var $menu=$('#overlay-menu');var $icon=$('.overlay-menu-toggle');var $close=$('#close-overlay-menu');var $body=$('body');var $link=$('#overlay-menu a');var $more=$('.show-sub-menu');var $fixedHeader=$('#js-primary-navigation');var $fixedHeaderPositionCSS;var $fixedHeaderPosition;var attachEventWithFallback=function($element,callback){var timeout=setTimeout(callback,1000);$element.one('transitionend','#overlay-menu',function(){clearTimeout(timeout);callback()})};var openMenu=function(){_isOpen=!0;$fixedHeaderPosition=$fixedHeader.position().top;$fixedHeaderPositionCSS=$fixedHeader.css('position');$fixedHeader.addClass('notransition').css({'position':'absolute','top':$(window).scrollTop()+'px'});attachEventWithFallback($body,function(){$fixedHeader.removeClass('notransition')});$body.addClass(className)};var closeMenu=function(){if(!_isOpen)return;_isOpen=!1;$fixedHeader.addClass('notransition');attachEventWithFallback($body,function(){$fixedHeader.css({'position':$fixedHeaderPositionCSS,'top':$fixedHeaderPosition+'px'}).removeClass('notransition')});$body.removeClass(className)};$icon.on('click',function(event){event.stopPropagation();openMenu()});$close.on('click',function(){closeMenu()});$link.on('click',function(event){event.stopPropagation()});$menu.on('click',function(event){event.stopPropagation()});$more.on('click',function(event){event.stopPropagation();$(this).parent('li').toggleClass('active')});$body.on('click',function(){closeMenu()});$body.on('keyup',function(event){if(event.keyCode==27){closeMenu()}})})}(jQuery); /* jsmin */
!function($){$(function(){var $body=$('body');var has_pinterest_widget;var is_mobile=$body.hasClass('mobile');var in_or_mode=!1;var auto_body_html,cta_button_html;var auto_body_impress_tracked=!1;var cta_button_impress_tracked=!1;var updateCtaContent=function(){$('article.post-page .auto-body').html(auto_body_html);$('.cta-button-placeholder').replaceWith(cta_button_html)};var showAutoBodyOnLastSlide=function(){if(SUGAR.Slideshow.currentSlideIndex()!=SUGAR.Slideshow.length()-2){$('.auto-body').hide()}
$('#gallery-content').on('slideChange',function(event,leavingSlideNid,leavingSlideLink,leavingSlideIndex,enteringSlideIndex,leavingSlideType,enteringSlide){if(enteringSlide.getType()!="interstitial"||enteringSlide.getType()!="end_screen"){if(enteringSlideIndex==SUGAR.Slideshow.length()-2){$('.auto-body').show();if(has_pinterest_widget){parsePinWidgets()}}
else{$('.auto-body').hide()}}})};var auto_body=$('.post-page .auto-body')[0];var parsePinWidgets=function(auto_body){if(typeof window.parsePinButtons=='function'){window.parsePinButtons(auto_body)}};var parseTwitterWidgets=function(auto_body){if(window.twttr){window.twttr.widgets.load(auto_body)}};var parseFacebookWidgets=function(auto_body){if(window.FB){FB.XFBML.parse(auto_body)}};var parseInstagramWidgets=function(auto_body){if(window.instgrm){instgrm.Embeds.process()}};var parseSocialWidgets=function(auto_body){if(auto_body_html&&auto_body_html.match(/pinterest/)){has_pinterest_widget=!0;parsePinWidgets(auto_body)}
if(auto_body_html&&auto_body_html.match(/facebook/)){parseFacebookWidgets(auto_body)}
if(auto_body_html&&auto_body_html.match(/twitter/)){parseTwitterWidgets(auto_body)}
if(auto_body_html&&auto_body_html.match(/instagram/)){parseInstagramWidgets(auto_body)}};var handleOnOrientationChange=function(){var $auto_body=$('article.post-page .auto-body');var $auto_body_or=$('article.post-page .auto-body-or');window.addEventListener('orientationchange',function(){if(in_or_mode){$auto_body.show();$auto_body_or.hide();in_or_mode=!1}else{$auto_body.hide();if($auto_body_or.length>0){$auto_body_or.show()}else{$auto_body_or=$('<div class="auto-body-or">'+auto_body_html+'</div>');$auto_body.after($auto_body_or);parseSocialWidgets($auto_body_or[0])}
in_or_mode=!0}})};var trackAutoBody=function(nid,headline){var prop47='auto-body';var prop48=[nid,headline].join(':');SUGAR.CommonAnalytics.trackInternalLink(prop47,prop48)};var trackOmniture=function($node){$autoBody=$('.auto-body');$ctaButton=$('.cta-button');$(window).on('scroll',function(){if(!auto_body_impress_tracked&&auto_body_html&&$autoBody.length>0&&isScrolledIntoView($autoBody)){SUGAR.CommonAnalytics.trackCtaButtonAndAutoBodyOmniture('auto-body','impression');auto_body_impress_tracked=!0}
if(!cta_button_impress_tracked&&$ctaButton.length>0&&isScrolledIntoView($ctaButton)){SUGAR.CommonAnalytics.trackCtaButtonAndAutoBodyOmniture('cta-button','impression');cta_button_impress_tracked=!0}});if(auto_body_html){$autoBody.on('click','a',function(e){var $elem=$(e.target);var href=$elem.attr('href');var isInternalLink=isPopsugarInternalLink(href);SUGAR.CommonAnalytics.trackCtaButtonAndAutoBodyOmniture('auto-body','click',href,isInternalLink)})}};var isScrolledIntoView=function($elem){var $window=$(window);var scrolledElemTop=$elem.offset().top-$window.scrollTop();return scrolledElemTop>0&&scrolledElemTop<$window.height()};var isPopsugarInternalLink=function(href){url=ONSUGAR.Util.parseURL(href);if(url.host.match(/popsugar|musthave|onsugar|shopstyle|shopstylecollective/i)){return!0}
return!1};if($body.hasClass('node_page')||$body.hasClass('post-page')){var $node=$('article.post-page');if($node.data('cta')){var is_gallery_slideshow=$node.hasClass('gallery')&&$node.hasClass('js-slideshow');var nid=$node.data('nid');$.ajax({type:'GET',url:'/ajax/node-get-cta-content',data:{nid:nid,fastcache:1,sharecache:1}}).success(function(response){if(response.success){auto_body_html=response.auto_body_html;cta_button_html=response.cta_button_html;updateCtaContent();parseSocialWidgets(auto_body);if(is_gallery_slideshow){showAutoBodyOnLastSlide()}
if(is_mobile){handleOnOrientationChange()}
trackOmniture($node)}})}}})}(jQuery); /* jsmin */
!function($){"use strict";$(function(){var $body=$('body');var $nav=$('#js-primary-navigation');var navHeight=$nav.height();var $channel=$('#js-nav-channel');var $navWaypointTrigger=$('.feature-section').length>0?$('.feature-section'):$('#header-wrapper');var $adElementContainer=$('.ad-element-container');var $adElement=$adElementContainer.find('div').first();var $sidebarAd=$('.sidebar-ad-container');var $shopHeader=$('.shop-header').length>0?$('.shop-header'):undefined;var adMarqueeContainerHeight;var isTablet=ONSUGAR.UserProfile.getUserDevice()=='tablet';var leaderboardMarqueeTimeout=!1;var LEADERBOARD_AD='leaderboard-0';var LEADERBOARD_TABLET_AD='leaderboard_t-0';var LEADERBOARD_AJAX_AD_LOADED='ad_leaderboard_ajax_loaded';var LEADERBOARD_AD_LOADED='ad_leaderboard-0_loaded';var LEADERBOARD_T_AJAX_AD_LOADED='ad_leaderboard_t_ajax_loaded';var LEADERBOARD_T_AD_LOADED='ad_leaderboard_t-0_loaded';function leaderboardMarqueeAdLoaded(evaluator){return(evaluator==LEADERBOARD_AD_LOADED||evaluator==LEADERBOARD_T_AD_LOADED)};if(!$navWaypointTrigger.length){$navWaypointTrigger=$('#page-wrapper')}
if(ONSUGAR.Util.isAU()&&$navWaypointTrigger.length==0){$navWaypointTrigger=$('#sugar-subnav-ad')}
if($body.hasClass('shoppable')){$navWaypointTrigger=$('.post-header')}
$('.feature-section').on('click','a',function(e){SUGAR.ABTest.action('nav_hero_click','unique_nav_hero_click')});$channel.hoverIntent(function(){$('#js-nav-channel').show()},function(){},'ul');$channel.hoverIntent({over:function(){},out:function(){$('#heroes').hide();$('#js-nav-channel .active').removeClass('active');$channel.find('[data-active="true"]').addClass('active')},timeout:400});var sidebarShift=function(checkPosition){if($sidebarAd.length>0){var sidebarPosition=$sidebarAd[0].getBoundingClientRect().top;var setSidebarPosition=0;if($shopHeader){setSidebarPosition+=$shopHeader.outerHeight()}
else{setSidebarPosition+=$nav.outerHeight()}
if((!checkPosition||$nav.css('position')=='fixed')&&(setSidebarPosition+adMarqueeContainerHeight)>sidebarPosition){return adMarqueeContainerHeight}
return 0}};var shiftUpperRec=function(){if($sidebarAd.length>0){var shift=sidebarShift(!1);if(shift){$sidebarAd.animate({'margin-top':shift+'px'})}}};var marqueeAdSlotLoaded=function(e,ad){var position;var eventType=e.type;var isSlideCover=$adElementContainer.hasClass('slide-cover');var windowScrollTop=$(window).scrollTop();$adElement=$adElementContainer.find('div').first();adMarqueeContainerHeight=$adElement.find('div').first().height();$adElement.css({'margin-top':'-'+adMarqueeContainerHeight+'px'});$adElement.height(adMarqueeContainerHeight);position=(leaderboardMarqueeAdLoaded(eventType)&&(!isTablet||$adElementContainer.hasClass('slide-cover'))&&!$adElementContainer.hasClass('slide-show'))?'fixed':'absolute';if(isSlideCover&&(leaderboardMarqueeAdLoaded(eventType))){if(eventType==LEADERBOARD_T_AD_LOADED){SUGAR.gpt.disableRotationForSlot('leaderboard_t-0')}
else{SUGAR.gpt.disableRotationForSlot('leaderboard-0')}}
$nav.animate({'top':adMarqueeContainerHeight+'px'});$nav.css({'position':position});if($sidebarAd.length>0){$sidebarAd.animate({'margin-top':sidebarShift(!0)+'px'})}
if($shopHeader){$shopHeader.animate({'top':adMarqueeContainerHeight+navHeight+'px'});$shopHeader.css({'position':position})}
$adElementContainer.animate({'margin-top':adMarqueeContainerHeight+'px'},400,null,shiftUpperRec);if(leaderboardMarqueeAdLoaded(eventType)&&(!isTablet||isSlideCover)){$nav.addClass('marquee-ad-loaded')}
else{$nav.removeClass('marquee-ad-loaded')}
Waypoint.refreshAll();$(document).off(eventType,marqueeAdSlotLoaded);if(leaderboardMarqueeAdLoaded(eventType)&&(!isTablet||$adElementContainer.hasClass('slide-cover'))){leaderboardMarqueeTimeout=setTimeout(function(){marqueeAdSlotViewed('force')},6000)}};var marqueeAdSlotViewed=function(e){leaderboardMarqueeTimeout?clearTimeout(leaderboardMarqueeTimeout):$.noop();shiftUpperRec();function marqueeSlotId(evaluator){return(evaluator=='leaderboard-0'||evaluator=='leaderboard_t-0')}
var slotElementId=e=='force'?'leaderboard_marquee_test-0':e.detail.slot.getSlotElementId();if(marqueeSlotId(slotElementId)&&(!isTablet||$adElementContainer.hasClass('slide-cover'))&&!$adElementContainer.hasClass('slide-show')){setTimeout(function(){$(window).one('touchmove, scroll',function(){var checkNavHeaderPosition=function(type){if(type=='nav'&&$shopHeader){return}
else{if($nav[0].getBoundingClientRect().top<$adElement.find('div').first()[0].getBoundingClientRect().bottom){$nav.css({'position':'absolute','top':adMarqueeContainerHeight+'px'});if($shopHeader){$shopHeader.css({'position':'absolute','top':navHeight+adMarqueeContainerHeight+'px'})}}}};var windowScrollTop=$(window).scrollTop();if(windowScrollTop>adMarqueeContainerHeight){$adElement.animate({'height':0},400,null,function(){$adElement.css({'position':'absolute'});$adElement.css({'margin-top':'-'+adMarqueeContainerHeight+'px'})});$nav.animate({'position':'fixed','top':0},400,null,function(){checkNavHeaderPosition('nav')});if($sidebarAd.length>0){$sidebarAd.animate({'margin-top':'0px'})}
if($shopHeader){$shopHeader.animate({'top':navHeight+'px'},400,null,function(){checkNavHeaderPosition('shop-header')})}}
else{$adElement.css({'position':'absolute'});$nav.css({'position':'absolute'});if($shopHeader){$shopHeader.css({'position':'absolute'})}}
Waypoint.refreshAll();$adElement.addClass('viewed')});document.removeEventListener('adSlotViewed',marqueeAdSlotViewed)},500)}};document.addEventListener('adSlotViewed',marqueeAdSlotViewed);var renderedAds=SUGAR.gpt&&SUGAR.gpt.getRenderedAds();var leaderboardLoaded=!1;if(renderedAds&&renderedAds.length>0){SUGAR.gpt.getRenderedAds().forEach(function(ad){if(ad.getSlotElementId()==LEADERBOARD_AD||ad.getSlotElementId()==LEADERBOARD_TABLET_AD){leaderboardLoaded=!0;marqueeAdSlotLoaded()}})}
if(!leaderboardLoaded){$(document).on(LEADERBOARD_AJAX_AD_LOADED+' '+LEADERBOARD_AD_LOADED+' '+LEADERBOARD_T_AD_LOADED+' '+LEADERBOARD_T_AJAX_AD_LOADED,marqueeAdSlotLoaded)}
$('#nav-prime-login').hoverIntent({over:function(){$(this).addClass('active')},out:function(){$(this).removeClass('active')},timeout:400});$('.nav-container').hoverIntent(function(){$(this).addClass('hover')},function(){$(this).removeClass('hover')},'.drop-down');var $navLogoContainer=$nav.find('.nav-logo-container');var hideNavSearch=function(){$('.ikb-nav.slim').css('overflow','hidden');$nav.find('.nav-search-box').typeahead('setQuery','');$nav.find('.post-info').show()};if($body.hasClass('ikb')){if($body.hasClass('au-site')&&($body.hasClass('channel_page')||$body.hasClass('node_page'))){SUGAR.Titan.addWaypointToArticlesInit()}
if($body.hasClass('au-site')&&$body.hasClass('has-carousel')){SUGAR.Titan.updateSkinPositionInit()}
if($body.hasClass('node_page')){$('.post-info .icon-ps-mark').on('click',function(e){window.scrollTo(0,0)});$('.post-info .title').on('click',function(e){var nav_link=$(this).data('nav-link');if(nav_link){window.location.href=nav_link}else{window.scrollTo(0,0)}});if($navWaypointTrigger.length>0){$navWaypointTrigger.waypoint(function(direction){var margin_top=0;if(direction=='down'&&!$adElementContainer.hasClass('slide-show')){margin_top='-'+$nav.height()+'px'}
$navLogoContainer.css({'margin-top':margin_top});if(direction=='down'){$(window).trigger("topnav:scrolled")}
else{$(window).trigger("topnav:reset")}
hideNavSearch()})}}
if($('#related-posts-header').waypoint){$('#related-posts-header').waypoint(function(direction){var margin_top=direction=='down'?'0px':'-'+navHeight+'px';$navLogoContainer.css({'margin-top':margin_top})},{offset:navHeight+'px'})}}
else{if($navWaypointTrigger.length>0&&($nav.find('post-info').length>0||$('header.ikb-nav.expanded').length>0)){$navWaypointTrigger.waypoint(function(direction){if(direction=='down'){$nav.css({'margin-top':'0px'})}
else{hideNavSearch();$nav.css({'margin-top':'-'+navHeight+'px'})}})}}
if($navWaypointTrigger.waypoint){$navWaypointTrigger.waypoint(function(direction){if($nav.hasClass('marquee-ad-loaded')&&$adElement.hasClass('viewed')&&!$adElementContainer.hasClass('slide-show')){if(direction=='down'&&!$body.hasClass('show-shoppable-products')){$nav.css({'position':'fixed','top':'0'});if($shopHeader){$shopHeader.css({'position':'fixed','top':navHeight+'px'})}}
else if(!$body.hasClass('show-shoppable-products')&&$adElement.hasClass('viewed')){var topPosition=typeof adMarqueeContainerHeight=='undefined'?$adElement.outerHeight():adMarqueeContainerHeight;$nav.css({'position':'absolute','top':topPosition+'px'});if($shopHeader){$shopHeader.css({'position':'absolute','top':topPosition+navHeight+'px'})}
if(ONSUGAR.UserProfile.isIPad()){$adElementContainer.toggle().toggle()}}}
else{if($adElementContainer.hasClass('slide-show')){if($adElement.hasClass('padded')&&direction=='up'){$adElement.removeClass('padded')}
else if(!$adElement.hasClass('padded')&&direction=='down'){$adElement.addClass('padded')}
$adElement.height(adMarqueeContainerHeight)}
if($body.hasClass('show-shoppable-products')&&$adElement.hasClass('padded')){$adElement.removeClass('padded');$adElement.height(adMarqueeContainerHeight)}}},{offset:function(){if($shopHeader){return navHeight+$shopHeader.height()}
else{return navHeight}}})}});var load_page_stats=function(){var $omniture_page_stats_spinner=$('.omniture-page-stats-spinner');if($omniture_page_stats_spinner.length>0){$omniture_page_stats_spinner.each(function(){var $spinner=$(this);var $spanElement=$spinner.prev().find('span');var nid=$spinner.data('nid');$(document).trigger("getOmnitureWrapper",{nid:nid,spinner:$spinner,result_holder:$spanElement})})}};$(document).keydown(function(e){if($(e.target).is(':input')){return}
else if($(e.target).hasClass('redactor-layer')){return}
else if($(e.target).hasClass('CodeMirror-code')){return}
var code=e.keyCode;if(code==191&&e.shiftKey){$(".image-tools").toggleClass('hidden');$('.edit-btn').toggleClass('peek-a-boo');$('.editor-social-count').toggleClass('peek-a-boo');$('.product-buy-now-container .product-data.not-stock').toggleClass('fade');$('.product-buy-now-container .product-data.non-ss').toggleClass('fade');$('.shop-product-container.not-stock').toggleClass('fade');$('.shop-product-container.non-ss').toggleClass('fade');load_page_stats();return!1}});var preview_windows={};$(document).on('click','.js-mobile-preview, .js-amp-preview',function(e){var target_window=e.currentTarget.getAttribute('target');if(!preview_windows[target_window]||preview_windows[target_window].closed){var target_window_width=375;var target_window_height=627;var dualScreenLeft=window.screenLeft||screen.left;var dualScreenTop=window.screenTop||screen.top;var width=window.innerWidth||document.documentElement.clientWidth||screen.width;var height=window.innerHeight||document.documentElement.clientHeight||screen.height;var left=((width/2)-(target_window_width/2))+dualScreenLeft;var top=((height/2)-(target_window_height/2))+dualScreenTop;preview_windows[target_window]=window.open('about:blank',target_window,'resizable=0,width='+target_window_width+',height='+target_window_height+',top='+top+', left='+left+'scrollbars')}
else{preview_windows[target_window].focus();e.preventDefault()}});$(document).on('click','.apple-copy-button',function(e){var element=$('.apple-modal-url-text')[0];if(element.select){element.select();try{document.execCommand('copy');element.blur();$('.apple-copy-button').attr('value',function(){return $(this).attr('data-copied-value')})}
catch(err){alert($(this).attr('data-browser-err'))}}});$(document).on('click','.js-applenews-preview',function(e){e.preventDefault();$('.apple-copy-button').attr('value',function(){return $(this).attr('data-def-value')})
var modal=$('#apple-modal');$(modal).show();window.onclick=function(e){if(e.target==$(modal)[0]){$(modal).hide()}};var dataSuccess=$('.apple-modal-url-text').attr('data-success');if(dataSuccess=='true'){return!1}
var successFlag=!1;var responseStr=$('.apple-modal-url-text').attr('data-message-error');var link=$('.js-applenews-preview').attr('href');if(link.length){$.ajax({url:link,type:'GET',data:{},success:function(response){if(response){try{var jsonObj=$.parseJSON(response);if(jsonObj.url){responseStr=jsonObj.url;successFlag=!0}}catch(e){responseStr=$('.apple-modal-url-text').attr('data-message-invalid-response')}}},complete:function(){$('.apple-modal-url-text').attr('value',responseStr);$('.apple-modal-url-text').attr('data-success',successFlag)}})}})}(jQuery); /* jsmin */
!function($){$(function(){var $search_box=$('.nav-search-box');var $search_icon=$('.nav-search');var $search_overlay=$('.search-overlay');var $close_search_overlay=$('.close-search-overlay');$search_icon.on('click touchend',function(e){if(ONSUGAR.UserProfile.isIPad()&&$('body').hasClass('homepage_page')){$('header.expanded').find('.search-overlay').addClass('search-activated');$('header.expanded').find('.nav-search-box').focus();return!1}
e.preventDefault();e.stopPropagation();$(this).parents('.nav-search-wrapper').find('.search-overlay').addClass('search-activated');$(this).parents('.nav-search-wrapper').find('.nav-search-box').focus();return!1});$close_search_overlay.on('click',function(){$search_overlay.removeClass('search-activated')});$search_box.bind('typeahead:selected',function(obj,datum,name){window.location.href=datum.permalink});$search_box.typeahead([{name:'tags',limit:12,template:'search-autocomplete-tag-tpl',engine:JTEngine,remote:{'url':'/ajax/autocomplete/tags?search=%QUERY'}}]);var $search_box_shop=$('.search-shop-input');$search_box_shop.typeahead([{name:'shop',limit:12,template:'search-autocomplete-search-tpl',engine:JTEngine,remote:{'url':'/ajax/autocomplete/shop?search=%QUERY'}}]);$search_box_shop.on('keypress',function(e){if(e.keyCode==13){SUGAR.Analytics.mainOmnitureTrack.call(this)}});$search_box_shop.bind('typeahead:selected',function(obj,datum,name){SUGAR.Analytics.mainOmnitureTrack.call(this);this.form.submit()});$('.shop-header .tt-dropdown-menu').css({marginLeft:$('.shop-header .search-label').css('width')})})}(jQuery); /* jsmin */
!function($){"use strict";var _stepsMap=[null,'one','two','done'];var _emailFormSteps='step-one step-two step-done';var _toggleFormToStep=function _toggleFormToStep($form,step){$form.removeClass(_emailFormSteps).addClass('step-'+_stepsMap[step]).data('step',step);var $formContainer=$form.parent();if($formContainer.attr('id')=='node-email-widget'){$formContainer.removeClass('active')}};var submitCb200=function _cb200(){var $this=$(this);switch($this.data('step')){case 1:var nextStep=$this.data('totalSteps')=='3'?2:3;_toggleFormToStep($this,nextStep);break;case 2:_toggleFormToStep($this,3);break;default:break}
var $submitBtn=$this.find('input.submit');var asyncTrack=$this.data('position')=='fbi';SUGAR.CommonAnalytics.trackEmailSignUpOmniture($submitBtn,$submitBtn.data('omnitureType'),!0,asyncTrack)};var submitCb202=function _cb202(){_toggleFormToStep($(this),3)};var submitCb400=function _cb400(resp){var $this=$(this);var msg=$this.data('errorMsg');$this.find('input.email').val('').attr('placeholder',msg)};var emailFormSubmit=function _emailFormSubmit(){var $form=$(this);$form.find('[required]').addClass('required');var data=$form.serializeArray();$.ajax({type:'post',url:'/email/subscribe-to-list-with-attributes',data:data,statusCode:{200:submitCb200.bind(this),202:submitCb202.bind(this),400:submitCb400.bind(this)}});return!1};var bindEmailSignupSubmit=function _bindEmailSignupSubmit(){var $form=$('.email-signup-form');var defaultPlaceholder=$form.find('input.email').attr('placeholder');$form.submit(emailFormSubmit);$form.on('click','input.submit, button',function(){$(this).closest('form').find('[required]').addClass('required')});$form.on('focus','input.email',function(){$(this).attr('placeholder',defaultPlaceholder)})};$(bindEmailSignupSubmit);var NO_MODAL_PERIOD=60*60*24*14;var COOKIE_EXPIRATION=365;var VISIT_TRACKER_COOKIE='email_visit_tracking';var SUBSCRIPTION_TRACKER_COOKIE='email_subscription_tracking';var _checkVisitCookie=function _checkVisitCookie($widget){var visitNumber=$widget.data('visitNumber');var trackerNumber=+ONSUGAR.Util.getCookie(VISIT_TRACKER_COOKIE)||1;var currentTimeStamp=Math.ceil(Date.now()/1000);if(trackerNumber<visitNumber){ONSUGAR.Util.setCookie(VISIT_TRACKER_COOKIE,trackerNumber+1,{expires:COOKIE_EXPIRATION,path:'/'})}
else if(currentTimeStamp-trackerNumber>NO_MODAL_PERIOD){return!0}
return!1};var _checkSubscriptionCookie=function _checkSubscriptionCookie($widget){var subscriptionTrackerCookie=ONSUGAR.Util.getCookie(SUBSCRIPTION_TRACKER_COOKIE);if(subscriptionTrackerCookie){var subscriptions=subscriptionTrackerCookie.split(':');var currentList=$widget.find('input[name=list_name]').val();if(subscriptions.indexOf(currentList)!==-1){return!1}}
return!0};var bindSlideOutEmailWidget=function _bindSlideOutEmailWidget(){if(typeof $([]).waypoint=='undefined'){return}
var $widget=$('#modal-email-widget');if($widget.length&&_checkVisitCookie($widget)&&_checkSubscriptionCookie($widget)){$('#page-wrapper').waypoint(function(direction){if(direction=='down'){this.disable();setTimeout(function(){$widget.addClass('active');trackSignUpView($widget)},6000);var currentTimeStamp=Math.ceil(Date.now()/1000);ONSUGAR.Util.setCookie(VISIT_TRACKER_COOKIE,currentTimeStamp,{expires:COOKIE_EXPIRATION,path:'/'})}})}
$widget.on('click','.email-modal-close',function(){$widget.removeClass('active')})};$(bindSlideOutEmailWidget);var trackSignUpView=function _trackSignUpView($widget){var $form=$widget.find('form');var $content=$form.length>0?$form:$widget;SUGAR.CommonAnalytics.trackEmailSignUpOmniture($content,$widget.data('omniture-type'),!1)};var trackingEmailSignup=function _trackingEmailSignup(){if(typeof $([]).waypoint=='undefined'){return}
$('.track-impressions').each(function(){var $this=$(this);$this.waypoint(function(){trackSignUpView($this);this.destroy()},{offset:'bottom-in-view'})})};$(trackingEmailSignup);var waypointOfNodeEmailForm=function _waypointOfNodeEmailForm(){if(typeof $([]).waypoint=='undefined'){return}
var $widget=$('#node-email-widget');$widget.waypoint(function(direction){if(direction=='down'&&!$widget.hasClass('active')){this.disable();$widget.addClass('active')}},{offset:'bottom-in-view'})};$(waypointOfNodeEmailForm);var bindOrderedEmailSubmit=function _bindOrderedEmailSubmit(){var $form=$('.email-ordered-list-form');var defaultPlaceholder=$form.find('input.email').attr('placeholder');$form.submit(function(){var $form=$(this);$form.find('[required]').addClass('required');$.ajax({url:$form.attr('action'),data:$form.serializeArray(),type:'POST',success:function(){$form.addClass('success').slibling().addClass('hidden')},error:function(){var msg=$form.data('errorMsg');$form.find('input.email').val('').attr('placeholder',msg)}});return!1});$form.on('click','input.submit, button',function(){$(this).closest('form').find('[required]').addClass('required')});$form.on('focus','input.email',function(){$(this).attr('placeholder',defaultPlaceholder)})};$(bindOrderedEmailSubmit);$(function(){var showMessage=function($form,message,success){if(success){var $box=$form.find('.description').length>0?$form.find('.description'):$form.find('.message');$box.html(message);$box.addClass('success message').removeAttr('style');$box.fadeIn('fast').delay(5000).fadeTo(5000,0,function(){$box.css('visibility','hidden')})}
else{var $input=$form.find('input.email');var oldPlaceholder=$input.attr('placeholder');$input.val('').attr('placeholder',message).addClass('error');$input.on('focus',function(){$(this).attr('placeholder',oldPlaceholder).removeClass('error')})}};var tagSubmit=function(){var $form=$(this);var data=$form.serialize();$.ajax({type:'post',url:'/email/follow-tag-ajax',data:data,success:function(){var signup_page_type=$form.data('signup-page-type');if(signup_page_type=='celebrity-page'||signup_page_type=='vhub-tagalert'||signup_page_type=='tag-page'||signup_page_type=='node-page-tag'){var $alert_signup=$form.closest('.alert-signup');if($alert_signup.length){$alert_signup.find('.alerts').hide();$alert_signup.find('.sweet-signup').show();$alert_signup.find('.signup-message').show()}}
else{var msg=$form.data('confirm-msg');showMessage($form,msg,!0)}
SUGAR.CommonAnalytics.trackEmailSignUpOmniture($form,signup_page_type,!0)},error:function(){var msg=$form.data('error-msg');showMessage($form,msg)}});return!1};$('form.tag-signup').submit(tagSubmit);var facebookCallback=function(userEmail,userZip){if(typeof(userEmail)!='undefined'){var $form=$fbButton.closest('form');var list_name=$form.find('input[name=list_name]').val();var medium=$form.find('input[name=medium]').val();var term=$form.find('input[name=utm_term]').val();$form.find('input[name=email]').val(userEmail);submit(!0,userEmail,list_name,$form,medium,userZip,term)}};$('body').on('click','.fb-signup-button',function(e){e.preventDefault();$fbButton=$(this);SUGAR.Facebook.EmailSub(facebookCallback)})})}(jQuery); /* jsmin */
!function(window,$,SUGAR_PostMessage,ONSUGAR_UserProfile){"use strict";$(function(){var $modal=$('#modal'),$modal_body=$modal.find('.modal-body');var iframe_default_options={'class':'fb-proxy','scrolling':'auto','frameborder':0,'id':'login-frame','name':'login-frame'};var $body=$('body');var login_host=$body.data('popsugar-host')||'http://popsugar.com';var login_site=$body.data('login-site')||'popsugar';var height_updater=function(response){if(response&&response.height){$modal.find('iframe').css('height',response.height+25+'px')}};var hasBackgroundImage=function($ele){return $ele.css('background-image')!=='none'};var setBodyBackground=function(){if(!hasBackgroundImage($body)){return}
var oldBgImage=$body.css('background-image');$body.css('background-image','none').data('old-bg-image',oldBgImage).data('bs-modal-set-bg','true')};var resetBodyBackground=function(){if($body.data('bs-modal-set-bg')==='true'){$body.css('background-image',$body.data('old-bg-image')).removeData('old-bg-image').removeData('bs-modal-set-bg')}};$modal.on('shown.bs.modal',function(){var modalInstance=$modal.data('bs.modal');if(modalInstance&&modalInstance.scrollbarWidth){setBodyBackground()}});$modal.on('hidden.bs.modal',function(){var modalInstance=$modal.data('bs.modal');if(modalInstance&&modalInstance.scrollbarWidth){resetBodyBackground()}});$('.register-button,.login-button').on('click',function(e){e.preventDefault();var user_action=$(this).data('login-action')||'login';var goto_destination=window.location.href;var hash=$(this).data('goto');if(hash){if(window.location.hash){goto_destination=goto_destination.replace(/#[^?&]+/i,'#'+hash)}
else{goto_destination+='#'+hash}}
var url=login_host+'/u/'+user_action+'?'+$.param({destination:goto_destination,site:login_site});if(ONSUGAR_UserProfile.isIPad()||ONSUGAR_UserProfile.isIPhone()){window.location=url;return}
var iframe_attrs=$.extend({},iframe_default_options,{'src':url,'style':'height: 0;'});var $iframe_node=$('<iframe />',iframe_attrs);$modal_body.append($iframe_node);var $modal_waiting=$('#modal-waiting');$modal_waiting.show();$modal.addClass('modal-login').modal();SUGAR_PostMessage.subscribe('iframe_height',function(){$modal_waiting.hide()});SUGAR_PostMessage.subscribe('iframe_height',height_updater);SUGAR_PostMessage.subscribe('close_modal',function(response){if(response){$modal.modal('hide')}});$modal.one('hidden.bs.modal',function(){$modal.removeClass('modal-login').find('iframe').remove();SUGAR_PostMessage.unsubscribe('iframe_height',height_updater)})})})}(window,window.jQuery,window.SUGAR.PostMessage,window.ONSUGAR.UserProfile); /* jsmin */
SUGAR.ShareCopyBtn=window.SUGAR.ShareCopyBtn||(function($){"use strict";return function($share_container,display_url){$('.x').each(function(){if($(this).closest('.share-link').hasClass('active')){$(this).trigger('click')}});var $copy_button=$share_container.find('.copy-button');var $share_link=$share_container.find('.share-link');var $copy_box=$share_container.find('.copy-box');var $x=$share_container.find('.x');if($share_container.width()<500){$x.addClass('mini-x')}
$share_container.toggleClass('active');$share_link.toggleClass('active');$x.one('click',function(e){e.preventDefault();$share_container.removeClass('active');$share_link.removeClass('active');$copy_button.off('click.copy')});$copy_box.val(display_url);$copy_box.select();$copy_button.on('click.copy',function(){$copy_box.select();try{document.execCommand('copy');var old_text=$copy_button.text();$copy_button.text($copy_button.data('copied-text'));setTimeout(function(){$copy_button.text(old_text)},3000)}
catch(err){$copy_button.text($copy_button.data('fallback-text'))}})}})(jQuery); /* jsmin */
!function(window,$){"use strict";ONSUGAR.Event.registerEventHandler('loadedTestSettings',function(){$(document).ready(function(){var $ab_test_running=SUGAR.TestSettings.testRunning();var fancygallery=$('#page-wrapper.fancy-gallery');if(fancygallery.length>0){var $el=$('.fancy-share-container');$el.find('.social-button').click(function(evt){var activeSlide=SUGAR.FancyGallery.getCurrentSlideId();shareClickHandler(evt,{fancy:$('#'+activeSlide)},this)})}
var limitStringSize=function(str,limit){if(str.length>limit){str=str.substring(0,limit-3)+'...'}
return str};var add_share_wrapper=function($this,config){$this.addClass('no-hover-share');if(config.wrap){return $this.wrap('<div class="share-container" data-share-position="article-image">').parent()}
return $this.addClass('share-container')};var tpl=$('#social-hover-share-tpl').tpl();var track_ab_test=function($data,share_type){if($ab_test_running){if($data.hasClass('slide gallery-image')){SUGAR.ABTest.action('img_social_share_'+share_type)}
else{SUGAR.ABTest.action('social_share_'+share_type)}}};var init_share_widgets=function(){$([{'selector':'.stream-view .post-image','wrap':!1,'data':'article'},{'selector':'.post-page .content .video img','wrap':!0,'data':'article.post-page'},{'selector':'.post-page .content img','wrap':!0,'data':'article'},{'selector':'.slide .image-wrapper','wrap':!0,'data':'.slide'},{'selector':'.image-original .image-wrapper','wrap':!1,'data':'figure.slide'},{'selector':'#opening-slide img','wrap':!0,'data':'article',data_fb_share:'#opening-slide'}]).each(function(key,config){$(config.selector).not('.no-hover-share, .left, .right').filter(function(){if(!($(this).width()>10)||!($(this).height()>10)){return!1}
return $(this).parents('.renderedspread a').length==0}).each(function(){var $this=$(this);var w=$this.is('img')?$this.attr('width'):$this.find('img').attr('width');if(w<300){return!0}
var $share_container=add_share_wrapper($this,config);$share_container.append($(tpl).clone());$share_container.on('click touchend','.social-button',function(evt){shareClickHandler(evt,config,this)})})})};var shareClickHandler=function(e,config,el){e.preventDefault();var $this=$(el);var $data=config.fancy?config.fancy:$this.closest(config.data);if(!$data.length){return}
var $share_container=config.fancy?$this.closest('.fancy-share-container'):$this.closest('.share-container');var title=encodeURIComponent(limitStringSize($data.data('title'),110));var twitter_title=encodeURIComponent(limitStringSize($data.data('twitter-title'),110));var display_url=$data.data('permalink');if(config.fancy){display_url=window.location.href}
else if($data.hasClass('slide')){display_url=$data.find('.slide-link').attr('href')||display_url}
var url_twitter=encodeURIComponent(molasses.addUTMParams(display_url,'twitter'));var url_googleplus=encodeURIComponent(molasses.addUTMParams(display_url,'googleplus'));var url_tumblr=encodeURIComponent(molasses.addUTMParams(display_url,'tumblr'));var url_email=encodeURIComponent(molasses.addUTMParams(display_url,'email'));var url_linkedin=encodeURIComponent(molasses.addUTMParams(display_url,'linkedin'));var href;var image;var site_source=encodeURIComponent($('body').data('site-source'));var caption=encodeURIComponent(limitStringSize($.trim($this.closest('.slide').find('.slide-body-container').text()),110));var post_title=encodeURIComponent($.trim($('#opening-slide').find('.post-title').text()));var share_site;if($ab_test_running){SUGAR.ABTest.action('img_social_share')}
if(config.wrap){image=$share_container.find('img').attr('src')}
else if($this.hasClass('pinterest')&&$data.data('share-pinterest-image')){image=$data.data('share-pinterest-image')}
else{image=$data.data('share-image')}
image=encodeURIComponent(image);if($this.hasClass('pinterest')){var pinterest_description;if(title){pinterest_description=title}
else if(caption){pinterest_description=caption}
else if(post_title){pinterest_description=post_title}
else{pinterest_description=''}
PinUtils.pinOne({media:decodeURIComponent(image),url:display_url,description:decodeURIComponent(pinterest_description)});track_ab_test($data,'pinterest');return}
else if($this.hasClass('facebook')){FB.ui({method:'share',href:display_url});track_ab_test($data,'facebook');return}
else if($this.hasClass('twitter')){var twitter_via=$("meta[property='twitter:site']").attr('content').slice(1);href='https://twitter.com/intent/tweet?text='+twitter_title+'&url='+url_twitter+'&via='+twitter_via;share_site='twitter'}
else if($this.hasClass('google')){href='https://plus.google.com/share?url='+url_googleplus;share_site='gplus'}
else if($this.hasClass('linkedin')){href='http://www.linkedin.com/shareArticle?mini=true&url='+url_linkedin+'&title='+title+'&source='+site_source;share_site='linkedin'}
else if($this.hasClass('tumblr')){href='https://www.tumblr.com/widgets/share/tool?posttype=photo&content='+image+'&caption='+title+'&canonicalUrl='+url_tumblr+'&clickthroughUrl='+url_tumblr;share_site='tumblr'}
else if($this.hasClass('mail')){href='mailto:?Subject='+twitter_title+'&body='+title+encodeURIComponent('\n\r')+url_email;window.location.href=href;track_ab_test($data,'email');return}
else if($this.hasClass('link')){SUGAR.ShareCopyBtn($share_container,display_url);track_ab_test($data,'link');return}
if(href){track_ab_test($data,share_site);ONSUGAR.Util.popupWindow(href,{windowName:"_blank",options:"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=600, height=300"})}};var pinitWidget=(function(){var wrapPinImage=function($container){var $img=$container.find('img');return $img.wrap('<div class="pin-img-wrapper"></div>').parent()};var initWidget=function(){$([{'selector':'.post-page .content .video img',wrap:!0,'data':'article.post-page'},{'selector':'.post-page .content img',wrap:!0,'data':'article'},{'selector':'.slide .image-wrapper',wrap:!1,'data':'.slide'},{'selector':'#opening-slide img',wrap:!0,'data':'article'}]).each(function(key,config){$(config.selector).not('.no-pin').each(function(){var $container,$this=$(this);var width=$this.is('img')?$this.attr('width'):$this.find('img').attr('width');if(width<300){return}
var $data=$this.closest(config.data);if($data.length<1){return}
var image,title=$data.data('title'),url=$data.data('permalink');if($data.hasClass('slide')){url=$data.find('.slide-link').attr('href')||url}
image=$data.data('share-pinterest-image')||$data.data('share-image');if(!title||!url||!image){return}
if(config.wrap){$container=$this.closest('.share-container');if($container.length<1){$container=add_share_wrapper($this,config)}}
else{$container=$this}
var $widget=SUGAR.PinitWidget.build(molasses.getPinterestLink(image,url,title));var $targetEle=$container;if($('body').hasClass('large-gallery-page')){$targetEle=wrapPinImage($container)}
$targetEle.append($widget)})})};return{init:function(){initWidget();SUGAR.PinitWidget.parsePins()}}})();var markNoPinElements=function(){$('.no-hover-share').addClass('no-pin')};markNoPinElements();$(window).load(function(){init_share_widgets();add_share_container_events()});if(SUGAR.PinitWidget&&SUGAR.PinitWidget.enabled){pinitWidget.init()}
if(SUGAR.ImageToolsWidget){SUGAR.ImageToolsWidget.init()}
var add_share_container_events=function(){$('.share-container').on('mouseenter','.actions-toggle',function(e){if($(this).nextAll('.'+$(this).data('container')).length){$(this).nextAll('.'+$(this).data('container')).fadeIn();$(this).parent().find('.actions-toggle').hide()}});$('.share-container').on('mouseleave','.actions-container',function(e){$(this).fadeOut();$(this).parent().find('.actions-toggle').show()})};$(window).on('infinite-scroll:loaded-more',init_share_widgets);$(document).on('click','.share-image',function(event){event.preventDefault()})})})}(window,window.jQuery); /* jsmin */
SUGAR=window.SUGAR||{};SUGAR.SocialSharing=function(){var overrides={};var TWITTER_URL_BASE='https://twitter.com/intent/tweet?',GOOGLE_URL_BASE='https://plus.google.com/share?',TUMBLR_URL_BASE='http://www.tumblr.com/widgets/share/tool?';var selector_text='.social-share-buttons-consolidated:not(.custom-sharing) .social-button';return{update:function(social_text){for(var text in social_text){overrides[text]=social_text[text]}
SUGAR.SocialSharing.registerSocialButtons()},registerSocialButtons:function(){if(!$('body').hasClass('mobile')){$('body').off('click',selector_text,SUGAR.SocialSharing.socialButtonListener);var social_info={'title':'','twitter-title':'','permalink':'','share-image':'','twitter-via':'','fb-quote':'','twitter-caption':''};var $article=$('article.post-page').first();$.each(social_info,function(key,value){if($article.data(key)){social_info[key]=$article.data(key)}});this.setOverriddenAttributes(social_info);$('body').on('click',selector_text,SUGAR.SocialSharing.socialButtonListener)}},socialButtonListener:function(e){var href='';var $this=$(this);if(!$this.hasClass('print')){e.preventDefault();e.stopPropagation()}
var $socialContainer=$this.closest('.social-share-buttons-consolidated:not(.custom-sharing)');var fabShare=$socialContainer.data('fb-share-data');if(!fabShare){SUGAR.SocialSharing.registerSocialButtons()}
if($this.hasClass('facebook')){FB.ui($socialContainer.data('fb-share-data'));return}else if($this.hasClass('twitter')){href=$socialContainer.data('twitter-share-url')}else if($this.hasClass('mail')){href=$socialContainer.data('email-share-url')}else if($this.hasClass('tumblr')){href=$socialContainer.data('tumblr-share-url')}else if($this.hasClass('google')){href=$socialContainer.data('google-share-url')}
if(href&&href.length){ONSUGAR.Util.popupWindow(href,{name:"_blank",options:"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=600, height=300"})}},setOverriddenAttributes:function(social_info){$('.social-share-buttons-consolidated:not(.custom-sharing)').each(function(index,social_container){var social_group_info=$.extend({},social_info);$.each(social_group_info,function(key,value){if($(social_container).data(key)&&$(social_container).data(key).length>0){social_group_info[key]=$(social_container).data(key)}});var image=social_group_info['share-image']||'',title=social_group_info.title,link=overrides.permalink||social_group_info.permalink||decodeURIComponent($('body').data('site-source'));var link_utm_facebook=molasses.addUTMParams(link,'facebook',!1);var link_utm_google=molasses.addUTMParams(link,'googleplus',!1);var link_utm_twitter=molasses.addUTMParams(link,'twitter',!1);var link_utm_tumblr=molasses.addUTMParams(link,'tumblr',!1);var link_utm_email=molasses.addUTMParams(link,'email',!1);var link_utm_google_encoded=encodeURIComponent(link_utm_google),link_utm_twitter_encoded=encodeURIComponent(link_utm_twitter),link_utm_tumblr_encoded=encodeURIComponent(link_utm_tumblr),link_utm_email_encoded=encodeURIComponent(link_utm_email);var twitter_title=overrides['twitter-title']||social_group_info['twitter-title']||social_group_info['twitter-caption']||title;var twitter_via=social_group_info['twitter-via']||$("meta[property='twitter:site']").attr('content').slice(1);var fb_quote=overrides['fb-quote']||social_group_info['fb-quote']||null;var twitter_share_url=TWITTER_URL_BASE+'&text='+encodeURIComponent(twitter_title)+'&url='+link_utm_twitter_encoded+'&via='+encodeURIComponent(twitter_via),google_share_url=GOOGLE_URL_BASE+'url='+link_utm_google_encoded,tumblr_share_url=TUMBLR_URL_BASE+'posttype=photo&content='+encodeURIComponent(image)+'&caption='+encodeURIComponent(twitter_title)+'&canonicalUrl='+link_utm_tumblr_encoded+'&clickthroughUrl='+link_utm_tumblr_encoded,email_share_url='mailto:?subject='+encodeURIComponent(twitter_title)+'&body='+encodeURIComponent(title+'\n\r')+link_utm_email_encoded;var fb_share_data={"method":'share',"href":link_utm_facebook,"quote":fb_quote};$(social_container).data({'fb-share-data':fb_share_data,'twitter-share-url':twitter_share_url,'google-share-url':google_share_url,'tumblr-share-url':tumblr_share_url,'email-share-url':email_share_url})})}}}();!function(window,$){var $socialButtonContainer;(function(){SUGAR.SocialSharing.registerSocialButtons();$('.social-header .share-expand').on('click',function(){var $expand_button=$(this);$expand_button.toggleClass('expanded');if(typeof $socialButtonContainer!=='undefined'){$socialButtonContainer.find('.social-button').toggleClass('extended')}
$(this).prev().toggleClass('hidden')});var sendToContainer=$('.send-to-messenger-container');$('.messenger-container').on('click',function(e){sendToContainer.show()});$('.send-to-messenger-close').on('click',function(e){sendToContainer.hide()});ONSUGAR.Event.registerEventHandler('fb:loaded',function(){FB.Event.subscribe('send_to_messenger',function(e){if(e.event=="clicked"){updateMessengerCount()}})});$(document).on('click',function(e){if($(e.target).closest(".facebook-messenger").length===0){sendToContainer.hide()}});function updateMessengerCount(){var articleData=$('article.post-page').data();var home_url='/static/sc.php'+'?gid='+articleData.gid+'&uid='+articleData.uid+'&nid='+articleData.nid+'&type=node'+'&results[messenger]=0';$.get(home_url)}})();(function(){if(!$('body').hasClass('native-page')){var referringUrl=document.referrer;var referralSocialPlatformsObject={'facebook.com':{name:'facebook',renderName:'Facebook'},'pinterest.com':{name:'pinterest',renderName:'Pinterest'},'twitter.com':{name:'twitter',renderName:'Twitter'},'t.co':{name:'twitter',renderName:'Twitter'},'plus.google.com':{name:'google',renderName:'Google +'},'tumblr.com':{name:'tumblr',renderName:'Tumblr'},'t.umblr.com':{name:'tumblr',renderName:'Tumblr'}};var getReferringPlatform=function(){for(var socialPlatformUrl in referralSocialPlatformsObject){if(referringUrl.indexOf(socialPlatformUrl)!==-1){return socialPlatformUrl}}
return!1};var referringPlatform=getReferringPlatform();var $socialHeader=$('.post-social .social-header');var referralPlatformContainerClass=referringPlatform?'.'+referralSocialPlatformsObject[referringPlatform].name+'-container':'';$socialButtonContainer=referralPlatformContainerClass?$socialHeader.find('.social-button-container'+referralPlatformContainerClass):undefined;if(referringPlatform){var $socialButton=$socialButtonContainer.find('.social-button');if($socialButtonContainer.length>0){var socialButtonExtension="<span class='content'>Share on "+referralSocialPlatformsObject[referringPlatform].renderName+"</span>";$socialButton.append(socialButtonExtension);var $socialButtonContainerDetached=$socialButtonContainer.detach();$socialHeader.find('.total-share-count').after($socialButtonContainerDetached);$socialButton.addClass('extended');var $visibleSocialButtonContainers=$('.social-header').find('.social-button-container:visible');if($visibleSocialButtonContainers.length>3){var $hiddenSocialContainers=$visibleSocialButtonContainers.slice(3).detach();$socialHeader.find('.social-header-extra').prepend($hiddenSocialContainers)}}}}})()}(window,window.jQuery); /* jsmin */
!function(window,document,$){"use strict";$(function(){var fresh_share_button=function($fresh_btn){var old_count=$fresh_btn.data('count');var new_count=old_count===''?1:old_count+1;if((isNaN(old_count)&&old_count!=='')||isNaN(new_count)){return}
if(new_count>1000){return}
$fresh_btn.data('count',new_count);var share_img=$fresh_btn.find('.social-icon').eq(0);$fresh_btn.html(new_count==1000?'1K':new_count);$fresh_btn.prepend(share_img);var total_shares=$('#total-shares-number');if(total_shares.length){var current_shares=total_shares.data('count');if(current_shares<1000){total_shares.text(current_shares<999?current_shares+1:'1K').data('count',current_shares+1)}}};$('.social-button').one('click',function(){var class_string='.'+$(this).attr('class').replace(/\s+/g,'.');if($(this).attr('class').indexOf('favorite')<0){$(class_string).each(function(){fresh_share_button($(this))})}});if(!window.Worker||!window.Promise){return}
var articleData=$('article.post-page').data();if(!articleData||articleData.noSc){return}
var SAMPLE=5;var myWorker;var getWorker=function(){if(!myWorker){var revision='/v'+(document.body.dataset&&document.body.dataset.assetsRev||0);myWorker=new Worker(revision+"/themes/onsugar_themes/lightspeed/js/socialcounts.worker.js")}
return myWorker};var updateSocialCounters=function(payload){payload.filter(function(item){if(!item.nid){return!1}
item.urls.filter(function(u){return!!u});return!!item.urls.length});if(payload.length){getWorker().postMessage(payload)}};$('#gallery-content').on('slideChange',function(event,leavingSlideNid,leavingSlidePermlink,leavingSlideIndex,enteringSlideIndex,leavingSlideType){var lucky_number=Math.random()*9999999<<0;if(leavingSlideType=='image'&&leavingSlidePermlink&&parseInt(leavingSlideNid,10)>0&&lucky_number%SAMPLE==0&&leavingSlidePermlink!=articleData.permalink){updateSocialCounters([{urls:[leavingSlidePermlink],nid:leavingSlideNid,type:'image',gid:articleData.nid,author_uid:articleData.uid}])}});$(window).on('load',function(){var lucky_number=Math.random()*9999999<<0;var payload=[];if(lucky_number%SAMPLE==0){var sharingUrls=articleData.sharingurls;payload.push({urls:Object.keys(sharingUrls||{}).map(function(key){return sharingUrls[key]}),nid:articleData.nid,type:'node',gid:articleData.gid,author_uid:articleData.uid})}
$('.slide-link').sort(function(){return 0.5-Math.random()}).slice(0,Math.ceil(20/SAMPLE)).each(function(){var $this=$(this);var slide_url=$this.attr('href');if(!slide_url){return}
slide_url=slide_url.replace(/\?.*$/,'');slide_url=slide_url.replace(/#.*$/,'');if(slide_url==articleData.permalink){return}
var slide_nid=$this.children('img').data('nid');payload.push({urls:[slide_url],nid:slide_nid,type:'image',gid:articleData.nid,author_uid:articleData.uid})});if(payload.length){updateSocialCounters(payload)}})})}(window,document,jQuery); /* jsmin */
!function(window,$){$(function(){if(window.location.hash&&window.location.hash=='#comments'){$('#comments').show()}
$('.join-the-convo-cta').click(function(){$('#comments').show()})})}(window,window.jQuery); /* jsmin */
!function(window,$){$(function(){var sites={};var locale=ONSUGAR.Util.getCookie('client_locale');var lang=$('html').attr('lang');var $tip=$('.country-selector-tip');var $globeicon=$('a.selected-country');var $nav=$('#js-primary-navigation');function init(){if(!$('body').hasClass('mobile')){$('#navtooltip').append($('.country-selector-tip.fixedheader'));$('.nav-country-selector.fixedheader').hover(function(){$nav.css('overflow','visible');$nav.find('.post-info').hide()})}
var $menu=$('.country-selector-tip:eq(0)');$menu.find('.country-link').each(function(idx){sites[$(this).data('iso')]=$(this).data('locale')});$('a.selected-country').mouseover(hideTip);if(getCookie()!==null){return}
lang=lang.replace('-','_');for(var site in sites){sites[site]=sites[site].replace('-','_')}
if(sites[locale]&&sites[locale]!==lang){showTip()}
else{$('.nav-country-selector').hide();hideFixedHeader()}
$tip.find('.closebtn').click(function(){hideTip();setCookie()});if($('body').hasClass('mobile')){showFixedHeader()}else if($('body').hasClass('homepage_page')||$('body').hasClass('channel_page')){$(window).on('scroll',function(){checkScroll()});checkScroll()}else{showFixedHeader()}}
function checkScroll(){var scrollY=window.scrollY;if(scrollY===undefined){scrollY=document.documentElement.scrollTop}
if(scrollY<$('#top-nav').height()){hideFixedHeader()}else{showFixedHeader()}}
function hideFixedHeader(){$('.tooltip_holder').hide()}
function showFixedHeader(){$('.tooltip_holder').show()}
function showTip(location){$globeicon.addClass('tip');$tip.find('.'+locale).show();$tip.show()}
function hideTip(locale){$tip.hide();$globeicon.removeClass('tip')}
function setCookie(){if(!getCookie()){var expiry=60*60*24*365*1000;var obj={"locale":locale,"ts":new Date().getTime()};ONSUGAR.Util.setCookie("ps_nav_sites",JSON.stringify(obj),{expires:expiry,path:'/'})}}
function getCookie(){return ONSUGAR.Util.getCookie("ps_nav_sites")}
function deleteCookie(){return ONSUGAR.Util.deleteCookie("ps_nav_sites")}
init()})}(window,window.jQuery); /* jsmin */
(function($,window,document,SUGAR,ONSUGAR){$(function(){var $window=$(window);if($('.large-gallery-page').length>0){$(document).keydown(function(e){if($(e.target).is(':input')){return}
if(e.keyCode==37){if(typeof $('.previous-link').attr('href')!=='undefined'){window.location=$('.previous-link').attr('href')}
return!1}
if(e.keyCode==39){if(typeof $('.next-link').attr('href')!=='undefined'){window.location=$('.next-link').attr('href')}
return!1}});var $image=$('.image-wrapper').find('img, video');$image.on('touchstart',function(event){var startX=event.originalEvent.changedTouches[0].screenX;var startY=event.originalEvent.changedTouches[0].screenY;$image.one('touchend',function(event){var endX=event.originalEvent.changedTouches[0].screenX;var endY=event.originalEvent.changedTouches[0].screenY;if(startX-endX<-100){if(typeof $('.previous-link').attr('href')!=='undefined'){window.location=$('.previous-link').attr('href')}
return!1}
else if(startX-endX>100){if(typeof $('.next-link').attr('href')!=='undefined'){window.location=$('.next-link').attr('href')}
return!1}
else if((startY-endY>-50)&&(startY-endY<50)){$('.share-image').toggleClass('shown');return!1}
return!1})})}
if($('article.gallery.stream.post-page').length>0){var show_email_overlay=$('#overlay-email-widget').length>0;var slideTrack=function($slide){var slide_hash=$slide.attr('id');if(slide_hash&&slide_hash!='comments'){var slide_id=$slide.data('slide-id');var slide_nid=$slide.data('slide-nid');var $url=location.pathname+location.search+'#'+slide_hash;SUGAR.Analytics.trackPageView($url,slide_nid,slide_id);ONSUGAR.Event.registerEventHandler('loadedTestSettings',function(){if(SUGAR.TestSettings.testRunning()){SUGAR.ABTest.action('gallery_slide_view')}});$(window).trigger('gallery:scroll',{slide_nid:slide_hash,slide_index:slide_id})}};var state_timeout_handle;var isIpad=ONSUGAR.UserProfile.isIPad();var _maintainCurrentPageState=function($slide){var location_hash=location.hash;var slide_hash='#'+$slide.attr('id');if(slide_hash=='#opening-slide'){slide_hash=null}
if(location_hash!=slide_hash){history.replaceState(null,null,slide_hash);if(slide_hash&&slide_hash.toLowerCase().indexOf('interstitial')==-1){slideTrack($slide)}}};var maintainCurrentPageState=function($slide){if(isIpad){_maintainCurrentPageState($slide)}
else{if(state_timeout_handle){clearTimeout(state_timeout_handle)}
state_timeout_handle=setTimeout(function(){_maintainCurrentPageState($slide)},500)}};if(location.hash.length>1){slideTrack($('figure'+location.hash))}
var pageview=0;var doTrackPage=function(){pageview++;var contentViewsPerRotation=SUGAR.Titan.getContentViewRatio();if(pageview==contentViewsPerRotation){pageview=0;SUGAR.Titan.rotateAds('sidebar')}};$('figure').waypoint(function(event){if(event=='up'){maintainCurrentPageState($(this.element))}},{continuous:isIpad,offset:'-10%'});var playVideo=function(element){if($(element).hasClass('gif-load')&&($(element).attr('src')=='#'||$(element).attr('src')==undefined)){var videoSource=$(element).data('src');$(element).attr('src',videoSource)}
var playPromise=element.play();if(playPromise!==undefined){playPromise.catch(function(e){})}};var pauseVideo=function(element){if($(element).hasClass('gif-load')){$(element).attr('src','#')}
else{var playPromise=element.play();if(playPromise!==undefined){playPromise.then(function(){element.pause()}).catch(function(e){})}}};var setWaypointForGif=function(){var $gifVideo=$('.gif-video');if($gifVideo.length>0){$gifVideo.waypoint(function(direction){if(direction=='down'){playVideo(this.element)}
else{pauseVideo(this.element)}},{offset:'125%',continuous:!0});$gifVideo.waypoint(function(direction){if(direction=='up'){playVideo(this.element)}
else{pauseVideo(this.element)}},{offset:'-125%',continuous:!0})}};setWaypointForGif();$('figure').waypoint(function(event){if(event==='down'){if(ONSUGAR.Util.isAU()){doTrackPage()}
if($(this.element).next('figure').data('slide-id')=='5'){show_email_overlay=show_email_overlay&&$('.email-signup-active').length==0;if(SUGAR.ads){if(show_email_overlay&&SUGAR.ads.checkCPC()){show_email_overlay=!1;$('#modal-signup-placeholder').addClass('email-signup-active').modal()}}}
maintainCurrentPageState($(this.element))}},{offset:'10%'});$('.next, .start, .icon-angle-down').click(function(e){go(e.target,!1)});$('.previous, .icon-angle-up').click(function(e){go(e.target,!0)});$(document).keydown(function(e){if($(e.target).is(':input')){return}
var element;if(e.keyCode==84){$('html,body').animate({scrollTop:0});return!1}
if(e.keyCode==66){$('html,body').animate({scrollTop:$('#comments').offset().top},100);return!1}
if(e.keyCode==37){element=window.location.hash;go(element,!0);return!1}
if(e.keyCode==39){element=window.location.hash;go(element,!1);return!1}});var go=function(element,up){var $target=up?$(element).closest('figure').prevAll('figure').eq(0):$(element).closest('figure').nextAll('figure').eq(0);var $nav=$('.nav-logo-container');if(!$target.length&&!element.length){$target=$('#opening-slide')}
if($(element).attr('id')=='comments'&&up){$target=$('figure.slide').last()}
if(!$target.length&&($(element).attr('id')!='opening-slide')){$target=$('#comments')}
if($target.length>0){$('html,body').scrollTop($target.offset().top-$nav.height());maintainCurrentPageState($target)}};var setImageHeight=function(){var stretch_images_max_width=$('.post-page.gallery').data('stretch-images-max-width');if(stretch_images_max_width){$('figure.slide .image-wrapper img, figure.slide .image-wrapper video').not('.poll-logo').css('width','100%').closest('.image-wrapper').css('display','block')}
else if(!$('body').hasClass('ikb')){$('figure.slide img, figure.slide video').not('.poll-logo').not('.xxxtall').css({'max-height':$window.height(),});$('figure.slide img, figure.slide video').not('.poll-logo').css({'max-width':Math.min($('#content').width(),768),'height':'auto','width':'auto'})}
$window.trigger('gallery:image-resize')};setImageHeight();$window.resize($.debounce(100,setImageHeight));$('article.post-page.gallery .video-slide').one('click',function(e){var $that=$(this);var $script=$that.find('script').html();$script=$('<div/>').html($script).text();$that.empty().removeClass('video-slide').addClass('video-slide-in').append($script);e.preventDefault()});var adjustPollCover=function(){var $post=$('article.post-page.stream.gallery'),pollCoverId;if(pollCoverId=$post.data('poll-cover')){var pollSelector='#poll_ajax_placeholder_'+pollCoverId,slidePollSelector='#photo-'+pollCoverId,coverSourceSelector='#js-gallery-photo-source-holder',pollAt='slide';$(pollSelector).insertBefore(coverSourceSelector);pollAt='cover';$window.on('scroll',function(){var pollHeight=$(pollSelector).height(),slidePollOffset=$(slidePollSelector).offset().top,coverSourceOffset=$(coverSourceSelector).offset().top;if($window.scrollTop()<coverSourceOffset){if(pollAt!='cover'){pollAt='cover';$(pollSelector).insertBefore(coverSourceSelector);$window.scrollTop($window.scrollTop()+pollHeight)}}
else if($window.scrollTop()>=slidePollOffset){if(pollAt!='slide'){pollAt='slide';$(pollSelector).insertBefore(slidePollSelector+" script");$window.scrollTop($window.scrollTop()-pollHeight)}}})}};adjustPollCover();var bindClickToRevealButton=function(){var clickToRevealButton=function(e){e.preventDefault();var $flipContainer=$(this).closest(".flip-container"),HEIGHT_ANIMATION_DURATION=500,height;if($flipContainer.hasClass('flip')){$flipContainer.removeClass("flip");height=$(this).closest('.flipper').find('.front').find('figure').height()}
else{$flipContainer.addClass("flip");height=$(this).closest('.flipper').find('.back').find('figure').height()}
$flipContainer.animate({height:height},HEIGHT_ANIMATION_DURATION)};$('.flip-container').on('click','.flip-button, .slide-link',clickToRevealButton)};bindClickToRevealButton()}})}(jQuery,window,document,SUGAR,ONSUGAR)); /* jsmin */
(function($,window,document,SUGAR,ONSUGAR){$(function(){var favoriteClass='favorited';$('body').on('click','.favorite',function(e){e.preventDefault();if(!ONSUGAR.Util.isLoggedIn()){if($('body').hasClass('mobile')){$('.signin a')[0].click()}
else{$('.login-button').trigger('click')}
return}
var type=$(this).data('favorite-type');var action=$(this).data('favorite-action');var id=$(this).data('favorite-id');var nid=$(this).data('node-nid');var $this_favorite=$('[data-favorite-id="'+id+'"][data-favorite-type="'+type+'"]');if(action=='add'){$this_favorite.addClass(favoriteClass);$this_favorite.data('favorite-action','delete')}
else{$this_favorite.removeClass(favoriteClass);$this_favorite.data('favorite-action','add')}
$.get('/favorite',{id:id,type:type,action:action,nid:nid}).then(function(result){var data=JSON.parse(result);if(data.action=='add'){$this_favorite.addClass(favoriteClass);$this_favorite.data('favorite-action','delete')}
else if(data.action=='delete'){$this_favorite.removeClass(favoriteClass);$this_favorite.data('favorite-action','add')}
else{}})});ONSUGAR.Event.registerEventHandler('SSOComplete',function(){if(!ONSUGAR.Util.isLoggedIn()||document.body.getAttribute('data-is-not-cache')){return}
var favorite_buttons=[];var used_buttons=[];var $favorites=$('.favorite');$favorites.each(function(){"use strict";var $that=$(this);var type=$that.data('favorite-type');var id=$that.data('favorite-id');var key=type+'|'+id;if(used_buttons.indexOf(key)<0){used_buttons.push(key);favorite_buttons.push({'fav-type':$that.data('favorite-type'),'fav-id':$that.data('favorite-id')})}});if(favorite_buttons.length<1){return}
$.post('/ajax/favorite-refresh',{data:favorite_buttons}).then(function(data){data.forEach(function(item){$favorites.filter('[data-favorite-id="'+item['fav-id']+'"][data-favorite-type="'+item['fav-type']+'"]').toggleClass(favoriteClass,item.show).data('favorite-action',item.show?'delete':'add')})},$.noop)});var $nav=$('#js-primary-navigation');var LOCAL_STORAGE_VIEWS_KEY='user_favorite_tooltip_views';var user_favorite_tooltip_views=0;var USER_FAVORITE_TOOLTIP_VIEWS_LIMIT=5;if(ONSUGAR.Util.isLocalStorageAvailable()){user_favorite_tooltip_views=parseInt(window.localStorage.getItem(LOCAL_STORAGE_VIEWS_KEY));if(isNaN(user_favorite_tooltip_views)){user_favorite_tooltip_views=0}}
$('.favorite-tooltip').mouseenter(function($e){$e.stopPropagation();var $star=$(this);if(user_favorite_tooltip_views<USER_FAVORITE_TOOLTIP_VIEWS_LIMIT){$nav.css('overflow','visible');if(!$star.hasClass('favorite-container')){$nav.find('.post-info').hide()}
$star.find(".submenu-favorite").show();ONSUGAR.Util.localStorageSetItem(LOCAL_STORAGE_VIEWS_KEY,++user_favorite_tooltip_views)}}).mouseleave(function($e){$(this).find(".submenu-favorite").hide()})})}(jQuery,window,document,SUGAR,ONSUGAR)); /* jsmin */
SUGAR=window.SUGAR||{};SUGAR.StarsVoting=window.SUGAR.StarsVoting||function(){var StarVoting=function(ele){var $votingBox=$(ele);if($votingBox.length<1)return;var txtBeforeVote=$votingBox.data('txt_before_vote'),txtAfterVote=$votingBox.data('txt_after_vote'),txtVote1=$votingBox.data('txt_vote1'),txtVote2=$votingBox.data('txt_vote2'),txtVote3=$votingBox.data('txt_vote3'),txtVote4=$votingBox.data('txt_vote4'),txtVote5=$votingBox.data('txt_vote5'),contentType=$votingBox.data('content_type'),contentId=$votingBox.data('content_id'),nodeType=$votingBox.data('node_type');var hints=[txtVote1,txtVote2,txtVote3,txtVote4,txtVote5];var cookieKey='star_vote_'+contentId;var voteCount,voteAvg,userVote,userVoteTime;var $votingCounter=$votingBox.find('.voting-counter');var $votingUser=$votingBox.find('.voting-user');var getVotingData=function(callback){var data={nid:contentId,type:contentType,fastcache:1,sharecache:1};$.ajax({url:'/ajax/voting/stars_data',method:'GET',data:data,success:function(response){updateVotingData(response,response.user_vote);callback()}})};var initVotingCounter=function(){setVotingCounterHead();$votingCounter.find('.voting-body').popraty({starType:'i',readOnly:!0,halfShow:!0,score:voteAvg,hints:hints,space:!1})};var setVotingCounterHead=function(){$votingCounter.find('.vote-count').html(voteCount)};var updateVotingCounter=function(){setVotingCounterHead();var $voting=$votingCounter.find('.voting-body');$voting.popraty('score',voteAvg)};var updateVotingData=function(response,score){voteCount=response.vote_count;voteAvg=response.vote_avg;userVote=score;userVoteTime=response.user_vote_time};var setVoteCookie=function(){ONSUGAR.Util.deleteCookie(cookieKey);var cookieValue=userVote+':'+(userVoteTime||'');ONSUGAR.Util.setCookie(cookieKey,cookieValue,{expires:(30*60)/(24*60*60),path:'/'})};var initVotingUser=function(){var $votingHead=$votingUser.find('.voting-head');$votingText=userVote>0?txtAfterVote:txtBeforeVote;var userVotingCallback=function(score,$star,raty){var previousVote=ONSUGAR.Util.getCookie('star_vote_'+contentId);raty.setTargetText(txtAfterVote);if(previousVote&&parseInt(previousVote)===score){return!0}
raty.setTargetText('saving');var data={vote:score,nid:contentId,type:contentType};$.ajax({url:'/voting/star/ajax',type:'POST',data:data,success:function(response){if(response.error){return}
updateVotingData(response,score);setVoteCookie();updateVotingCounter()},complete:function(){raty.setTargetText(txtAfterVote)}})};$votingUser.find('.voting-body').popraty({starType:'i',score:userVote,target:'.voting-user .voting-head',targetText:$votingText,hints:hints,space:!1,click:userVotingCallback})};getVotingData(function(){initVotingCounter();initVotingUser()})};return{init:function(ele){StarVoting(ele)}}}();ONSUGAR.Event.registerEventHandler('SSOComplete',function(){SUGAR.StarsVoting.init('.stars-voting')}); /* jsmin */
(function($,Util){var $window=$(window);var $body=$('body');var $adPageshift=$('.ad-page_shift').first();var $adLeaderboardParent=$('#sugar-subnav-ad');var $adLeaderboard=$('.ad-leaderboard').first();var $featureSection=$('.feature-section');var infiniteScrollEventsLoaded=!1;var $slimNav=$('#js-primary-navigation');var $topNav=$('#top-nav');var $shopHeader=$('.shop-header');var lastHeight;var animating=!1;var adHidden=!1;var waypointsCreated=!1;var nativeAU=$body.hasClass('native-page')&&document.documentElement.lang=="en-AU";var disableFixedPosition=(document.documentElement.lang=="en-AU"&&$('article').hasClass('js-slideshow'))||($('#content-wrapper').hasClass('legacy')&&!nativeAU);var DEFAULT_AD_HEIGHT=600;var adSizeDetector=function($ele,cb){lastHeight=$ele.outerHeight();setInterval(function(){var curHeight=$ele.outerHeight();if(lastHeight!=curHeight){lastHeight=curHeight;cb(lastHeight)}},500)};var positionElement=function($element,position,top,marginTop){if(marginTop<0){return!1}
$element.css({'position':position?position:$element.css('position'),'top':top?top+'px':$element.css('top'),'marginTop':marginTop+'px'})};var getContentHeight=function(){var $galleryStreamContent=$('article.gallery.stream');var $gallerySlideContent=$('article.gallery.js-slideshow');var $slideContent=$('#gallery-content');var $textContent=$('article.text');var $videoContent=$('article.video');var height=0;if($gallerySlideContent.length&&$slideContent.length){if($('#slide-container').is(':visible')){height+=$('#slide-container').outerHeight()}
if($slideContent.find('.title-wrap').is(':visible')){height+=$slideContent.find('.title-wrap').outerHeight()}
if($slideContent.find('.body-wrap').is(':visible')){height+=$slideContent.find('.body-wrap').outerHeight()}
if($slideContent.find('.image-thumbs').is(':visible')){height+=$slideContent.find('.image-thumbs').outerHeight()}
return height}
else if($galleryStreamContent.length){$galleryStreamContent.find('figure').each(function(){height+=$(this).outerHeight()});return height}
else if($textContent.length){return height=$textContent.find('section.content').outerHeight()}
else if($videoContent.length){return height=$videoContent.find('section.content').outerHeight()}
return height};var fixSidebarAd=function(){if(waypointsCreated)return;waypointsCreated=!waypointsCreated;var $footer=$('footer');var $ad=$('.sidebar-ad-container');var $sidebar=$('#sidebar');var $adSidebarWaypoint=$('#waypoint-for-fixed-ads');var areAdsAlone=$adSidebarWaypoint.is(':first-child');var $postPageWaypoint=$('.infinite-scroll-on-post-page');var $endOfPageWaypoint=$body.hasClass('node_page')?$('#end-of-node-page'):$('#content-wrapper');var $latestTitle=$('.latest-title-header');var topSlim=$('.nav-logo-container').outerHeight()+10;var initialMargin=$ad.css('margin-top');var fixedNavHeight=disableFixedPosition&&$('.ad-leaderboard-marquee').length>0?$('.ad-leaderboard-marquee').outerHeight():$slimNav.outerHeight()+$shopHeader.outerHeight();var fixDistance=$ad.length?$ad.offset().top-fixedNavHeight-20:0;var contentHeight=getContentHeight();if(contentHeight>0&&contentHeight<660){disableFixedPosition=!0}
$adSidebarWaypoint.waypoint(function(direction){if(disableFixedPosition){positionElement($ad,'static',0,areAdsAlone?$('.post-header').outerHeight(!0)+10:0)}
else if(direction=='down'&&$ad.css('position')!=='fixed'){positionElement($ad,'fixed',fixedNavHeight,initialMargin)}
else if(direction=='up'&&$ad.css('position')==='fixed'){positionElement($ad,'static',0,initialMargin)}},{offset:fixedNavHeight});if($body.hasClass('node_page')&&!disableFixedPosition){$endOfPageWaypoint.waypoint(function(direction){if(direction=='down'){var offset=$(this.element).offset().top-($ad.outerHeight()+$adSidebarWaypoint.offset().top)+$('.post-footer').first().outerHeight();if(nativeAU){offset=$(this.element).offset().top-($ad.outerHeight()+$adSidebarWaypoint.offset().top)}
if($shopHeader.length>0){offset-=$shopHeader.outerHeight()}
positionElement($ad,'static',0,offset)}
else{positionElement($ad,'fixed',fixedNavHeight,initialMargin)}},{offset:DEFAULT_AD_HEIGHT})}
if($body.hasClass('node_page')||$body.hasClass('channel_page')){$(window).on('infinite-scroll:loaded-more',function(){if(!infiniteScrollEventsLoaded){infiniteScrollEventsLoaded=!0;if($body.hasClass('node_page')){$latestTitle.waypoint(function(direction){if(direction=='down'){if(nativeAU){positionElement($ad,'absolute',$latestTitle.offset().top,0)}else{positionElement($ad,'absolute',$latestTitle.offset().top+$latestTitle.outerHeight()-$sidebar.offset().top,0)}}
else{var offset=$endOfPageWaypoint.offset().top-DEFAULT_AD_HEIGHT-fixDistance;positionElement($ad,'static',0,offset)}},{offset:'100%'})}
$postPageWaypoint.waypoint(function(direction){if(direction=='down'){positionElement($ad,'fixed',topSlim,0)}
else{if(nativeAU){positionElement($ad,'absolute',$latestTitle.outerHeight()-$sidebar.offset().top,0)}else{positionElement($ad,'absolute',$latestTitle.offset().top+$latestTitle.outerHeight()-$sidebar.offset().top,0)}}},{offset:fixedNavHeight});if($footer.length){var footerFix=fixedNavHeight+10;$footer.waypoint(function(direction){if(direction=='down'){var offset=$(this.element).offset().top-DEFAULT_AD_HEIGHT-fixDistance-footerFix;positionElement($ad,'static',0,offset)}
else{positionElement($ad,'fixed',topSlim,0)}},{offset:DEFAULT_AD_HEIGHT+footerFix})}}
Waypoint.refreshAll()})}
if(typeof FB!='undefined'){FB.Event.subscribe('xfbml.render',function(){if($('#upper_rec-0').length){fixDistance=$('#upper_rec-0').offset().top-fixedNavHeight-20;Waypoint.refreshAll()}})}
$(window).load(function(){Waypoint.refreshAll()})};if(!$body.hasClass('snap_page')){$(document).on('ad_leaderboard-0_loaded ad_leaderboard_t-0_loaded',function(){Waypoint.refreshAll()});$(document).on('ad_upper_rec-0_loaded ad_upper_rec_t-0_loaded',function(){fixSidebarAd()});if($('#sugar-upper-ad').length){fixSidebarAd()}
else if($('#adspot-300x600_300x250-pos1').length){setTimeout(function(){fixSidebarAd()},2000)}}
var showPageshiftAd=function(){$adPageshift.show();$topNav.addClass('static');$('body').addClass('top-nav-ad')};var showLeaderboardAd=function(animations){$adLeaderboardParent.show();var featureHeight=$featureSection.length>0?$featureSection.outerHeight():0;var navHeight=$slimNav.length>0&&parseInt($slimNav.css('margin-top'))>=0?$slimNav.outerHeight():0;var topNavHeight=$topNav.length>0&&$topNav.height()>0?$topNav.height():0;var $hideAdWaypoint=400;var marginSpacer=2;$body.css('background-position','center '+(navHeight+topNavHeight+featureHeight+marginSpacer)+'px');if(animations){if($window.scrollTop()>=$hideAdWaypoint){adHidden=!0;$topNav.css('top','-'+$adLeaderboardParent.outerHeight()+'px')}
$window.on('scroll',$.throttle(100,function(){if(!adHidden&&!animating&&$window.scrollTop()>=$hideAdWaypoint){animating=!0;$topNav.animate({top:'-'+$adLeaderboardParent.outerHeight()+'px'},500,function(){animating=!1;adHidden=!0})}
if(adHidden){if($window.scrollTop()>$adLeaderboardParent.outerHeight()){if($topNav.hasClass('static')){$topNav.css('top','-'+$adLeaderboardParent.outerHeight()+'px');$topNav.removeClass('static')}}
else{if(!$topNav.hasClass('static')){$topNav.addClass('static')}}}}))}
adSizeDetector($adLeaderboard,function(){var featureHeight=$featureSection.length>0?$featureSection.outerHeight():0;var navHeight=$slimNav.length>0&&parseInt($slimNav.css('margin-top'))>=0?$slimNav.outerHeight():0;var topNavHeight=$topNav.length>0&&$topNav.height()>0?$topNav.height():0;var marginSpacer=2;var bgPosX=navHeight+topNavHeight+featureHeight+marginSpacer;$body.animate({'background-position-y':bgPosX+'px'},100,function(){Waypoint.refreshAll()})})};if($adPageshift.length){$adPageshift.hide();var page_shift_shown=!1;if(typeof SUGAR.gpt!=='undefined'){$.each(SUGAR.gpt.getRenderedAds(),function(index,ad){if(ad.getSlotElementId()==='page_shift-0'){showPageshiftAd();page_shift_shown=!0}})}
if(!page_shift_shown){$(document).on('ad_page_shift-0_loaded',function(event,ad){showPageshiftAd()})}}
if($('body').data('nervoraAds')&&$('body').hasClass('homepage_page')){showPageshiftAd()}
if($adLeaderboardParent.hasClass('fixed')){$adLeaderboardParent.hide()}
$(document).on('ad_leaderboard-0_loaded',function(event,ad){var showAnimations=$adLeaderboardParent.hasClass('fixed');showLeaderboardAd(showAnimations)})})(jQuery,ONSUGAR.Util); /* jsmin */
(function($,ONSUGAR){"use strict";var is_mouse_inside_highlightable_element=!1;var startX=0;var startY=0;var url_to_share;var text_to_share;var $highlight_share_button=$();function getText(){if(window.getSelection){return window.getSelection()}
else if(window.document.getSelection()){return window.document.getSelection()}
else if(window.document.selection){return window.document.selection.createRange().text}
return null}
function removeHighlightShareButtons(){$highlight_share_button.addClass('hidden')}
function updateShareData($target,highlighted_text){url_to_share=$target.closest('figure').data('permalink')||$target.closest('article').data('permalink')||$('link[rel=canonical]').attr('href');text_to_share=highlighted_text.toString()}
function attachBodyWatch(){$('body').on('mousedown',function(event){startX=event.pageX;startY=event.pageY}).on('mouseup',function(event){if(!is_mouse_inside_highlightable_element||(event.pageX===startX&&event.pageY===startY)){removeHighlightShareButtons()}})}
function attachHighlightableHandler(){var $highlightable=$('.highlightable');$highlightable.hover(function(){is_mouse_inside_highlightable_element=!0},function(){is_mouse_inside_highlightable_element=!1});$highlightable.on('mouseup',function(event){var highlighted_text=getText(),highlight_length=highlighted_text.toString().length;if(!highlight_length){removeHighlightShareButtons();return}
var $targ=$(event.target);if($targ.is(':input')){return}
updateShareData($targ,highlighted_text);$highlight_share_button.removeClass('hidden');var range=highlighted_text.getRangeAt(0);var boundingBox=range.getBoundingClientRect();var midPoint=boundingBox.left+(boundingBox.width/2)-($highlight_share_button.outerWidth()/2);var topPoint=Math.min(event.pageY,startY)-1.5*$highlight_share_button.outerHeight();$highlight_share_button.css({'top':topPoint+'px','left':midPoint+'px'})})}
function attachButtonHandlers(){$('.highlight-share-facebook').on('click',function(/*event*/){removeHighlightShareButtons();FB.ui({method:'share',quote:text_to_share,href:url_to_share})});$('.highlight-share-twitter').on('click',function(/*event*/){removeHighlightShareButtons();var dims={name:'Twitter',width:550,height:325},twitter_via=$("meta[property='twitter:site']").attr('content').slice(1),twitterURL='https://twitter.com/intent/tweet?text='+encodeURIComponent(text_to_share)+'&url='+encodeURIComponent(url_to_share)+'&via='+twitter_via;ONSUGAR.Util.popupWindowCenter(twitterURL,dims)})}
var readyDeferred=jQuery.Deferred();var FBReadyDeferred=jQuery.Deferred();$(readyDeferred.resolve);ONSUGAR.Event.registerEventHandler('fb:loaded',FBReadyDeferred.resolve);$.when(readyDeferred,FBReadyDeferred).then(function(){$highlight_share_button=$('#highlight-share-button');attachBodyWatch();attachHighlightableHandler();attachButtonHandlers()})})(jQuery,ONSUGAR); /* jsmin */
(function($,ONSUGAR){"use strict";var TWITTER_URL_BASE='https://twitter.com/intent/tweet?';var getQuoteableText=function(el){var pullquote=$(el).closest('.pullquote-container').find('.pullquote').text();return $.trim(pullquote)};var facebookHandler=function(e){e.preventDefault();var link=$('article.post-page').data('permalink');var quote=getQuoteableText(this);FB.ui({"method":"share","quote":quote,"href":link})};var twitterHandler=function(e){e.preventDefault();var quote=getQuoteableText(this);var twitterCharLimit=140,twitterURLEncodingLength=23,twitterURLEncodingBuffer=2;var quoteTextLimit=twitterCharLimit-twitterURLEncodingLength-twitterURLEncodingBuffer;if(quote.length>quoteTextLimit){quote=quote.slice(0,quoteTextLimit)+'…'}
var link=$('article.post-page').data('permalink');var twitter_via=$("meta[property='twitter:site']").attr('content').slice(1);var twitterUrl='https://twitter.com/intent/tweet?text='+encodeURIComponent(quote)+'&url='+encodeURIComponent(link)+'&via='+twitter_via;ONSUGAR.Util.popupWindow(twitterUrl,{name:"_blank",options:"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=600, height=300"})};var createLink=function(platform){return $('<a target="_blank" class="omniture-track social-button">').addClass('icon-'+platform).addClass(platform).attr({'data-omniture-type':'pullquote-'+platform,'data-share-type':platform+'-share','data-service':platform})};var attachSharebuttons=function(){$('blockquote.pullquote').each(function(){var facebookBtn=createLink('facebook').on('click',facebookHandler);var twitterBtn=createLink('twitter').on('click',twitterHandler);var $shareBlock=$('<div class="pullquote-share">').append(facebookBtn).append(twitterBtn);$(this).after($shareBlock)})};var readyDeferred=jQuery.Deferred();var FBReadyDeferred=jQuery.Deferred();$(readyDeferred.resolve);ONSUGAR.Event.registerEventHandler('fb:loaded',FBReadyDeferred.resolve);$.when(readyDeferred,FBReadyDeferred).then(attachSharebuttons)})(jQuery,ONSUGAR); /* jsmin */
(function($,window,document){var AUTO_SCROLL=!0;var SCROLL_THRESH=800;var history=window.history;var loading=!1;var page_rex=/page=(\d+)/i;var $window=$(window);if(page_rex.test(document.location.hash.replace(/^#/,''))&&history.location.href!=document.location.href&&window.self==window.top){document.location=history.location}
$(function(){AUTO_SCROLL=!$('body').hasClass('no-auto-scroll');var findLastTimestamp=function(){if($('.post-page').length==0){if($('#content article').last().data('timestamp')){return $('#content article').last().data('timestamp')}
else if($('#content .ikb-post').last().data('timestamp')){return $('#content .ikb-post').last().data('timestamp')}}
return!1};var $pager=$('#pager');var $next=$pager.find('.pager-next');var force_pager_type_page=$pager.data('force-pager-type')=='page';var post_page=$('body').hasClass('node_page')?1:0;var next_html=$next.html();var latest_timestamp=findLastTimestamp();var current_page=0;if($('body').hasClass('node_page')&&!$('body').hasClass('video-page')&&!$('.photobooth-photos').length&&!$('body').hasClass('vhub-page')){current_page=-1}
if(AUTO_SCROLL){$next.html('<i aria-hidden="true" class="icon-ps-mark fa-flash"></i>')}
var noMore=function(){$next.data('scroll-no-more',1).text($pager.data('nomore-text')||'The End.').fadeOut(5000,function(){loading=!1})};$window.on('infinite-scroll:set-current-page',function(e){current_page=0});$next.on('click',function(e){e.preventDefault();if(loading){return}
if(!AUTO_SCROLL){$pager.addClass('loading');$next.html('<i aria-hidden="true" class="icon-ps-mark fa-flash"></i>')}
var location=$next.get(0);var url_parts,href;href=$next.data('next-page')||location.href;url_parts=ONSUGAR.Util.parseURL(href);var url_params=url_parts.params;url_params.page=current_page+1;if($pager.data('not-nids')){url_params.not_nids=$pager.data('not-nids')}
var path_to_load=url_parts.path;if(!force_pager_type_page&&latest_timestamp){delete url_params.page;url_params.before_timestamp=latest_timestamp}
if($pager.data('sponsor')){url_params.sponsor=$pager.data('sponsor')}
loading=!0;var ajax_data={ajax:1,scroll_count:current_page+1,page:current_page+1,node_page:post_page,ikb_front_page:$('body').hasClass('ikb')&&$('body').hasClass('homepage_page')?1:0};var append_element=$pager.data('append-element');$.ajax({url:path_to_load,data:$.extend({},url_params,ajax_data),dataType:'html',error:noMore,success:function(response){if(!AUTO_SCROLL){$pager.removeClass('loading');$next.html(next_html)}
if(!response){noMore();return}
response=$($.trim(response));if($('div.ikb-post-container',response).length){if(!$('div.ikb-post',response).length){noMore();return}}
current_page++;if(append_element){$(append_element).append(response)}
else{$pager.before(response)}
var display_url=path_to_load+'?'+$.param(url_params,!0);if(!$pager.data('immutable')){$next.attr('href',display_url)}
$window.trigger('infinite-scroll:loaded-more',{custom_hub_next_page:url_params.custom_hub_next_page,current_page:current_page,latest_timestamp:latest_timestamp,loaded_for_tab:url_params.selected_tab,elements:response});if(typeof SUGAR.gpt!='undefined'){SUGAR.gpt.setTargeting('page',current_page)}
loading=!1;latest_timestamp=findLastTimestamp();doRefreshAds()}})});var doRefreshAds=function(){if(ONSUGAR.Util.isAU()&&$('body').hasClass('node_page')){SUGAR.Titan.rotateAds('sidebar')}};var $advertisement=$('#sugar-subnav-ad');var $marqueeAdvertisement=$('.ad-element-container');var $stub=$('.js-slideshow-stub');var $more_block=$('#more-from-popsugar');var $nodeEmailWidget=$('#node-email-widget');var $body=$('body');var $lastArticle=$('#content').find('article').last();var nodeEmailWidgetPosition;var scrollListener=$.throttle(250,function(){if($advertisement.length&&$('.js-slideshow').length>0){var $ad_block_height=$advertisement.outerHeight();var page_header_height=$('.nav-group-tertiary').outerHeight()+$('#js-primary-navigation').outerHeight()+$('#js-secondary-navigation').outerHeight()+$('#js-app-promo-bar-container').outerHeight();if($more_block.length>0){var removeStuckLeaderboardPosition=$more_block.offset().top}
else if($nodeEmailWidget.length>0){var removeStuckLeaderboardPosition=$nodeEmailWidget.offset().top}
$stub.css('height',$ad_block_height);if($window.scrollTop()>=page_header_height&&(typeof removeStuckLeaderboardPosition!=='undefined'?$window.scrollTop()<=(removeStuckLeaderboardPosition-$ad_block_height):!0)){if(!$advertisement.hasClass('ad-fixed')){$body.addClass('fix-skin');$stub.show();$advertisement.addClass('ad-fixed')}}
else if($advertisement.hasClass('ad-fixed')){$body.removeClass('fix-skin');$stub.hide();$advertisement.removeClass('ad-fixed')}}
if($next.length>0&&(current_page+1)>=0){var scrollTop=$window.scrollTop()+$window.height(),elementOffset=$next.offset().top,distance=(elementOffset-scrollTop);if(distance<SCROLL_THRESH&&!loading&&!$next.data('scroll-no-more')){if($('.photobooth-photos').length>0){$next.fadeIn()}
$next.trigger('click')}}
nodeEmailWidgetPosition=!$body.hasClass('show-shoppable-products')&&$nodeEmailWidget.length>0?$nodeEmailWidget.offset().top:nodeEmailWidgetPosition;if($marqueeAdvertisement.length&&($marqueeAdvertisement.hasClass('marquee-ad-loaded')||$marqueeAdvertisement.hasClass('slide-show'))&&(typeof nodeEmailWidgetPosition!=='undefined'?$window.scrollTop()>=nodeEmailWidgetPosition:!1)){$marqueeAdvertisement.addClass('hidden-leaderboard')}
else{$marqueeAdvertisement.removeClass('hidden-leaderboard')}});if(AUTO_SCROLL){$window.on('scroll',scrollListener)}})}(window.jQuery,window,document)); /* jsmin */
!function(window,$){$(function(){if(!$('html').hasClass('touch')){return}
var user_menu=function(){var $accountLink=$('.account-menu');if($accountLink.length==0||$accountLink.hasClass('touch-listener')){return}
$accountLink.addClass('touch-listener');var $userMenu=$('#nav-prime-login').children('nav');var $navUser=$accountLink.parent();$navUser.on('touchstart',function(e){e.preventDefault();e.stopPropagation();$navUser.addClass('active');$userMenu.find('li').on('touchstart',function(e){e.preventDefault();e.stopPropagation();if(typeof $(e.currentTarget).find('a').attr('href')!=='undefined'){window.location=$(e.currentTarget).find('a').attr('href')}});$('body').one('touchstart',function(){$navUser.removeClass('active')})});var $navAdmin=$('#nav-admin');$navAdmin.on('touchstart',function(e){var $menu=$('#js-nav-admin');e.preventDefault();e.stopPropagation();$navAdmin.addClass('active');$menu.find('a').on('touchstart',function(e){if(typeof $(this).attr('href')!=='undefined'){window.location=$(this).attr('href')}});$('body').one('touchstart',function(){$navAdmin.removeClass('active')})})};var $heroes=$('#heroes');$heroes.find('a').on('touchstart',function(){if(typeof $(this).attr('href')!=='undefined'){window.location=$(this).attr('href')}});if($('body').hasClass('ikb')){var $originalActive=$('#js-nav-channel').find('ul>li>a.active');$('#js-nav-channel').find('ul>li>a').on('touchstart',function(e){e.preventDefault();e.stopPropagation();var $this=$(this);if($this.parent().hasClass('active')){if(typeof $this.attr('href')!=='undefined'){window.location=$this.attr('href')}}
else{$this.addClass('active');var $parent=$this.parent();$parent.addClass('active');$parent.siblings().find('a').removeClass('active');$parent.siblings().removeClass('active');$('body').off('touchstart.ipad-nav').on('touchstart.ipad-nav',function(e){if($(e.target).closest($parent).length==0){$parent.removeClass('active');$this.removeClass('active');$originalActive.addClass('active')}})}})}
else{$('#js-nav-channel').find('ul a').on('touchstart',function(e){e.preventDefault();e.stopPropagation();if($(this).hasClass('active')){if(typeof $(this).attr('href')!=='undefined'){window.location=$(this).attr('href')}}
else{$(this).addClass('active').parent().siblings().find('a').removeClass('active');$heroes.children().removeClass('active');$('[data-hero="'+$(this).data('hero-show')+'"]').addClass('active');$heroes.show();$('body').one('touchstart',function(){$heroes.hide();$heroes.children().removeClass('active');$('.nav-channel').find('a').removeClass('active');$('.nav-channel [data-active=true]').addClass('active')})}})}
user_menu();$('.touch .share-container a').on('click',function(e){e.preventDefault();var $imageContainer=$(this).parent(),$activityContainers=$imageContainer.find('.share-image');if($activityContainers.is(':visible')){$activityContainers.hide();$imageContainer.find('.share-open').show()}
else{window.location=$(this).attr('href')}});$('.touch .share-container .share-open').on('touchend',function(e){e.preventDefault();var $imageContainer=$(this).parent();$imageContainer.find('.share-open').hide();$imageContainer.find('.'+$(this).data('container')).show()});$(document).on('touchend','.touch .poll label.option',function(e){e.preventDefault();var $input=$(this).prev();$input.trigger('click')});$(document).on('ajaxSuccess',function(){user_menu()})})}(window,window.jQuery); /* jsmin */
!function(window,$){$(function(){var cookie_consent_key=$('#cookie-consent-key').val();var cookie_consent_value=ONSUGAR.Util.getCookie(cookie_consent_key);if(cookie_consent_value=='TRUE'){$('#cookie-consent-banners').hide()}
else{$('#cookie-consent-banners').show()}
$('body').on('click','#cookie-consent-submit',function(e){$('#cookie-consent-banners').hide();$("#cookie-consent-submit").load("/cookie_consent #cookie-consent-submit > *")})})}(window,window.jQuery); /* jsmin */
var SUGAR=SUGAR||{};SUGAR.survey=function(){var field_id_prefix='edit-';return{addQuestion:function(base_id,count_field_title,max,link){var next=1;$count=$('#'+field_id_prefix+count_field_title)
if($count){next+=parseInt($count.attr('value'))}
var element=$('#'+base_id+'_'+next);if(element){element.show();$count.attr('value',next)}
if(next>=max){$(link).hide()}},clearQuestion:function(current){$('#question_'+current+' input').each(function(e){$(this).val('')})},selectAnswer:function(element,question,total_ans,extra){if(extra==1){if(element.value==total_ans){$('#'+field_id_prefix+'questions-has_extras-'+question).val(1);$('#answer_extra_'+question+' input').attr('size',45);$('#answer_extra_'+question).show()}
else{$('#'+field_id_prefix+'questions-has_extras-'+question).val(0);$('#answer_extra_'+question).hide()}}},clearImage:function(current){var value=$('#'+field_id_prefix+'questions-'+current+'-data-question_photo_exists').val();$('#'+field_id_prefix+'questions-'+current+'-data-question_photo_delete').val(value);$('#question_'+current+' img').hide();$('#image_clear_'+current).hide()}}}(); /* jsmin */
!function($){"use strict";var abbWaitTime=500;var abbRepeatCount=10;var checkForParty=function(){if($('#ad-block-buster').length>0&&$('#ad-block-buster').is(':visible')){return!1}
return!0};var adBlockDetected=function(){SUGAR.CommonAnalytics.trackBlockParty()};$(function(){$('body').append($('<div>',{id:'ad-block-buster',class:'ad ads advert advertorial gpt pub_300x250 pub_300x250m pub_728x90 text-ad video-ad textAd videoAd text_ad video_ad text_ads video_ads text-ads video-ads text-ad-links video ad-links',style:'width: 1px !important; height: 1px !important; position: absolute !important; top: -1000px !important;'}));ONSUGAR.Util.waitFor(checkForParty,adBlockDetected,$.noop,abbWaitTime,abbRepeatCount)})}(jQuery); /* jsmin */
SUGAR=window.SUGAR||{};(function(window,$){var run=function(e){var scope=window;if(typeof e==='function'){e.call(scope);return}
var command=e.shift();var args=e;var func=undefined;if(typeof command==='function'){func=command}
else{var commandOrig=command;command=command.split('.');while(command.length>1){scope=scope[command.shift()]}
if(!scope){console.log("scope broken, commandOrig: "+commandOrig);return}
func=scope[command.shift()]}
setTimeout(function(){func.apply(scope,args)},0)};$(SUGAR.dispatcher).each(function(){run(this)});SUGAR.dispatcher={push:function(){$(arguments).each(function(){run(this)})}}})(window,jQuery); /* jsmin */
(function(d,s,id){var js,pjs=d.getElementsByTagName(s)[0];var pub_code=document.body.getAttribute('data-sugar-pubexchange-name');if(d.getElementById(id)||!pub_code){return}
js=d.createElement(s);js.id=id;js.async=!0;js.src='//cdn.pubexchange.com/discover/'+pub_code;pjs.parentNode.insertBefore(js,pjs)}(document,'script','pubexchange-jssdk')); /* jsmin */

/*Compiled in 0.018353939056396ms at Wed, 21 Feb 2018 18:27:41 -0800 host: sugarprodweb16.sugarops.com*/
