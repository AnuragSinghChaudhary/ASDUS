function sendDeprecationNotification(e){return function(){console.log("[AdFuel - DEPRECATION NOTICE] AMPTManager is DEPRECATED and will be removed in the next version of AdFuel.  Please update your code to reference AdFuel instead of AMPTManager."),window.AdFuel[e].apply(this,arguments)}}function nativoComplete(){"use strict";jQuery(".zn.zn-staggered").each(function(){$staggeredZone=jQuery(this),layoutSize=($staggeredZone.attr("data-eq-state")||"").replace(/^(\S+\s+)*/,""),$staggeredZone.find(".zn__containers .column").each(function(){$staggeredColumn=jQuery(this),void 0!==$staggeredColumn.attr("class")&&$staggeredColumn.attr("class").indexOf("ntv")>-1&&($nativeContainer=$staggeredColumn.find(".cn").addClass("nativeSponsor").clone(),$staggeredColumn.remove(),$staggeredNativo=$staggeredZone.find(".column"),$staggeredNativo="xsmall"===layoutSize?$staggeredNativo.eq(0).find(".cn").eq(1):$staggeredNativo.eq(1).find(".cn").eq(0),$staggeredNativo.before($nativeContainer))})}),jQuery(".pg-wrapper").find("section.nativeSponsor").addClass("zn-loaded"),jQuery(window).load(function(){$nativeHubCarousel=jQuery(document.getElementById("ntv-videoZone")).find(".js-owl-carousel"),$nativeHubCarousel.length>0&&!isGalleryRendered&&(CNN.Carousel.restore($nativeHubCarousel.parent()),isGalleryRendered=!0)})}function onNativoRenderAd(e){"use strict";nativo.fbFeed=e.facebook_feed,nativo.twFeed=e.twitter_feed,nativo.twitterImage=e.twitter_image,nativo.authorName=e.author_name,nativo.epicAdName=e.native_adv,$nativeEmbedVideo=jQuery(document.getElementById("prx_full_ad_video")),$nativeEmbedVideo.length>0&&$nativeEmbedVideo.parent().addClass("ntv_video_p"),$bigPicture=jQuery(document.getElementById("bigPicture")),$bigPicture.length>0&&!isGalleryRendered&&(nativo.renderGallery(),isGalleryRendered=!0),jQuery(window).load(function(){nativo.renderAuthor(),nativo.renderFacebook(),nativo.renderTwitter(),nativo.renderEpic()})}function changeOwlCarousalWidth(){"use strict";var e=jQuery(".js-pg-sponsor .owl-stage-outer .owl-stage"),t=e.find(".owl-item").length;e.css("width",70*t)}Modernizr.addTest("ios",function(){"use strict";return!!navigator.userAgent.match(/(iPod|iPhone|iPad)/i)}),Modernizr.addTest("android",function(){"use strict";return!!navigator.userAgent.match(/android/i)}),Modernizr.addTest("iemobile",function(){"use strict";return!!navigator.userAgent.match(/iemobile/i)}),Modernizr.addTest("ieunsupported",function(){"use strict";return navigator.userAgent.search(/MSIE ([2-9]|10)\./i)>=0}),Modernizr.addTest("ie11unsupported",function(){"use strict";return navigator.userAgent.search(/Trident\/7\.0;(.*)rv:11\./i)>=0}),Modernizr.addTest("ie",function(){"use strict";return navigator.userAgent.search(/\s+(MSIE|rv:11|Edge\/\d+\.)/)>=0}),Modernizr.addTest("edge",function(){"use strict";return navigator.userAgent.search(/\s+(Edge\/\d+\.)/)>=0}),function(e){var t=navigator.userAgent;e.HTMLPictureElement&&/ecko/.test(t)&&t.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var t,n=document.createElement("source"),i=function(e){var t,i,o=e.parentNode;"PICTURE"===o.nodeName.toUpperCase()?(t=n.cloneNode(),o.insertBefore(t,o.firstElementChild),setTimeout(function(){o.removeChild(t)})):(!e._pfLastSize||e.offsetWidth>e._pfLastSize)&&(e._pfLastSize=e.offsetWidth,i=e.sizes,e.sizes+=",100vw",setTimeout(function(){e.sizes=i}))},o=function(){var e,t=document.querySelectorAll("picture > img, img[srcset][sizes]");for(e=0;e<t.length;e++)i(t[e])},a=function(){clearTimeout(t),t=setTimeout(o,99)},r=e.matchMedia&&matchMedia("(orientation: landscape)"),s=function(){a(),r&&r.addListener&&r.addListener(a)};return n.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?s():document.addEventListener("DOMContentLoaded",s),a}())}(window),function(e,t,n){"use strict";function i(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function o(){O=!1,D=e.devicePixelRatio,R={},M={},g.DPR=D||1,j.width=Math.max(e.innerWidth||0,x.clientWidth),j.height=Math.max(e.innerHeight||0,x.clientHeight),j.vw=j.width/100,j.vh=j.height/100,m=[j.height,j.width,D].join("-"),j.em=g.getEmValue(),j.rem=j.em}function a(e,t,n,i){var o,a,r,s;return"saveData"===A.algorithm?e>2.7?s=n+1:(a=t-n,o=Math.pow(e-.6,1.5),r=a*o,i&&(r+=.1*o),s=e+r):s=n>1?Math.sqrt(e*t):e,s>n}function r(e){var t,n=g.getSet(e),i=!1;"pending"!==n&&(i=m,n&&(t=g.setRes(n),g.applySetCandidate(t,e))),e[g.ns].evaled=i}function s(e,t){return e.res-t.res}function l(e,t,n){var i;return!n&&t&&(n=e[g.ns].sets,n=n&&n[n.length-1]),i=d(t,n),i&&(t=g.makeUrl(t),e[g.ns].curSrc=t,e[g.ns].curCan=i,i.res||K(i,i.set.sizes)),i}function d(e,t){var n,i,o;if(e&&t)for(o=g.parseSet(t),e=g.makeUrl(e),n=0;n<o.length;n++)if(e===g.makeUrl(o[n].url)){i=o[n];break}return i}function c(e,t){var n,i,o,a,r=e.getElementsByTagName("source");for(n=0,i=r.length;n<i;n++)o=r[n],o[g.ns]=!0,(a=o.getAttribute("srcset"))&&t.push({srcset:a,media:o.getAttribute("media"),type:o.getAttribute("type"),sizes:o.getAttribute("sizes")})}function u(e,t){function n(t){var n,i=t.exec(e.substring(u));if(i)return n=i[0],u+=n.length,n}function o(){var e,n,i,o,s,l,d,c,u,f=!1,h={};for(o=0;o<r.length;o++)s=r[o],l=s[s.length-1],d=s.substring(0,s.length-1),c=parseInt(d,10),u=parseFloat(d),W.test(d)&&"w"===l?((e||n)&&(f=!0),0===c?f=!0:e=c):H.test(d)&&"x"===l?((e||n||i)&&(f=!0),u<0?f=!0:n=u):W.test(d)&&"h"===l?((i||n)&&(f=!0),0===c?f=!0:i=c):f=!0;f||(h.url=a,e&&(h.w=e),n&&(h.d=n),i&&(h.h=i),i||n||e||(h.d=1),1===h.d&&(t.has1x=!0),h.set=t,p.push(h))}for(var a,r,s,l,d,c=e.length,u=0,p=[];;){if(n(q),u>=c)return p;a=n(z),r=[],","===a.slice(-1)?(a=a.replace(U,""),o()):function(){for(n(L),s="",l="in descriptor";;){if(d=e.charAt(u),"in descriptor"===l)if(i(d))s&&(r.push(s),s="",l="after descriptor");else{if(","===d)return u+=1,s&&r.push(s),void o();if("("===d)s+=d,l="in parens";else{if(""===d)return s&&r.push(s),void o();s+=d}}else if("in parens"===l)if(")"===d)s+=d,l="in descriptor";else{if(""===d)return r.push(s),void o();s+=d}else if("after descriptor"===l)if(i(d));else{if(""===d)return void o();l="in descriptor",u-=1}u+=1}}()}}function p(e){var t,n,o,a,r,s,l=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,d=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(n=function(e){function t(){a&&(r.push(a),a="")}function n(){r[0]&&(s.push(r),r=[])}for(var o,a="",r=[],s=[],l=0,d=0,c=!1;;){if(""===(o=e.charAt(d)))return t(),n(),s;if(c){if("*"===o&&"/"===e[d+1]){c=!1,d+=2,t();continue}d+=1}else{if(i(o)){if(e.charAt(d-1)&&i(e.charAt(d-1))||!a){d+=1;continue}if(0===l){t(),d+=1;continue}o=" "}else if("("===o)l+=1;else if(")"===o)l-=1;else{if(","===o){t(),n(),d+=1;continue}if("/"===o&&"*"===e.charAt(d+1)){c=!0,d+=2;continue}}a+=o,d+=1}}}(e),o=n.length,t=0;t<o;t++)if(a=n[t],r=a[a.length-1],function(e){return!!(l.test(e)&&parseFloat(e)>=0)||(!!d.test(e)||("0"===e||"-0"===e||"+0"===e))}(r)){if(s=r,a.pop(),0===a.length)return s;if(a=a.join(" "),g.matchesMedia(a))return s}return"100vw"}t.createElement("picture");var f,h,m,g={},v=!1,y=function(){},w=t.createElement("img"),_=w.getAttribute,b=w.setAttribute,C=w.removeAttribute,x=t.documentElement,E={},A={algorithm:""},S=navigator.userAgent,N=/rident/.test(S)||/ecko/.test(S)&&S.match(/rv\:(\d+)/)&&RegExp.$1>35,T="currentSrc",k=/\s+\+?\d+(e\d+)?w/,I=e.picturefillCFG,F="font-size:100%!important;",O=!0,R={},M={},D=e.devicePixelRatio,j={px:1,in:96},B=t.createElement("a"),P=!1,L=/^[ \t\n\r\u000c]+/,q=/^[, \t\n\r\u000c]+/,z=/^[^ \t\n\r\u000c]+/,U=/[,]+$/,W=/^\d+$/,H=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Q=function(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)},V=function(e){var t={};return function(n){return n in t||(t[n]=e(n)),t[n]}},$=function(){var e=function(){for(var e=arguments,t=0,n=e[0];++t in e;)n=n.replace(e[t],e[++t]);return n},t=V(function(t){return"return "+e((t||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(e,n){var i;if(!(e in R))if(R[e]=!1,n&&(i=e.match(/^([\d\.]+)(em|vw|px)$/)))R[e]=i[1]*j[i[2]];else try{R[e]=new Function("e",t(e))(j)}catch(e){}return R[e]}}(),K=function(e,t){return e.w?(e.cWidth=g.calcListLength(t||"100vw"),e.res=e.w/e.cWidth):e.res=e.d,e},J=function(e){if(v){var n,i,o,a=e||{};if(a.elements&&1===a.elements.nodeType&&("IMG"===a.elements.nodeName.toUpperCase()?a.elements=[a.elements]:(a.context=a.elements,a.elements=null)),n=a.elements||g.qsa(a.context||t,a.reevaluate||a.reselect?g.sel:g.selShort),o=n.length){for(g.setupRun(a),P=!0,i=0;i<o;i++)g.fillImg(n[i],a);g.teardownRun(a)}}};e.console&&console.warn,T in w||(T="src"),E["image/jpeg"]=!0,E["image/gif"]=!0,E["image/png"]=!0,E["image/svg+xml"]=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),g.ns=("pf"+(new Date).getTime()).substr(0,9),g.supSrcset="srcset"in w,g.supSizes="sizes"in w,g.supPicture=!!e.HTMLPictureElement,g.supSrcset&&g.supPicture&&!g.supSizes&&function(e){w.srcset="data:,a",e.src="data:,a",g.supSrcset=w.complete===e.complete,g.supPicture=g.supSrcset&&g.supPicture}(t.createElement("img")),g.supSrcset&&!g.supSizes?function(){var e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=t.createElement("img"),i=function(){2===n.width&&(g.supSizes=!0),h=g.supSrcset&&!g.supSizes,v=!0,setTimeout(J)};n.onload=i,n.onerror=i,n.setAttribute("sizes","9px"),n.srcset=e+" 1w,data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw== 9w",n.src=e}():v=!0,g.selShort="picture>img,img[srcset]",g.sel=g.selShort,g.cfg=A,g.DPR=D||1,g.u=j,g.types=E,g.setSize=y,g.makeUrl=V(function(e){return B.href=e,B.href}),g.qsa=function(e,t){return"querySelector"in e?e.querySelectorAll(t):[]},g.matchesMedia=function(){return e.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?g.matchesMedia=function(e){return!e||matchMedia(e).matches}:g.matchesMedia=g.mMQ,g.matchesMedia.apply(this,arguments)},g.mMQ=function(e){return!e||$(e)},g.calcLength=function(e){var t=$(e,!0)||!1;return t<0&&(t=!1),t},g.supportsType=function(e){return!e||E[e]},g.parseSize=V(function(e){var t=(e||"").match(/(\([^)]+\))?\s*(.+)/);return{media:t&&t[1],length:t&&t[2]}}),g.parseSet=function(e){return e.cands||(e.cands=u(e.srcset,e)),e.cands},g.getEmValue=function(){var e;if(!f&&(e=t.body)){var n=t.createElement("div"),i=x.style.cssText,o=e.style.cssText;n.style.cssText="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",x.style.cssText=F,e.style.cssText=F,e.appendChild(n),f=n.offsetWidth,e.removeChild(n),f=parseFloat(f,10),x.style.cssText=i,e.style.cssText=o}return f||16},g.calcListLength=function(e){if(!(e in M)||A.uT){var t=g.calcLength(p(e));M[e]=t||j.width}return M[e]},g.setRes=function(e){var t;if(e){t=g.parseSet(e);for(var n=0,i=t.length;n<i;n++)K(t[n],e.sizes)}return t},g.setRes.res=K,g.applySetCandidate=function(e,t){if(e.length){var n,i,o,r,d,c,u,p,f,h=t[g.ns],m=g.DPR;if(c=h.curSrc||t[T],u=h.curCan||l(t,c,e[0].set),u&&u.set===e[0].set&&((f=N&&!t.complete&&u.res-.1>m)||(u.cached=!0,u.res>=m&&(d=u))),!d)for(e.sort(s),r=e.length,d=e[r-1],i=0;i<r;i++)if(n=e[i],n.res>=m){o=i-1,d=e[o]&&(f||c!==g.makeUrl(n.url))&&a(e[o].res,n.res,m,e[o].cached)?e[o]:n;break}d&&(p=g.makeUrl(d.url),h.curSrc=p,h.curCan=d,p!==c&&g.setSrc(t,d),g.setSize(t))}},g.setSrc=function(e,t){var n;e.src=t.url,"image/svg+xml"===t.set.type&&(n=e.style.width,e.style.width=e.offsetWidth+1+"px",e.offsetWidth+1&&(e.style.width=n))},g.getSet=function(e){var t,n,i,o=!1,a=e[g.ns].sets;for(t=0;t<a.length&&!o;t++)if(n=a[t],n.srcset&&g.matchesMedia(n.media)&&(i=g.supportsType(n.type))){"pending"===i&&(n=i),o=n;break}return o},g.parseSets=function(e,t,n){var i,o,a,r,s=t&&"PICTURE"===t.nodeName.toUpperCase(),l=e[g.ns];(void 0===l.src||n.src)&&(l.src=_.call(e,"src"),l.src?b.call(e,"data-pfsrc",l.src):C.call(e,"data-pfsrc")),(void 0===l.srcset||n.srcset||!g.supSrcset||e.srcset)&&(i=_.call(e,"srcset"),l.srcset=i,r=!0),l.sets=[],s&&(l.pic=!0,c(t,l.sets)),l.srcset?(o={srcset:l.srcset,sizes:_.call(e,"sizes")},l.sets.push(o),(a=(h||l.src)&&k.test(l.srcset||""))||!l.src||d(l.src,o)||o.has1x||(o.srcset+=", "+l.src,o.cands.push({url:l.src,d:1,set:o}))):l.src&&l.sets.push({srcset:l.src,sizes:null}),l.curCan=null,l.curSrc=void 0,l.supported=!(s||o&&!g.supSrcset||a&&!g.supSizes),r&&g.supSrcset&&!l.supported&&(i?(b.call(e,"data-pfsrcset",i),e.srcset=""):C.call(e,"data-pfsrcset")),l.supported&&!l.srcset&&(!l.src&&e.src||e.src!==g.makeUrl(l.src))&&(null===l.src?e.removeAttribute("src"):e.src=l.src),l.parsed=!0},g.fillImg=function(e,t){var n,i=t.reselect||t.reevaluate;e[g.ns]||(e[g.ns]={}),n=e[g.ns],(i||n.evaled!==m)&&(n.parsed&&!t.reevaluate||g.parseSets(e,e.parentNode,t),n.supported?n.evaled=m:r(e))},g.setupRun=function(){P&&!O&&D===e.devicePixelRatio||o()},g.supPicture?(J=y,g.fillImg=y):function(){var n,i=e.attachEvent?/d$|^c/:/d$|^c|^i/,o=function(){var e=t.readyState||"";a=setTimeout(o,"loading"===e?200:999),t.body&&(g.fillImgs(),(n=n||i.test(e))&&clearTimeout(a))},a=setTimeout(o,t.body?9:99),r=x.clientHeight,s=function(){O=Math.max(e.innerWidth||0,x.clientWidth)!==j.width||x.clientHeight!==r,r=x.clientHeight,O&&g.fillImgs()};Q(e,"resize",function(e,t){var n,i,o=function(){var a=new Date-i;a<t?n=setTimeout(o,t-a):(n=null,e())};return function(){i=new Date,n||(n=setTimeout(o,t))}}(s,99)),Q(t,"readystatechange",o)}(),g.picturefill=J,g.fillImgs=J,g.teardownRun=y,J._=g,e.picturefillCFG={pf:g,push:function(e){var t=e.shift();"function"==typeof g[t]?g[t].apply(g,e):(A[t]=e[0],P&&g.fillImgs({reselect:!0}))}};for(;I&&I.length;)e.picturefillCFG.push(I.shift());e.picturefill=J,"object"==typeof module&&"object"==typeof module.exports?module.exports=J:"function"==typeof define&&define.amd&&define("picturefill",function(){return J}),g.supPicture||(E["image/webp"]=function(t,n){var i=new e.Image;return i.onerror=function(){E[t]=!1,J()},i.onload=function(){E[t]=1===i.width,J()},i.src=n,"pending"}("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document),Date.now||(Date.now=function(){"use strict";return(new Date).getTime()}),function(e){"use strict";var t,n=function(){},i=[];e.console=e.console||{},t=e.console,t.log||(t.log=n),t.debug||(t.debug=t.log),t.error||(t.error=t.log),t.info||(t.info=t.log),t.warn||(t.warn=t.log),t.trace||(t.trace=n),t.group||(t.group=function(e){"string"!=typeof e&&(e=Number(i.length+1).toString()),i.push(e),t.log("---- START GROUP: "+e)},t.groupCollapsed=t.group,t.groupEnd=function(){t.log("---- END GROUP: "+(i.length>0?i.pop():"???"))})}(window),function(e){"use strict";var t,n,i,o,a,r,s,l,d,c=[],u=[],p=null,f=function(){},h=function(){},m=[],g=!1,v=!1;if(void 0===e.performance&&(e.performance={}),e._perfRefForUserTimingPolyfill=e.performance,e.performance.userTimingJsNow=!1,e.performance.userTimingJsNowPrefixed=!1,e.performance.userTimingJsUserTiming=!1,e.performance.userTimingJsUserTimingPrefixed=!1,e.performance.userTimingJsPerformanceTimeline=!1,e.performance.userTimingJsPerformanceTimelinePrefixed=!1,"function"!=typeof e.performance.now){for(e.performance.userTimingJsNow=!0,u=["webkitNow","msNow","mozNow"],s=0;s<u.length;s++)if("function"==typeof e.performance[u[s]]){e.performance.now=e.performance[u[s]],e.performance.userTimingJsNowPrefixed=!0;break}t=+new Date,e.performance.timing&&e.performance.timing.navigationStart?t=e.performance.timing.navigationStart:"undefined"!=typeof process&&"function"==typeof process.hrtime&&(t=process.hrtime(),e.performance.now=function(){var e=process.hrtime(t);return 1e3*e[0]+1e-6*e[1]}),"function"!=typeof e.performance.now&&(Date.now?e.performance.now=function(){return Date.now()-t}:e.performance.now=function(){return+new Date-t})}if(d=e.performance.now(),"function"!=typeof e.performance.getEntries||"function"!=typeof e.performance.mark){for("function"==typeof e.performance.getEntries&&"function"!=typeof e.performance.mark&&(v=!0),e.performance.userTimingJsPerformanceTimeline=!0,c=["webkit","moz"],u=["getEntries","getEntriesByName","getEntriesByType"],s=0;s<u.length;s++)for(l=0;l<c.length;l++)p=c[l]+u[s].substr(0,1).toUpperCase()+u[s].substr(1),"function"==typeof e.performance[p]&&(e.performance[u[s]]=e.performance[p],e.performance.userTimingJsPerformanceTimelinePrefixed=!0);f=function(e){m.push(e),"measure"===e.entryType&&(g=!0)},a=function(){g&&(m.sort(function(e,t){return e.startTime-t.startTime}),g=!1)},h=function(e,t){for(s=0;s<m.length;)m[s].entryType!==e?s++:void 0!==t&&m[s].name!==t?s++:m.splice(s,1)},("function"!=typeof e.performance.getEntries||v)&&(n=e.performance.getEntries,e.performance.getEntries=function(){var t;return a(),t=m.slice(0),v&&n&&(Array.prototype.push.apply(t,n.call(e.performance)),t.sort(function(e,t){return e.startTime-t.startTime})),t}),("function"!=typeof e.performance.getEntriesByType||v)&&(o=e.performance.getEntriesByType,e.performance.getEntriesByType=function(t){var n;if(void 0===t||"mark"!==t&&"measure"!==t)return v&&o?o.call(e.performance,t):[];for("measure"===t&&a(),n=[],s=0;s<m.length;s++)m[s].entryType===t&&n.push(m[s]);return n}),("function"!=typeof e.performance.getEntriesByName||v)&&(i=e.performance.getEntriesByName,e.performance.getEntriesByName=function(t,n){var o;if(n&&"mark"!==n&&"measure"!==n)return v&&i?i.call(e.performance,t,n):[];for(void 0!==n&&"measure"===n&&a(),o=[],s=0;s<m.length;s++)void 0!==n&&m[s].entryType!==n||m[s].name===t&&o.push(m[s]);return v&&i&&(Array.prototype.push.apply(o,i.call(e.performance,t,n)),o.sort(function(e,t){return e.startTime-t.startTime})),o})}if("function"!=typeof e.performance.mark){for(e.performance.userTimingJsUserTiming=!0,c=["webkit","moz","ms"],u=["mark","measure","clearMarks","clearMeasures"],s=0;s<u.length;s++)for(l=0;l<c.length;l++)p=c[l]+u[s].substr(0,1).toUpperCase()+u[s].substr(1),"function"==typeof e.performance[p]&&(e.performance[u[s]]=e.performance[p],e.performance.userTimingJsUserTimingPrefixed=!0);r={},e.performance.timing&&e.performance.timing.responseEnd||(r.responseEnd=[d]),"function"!=typeof e.performance.mark&&(e.performance.mark=function(t){var n=e.performance.now();if(void 0===t)throw new SyntaxError("Mark name must be specified");if(e.performance.timing&&t in e.performance.timing)throw new SyntaxError("Mark name is not allowed");r[t]||(r[t]=[]),r[t].push(n),f({entryType:"mark",name:t,startTime:n,duration:0})}),"function"!=typeof e.performance.clearMarks&&(e.performance.clearMarks=function(e){e?r[e]=[]:r={},h("mark",e)}),"function"!=typeof e.performance.measure&&(e.performance.measure=function(t,n,i){var o,a=e.performance.now(),s=0;if(void 0===t)throw new SyntaxError("Measure must be specified");if(!n)return void f({entryType:"measure",name:t,startTime:0,duration:a});if(e.performance.timing&&n in e.performance.timing){if("navigationStart"!==n&&0===e.performance.timing[n])throw new Error(n+" has a timing of 0");s=e.performance.timing[n]-e.performance.timing.navigationStart}else{if(!(n in r))throw new Error(n+" mark not found");s=r[n][r[n].length-1]}if(o=a,i)if(o=0,e.performance.timing&&i in e.performance.timing){if("navigationStart"!==i&&0===e.performance.timing[i])throw new Error(i+" has a timing of 0");o=e.performance.timing[i]-e.performance.timing.navigationStart}else{if(!(i in r))throw new Error(i+" mark not found");o=r[i][r[i].length-1]}f({entryType:"measure",name:t,startTime:s,duration:o-s})}),"function"!=typeof e.performance.clearMeasures&&(e.performance.clearMeasures=function(e){h("measure",e)})}}(window),Array.prototype.find||(Array.prototype.find=function(e){"use strict";var t,n,i,o,a;if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(n=Object(this),i=n.length>>>0,o=arguments[1],t=0;t<i;t++)if(a=n[t],e.call(o,a,t,n))return a}),"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){"use strict";var e,t,n=document.createElement("_");n.classList.add("c1","c2"),n.classList.contains("c2")||(t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var n,i=arguments.length;for(n=0;n<i;n++)e=arguments[n],t.call(this,e)}},t("add"),t("remove")),n.classList.toggle("c3",!1),n.classList.contains("c3")&&(e=DOMTokenList.prototype.toggle,DOMTokenList.prototype.toggle=function(t,n){return 1 in arguments&&!this.contains(t)==!n?n:e.call(this,t)}),n=null}():function(e){"use strict";if("Element"in e){var t,n=e.Element.prototype,i=Object,o=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array.prototype.indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},r=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},s=function(e,t){if(""===t)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},l=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,a=n.length;i<a;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},d=l.prototype=[],c=function(){return new l(this)};if(r.prototype=Error.prototype,d.item=function(e){return this[e]||null},d.contains=function(e){return e+="",-1!==s(this,e)},d.add=function(){var e,t=arguments,n=0,i=t.length,o=!1;do{e=t[n]+"",-1===s(this,e)&&(this.push(e),o=!0)}while(++n<i);o&&this._updateClassName()},d.remove=function(){var e,t,n=arguments,i=0,o=n.length,a=!1;do{for(e=n[i]+"",t=s(this,e);-1!==t;)this.splice(t,1),a=!0,t=s(this,e)}while(++i<o);a&&this._updateClassName()},d.toggle=function(e,t){e+="";var n=this.contains(e),i=n?!0!==t&&"remove":!1!==t&&"add";return i&&this[i](e),!0===t||!1===t?t:!n},d.toString=function(){return this.join(" ")},i.defineProperty){t={get:c,enumerable:!0,configurable:!0};try{i.defineProperty(n,"classList",t)}catch(e){-2146823252===e.number&&(t.enumerable=!1,i.defineProperty(n,"classList",t))}}else i.prototype.__defineGetter__&&n.__defineGetter__("classList",c)}}(self)),function(){"use strict";var e=null;window.CNN=window.CNN||{},window.CNN.eventListenerWithOptions=window.CNN.passiveEventListeners||{browserSupportsCaptureOption:!1,addListener:function(e,t,n,i){var o=i;window.CNN.eventListenerWithOptions.browserSupportsCaptureOption||(o=i.capture||!1),e.addEventListener(t,n,o)}};try{e=Object.defineProperty({},"capture",{get:function(){window.CNN.eventListenerWithOptions.browserSupportsCaptureOption=!0}}),window.addEventListener("test",null,e)}catch(e){}}();var CNN=window.CNN||{};CNN.Utils=CNN.Utils||function(e,t,n,i){"use strict";function o(e){var t=null;return"string"==typeof e&&Date.parse(e)?t=e:"number"==typeof e&&(t=new Date(Date.now()+e*x).toGMTString()),t}function a(e){var t,n=!0;for(t=0;t<arguments.length;t++)if(!function(e){return e!==i&&null!==e}(arguments[t])){n=!1;break}return n}function r(e){var t,n=!0;for(t=0;t<arguments.length;t++)if(!function(e){return"object"==typeof e&&null!==e}(arguments[t])){n=!1;break}return n}function s(e){var t,n=!0;for(t=0;t<arguments.length;t++)if(!function(e){return"string"==typeof e&&e.length>0}(arguments[t])){n=!1;break}return n}function l(){var e,t,i={},o=0;if(n.cookie)for(e=n.cookie.split("; ");o<e.length;o++)t=e[o].split("="),i[t[0]]=decodeURIComponent(t[1])||null;return i}function d(e){return null!==c(e)}function c(e){var t=new RegExp("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"),i=n.cookie.match(t);return i?i.pop():null}function u(e,t,i,r,s,l){var d="";a(e)&&a(t)&&(i=o(i),r=a(r)?r:"/",s=a(s)?s:"",l=!!a(l)&&l,d+=e+"="+encodeURIComponent(t),a(i)&&(d+=";expires="+i),r&&(d+=";path="+r),s&&(d+=";domain="+s),l&&(d+="; secure"),n.cookie=d)}function p(e,t,n,i){u(e,t,n,"/",".cnn.com",i)}function f(e,t,i){var o="";a(e)&&(t=a(t)?t:"/",i=a(i)?i:"",o+=e+"=;expires="+E,t&&(o+=";path="+t),i&&(o+=";domain="+i),n.cookie=o)}function h(e){f(e,"/",".cnn.com")}function m(e,n,i){var o;if("string"==typeof e&&e.length>0&&"string"==typeof n)if(!1===CNN.hasLocalStorage)u(e,n,"session"===i?null:i,"/",".cnn.com",!1);else try{"session"===i?t.sessionStorage.setItem(e,n):(t.localStorage.setItem(e,n),"number"==typeof i?(o=new Date(Date.now()+i*x),t.localStorage.setItem(e+"__expires",o.getTime().toString(10))):"string"==typeof i&&"session"!==i&&(o=new Date(i),o.getTime()>Date.now()&&t.localStorage.setItem(e+"__expires",o.getTime().toString(10))))}catch(e){}}function g(e){if("string"==typeof e&&e.length>0){if(!1===CNN.hasLocalStorage)return d(e);try{if(a(t.sessionStorage.getItem(e))||a(t.localStorage.getItem(e+"__expires")))return!0}catch(e){}}return!1}function v(e){if("string"==typeof e&&e.length>0)if(!1===CNN.hasLocalStorage)f(e);else{try{t.localStorage.removeItem(e),t.localStorage.removeItem(e+"__expires")}catch(e){}try{t.sessionStorage.removeItem(e)}catch(e){}}}function y(e){var n,i=null;if("string"==typeof e&&e.length>0)try{!1===CNN.hasLocalStorage?i=c(e):null!==(n=t.localStorage.getItem(e+"__expires"))?parseInt(n,10)>Date.now()?i=t.localStorage.getItem(e):v(e):(i=t.sessionStorage.getItem(e),a(i)||(i=t.localStorage.getItem(e)))}catch(e){}return i}function w(e){var n,i,o,a,r,s,l=e;if("function"==typeof t.btoa)try{n=t.btoa(l)}catch(i){n=t.btoa(e.replace(/[^\w\s\!\@\#\$\%\^\&\*\(\)\-\=\+\.\,\\\;\:\'\"\?]/,"-"))}else{if(i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),o="",a="",(r=l.length%3)>0)for(;r<3;r++)a+="=",l+="\0";for(r=0;r<l.length;r+=3)r>0&&r/3*4%76==0&&(o+="\r\n"),s=(l.charCodeAt(r)<<16)+(l.charCodeAt(r+1)<<8)+l.charCodeAt(r+2),s=[s>>>18&63,s>>>12&63,s>>>6&63,63&s],o+=i[s[0]]+i[s[1]]+i[s[2]]+i[s[3]];n=o.substring(0,o.length-a.length)+a}return n}function _(e){var n,i,o,a,r,s,l,d,c=e;if("function"==typeof t.atob)try{n=t.atob(c)}catch(e){console.log(e.message,"\nString to decode: "+c)}else{for(i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),o={},d=0;d<i.length;d++)o[i[d]]=d;for(c=c.replace(new RegExp("[^"+i.join("")+"=]","g"),""),r="="===c.charAt(c.length-1)?"="===c.charAt(c.length-2)?"AA":"A":"",a="",c=c.substr(0,c.length-r.length)+r,s=0;s<c.length;s+=4)l=(o[c.charAt(s)]<<18)+(o[c.charAt(s+1)]<<12)+(o[c.charAt(s+2)]<<6)+o[c.charAt(s+3)],a+=String.fromCharCode(l>>>16&255,l>>>8&255,255&l);n=a.substring(0,a.length-r.length)}return n}function b(e){return e.replace("#","")}function C(){return t.Modernizr.phone}var x=36e5,E="Thu, 01 Jan 1970 00:00:00 UTC";return CNN.hasLocalStorage=function(){var e="__test_it";try{return t.localStorage.setItem(e,e),t.localStorage.removeItem(e),t.sessionStorage.setItem(e,e),t.sessionStorage.removeItem(e),!0}catch(e){return!1}}(),{exists:a,existsObject:r,existsString:s,getCookies:l,getCookie:c,cookieExists:d,setCookie:u,deleteCookie:f,setCNNCookie:p,deleteCNNCookie:h,storeLocalValue:m,hasLocalValue:g,deleteLocalValue:v,getLocalValue:y,b64Encode:w,b64Decode:_,stripHash:b,isPhone:C}}(jQuery,window,document),CNN.Features=CNN.Features||{},CNN.VideoConfig=CNN.VideoConfig||{},CNN.VideoConfig.liveStream=CNN.VideoConfig.liveStream||{},CNN.GeoCheck=function(e,t){"use strict";function n(){return a}function i(e){var t,n,i,o,r,s=!0;if(null!==a&&!0===Array.isArray(e)&&e.length>0)for(i=a.country+":"+a.region,o=i+":"+a.city.toLowerCase(),t=0;t<e.length;t++)r=e[t],"-"===r.charAt(0)?(r=r.slice(1),n=!1):n=!0,"*"===r?s=n:"#"===r.charAt(0)?a.continent===r.slice(1)&&(s=n):(2===r.length&&a.country===r||5===r.length&&i===r||r.length>6&&o===r)&&(s=n);return s}function o(){return CNN._geoCheckReadyEvent}var a=null;return CNN._geoCheckReadyEvent=!1,e.fn.extend({onGeoCheckReady:function(n){"function"==typeof n&&(!0===CNN._geoCheckReadyEvent?n(e):e(t).on("geoCheckReady",{handler:n},function(t){t=t||{},"object"==typeof t.data&&null!==t.data&&"function"==typeof t.data.handler&&t.data.handler(e)}))},triggerGeoCheckReady:function(){CNN._geoCheckReadyEvent=!0,e(t).trigger("geoCheckReady")}}),function(){var n,i;i=CNN.Utils.getCookie("geoData"),null!==i&&(n=i.split("|"),n.length>4&&(a={city:n[0],region:n[1],postCode:n[2],country:n[3],continent:n[4]})),e(t).triggerGeoCheckReady()}(),{getData:n,inTarget:i,isReady:o}}(jQuery,document),CNN=window.CNN||{},CNN.AdsConfig=CNN.AdsConfig||{},CNN.AdsConfig.aisOverride?function(e,t){"use strict";var n=e.createElement("script"),i=e.getElementsByTagName("script")[0];n.type="text/javascript",n.src=("https:"===e.location.protocol?"https:":"http:")+t.AdsConfig.aisOverride,i.parentNode.insertBefore(n,i)}(document,window.CNN):(CNN.AdsConfig.amazon=CNN.AdsConfig.amazon||{},CNN.Features=CNN.Features||{},!0===CNN.Features.enableAmazonDisplayAds&&function(){function e(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var o=t[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null}return null}function t(){return void 0!==window.innerWidth?(viewPortWidth=window.innerWidth,viewPortHeight=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(viewPortWidth=document.documentElement.clientWidth,viewPortHeight=document.documentElement.clientHeight):(viewPortWidth=document.getElementsByTagName("body")[0].clientWidth,viewPortHeight=document.getElementsByTagName("body")[0].clientHeight),[viewPortWidth,viewPortHeight]}function n(e){return e.reduce(function(e,t){return e[t.getSlotElementId()]=t,e},{})}function i(e,t,i){h("Handling A9 Bids:",e,t),m("Handling A9 Bids"),window.googletag.cmd.push(function(){function i(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}var o=n(t);e.forEach(function(e){var t=o[e.slotID]||null;null!==t&&window.apstag.targetingKeys("display").forEach(function(n){"true"==i("debug")&&console.log("[AdFuelModule - Amazon A9] Setting A9 Targeting: ",{key:n,value:e[n]}),t.setTargeting(n,e[n])})})}),googletag.pubads().addEventListener("slotRenderEnded",function(e){var t=n(window.googletag.pubads().getSlots()),i=t[e.slot.getSlotElementId()];window.apstag.targetingKeys("display").forEach(function(e){i.setTargeting(e,"")})}),g("Handling A9 Bids"),i()}function o(e,n){m("A9 Slot Building");var i=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],o=["_ns_","_nfs_"],a=["super-ad-zone","super_ad_zone"],r=t();h("Browser Dimensions: ",r);for(var s=1;s<e.length;s++){var l=e[s].originalElementId||e[s].rktr_slot_id,d=l.split("_");d.splice(0,1),l=d.join("_"),h("Checking slot and sizes for validity: ",l);for(var c=[],u=!0,p=!1,f=0;f<e[s].responsive.length;f++){var v=e[s].responsive[f];p||h("Checking For Responsive Viewport: ",v[0].join("x")),!p&&v[0][0]<r[0]&&v[0][1]<r[1]&&(h("Match found."),p=!0,c=v[1],"suppress"!=v[1][0]&&"suppress"!=c||(h("Slot is responsive and being suppressed.  Filtering slot."),u=!1))}if(c.length>0&&u&&(h("Slot is responsive and not being suppressed.  Using responsive sizes: ",c),e[s].sizes=c),u){for(var _=0;_<e[s].sizes.length;_++){var b=e[s].sizes[_].join("x");if(i.indexOf(b)<0){h("Filtering out Invalid Size: ",b);e[s].sizes.splice(_,1);_-=1}}0==e[s].sizes.length&&(h("No Valid Sizes: ",e[s].sizes),u=!1);for(var C in o)e[s].rktr_slot_id.indexOf(o[C])>=0&&(h("Filtering out invalid slot type: ",o[C],e[s]),u=!1);for(var x in a)e[s].rktr_ad_id.indexOf(a[x])>=0&&(h("Filtering out invalid ad unit segment: ",a[x],e[s]),u=!1);if(u){h("Valid Slot: ",e[s]);var E={slotID:e[s].rktr_slot_id,sizes:e[s].sizes};w.push(E)}}}
g("A9 Slot Building"),m("A9 Bid Fetching"),w.length>0?window.apstag.fetchBids({slots:w},function(e){y=e,w=[],g("A9 Bid Fetching"),n()}):(h("No valid slots."),g("A9 Bid Fetching"))}function a(e,t){setTimeout(function(){var e=window.googletag.pubads().getSlots();y&&i(y,e,t),y||(h("No Bids."),t())},500)}function r(e,t){console.log({bidSlots:w}),y=null,m("Refreshing A9 Bids"),window.apstag.fetchBids({slots:w},function(e){y=e,g("Refreshing A9 Bids");var n=window.googletag.pubads().getSlots();i(y,n,t)})}function s(){h("Registering "+p+" module with AdFuel"),window.AdFuel.setOptions({queueCallbackTimeoutInMilliseconds:1e3,dispatchCallbackTimeoutInMilliseconds:1e3,refreshCallbackTimeoutInMilliseconds:2e3}),f=window.AdFuel.registerModule(p,{preQueueCallback:o,preDispatchCallback:a,preRefreshCallback:r})||f}function l(){!function(e,t,n,i,o,a,r){function s(n,i){t[e]._Q.push([n,i])}t[e]||(t[e]={init:function(){s("i",arguments)},fetchBids:function(){s("f",arguments)},_Q:[]},a=n.createElement(i),a.async=!0,a.src="//c.amazon-adsystem.com/aax2/apstag.js",r=n.getElementsByTagName(i)[0],r.parentNode.insertBefore(a,r))}("apstag",window,document,"script");var e=document.location.hostname.search(/^(edition|arabic|cnnespanol|cnne\-test)\./)>=0?"3288":"3159";h("Country Code: ",v),"3159"==e&&"US"!==v&&"CA"!==v&&2===v.length&&(h("International Country Code. Using INTL account."),e="3288"),"3159"==e&&(""==v||null==v)&&document.location.hostname.search(/^(arabic|cnnespanol|cnne\-test)\./)>=0&&(h("No Country Code: Defaulting to INTL account for site."),e="3288"),h("Pub ID: ",e),window.apstag.init({pubID:e,adServer:"googletag",bidTimeout:2e3})}var d=Object.prototype,c=d.toString,u=function(){},p="Amazon A9",f={metrics:{},addMetric:u,getMetricById:u,getMetricsByType:u,getMetricTypes:u},h=u,m=u,g=u;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===c.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(h=function(){var e=["[AdFuelModule - "+p+"]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},function(){var e=["[AdFuelModule - "+p+"]"];e.push.apply(e,arguments),window.console.warn.apply(window.console,e)},function(){var e=["[AdFuelModule - "+p+" ERROR]"];e.push.apply(e,arguments),window.console.error.apply(window.console,e)},m=function(){var e=["[AdFuelModule - "+p+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.time(t)},g=function(){var e=["[AdFuelModule - "+p+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.timeEnd(t)});var v=e("countryCode")||(e("CG")?e("CG").substr(0,2):"");h("Country Code: ",v);var y,w=[];h("Initializing "+p+" Module..."),function(){l(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(s):window.AdFuel?s():document.addEventListener?document.addEventListener("AdFuelCreated",s,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",s)}()}(),window.AmazonDirectMatchBuy=function(){function e(e,t){return null!=e&&h.call(e,t)}function t(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function n(e){return function(){e&&(e.apply(this,arguments),e=null)}}function i(){return!!window.amznads}function o(){var e={};return i()&&(e=window.amznads.getTargeting(),t(e)||(e={})),e}function a(e){var t=e.getId();if(b.has(t)){var n=b.getKeys(t);if(n.length){v("clearing previous ad key-values: "+n.join(", "));for(var i=0,o=n.length;i<o;++i)e.setAdKeyValue(n[i],null);b.clearKeys(t)}}}function r(e,t,n){v("setting ad key-value: "+t+' = "'+n+'"'),b.addKey(e.getId(),t),e.setAdKeyValue(t,n)}function s(t){var n=o();a(t);for(var i in n)if(e(n,i)){var s=n[i];if(s instanceof Array)for(var l=0,d=s.length;l<d;++l)r(t,s[l],"1");else r(t,i,s)}}function l(e){e.getPlayerType()===CVP.FLASH&&(v("setAdKeyValuePairs",e),s(e))}function d(e){if(!i())return!e||e();var t=n(function(){window.amznads.getTargeting();return!e||e()});try{window.amznads.getAdsCallback(y,t,w)}catch(e){v("Exception thrown while requesting Amazon ads:",e),t()}}function c(e){v("initializing",e),e&&(y=e.amznkey||y,w=e.timeout||w),_=!0}function u(e){return function(){if(!_)return void v("ERROR: init() must be called first!");e.apply(this,arguments)}}var p=Array.prototype,f=Object.prototype,h=f.hasOwnProperty,m=p.slice,g=f.toString,v=function(){};t(window.console)&&function(e){return"[object Function]"===g.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(v=function(){var e=["[AdFuelModule - Amazon Video]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)});var y=window.location.hostname.toLowerCase().match(/^edition\.cnn\.com/)?"3288":"3159",w=1e3,_=!1,b=function(){function e(e){return e in o}function t(t,n){e(t)||(o[t]=[]),o[t].push(n)}function n(t){return e(t)?m.call(o[t]):[]}function i(t){return!!e(t)&&(o[t].length=0,!0)}var o={};return{has:e,clearKeys:i,getKeys:n,addKey:t}}();return{requestAdRefresh:u(d),getTargetingData:u(o),setAdKeyValuePairs:u(l),isAmazonApiAvailable:i,init:c}}(),!0===CNN.Features.enableAmazonDisplayAds&&function(e){var t=document,n=t.createElement("script"),i=t.getElementsByTagName("script")[0],o=/^(complete|loaded)$/,a=!1;n.type="text/javascript",n.async=!0,n.src=("https:"===document.location.protocol?"https:":"http:")+(CNN.AdsConfig.amazonOverride||"//c.amazon-adsystem.com/aax2/amzn_ads.js"),n.onload=n.onreadystatechange=function(){a||"readyState"in n&&o.test(n.readyState)||(n.onload=n.onreadystatechange=null,a=!0,e())},window.AmazonDirectMatchBuy?e():i.parentNode.insertBefore(n,i)}(function(){CNN.AdsConfig.amazon.amznkey?window.AmazonDirectMatchBuy.init(CNN.AdsConfig.amazon):window.AmazonDirectMatchBuy.init()}),!0===CNN.Features.enableAdsConsole&&function(){function e(){location.hash.indexOf("doh")>=0?(G=!1,H&&u(),u()):location.hash.indexOf("afc")>=0?(G=!0,H&&u(),u()):H&&u()}function t(e,t,n){return e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent?e.attachEvent("on"+t,n):void 0}function n(e,t,n){var i=document.createElement("div");i.style.width="48%",i.style.float="left",i.style.display="inline-block";var o=document.createElement("input");o.type="checkbox",o.name=e,o.id=e+"_"+t,o.style.float="left",o.style["margin-right"]="2px",o.style.position="relative",o.style.top="3px",o.value=t;var a=document.createElement("div");return a.style.width="calc(100% - 18px)",a.appendChild(document.createTextNode(n)),i.appendChild(o),i.appendChild(a),i}function o(e,t){var n=document.createElement(e);return n.appendChild(document.createTextNode(t)),n}function a(e){var t=document.createElement("button");return t.onclick=e.action,t.id=e.name,t.appendChild(document.createTextNode(e.value)),t.className="btn btn-sm btn-primary",t}function r(e,t){return e.data[2]<t.data[2]?-1:e.data[2]>t.data[2]?1:0}function s(e){return!!new RegExp(/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/).test(e)}function l(){ie("Getting Viewport Dimensions");return void 0!==window.innerWidth?(viewPortWidth=window.innerWidth,viewPortHeight=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(viewPortWidth=document.documentElement.clientWidth,viewPortHeight=document.documentElement.clientHeight):(viewPortWidth=document.getElementsByTagName("body")[0].clientWidth,viewPortHeight=document.getElementsByTagName("body")[0].clientHeight),oe("Getting Viewport Dimensions"),[viewPortWidth,viewPortHeight]}function d(){ie("Getting Browser Information");var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE "+(e[1]||"")):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),oe("Getting Browser Information"),n.join(" "))}function c(){if(null!==fe)return fe;ie("Getting Device Information"),ae=pe();var e=l();return fe={availHeight:screen.availHeight,availLeft:screen.availLeft,availTop:screen.availTop,availWidth:screen.availWidth,colorDepth:screen.colorDepth,height:screen.height,orientation:{angle:screen.orientation?screen.orientation.angle:0,onchange:screen.orientation?screen.orientation.onchange:null,type:screen.orientation?screen.orientation.type:null},pixelDepth:screen.pixelDepth,width:screen.width,os:window.navigator.platform?window.navigator.platform:"Unknown",browser:d(),class:"Desktop",viewport:e.join("x")},ae.amazon.device&&(fe.os="Amazon",ae.amazon.phone&&(fe.class="Phone"),ae.amazon.tablet&&(fe.class="Tablet")),ae.android.device&&(fe.os="Android",ae.android.phone&&(fe.class="Phone"),ae.android.tablet&&(fe.class="Tablet")),ae.apple.device&&(fe.os="iOS",ae.apple.ipod&&(fe.class="iPod"),ae.apple.phone&&(fe.class="Phone"),ae.apple.tablet&&(fe.class="Tablet")),ae.windows.device&&(fe.os="Windows",ae.windows.phone&&(fe.class="Phone"),ae.windows.tablet&&(fe.class="Tablet")),ae.other.blackberry&&(fe.os="Blackberry",fe.class="Phone"),ae.other.blackberry10&&(fe.os="Blackberry10",fe.class="Phone"),ae.other.chrome&&(fe.os="Chrome",fe.class="Phone"),ae.other.firefox&&(fe.os="Firefox",fe.class="Phone"),ae.other.opera&&(fe.os="Opera",fe.class="Phone"),U.addMetric({type:"modules",id:"User Sciences",data:fe}),oe("Getting Device Information"),fe}function u(){if(H){var e=document.getElementsByTagName("head")[0],n=document.getElementsByTagName("body")[0],i=document.getElementById("material-icons-font"),o=document.getElementById("adfuel-console-stylesheet"),a=document.querySelector("div.adfuel-console-button-container"),r=document.querySelector("div.adfuel-console-filler"),s=document.querySelector("div.adfuel-console");e.removeChild(i),e.removeChild(o),n.removeChild(a),n.removeChild(r),n.removeChild(s),H=!1}else{var e=document.getElementsByTagName("head")[0],n=document.getElementsByTagName("body")[0],l="https:"===document.location.protocol,i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=(l?"https:":"http:")+"//fonts.googleapis.com/icon?family=Material+Icons",i.id="material-icons-font";var o=document.createElement("link");o.rel="stylesheet",o.href=(l?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/consoleTool-2.1.css",o.id="adfuel-console-stylesheet";var d=document.createElement("link");d.rel="stylesheet",d.href=(l?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/dhtmlxgrid.css",d.id="adfuel-console-table-stylesheet";var a=document.createElement("div");a.className="adfuel-console-button-container adfuel-open-console-button-container";var c=document.createElement("a");c.className="adfuel-console-button";var u=document.createElement("i");u.className="adfuel-console-button-icon material-icons",u.innerHTML="view_module",u.innerText="view_module";var r=document.createElement("div");r.className="adfuel-console-filler";var s=document.createElement("div");s.className="adfuel-console",c.appendChild(u),a.appendChild(c),e.appendChild(i),e.appendChild(o),e.appendChild(d),n.appendChild(a),n.appendChild(r),n.appendChild(s),function(e){"use strict";var t=document,n=t.createElement("script"),i=t.getElementsByTagName("script")[0],o=/^(complete|loaded)$/,a=!1,r="https:"===document.location.protocol;n.type="text/javascript",n.async=!0,n.src=(r?"https:":"http:")+"//www.geoplugin.net/javascript.gp",n.onload=n.onreadystatechange=function(){a||"readyState"in n&&o.test(n.readyState)||(n.onload=n.onreadystatechange=null,a=!0,e())},i.parentNode.insertBefore(n,i)}(function(){var e,t,n,i,o,a=!1;window.geoplugin_countryCode&&(e=window.geoplugin_countryCode(),a=!0),window.geoplugin_city&&(t=window.geoplugin_city(),a=!0),window.geoplugin_region&&(n=window.geoplugin_region(),a=!0),window.geoplugin_latitude&&(i=window.geoplugin_latitude(),a=!0),window.geoplugin_longitude&&(o=window.geoplugin_longitude(),a=!0),1==a&&U.addMetric({type:"configuration",id:"actual_user_location",data:{city:t,region:n,country:e,latitude:i,longitude:o}})}),v(s),Q=t(c,"click",p),H=!0}}function p(){Q=null;var e=(document.getElementsByTagName("head")[0],document.getElementsByTagName("body")[0],document.querySelector("div.adfuel-console-filler")),t=document.querySelector("div.adfuel-console"),n=document.querySelector("div.adfuel-console-button-container"),i=document.querySelector("div#adfuel-close-console-button-container");n.style.display="none",i.style.display="inline-block",e.style.display="block",e.className=e.className+" resizable",t.style.display="inline-block",t.style.resize="both",t.className=t.className+" resizable",ne("Opening AdFuel Console."),g(document.getElementsByClassName("adfuel-console-tab-link-container")[0]),_(t),ne("Full Console: ",G),w(G?"configuration":"creative review")}function f(){window.open("http://docs.turner.com/display/DAD/AdFuel+Console+Documentation","ConsoleHelp")}function h(){if(J){var e=document.querySelectorAll(".adfuel-rendered"),t=e.length;for(i=0;i<t;i++){var n=e[i].id,o=document.getElementById(n);o.style.position="relative";var a=o.firstElementChild.firstElementChild?o.firstElementChild.firstElementChild.width:o.firstElementChild.width,r=o.firstElementChild.firstElementChild?o.firstElementChild.firstElementChild.height:o.firstElementChild.height;o.style.width=a+"px",o.style.height=r+"px";var s=n.substring(n.indexOf("_")+1),l=document.createElement("div"),d=document.createElement("p");d.innerHTML="Pos: "+s+"<br />Width: "+a+"<br />Height: "+r,l.className="pos_overlay",l.style.position="absolute",l.style.top="0",l.style.left="0",l.style.right="0",l.style.bottom="0",l.style.textAlign="left",l.style.padding="3px",l.style.fontFamily="Verdana",l.style.fontSize="12px",l.style.fontWeight="normal",l.style.lineHeight="12px",l.style.background="rgba(0,100,0,0.7)",l.style.color="#ffffff",l.style.zIndex="1000",l.appendChild(d),o.appendChild(l)}J=!1}else{var c=document.querySelectorAll(".pos_overlay"),t=c.length;for(i=0;i<t;i++)c[i].parentNode.removeChild(c[i]);J=!0}}function m(e){e=e.toString();var t=e.split(" "),n="";if(t.length>1){for(var i=0;i<t.length;i++){var o=t[i].charAt(0).toUpperCase()+t[i].slice(1);t[i]=o}n=t.join(" ")}else n=e.charAt(0).toUpperCase()+e.slice(1);return n}function g(e){function n(e){w(e.srcElement?e.srcElement.rel:e.target.rel)}if(ne("Building Console Tabs...",e),e||(e=document.getElementsByClassName("adfuel-console-tab-link-container")[0]),!e)return ne("Error: No tab link container."),!1;var i=document.getElementsByClassName("adfuel-console-tab-list")[0];if(i){i.parentNode.removeChild(i)}var o=document.createElement("ul");o.className="adfuel-console-tab-list",me=U.getMetricTypes(),me.sort();for(var a=0;a<me.length;a++)if(0!=me[a].indexOf("_")&&"watchers"!==me[a]){var r=document.createElement("li");ne("Full Console: ",G),r.style.display=G?"inline-block":"none","creative review"==me[a]&&(r.style.display="none"),r.style.marginLeft="15px",r.style.marginRight="auto",r.style.fontSize=".8em",r.style.paddingBottom="10px";var s=document.createElement("a");s.className="afcTab",0==a&&(s.className="activeAFCTab afcTab"),s.rel=me[a],t(s,"click",n),s.appendChild(document.createTextNode(m(me[a]))),r.appendChild(s),o.appendChild(r)}e.appendChild(o)}function v(e){var n=document.createElement("div");n.className="adfuel-console-button-container",n.id="adfuel-close-console-button-container";var i=document.createElement("a");i.className="adfuel-console-button-plain",i.id="adfuel-close-console-button";var o=document.createElement("i");o.className="adfuel-console-button-icon material-icons",o.innerHTML=o.innerText="close";var a=document.createElement("a");a.className="adfuel-console-button-plain",a.id="adfuel-resize-console-button";var r=document.createElement("i");r.className="adfuel-console-button-icon material-icons",r.innerHTML=r.innerText="help_outline";var s=document.createElement("a");s.className="adfuel-console-button-plain",s.id="adfuel-show-overlay-button";var l=document.createElement("i");l.className="adfuel-console-button-icon material-icons",l.innerHTML=l.innerText="vignette";var d=document.createElement("div");d.id="adfuel-console-banner";var c=document.createElement("div");c.className="adfuel-console-tab-link-container",s.appendChild(l),a.appendChild(r),i.appendChild(o),n.appendChild(s),n.appendChild(a),n.appendChild(i),V=t(i,"click",M),_consoleHelpButtonHandler=t(a,"click",f),$=t(s,"click",h),d.appendChild(n);var u=document.createElement("div");u.className="adfuel-console-banner-title",ne("Full Console: ",G);var p=G?"AdFuel Console Tool":"AdFuel Creative Review";u.appendChild(document.createTextNode(p)),d.appendChild(u),d.appendChild(c),e.appendChild(d)}function y(e,t){if(e.type){K.indexOf(e.type)<0&&(g(),K.push(e.type));var n=document.getElementById("adfuel-console-panel-"+e.type.replace(/ /g,"-"));if("counts"==e.type)x(n);else if("creative review"==e.type){var i=parseInt(fe.viewport.split("x")[0]);i>800&&i<1250?T(n):i<800?N(n):S("Desktop"==fe.class?n:n)}else"timeline"==e.type?b(n):R(n,!0);t&&t()}}function w(e){var t,n=document.getElementsByClassName("afcTab"),i=document.querySelector("li > a[rel='"+e+"']");for(t=0;t<n.length;t++)n[t].className=n[t].className.replace("activeAFCTab","");i&&(i.className=i.className+" activeAFCTab");var o=document.getElementById("adfuel-console-panel-"+e.replace(/ /g,"-"));if(!o){var a=e,r=document.createElement("div"),s=document.getElementsByClassName("adfuel-console")[0];r.id="adfuel-console-panel-"+a.replace(/ /g,"-"),r.style.display="none",r.className="adfuel-console-panel adfuel-console-content",r.style.width="100%",r.style.padding="0",r.style.margin="0",r.style.height="80%",r.style.minHeight="250px",r.style.overflowY="auto",s.appendChild(r),o=r}if("timeline"==e){b(o,E())}var l=document.getElementsByClassName("adfuel-console-panel");for(t=0;t<l.length;t++)l[t].style.display="none";o.style.display="block",ne("Full Console: ",G),G&&"configuration"==e&&C({target:{dataset:{panel:o.id,tab:"adfuel_initialization_options",content:"adfuel-console-panel-configuration-tabContent-adfuel_initialization_options"}}})}function _(e){if(e||(e=document.getElementsByClassName("adfuel-console")[0]),!e)return ne("Error: No AdFuel-Console container."),!1;for(var t=0;t<me.length;t++)if(0!=me[t].indexOf("_")){var n=me[t],i=document.createElement("div");if(i.id="adfuel-console-panel-"+n.replace(/ /g,"-"),i.style.display="none",i.className="adfuel-console-panel adfuel-console-content",i.style.width="100%",i.style.padding="0",i.style.margin="0",i.style.height="80%",i.style.minHeight="250px",e.appendChild(i),ne("Full Console: ",G),ne("Panel Name: ",n),!G&&"creative review"!=n)continue;switch(n){case"creative review":var o=parseInt(fe.viewport.split("x")[0]);o>800&&o<1250?T(i):o<800?N(i):S("Desktop"==fe.class?i:i);break;case"counts":x(i);break;case"configuration":case"modules":case"page":case"registries":case"requests":case"slots":i.style.display="block",R(i,!0);break;case"timeline":var a=E();b(i,a);break;default:R(i,!0)}}}function b(e,t){if(e&&t){var n=document.createElement("div");n.id="gridbox",n.style.width="100%",n.style.height="95%",n.style.backgroundColor="#ABABAB",n.style.margin="0",n.style.padding="0",n.style.position="relative",n.style.top="-12px";try{e.removeChild(n)}catch(e){}e.style.height="90%",e.appendChild(n);try{q=new dhtmlXGridObject("gridbox"),q.setImagePath(("https:"===document.location.protocol?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/"),n.style.position="relative",n.style.top="-12px",n.style.left="2px",q.setHeader("Name, Type, Timestamp, Start, End, Time From Previous, Time From Initial, Duration,"),q.setInitWidths("350,100,200,200,200,150,150,100"),q.setColAlign("left, left, left, left, left, left, left, left"),q.setColTypes("ro,ro,ro,ro,ro,ro,ro,ro"),q.enableColumnAutoSize(!0),q.enableDragAndDrop(!1),q.init(),q.clearAll(),q.parse(t,"json")}catch(e){}}}function C(e){var t=e.target,n=t.dataset,i=n.panel,o=(n.tab,n.content),a=document.querySelectorAll("div#"+i+" .adfuel-console-panel-tab-content"),r=document.querySelectorAll("div#"+i+" ul.nav-stacked li"),s=document.querySelector("div#"+i+" ul.nav-stacked li#"+n.tab.replace(/ /g,"_")),l=0;for(l=0;l<a.length;l++)a[l].style.display="none";for(l=0;l<r.length;l++)r[l].className="";return s&&(s.className=s.className+" active"),document.getElementById(o).style.display="block",!1}function x(e){if(e){e.innerHTML="";var t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.display="inline-block",t.style.padding="5px",t.style.margin="0";var n=document.createElement("ul");n.className="nav nav-pills nav-stacked flex-column",n.style.listStyleType="none",n.style.margin="0",n.style.padding="5px",n.style.height="100%",n.style.minHeight="250px",n.style.overflow="auto";var i=[];U.metrics&&U.metrics.counts&&(i=Object.getOwnPropertyNames(U.metrics.counts));for(var o=0;o<i.length;o++){var a=document.createElement("li");a.style.margin="5px",a.style.padding="5px",a.style.fontSize="14px",a.style.width="15%",a.style.display="inline-block",a.style.float="left",a.style.borderRight="solid 1px #BCBCBC",a.id=i[o].replace(/ /g,"_"),a.innerHTML=m(i[o].replace(/_/g," "));var r=document.createElement("span");r.style.float="right",r.className="badge badge-pill badge-primary",r.style.width="15%",r.innerHTML=U.metrics.counts[i[o]],a.appendChild(r),n.appendChild(a)}t.appendChild(n),e.appendChild(t)}}function E(){var e=["connection_start","document_request_start","domContentLoaded","dom_load_start","domain_lookup_start","fetch_start","navigation_start","window_load"],t=["_rendered","adfuel_initialized","building_gpt_slots","dispatch_queue"],n=["request_to_dfp"],i=["_preQueue","_postQueue","_preDispatch","_postDispatch","_preRefresh","_postRefresh"],o=U.metrics.timeline,a="",s={rows:[]};for(var l in o)if(o.hasOwnProperty(l)){if(e.indexOf(l)>=0)a="Browser";else if(t.indexOf(l)>=0||l.indexOf("_rendered")>0||l.indexOf("building_gpt_slot_")>=0)a="AdFuel";else if(n.indexOf(l)>=0)a="DFP";else{for(var d=0;d<i.length;d++)l.indexOf(i[d])>0&&(a="Module");""==a&&(a="UNKNOWN")}for(var c=0;c<o[l].length;c++){var u,p,f=o[l][c];if(f.timestamp){var h=new Date;h.setTime(f.timestamp),u=h.toISOString().split("T"),u[0],p=u[1].replace("Z",""),h=p;for(var g=l.split("_"),c=0;c<g.length;c++)g[c]=m(g[c]);var v=g.join(" "),y={id:l+"_"+c,data:[v,a,o[l][0].timestamp,h,"","","",0]};s.rows.push(y)}else if(f.start&&f.end){var w=new Date;w.setTime(f.start),u=w.toISOString().split("T"),u[0],p=u[1].replace("Z",""),w=p;var _=new Date;_.setTime(f.end),u=_.toISOString().split("T"),u[0],p=u[1].replace("Z",""),_=p;for(var b=parseInt(f.end)-parseInt(f.start)+"ms",g=l.split("_"),c=0;c<g.length;c++)g[c]=m(g[c]);var v=g.join(" "),y={id:l+"_"+c,data:[v,a,o[l][0].start,w,_,"","",b],endStamp:f.end};s.rows.push(y)}else if(f.start){var w=new Date;w.setTime(f.start),u=w.toISOString().split("T"),u[0],p=u[1].replace("Z",""),w=p;for(var g=l.split("_"),c=0;c<g.length;c++)g[c]=m(g[c]);var v=g.join(" "),y={id:l+"_"+c,data:[v,a,o[l][0].start,w,"","","",""]};s.rows.push(y)}}}if(s.rows.length>0){s.rows.sort(r);for(var C=s.rows[0].data[2],x=1;x<s.rows.length;x++){var E=s.rows[x],A=s.rows[x-1].data[2];E.data[5]=E.data[2]-A+"ms",E.data[6]=E.data[2]-C+"ms"}var S=s.rows[s.rows.length-1],N=S.endStamp?S.endStamp:S.data[2],T=N-C+"ms",y={id:"elapsed_time",data:["Total Elapsed Time","","","","","","",T]};s.rows.push(y)}return s}function A(e,n){var i=document.createElement("div");i.style.width="27%",i.style.maxWidth="400px",i.style.height="100%",i.style.display="inline-block",i.style.margin="0",i.style.float="left",i.style.borderRight="solid 1px #0052e7",e.appendChild(i);var o=document.createElement("ul");o.className="nav nav-pills nav-stacked flex-column",o.style.listStyleType="none",o.style.margin="0",o.style.padding="5px",o.style.height="100%",o.style.minHeight="250px",o.style.overflow="auto";for(var a=0;a<n.length;a++){isNaN(parseInt(n[a]))||(n[a]="request_"+n[a]);var r=document.createElement("div");r.id=e.id+"-tabContent-"+n[a].replace(/ /g,"_"),r.className="adfuel-console-panel-tab-content",r.style.width="72%",r.style.height="100%",r.style.display="inline-block",r.style.padding="0",r.style.margin="5px",r.style.float="left",0!=a&&(r.style.display="none");var s=document.createElement("li");0==a&&(s.className=s.className+" active"),s.id=n[a].replace(/ /g,"_");var l=document.createElement("a");l.rel=n[a],l.dataset.panel=e.id,l.dataset.tab=n[a],l.dataset.content=r.id,l.innerHTML=m(n[a].replace(/_/g," ")),s.appendChild(l),o.appendChild(s),O(r,n[a]),t(l,"click",C),e.appendChild(r)}i.appendChild(o)}function S(e,t){function i(e,t,i){for(var r=0;r<i.length;r++){var s=i[r];switch(s.type){case"textarea":var l=o("div",s.label+":"+(!0===s.required?" *":""));l.style.fontWeight="bolder",e.appendChild(l),e.appendChild(s.element=document.createElement("textarea")),s.element.name=s.name||"",!0===s.required&&(s.element.attributes.required="required"),s.element.width="95%",s.element.cols="60",s.element.rows="5";break;case"input":var d=o("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",!0===s.required&&s.element.setAttribute("required","required"),e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"listLabel":var u=o("div",s.label+":"+(!0===s.required?" *":""));u.style.fontWeight="bolder",e.appendChild(u);break;case"list":for(var p=document.createElement("div"),f=0;f<s.items.length;f++){var h=s.items[f],m=n(h.name,h.value,h.label),g=m.firstChild;s.items[f].element=g,p.appendChild(m)}e.appendChild(p);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"select":console.debug("Building Select Element",s);var v=o("div",s.label+": "+(!0===s.required?" *":""));v.style.fontWeight="bolder",e.appendChild(v),s.element=document.createElement("select"),s.element.name=s.name;for(var y=0;y<s.options.length;y++){console.debug("Building Select Option Element",s.options[y]);var w=o("option",s.options[y].text);w.value=s.options[y].value,s.element.appendChild(w)}e.appendChild(s.element);break;case"button":e.appendChild(a(s));break;case"fileUpload":if(Y){var d=o("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",s.element.type="file",s.element.accept="image/*",e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"))}}}t.appendChild(e)}function r(e){""!==e?(b.style.display="inline-block",b.innerHTML=e):b.style.display="none",window.setTimeout(function(){b.style.display="none"},3e3)}function s(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}if(ne("Building Desktop Creative Review Form"),t=t||1,e){var l=[{type:"input",name:"Name",value:"",label:"Your Name",required:!0},{type:"input",name:"Email",value:"",label:"Your Email",required:!0},{type:"fileUpload",name:"Screenshot",value:"",label:"Upload Screenshot",required:!1}],d=[{type:"listLabel",name:"Reason",label:"What is the issue you are reporting?",required:!1},{type:"list",name:"Issue(s)",required:!1,items:[{type:"checkbox",name:"Issue",value:"block list violation",label:"Ad violates site block list",required:!1},{type:"checkbox",name:"Issue",value:"video plays in display ad",label:"Video plays in display ad",required:!1},{type:"checkbox",name:"Issue",value:"ad disrupts content",label:"Ad disrupts content",required:!1},{type:"checkbox",name:"Issue",value:"ad incorrectly sized",label:"Ad incorrectly sized",required:!1},{type:"checkbox",name:"Issue",value:"download initiated",label:"Ad attempts to initiate download",required:!1},{type:"checkbox",name:"Issue",value:"blank ad",label:"Blank ad",required:!1},{type:"checkbox",name:"Issue",value:"low quality",label:"Low-quality ad",required:!1},{type:"checkbox",name:"Issue",value:"audio autostarts",label:"Audio starts automatically",required:!1},{type:"checkbox",name:"Issue",value:"broken ad",label:"Broken ad",required:!1}]},{type:"select",name:"Brand",label:"What is brand is affected by the issue you are reporting?",required:!0,options:[{text:"",value:"placeholder"},{text:"Adult Swim",value:"Adult Swim"},{text:"Bleacher Report",value:"Bleacher"},{text:"Cartoon Network",value:"Cartoon Network"},{text:"CNN",value:"CNN"},{text:"CNN Arabic",value:"CNN Arabic"},{text:"CNN Espanol",value:"CNN Espanol"},{text:"CNN International",value:"CNN International"},{text:"CNN Money",value:"CNN Money"},{text:"E-League",value:"ELEAGUE"},{text:"Great Big Story",value:"Great Big Story"},{text:"HLN",value:"HLN"},{text:"NBA",value:"NBA"},{text:"NBA International",value:"NBA International"},{text:"NCAA",value:"NCAA"},{text:"TBS",value:"TBS"},{text:"TCM",value:"TCM"},{text:"Team Coco",value:"Team Coco"},{text:"TNT",value:"TNT"},{text:"TruTV",value:"truTV"}]}],c=[{type:"textarea",name:"Comments",label:"Please describe the issue you are reporting",required:!0}];e.innerHTML="",e.style.padding="0";var u=document.createElement("div");u.style.width="100%",u.style.height="100%",u.style.display="inline-block",u.style.padding="5px",u.style.margin="0";var p=document.createElement("div");p.style.width="99%",p.style.borderBottom="solid 1px black";var f=document.createElement("p");f.style.padding="0",f.style.fontWeight="bolder",f.style.margin="auto",f.innerHTML="You can report an issue on this page by submitting the information below. A copy of the report will be sent to the email address specified.<br /><span style='color: red'>* Denotes required fields.</span>",p.appendChild(f),u.appendChild(p);var h=document.createElement("form");h.style.padding="0",h.style.margin="0",u.appendChild(h);var m=document.createElement("div");switch(t){case 1:m.style.width="25%",m.style.height="60%",m.style.display="inline-block",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left";break;case 2:m.style.width="50%",m.style.height="100%",m.style.minHeight="160px",m.style.display="inline-block",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.id="cr_panel_1";break;case 3:m.style.width="100%",m.style.height="100%",m.style.minHeight="160px",m.style.display="inline-block",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.id="cr_panel_1"}i(m,h,l);var g=document.createElement("div");switch(t){case 1:g.style.width="39%",g.style.height="60%",g.style.display="inline-block",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left";break;case 2:g.style.width="50%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="inline-block",g.id="cr_panel_2";break;case 3:g.style.width="100%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="none",g.id="cr_panel_2"}i(g,h,d);var v=document.createElement("div");switch(t){case 1:v.style.width="32%",v.style.height="60%",
v.style.display="inline-block",v.style.padding="5px 5px",v.style.margin="0",v.style.float="left";break;case 2:case 3:v.style.width="100%",v.style.height="100%",v.style.minHeight="160px",v.style.padding="5px 5px",v.style.margin="0",v.style.float="left",v.style.fontSize="12px",v.style.display="none",v.id="cr_panel_3"}i(v,h,c);var y=document.createElement("div");y.style.clear="both",u.appendChild(y);var w=document.createElement("div");w.style.width="99%",w.style.height="10%",w.style.padding="0",w.style.margin="0";var _=document.createElement("div");_.style.display="inline-block",_.style.float="right";var b=document.createElement("div");b.style.cssText="display: none; margin-right: 14px; margin-top: 7px; color: #FFFFFF; font-style: italic; font-weight: bold; font-size: 12px; padding: 5px; margin-bottom: 5px; border: solid 1px black; background-color: red;";var C=document.createElement("div");C.className="cr-confirm-alert",C.style.visibility="hidden";var x=document.createElement("div");x.className="cr-confirm-alert-text";var E=new Date,A=E.getDay(),S=E.getHours(),N=0==A||6==A||S<8||S>17,T=N?"2 hours outside of":"1 hour during";x.innerHTML="Your report has been successfully submitted to Ad Operations. If you do not get a response within "+T+" normal business hours (8am - 6pm Eastern), further contact information can be found in the confirmation email that has been sent to you.",C.appendChild(x),C.appendChild(document.createElement("br"));var k=document.createElement("button");k.className="btn btn-primary btn-sm",k.innerHTML="OK",k.onclick=function(e){e.preventDefault(),M(),C.style.visibility="hidden",h.reset()},C.appendChild(k),e.appendChild(C);var I=document.createElement("input");I.type="submit",I.className="btn btn-primary btn-sm cr-confirm-alert-btn",I.onclick=function(e){return e.preventDefault(),""==h.elements.Name.value||""==h.elements.Comments.value||""==h.elements.Email.value?void r("Please fill out all required fields."):s(h.elements.Email.value)?void F(h,function(){C.style.visibility="visible"}):void r("Email address is not valid.")};var O=document.createElement("button");O.type="button",O.className="btn btn-primary btn-sn cr-confirm-alert-btn",O.onclick=function(e){switch(console.log("Panel Count: ",t),t){case 2:if(""==h.elements.Name.value||""==h.elements.Email.value||""==h.elements.Brand.value||"placeholder"==formElements.elements.Brand.value)return void r("Please fill out all required fields.");if(!s(h.elements.Email.value))return void r("Email address is not valid.");if(""==h.elements.Brand.value||"placeholder"==h.elements.Brand.value)return void r("Please select the brand affected by this issue.");document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",_.removeChild(O),_.appendChild(R),_.appendChild(I);break;case 3:switch(he){case 1:if(""==h.elements.Name.value||""==h.elements.Email.value)return void r("Please fill out all required fields.");if(!s(h.elements.Email.value))return void r("Email address is not valid.");document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="inline-block",_.insertBefore(R,O),he++;break;case 2:if(""==h.elements.Brand.value||"placeholder"==h.elements.Brand.value)return void r("Please select the brand affected by this issue.");document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",_.removeChild(O),_.appendChild(I),he++}}},O.style.padding="5px 10px",O.style.fontSize="12px",O.style.lineHeight="1.5",O.style.borderRadius="3px",O.innerHTML="Next >>";var R=document.createElement("button");R.type="button",R.className="btn btn-primary btn-sn cr-confirm-alert-btn",R.onclick=function(e){switch(t){case 2:r(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",_.appendChild(O),_.removeChild(I);case 3:switch(he){case 2:r(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="none",_.removeChild(R);break;case 3:r(""),document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",_.appendChild(O),_.removeChild(I)}he--}},R.style.padding="5px 10px",R.style.fontSize="12px",R.style.lineHeight="1.5",R.style.borderRadius="3px",R.style.marginRight="10px",R.innerHTML="<< Back",_.appendChild(b),1==t?_.appendChild(I):_.appendChild(O),w.appendChild(_),u.appendChild(w),e.insertBefore(u,C)}}function N(e){function t(e,t,i){for(var r=0;r<i.length;r++){var s=i[r];switch(s.type){case"textarea":var l=o("div",s.label+":"+(!0===s.required?" *":""));l.style.fontWeight="bolder",e.appendChild(l),e.appendChild(s.element=document.createElement("textarea")),s.element.name=s.name||"",!0===s.required&&(s.element.attributes.required="required"),s.element.width="95%",s.element.cols="60",s.element.rows="5";break;case"input":var d=o("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",!0===s.required&&s.element.setAttribute("required","required"),e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"listLabel":var u=o("div",s.label+":"+(!0===s.required?" *":""));u.style.fontWeight="bolder",e.appendChild(u);break;case"list":for(var p=document.createElement("div"),f=0;f<s.items.length;f++){var h=s.items[f],m=n(h.name,h.value,h.label),g=m.firstChild;s.items[f].element=g,p.appendChild(m)}e.appendChild(p);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"select":var v=o("div",s.label+": "+(!0===s.required?" *":""));v.style.fontWeight="bolder",e.appendChild(v),s.element=document.createElement("select"),s.element.name=s.name;for(var y=0;y<s.options.length;y++){var w=o("option",s.options[y].text);w.value=s.options[y].value,s.element.appendChild(w)}e.appendChild(s.element);break;case"button":e.appendChild(a(s));break;case"fileUpload":if(Y){var d=o("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",s.element.type="file",s.element.accept="image/*",e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"))}}}t.appendChild(e)}function i(e){""!==e?(_.style.display="inline-block",_.innerHTML=e):_.style.display="none",window.setTimeout(function(){_.style.display="none"},3e3)}function r(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}if(ne("Building Mobile Creative Review Form"),e){var s=[{type:"input",name:"Name",value:"",label:"Your Name",required:!0},{type:"input",name:"Email",value:"",label:"Your Email",required:!0},{type:"fileUpload",name:"Screenshot",value:"",label:"Upload Screenshot",required:!1}],l=[{type:"listLabel",name:"Reason",label:"What is the issue you are reporting?",required:!1},{type:"list",name:"Issue(s)",required:!1,items:[{type:"checkbox",name:"Issue",value:"block list violation",label:"Ad violates site block list",required:!1},{type:"checkbox",name:"Issue",value:"video plays in display ad",label:"Video plays in display ad",required:!1},{type:"checkbox",name:"Issue",value:"ad disrupts content",label:"Ad disrupts content",required:!1},{type:"checkbox",name:"Issue",value:"ad incorrectly sized",label:"Ad incorrectly sized",required:!1},{type:"checkbox",name:"Issue",value:"download initiated",label:"Ad attempts to initiate download",required:!1},{type:"checkbox",name:"Issue",value:"blank ad",label:"Blank ad",required:!1},{type:"checkbox",name:"Issue",value:"low quality",label:"Low-quality ad",required:!1},{type:"checkbox",name:"Issue",value:"audio autostarts",label:"Audio starts automatically",required:!1},{type:"checkbox",name:"Issue",value:"broken ad",label:"Broken ad",required:!1}]},{type:"select",name:"Brand",label:"What is brand is affected by the issue you are reporting?",required:!0,options:[{text:"",value:"placeholder"},{text:"Adult Swim",value:"Adult Swim"},{text:"Bleacher Report",value:"Bleacher"},{text:"Cartoon Network",value:"Cartoon Network"},{text:"CNN",value:"CNN"},{text:"CNN Arabic",value:"CNN Arabic"},{text:"CNN Espanol",value:"CNN Espanol"},{text:"CNN International",value:"CNN International"},{text:"CNN Money",value:"CNN Money"},{text:"E-League",value:"ELEAGUE"},{text:"Great Big Story",value:"Great Big Story"},{text:"HLN",value:"HLN"},{text:"NBA",value:"NBA"},{text:"NBA International",value:"NBA International"},{text:"NCAA",value:"NCAA"},{text:"TBS",value:"TBS"},{text:"TCM",value:"TCM"},{text:"Team Coco",value:"Team Coco"},{text:"TNT",value:"TNT"},{text:"TruTV",value:"truTV"}]}],d=[{type:"textarea",name:"Comments",label:"Please describe the issue you are reporting",required:!0}];e.innerHTML="",e.style.padding="0";var c=document.createElement("div");c.style.width="100%",c.style.height="100%",c.style.display="inline-block",c.style.padding="5px",c.style.margin="0",c.style.border="solid 2px purple";var u=document.createElement("div");u.style.width="99%",u.style.borderBottom="solid 1px black",u.style.fontSize="12px";var p=document.createElement("p");p.style.padding="0",p.style.fontWeight="bolder",p.style.margin="auto",p.innerHTML="You can report an issue on this page by submitting the information below. A copy of the report will be sent to the email address specified.<br /><span style='color: red'>* Denotes required fields.</span>",u.appendChild(p),c.appendChild(u);var f=document.createElement("form");f.style.padding="0",f.style.margin="0",c.appendChild(f);var h=document.createElement("div");h.style.width="100%",h.style.height="100%",h.style.minHeight="160px",h.style.display="inline-block",h.style.padding="5px 5px",h.style.margin="0",h.style.float="left",h.style.fontSize="12px",h.id="cr_panel_1",t(h,f,s);var m=document.createElement("div");m.style.width="100%",m.style.height="100%",m.style.minHeight="160px",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.style.display="none",m.id="cr_panel_2",t(m,f,l);var g=document.createElement("div");g.style.width="100%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="none",g.id="cr_panel_3",t(g,f,d);var v=document.createElement("div");v.style.clear="both",c.appendChild(v);var y=document.createElement("div");y.style.width="99%",y.style.height="10%",y.style.padding="0",y.style.margin="0";var w=document.createElement("div");w.style.display="inline-block",w.style.float="right",w.style.height="10%";var _=document.createElement("div");_.style.cssText="display: none; margin-right: 14px; margin-top: 7px; color: #FFFFFF; font-style: italic; font-weight: bold; font-size: 12px; padding: 5px; margin-bottom: 5px; border: solid 1px black; background-color: red;";var b=document.createElement("div");b.className="cr-confirm-alert",b.style.visibility="hidden";var C=document.createElement("div");C.className="cr-confirm-alert-text";var x=new Date,E=x.getDay(),A=x.getHours(),S=0==E||6==E||A<8||A>17,N=S?"2 hours outside of":"1 hour during";C.innerHTML="Your report has been successfully submitted to Ad Operations. If you do not get a response within "+N+" normal business hours (8am - 6pm Eastern), further contact information can be found in the confirmation email that has been sent to you.",b.appendChild(C),b.appendChild(document.createElement("br"));var T=document.createElement("button");T.className="btn btn-primary btn-sm",T.innerHTML="OK",T.onclick=function(e){e.preventDefault(),M(),b.style.visibility="hidden",f.reset()},b.appendChild(T),e.appendChild(b);var k=document.createElement("input");k.type="submit",k.className="btn btn-primary btn-sm cr-confirm-alert-btn",k.onclick=function(e){if(e.preventDefault(),""==f.elements.Comments.value)return void i("Please describe the issue you are reporting.");F(f,function(){b.style.visibility="visible"})};var I=document.createElement("button");I.type="button",I.className="btn btn-primary btn-sn cr-confirm-alert-btn",I.onclick=function(e){switch(he){case 1:if(""==f.elements.Name.value||""==f.elements.Email.value)return void i("Please fill out all required fields.");if(!r(f.elements.Email.value))return void i("Email address is not valid.");document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="inline-block",w.insertBefore(O,I),he++;break;case 2:if(""==f.elements.Brand.value||"placeholder"==f.elements.Brand.value)return void i("Please select the brand affected by this issue.");document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",w.removeChild(I),w.appendChild(k),he++}},I.style.padding="5px 10px",I.style.fontSize="12px",I.style.lineHeight="1.5",I.style.borderRadius="3px",I.innerHTML="Next >>";var O=document.createElement("button");O.type="button",O.className="btn btn-primary btn-sn cr-confirm-alert-btn",O.onclick=function(e){switch(he){case 2:i(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="none",w.removeChild(O);break;case 3:i(""),document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",w.appendChild(I),w.removeChild(k)}he--},O.style.padding="5px 10px",O.style.fontSize="12px",O.style.lineHeight="1.5",O.style.borderRadius="3px",O.style.marginRight="10px",O.innerHTML="<< Back",w.appendChild(_),w.appendChild(I),y.appendChild(w),c.appendChild(y),e.insertBefore(c,b)}}function T(e){function t(e,t,i){for(var r=0;r<i.length;r++){var s=i[r];switch(s.type){case"textarea":var l=o("div",s.label+":"+(!0===s.required?" *":""));l.style.fontWeight="bolder",e.appendChild(l),e.appendChild(s.element=document.createElement("textarea")),s.element.name=s.name||"",!0===s.required&&(s.element.attributes.required="required"),s.element.width="95%",s.element.cols="60",s.element.rows="5";break;case"input":var d=o("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",!0===s.required&&s.element.setAttribute("required","required"),e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"listLabel":var u=o("div",s.label+":"+(!0===s.required?" *":""));u.style.fontWeight="bolder",e.appendChild(u);break;case"list":for(var p=document.createElement("div"),f=0;f<s.items.length;f++){var h=s.items[f],m=n(h.name,h.value,h.label),g=m.firstChild;s.items[f].element=g,p.appendChild(m)}e.appendChild(p);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"));break;case"select":var v=o("div",s.label+": "+(!0===s.required?" *":""));v.style.fontWeight="bolder",e.appendChild(v),s.element=document.createElement("select"),s.element.name=s.name;for(var y=0;y<s.options.length;y++){var w=o("option",s.options[y].text);w.value=s.options[y].value,s.element.appendChild(w)}e.appendChild(s.element);break;case"button":e.appendChild(a(s));break;case"fileUpload":if(Y){var d=o("div",s.label+": "+(!0===s.required?" *":""));d.className=d.className+" fixed",d.style.fontWeight="bolder",d.style.marginRight="5px",e.appendChild(d),s.element=document.createElement("input"),s.element.name=s.name||"",s.element.type="file",s.element.accept="image/*",e.appendChild(s.element);var c=document.createElement("div");c.style.clear="both",e.appendChild(c),e.appendChild(document.createElement("br"))}}}t.appendChild(e)}function i(e){""!==e?(_.style.display="inline-block",_.innerHTML=e):_.style.display="none",window.setTimeout(function(){_.style.display="none"},3e3)}function r(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}if(ne("Building Mobile Creative Review Form"),e){var s=[{type:"input",name:"Name",value:"",label:"Your Name",required:!0},{type:"input",name:"Email",value:"",label:"Your Email",required:!0},{type:"fileUpload",name:"Screenshot",value:"",label:"Upload Screenshot",required:!1}],l=[{type:"listLabel",name:"Reason",label:"What is the issue you are reporting?",required:!1},{type:"list",name:"Issue(s)",required:!1,items:[{type:"checkbox",name:"Issue",value:"block list violation",label:"Ad violates site block list",required:!1},{type:"checkbox",name:"Issue",value:"video plays in display ad",label:"Video plays in display ad",required:!1},{type:"checkbox",name:"Issue",value:"ad disrupts content",label:"Ad disrupts content",required:!1},{type:"checkbox",name:"Issue",value:"ad incorrectly sized",label:"Ad incorrectly sized",required:!1},{type:"checkbox",name:"Issue",value:"download initiated",label:"Ad attempts to initiate download",required:!1},{type:"checkbox",name:"Issue",value:"blank ad",label:"Blank ad",required:!1},{type:"checkbox",name:"Issue",value:"low quality",label:"Low-quality ad",required:!1},{type:"checkbox",name:"Issue",value:"audio autostarts",label:"Audio starts automatically",required:!1},{type:"checkbox",name:"Issue",value:"broken ad",label:"Broken ad",required:!1}]},{type:"select",name:"Brand",label:"What is brand is affected by the issue you are reporting?",required:!0,options:[{text:"",value:"placeholder"},{text:"Adult Swim",value:"Adult Swim"},{text:"Bleacher Report",value:"Bleacher"},{text:"Cartoon Network",value:"Cartoon Network"},{text:"CNN",value:"CNN"},{text:"CNN Arabic",value:"CNN Arabic"},{text:"CNN Espanol",value:"CNN Espanol"},{text:"CNN International",value:"CNN International"},{text:"CNN Money",value:"CNN Money"},{text:"E-League",value:"ELEAGUE"},{text:"Great Big Story",value:"Great Big Story"},{text:"HLN",value:"HLN"},{text:"NBA",value:"NBA"},{text:"NBA International",value:"NBA International"},{text:"NCAA",value:"NCAA"},{text:"TBS",value:"TBS"},{text:"TCM",value:"TCM"},{text:"Team Coco",value:"Team Coco"},{text:"TNT",value:"TNT"},{text:"TruTV",value:"truTV"}]}],d=[{type:"textarea",name:"Comments",label:"Please describe the issue you are reporting",required:!0}];e.innerHTML="",e.style.padding="0";var c=document.createElement("div");c.style.width="100%",c.style.height="100%",c.style.display="inline-block",c.style.padding="5px",c.style.margin="0",c.style.border="solid 2px purple";var u=document.createElement("div");u.style.width="99%",u.style.borderBottom="solid 1px black",u.style.fontSize="12px";var p=document.createElement("p");p.style.padding="0",p.style.fontWeight="bolder",p.style.margin="auto",p.innerHTML="You can report an issue on this page by submitting the information below. A copy of the report will be sent to the email address specified.<br /><span style='color: red'>* Denotes required fields.</span>",u.appendChild(p),c.appendChild(u);var f=document.createElement("form");f.style.padding="0",f.style.margin="0",c.appendChild(f);var h=document.createElement("div");h.style.width="50%",h.style.height="100%",h.style.minHeight="160px",h.style.display="inline-block",h.style.padding="5px 5px",h.style.margin="0",h.style.float="left",h.style.fontSize="12px",h.id="cr_panel_1",t(h,f,s);var m=document.createElement("div");m.style.width="50%",m.style.height="100%",m.style.minHeight="160px",m.style.padding="5px 5px",m.style.margin="0",m.style.float="left",m.style.fontSize="12px",m.style.display="inline-block",m.id="cr_panel_2",t(m,f,l);var g=document.createElement("div");g.style.width="100%",g.style.height="100%",g.style.minHeight="160px",g.style.padding="5px 5px",g.style.margin="0",g.style.float="left",g.style.fontSize="12px",g.style.display="none",g.id="cr_panel_3",t(g,f,d);var v=document.createElement("div");v.style.clear="both",c.appendChild(v);var y=document.createElement("div");y.style.width="99%",y.style.height="10%",y.style.padding="0",y.style.margin="0";var w=document.createElement("div");w.style.display="inline-block",w.style.float="right",w.style.height="10%";var _=document.createElement("div");_.style.cssText="display: none; margin-right: 14px; margin-top: 7px; color: #FFFFFF; font-style: italic; font-weight: bold; font-size: 12px; padding: 5px; margin-bottom: 5px; border: solid 1px black; background-color: red;";var b=document.createElement("div");b.className="cr-confirm-alert",b.style.visibility="hidden";var C=document.createElement("div");C.className="cr-confirm-alert-text";var x=new Date,E=x.getDay(),A=x.getHours(),S=0==E||6==E||A<8||A>17,N=S?"2 hours outside of":"1 hour during";C.innerHTML="Your report has been successfully submitted to Ad Operations. If you do not get a response within "+N+" normal business hours (8am - 6pm Eastern), further contact information can be found in the confirmation email that has been sent to you.",b.appendChild(C),b.appendChild(document.createElement("br"));var T=document.createElement("button");T.className="btn btn-primary btn-sm",T.innerHTML="OK",T.onclick=function(e){e.preventDefault(),M(),b.style.visibility="hidden",f.reset()},b.appendChild(T),e.appendChild(b);var k=document.createElement("input");k.type="submit",k.className="btn btn-primary btn-sm cr-confirm-alert-btn",k.onclick=function(e){if(e.preventDefault(),""==f.elements.Comments.value)return void i("Please describe the issue you are reporting.");F(f,function(){b.style.visibility="visible"})};var I=document.createElement("button");I.type="button",I.className="btn btn-primary btn-sn cr-confirm-alert-btn",I.onclick=function(e){return""==f.elements.Name.value||""==f.elements.Email.value||"placeholder"==f.elements.Brand.value||""==f.elements.Brand.value?void i("Please fill out all required fields."):r(f.elements.Email.value)?(document.getElementById("cr_panel_1").style.display="none",document.getElementById("cr_panel_2").style.display="none",document.getElementById("cr_panel_3").style.display="inline-block",ne("Appending Back and Submit Buttons.  Removing Next Button."),w.removeChild(I),w.appendChild(O),w.appendChild(k),void 0):void i("Email address is not valid.")},I.style.padding="5px 10px",I.style.fontSize="12px",I.style.lineHeight="1.5",I.style.borderRadius="3px",I.innerHTML="Next >>";var O=document.createElement("button");O.type="button",O.className="btn btn-primary btn-sn cr-confirm-alert-btn",O.onclick=function(e){i(""),document.getElementById("cr_panel_1").style.display="inline-block",document.getElementById("cr_panel_2").style.display="inline-block",document.getElementById("cr_panel_3").style.display="none",ne("Adding Next Button. Removing Submit and Back Buttons."),w.appendChild(I),w.removeChild(O),w.removeChild(k)},O.style.padding="5px 10px",O.style.fontSize="12px",O.style.lineHeight="1.5",O.style.borderRadius="3px",O.style.marginRight="10px",O.innerHTML="<< Back",w.appendChild(_),w.appendChild(I),y.appendChild(w),c.appendChild(y),e.insertBefore(c,b)}}function k(e){var t={};if(e.data&&"function"==typeof e.data.indexOf&&0==e.data.indexOf("{")&&e.data.indexOf("googMsgType")<0)try{t=JSON.parse(e.data),t.pos}catch(e){return}if(t.divId){if(Array.isArray(t.divId)&&t.divId.length>1&&(t.divId=t.divId[0]),t.filteredSources.length>0)for(var n=0;n<t.filteredSources.length;n++){var i=t.filteredSources[n];if(i.indexOf("javascript:")<0){var o=function(){var e=i,n=document.createElement("img"),o=document.getElementById(t.divId),a=document.querySelectorAll("div[id='"+t.divId+"'] div[id^='google_ads_iframe']");if(n.className="adfuel-temp-image",n.src=e,0==e.indexOf("http://")||0==e.indexOf("https://")||0==e.indexOf("//")){o.appendChild(n);for(var r=0;r<a.length;r++){a[r].style.display="none"}}},a=function(){for(var e=document.getElementById(t.divId),n=document.querySelectorAll("div[id='"+t.divId+"'] img.adfuel-temp-image"),i=document.querySelectorAll("div[id='"+t.divId+"'] div[id^='google_ads_iframe']"),o=0;o<n.length;o++){var a=n[o];try{e.removeChild(a)}catch(e){}}for(var r=0;r<i.length;r++){i[r].style.display="block"}};Z.push(o),X.push(a)}}U.addMetric({type:"creatives",id:t.divId,data:t})}}function I(e){if(e&&"FORM"===e.nodeName){var t,n,i=[],o={};for(t=e.elements.length-1;t>=0;t-=1)if(""!==e.elements[t].name)switch(e.elements[t].nodeName){case"INPUT":switch(e.elements[t].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].value;break;case"file":e.elements[t].files.length>0&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].files[0],o[e.elements[t].name+"FileName"]=o[e.elements[t].name].name);break;case"checkbox":e.elements[t].checked&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]?o[e.elements[t].name].push(e.elements[t].value):o[e.elements[t].name]=[e.elements[t].value]);break;case"radio":e.elements[t].checked&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].value)}break;case"TEXTAREA":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].value;break;case"SELECT":switch(console.log("======== SELECT ========",e.elements[t]),e.elements[t].type){case"select-one":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].value;break;case"select-multiple":for(n=e.elements[t].options.length-1;n>=0;n-=1)e.elements[t].options[n].selected&&(i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].options[n].value)),o[e.elements[t].name]=e.elements[t].options[n].value)}break;case"BUTTON":switch(e.elements[t].type){case"reset":case"submit":case"button":i.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value)),o[e.elements[t].name]=e.elements[t].value}}return o}}function F(e,t){var n=I(e);console.log({data:n});var i=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(){4==e.readyState&&t(200===e.status)};var i=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),o=new Blob([JSON.stringify(window.AdFuel.requestScriptText,null,2)],{type:"application/json"}),a=new Blob([JSON.stringify(window.AdFuel.registry,null,2)],{type:"application/json"}),r={availHeight:screen.availHeight,availLeft:screen.availLeft,availTop:screen.availTop,availWidth:screen.availWidth,colorDepth:screen.colorDepth,height:screen.height,orientation:{angle:screen.orientation.angle,onchange:screen.orientation.onchange,type:screen.orientation.type},pixelDepth:screen.pixelDepth,width:screen.width},s=JSON.parse(JSON.stringify(window.AdFuel.metrics.slots));for(var l in s)s.hasOwnProperty(l)&&(delete s[l].build_end,delete s[l].build_start,delete s[l].display,delete s[l].queued,delete s[l].render_start,delete s[l].render_end);var d=new Blob([JSON.stringify(window.AdFuel.metrics.creatives,null,2)],{type:"application/json"}),c=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),u=new Blob([JSON.stringify(document.cookie,null,2)],{type:"application/json"}),p=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),f=new Blob([JSON.stringify(window.AdFuel.metrics.timeline,null,2)],{type:"application/json"}),h=new Blob([JSON.stringify(window.location.href,null,2)],{type:"application/json"}),m=new FormData;m.append("formData",i),m.append("request",o),m.append("registry",a),m.append("slots",c),m.append("creative",d),m.append("cookies",u),m.append("browser",p),m.append("timeline",f),m.append("url",h);var g="http://ams-adfuel-services.prod.services.ec2.dmtio.net:80/api/email";-1!=g.indexOf("adfuel-services-host")&&(g="http://localhost:3050/api/email"),e.open("POST",g,!0),e.send(m),U.addMetric({type:"modules",id:"Creative Review",data:{reported_information:n[0]}})};if(n.Screenshot){n.Screenshot.type.match("image.*")||i();var o=new FileReader;o.onload=function(e){return function(e){n.Screenshot=e.target.result,i()}}(n.Screenshot),o.readAsDataURL(n.Screenshot)}else i()}function O(e,t,n){var i=document.createElement("div");0==t.indexOf("request_")&&(t=t.replace("request_",""));var o=e.id.split("-")[3],a=U.metrics[o][t],r=document.createElement("ul");r.id="adfuel_console_"+o+"_items",r.style.listStyleType="none",r.style.padding="0",r.style.margin="0";for(var l in a)if(a.hasOwnProperty(l)){var d=a[l];isNaN(parseInt(l))||(l="request_"+(parseInt(l)+1));var c=document.createElement("li");c.id="adfuel-console-"+o+"-"+l,c.style.display="block";var u=document.createElement("div"),p=document.createElement("span");p.style.display="inline-block",p.style.width="25%",p.style.minWidth="150px",p.style.textAlign="left",p.style.margin="0",p.style.padding="0",p.style.paddingRight="10px",p.style.float="left",p.style.fontWeight="bolder",p.style.borderBottom="solid 1px #BCBCBC",p.innerHTML=m(l.replace(/_/g," ")+": "),u.appendChild(p),null==d?d="N/A":d||(d="False");var f=Object.getOwnPropertyNames(d),h=typeof d;if("string"==h||"boolean"==h||"number"==h||Array.isArray(d)&&1==d.length){var g="",v=!1;Array.isArray(d)?(v=s(d[0]),g=v?d[0]:m(d[0]),d[0]):(v=s(d),g=v?d:m(d),d);var y=document.createElement("div");if(y.style.margin="0",y.style.padding="0",y.style.display="block",y.style.width="65%",y.style.maxWidth="800px",y.style.float="left",y.style.borderBottom="solid 1px #BCBCBC",y.style.textOverflow="ellipsis",y.style.whiteSpace="nowrap",y.style.overflow="hidden",v){var w=document.createElement("a");w.href=g,w.target="_blank",w.title=g,w.appendChild(document.createTextNode(g)),y.appendChild(w)}else y.appendChild(document.createTextNode(g));u.appendChild(y);var _=document.createElement("div");_.style.clear="both",u.appendChild(_)}else if(Array.isArray(d)){var b=document.createElement("div");b.style.width="65%",b.style.margin="0",b.style.position="relative",b.style.float="left",b.style.textOverflow="ellipsis",b.style.whiteSpace="nowrap",b.style.overflowX="hidden";var C=document.createElement("ul");C.style.listStyleType="none",C.style.margin="0",C.style.padding="0";for(var x=0;x<d.length;x++){var E=document.createElement("li");E.style.marginLeft="0",E.style.paddingLeft="0",E.style.borderBottom="solid 1px #BCBCBC",E.style.margin="0",E.style.padding="0",E.style.display="block",E.style.width="100%",E.style.maxWidth="800px",E.style.float="left",E.style.borderBottom="solid 1px #BCBCBC",E.style.textOverflow="ellipsis",E.style.whiteSpace="nowrap",E.style.overflow="hidden";var v=s(d[x]),g="";if(v){g=d[x];var w=document.createElement("a");w.href=g,w.target="_blank",w.title=g,w.appendChild(document.createTextNode(g)),E.appendChild(w)}else g=m(d[x]),E.appendChild(document.createTextNode(g));C.appendChild(E)}b.appendChild(C),u.appendChild(b);var _=document.createElement("div");_.style.clear="both",u.appendChild(_)}else{var b=document.createElement("div");b.style.width="65%",b.style.maxWidth="800px",b.style.margin="0",b.style.position="relative",b.style.left="5px",b.style.borderBottom="solid 1px #BCBCBC",b.style.textOverflow="ellipsis",b.style.whiteSpace="nowrap",b.style.overflowX="hidden";var C=document.createElement("ul");C.style.listStyleType="none",C.style.margin="0",C.style.padding="0";for(var x=0;x<f.length;x++){var E=document.createElement("li");E.style.padding="0",E.style.margin="0";var v=s(f[x]),g="";g=v?f[x]:m(f[x]);var A=d[f[x]]
;if(void 0!==A){var S=document.createElement("label");S.style.width="25%",S.appendChild(document.createTextNode(g+": ")),E.appendChild(S);var N=typeof A;"object"==N&&(A=Array.isArray(A)?A.join(", "):JSON.stringify(A));var y=document.createElement("span");y.title=A,y.appendChild(document.createTextNode(A)),E.appendChild(y)}else E.appendChild(document.createTextNode(g));C.appendChild(E)}b.appendChild(C),u.appendChild(b)}c.appendChild(u),r.appendChild(c)}i.style.overflowY="auto",i.style.height="80%",i.style.minHeight="250px",i.appendChild(r),e.appendChild(i)}function R(e,t){function n(e){return e.indexOf("_")<0||e.indexOf("_")>0}function i(e,t){var o=document.createElement("ul");o.className="adfuel-console-collection-list-item-detail-list";for(var a=Object.getOwnPropertyNames(e).filter(n),r=0;r<a.length;r++){var s=document.createElement("li");s.className="adfuel-console-collection-list-item-detail-list-item";document.createElement("div").className="adfuel-console-collection-list-item-detail-list-item-container";var l=document.createElement("label");l.className="adfuel-console-collection-list-item-detail-list-item-label";var d=a[r],c=m(d.replace(/_/g," "));l.appendChild(document.createTextNode(c)),s.appendChild(l),Array.isArray(e[d])&&e[d].length>1&&(e[d]=e[d].join("<br>"),e[d]=e[d]+"<br><br>");var u=document.createElement("div");u.style.clear="both";var p=document.createElement("div");if(Array.isArray(e[d])||"object"!=typeof e[d]||null===e[d])p.className="truncate",p.innerText=e[d],p.innerHTML=e[d],p.title=e[d];else{var f=i(e[d],!0),h=document.createElement("div");h.style.clear="both",p.appendChild(h),p.appendChild(f)}t&&s.appendChild(u),s.appendChild(p),s.appendChild(u),o.appendChild(s)}return o}if(e){e.innerHTML="";var o=e.id.replace("adfuel-console-panel-",""),a=U.metrics[o];if(t)tabNames=Object.getOwnPropertyNames(a),A(e,tabNames);else{var r=document.createElement("div");r.className="adfuel-console-collection-container";var s=document.createElement("ul");s.id="adfuel_console_"+o+"_items",s.className="adfuel-console-collection-list",s.style.listStyleType="none",s.style.padding="0",s.style.margin="0";for(var l in a)if(a.hasOwnProperty(l)){var d=a[l],c=document.createElement("li");c.id="adfuel-console-"+o+"-"+l,c.className="adfuel-console-collection-list-items";var u=document.createElement("div");u.className="adfuel-console-collection-list-item-container";var p=document.createElement("label");p.className="adfuel-console-collection-list-item-label";var f=document.createElement("span");p.appendChild(f),p.appendChild(document.createTextNode(m(l.replace(/_/g," ")))),u.appendChild(p);var h=document.createElement("hr");h.className="adfuel-console-separator",u.appendChild(h);var g;if(Array.isArray(d))for(var v=0;v<d.length;v++)d=d[v],g=i(d),u.appendChild(g);else g=i(d),u.appendChild(g);c.appendChild(u),s.appendChild(c)}r.appendChild(s),e.appendChild(r)}}}function M(){V=null;var e=(document.getElementsByTagName("body")[0],document.querySelector("div.adfuel-console-button-container")),n=(document.querySelector("div#adfuel-close-console-button-container"),document.querySelector("body > div.adfuel-console-button-container > a")),i=document.querySelector("div.adfuel-console-filler"),o=document.querySelector("div.adfuel-console");document.querySelector("div#adfuel-console-banner");i.style.display="none",o.style.display="none",e&&n&&(e.style.display="inline-block",Q=t(n,"click",p),window.AdFuel.openConsole=p)}function D(){window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("slotRenderEnded",function(e){try{var t={};e.slot&&(t.asset=e.slot),e.slot.getTargeting("pos")&&(t.pos=e.slot.getTargeting("pos")),e.isEmpty?t.empty=!0:t.empty=!1,e.size&&(t.renderedSize=e.size),e.creativeId&&(t.creativeId=e.creativeId),e.lineItemId&&(t.lineItemId=e.lineItemId),e.serviceName&&(t.serviceName=e.serviceName),e.slot.getSlotElementId()&&(t.divId=e.slot.getSlotElementId(),document.getElementById(t.divId));var n=_pageSlots[t.divId].getResponseInformation();if(t.campaignId=n.campaignId,t.advertiserId=n.advertiserId,U.addMetric({type:"slots",id:t.divId,data:{advertiserId:t.advertiserId,campaignId:t.campaignId,creativeId:t.creativeId,lineItemId:t.lineItemId}}),window.googletag){var i=googletag.slot_manager_instance;if(i.l)for(var o in i.l)if(i.l.hasOwnProperty(o)&&o==t.divId){var a=null;for(var r in i.l[o])i.l[o].hasOwnProperty(r)&&null!=i.l[o][r]&&"string"==typeof i.l[o][r]&&i.l[o][r].split("?")&&(a=i.l[o][r].split("?"));null!=a&&addMetric({type:"slots",id:t.divId,data:{diagnostics_url:"https://www.google.com/dfp/inventory#diagnostics/"+a[1]+"&base_url="+encodeURIComponent(a[0])}})}}}catch(e){_errLog("error reading slotRenderEnded event",{error:e})}})})}function j(e,t){for(var n=1;n<e.length;n++){var i=e[n];ge.indexOf(i.rktr_slot_id)<0&&(window.AdFuel.addSlotLevelTarget(i.rktr_slot_id,"elemId",i.rktr_slot_id),ge.push(i.rktr_slot_id))}window.AdFuel.addEvent(document,"SlotIdChange",function(e){e.detail.newId!=e.detail.originalId&&ge.indexOf(e.detail.newId)<0&&(window.AdFuel.addSlotLevelTarget(e.detail.newId,"elemId",e.detail.newId),ge.push(e.detail.newId))}),t()}function B(){U=window.AdFuel.registerModule("AdFuel Console Tool",{preQueueCallback:j,metricUpdateCallback:y}),U.addMetric({type:"creative review",id:"Form",data:{}}),window.AdFuel.addEvent(window,"message",k),P(),L(),D(),y({}),e(),window.addEventListener("hashchange",e,!1)}function P(){var e=function(){G=!0,u()},t=function(){G=!1,u()},n=function(){var n={prevent_default:!1,prevent_repeat:!1,is_sequence:!1,is_exclusive:!0,is_solitary:!0},i={keys:"ctrl shift z",on_keydown:e};new window.keypress.Listener(window,n).register_combo(i),n={prevent_default:!1,prevent_repeat:!1,is_sequence:!0,is_exclusive:!0,is_solitary:!0},i={keys:"d o h",on_keydown:t},new window.keypress.Listener(window,n).register_combo(i)};if(window.keypress)n();else{var i=document,o=i.createElement("script"),a=i.getElementsByTagName("script")[0],r=/^(complete|loaded)$/,s=!1,l="https:"===document.location.protocol;o.type="text/javascript",o.async=!0,o.src=(l?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/keypress.js",o.onload=o.onreadystatechange=function(){s||"readyState"in o&&r.test(o.readyState)||(o.onload=o.onreadystatechange=null,s=!0,n())},a.parentNode.insertBefore(o,a)}}function L(){var e=document,t=e.createElement("script"),n=e.getElementsByTagName("script")[0],i="https:"===document.location.protocol;t.type="text/javascript",t.async=!0,t.src=(i?"https:":"http:")+"//ssl.cdn.turner.com/ads/adfuel/modules/dhtmlxgrid.js",n.parentNode.insertBefore(t,n)}var q,z=function(){return!1},U={metrics:{},addMetric:z,getMetricById:z,getMetricsByType:z,getMetricTypes:z},W="Console Tool/Creative Review",H=!1,Q=null,V=null,$=null,K=[],J=!0,G=!1,Y=window.File&&window.FileReader&&window.FileList&&window.Blob,Z=[],X=[],ee=Object.prototype,te=ee.toString,ne=z,ie=z,oe=z;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===te.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(ne=function(){var e=["[AdFuelModule - "+W+"]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},function(){var e=["[AdFuelModule - "+W+"]"];e.push.apply(e,arguments),window.console.warn.apply(window.console,e)},function(){var e=["[AdFuelModule - "+W+" ERROR]"];e.push.apply(e,arguments),window.console.error.apply(window.console,e)},ie=function(){var e=["[AdFuelModule - "+W+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.time(t)},oe=function(){var e=["[AdFuelModule - "+W+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.timeEnd(t)});var ae=!1,re=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,se=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,le=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,de=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),ce=function(e,t){return e.test(t)},ue=function(e){var t=e||navigator.userAgent,n=t.split("[FBAN");if(void 0!==n[1]&&(t=n[0]),n=t.split("Twitter"),void 0!==n[1]&&(t=n[0]),this.apple={phone:ce(/iPhone/i,t),ipod:ce(/iPod/i,t),tablet:!ce(/iPhone/i,t)&&ce(/iPad/i,t),device:ce(/iPhone/i,t)||ce(/iPod/i,t)||ce(/iPad/i,t)},this.amazon={phone:ce(se,t),tablet:!ce(se,t)&&ce(le,t),device:ce(se,t)||ce(le,t)},this.android={phone:ce(se,t)||ce(re,t),tablet:!ce(se,t)&&!ce(re,t)&&(ce(le,t)||ce(/Android/i,t)),device:ce(se,t)||ce(le,t)||ce(re,t)||ce(/Android/i,t)},this.windows={phone:ce(/Windows Phone/i,t),tablet:ce(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t),device:ce(/Windows Phone/i,t)||ce(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t)},this.other={blackberry:ce(/BlackBerry/i,t),blackberry10:ce(/BB10/i,t),opera:ce(/Opera Mini/i,t),firefox:ce(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t),chrome:ce(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t),device:ce(/BlackBerry/i,t)||ce(/BB10/i,t)||ce(/Opera Mini/i,t)||ce(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t)||ce(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t)},this.seven_inch=ce(de,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},pe=function(){var e=new ue;return e.Class=ue,e},fe=null,he=1,me=U.getMetricTypes()||{},ge=[];!function(){c(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(B):window.AdFuel?B():document.addEventListener?document.addEventListener("AdFuelCreated",B,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",B)}()}(),!0===CNN.Features.enableCriteoAds&&function(){function e(e){function n(e){var t,n,i,o=document.cookie.split(";");for(t=0;t<o.length;t++)if(n=o[t].substr(0,o[t].indexOf("=")),i=o[t].substr(o[t].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==e)return decodeURIComponent(i);return""}function i(){var i={},r=n(o);if(window.crtg_content=r,r)for(var l=r.split(";"),d=0;d<l.length-1;d++){var c=l[d].split("="),u=c[0],p=c[1];i[u]=p,t.key||window.AdFuel.addPageLevelTarget(u,p)}for(var f in t)t.hasOwnProperty(f)&&!i[f]&&window.AdFuel.removePageLevelTarget(f);a.addMetric({type:"modules",id:"Criteo",data:{targeting:i}}),s("set criteo targeting",i),t=i,e&&(window.AdFuel.removePageLevelTarget("crt_to","1"),window.AdFuel.addPageLevelTarget("crt_to","0"),e())}var o="crtg_trnr",l=Math.floor(99999999999*Math.random());r?i():(r=!0,function(e){var t=location.protocol+"//rtax.criteo.com/delivery/rta/rta.js?netId="+encodeURIComponent("4157");t+="&cookieName="+encodeURIComponent(o),t+="&rnd="+l,t+="&varName="+encodeURIComponent("crtg_content");var n=document,i=n.createElement("script"),a=n.getElementsByTagName("script")[0],r=/^(complete|loaded)$/,s=!1;i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){s||"readyState"in i&&r.test(i.readyState)||(i.onload=i.onreadystatechange=null,s=!0,e())},a.parentNode.insertBefore(i,a)}(i))}var t={};window.crtg_content="";var n=Object.prototype,i=n.toString,o=function(){return!1},a={metrics:{},addMetric:o,getMetricById:o,getMetricsByType:o,getMetricTypes:o},r=!1,s=function(){};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===i.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(s=function(){var e=["[AdFuelModule - Criteo]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}),function(){function t(){a=window.AdFuel.registerModule("Criteo",{preDispatchCallback:function(t,n){try{s("preDispatch"),e(n)}catch(e){s("error setting targeting prior to dispatch",e),n(e)}},preRefreshCallback:function(t,n){try{s("preRefresh"),e(n)}catch(e){s("error setting targeting prior to refresh",e),n(e)}}}),window.AdFuel.addPageLevelTarget("crt_to","1")}window.AdFuel?t():document.addEventListener?document.addEventListener("AdFuelCreated",t,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",t)}()}(),!0===CNN.Features.enableRubiconFastlane&&function(){function e(){return void 0!==window.innerWidth?(viewPortWidth=window.innerWidth,viewPortHeight=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(viewPortWidth=document.documentElement.clientWidth,viewPortHeight=document.documentElement.clientHeight):(viewPortWidth=document.getElementsByTagName("body")[0].clientWidth,viewPortHeight=document.getElementsByTagName("body")[0].clientHeight),[viewPortWidth,viewPortHeight]}function t(e){var t=!1;if(localStorage&&(t=!0),"undefined"==typeof value){data=t?localStorage.getItem(e):function(t){if(document.cookie){for(var n=document.cookie.split(";"),i=e+"=",o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(i))return a.substring(i.length,a.length)}return""}return""}(e);try{data=JSON.parse(data)}catch(e){data=data}return data}}function n(){m("Adding Fastlane library to head of page.");for(var e=window.location.hostname.toLowerCase(),n=11078,i=e.search(/^cnnespanol\./)>=0||e.search(/^cnne-test\./)>=0,o=["countryCode","_dy_geo","CG","geoData","kxgeo"],a="",r=0;r<o.length;r++){var s=o[r];if(a=t(o[r])||"")switch(s){case"_dy_geo":a=a.substring(0,a.indexOf("."));break;case"CG":a=a.substring(0,a.indexOf(":"));break;case"geoData":a=a.split("|")[3];break;case"kxgeo":countryCodeKeys=a.split("&");for(var l=0;l<countryCodeKeys.length;l++)"country"==countryCodeKeys[l].split("=")[0]&&(a=countryCodeKeys[l].split("=")[1].toUpperCase())}}if(null==a&&e.search(/^(edition|arabic|cnnespanol|cnne\-test)\./)>=0||"arabic.cnn.com"==e?(m("No location - International site or Arabic"),n=11016):null==a&&e.search(/^(edition|arabic|cnnespanol|cnne\-test)\./)<0?(m("No location - Domestic site"),n=11078):"US"!==a&&"CA"!==a&&2===a.length||(""==a||null==a)&&e.search(/^(edition|arabic|cnnespanol)\./)>=0?(m("International Location or No Location - International site"),n=11016):e.search(/^(money|edition|arabic|cnnespanol|cnne\-test|www\.cnn)\./)<0?(m("Full Domestic Site.  Disregard Location."),n=11078):(""==a||null==a)&&e.search(/^(cnne\-test|cnnespanol)\./)>=0&&(m("CNN Espanol with no location - Defaulting to International"),n=11016),m("Rubicon Account ID: "+n),11078==n&&i)m("Espanol Domestic user detected. CountryCode: "+a+".  Fastlane Disabled."),g=!0;else{var d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src=("https:"===document.location.protocol?"https:":"http:")+"//ads.rubiconproject.com/header/"+n+".js";document.getElementsByTagName("script")[0].parentNode.appendChild(d)}}function i(e){clearTimeout(e),h.length=0}function o(t,n){if(g)m("Not building slots. Fastlane disabled."),n();else{m("Building slots for Fastlane",JSON.stringify(t));var o="",a=setTimeout(function(){m("PreQueue Timeout Occurred."),window.AdFuel.addPageLevelTarget("fln_pqto","1")},1e3);window.rubicontag.cmd.push(function(){for(var r=[],s=1;s<t.length;s++){m("Checking Slot: ",t[s].rktr_slot_id);var l,d=t[s];(""==o||d.rktr_slot_id.indexOf("bnr_atf_01")>0)&&(m("Setting KW Ad Unit: ",d.rktr_ad_id),o=d.rktr_ad_id);var c={_atf_:"atf",_btf_:"btf",_mod_:"atf"},u=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],p=["_ns_","_nfs_"],f=["super-ad-zone","super_ad_zone"],h=["CNN/health","CNN/health/healthgrades","CNN/health/leaf","CNN/health/list","CNN/health/photos","CNN/health/specials","CNN/health/video","CNN/student-news"];for(var g in c)if(c.hasOwnProperty(g)&&d.rktr_slot_id&&d.rktr_slot_id.indexOf(g)>=0){var v=!0,y=!1;for(var w in p)d.rktr_slot_id.indexOf(p[w])>=0&&(m("Filtering out invalid slot type: ",p[w],d),v=!1);for(var _ in f)d.rktr_ad_id.indexOf(f[_])>=0&&(m("Filtering out invalid ad unit segment: ",f[_],d),v=!1);for(var b in h)d.rktr_ad_id==h[b]&&(m("Filtering out invalid ad unit: ",h[b],d),v=!1);for(var C=[],x=0;x<d.responsive.length;x++){var E=e(),A=d.responsive[x];!y&&A[0][0]<E[0]&&A[0][1]<E[1]&&(y=!0,C=A[1],"suppress"!=A[1][0]&&"suppress"!=C||(v=!1))}if(v&&C.length>0&&(m("Setting Sizes To Responsive Sizes: ",C),d.sizes=C),v)for(var S=0;S<d.sizes.length;S++){var N=d.sizes[S];"suppress"!==N&&(N=N.join("x")),u.indexOf(N)<0&&(m("Filtering out invalid size: ",N,d),d.sizes.splice(S,1))}if(0==d.sizes.length&&(v=!1,m("Filtering out slot with no valid sizes.",d.rktr_slot_id,d.rktr_ad_id)),v){m("Slot is a valid item for Rubicon Fastlane.");var T=c[g],k=!!document.getElementById(d.rktr_slot_id)&&document.getElementById(d.rktr_slot_id).className.indexOf("adfuel-rendered")>=0;if(m("Checking for cached Fastlane response for: ",d.rktr_slot_id),void 0!==window.rubiconSlotDictionary[d.rktr_slot_id]||k)void 0===window.rubiconSlotDictionary[d.rktr_slot_id]&&k?m("Element has already been rendered with an ad.  Skipping Fastlane auction for: ",d.rktr_slot_id):m("Using cached Fastlane response for: ",d.rktr_slot_id);else{m("Cached response not found. Defining Slot: ","/8664377/"+d.rktr_ad_id,d.sizes,d.rktr_slot_id),l=window.rubicontag.defineSlot("/8664377/"+d.rktr_ad_id,d.sizes,d.rktr_slot_id),m("Setting Position: ",T),l.setPosition(T);for(var I=d.targeting,F=0;F<I.length;F++){var O=I[F];"pos"==O[0]&&(Array.isArray(O[1])?(m("Setting POS Keyword For "+d.rktr_slot_id,O[1][0]),l.setFPI("pos",O[1][0])):(m("Setting POS Keyword For "+d.rktr_slot_id,O[1]),l.setFPI("pos",O[1])))}m("Setting Keyword For "+d.rktr_slot_id,d.rktr_ad_id),l.addKW(d.rktr_ad_id),r.push(l),window.rubiconSlotDictionary[d.rktr_slot_id]=l}}}}for(var R=o.split("/"),M=["site","section","subsection"],D=0;D<R.length&&D<3;D++)m("Setting FPI",M[D],R[D]),window.rubicontag.setFPI(M[D],R[D]);window.CNN&&window.CNN.getCapTopics&&window.rubicontag.setFPI("cap_topics",Object.getOwnPropertyNames(window.CNN.getCapTopics())),window.rubicontag.setFPI("ssl","https:"===document.location.protocol?1:0),window.rubicontag.run(function(){i(a),n()},{slots:r})})}}function a(e){m("setting fastlane targeting"),window.googletag.cmd.push(function(){var t=window.AdFuel.pageSlots;m({slots:e,gptSlots:t});for(var n={},i=0;i<e.length;i++){var o=e[i];if(m("Slot ID: ",o.rktr_slot_id),t[o.rktr_slot_id]){var a=t[o.rktr_slot_id];m("calling window.rubicontag.setTargetingForGPTSlot..."),window.rubicontag.setTargetingForGPTSlot(a),window.refreshableRubiconSlots[o.rktr_slot_id]=window.rubiconSlotDictionary[o.rktr_slot_id],delete window.rubiconSlotDictionary[o.rktr_slot_id];for(var r=a.getTargetingKeys(),s={},l=!1,d=0;d<r.length;d++)r[d].indexOf("rpfl_")>=0&&(m("removing fln_to=1 and setting fln_to=0 for "+a.getSlotElementId()),l||(window.AdFuel.addSlotLevelTarget(a.getSlotElementId(),"fln_to","0"),l=!0),m("Setting Fastlane Targeting...",{slot:a.getSlotElementId(),target:{key:r[d],value:a.getTargeting(r[d])}}),s[r[d]]=a.getTargeting(r[d]));n[o.rktr_slot_id]=s}}f.addMetric({type:"modules",id:"Fastlane",data:{targeting:n}})})}function r(e){m("Fastlane Creative Rendered: ",e)}function s(e,t){if(window.rubicontag.addEventListener("HL_CREATIVE_RENDERED",r),!g){var n=setTimeout(function(){t()},1e3);m("preDispatch"),a(e),clearTimeout(n)}t()}function l(e,t){if(g)t();else{m("preRefresh");var n=[],i=[],o=window.AdFuel.pageSlots;e||(e=Object.getOwnPropertyNames(o));for(var r=0;r<e.length;r++){var s=e[r];if(m("Slot ID: ",s),o[s]){var l=o[s],d=l.getTargetingKeys();for(var c in d)if(d.hasOwnProperty(c)){var u=d[c];u.indexOf("rpfl")>=0&&window.AdFuel.removeSlotLevelTarget(s,u)}f.addMetric({type:"modules",id:"Fastlane",data:{targeting:{}}}),window.rubiconSlotDictionary[s]&&n.push(window.rubiconSlotDictionary[s]),i.push({rktr_slot_id:s})}}m("refreshing slots",{slotsToRefresh:n}),window.rubicontag.run(function(){a(i),t()},{slots:n})}}function d(){g?m("Fastlane disabled. Not registering module."):(window.AdFuel.setOptions({queueCallbackTimeoutInMilliseconds:1200,dispatchCallbackTimeoutInMilliseconds:1200,refreshCallbackTimeoutInMilliseconds:1200}),f=window.AdFuel.registerModule("Fastlane",{preQueueCallback:o,preDispatchCallback:s,preRefreshCallback:l}))}window.rubicontag=window.rubicontag||{},window.rubicontag.cmd=window.rubicontag.cmd||[];var c=Object.prototype,u=c.toString,p=function(){return!1},f={metrics:{},addMetric:p,getMetricById:p,getMetricsByType:p,getMetricTypes:p},h=[],m=function(){},g=!1;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===u.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(m=function(){var e=["[AdFuelModule - Fastlane/Rubicon]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}),window.rubiconSlotDictionary={},window.refreshableRubiconSlots={},function(){n(),window.AdFuel?d():document.addEventListener?document.addEventListener("AdFuelCreated",d,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",d)}()}(),function(){var e=function(){return!1},t={addMetric:e,getMetricById:e,getMetricsByType:e,getMetricTypes:e};window.cnnad_haveCookie=function(e){return document.cookie&&(document.cookie.indexOf("; "+e+"=")>=0||0==document.cookie.indexOf(e+"="))},window.cnnad_readCookie=function(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var o=t[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(n))return o.substring(n.length,o.length)}return null}},window.turner_getGuid=function(){return window.cnnad_readCookie("ug")},function(){function e(){function e(){var e=window.turner_getGuid();t=window.AdFuel.registerModule("GUID",{}),o("setting guid targeting",{guid:e}),t.addMetric({type:"modules",id:"GUID",data:{targeting:{guid:e}}}),window.AdFuel.addPageLevelTarget("guid",e)}window.AdFuel?e():document.addEventListener?document.addEventListener("AdFuelCreated",e,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",e)}var n=Object.prototype,i=n.toString,o=function(){};if(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e}(window.console)&&function(e){return"[object Function]"===i.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(o=function(){var e=["[AdFuelModule - Guid]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}),window.cnnad_haveCookie("ugs"))e();else{var a=document,r=a.createElement("script"),s=a.getElementsByTagName("script")[0],l=/^(complete|loaded)$/,d=!1;r.type="text/javascript",r.async=!0,r.src="//www.ugdturner.com/xd.sjs",r.onload=r.onreadystatechange=function(){d||"readyState"in r&&l.test(r.readyState)||(r.onload=r.onreadystatechange=null,d=!0,e())},s.parentNode.insertBefore(r,s)}}()}(),!0===CNN.Features.enableInViewRefresh&&function(){function e(e,t,n){e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent&&e.attachEvent("on"+t,n)}function t(){f||(e(window,"scroll",C),e(window,"blur",function(){h=!1,C()}),e(window,"resize",C),e(window,"focus",function(){h=!0,C()}),e(document,"GPTRenderComplete",a),e(document,"visibilitychange",n),f=!0,b("Listeners Started!"))}function n(e){h=!document.hidden}function i(e,t,n,i,o,a,r,s,l){var d=Math.max(n,r),c=Math.min(i,s),u=Math.max(e,o),p=Math.min(t,a),f=0,h=d>=n&&d<=i,m=c>=n&&c<=i,g=u>=e&&u<=t,v=p>=e&&p<=t;h&&m&&g&&v&&(f=(c-d)*(p-u));var y=(a-o)*(s-r),w=0;return y>0&&(w=f/y),w}function o(e){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,a=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;t=parseInt(t),n=parseInt(n),o=parseInt(o),a=parseInt(a);var r=parseInt(e.clientWidth),s=parseInt(e.clientHeight),l=e.getBoundingClientRect(),d=l.left+document.body.scrollLeft,c=l.top+document.body.scrollTop;return i(o,o+t,a,a+n,d,d+r,c,c+s,e)}function a(t){var n=t.detail.divId,i=document.getElementById(n);if(t.detail.empty)try{delete p[n]}catch(e){}else if(b("Slot Rendered: "+n),p[n]&&!p[n].listenersSet){b("Slot is registered with InView Refresh"),p[n].inView=!1,p[n].el=i,p[n].mouseover=e(i,"mouseover",r),p[n].mouseout=e(i,"mouseout",s),p[n].refreshCount=0,p[n].listenersSet=!0;parseInt(p[n].inViewRefreshCount);C()}}function r(){var e=this.id;b("Moused over: ",e);var t=_.getMetricById("viewability",e),n=parseInt(t.moused_over)+1;_.addMetric({type:"viewability",id:e,data:{moused_over:""+n}}),p[e].timer&&(window.clearInterval(p[e].timer),p[e].inView=!1,p[e].timer=null)}function s(){var e=this.id;b("Moused out from "+e+". Restarting listener"),C(p[e])}function l(e){b("Refreshable In-View Slots: ",p),e?b("Detecting if ",e," is in view."):b("Detecting In View Slots.");var t=function(e){var t=p[e];_.getMetricById("viewability",e);t.timer=window.setInterval(function(){var n=t.el,i=(document.hidden,!1);n&&(i=n&&h&&o(n)>=g&&parseInt(t.inViewRefreshCount)>0),i?(b("Slot ["+t.el.id+"] is in view, is being refreshed, and has "+t.inViewRefreshCount+" refreshes remaining."),t.inViewRefreshCounter=p[e].inViewRefreshCounter||0,t.inViewRefreshCount--,t.inViewRefreshCounter++,window.AdFuel.removeSlotLevelTarget(e,"rfv"),window.AdFuel.addSlotLevelTarget(e,"rfv",p[e].inViewRefreshCounter),_.addMetric({type:"viewability",id:e,data:{refresh_count:t.inViewRefreshCounter,last_refresh:Date.now()}}),window.AdFuel.refresh([e]),b("Slot ["+t.el.id+"] is in view, was just refreshed, and still has "+t.inViewRefreshCount+" refreshes remaining.")):(b("Clearing interval for slot: "+t.el.id),window.clearInterval(t.timer),this.inView=!1,this.timer=null)},m)};p.length<1&&b("No registered slots have been rendered yet.");for(var n in p)if(b("Testing: ",n),!e||!e.rktr_slot_id||p.hasOwnProperty(n)&&p[n]==e){var i=p[n],a=i.el,r=!1;a&&(r=a&&h&&o(a)>=g&&parseInt(p[n].inViewRefreshCount)>0),b("Test Result: ",r),r!=i.inView&&(i.inView=r,r?(_.addMetric({type:"viewability",id:n,data:{is_in_view:!0}}),_.addMetric({type:"viewability",id:n,data:{was_in_view:!0}}),b("Test is true. Start timer for slot:",n),t(n)):(_.addMetric({type:"viewability",id:n,data:{is_in_view:!1}}),b("Test is false. Clear timer for slot:",n),window.clearInterval(i.timer),i.timer=null,i.inView=!1))}else{var i=p[n],a=i.el,r=!1;a&&(r=a&&h&&o(a)>=g&&parseInt(p[n].inViewRefreshCount)>0),r!=i.inView&&(i.inView=r,r?(b("Test is true. Refresh slot:",n),t(n)):(b("Test is false. Clear timer for slot:",n),window.clearInterval(i.timer),i.timer=null,i.inView=!1))}}function d(e,n){for(var i=!1,o=[],a=1;a<e.length;a++){var r=e[a];r.hasInViewRefresh=e[0].hasInViewRefresh?e[0].hasInViewRefresh:r.hasInViewRefresh||"false","true"==r.hasInViewRefresh&&(r.inViewRefreshCounter=0,i=!0,o.push(r.rktr_slot_id),_.addMetric({type:"viewability",id:r.rktr_slot_id,data:{is_in_view:!1,was_in_view:!1,moused_over:"0",refresh_count:"0",max_refresh:JSON.parse(JSON.stringify(r.inViewRefreshCount))}}))}return _.addMetric({type:"modules",id:"In View Refresh",data:{registeredSlots:o}}),i&&t(),n&&n(),null}function c(e,t){for(var n=0;n<e.length;n++){var i=e[n];"true"==i.hasInViewRefresh?(b("Slot is configured for in view refresh.  Creating _refreshableInViewSlots["+i.rktr_slot_id+"]..."),p[i.rktr_slot_id]=i):b("Slot is not configured for in view refresh. ["+i.rktr_slot_id+"]")}if(p.length>0){_.addMetric({type:"viewability",id:"General",data:{viewability:"active",render_listener:"Active",window_listener:"Active",mutation_observer:"Inactive",registeredSlots:Object.getOwnPropertyNames(p).length,criteria:100*a+"% in view for "+o/1e3+" seconds"}});var o=35e3,a=.5}_.addMetric({type:"modules",id:"In View Refresh",data:{registeredSlots:Object.getOwnPropertyNames(p)}}),t()}function u(){_=window.AdFuel.registerModule("In View Refresh",{preQueueCallback:d,preDispatchCallback:c})}var p={},f=!1,h=!0,m=35e3,g=.5,v=Object.prototype,y=v.toString,w=function(){return!1},_={metrics:{},addMetric:w,getMetricById:w,getMetricsByType:w,getMetricTypes:w};_debounce=function(e,t,n){var i;return function(){var o=this,a=arguments,r=function(){i=null,n||e.apply(o,a)},s=n&&!i;clearTimeout(i),i=setTimeout(r,t),s&&e.apply(o,a)}};var b=function(){};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===y.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(b=function(){var e=["[AdFuelModule - In View Refresh]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)});var C=_debounce(l,300,!1);(function(){window.AdFuel?u():e(window,"AdFuelCreated",u),setInterval(function(){window.AdFuel.updateCorrelator&&window.AdFuel.updateCorrelator()},3e4)})()}(),!0===CNN.Features.enableIndexExchange&&function(){function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}function t(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var o=t[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return null}return null}function n(){for(var e="",t=0;t<10;t++)e+=Math.floor(9*Math.random()).toString();return e}function i(){return void 0!==window.innerWidth?(viewPortWidth=window.innerWidth,viewPortHeight=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(viewPortWidth=document.documentElement.clientWidth,viewPortHeight=document.documentElement.clientHeight):(viewPortWidth=document.getElementsByTagName("body")[0].clientWidth,viewPortHeight=document.getElementsByTagName("body")[0].clientHeight),[viewPortWidth,viewPortHeight]}function o(e,t){T("Bid Timed Out: ",e),t()}function a(e,t){if(e){var n=1;if("object"==typeof e){n=Object.getOwnPropertyNames(e).length}if(1==n&&void 0!==e.id)T("Invalid Bid Request Parameter or No Bids Available.");else if(e.seatbid&&e.seatbid.length>0)for(var i=0;i<e.seatbid.length;i++)for(var o=e.seatbid[i].bid,a=0;a<o.length;a++){var r=o[a].impid||"",s=r.split("_");5==s.length&&s.shift();var l=s.shift(),d=s.join("_"),c=R[d];D[c]=D[c]||[];var u=o[a].price||0,p=o[a].ext.pricelevel||"_10",f=o[a].adm||"",h=l+"_"+d+p;D[c].push({size:l,slot:c,price:u,tier:p,markup:f,keyValue:h}),N("Slot ["+c+"] and size ["+l+"] has a bid for "+u+" and a pricelevel of "+p+"."),M[c]=M[c]||[],N("Pushing keyValue for slot: ",h,c),M[c].push(h)}}W.stashedCallback=function(){},t&&t(),!1!==P&&I("IndexExchange Initial Load")}function r(e,t){B=t,a(e,p)}function s(e){if(e.data&&"function"==typeof e.data.indexOf&&e.data.indexOf("0=goog_")<0&&e.origin.indexOf("publisherconsole.appspot.com")<0){var t=e.data;try{t=JSON.parse(e.data),"ix_render"==t.action?(N("IX Message Received: ",{event:e,data:t}),l(e.source,t.pattern,t.index,t.element)):e.origin}catch(e){}}}function l(e,t,n,i){if(D[i]&&D[i].length>0)for(var o=0;o<D[i].length;o++){D[i][o];n.indexOf(D[i][o].size)>=0&&(N("Rendering IX Ad for : "+D[i][o].slot+" - "+D[i][o].size),e.postMessage({referrer:"AdFuel",markup:D[i][o].markup},"*"))}}function d(e){
return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function c(e){N("Validating Slot: ",e);var t=!0,n=!1,o=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],a=["_ns_","_nfs_"],r=["super-ad-zone","super_ad_zone"],s=["CNN/health","CNN/health/healthgrades","CNN/health/leaf","CNN/health/list","CNN/health/photos","CNN/health/specials","CNN/health/video","CNN/student-news"];for(var l in a)e.rktr_slot_id.indexOf(a[l])>=0&&(N("Slot is invalid due to a non-monetized mapping: ",a[l],e),t=!1);for(var d in r)e.rktr_ad_id.indexOf(r[d])>=0&&(N("Slot is invalid due to a non-monetized ad unit segment: ",r[d],e),t=!1);for(var c in s)e.rktr_ad_id==r[d]&&(N("Slot is invalid due to a non-monetized ad unit: ",s[c],e),t=!1);for(var u=[],p=0;p<e.responsive.length;p++){var f=i(),h=e.responsive[p];!n&&h[0][0]<f[0]&&h[0][1]<f[1]&&(n=!0,u=h[1],"suppress"!=h[1][0]&&"suppress"!=u||(N("Slot is invalid due to responsive suppression.",e),t=!1))}if(t&&u.length>0&&(N("Setting Sizes To Responsive Sizes: ",u),e.sizes=u),t)for(var m=0;m<e.sizes.length;m++){var g=e.sizes[m];"suppress"!==g&&(g=g.join("x")),o.indexOf(g)<0&&(N("Filtering out non-monetized size: ",g,e),e.sizes.splice(m,1),m-=1)}return 0==e.sizes.length&&(N("Slot is invalid due to no monetized sizes.",e),t=!1),{slot:e,valid:t}}function u(t,r){k("IndexExchange Initial Load");var s=n(),l={id:s,site:{page:document.location.href.replace("localhost","arabic.cnn.com"),ref:document.location.origin.replace("localhost","arabic.cnn.com")},imp:[]},u=t.registry?t.registry:t,p=(t.id?t.id:t[0].rktr_id,t.options?t.options:{}),f=[];if(f.push(u[0]),p.slotMap)for(var h in p.slotMap)p.slotMap.hasOwnProperty(h)&&(u=u.filter(function(e){return e.rktr_slot_id==h&&(e.rktr_slot_id=p.slotMap[h],f.push(e)),!0}));f.length>1&&(u=f);for(var h=1;h<u.length;h++){var m=c(u[h]);if(1==m.valid){for(var g,v=m.slot,y=v.targeting,w=0;w<y.length;w++)y[w].indexOf("pos")>=0&&(g=y[w][1]);O[v.rktr_slot_id]=g,R[g]=v.rktr_slot_id;var b=i(),C=v.rktr_ad_id.indexOf("/homepage")>=0&&b[0]>=728,x=b[0]<728,E=!1;(x||_.any)&&(E=!0);for(var A={"edition.cnn.com":{hp_728x90_bnr_atf_01:190561,hp_970x250_bnr_atf_01:191334,hp_300x250_rect_atf_01:191335,hp_300x250_rect_btf_01:196190,hp_300x250_rect_btf_03:196191,"728x90_bnr_atf_01":194945,"970x250_bnr_atf_01":194946,hp_728x90_bnr_btf_04:196192,hp_970x250_bnr_btf_04:196193,"300x250_rect_atf_01":191336,"300x600_rect_atf_01":191337,"300x250_rect_atf_02":191338,"300x600_rect_atf_02":196207,"300x250_rect_btf_01":191333,"300x600_rect_btf_01":191339,"970x250_rect_btf_01":191345,"300x250_rect_btf_02":191340,"970x250_rect_btf_02":191348,"300x600_rect_btf_02":196202,"728x90_bnr_btf_01":191347,"728x90_bnr_btf_02":196194,"300x250_rect_btf_03":191341,"300x600_rect_btf_03":191342,"728x90_bnr_btf_03":191343,"728x90_bnr_btf_04":196203,"300x250_rect_btf_04":191344,"300x600_rect_btf_04":196204,mob_320x50_bnr_atf_01:196205,mob_300x250_bnr_atf_01:196197,mob_300x250_rect_atf_01:191349,mob_300x250_rect_btf_01:191350,mob_300x250_rect_btf_02:191351,mob_300x250_rect_btf_03:191352,mob_300x250_rect_btf_04:191353},"cnnespanol.cnn.com":{"728x90_bnr_atf_01":191389,"970x250_bnr_atf_01":191390,"728x90_bnr_btf_01":191391,"970x250_bnr_btf_01":191392,"300x250_rect_atf_01":191393,hp_300x250_rect_btf_01:191394,hp_300x250_rect_atf_01:191395,"300x600_rect_atf_01":191396,"300x250_rect_btf_01":191397,"300x600_rect_btf_01":191398,mob_300x250_rect_atf_01:191399,mob_300x250_bnr_atf_01:203451,mob_320x250_bnr_atf_01:203452,mob_300x250_bnr_btf_01:203453,mob_300x250_rect_btf_01:191400},"arabic.cnn.com":{"728x90_bnr_btf_01":191401,"970x250_bnr_btf_01":191402,"728x90_bnr_atf_01":191403,"970x250_bnr_atf_01":191404,hp_300x250_rect_atf_01:191405,hp_300x250_rect_btf_01:191406,"300x250_rect_btf_02":191407,"300x250_rect_atf_01":191408,"300x600_rect_atf_01":191409,"300x250_rect_btf_01":191410,"300x600_rect_btf_01":191411,"300x600_rect_btf_03":203454,mob_300x250_rect_atf_01:191412,mob_300x250_rect_atf_02:191413,mob_300x250_rect_btf_02:191414,mob_300x250_rect_btf_03:191415,mob_300x250_rect_btf_02:191416,mob_300x250_rect_btf_04:191417,mob_300x250_rect_btf_05:191418}},S=0;S<v.sizes.length;S++){var T=v.sizes[S],I=T.join("x")+"_"+g[0],M=I;C&&(M="hp_"+I),E&&(M="mob_"+I),"cnne-test.cnn.com"==z&&(z="cnnespanol.cnn.com");var D=A[z]?A[z][M]:0;if(0!=D&&D||!C||(D=A[z]?A[z][I]:0),D&&0!==D){"111111"==q&&(q=D);var B={id:I,banner:{w:T[0],h:T[1],topframe:0},ext:{siteID:D,sid:M}};l.imp.push(B),L[v.rktr_slot_id]=B}else N("No siteId found: ",{pos:g[0],size:T.join("x"),impId:I,modImpId:M,map:A[z]})}}else N("Invalid Slot: ",m)}var P=n(),U=e("ix_debug")?"http://sandbox.ht.indexexchange.com/cygnus?v=7&cb=":"https:"===window.location.protocol?"https://as-sec.casalemedia.com/cygnus?v=7&cb=":"http://as.casalemedia.com/cygnus?v=7&cb=";U=U+P+"&s="+q+"&pid="+F+"&fn=ixCallback_"+P+"&r="+d(JSON.stringify(l)),j.push(l),W.stashedCallback=r,W.send(U,{callbackName:"ixCallback_"+P,onSuccess:a,onTimeout:o,timeout:1})}function p(e,t){e||(e=Object.getOwnPropertyNames(M).map(function(e){return{rktr_slot_id:e}})),e.slots&&(e=e.slots);for(var n=0;n<e.length;n++){var i=M[e[n].rktr_slot_id];i&&i.length>0&&(window.AdFuel.addSlotLevelTarget(e[n].rktr_slot_id,"elemId",e[n].rktr_slot_id),window.AdFuel.addSlotLevelTarget(e[n].rktr_slot_id,"iom",i))}t?t():"function"==typeof B&&(B(),I("IndexExchange Refresh"))}function f(t,i){P=!1,k("IndexExchange Refresh");for(var a=n(),s=window.googletag.pubads().getSlots(),l=0;l<s.length;l++){var c=s[l];c.clearTargeting("iom"),M[c.getSlotElementId()]&&(M[c.getSlotElementId()]=[])}for(var u={id:a,site:{page:document.location.href,ref:e("domain")?e("domain"):document.location.origin},imp:[]},l=0;l<t.length;l++)L[t[l]]&&u.imp.push(L[t[l]]);var p=n(),f=e("ix_debug")?"http://sandbox.ht.indexexchange.com/cygnus?v=7&cb=":"https"===window.location.protocol?"https://as-sec.casalemedia.com/cygnus?v=7&cb=":"http://as.casalemedia.com/cygnus?v=7&cb=";f=f+p+"&s="+q+"&pid="+F+"&fn=ixCallback_"+p+"&r="+d(JSON.stringify(u)),W.stashedCallback=i,W.send(f,{callbackName:"ixCallback_"+p,onSuccess:r,onTimeout:o,timeout:2})}function h(){N("Registering "+y+" module with AdFuel"),window.AdFuel.setOptions({queueCallbackTimeoutInMilliseconds:1e3,dispatchCallbackTimeoutInMilliseconds:1e3,refreshCallbackTimeoutInMilliseconds:2e3}),window.AdFuel.ix_render=l,w=window.AdFuel.registerModule(y,{preQueueCallback:u,preDispatchCallback:p,preRefreshCallback:f})||w}var m=Object.prototype,g=m.toString,v=function(){},y="IndexExchange",w={metrics:{},addMetric:v,getMetricById:v,getMetricsByType:v,getMetricTypes:v},_=!1,b=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,C=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,x=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,E=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),A=function(e,t){return e.test(t)},S=function(e){var t=e||navigator.userAgent,n=t.split("[FBAN");if(void 0!==n[1]&&(t=n[0]),n=t.split("Twitter"),void 0!==n[1]&&(t=n[0]),this.apple={phone:A(/iPhone/i,t),ipod:A(/iPod/i,t),tablet:!A(/iPhone/i,t)&&A(/iPad/i,t),device:A(/iPhone/i,t)||A(/iPod/i,t)||A(/iPad/i,t)},this.amazon={phone:A(C,t),tablet:!A(C,t)&&A(x,t),device:A(C,t)||A(x,t)},this.android={phone:A(C,t)||A(b,t),tablet:!A(C,t)&&!A(b,t)&&(A(x,t)||A(/Android/i,t)),device:A(C,t)||A(x,t)||A(b,t)||A(/Android/i,t)},this.windows={phone:A(/Windows Phone/i,t),tablet:A(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t),device:A(/Windows Phone/i,t)||A(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,t)},this.other={blackberry:A(/BlackBerry/i,t),blackberry10:A(/BB10/i,t),opera:A(/Opera Mini/i,t),firefox:A(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t),chrome:A(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t),device:A(/BlackBerry/i,t)||A(/BB10/i,t)||A(/Opera Mini/i,t)||A(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,t)||A(/(CriOS|Chrome)(?=.*\bMobile\b)/i,t)},this.seven_inch=A(E,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},_=function(){var e=new S;return e.Class=S,e}(),N=v,T=v,k=v,I=v;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===g.call(e)}(window.console.log)&&"true"==e("debug")&&(console.log("[AdFuelModule - "+y+"] Defining log functions."),N=function(){var e=["[AdFuelModule - "+y+"]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},T=function(){var e=["[AdFuelModule - "+y+" WARNING]"];e.push.apply(e,arguments),window.console.warn.apply(window.console,e)},function(){var e=["[AdFuelModule - "+y+" ERROR]"];e.push.apply(e,arguments),window.console.error.apply(window.console,e)},k=function(){var e=["[AdFuelModule - "+y+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.time(t)},I=function(){var e=["[AdFuelModule - "+y+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.timeEnd(t)});var F=(t("countryCode")||t("CG")&&t("CG").substr(0,2),184694),O={},R={},M={},D={},j=[],B=null,P=!0,L={},q="111111",z=e("domain")?e("domain"):document.location.hostname,U=["edition.cnn.com","arabic.cnn.com","cnnespanol.cnn.com","cnne-test.cnn.com"];window.addEventListener("message",s,!1);var W=function(){var e={};return e.stashedCallback=function(){},e.send=function(t,n){var i=n.callbackName||"callback",o=n.onSuccess||function(){},a=n.onTimeout||function(){},r=n.timeout||10,s=window.setTimeout(function(){window[i]=function(){},a(null,e.stashedCallback)},1e3*r);window[i]=function(t){window.clearTimeout(s),o(t,e.stashedCallback)};var l=document.createElement("script");l.type="text/javascript",l.async=!0,l.src=t,document.getElementsByTagName("head")[0].appendChild(l)},e}();window.processResults=a,function(){U.indexOf(z)>=0?(N("Valid Hostname: ",z),N("Initializing "+y+" Module..."),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(h):window.AdFuel?h():document.addEventListener?document.addEventListener("AdFuelCreated",h,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",h)):(N("Invalid Hostname: ",z),N("Not initializing "+y+" Module."))}()}(),!0===CNN.Features.enableIntegralAdScience&&function(){function e(e){d("IAS Data Handler..."),d({adSlots:e})}function t(t,n){d("Building slots for IAS..."),p.pubId="8989",d("Asset: ",t,"Slots: ",t.length-1);for(var i=[],o=1;o<t.length;o++)d("Checking Slot: ",t[o]),t[o].rktr_ad_id.search(/^cnni\/(video|homepage|(.+\/(landing|main|video)))/)<0?i.push({adSlotId:t[o].rktr_slot_id,size:t[o].sizes,adUnitPath:"/8663477/"+t[o].rktr_ad_id}):d("Invalid Slot: ",t[o].rktr_ad_id);d("Built Ad Slots: ",i),p.queue.push({adSlots:i,dataHandler:e}),setTimeout(function(){n()},900)}function n(e,t){setTimeout(function(){d("Adding IAS Targeting to slots...");try{p.setTargetingForGPT()}catch(e){c("Could not set IAS targeting: ",e)}t()},900)}function i(){u&&(d("Registering "+l+" module with AdFuel"),window.AdFuel.setOptions({queueCallbackTimeoutInMilliseconds:1e3,dispatchCallbackTimeoutInMilliseconds:1e3}),metricApi=window.AdFuel.registerModule(l,{preQueueCallback:t,preDispatchCallback:n})||metricApi)}function o(){if("edition.cnn.com"==document.location.hostname||"localhost"==document.location.hostname){d("Adding IAS script to head...");var e=document.createElement("script");e.async=!0,e.src="//cdn.adsafeprotected.com/iasPET.1.js";var t=document.getElementsByTagName("head")[0];t.insertBefore(e,t.firstChild),u=!0}}var a=Object.prototype,r=a.toString,s=function(){},l="Integral Ad Science",d=s,c=s;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===r.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(d=function(){var e=["[AdFuelModule - "+l+"]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)},c=function(){var e=["[AdFuelModule - "+l+"]"];e.push.apply(e,arguments),window.console.warn.apply(window.console,e)},function(){var e=["[AdFuelModule - "+l+" ERROR]"];e.push.apply(e,arguments),window.console.error.apply(window.console,e)},function(){var e=["[AdFuelModule - "+l+" TIMER] "];e.push.apply(e,arguments);var t=e.join("");window.console.time(t)});var e,u=!1,p=p||{};p.queue=p.queue||[],d("Initializing "+l+" Module..."),function(){o(),window.AdFuel&&window.AdFuel.cmd?window.AdFuel.cmd.push(i):window.AdFuel?i():document.addEventListener?document.addEventListener("AdFuelCreated",i,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",i)}()}(),!0===CNN.Features.enableKrux&&function(){var e=function(){return!1},t={addMetric:e,getMetricById:e,getMetricsByType:e,getMetricTypes:e};window.Krux||((window.Krux=function(){window.Krux.q.push(arguments)}).q=[]),window.kvs=[],function(){function e(e){var t,n="kx"+e;return window.localStorage?window.localStorage[n]||"":navigator.cookieEnabled?(t=document.cookie.match(n+"=([^;]*)"))&&decodeURIComponent(t[1])||"":""}window.Krux.user=e("user"),window.Krux.segments=e("segs")&&e("segs").split(",")||[];for(var t=0;t<window.Krux.segments.length;t++)window.kvs.length<20&&window.kvs.push(window.Krux.segments[t])}(),window.krux_getDESegments=function(){var e="&kxid=";return window.Krux.user&&(e+=window.Krux.user),e+="&kxseg="+window.kvs.join(",")},window.krux_getFWSegments=function(){return"kxseg="+window.kvs.join(",kxseg=")},window.krux_getUser=function(){return window.Krux.user},window.krux_getFWKeyValues=function(e,t){for(var n=e||"_fwu:386123:",i=t||35,o={},a=0;a<window.Krux.segments.length;a++)a<i&&(o[n+window.Krux.segments[a]]=1);return o},window.Krux.setControlTag=function(e){function n(){function e(){var e=window.Krux.user,n=window.Krux.segments;a("setting krux targeting",{kuid:e,ksg:n}),t=window.AdFuel.registerModule("Krux",{}),window.AdFuel.addPageLevelTarget("kuid",e),window.AdFuel.addPageLevelTarget("ksg",n),t.addMetric({type:"modules",id:"Krux",data:{targeting:{kuid:e,ksg:n}}})}window.AdFuel?e():document.addEventListener?document.addEventListener("AdFuelCreated",e,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",e)}var i=Object.prototype,o=i.toString,a=function(){};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===o.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(a=function(){var e=["[AdFuelModule - Krux]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)});var r=document,s=r.createElement("script"),l=r.getElementsByTagName("script")[0],d=/^(complete|loaded)$/,c=!1;s.type="text/javascript",s.async=!0;var u,p=(u=location.href.match(/\bkxsrc=([^&]+)/))&&decodeURIComponent(u[1]);s.src=/^https?:\/\/([^\/]+\.)?krxd\.net(:\d{1,5})?\//i.test(p)?p:"disable"===p?"":("https:"===location.protocol?"https:":"http:")+"//cdn.krxd.net/controltag?confid="+e,s.onload=s.onreadystatechange=function(){c||"readyState"in s&&d.test(s.readyState)||(s.onload=s.onreadystatechange=null,c=!0,n())},l.parentNode.insertBefore(s,l)},window.Krux.setControlTag("ITb_4eqO")}(),!0===CNN.Features.enablePiiAdFilter&&function(){function e(){new RegExp(o);if(document.location.search){var e,t=document.location.search.search(o)+1;try{e=decodeURIComponent(document.location.search).search(o)+1}catch(n){e=t}return t||e}return!1}function t(){new RegExp(o);if(document.location.hash){var e,t=document.location.hash.search(o)+1;try{e=decodeURIComponent(document.location.hash).search(o)+1}catch(n){e=t}return t||e}return!1}function n(){new RegExp(o);if(document.referrer){var e,t=document.referrer.search(o)+1;try{e=decodeURIComponent(document.location.referrer).search(o)+1}catch(n){e=t}return t||e}return!1}function i(){if(e()||t()||n()){console.log("[AdFuelModule - PII Filter] Filtering DFP Request due to PII in query string.");for(var i=Object.getOwnPropertyNames(window.AdFuel),o=0;o<i.length;o++)window.AdFuel[i[o]]=function(){};window.googletag=null}}var o=/(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})/i;!function(){window.AdFuel?i():document.addEventListener?document.addEventListener("AdFuelCreated",i,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",i)}()}(),!0===CNN.Features.enableProximic&&function(){function e(e){var n=e||document.location.href;window.location.hostname.toLowerCase().match(/^train\.next\.cnn\.com/)&&n.replace("train.next.","www"),p="//segment-data-us-east.zqtk.net/turner-47fcf6?url="+encodeURIComponent(n),document.getElementById("proximic-script"),g=!1,t(),l=0,o()}function t(){if(!g){var e=document.createElement("script");e.id="proximic-script",e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https:":"http:")+p;document.getElementsByTagName("script")[0].parentNode.appendChild(e),v("Added Proximic script to head of page.",p),g=!0}}function n(e,t){""!==e&&void 0!==e&&(v("Setting data for DFP",e),window.AdFuel.addPageLevelTarget("pconid",e),window.AdFuel.removePageLevelTarget("prx_to","1"),window.AdFuel.addPageLevelTarget("prx_to","0"),s.addMetric({type:"modules",id:"Proximic",data:{targeting:{pconid:e}}}),t&&t())}function i(e,n){var i,a,r=!0;try{for(document.location.hostname.indexOf("money")>=0&&(!window.CNNMONEY||!window.CNNMONEY.adTargets||!window.CNNMONEY.adTargets.c_type||["article","video","gallery"].indexOf(window.CNNMONEY.adTargets.c_type)<0)&&(r=!1),a=1;a<e.length;a++){if(i=e[a].rktr_ad_id.toLowerCase(),i.search(/^cnn\/(homepage|(.+\/landing))/)<0&&i.search(/^cnni\/(homepage|(.+\/(landing|main)))/)<0&&r){v("Adding Proximic based on ad unit specifications: ",i),t(),o(n);break}v("Filtering Proximic based on ad unit specifications: ",i)}}catch(e){v("Error parsing Proximic data: ",e.message||"Unknown")}}function o(e){v("Waiting for data..."),setTimeout(function(){l++,v("SegmentData: ",f),""!==f&&void 0!==f?(v("Proximic Data found!"),n(f,e)):l*d<c?o(e):(v("Proximic Timeout Occurred!"),window.AdFuel.addPageLevelTarget("prx_to","1"),e&&e())},d)}function a(){s=window.AdFuel.registerModule("Proximic",{postQueueCallback:i}),window.AdFuel.addPageLevelTarget("prx_to","1")}var r=function(){return!1},s={addMetric:r,getMetricById:r,getMetricsByType:r,getMetricTypes:r},l=0,d=50,c=2e3,u=document.location.href;window.location.hostname.toLowerCase().match(/^train\.next\.cnn\.com/)&&u.replace(/^http[s]?:\/\/(train|stage|sweet)(\.next)?\.cnn\.com/,"$1www");var p="//segment-data-us-east.zqtk.net/turner-47fcf6?url="+encodeURIComponent(u),f="",h=Object.prototype,m=h.toString,g=!1;window.proximicData=[];var v=function(){};(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===m.call(e)}(window.console.log)&&"true"==function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);return i?i[1]:""}return""}("debug")&&(v=function(){var e=["[AdFuelModule - Proximic/comScore]"];e.push.apply(e,arguments),window.console.log.apply(window.console,e)}),window.gotSegmentData=function(e){e.data&&(v("Segment Data: ",e.data),f=e.data,window.proximicData=e.data)},window.recallProximic=e,function(){window.AdFuel?a():document.addEventListener?document.addEventListener("AdFuelCreated",a,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",a)}()}(),function(){var e=function(){return!1},t={addMetric:e,getMetricById:e,getMetricsByType:e,getMetricTypes:e};window.cnnad_transactionID=null,window.cnnad_getTransactionID=function(){return window.cnnad_transactionID||(window.cnnad_transactionID=Math.round((new Date).getTime()/1e3)+""+Math.floor(9007199254740992*Math.random())),window.cnnad_transactionID},window.turner_getTransactionId=window.cnnad_getTransactionID,window.turner_getTransactionId(),function(){function e(){var e=window.turner_getTransactionId();t=AdFuel.registerModule("Transaction Id",{}),t.addMetric({type:"modules",id:"Transaction Id",data:{targeting:{transId:e}}}),window.AdFuel.addPageLevelTarget("transId",e)}var n=Object.prototype,i=n.toString;(function(e){var t=typeof e;return"function"===t||"object"===t&&!!e})(window.console)&&function(e){return"[object Function]"===i.call(e)}(window.console.log)&&function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t);if(document.location.search){var i=n.exec(document.location.search);i&&i[1]}}("debug"),window.AdFuel?e():document.addEventListener?document.addEventListener("AdFuelCreated",e,!0):document.attachEvent&&document.attachEvent("onAdFuelCreated",e)}()}()),function(){if(!window.Aspen){var VERSION="1.8.0",debug=-1!==[window.location.search,window.location.hash].join().search(/\bdmtdebug\b/),Class=function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,n=function(){};return n.extend=function(n){function i(){!e&&this.init&&this.init.apply(this,arguments)}var o=this.prototype;e=!0;var a=new this;e=!1;for(var r in n)a[r]="function"==typeof n[r]&&"function"==typeof o[r]&&t.test(n[r])?function(e,t){return function(){var n=this._super;this._super=o[e];var i=t.apply(this,arguments);return this._super=n,i}}(r,n[r]):n[r];return i.prototype=a,i.constructor=i,i.extend=arguments.callee,i},n}();!function(e,t,n){function i(){var e=p;return e.loader={load:o,i:0},e}function o(e,t,n){var i="c"==t?S:A;return y=0,t=t||"j",k(e)?a(i,e,t,this.i++,f,n):(v.splice(this.i++,0,e),1==v.length&&r()),this}function a(e,n,i,o,a,s){function l(){!f&&c(u.readyState)&&(g.r=f=1,!y&&d(),u.onload=u.onreadystatechange=null,h(function(){b.removeChild(u)},0))}var u=t.createElement(e),f=0,g={t:i,s:n,e:s};u.src=u.data=n,!_&&(u.style.display="none"),u.width=u.height="0","object"!=e&&(u.type=i),u.onload=u.onreadystatechange=l,"img"==e?u.onerror=l:"script"==e&&(u.onerror=function(){g.e=g.r=1,r()}),v.splice(o,0,g),b.insertBefore(u,_?null:m),h(function(){f||(b.removeChild(u),g.r=g.e=f=1,d())},p.errorTimeout)}function r(){var e=v.shift();y=1,e?e.t?h(function(){"c"==e.t?s(e):l(e)},0):(e(),d()):y=0}function s(e){var n,i=t.createElement("link");if(i.href=e.s,i.rel="stylesheet",i.type="text/css",e.e||!x&&!w)i.onload=function(){n||(n=1,h(function(){d()},0))},e.e&&i.onload();else{var o=function(e){h(function(){if(!n)try{e.sheet.cssRules.length?(n=1,d()):o(e)}catch(t){1e3==t.code||"security"==t.message||"denied"==t.message?(n=1,h(function(){d()},0)):o(e)}},0)};o(i)}h(function(){n||(n=1,d())},p.errorTimeout),!e.e&&m.parentNode.insertBefore(i,m)}function l(e){var n,i=t.createElement("script");i.src=e.s,i.onreadystatechange=i.onload=function(){!n&&c(i.readyState)&&(n=1,d(),i.onload=i.onreadystatechange=null)},h(function(){n||(n=1,d())},p.errorTimeout),e.e?i.onload():m.parentNode.insertBefore(i,m)}function d(){for(var e=1,t=-1;v.length-++t&&(!v[t].s||(e=v[t].r)););e&&r()}function c(e){return!e||"loaded"==e||"complete"==e}var u,p,f=t.documentElement,h=e.setTimeout,m=t.getElementsByTagName("script")[0],g={}.toString,v=[],y=0,w="MozAppearance"in f.style,_=w&&!!t.createRange().compareNode,b=_?f:m.parentNode,C=e.opera&&"[object Opera]"==g.call(e.opera),x="webkitAppearance"in f.style,E=x&&"async"in t.createElement("script"),A=w?"object":C||E?"img":"script",S=x?"img":A,N=Array.isArray||function(e){return"[object Array]"==g.call(e)},T=function(e){return Object(e)===e},k=function(e){return"string"==typeof e},I=function(e){return"[object Function]"==g.call(e)},F=[],O={};p=function(e){function t(e,t){function n(e){if(k(e))o(e,l,t,0,a);else if(T(e))for(i in e)e.hasOwnProperty(i)&&o(e[i],l,t,i,a)}var i,a=!!e.test,r=a?e.yep:e.nope,s=e.load||e.both,l=e.callback;n(r),n(s),e.complete&&t.load(e.complete)}function o(e,t,o,r,s){var l=a(e),d=l.autoCallback;if(!l.bypass){if(t&&(t=I(t)?t:t[e]||t[r]||t[e.split("/").pop().split("?")[0]]),l.instead)return l.instead(e,t,o,r,s);o.load(l.url,l.forceCSS||!l.forceJS&&/css$/.test(l.url)?"c":n,l.noexec),(I(t)||I(d))&&o.load(function(){i(),t&&t(l.origUrl,s,r),d&&d(l.origUrl,s,r)})}}function a(e){var t,n,i=e.split("!"),o=F.length,a=i.pop(),r=i.length,s={url:a,origUrl:a,prefixes:i};for(n=0;n<r;n++)(t=O[i[n]])&&(s=t(s));for(n=0;n<o;n++)s=F[n](s);return s}var r,s,l=this.yepnope.loader;if(k(e))o(e,0,l,0);else if(N(e))for(r=0;r<e.length;r++)s=e[r],k(s)?o(s,0,l,0):N(s)?p(s):T(s)&&t(s,l);else T(e)&&t(e,l)},p.addPrefix=function(e,t){O[e]=t},p.addFilter=function(e){F.push(e)},p.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",u=function(){t.removeEventListener("DOMContentLoaded",u,0),t.readyState="complete"},0)),e.yepnope=i()}(this,this.document);var Ajax={requestMap:{},jsonpRegistry:{},_counter:0,request:function(e){e=Utils.extend({timeout:5e3,maxRetries:0},e||{}),e.tries=0,this._sendRequest(e)},_sendRequest:function(e){var t=this,n=this._createCallback(e),i=this._createScript(n);if(!i)return Utils.log("JSONP - unable to create script for request ",e.url),!1;i.src=e.url,e.timeout&&setTimeout(function(){t._onError(n,e)},e.timeout)},_onSuccess:function(id,obj,data){this.requestMap[id]&&(this._destroyRequest(id,obj),Utils.isString(data)&&(data=eval("("+data+")")),obj.success&&obj.success(data))},_onError:function(e,t){if(this.requestMap[e]){if(this._destroyRequest(e,t),t.tries++,t.maxRetries&&t.tries<t.maxRetries)return Utils.log("Request failed - resending"),void this._sendRequest(t);t.error&&t.error(t.url)}},_destroyRequest:function(e,t){if(t.jsonpCallback){if(!this._removeNameFromRegistry(t.jsonpCallback))try{delete window[t.jsonpCallback]}catch(e){window[t.jsonpCallback]=void 0}}delete this.requestMap[e];var n=document.getElementById(this._getScriptName(e));n&&(n.parentNode.removeChild(n),n=null)},_createScript:function(e){var t=document.getElementsByTagName("head")[0];if(!t)return!1;var n=document.createElement("script");return n.type="text/javascript",e&&(n.id=this._getScriptName(e)),t.appendChild(n),n},_getScriptName:function(e){return"aspen_jsonp_"+e},_createCallback:function(e){var t=this;if(Utils.empty(e.jsonpCallback))return null;this._counter++;var n="request_"+this._counter;this.requestMap[n]=function(i){t._onSuccess(n,e,i)};this._addNameToRegistry(e.jsonpCallback);return window[e.jsonpCallback]=function(e){t.requestMap[n](e)},n},_addNameToRegistry:function(e){var t=this.jsonpRegistry;return t[e]?t[e]+=1:t[e]=1,t[e]},_removeNameFromRegistry:function(e){var t=this.jsonpRegistry;return t[e]&&(t[e]-=1,0===t[e]&&delete t[e]),t[e]}},BatchService=Class.extend({init:function(e){this._enabled=!1,this._queue=[],this._config=e,this._timer,this._firstPostTimer},start:function(e){if(this._config=e,this._enabled=!0,_analyticsConfig.batchMode==BATCH_MODE_TIMER){Utils.log("[aspen]","start timer");var t=this;this._timer=setTimeout(function(){t._postTimerEvent()},1e3*Number(_analyticsConfig.batchModeAmount));var n=Math.ceil(Math.random()*Number(_analyticsConfig.batchModeAmount));n==Number(_analyticsConfig.batchModeAmount)&&--n<=0&&(n=.5),Utils.log("[aspen]","random time: "+n),this._firstPostTimer=setTimeout(function(){t._firstPostTimerEvent()},1e3*n)}},add:function(e){if(this._addToQueue(e),!this._enabled)return void Utils.log("[aspen]","Batch service not enabled. Queuing message.");_analyticsConfig.enabled&&!this._config.batchThrottled?(_analyticsConfig.batchMode==BATCH_MODE_TOTAL?this._queue.length==_analyticsConfig.batchModeAmount&&this.post():_analyticsConfig.batchMode==BATCH_MODE_NONE?this.post():_analyticsConfig.batchMode!=BATCH_MODE_TIMER&&this.post(),this._queue.length>0&&("error"==e.eventType&&void 0!==_analyticsConfig.highPriorityErrors?this.flushByError(e.eventData):"error"!=e.eventType&&void 0!==_analyticsConfig.highPriorityEvents&&this.flushByEvent(e.eventType))):(_analyticsConfig.enabled&&Utils.log("[aspen]","Aspen is diabled via analyticsConfig. Message not added."),this._config.batchThrottled&&Utils.log("[aspen]","Batching is throttled. Message not added."))},_addToQueue:function(e){Utils.log("[aspen]","Adding message to batch queue."),this._queue.push(e)},post:function(){if(this._config.postThrottled)Utils.log("[aspen]","Batch posting is throttled. Batch not posted.");else{var e={sessionId:this._config.sessionId,events:this._queue};if(Utils.log("[aspen]","send batch string"),"gzip"==_analyticsConfig.batchContentEncoding){var t="?aspenJson="+JSON.stringify(e);e=encodeURIComponent(t).replace(/%20/g,"+")}TransportManager.createRequest(_analyticsConfig.batchApi,e,this._postSuccess,this._postFailure,this),this._queue=[]}},_postTimerEvent:function(){Utils.log("[aspen]","postTimer - queue.length: "+this._queue.length),this._queue.length>0?(Utils.log("[aspen]","posting "+this._queue.length+" messages"),this.post()):Utils.log("[aspen]","no messages to post");var e=this;this._timer=setTimeout(function(){e._postTimerEvent()},1e3*Number(_analyticsConfig.batchModeAmount))},_firstPostTimerEvent:function(){Utils.log("[aspen]","firstPostTimer - queue.length: "+this._queue.length),this._queue.length>0?(Utils.log("[aspen]","posting "+this._queue.length+" messages"),this.post()):Utils.log("[aspen]","no messages to post")},_postSuccess:function(e){Utils.log("[aspen]","post success: "+e)},_postFailure:function(e){Utils.log("[aspen]","post failed: "+e)},flushByError:function(e){if(void 0!==e.errorCode){var t=e.errorCode,n=t.substring(0,2),i=t.substring(2,4),o=t.substring(4,6),a=t.substring(6),r=[];r=_analyticsConfig.highPriorityErrors.split(",");for(var s="",l="",d="",c="",u=[],p=[],f=[],h=[],m=0,g=r.length;m<g;++m)switch(m){case 0:s=String(r[m]),u=s.split("+");break;case 1:l=String(r[m]),p=l.split("+");break;case 2:d=String(r[m]),f=d.split("+");break;case 3:c=String(r[m]),h=c.split("+")}for(m=0,g=u.length;m<g;++m){var v=String(u[m]);if(n==v||"*"==v)for(var y=0,w=p.length;y<w;++y){var _=String(p[y]);if(i==_||"*"==_)for(var b=0,C=f.length;b<C;++b){var x=String(f[b]);if(o==x||"*"==x)for(var E=0,A=h.length;E<A;++E){var S=String(h[E]);a!=S&&"*"!=S||(Utils.log("[aspen","[flushByError] found match, flushing batch"),this.post())}}}}}},flushByEvent:function(e){for(var t=_analyticsConfig.highPriorityEvents.split(","),n=0,i=t.length;n<i;++n){String(t[n])==e&&(Utils.log("[aspen]","[flushBatchByEvent] found match, flushing batch"),this.post())}},setSessionId:function(e){this._config.sessionId=e},setBatchThrottled:function(e){this._config.batchThrottled=e},setPostThrottled:function(e){this._config.postThrottled=e},disableTimer:function(){_analyticsConfig.batchMode==BATCH_MODE_TIMER&&clearTimeout(this._timer)}}),LoadState={WAITING:"loadStateWaiting",LOADING:"loadStateLoading",READY:"loadStateReady",FAILED:"loadStateFailed"},Aspen=window.Aspen={init:function(e,t){var n=this;if(Utils.undef(this.initialized))if(this.initialized=!0,this.ready=!1,this.batchService,this._isThrottled=!0,this.sessionId=-1,this._messageExcludes=[],this.timeDifference=0,this._shortId="",this._retryTimer,this._retries=0,this._retryTime=0,this._savedSession={},this._timestampStr="",this.sessionToken="",this._appName="",this._transportFormats=[],this._transportFormat="",this._transportFormatIndex=0,this._messageQueue=[],this.config={},this._loadState=LoadState.WAITING,this._configUrl="",this._configLoaded=!1,this._appInitCallback=t,_params=this._options=e,this._appName=_params.appName=_params&&_params.appName,_params.appVersion=_params&&_params.appVersion,_params.site=_params&&_params.site,_params.context=_params&&_params.context,_params.configBaseUrl=_params&&_params.configBaseUrl,_params.platform=_params&&_params.platform,_params.platformVersion=_params&&_params.platformVersion,
Utils.empty(_params.appName))Utils.log("[aspen]","Unable to start Aspen, no appName provided");else if(Utils.empty(_params.site))Utils.log("[aspen]","Unable to start Aspen, no site provided");else{var i={};i.batchThrottled=!0,i.postThrottled=!0,this.batchService=new BatchService(i),this._loadState=LoadState.LOADING;var o=new DependencyManager;o.add(new Dependency(Utils.bind(n._loadConfigFile,n))),o.add(new Dependency(Utils.bind(n._loadRequiredJS,n))),o.onComplete(Utils.bind(n._onDependenciesLoaded,n)),o.onFailure(Utils.bind(n._onDependenciesLoadFailure,n)),o.load()}},_loadConfigFile:function(e,t){var n=_params.configBaseUrl;Utils.isNull(n)&&(n=ANALYTICS_BASE_URL+_params.appName+"/"+_params.site+"/"),Utils.log("[aspen]","Using config base path: "+n),this._configUrl=n+ANALYTICS_FILE+"?_="+Utils.timeBucket(15),Ajax.request({jsonpCallback:"aspen_onAnalyticsConfigReceived",url:this._configUrl,success:Utils.bind(this._loadConfigSuccess,this,e),error:Utils.bind(this._loadConfigFailure,this,t)})},_loadConfigSuccess:function(e,t){Utils.log("[aspen]","Config loaded successfully"),_analyticsConfig=Utils.extend(Utils.extend({},t.default||{}),t[_params.context]||{}),this.config=_analyticsConfig,Utils.undef(_analyticsConfig.batchMode)&&(_analyticsConfig.batchMode="total"),Utils.undef(_analyticsConfig.batchModeAmount)&&(_analyticsConfig.batchModeAmount="10"),Utils.undef(_analyticsConfig.helloRetryCount)&&(_analyticsConfig.helloRetryCount="5"),Utils.undef(_analyticsConfig.helloRetryTime)&&(_analyticsConfig.helloRetryTime="10000"),Utils.undef(_analyticsConfig.batchContentEncoding)&&(_analyticsConfig.batchContentEncoding="json"),Utils.undef(_analyticsConfig.aspenUserIdEnabled)&&(_analyticsConfig.aspenUserIdEnabled=!0),Utils.undef(_analyticsConfig.aspenUserIdHash)&&(_analyticsConfig.aspenUserIdHash="392aspenUID392"),Utils.undef(_analyticsConfig.transportFormats)?this._transportFormats.push(TransportFormat.JSONP):this._transportFormats=_analyticsConfig.transportFormats.split(","),this._transportFormat=this._transportFormats[this._transportFormatIndex],Utils.undef(_analyticsConfig.messageExcludes)?this._messageExcludes=[]:this._messageExcludes=_analyticsConfig.messageExcludes.split(",");var n={};n.transportFormats=this._transportFormats,n.servicesUrl=_analyticsConfig.servicesUrl,TransportManager.init(n),Utils.log("[aspen]","batchMode: ",_analyticsConfig.batchMode),Utils.log("[aspen]","batchModeAmount: ",_analyticsConfig.batchModeAmount),Utils.log("[aspen]","helloRetryCount: ",_analyticsConfig.helloRetryCount),Utils.log("[aspen]","helloRetryTime: ",_analyticsConfig.helloRetryTime),Utils.log("[aspen]","transportFormat: ",this._transportFormat),e&&e()},_loadConfigFailure:function(e,t){Utils.log("[aspen]","Config failed to load",t),e&&e()},_loadRequiredJS:function(e,t){var n=this;null!=window.JSON?this._loadRequiredJSSuccess(e):yepnope({load:"https://z.cdn.turner.com/xslo/cvp/easyxdm/js/json2.ugly.js",complete:function(){if(!window.JSON)return void n._loadRequiredJSFailure(t);n._loadRequiredJSSuccess(e)}})},_loadRequiredJSSuccess:function(e){Utils.log("[aspen]","External JS dependencies loaded successfully"),e&&e()},_loadRequiredJSFailure:function(e){Utils.log("[aspen]","External JS dependencies failed to load"),e&&e()},_onDependenciesLoaded:function(){this._loadState=LoadState.READY,Utils.log("[aspen]","_onDependenciesLoaded - all required dependencies successfully loaded."),Utils.undef(_analyticsConfig.enabled)||"true"!==_analyticsConfig.enabled?(Utils.log("[aspen]","analytics disabled via config"),this._initFailure()):(Utils.log("[aspen]","analytics enabled via config"),Utils.undef(_analyticsConfig.servicesUrl)||this._hello())},_onDependenciesLoadFailure:function(){this._loadState=LoadState.FAILED,Utils.log("[aspen]","_onDependenciesLoadFailure - one or more required dependencies failed to load.")},_hello:function(){Utils.log("[aspen]","hello");var e=Utils.getQueryVar("sessionToken");Utils.log("[aspen]","check querySessionToken: ",e),Utils.empty(e)||(this.sessionToken=e,this.send("authSessionReload",{}));var t={propertyName:_params.site,applicationName:_params.appName,applicationVersion:_params.appVersion,deviceType:"Javascript",deviceModel:"Javascript",deviceVersion:"Javascript",library:"Javascript",libraryVersion:"1.8.0",platformName:Utils.empty(_params.platform)?"Javascript":_params.platform,platformVersion:Utils.empty(_params.platformVersion)?"1.8.0":_params.platformVersion,aspenConfigUrl:this._configUrl,protocol:"1.0",pageUrl:document.URL};t=Utils.extend(t,this._options),_analyticsConfig.aspenUserIdEnabled&&(t.aspenUUIDToken=_analyticsConfig.aspenUserIdHash),Utils.empty(this.sessionToken)||(t.sessionToken=this.sessionToken),TransportManager.bootstrapTM(),TransportManager.createRequest(_analyticsConfig.helloApi,t,this._helloSuccess,this._helloFailure,this),this._retryTimer=setTimeout(Utils.bind(this._helloRetry,this),Number(_analyticsConfig.helloRetryTime)),this._isRetrying=!0},_helloSuccess:function(e){Utils.log("[aspen]","_helloSuccess"),clearTimeout(this._retryTimer),this._isThrottled=void 0!==e.throttled&&"no"!==e.throttled||this._isThrottled,this.sessionId=void 0!==e.sessionId?e.sessionId:this.sessionId,this._shortId=void 0!==e.shortId?e.shortId:this._shortId,this._timestampStr=void 0!==e.timestamp?e.timestamp:this.timeDifference,this.timeDifference=Number(this._timestampStr)-Utils.now(),"no"===e.throttled&&(this._isThrottled=!1),Utils.log("[aspen]","_helloSuccess"),Utils.log("[aspen]","config.throttled: "+e.throttled),Utils.log("[aspen]","throttled: "+this._isThrottled),Utils.log("[aspen]","sessionId: "+this.sessionId);var t={};t.batchThrottled=!1,t.postThrottled=!0,t.sessionId="",this.batchService.start(t),this.batchService.setSessionId(this.sessionId),this.batchService.setPostThrottled(this._isThrottled),this._initSuccess()},_helloFailure:function(e){Utils.log("[aspen]","_helloFailure url: "+e),TransportManager.fallback()&&this._hello()},_helloRetry:function(){Utils.log("[aspen]","helloRetry"),this._retries==_analyticsConfig.helloRetryCount?(Utils.log("[aspen]","retries exhasted"),clearTimeout(this._retryTimer),this._retries=0,1==TransportManager.fallback()?this._hello():(Utils.log("[aspen]","retries exhasted, fallbacks exhausted, aspen is disabled"),this._isThrottled=!0,this.batchService.setBatchThrottled(!0),this.batchService.setPostThrottled(!0),this.batchService.disableTimer())):(this._retries++,this._retryTime=this._retries*Number(_analyticsConfig.helloRetryTime),this._savedSession.retries=String(this._retries),this._savedSession.retryTime=String(this._retryTime),this._hello())},isMessageExcluded:function(e){return!!(_analyticsConfig&&_analyticsConfig.messageExcludes&&_analyticsConfig.messageExcludes.indexOf(e)>=0)},send:function(e,t,n){if(void 0===this._messageExcludes||-1===this._messageExcludes.indexOf(e)){if(void 0===t&&(t={}),!this.ready)return Utils.log("[aspen]","send - Aspen's not ready, queuing message"),void(void 0!==this._messageQueue&&this._messageQueue.push({message:t,type:e,appName:n}));if(this._isThrottled)Utils.log("[aspen]","Add message to batch is throttled! Message not added.");else{if(this.isMessageExcluded(e))return void Utils.log("[aspen]","message excluded by config, not added to batch",e);t.timestamp=Utils.now()+this.timeDifference,t.applicationName=void 0!==n?n:this._appName,delete t.session_id,delete t.sessionId,delete t.hbase_timestamp,delete t.type,Utils.log("[aspen]","appName: "+t.applicationName);var i={};i.eventType=e,i.eventData=t,Utils.log("[aspen]","add to batch json message: "+JSON.stringify(i)),this.batchService.add(i)}}},setSessionToken:function(e){this.sessionToken=e},_initSuccess:function(){this.ready=!0;for(var e=0,t=this._messageQueue.length;e<t;e++)this.send(this._messageQueue[e].type,this._messageQueue[e].message);this.send("aspenConfigDetails",_analyticsConfig);var n={};n.screenWidth=screen.width,n.screenHeight=screen.height,n.browserName=navigator.appName,n.userAgent=navigator.userAgent,n.platform=navigator.platform,this.send("systemInfo",n),this._initSuccess=function(){},this._appInitCallback&&this._appInitCallback()},_initFailure:function(){},getVersion:function(){return"1.8.0"},getSessionId:function(e){return this.sessionId},getShortId:function(e){return this._shortId},isThrottled:function(e){return this._isThrottled},getThrottled:function(e){return this._isThrottled?"yes":"no"}},DependencyManager=function(){this._dependencies=[],this._loadedCount=0,this._successHandlers=[],this._failureHandlers=[],this.add=function(e){this._dependencies.push({dependency:e,success:!1});var t=this._dependencies.length-1;e.onComplete(Utils.bind(this._onDependencyLoaded,this,t,!0)),e.onFailure(Utils.bind(this._onDependencyLoaded,this,t,!1))},this.load=function(){for(var e=0,t=this._dependencies.length;e<t;e++)this._dependencies[e].dependency.load()},this.onComplete=function(e){this._successHandlers.push(e)},this.onFailure=function(e){this._failureHandlers.push(e)},this._onDependencyLoaded=function(e,t){++this._loadedCount,this._dependencies[e].success=t,this._loadedCount===this._dependencies.length&&this._onAllDependenciesLoaded()},this._onAllDependenciesLoaded=function(){this._loadedCount=0;for(var e=!0,t=0,n=this._dependencies.length;t<n;t++)if(!this._dependencies[t].success){e=!1;break}var i=e?this._successHandlers:this._failureHandlers;for(t=0,n=i.length;t<n;t++)i[t]()}},Dependency=function(e){this._func=e,this._successHandlers=[],this._failureHandlers=[],this.load=function(){this._func(Utils.bind(this._onSuccess,this),Utils.bind(this._onFailure,this))},this.onComplete=function(e){this._successHandlers.push(e)},this.onFailure=function(e){this._failureHandlers.push(e)},this._onSuccess=function(){for(var e=0,t=this._successHandlers.length;e<t;e++)this._successHandlers[e]()},this._onFailure=function(){for(var e=0,t=this._failureHandlers.length;e<t;e++)this._failureHandlers[e]()}},AspenComm=function(){var e,t,n,i,o,a,r="https://aspen.turner.com",s=!1,l=[];return t=function(i){Utils.log("[aspen]","[easyXDM]","init",i),r=i,e=new window.CVPAux.easyXDM.Rpc({swf:"https://z.cdn.turner.com/xslo/cvp/easyxdm/swf/easyxdm.swf",remote:r+"/static/xdm_iframe.html"},{remote:{request:{}}}),Utils.log("[aspen]","[easyXDM]","init AspenComm"),s=!0,t=function(){try{throw"already init'ed - ignored"}catch(e){}},n()},i=function(e,t,n){s?a(e,t,n):o(e,t,n)},o=function(){l.push(arguments)},n=function(){for(var e=0,t=l.length;e<t;++e)a.apply(null,l[e])},a=function(t,n,i){Utils.log("[aspen]","[easyXDM]","make request",t);var o,a,r;o=Utils.extend(Utils.extend({method:"POST"},t||{})),a=function(e){var t=e.data;if("string"==typeof t&&t.charAt(0).match(/[{[]/))try{t=JSON.parse(t)}catch(e){Utils.log(e)}Utils.log("[aspen]","[easyXDM]","request success",e),n(t,e.status,e.headers)},r=function(e){var t=e.data;if("string"==typeof t&&t.charAt(0).match(/[{[]/))try{t=JSON.parse(t)}catch(e){Utils.log(e)}i(t,e.status,e.message)},e.request(o,a,r)},{init:t,request:i}}(),bootstrap=function(e){Utils.log("[aspen]","[easyXDM]","bootstrap",e),window.CVPAux=window.CVPAux||{},yepnope({test:null!=window.CVPAux.easyXDM,nope:"https://z.cdn.turner.com/xslo/cvp/easyxdm/js/easyXDM.ugly.js",complete:function(){if(window.easyXDM)window.CVPAux.easyXDM=easyXDM.noConflict("CVPAux"),yepnope({test:null!=window.JSON,nope:"https://z.cdn.turner.com/xslo/cvp/easyxdm/js/json2.ugly.js",complete:function(){if(!window.JSON)try{throw"failed to install JSON polyfill"}catch(e){}e()}});else try{throw"failed to install easyXDM"}catch(e){}}})},ANALYTICS_BASE_URL="https://z.cdn.turner.com/xslo/aspen/config/",ANALYTICS_FILE="aspenanalytics.json",BATCH_MODE_TOTAL="total",BATCH_MODE_TIMER="timer",BATCH_MODE_NONE="none",_params={},_analyticsConfig={},TransportFormat={JSON:"json",JSONP:"jsonp"},TransportManager={init:function(e){this._config=e,this._transportFormat=this._config.transportFormats[0],this._bootstrapped=!1},bootstrapTM:function(){if(Utils.log("[aspen]","TransportManager","bootstrap","_bootstrapped:",this._bootstrapped),this._transportFormat===TransportFormat.JSON&&!this._bootstrapped){var e=this._config.servicesUrl;bootstrap(function(){AspenComm.init(e)}),this._bootstrapped=!0,Utils.log("[aspen]","TransportManager","bootstrap","transportFormat",this._transportFormat)}},createRequest:function(e,t,n,i,o){if(Utils.log("[aspen]","TransportManager","createRequest"),this._transportFormat===TransportFormat.JSON)AspenComm.request({url:e+"."+this._transportFormat,data:{aspenJson:JSON.stringify(t)}},Utils.bind(n,o),Utils.bind(i,o));else if(this._transportFormat===TransportFormat.JSONP){var a=this._config.servicesUrl+e+"."+this._transportFormat;a+="?aspen_callback=parseAspenInitialization&aspenJson="+encodeURIComponent(JSON.stringify(t)).replace(/%20/g,"+"),Ajax.request({jsonpCallback:"parseAspenInitialization",url:a,error:Utils.bind(i,o),success:Utils.bind(n,o)})}},fallback:function(){return Utils.log("[aspen]","current transport format failed",this._transportFormat),this._config.transportFormats.shift(),this._config.transportFormats.length>0&&(this._transportFormat=this._config.transportFormats[0],Utils.log("trying next transport format",this._transportFormat),!0)}},Utils={undef:function(e){return void 0===e},isNull:function(e){return Utils.undef(e)||null===e},empty:function(e){return Utils.undef(e)||Utils.isNull(e)||""===e},isFunc:function(e){return"function"==typeof e},isObject:function(e){return"object"==typeof e},isString:function(e){return"string"==typeof e},extend:function(e,t){var n;e||(e={});for(n in t)e[n]=t[n];return e},log:function(){window.console&&window.console.log&&debug&&window.console.log(Utils.slice(arguments).join(" | ")),!Utils.undef(window.logJSAuth)&&Utils.isFunc(window.logJSAuth)&&debug&&window.logJSpAuth(Utils.slice(arguments).join(" | "))},now:"function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},slice:function(e,t){return Array.prototype.slice.call(e,t||0)},bind:function(e,t){var n=Utils.slice(arguments,2);return function(){var i=n.concat(Utils.slice(arguments));return e.apply(t,i)}},setCookie:function(e,t,n){var i=new Date;i.setDate(i.getDate()+n);var o=escape(t)+(null==n?"":"; expires="+i.toUTCString());document.cookie=e+"="+o},getCookie:function(e){var t,n,i,o=document.cookie.split(";");for(t=0;t<o.length;t++)if(n=o[t].substr(0,o[t].indexOf("=")),i=o[t].substr(o[t].indexOf("=")+1),(n=n.replace(/^\s+|\s+$/g,""))==e)return unescape(i)},getQueryVar:function(e){for(var t=window.location.search.substring(1),n=t.split("&"),i=0;i<n.length;i++){var o=n[i].split("=");if(o[0]==e)return o[1]}},randomString:function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));for(var n="",i=0;i<e;i++)n+=t[Math.floor(Math.random()*t.length)];return n},timeBucket:function(e){var t=new Date,n=60*(24*t.getDate()+t.getHours())+t.getMinutes();return Math.round(n/e)}}}}.call(window),function(){!function(e){"use strict";function t(){return l&&l.call(s)||(new Date).getTime()}var n=[],i={},o={},a=function(){},r="-----";r+=r,r+=r,r+=r,r+=r;var s=window.performance,l=s&&(s.now||s.mozNow||s.msNow||s.oNow||s.webkitNow);e.log&&"function"==typeof e.log||(e.log=a),e.profile&&"function"==typeof e.profile||(e.profile=a),e.profileEnd&&"function"==typeof e.profileEnd||(e.profileEnd=a),e.timeStamp&&"function"==typeof e.timeStamp||(e.timeStamp=a),e.trace&&"function"==typeof e.trace||(e.trace=a),e.debug&&"function"==typeof e.debug||(e.debug=e.log),e.info&&"function"==typeof e.info||(e.info=e.log),e.warn&&"function"==typeof e.warn||(e.warn=e.log),e.error&&"function"==typeof e.error||(e.error=e.log),e.dir&&"function"==typeof e.dir||(e.dir=e.log),e.dirxml&&"function"==typeof e.dirxml||(e.dirxml=e.dir);!e.group&&(e.group=function(t){n.push(t),e.log(r+"\nBEGIN GROUP: "+t)}),!e.groupCollapsed&&(e.groupCollapsed=e.group),!e.groupEnd&&(e.groupEnd=function(){e.log("END GROUP: "+n.pop()+"\n"+r)}),!e.time&&(e.time=function(e){i[e]=t()}),!e.timeEnd&&(e.timeEnd=function(n){e.log(n+": "+(t()-i[n]).toFixed(3)+"ms"),delete i[n]}),!e.assert&&(e.assert=function(t,n){t||e.error("Assertion failed: "+n)}),!e.count&&(e.count=function(t){o[t]||(o[t]=0),o[t]++,e.log(t+": "+o[t])}),!e.clear&&(e.clear=function(){e.log("\n\n\n\n\n\n")})}(window.console=window.console||{}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}(),!window.addEventListener&&function(e,t,n,i,o,a,r){e[i]=t[i]=n[i]=function(e,t){var n=this;r.unshift([n,e,t,function(e){e.currentTarget=n,e.preventDefault=function(){e.returnValue=!1},e.stopPropagation=function(){e.cancelBubble=!0},e.target=e.srcElement||n,t.call(n,e)}]),this.attachEvent("on"+e,r[0][3])},e[o]=t[o]=n[o]=function(e,t){for(var n,i=0;n=r[i];++i)if(n[0]==this&&n[1]==e&&n[2]==t)return this.detachEvent("on"+e,r.splice(i,1)[0][3])},e[a]=t[a]=n[a]=function(e){return this.fireEvent("on"+e.type,e)}}(window.prototype,document.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null===this)throw new TypeError('"this" is null or not defined');var i=Object(this),o=i.length>>>0;if(0===o)return-1;var a=+t||0;if(Math.abs(a)===1/0&&(a=0),a>=o)return-1;for(n=Math.max(a>=0?a:o-Math.abs(a),0);o>n;){if(n in i&&i[n]===e)return n;n++}return-1}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})}(),function(){"use strict";var e=document,t=e.createElement("script"),n=e.getElementsByTagName("script")[0],i="https:"===document.location.protocol;t.type="text/javascript",t.src=(i?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js",n.parentNode.insertBefore(t,n)}(),function(){!function(){function e(){}function t(e){return e}function n(e){return!!e}function i(e){return!e}function o(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function a(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}function r(e){return j(e)||"number"==typeof e.length&&e.length>=0&&e.length%1==0}function s(e,t){for(var n=-1,i=e.length;++n<i;)t(e[n],n,e)}function l(e,t){for(var n=-1,i=e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}function d(e){return l(Array(e),function(e,t){return t})}function c(e,t,n){return s(e,function(e,i,o){n=t(n,e,i,o)}),n}function u(e,t){s(P(e),function(n){t(e[n],n)})}function p(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function f(e){var t,n,i=-1;return r(e)?(t=e.length,function(){return i++,t>i?i:null}):(n=P(e),t=n.length,function(){return i++,t>i?n[i]:null})}function h(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),o=0;n>o;o++)i[o]=arguments[o+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i)}}}function m(e){return function(t,n,i){return e(t,i)}}function g(t){return function(n,i,r){r=a(r||e),n=n||[];var s=f(n);if(0>=t)return r(null);var l=!1,d=0,c=!1;!function e(){if(l&&0>=d)return r(null);for(;t>d&&!c;){var a=s();if(null===a)return l=!0,void(0>=d&&r(null));d+=1,i(n[a],a,o(function(t){d-=1,t?(r(t),c=!0):e()}))}}()}}function v(e){return function(t,n,i){return e(R.eachOf,t,n,i)}}function y(e){return function(t,n,i,o){return e(g(n),t,i,o)}}function w(e){return function(t,n,i){return e(R.eachOfSeries,t,n,i)}}function _(t,n,i,o){o=a(o||e),n=n||[];var s=r(n)?[]:{};t(n,function(e,t,n){i(e,function(e,i){s[t]=i,n(e)})},function(e){o(e,s)})}function b(e,t,n,i){var o=[];e(t,function(e,t,i){n(e,function(n){n&&o.push({index:t,value:e}),i()})},function(){i(l(o.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function C(e,t,n,i){b(e,t,function(e,t){n(e,function(e){t(!e)})},i)}function x(e,t,n){return function(i,o,a,r){function s(){r&&r(n(!1,void 0))}function l(e,i,o){return r?void a(e,function(i){r&&t(i)&&(r(n(!0,e)),r=a=!1),o()}):o()}arguments.length>3?e(i,o,l,s):(r=a,a=o,e(i,l,s))}}function E(e,t){return t}function A(t,n,i){i=i||e;var o=r(n)?[]:{};t(n,function(e,t,n){e(h(function(e,i){i.length<=1&&(i=i[0]),o[t]=i,n(e)}))},function(e){i(e,o)})}function S(e,t,n,i){var o=[];e(t,function(e,t,i){n(e,function(e,t){o=o.concat(t||[]),i(e)})},function(e){i(e,o)})}function N(t,n,i){function a(t,n,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,j(n)||(n=[n]),0===n.length&&t.idle()?R.setImmediate(function(){t.drain()}):(s(n,function(n){var a={data:n,callback:o||e};i?t.tasks.unshift(a):t.tasks.push(a),t.tasks.length===t.concurrency&&t.saturated()}),void R.setImmediate(t.process))}function r(e,t){return function(){d-=1;var n=!1,i=arguments;s(t,function(e){s(c,function(t,i){t!==e||n||(c.splice(i,1),n=!0)}),e.callback.apply(e,i)}),e.tasks.length+d===0&&e.drain(),e.process()}}if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");var d=0,c=[],u={tasks:[],concurrency:n,payload:i,saturated:e,empty:e,drain:e,started:!1,paused:!1,push:function(e,t){a(u,e,!1,t)},kill:function(){u.drain=e,u.tasks=[]},unshift:function(e,t){a(u,e,!0,t)},process:function(){if(!u.paused&&d<u.concurrency&&u.tasks.length)for(;d<u.concurrency&&u.tasks.length;){var e=u.payload?u.tasks.splice(0,u.payload):u.tasks.splice(0,u.tasks.length),n=l(e,function(e){return e.data});0===u.tasks.length&&u.empty(),d+=1,c.push(e[0]);var i=o(r(u,e));t(n,i)}},length:function(){return u.tasks.length},running:function(){return d},workersList:function(){return c},idle:function(){return u.tasks.length+d===0},pause:function(){u.paused=!0},resume:function(){if(!1!==u.paused){u.paused=!1;for(var e=Math.min(u.concurrency,u.tasks.length),t=1;e>=t;t++)R.setImmediate(u.process)}}};return u}function T(e){return h(function(t,n){t.apply(null,n.concat([h(function(t,n){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&s(n,function(t){console[e](t)}))})]))})}function k(e){return function(t,n,i){e(d(t),n,i)}}function I(e){return h(function(t,n){var i=h(function(n){var i=this,o=n.pop();return e(t,function(e,t,o){e.apply(i,n.concat([o]))},o)});return n.length?i.apply(this,n):i})}function F(e){return h(function(t){var n=t.pop();t.push(function(){var e=arguments;i?R.setImmediate(function(){n.apply(null,e)}):n.apply(null,e)});var i=!0;e.apply(this,t),i=!1})}var O,R={},M="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=M&&(O=M.async),R.noConflict=function(){return M.async=O,R};var D=Object.prototype.toString,j=Array.isArray||function(e){return"[object Array]"===D.call(e)},B=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},P=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},L="function"==typeof setImmediate&&setImmediate,q=L?function(e){L(e)}:function(e){setTimeout(e,0)};"object"==typeof process&&"function"==typeof process.nextTick?R.nextTick=process.nextTick:R.nextTick=q,R.setImmediate=L?q:R.nextTick,R.forEach=R.each=function(e,t,n){return R.eachOf(e,m(t),n)},R.forEachSeries=R.eachSeries=function(e,t,n){return R.eachOfSeries(e,m(t),n)},R.forEachLimit=R.eachLimit=function(e,t,n,i){return g(t)(e,m(n),i)},R.forEachOf=R.eachOf=function(t,n,i){function r(e){d--,e?i(e):null===s&&0>=d&&i(null)}i=a(i||e),t=t||[];for(var s,l=f(t),d=0;null!=(s=l());)d+=1,n(t[s],s,o(r));0===d&&i(null)},R.forEachOfSeries=R.eachOfSeries=function(t,n,i){function r(){var e=!0;return null===l?i(null):(n(t[l],l,o(function(t){if(t)i(t);else{if(null===(l=s()))return i(null);e?R.setImmediate(r):r()}})),void(e=!1))}i=a(i||e),t=t||[];var s=f(t),l=s();r()},R.forEachOfLimit=R.eachOfLimit=function(e,t,n,i){g(t)(e,n,i)},R.map=v(_),R.mapSeries=w(_),R.mapLimit=y(_),R.inject=R.foldl=R.reduce=function(e,t,n,i){R.eachOfSeries(e,function(e,i,o){n(t,e,function(e,n){t=n,o(e)})},function(e){i(e,t)})},R.foldr=R.reduceRight=function(e,n,i,o){var a=l(e,t).reverse();R.reduce(a,n,i,o)},R.transform=function(e,t,n,i){3===arguments.length&&(i=n,n=t,t=j(e)?[]:{}),R.eachOf(e,function(e,i,o){n(t,e,i,o)},function(e){i(e,t)})},R.select=R.filter=v(b),R.selectLimit=R.filterLimit=y(b),R.selectSeries=R.filterSeries=w(b),R.reject=v(C),R.rejectLimit=y(C),R.rejectSeries=w(C),R.any=R.some=x(R.eachOf,n,t),R.someLimit=x(R.eachOfLimit,n,t),R.all=R.every=x(R.eachOf,i,i),R.everyLimit=x(R.eachOfLimit,i,i),R.detect=x(R.eachOf,t,E),R.detectSeries=x(R.eachOfSeries,t,E),R.detectLimit=x(R.eachOfLimit,t,E),R.sortBy=function(e,t,n){function i(e,t){var n=e.criteria,i=t.criteria;return i>n?-1:n>i?1:0}R.map(e,function(e,n){t(e,function(t,i){t?n(t):n(null,{value:e,criteria:i})})},function(e,t){return e?n(e):void n(null,l(t.sort(i),function(e){return e.value}))})},R.auto=function(t,n,i){function o(e){v.unshift(e)}function r(e){var t=p(v,e);t>=0&&v.splice(t,1)}function l(){f--,s(v.slice(0),function(e){e()})}i||(i=n,n=null),i=a(i||e);var d=P(t),f=d.length;if(!f)return i(null);n||(n=f);var m={},g=0,v=[];o(function(){f||i(null,m)}),s(d,function(e){function a(){return n>g&&c(y,function(e,t){return e&&m.hasOwnProperty(t)},!0)&&!m.hasOwnProperty(e)}function s(){a()&&(g++,r(s),f[f.length-1](v,m))}for(var d,f=j(t[e])?t[e]:[t[e]],v=h(function(t,n){if(g--,n.length<=1&&(n=n[0]),t){var o={};u(m,function(e,t){o[t]=e}),o[e]=n,i(t,o)}else m[e]=n,R.setImmediate(l)}),y=f.slice(0,f.length-1),w=y.length;w--;){if(!(d=t[y[w]]))throw new Error("Has inexistant dependency");if(j(d)&&p(d,e)>=0)throw new Error("Has cyclic dependencies")}a()?(g++,f[f.length-1](v,m)):o(s)})},R.retry=function(e,t,n){function i(e,t){for(;s.times;){var n=!(s.times-=1);r.push(function(e,n){return function(i){e(function(e,t){i(!e||n,{err:e,result:t})},t)}}(s.task,n)),!n&&s.interval>0&&r.push(function(e){return function(t){setTimeout(function(){t(null)},e)}}(s.interval))}R.series(r,function(t,n){n=n[n.length-1],(e||s.callback)(n.err,n.result)})}var o=5,a=0,r=[],s={times:o,interval:a},l=arguments.length;if(1>l||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=l&&"function"==typeof e&&(n=t,t=e),"function"!=typeof e&&function(e,t){if("number"==typeof t)e.times=parseInt(t,10)||o;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||o,e.interval=parseInt(t.interval,10)||a}}(s,e),s.callback=n,s.task=t,s.callback?i():i},R.waterfall=function(t,n){function i(e){return h(function(t,o){if(t)n.apply(null,[t].concat(o));else{var a=e.next();a?o.push(i(a)):o.push(n),F(e).apply(null,o)}})}if(n=a(n||e),!j(t)){var o=new Error("First argument to waterfall must be an array of functions");return n(o)}return t.length?void i(R.iterator(t))():n()},R.parallel=function(e,t){A(R.eachOf,e,t)},R.parallelLimit=function(e,t,n){A(g(t),e,n)},R.series=function(e,t){A(R.eachOfSeries,e,t)},R.iterator=function(e){function t(n){function i(){return e.length&&e[n].apply(null,arguments),i.next()}return i.next=function(){return n<e.length-1?t(n+1):null},i}return t(0)},R.apply=h(function(e,t){return h(function(n){return e.apply(null,t.concat(n))})}),R.concat=v(S),R.concatSeries=w(S),R.whilst=function(t,n,i){if(i=i||e,t()){var o=h(function(e,a){e?i(e):t.apply(this,a)?n(o):i(null)});n(o)}else i(null)},R.doWhilst=function(e,t,n){var i=0;return R.whilst(function(){return++i<=1||t.apply(this,arguments)},e,n)},R.until=function(e,t,n){return R.whilst(function(){return!e.apply(this,arguments)},t,n)},R.doUntil=function(e,t,n){return R.doWhilst(e,function(){return!t.apply(this,arguments)},n)},R.during=function(t,n,i){i=i||e;var o=h(function(e,n){e?i(e):(n.push(a),t.apply(this,n))}),a=function(e,t){e?i(e):t?n(o):i(null)};t(a)},R.doDuring=function(e,t,n){var i=0;R.during(function(e){i++<1?e(null,!0):t.apply(this,arguments)},e,n)},R.queue=function(e,t){return N(function(t,n){e(t[0],n)},t,1)},R.priorityQueue=function(t,n){function i(e,t){return e.priority-t.priority}function o(e,t,n){for(var i=-1,o=e.length-1;o>i;){var a=i+(o-i+1>>>1);n(t,e[a])>=0?i=a:o=a-1}return i}function a(t,n,a,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,j(n)||(n=[n]),0===n.length?R.setImmediate(function(){t.drain()}):void s(n,function(n){var s={data:n,priority:a,callback:"function"==typeof r?r:e};t.tasks.splice(o(t.tasks,s,i)+1,0,s),t.tasks.length===t.concurrency&&t.saturated(),R.setImmediate(t.process)})}var r=R.queue(t,n);return r.push=function(e,t,n){a(r,e,t,n)},delete r.unshift,r},R.cargo=function(e,t){return N(e,1,t)},R.log=T("log"),R.dir=T("dir"),R.memoize=function(e,n){var i={},o={};n=n||t;var a=h(function(t){var a=t.pop(),r=n.apply(null,t);r in i?R.setImmediate(function(){a.apply(null,i[r])}):r in o?o[r].push(a):(o[r]=[a],e.apply(null,t.concat([h(function(e){i[r]=e;var t=o[r];delete o[r];for(var n=0,a=t.length;a>n;n++)t[n].apply(null,e)})])))});return a.memo=i,a.unmemoized=e,a},R.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},R.times=k(R.map),R.timesSeries=k(R.mapSeries),R.timesLimit=function(e,t,n,i){return R.mapLimit(d(e),t,n,i)},R.seq=function(){var t=arguments;return h(function(n){var i=this,o=n[n.length-1];"function"==typeof o?n.pop():o=e,R.reduce(t,n,function(e,t,n){t.apply(i,e.concat([h(function(e,t){n(e,t)})]))},function(e,t){o.apply(i,[e].concat(t))})})},R.compose=function(){return R.seq.apply(null,Array.prototype.reverse.call(arguments))},R.applyEach=I(R.eachOf),R.applyEachSeries=I(R.eachOfSeries),R.forever=function(t,n){function i(e){return e?a(e):void r(i)}var a=o(n||e),r=F(t);i()},R.ensureAsync=F,R.constant=h(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),R.wrapSync=R.asyncify=function(e){return h(function(t){var n,i=t.pop();try{n=e.apply(this,t)}catch(e){return i(e)}B(n)&&"function"==typeof n.then?n.then(function(e){i(null,e)}).catch(function(e){i(e.message?e:new Error(e))}):i(null,n)})},"object"==typeof module&&module.exports?module.exports=R:"function"==typeof define&&define.amd?define([],function(){return R}):M.async=R}(),window.async.parallelWithTimeout=function(e,t,n,i){var o=n.map(function(t){return function(n){t.callback(function(i,o){var a=AdFuel.getMetricById("modules",t.name)[e+"Callback"],r=(new Date).getTime(),s=r-a.start+"ms";AdFuel.addMetric({type:"modules",id:t.name,data:{callback:e,end:r,elapsed:s}}),AdFuel.addMetric({type:"timeline",id:t.name+"_"+e,data:{end:r,elapsed:s}}),t.isCompleted=!0,n(i,o)})}}),a=setTimeout(function(){a=null;var o=[];i("callback timed out out after "+t+"ms.",null);for(var r=0;r<n.length;r++)if(0==n[r].isCompleted){_dbgLog({task:n[r]});var s=(new Date).getTime();o.push(n[r].name+" "+n[r].event),AdFuel.addMetric({type:"modules",id:n[r].name,data:{callback:e,timeout:s}}),AdFuel.addMetric({type:"timeline",id:n[r].name+"_"+e,data:{timeout:s}})}},t);async.parallel(o,function(e,t){a&&(clearTimeout(a),i(e,t))})}}();var AdFuel=function(){function e(e){return"function"==typeof e}function t(t,n){if(!e(t))throw new TypeError("Bind must be called on a function");var i=he.call(arguments,2);return function(){return t.apply(n,i.concat(he.call(arguments)))}}function n(){window.console.log.apply(window.console,arguments)}function i(e,t,n){return e.addEventListener?e.addEventListener(t,n,!0):e.attachEvent?e.attachEvent("on"+t,n):void 0}function o(){for(var e="",t=0;t<9;t++)e+=Math.floor(16*Math.random()).toString(16);return e}function a(e){var t="";if(document.location.search){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n="[\\?&]"+e+"=([^&#]*)",i=new RegExp(n),o=i.exec(document.location.search);o&&(t=o[1])}return t}function r(e){if(document.cookie){for(var t=document.cookie.split(";"),n=e+"=",i=0;i<t.length;i++){for(var o=t[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n))return o.substring(n.length,o.length)}
return null}return null}function s(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array){for(var n=[],i=0,o=e.length;i<o;i++)n[i]=s(e[i]);return n}if(e instanceof Object){var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=s(e[r]));return a}throw new Error("Unable to copy obj! Its type isn't supported.")}function l(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}function d(){function e(){n||(n=!0,Te(Se()+" DOMContentLoaded"),Ne("AdFuel DOM Ready Detection"),ve=!0,U({type:"timeline",id:"domContentLoaded",data:{id:1,timestamp:Date.now()}}),M())}function t(){if(!n)try{document.documentElement.doScroll("left"),e()}catch(e){setTimeout(t,10)}}var n=!1;if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(document.attachEvent){var i=!1;try{i=null!==window.frameElement}catch(e){}document.documentElement.doScroll&&!i&&t(),document.attachEvent("onreadystatechange",function(){"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState||e()})}if(window.addEventListener)window.addEventListener("load",e,!0);else if(window.attachEvent)window.attachEvent("onload",e);else{var o=window.onload;window.onload=function(){o&&o(),e()}}"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState||e()}function c(){try{var e=a("adsqa");if(e){var t=e.split("%3D");pe=t[0],fe=t[1],xe.pageTargets[pe]=fe}}catch(e){ke("checkForAdsQA",e)}}function u(e){for(var t=0;t<e.length;t++){for(var n=e[t],i=xe.pageTargets[n[0]]||[],o=0;o<n[1].length;o++){var a=n[1][o];i.indexOf(a)<0&&i.push(a)}xe.pageTargets[n[0]]=i}}function p(e){if(window[e]){if(window[e].adTargets)for(var t in window[e].adTargets)window[e].adTargets.hasOwnProperty(t)&&(xe.pageTargets[t]=window[e].adTargets[t]);if(window[e].slotTargets)for(var n in window[e].slotTargets)if(window[e].slotTargets.hasOwnProperty(n)){var i=window[e].slotTargets[n];xe.slotTargets[n]||(xe.slotTargets[n]={});for(var t in i)i.hasOwnProperty(t)&&(xe.slotTargets[n][t]=i[t])}}}function f(e){var t=s(e.targeting);Array.isArray(t)||(t=[t]);var n=xe.slotTargets;if(n[e.rktr_slot_id])for(var i in n[e.rktr_slot_id])n[e.rktr_slot_id].hasOwnProperty(i)&&t.push([i,n[e.rktr_slot_id][i]]);return t}function h(){i(document,"GPTRenderComplete",function(e){Ne("GPT Render Complete",{renderEvent:e});var t=document.getElementById(e.detail.divId);t&&t.className.indexOf("adfuel-rendered")<0&&(t.className+=" adfuel-rendered")})}function m(e){e&&(Array.isArray(e)||(e=[e]),0==e.length&&(e=Object.getOwnPropertyNames(Fe)));for(var t=0;t<e.length;t++){var n=e[t],i=document.getElementById(n);i&&i.className.indexOf("adfuel-rendered")>0&&(i.className=i.className.replace("adfuel-rendered",""))}}function g(e){e&&(Array.isArray(e)||(e=[e]),0==e.length&&(e=Object.getOwnPropertyNames(Fe)));for(var t=0;t<e.length;t++){var n=e[t];Fe[n]&&delete Fe[n]}}function v(e){e&&(Array.isArray(e)||(e=[e]),0==e.length&&(Ne({pageSlots:Fe}),e=Object.getOwnPropertyNames(Fe))),Ne("Removing Rocketeer Slots: ",e);for(var t=0;t<Oe.length;t++){var n=Oe[t].rktr_slot_id;Ne({slotId:n}),(e.indexOf(n)>=0||0==e.length)&&(Ne("Removing "+n),Oe.splice(t,1))}}function y(){window.googletag.setAdIframeTitle(Ce.iframeTitle)}function w(e,t){if(e&&t){var n=AdFuel.dynamicTargeting.pageTargets[e]||[];Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++)n.indexOf(t[i])<0&&n.push(t[i]);xe.pageTargets[e]=n,Ne("Setting Page-Level Targeting",e,n),qe.executeWhenAvailable("adding page-level targeting",function(){var t={};t[e]=AdFuel.dynamicTargeting.pageTargets[e],AdFuel.addMetric({type:"page",id:"dynamic_targeting",data:t}),qe.setTargeting(e,AdFuel.dynamicTargeting.pageTargets[e])})}}function _(e,t){qe.executeWhenAvailable("removing page-level targeting",function(){var n=xe.pageTargets[e];if(t&&(n.indexOf(t)>=0&&n.splice(n.indexOf(t),1),xe.pageTargets[e]=n),!t)return qe.clearTargeting(e),delete xe.pageTargets[e],void(AdFuel.dynamicTargeting=xe);e&&0==n.length?delete xe.pageTargets[e]:e&&0==!n.length?(xe.pageTargets[e]=n,qe.setTargeting(e,n)):(xe.pageTargets={},pe&&w(pe,fe))})}function b(e,t,n){var i=xe.slotTargets[e]||{},o=i[t]||[];if(Array.isArray(o))if(Array.isArray(n))for(var a=0;a<n.length;a++)o.push(n[a]);else o.push(n);xe.slotTargets[e]=xe.slotTargets[e]||{},xe.slotTargets[e][t]=o,qe.executeWhenAvailable("adding slot-level targeting",function(){var n=Fe[e];n&&qe.setSlotTargeting(n,t,o)})}function C(e,t,n){qe.executeWhenAvailable("removing slot-level targeting",function(){var i=Fe[e];if(i){var o={},a=i.getTargetingKeys();for(var r in a){var s=a[r];"function"!=typeof s&&(o[s]=i.getTargeting(s)||"")}var l={pos:o.pos};t?n?o[t].splice(o[t].indexOf(n),1):delete o[t]:o={pos:o.pos},qe.clearSlotTargeting(i);for(var d in o)0==o[d].length&&(o[d][0]=""),qe.setSlotTargeting(i,d,o[d])}xe.slotTargets[e]&&(t?n?xe.slotTargets[e][t].splice(xe.slotTargets[e][t].indexOf(n),1):delete xe.slotTargets[e][t]:(xe.slotTargets[e].length=0,xe.slotTargets[e]=l))})}function x(){U({type:"timeline",id:"building_page_level_GPT_object",data:{id:0,start:Date.now()}});var e=r("gptgeo");if(e){var t=e.split("%2C"),n=parseFloat(t[0]),i=parseFloat(t[1]);qe.executeWhenAvailable("setting location",function(){U({type:"configuration",id:"spoofed_user_location",data:{location_spoofed:!0,latitude:n,longitude:i}}),qe.setLocation(n,i)})}else Ne("Unable to retrieve location cookie",e),U({type:"configuration",id:"spoofed_user_location",data:{location_spoofed:!1}});void 0!==ce&&(Ne("Setting Child Directed Treat Tag : ",ce),qe.executeWhenAvailable("setting child_directed_treatment tag",function(){U({type:"configuration",id:"child_directed_treatment",data:{active:1==ce?"true":"false"}}),qe.setChildDirectedTreatmentTag(ce)})),void 0!==ue&&(Ne("Setting SafeFrame Config Tag : ",ue),qe.executeWhenAvailable("setting safeframe_config",function(){U({type:"configuration",id:"safeframe_config",data:{active:ue}}),qe.setSafeFrameConfig(ue)}));for(var o=s(ge),a=0;a<o.length;a++){var l=o[a];U({type:"page",id:"static_targeting",data:{key:l[0],value:l[1]}})}var d=xe.pageTargets;for(var c in d)d.hasOwnProperty(c)&&o.push([c,d[c]]);Ne("Page Level Targeting",JSON.stringify(o));for(var u=0;u<o.length;u++){var p=o[u][1];if(p&&!Array.isArray(p)&&(p=p.indexOf(",")>=0?p.split(","):[p]),"exclusions"==o[u][0])for(var f=0;f<p.length;f++){var h=o[u][1][f];qe.executeWhenAvailable("setting category exclusion",function(){qe.setCategoryExclusion(h)})}else{w(o[u][0],p)}}U({type:"timeline",id:"building_page_level_GPT_object",data:{id:0,end:Date.now()}})}function E(e){var t=document.querySelectorAll("div#"+e.rktr_slot_id);if(0!=t.length)for(var n=0;n<t.length;n++){var i=t[n];if(!(i.className.indexOf("adfuel-rendered")>=0)){if(1==t.length&&Fe[e.rktr_slot_id]){var o=I(e,!0);return N(o.rktr_slot_id),o}return I(e)}Ne("Found rendered slot...",e.rktr_slot_id)}return Ne("Not building slot... Can't Find Unrendered Slot On Page",e.rktr_slot_id),null}function A(e){var t=Ce.networkId;e.inherit&&de&&(e.rktr_ad_id=de),Ne("Building Slot",e),U({type:"timeline",id:"building_gpt_slot_"+e.rktr_slot_id,data:{id:1,start:Date.now()}}),U({type:"slots",id:e.rktr_slot_id,data:{build_start:Date.now()}});var n,i="/"+t+"/"+e.rktr_ad_id,o=e.rktr_slot_id,a=e.rktr_slot_id.indexOf("_oop")>=1,r=a?"Defining OOP Slot":"Defining Standard Slot";void 0!==e.safeframe_config&&(n=e.safeframe_config),qe.executeWhenAvailable(r,function(){Fe[o]=a?qe.defineOutOfPageSlot(i,o):qe.defineSlot(i,e.sizes,o),n&&qe.setSlotSafeFrameConfig(Fe[o],n),U({type:"counts",id:"slots",data:"+"}),Ne("Slot: ",e)}),Ne("Slots",Fe),qe.executeWhenAvailable("Defining slot targeting",function(){var t=f(e);for(var n in t)if(t.hasOwnProperty(n)){var i;if(i=t[n]&&t[n][1]?JSON.stringify(t[n][1]):""){i=JSON.parse(i);var a=Fe[o];if("exclusions"==t[n][0])if(Array.isArray(t[n][1]))for(var r in t[n][1])t[n][1].hasOwnProperty(r)&&(i=t[n][1][r],qe.setSlotCategoryExclusion(a,i));else qe.setSlotCategoryExclusion(a,i);else{var s=t[n][0];qe.setSlotTargeting(a,s,i)}}}}),Ne("Checking Responsive Mapping For Slot",e.responsive,e.responsive.length),e.responsive=e.responsive||[],e.responsive.length>0&&k(e.rktr_slot_id,e.responsive);var s=z("slots",e.rktr_slot_id),l=Date.now(),d=l-s.build_start+"ms";U({type:"slots",id:e.rktr_slot_id,data:{build_end:l,build_elapsed:d}});for(var c=[],u=0;u<e.sizes.length;u++){var p=e.sizes[u];c.push(p.join("x"))}U({type:"slots",id:e.rktr_slot_id,data:{allowed_sizes:c}}),U({type:"timeline",id:"building_gpt_slot_"+e.rktr_slot_id,data:{id:1,end:Date.now()}})}function S(e,t){function n(e){var t=Oe.indexOf(e);t>=0&&Oe.splice(t,1)}var i=[];U({type:"timeline",id:"building_gpt_slots",data:{id:z("timeline","building_gpt_slots").length||1,start:Date.now()}});for(var o=0;o<e.length;o++){var a=e[o],r=t&&t.ignoreCheck,s=!0;r||E(a)||(n(a),s=!1),s&&(A(a),i.push(a),n(a))}return U({type:"timeline",id:"building_gpt_slots",data:{id:1,slots:i.length,end:Date.now()}}),i}function N(e){e=e||[],Array.isArray(e)||(e=[e]),Ne("Clearing Slots",{slotDivIds:e}),qe.executeWhenAvailable("clearing slots",function(){var t=[];e.length>0&&(t=e.filter(function(e){return!!Fe[e]}).map(function(e){return Fe[e]}),0==t.length)||qe.clearSlots(t)})}function T(e){e=e||[],Array.isArray(e)||(e=[e]),Ne("Destroying Slots",{slotDivIds:e}),qe.executeWhenAvailable("destroying slots",function(){var t=[];e.length>0&&(t=e.filter(function(e){return!!Fe[e]}).map(function(e){return Fe[e]}),0==t.length)||(m(e),qe.destroySlots(t),g(e),v(e))})}function k(e,t){for(var n=0;n<t.length;n++){for(var i=JSON.parse(JSON.stringify(t[n])),o=0;o<i.length;o++)if(Array.isArray(i[o]))for(var a=0;a<i[o].length;a++)if(Array.isArray(i[o][a]))for(var r=0;r<i[o][a].length;r++)i[o][a][r]=parseInt(i[o][a][r]);else parseInt(i[o][a])>=0?i[o][a]=parseInt(i[o][a]):i[o]=[];else i[o]=[];t[n]=i}qe.executeWhenAvailable("setting slot mappings",function(){qe.defineSlotSizeMapping(Fe[e],t)})}function I(e,t){Ne("Checking to see if slot div id needs updated.",{slot:e});var n=e.rktr_slot_id,i=n,a=n.split("_"),r=a[a.length-1],s=document.querySelectorAll("div#"+n);if(s.length>1||1==s.length&&t){for(Ne("updating slot div id.",{slot:e});Fe[i];)3==a.length?r=o():(r=parseInt(r)+1,r=r<10?"0"+String(r):String(r)),a[a.length-1]=r,i=a.join("_");F(e,i,n),O(n,i)}return e}function F(e,t,n){e.rktr_slot_id=t;try{var i=new CustomEvent("SlotIdChange",{detail:{asset:e,originalId:n,newId:t}});document.dispatchEvent(i)}catch(e){ke("error dispatching custom Event: SlotIdChange",{error:e})}}function O(e,t){var n=document.querySelectorAll("div#"+e);if(n.length>0)for(var i=0;i<n.length;i++){var o=n[i];(o.className.indexOf("adfuel-rendered")<0&&n.length>1||1==n.length)&&(o.id=t)}}function R(){return Ee&&ve&&0==ye&&0==we}function M(){if(R())if(Re.length>0||Me.length>0){Ne("Processing delayed dispatch queues");var e;for(e=0;e<Re.length;e++)Re[e]();for(Ne("User-Dispatched Queues: ",Me),e=0;e<Me.length;e++)Me[e]();Re.length=0,Me.length=0}else Ce.autoDispatch&&(Ne("Processing all queues"),AdFuel.dispatchQueue())}function D(e){if(!R())return Ne("Delaying Queue Dispatch"),void Re.push(function(){D(e)});var t=z("timeline","dispatch_queue");if(U({type:"timeline",id:"dispatch_queue_called",data:{id:t.length?t.length+1:1,timestamp:Date.now(),slots:Oe.length}}),e=e||{},Ne("Registry",AdFuel.registry),Ne("SlotQueue: ",Oe),Ne("Dispatch Options: ",e),e.slots&&e.slots.length>0)for(var n=0;n<e.slots.length;n++)je.indexOf(e.slots[n])>=0&&je.splice(je.indexOf(e.slots[n]),1);if(Oe.length>0){var i=Oe.filter(function(t){var n=!e.slots||0==e.slots.length||e.slots.indexOf(t.rktr_slot_id)>=0,i=!e.exclude||0==e.exclude.length||e.exclude.indexOf(t.rktr_slot_id)<0,o=e.slots&&e.slots.length>0||je.indexOf(t.rktr_slot_id)<0;return n&&i&&o});if(e.slots&&e.slots.length>0&&je.length>0)for(var o=0;o<e.slots.length;o++){var a=je.indexOf(e.slots[o]);a>=0&&je.splice(a,1)}var r=S(i,e);if(r.length>0){var l=parseInt(z("counts","requests").length||0)+1,d=Date.now();U({type:"counts",id:"requests",data:"+"}),U({type:"requests",id:l,data:{start:d,options:e,queue:[]}}),x();var c=s(r),u=z("counts","requests");u.length>0&&u.length-1;for(var p=[],f=0;f<c.length;f++){var h=c[f];p.push(h.rktr_slot_id)}U({type:"requests",id:l,data:{queue:p}});Object.getOwnPropertyNames(e).length>0&&U({type:"requests",id:l,data:{options:e}});var m=De.filter(function(e){return!!e.callbacks.preDispatchCallback}).map(function(e){return _e(e.name,function(t){e.callbacks.preDispatchCallback(c,t)},"preDispatch")});e&&e.preDispatchCallback&&m.push(_e("dispatchOptions",function(t){e.preDispatchCallback(c,t)},"preDispatch"));for(var g=Date.now(),v=0;v<m.length;v++)U({type:"modules",id:m[v].name,data:{callback:"preDispatch",start:g}}),U({type:"timeline",id:m[v].name+"_preDispatch",data:{start:g}});async.parallelWithTimeout("preDispatch",Ce.dispatchCallbackTimeoutInMilliseconds,m,function(t){t&&Ne("Error calling preDispatchCallbacks for registered modules",{error:t});try{var n=new CustomEvent("PreDispatchComplete",{detail:{slots:Oe.length}});document.dispatchEvent(n)}catch(e){ke("error dispatching custom Event: PreDispatchComplete",{error:e})}var i=z("timeline","dispatch_queue"),o=i.length?i.length+1:1;U({type:"timeline",id:"dispatch_queue",data:{id:o,start:Date.now(),slots:Oe.length}});for(var a=W(r,e),d=s(a),c=De.filter(function(e){return!!e.callbacks.postDispatchCallback}).map(function(e){return _e(e.name,function(t){e.callbacks.postDispatchCallback(d,t)},"postDispatch")}),u=0;u<d.length;u++);e&&e.postDispatchCallback&&c.push(_e("dispatchOptions",function(t){e.postDispatchCallback(d,t)},"postDispatch"));var p=Date.now();Te(Se()+" Starting postDispatch Callbacks");for(var u=0;u<c.length;u++)U({type:"modules",id:c[u].name,data:{callback:"postDispatch",start:p}}),U({type:"timeline",id:c[u].name+"_postDispatch",data:{start:p}});async.parallelWithTimeout("postDispatch",Ce.dispatchCallbackTimeoutInMilliseconds,c,function(e){e&&Ne("error calling postDispatchCallbacks for registered modules",{error:e});try{var t=new CustomEvent("PostDispatchComplete",{detail:{slots:d.length}});document.dispatchEvent(t)}catch(e){ke("error dispatching custom Event: PostDispatchComplete",{error:e})}Te(Se()+" End postDispatch Callbacks"),Ne("Slot Queue After Dispatch:",Oe)}),Te(Se()+" End Dispatch of Queue: "+a.length+" slots");var f=Date.now();U({type:"timeline",id:"dispatch_queue",data:{id:o,end:f,slots:d.length}});var h=z("requests",l)[0],m=f-h.start+"ms";U({type:"requests",id:l,data:{end:f,elapsed:m}})})}}}function j(e,t){function n(e){var t=document,n=t.createElement("script"),o=t.getElementsByTagName("script")[0],a=/^(complete|loaded)$/,r=!1;n.type="text/javascript",n.src=e,n.onload=n.onreadystatechange=function(){r||"readyState"in n&&a.test(n.readyState)||(n.onload=n.onreadystatechange=null,r=!0,i())},o.parentNode.insertBefore(n,o)}function i(){t.dispatch&&AdFuel.dispatchQueue(t),U({type:"timeline",id:"Queueing registry via Script",data:{timestamp:Date.now()}})}function o(e,t){var n=[];if(n.push(e[0]),t&&t.length>0)for(var i=1;i<e.length;i++)t.indexOf(e[i].rktr_slot_id)>=0&&n.push(e[i]);else n=e;return n}function a(i){1==i.error?(Ne("Using Script Tag Method..."),n(e)):(U({type:"timeline",id:"Queueing registry via JSON",data:{timestamp:Date.now()}}),i=o(i,t.slots),console.log({queueOptions:t}),window.AdFuel.registry.push(i,t),Te(Se()+" End Queuing of Registry: "+e))}if(Ne("Queueing Registry: ",e,t),Te(Se()+" Start Queuing of Registry: "+e),t=t||{dispatch:Ce.autoDispatch},console.log({queueOptions:t}),t.exclude&&t.exclude.length>0)for(var r=0;r<t.exclude.length;r++){var s=t.exclude[r];je.indexOf(s)<0&&je.push(s)}Ne("Trying JSON Request First..."),Be(e,a)}function B(e,t,n){function i(){if(a++==t){n()&&B(e,t,n)}else{var s=Date.now()-r-a*o;window.setTimeout(i,o-s)}}t=t||10;var o=e/t,a=0,r=Date.now();window.setTimeout(i,o)}function P(e,t){function n(e){Ne("starting refresh interval: "+e,t),B(1e3*e,5,function(){if(!t.interval||0==parseInt(t.interval))return Ne("stopping refresh interval: "+e,t),!1;var i=parseInt(t.interval);return e!=i?(Ne("changing refresh interval: "+e,t),n(i),!1):(a(),!0)})}!e||Array.isArray(e)||t?t=t||{}:(t=e,e=[]),e||(e=[]),Te(Se()+" Begin Slot Refresh: "+e.length+" slots");var i=z("timeline","refresh"),o=i.length||1;U({type:"timeline",id:"refresh",data:{id:o,slots:e,options:t,start:Date.now()}}),t.pageload=void 0==t.pageload||t.pageload,t.maintainCorrelator=void 0==t.maintainCorrelator||t.maintainCorrelator,Ne("Refresh Options",t);var a=function(){if(Ne("Testing Refresh: ",{focused:Ae,refreshOnFocusOnly:Ce.refreshOnFocusOnly,test:Ae||!Ce.refreshOnFocusOnly}),Ae||!Ce.refreshOnFocusOnly){var n=[],i=[],a=[];if(0==e.length)for(var r in Fe)Fe.hasOwnProperty(r)&&a.push(r);else a=e;for(var s=0;s<a.length;s++){var r=a[s];if(document.getElementById(r)){U({type:"slots",id:r,data:{refresh_start:Date.now()}});var l=Fe[r];l&&(n.push(l),i.push(r))}else Ne("Cannot find element on page to refresh: "+r)}if(e.length>0&&0==i.length)return;var d=De.filter(function(e){return!!e.callbacks.preRefreshCallback}).map(function(e){return _e(e.name,function(t){e.callbacks.preRefreshCallback(i,t)},"preRefresh")});t.preRefreshCallback&&d.push(_e("refreshOptions",function(e){t.preRefreshCallback(i,e)},"preRefresh"));var c=Date.now();Te(Se()+" Begin preRefreshCallbacks");for(var u=0;u<d.length;u++)U({type:"modules",id:d[u].name,data:{callback:"preRefresh",start:c}}),U({type:"timeline",id:d[u].name+"_preRefresh",data:{start:c}});async.parallelWithTimeout("preRefresh",Ce.refreshCallbackTimeoutInMilliseconds,d,function(a){a&&Ne("error calling preRefreshCallbacks for all registered modules",{error:a});try{var r=new CustomEvent("PreRefreshComplete",{detail:{slots:i}});document.dispatchEvent(r)}catch(e){ke("error dispatching custom Event: PreRefreshComplete",{error:e})}Te(Se()+" End preRefreshCallbacks"),N(i),t.pageload?qe.setTargeting("pageload","ref"):qe.clearTargeting("pageload"),qe.refreshSlots(n,t);for(var s=i,l=(new Date,0);l<i.length;l++){var d=i[l],c=z("slots",d),u=Date.now();U({type:"slots",id:d,data:{refresh_end:u,refresh_elapsed:u-c.refresh_start+"ms"}}),U({type:"counts",id:d+"_refreshes",data:"+"})}var p=De.filter(function(e){return!!e.callbacks.postRefreshCallback}).map(function(e){return _e(e.name,function(t){e.callbacks.postRefreshCallback(s,t)},"postRefresh")});t.postRefreshCallback&&p.push(_e("refreshOptions",function(e){t.postRefreshCallback(s,e)},"postRefresh"));for(var f=Date.now(),l=0;l<p.length;l++)U({type:"modules",id:p[l].name,data:{callback:"postRefresh",start:f}}),U({type:"timeline",id:p[l].name+"_postRefresh",data:{start:f}});async.parallelWithTimeout("postRefresh",Ce.refreshCallbackTimeoutInMilliseconds,p,function(e){e&&Ne("error calling postRefreshCallbacks for all registered modules",{error:e});try{var t=new CustomEvent("PostRefreshComplete",{detail:{slots:i}});document.dispatchEvent(t)}catch(e){ke("error dispatching custom Event: PostRefreshComplete",{error:e})}Te(Se()+" End postRefreshCallbacks")}),Te(Se()+" End Slot Refresh: "+e.length+" slots"),U({type:"timeline",id:"refresh",data:{id:o,slots:e,options:t,end:Date.now()}})})}};if(t.interval&&parseInt(t.interval)>0){n(parseInt(t.interval))}else a()}function L(){return Object.getOwnPropertyNames(Pe)}function q(e){return Pe[e]||{}}function z(e,t){return"counts"!=e||Pe[e][t]?"timeline"!=e||"request_to_dfp"!=t||Pe[e][t]?Pe[e][t]||{}:[]:0}function U(e){Ne("Adding Metric: ",JSON.parse(JSON.stringify(e)));var t,n=!1;Pe[e.type]||(Pe[e.type]={}),Pe[e.type][e.id]||(Pe[e.type][e.id]=[],n=!0);Pe[e.type];switch(t=n?[]:z(e.type,e.id),e.type){case"counts":0==t.length&&(t=0);var i=parseInt(t);if("+"==e.data)i+=1;else{if("-"!=e.data)return Ne("Metric data contains no operator for counting metrics.",e),!1;i-=1}Pe[e.type][e.id]=i,Ne("Metrics updated with: ",e,Pe);break;case"modules":if(e.data.callback){var o=De.filter(function(t){return t.name==e.id});Array.isArray(o)&&(o=o[0]),0==t.length&&(t={});var a=Object.getOwnPropertyNames(o.callbacks),r=e.data.callback+"Callback";if(a.indexOf(r)>=0)for(var s=0;s<a.length;s++)t[a[s]]||(t[a[s]]={}),delete e.data.callback,t[a[s]]=l(t[a[s]],e.data);Pe[e.type][e.id]=t}else{var d=l(t,e.data);Pe[e.type][e.id]=d,Ne("Metrics updated with: ",e,Pe)}break;case"requests":case"timeline":var c=e.data.id||1,d={};t.length>0&&(d=t[c-1]),d=l(d,e.data),Pe[e.type][e.id][c-1]=d,Ne("Metrics updated with: ",e,Pe);break;case"slots":default:var d=l(t,e.data);Pe[e.type][e.id]=d,Ne("Metrics updated with: ",e,Pe)}for(var u=De.filter(function(e){return!!e.callbacks.metricUpdateCallback}).map(function(t){return _e(t.name,function(n){t.callbacks.metricUpdateCallback(e,n)},"metricUpdate")}),p=0;p<u.length;p++){u[p].callback()}return!0}function W(e,t){var n=z("timeline","request_to_dfp").length+1;n||(n=1),U({type:"timeline",id:"request_to_dfp",data:{id:n,slots:e,options:t,start:Date.now()}}),t=t||{sync:!1,syncSlots:[],maintainCorrelator:!1};var i=[];qe.configurePubAds();for(var o=0;o<e.length;o++){var a=e[o].rktr_slot_id;document.getElementById(a)?(!function(e){qe.executeWhenAvailable("displaying slot",function(){Ne("Displaying Slot: "+e),qe.displaySlotById(e)})}(a),i.push(e[o])):(Ne("Can't Find Slot On Page",a),Pe.slots&&Pe.slots[a]&&delete Pe.slots[a])}var r=i.map(function(e){return U({type:"slots",id:e.rktr_slot_id,data:{render_start:Date.now()}}),e.rktr_slot_id});qe.executeWhenAvailable("refreshing slots",function(){var e=[];for(var n in Fe)Fe.hasOwnProperty(n)&&(Ne("Checking Slot for Sync: "+n),(t.sync&&(!t.syncSlots||0==t.syncSlots.length||t.syncSlots.indexOf(n)>=0)||r.indexOf(n)>=0)&&(Ne("Syncing Slot With Request: "+n),e.push(Fe[n])));Ne("Slots To Refresh: ",e.map(function(e){return e.getSlotElementId()})),qe.refreshSlots(e)}),t.maintainCorrelator=t.maintainCorrelator||!1,Ne({maintainCorrelator:t.maintainCorrelator}),0==t.maintainCorrelator&&qe.executeWhenAvailable("updating correlator",qe.updateCorrelator);try{var s=new CustomEvent("AdFuelRequestComplete",{detail:{slots:JSON.parse(JSON.stringify(i)),options:t}});document.dispatchEvent(s)}catch(e){ke("error dispatching custom Event: AdFuelRequestComplete",{error:e})}return U({type:"timeline",id:"request_to_dfp",data:{id:n,slots:e,options:t,end:Date.now()}}),i}function H(e){if(e)for(var t in e)if(e.hasOwnProperty(t))if("slotTargets"==t){for(var n in e[t])if(e[t].hasOwnProperty(n)){var i=e[t][n];for(var o in i)i.hasOwnProperty(o)&&AdFuel.addSlotLevelTarget(n,o,e[t][n][o])}}else if("adTargets"==t)for(var n in e[t])e[t].hasOwnProperty(n)&&AdFuel.addPageLevelTarget(n,e[t][n]);else AdFuel.addPageLevelTarget(t,e[t])}function Q(e){if(e&&e.indexOf("/")>=0){var t=e.split("/")[0];if(parseInt(t)>0){var n=e.split("/");n.splice(0,1),e=n.join("/")}}return e}function V(e,t){Ie("AdFuel.logit is DEPRECATED and will be removed in the next version of AdFuel."),Ne(t,e)}function $(e){Ie("AdFuel.queueSingleton is DEPRECATED and will be removed in the next version of AdFuel."),Ne("Queuing Singleton",e),e.size=e.size||[[88,31]],e.targets=e.targets||[],e.responsive=e.responsive||[];var t=e.divId;e.adunit=Q(e.adunit);var n={singleton:!0,rktr_id:"singleton_"+t,gpt_id:Ce.networkId,root:e.adunit.split("/")[0].toUpperCase(),responsive:[],rktr_slot_id:"page"};if(ge&&e.targets.length>0){for(var i=[],o=[],a=0;a<e.targets.length;a++){for(var r=e.targets[a],s=!1,l=0;l<ge.length;l++)if(ge[l][0]==r[0])for(var d=0;d<r[1].length;d++)ge[l][1].indexOf(r[1][d])>=0&&(s=!0,o=ge[l],Ne("Found duplicate page-level target. Removing from singleton.",{singleton:r,pageLevel:o}));s||i.push(r)}e.targets=i}n.targeting=ge;var c={present:!0,responsive:e.responsive,rktr_slot_id:e.divId,sizes:e.size,targeting:e.targets,rktr_ad_id:e.adunit,inherit:e.inherit};if(c){var u=[n,c];AdFuel.registry.push(u),e.dispatch&&!Ce.autoDispatch&&AdFuel.dispatchQueue({slots:[c.rktr_slot_id]})}else Ne("missing singleton: "+e.divId)}function K(e){Ie("AdFuel.processNewRegistry is DEPRECATED and will be removed in the next version of AdFuel."),j(e,{dispatch:!0})}function J(e,t,n){Ie("AdFuel.reloadAd is DEPRECATED and will be removed in the next version of AdFuel."),AdFuel.refresh([e],{pageload:t,interval:0,updateCorrelator:n})}function G(e,t,n,i){Ie("AdFuel.refreshAd is DEPRECATED and will be removed in the next version of AdFuel."),AdFuel.refresh([e],{pageload:n||!1,interval:t||0,updateCorrelator:i||!0})}function Y(e,t,n,i){Ie("AdFuel.refreshAds is DEPRECATED and will be removed in the next version of AdFuel."),AdFuel.refresh(e,{pageload:n||!1,interval:t||0,updateCorrelator:i||!0})}function Z(e,t,n){Ie("AdFuel.refreshAllAds is DEPRECATED and will be removed in the next version of AdFuel.");var i={pageload:t||!1,interval:e||0,updateCorrelator:n||!0};return AdFuel.refresh([],i),!0}function X(e,t,n,i,o,a,r,s){Ie("AdFuel.renderSingleSlot is DEPRECATED and will be removed in the next version of AdFuel."),e.indexOf("ad_carousel_slide")>=0&&(o="NBA/homepage"),$({divId:e,size:t,targets:n,responsive:i,adunit:o,delay:a,inherit:r,dispatch:void 0==s||s,sync:!1,syncSlots:[]})}function ee(){i(document,"AdFuelRequestComplete",function(e){Ne("AdFuel Request Complete",{requestEvent:e})}),i(document,"GPTRenderComplete",function(e){Ne("GPT Render Complete",{renderEvent:e})}),i(document,"GPTSlotBuildComplete",function(e){Ne("GPT Slot Build Complete",{renderEvent:e})}),i(document,"SlotIdChange",function(e){Ne("Slot ID Change",{idChangeEvent:e})}),i(document,"SlotVisibilityChanged",function(e){Ne("Slot Visibility Changed",{visibilityChangedEvent:e})}),i(document,"SlotViewable",function(e){Ne("Slot Viewable",{viewableEvent:e})}),i(document,"GPTSlotLoaded",function(e){Ne("Slot Loaded",{slotOnLoadEvent:e})}),i(document,"PreQueueComplete",function(e){Ne("PreQueueComplete",{preQueueCompleteEvent:e})}),i(document,"PostQueueComplete",function(e){Ne("PostQueueComplete",{postQueueCompleteEvent:e})}),i(document,"PreDispatchComplete",function(e){Ne("PreDispatchComplete",{preDispatchCompleteEvent:e})}),i(document,"PostDispatchComplete",function(e){Ne("PostDispatchComplete",{postDispatchCompleteEvent:e})}),i(document,"PreRefreshComplete",function(e){Ne("PreRefreshComplete",{preRefreshCompleteEvent:e})}),i(document,"PostRefreshComplete",function(e){Ne("PostRefreshComplete",{postRefreshCompleteEvent:e})})}function te(){if(!Ee){Ee=!0;var e=Ce.exclude.join(",")||"No Exclusions";U({type:"timeline",id:"adfuel_initialized",data:{id:1,timestamp:Date.now()}}),U({type:"configuration",id:"adfuel_initialization_options",data:{refreshOnFocusOnly:Ce.refreshOnFocusOnly,networkId:Ce.networkId,autoDispatch:Ce.autoDispatch,exclude:e,iFrameTitle:Ce.iframeTitle}}),U({type:"configuration",id:"callback_timeout_length",data:{queueCallbackTimeout:Ce.queueCallbackTimeoutInMilliseconds+"ms",dispatchCallbackTimeout:Ce.dispatchCallbackTimeoutInMilliseconds+"ms",refreshCallbackTimeout:Ce.refreshCallbackTimeoutInMilliseconds+"ms"}}),h(),c(),ee(),d(),qe.executeWhenAvailable("set ad iframe title",y),M();try{var t=new CustomEvent("AdFuelCreated",{detail:{AdFuel:window.AdFuel}});document.dispatchEvent(t)}catch(e){ke("error dispatching custom Event: AdFuelCreated",{error:e})}i(document,"PostQueueComplete",function(){setTimeout(M,300)})}}function ne(){return s(Oe)}function ie(e){for(var t,n=0;n<AdFuel.registry.length;n++)for(var i=AdFuel.registry[n],o=1;o<i.length;o++){var a=i[o];a.rktr_slot_id==e&&(t=s(a))}var r,l={},d=Fe[e];if(d){r=d.getAdUnitPath();var c=d.getTargetingKeys();for(var u in c){var p=c[u];l[p]=d.getTargeting(p)}}return{adUnit:r,slot:t,slotTargeting:l}}function oe(e,t){Ne("registering module: "+e);for(var n=-1,i=0;i<De.length;i++)De[i].name==e&&(n=i);n>=0?De[n].callbacks=t:De.push({name:e,callbacks:t}),Pe.modules=Pe.modules||{},Pe.modules[e]=Pe.modules[e]||{};for(var o in t)t.hasOwnProperty(o)&&(Pe.modules[e][o]={});return U({type:"counts",id:"modules",data:"+"}),Le}function ae(e){for(var t=-1,n=0;n<De.length;n++)De[n].name==e&&(t=n);t>=0&&De.splice(t,1),U({type:"counts",id:"modules",data:"-"})}function re(e){var t=arguments.callee,n="window/console";try{n=t.caller.toString()}catch(e){n="window/console"}return function(){if(!Ee)return ke("ERROR: AdFuel must be initialized first!"),void Ne("------------------FUNCTION --------------------",e,"--------------- END FUNCTION ------------------","called by: "+n);e.apply(this,arguments)}}function se(e){if(e){if(e.exclude&&e.exclude.length>0)for(var t=0;t<e.exclude.length;t++){var n=e.exclude[t];je.indexOf(n)<0&&je.push(n)}for(var i in e)e.hasOwnProperty(i)&&(Ce[i]=e[i]);var o=Ce.exclude.length>0?Ce.exclude.join(","):"No Exclusions";U({type:"configuration",id:"adfuel_initialization_options",data:{refreshOnFocusOnly:Ce.refreshOnFocusOnly,networkId:Ce.networkId,autoDispatch:Ce.autoDispatch,exclude:o,iFrameTitle:Ce.iframeTitle}}),U({type:"configuration",id:"callback_timeout_length",data:{queueCallbackTimeout:Ce.queueCallbackTimeoutInMilliseconds+"ms",dispatchCallbackTimeout:Ce.dispatchCallbackTimeoutInMilliseconds+"ms",refreshCallbackTimeout:Ce.refreshCallbackTimeoutInMilliseconds+"ms"}})}}function le(){return qe.updateCorrelator()}var de,ce,ue,pe,fe,he=Array.prototype.slice,me=function(){},ge=[],ve=!1,ye=!1,we=!1,_e=function(e,t,n){return{name:e,callback:t,event:n,data:{}}},be=function(){var e=[];return e.push=function(t,n){if(ye=!0,n&&n.slotMap)for(var i=1;i<t.length;i++)n.slotMap[t[i].rktr_slot_id]&&(t[i].rktr_slot_id=n.slotMap[t[i].rktr_slot_id]);Array.prototype.push.call(e,t);var o=s(t);n=n||{dispatch:!0};for(var a=De.filter(function(e){return!!e.callbacks.preQueueCallback}).map(function(e){return _e(e.name,function(t){e.callbacks.preQueueCallback(o,t)},"preQueue")}),r=0;r<a.length;r++){var l=(new Date).getTime();AdFuel.addMetric({type:"modules",id:a[r].name,data:{callback:"preQueue",start:l}}),AdFuel.addMetric({type:"timeline",id:a[r].name+"_preQueue",data:{start:l}})}async.parallelWithTimeout("preQueue",Ce.queueCallbackTimeoutInMilliseconds,a,function(e){e&&Ne("error calling preQueueCallbacks for registered modules",{error:e});try{var i=new CustomEvent("PreQueueComplete",{detail:{asset:t}});document.dispatchEvent(i)}catch(e){ke("error dispatching custom Event: PreQueueComplete",{error:e})}ye=!1;var o=(new Date).getTime();AdFuel.addMetric({type:"timeline",id:"queueing_registry:_"+t[0].rktr_id,data:{id:0,start:o}});var a=t[0].rktr_id;U({type:"counts",id:"registries",data:"+"}),U({type:"registries",id:a,data:{deployed:t[0].rktr_deployed_date,slotCount:t.length-1}}),void 0!==t[0].child_directed_treatment&&(ce="true"==t[0].child_directed_treatment?1:0),void 0!==t[0].safeframe_config&&(ue=t[0].safeframe_config),t[0].singleton||(u(t[0].targeting),de=Q(t[1].rktr_ad_id)),p(t[0].root?t[0].root.toUpperCase():t[0].site.toUpperCase());for(var a=t[0].rktr_id,r=!1,l=1;l<t.length;l++){var d=t[l];if(d.parentRegistry=a,!d.queued){AdFuel.addMetric({type:"slots",id:d.rktr_slot_id,data:{queued:(new Date).getTime()}});1==(t[0].hasInViewRefresh?t[0].hasInViewRefresh:d.hasInViewRefresh)&&(AdFuel.addMetric({type:"slots",id:d.rktr_slot_id,data:{"In-View Refresh Registration":(new Date).getTime()}}),r=!0),Oe.push(d)}}r&&_startInViewListeners();for(var c=s(Oe),f=De.filter(function(e){return!!e.callbacks.postQueueCallback}).map(function(e){return _e(e.name,function(t){e.callbacks.postQueueCallback(c,t)},"postQueue")}),l=0;l<f.length;l++){var o=(new Date).getTime();AdFuel.addMetric({type:"modules",id:f[l].name,data:{callback:"postQueue",start:o}}),AdFuel.addMetric({type:"timeline",id:f[l].name+"_postQueue",data:{start:o}})}we=!0,async.parallelWithTimeout("postQueue",Ce.queueCallbackTimeoutInMilliseconds,f,function(e){e&&Ne("error calling postQueueCallbacks for registered modules",{error:e});try{var i=new CustomEvent("PostQueueComplete",{detail:{asset:t}});document.dispatchEvent(i)}catch(e){ke("error dispatching custom Event: PostQueueComplete",{error:e})}Te(Se()+" End postQueue Callbacks"),we=!1;var o=(new Date).getTime();AdFuel.addMetric({
type:"timeline",id:"queueing_registry:_"+t[0].rktr_id,data:{id:0,end:o}}),(Ce.autoDispatch||1==n.dispatch)&&AdFuel.dispatchQueue(n)})})},e},Ce={refreshOnFocusOnly:!1,networkId:"8663477",autoDispatch:!0,exclude:[],iframeTitle:"advertisement",queueCallbackTimeoutInMilliseconds:500,dispatchCallbackTimeoutInMilliseconds:500,refreshCallbackTimeoutInMilliseconds:500},xe={pageTargets:{},slotTargets:{}},Ee=!1,Ae=!0,Se=function(){var e=new Date,t=e.toISOString(),n=t.split("T");n[0];return n[1].replace("Z","")},Ne="true"==a("debug")?t(n,null,"[AdFuel - DEBUG]"):me,Te="true"==a("timers")?t(n,null,"[AdFuel- TIMER]"):me,ke=(t(n,null,"[AdFuel - WARNING]"),t(n,null,"[AdFuel - ERROR]")),Ie=t(n,null,"[AdFuel - DEPRECATION NOTICE]"),Fe={},Oe=[],Re=[],Me=[],De=[],je=[],Be=function(e,t){e=e.replace(/^(https?\:)?\/\/[i|z|s](sl)?(.cdn.turner.com\/ads\/.*?\.).*/,function(e,t,n,i){return i&&t?t+"ssl"+i+"json":i?"https://ssl"+i+"json":t+"ssl"+n+"json"}),Ne("Requesting JSON: ",e);var n=new XMLHttpRequest;n.onload=function(){var e=this.response;Ne("JSON Request Finished: ",e);try{e=JSON.parse(e),Ne("JSON Data Parsed:",e),t(e.registry)}catch(n){Ne("JSON Request Failed: ",n),e={response:this.response,error:!0},t(e)}};try{n.open("GET",e,!0),n.setRequestHeader("Accept","application/json"),n.send()}catch(e){Ne("JSON Request Failed: ",e),data={response:this.response,error:!0},t(data)}},Pe={},Le={metrics:Pe,getMetricTypes:L,getMetricsByType:q,getMetricById:z,addMetric:U},qe=function(){function e(e,t){return C||!(C=window.googletag.apiReady&&window.googletag.pubads)&&e&&ke("GPT is unavailable - "+e,t),C}function t(e,t){window.googletag.cmd.push(t)}function n(){b||(b=!0,AdFuel.requestScriptText+="googletag.pubads().collapseEmptyDivs(true);\n",AdFuel.requestScriptText+="googletag.pubads().enableAsyncRendering();\n",AdFuel.requestScriptText+="googletag.pubads().enableSingleRequest();\n",AdFuel.requestScriptText+="googletag.pubads().disableInitialLoad();\n",AdFuel.requestScriptText+="googletag.enableServices();\n",t("Sending Request",function(){window.googletag.pubads().addEventListener("impressionViewable",function(e){var t=e,n=new CustomEvent("SlotViewable",{detail:t});document.dispatchEvent(n)}),window.googletag.pubads().addEventListener("slotVisibilityChanged",function(e){var t=e,n=new CustomEvent("SlotVisibilityChanged",{detail:t});document.dispatchEvent(n)}),window.googletag.pubads().addEventListener("slotRenderEnded",function(e){try{var t={};e.slot&&(t.asset=e.slot),e.slot.getTargeting("pos")&&(t.pos=e.slot.getTargeting("pos")),e.isEmpty?t.empty=!0:t.empty=!1,e.size&&(t.renderedSize=e.size),e.creativeId&&(t.creativeId=e.creativeId),e.lineItemId&&(t.lineItemId=e.lineItemId),e.serviceName&&(t.serviceName=e.serviceName),e.slot.getSlotElementId()&&(t.divId=e.slot.getSlotElementId(),document.getElementById(t.divId));var n=z("slots",t.divId),i=!1;for(var o in n)0==o&&(i=!0);var a=Date.now(),r=z("slots",t.divId),s=a-r.render_start+"ms";i||U({type:"timeline",id:t.divId+"_rendered",data:{id:1,start:r.render_start,end:a,elapsed:s}}),U({type:"slots",id:t.divId,data:{render_end:a,render_elapsed:s,advertiserId:t.advertiserId,campaignId:t.campaignId,creativeId:e.creativeId,lineItemId:e.lineItemId}});try{U({type:"slots",id:t.divId,data:{inventory_url:"https://www.google.com/dfp/inventory?hl=en-US#inventory/q="+e.slot.getAdUnitPath(),responsive_map:e.slot.getResponsiveMap()}})}catch(e){}try{U({type:"slots",id:t.divId,data:{targeting_map:e.slot.getTargetingMap()}})}catch(e){}t.empty||U({type:"slots",id:t.divId,data:{rendered_size:e.size.join("x")}}),U({type:"slots",id:t.divId,data:{empty:t.empty}}),Ne("GPTRenderComplete Details: ",t);var l=new CustomEvent("GPTRenderComplete",{detail:t});document.dispatchEvent(l)}catch(e){ke("error dispatching custom Event: GPTRenderComplete",{error:e})}}),window.googletag.pubads().addEventListener("slotOnload",function(e){var t=e,n=new CustomEvent("GPTSlotLoaded",{detail:t});document.dispatchEvent(n)}),window.googletag.pubads().collapseEmptyDivs(!0),window.googletag.pubads().enableAsyncRendering(),window.googletag.pubads().enableSingleRequest(),window.googletag.pubads().disableInitialLoad(),window.googletag.enableServices()}))}function i(t){var n=!1;return e("clearing target",{key:t||"all"})&&(t?window.googletag.pubads().clearTargeting(t):window.googletag.pubads().clearTargeting(),n=!0),n}function o(t,n){var i=!1;return e("setting target",{key:t,value:n})&&(AdFuel.requestScriptText+="googletag.pubads().setTargeting('"+t+"', '"+n+"');\n",window.googletag.pubads().setTargeting(t,n),i=!0),i}function a(t,n){var i=!1;return e("setting location",{latitude:t,logitude:n})&&(window.googletag.pubads().setLocation(t,n),i=!0),i}function r(t){var n=!1;return e("setting child directed treatment tag: "+t)&&(window.googletag.pubads().clearTagForChildDirectedTreatment(),window.googletag.pubads().setTagForChildDirectedTreatment(t),n=!0),n}function s(t){var n=!1;return t.sandbox=1==t.sandbox||"true"==t.sandbox,t.allowOverlayExpansion=1==t.allowOverlayExpansion||"true"==t.allowOverlayExpansion,t.allowPushExpansion=1==t.allowPushExpansion||"true"==t.allowPushExpansion,1!=t.sandbox&&(Ne("Removing invalid sandbox value"),delete t.sandbox),e("setting SafeFrame config tag: "+t)&&(window.googletag.pubads().setSafeFrameConfig(t),n=!0),n}function l(t){var n=!1;return e("setting category exclusion: "+t)&&(AdFuel.requestScriptText+="googletag.pubads().setCategoryExclusion('"+t+"');\n",window.googletag.pubads().setCategoryExclusion(t),n=!0),n}function d(){var t=!1;return e("updating correlator")&&(AdFuel.requestScriptText+="googletag.pubads().updateCorrelator();\n",window.googletag.pubads().updateCorrelator(),t=!0),t}function c(t,n){var i;return e("defining out of page slot",{adPath:t,slotId:n})&&(Ne("Building OOP Slot Object",{adPath:t,slotId:n}),AdFuel.requestScriptText+="\n_pageSlots['"+n+"'] = googletag.defineOutOfPageSlot('"+t+"', '"+n+"').addService(googletag.pubads());\n",i=window.googletag.defineOutOfPageSlot(t,n).addService(window.googletag.pubads())),i}function u(t,n,i){var o;return e("defining standard slot",{adPath:t,sizes:n,slotId:i})&&(Ne("Building Standard Slot Object",{adPath:t,sizes:n,slotId:i}),AdFuel.requestScriptText+="\n_pageSlots['"+i+"'] = googletag.defineSlot('"+t+"', "+JSON.stringify(n)+", '"+i+"').addService(googletag.pubads());\n",o=window.googletag.defineSlot(t,n,i).addService(window.googletag.pubads())),o}function p(e,t){var n=e.getSlotElementId();Ne("Setting Slot Category Exclusion",{slotId:n,value:t}),AdFuel.requestScriptText+="_pageSlots['"+n+"'].setCategoryExclusion('"+t+"');\n",e.setCategoryExclusion(t)}function f(e,t,n){var i=e.getSlotElementId();Ne("Setting Slot Targeting",{slotId:i,key:t,value:n}),AdFuel.requestScriptText+="_pageSlots['"+i+"'].setTargeting('"+t+"', '"+n+"');\n",e.setTargeting(t,n)}function h(e,t){var n=e.getSlotElementId();Ne("Setting Slot SafeFrame config",{slotId:n,value:t}),AdFuel.requestScriptText+="_pageSlots['"+n+"'].setSafeFrameConfig("+t+");\n",e.setSafeFrameConfig(t)}function m(e,t){var n=e.getSlotElementId();Ne("Setting Slot size mapping",{slotId:n,responsiveMap:t}),AdFuel.requestScriptText+="_pageSlots['"+n+"'].defineSizeMapping('"+JSON.stringify(t)+"');\n",e.defineSizeMapping(t)}function g(e){AdFuel.requestScriptText+='googletag.display("'+e+'");\n',window.googletag.display(e),U({type:"slots",id:e,data:{display:Date.now()}})}function v(e){var t=e.getSlotElementId();Ne("Clearing targeting for Slot: "+t),AdFuel.requestScriptText+="_pageSlots['"+t+"'].clearTargeting();\n",e.clearTargeting()}function y(e){var t=0==e.length?"all":e.map(function(e){return e.getSlotElementId()}).join(",");AdFuel.requestScriptText+="googletag.pubads().clear("+t+");\n",e.length>0?window.googletag.pubads().clear(e):window.googletag.pubads().clear()}function w(e){var t=0==e.length?"all":e.map(function(e){return e.getSlotElementId()}).join(",");AdFuel.requestScriptText+="googletag.pubads().destroySlots("+t+");\n",e.length>0?window.googletag.destroySlots(e):window.googletag.destroySlots()}function _(e,t){t=t||{maintainCorrelator:!0};var n=0==e.length?"all":e.map(function(e){return e.getSlotElementId()}).join(",");AdFuel.requestScriptText+="googletag.pubads().refresh("+n+");\n",e.length>0?window.googletag.pubads().refresh(e,{changeCorrelator:!t.maintainCorrelator}):window.googletag.pubads().refresh(null,{changeCorrelator:!t.maintainCorrelator})}window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[];var b=!1,C=!1;return{executeWhenAvailable:t,isAvailable:e,configurePubAds:n,clearTargeting:i,setTargeting:o,setLocation:a,setChildDirectedTreatmentTag:r,setSafeFrameConfig:s,setSlotSafeFrameConfig:h,setCategoryExclusion:l,updateCorrelator:d,defineOutOfPageSlot:c,defineSlot:u,setSlotCategoryExclusion:p,setSlotTargeting:f,displaySlotById:g,defineSlotSizeMapping:m,refreshSlots:_,clearSlots:y,clearSlotTargeting:v,destroySlots:w}}();return i(window,"load",function(e){U({type:"timeline",id:"navigation_start",data:{id:1,timestamp:window.performance.timing.navigationStart}}),U({type:"timeline",id:"fetch_start",data:{id:1,timestamp:window.performance.timing.fetchStart}}),U({type:"timeline",id:"domain_lookup_start",data:{id:1,timestamp:window.performance.timing.domainLookupStart}}),U({type:"timeline",id:"connection_start",data:{id:1,timestamp:window.performance.timing.connectStart}}),U({type:"timeline",id:"document_request_start",data:{id:1,timestamp:window.performance.timing.requestStart}}),setTimeout(function(){U({type:"timeline",id:"window_load",data:{id:1,timestamp:window.performance.timing.loadEventEnd}})},1e3)}),{init:te,logit:V,addEvent:i,setOptions:se,clearSlot:re(N),clearSlots:re(N),clearAllSlots:re(N),queueSingleton:$,processNewRegistry:K,reloadAd:re(J),refreshAd:re(G),refreshAds:re(Y),refreshAllAds:re(Z),renderSingleSlot:X,requestAndRenderAds:D,pageSlots:Fe,pageSlotsObj:Fe,dynamicTargeting:xe,setBulkTargeting:H,dispatchQueue:D,queueRegistry:j,getQueuedSlots:ne,getSlotDetails:ie,refresh:re(P),destroySlots:re(T),removePageLevelTarget:re(_),removeSlotLevelTarget:re(C),addPageLevelTarget:re(w),addSlotLevelTarget:re(b),generateSingletonId:o,registry:new be,requestScriptText:"",updateCorrelator:le,readCookie:r,registerModule:oe,unregisterModule:ae,registeredModules:De,timestamp:Se,metrics:Pe,addMetric:U,getMetricTypes:L,getMetricsByType:q,getMetricById:z,rocketeerSlots:Oe}}();window.AMPTManager={};for(var exposedMethods=Object.getOwnPropertyNames(window.AdFuel),x=0;x<exposedMethods.length;x++){var methodName=exposedMethods[x];"function"==typeof window.AdFuel[methodName]?window.AMPTManager[methodName]=sendDeprecationNotification(methodName):window.AMPTManager[methodName]=window.AdFuel[methodName]}window.AdFuel.init(),function(e){var t=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(e){return!e||/^\s*$/.test(e)},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isArray:e.isArray,isFunction:e.isFunction,isObject:e.isPlainObject,isUndefined:function(e){return void 0===e},toStr:function(e){return t.isUndefined(e)||null===e?"":e+""},bind:e.proxy,each:function(t,n){function i(e,t){return n(t,e)}e.each(t,i)},map:e.map,filter:e.grep,every:function(t,n){var i=!0;return t?(e.each(t,function(e,o){if(!(i=n.call(null,o,e,t)))return!1}),!!i):i},some:function(t,n){var i=!1;return t?(e.each(t,function(e,o){if(i=n.call(null,o,e,t))return!1}),!!i):i},mixin:e.extend,getUniqueId:function(){var e=0;return function(){return e++}}(),templatify:function(t){function n(){return String(t)}return e.isFunction(t)?t:n},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var i,o;return function(){var a,r,s=this,l=arguments;return a=function(){i=null,n||(o=e.apply(s,l))},r=n&&!i,clearTimeout(i),i=setTimeout(a,t),r&&(o=e.apply(s,l)),o}},throttle:function(e,t){var n,i,o,a,r,s;return r=0,s=function(){r=new Date,o=null,a=e.apply(n,i)},function(){var l=new Date,d=t-(l-r);return n=this,i=arguments,d<=0?(clearTimeout(o),o=null,r=l,a=e.apply(n,i)):o||(o=setTimeout(s,d)),a}},noop:function(){}}}(),n="0.10.5",i=function(){"use strict";function e(e){return e=t.toStr(e),e?e.split(/\s+/):[]}function n(e){return e=t.toStr(e),e?e.split(/\W+/):[]}function i(e){return function(){var n=[].slice.call(arguments,0);return function(i){var o=[];return t.each(n,function(n){o=o.concat(e(t.toStr(i[n])))}),o}}}return{nonword:n,whitespace:e,obj:{nonword:i(n),whitespace:i(e)}}}(),o=function(){"use strict";function n(n){this.maxSize=t.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=e.noop)}function i(){this.head=this.tail=null}function o(e,t){this.key=e,this.val=t,this.prev=this.next=null}return t.mixin(n.prototype,{set:function(e,t){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(n=this.hash[e])?(n.val=t,this.list.moveToFront(n)):(n=new o(e,t),this.list.add(n),this.hash[e]=n,this.size++)},get:function(e){var t=this.hash[e];if(t)return this.list.moveToFront(t),t.val},reset:function(){this.size=0,this.hash={},this.list=new i}}),t.mixin(i.prototype,{add:function(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(e){this.remove(e),this.add(e)}}),n}(),a=function(){"use strict";function e(e){this.prefix=["__",e,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+t.escapeRegExChars(this.prefix))}function n(){return(new Date).getTime()}function i(e){return JSON.stringify(t.isUndefined(e)?null:e)}function o(e){return JSON.parse(e)}var a,r;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(e){a=null}return r=a&&window.JSON?{_prefix:function(e){return this.prefix+e},_ttlKey:function(e){return this._prefix(e)+this.ttlKey},get:function(e){return this.isExpired(e)&&this.remove(e),o(a.getItem(this._prefix(e)))},set:function(e,o,r){return t.isNumber(r)?a.setItem(this._ttlKey(e),i(n()+r)):a.removeItem(this._ttlKey(e)),a.setItem(this._prefix(e),i(o))},remove:function(e){return a.removeItem(this._ttlKey(e)),a.removeItem(this._prefix(e)),this},clear:function(){var e,t,n=[],i=a.length;for(e=0;e<i;e++)(t=a.key(e)).match(this.keyMatcher)&&n.push(t.replace(this.keyMatcher,""));for(e=n.length;e--;)this.remove(n[e]);return this},isExpired:function(e){var i=o(a.getItem(this._ttlKey(e)));return!!(t.isNumber(i)&&n()>i)}}:{get:t.noop,set:t.noop,remove:t.noop,clear:t.noop,isExpired:t.noop},t.mixin(e.prototype,r),e}(),r=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?i(t.transport):e.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=!1===t.cache?new o(0):l}function i(n){return function(i,o){function a(e){t.defer(function(){s.resolve(e)})}function r(e){t.defer(function(){s.reject(e)})}var s=e.Deferred();return n(i,o,a,r),s}}var a=0,r={},s=6,l=new o(10);return n.setMaxPendingRequests=function(e){s=e},n.resetCache=function(){l.reset()},t.mixin(n.prototype,{_get:function(e,t,n){function i(t){n&&n(null,t),c._cache.set(e,t)}function o(){n&&n(!0)}function l(){a--,delete r[e],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)}var d,c=this;this.cancelled||e!==this.lastUrl||((d=r[e])?d.done(i).fail(o):a<s?(a++,r[e]=this._send(e,t).done(i).fail(o).always(l)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(e,n,i){var o;return t.isFunction(n)&&(i=n,n={}),this.cancelled=!1,this.lastUrl=e,(o=this._cache.get(e))?t.defer(function(){i&&i(null,o)}):this._get(e,n,i),!!o},cancel:function(){this.cancelled=!0}}),n}(),s=function(){"use strict";function n(t){t=t||{},t.datumTokenizer&&t.queryTokenizer||e.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function i(e){return e=t.filter(e,function(e){return!!e}),e=t.map(e,function(e){return e.toLowerCase()})}function o(){return{ids:[],children:{}}}function a(e){for(var t={},n=[],i=0,o=e.length;i<o;i++)t[e[i]]||(t[e[i]]=!0,n.push(e[i]));return n}function r(e,t){function n(e,t){return e-t}var i=0,o=0,a=[];e=e.sort(n),t=t.sort(n);for(var r=e.length,s=t.length;i<r&&o<s;)e[i]<t[o]?i++:e[i]>t[o]?o++:(a.push(e[i]),i++,o++);return a}return t.mixin(n.prototype,{bootstrap:function(e){this.datums=e.datums,this.trie=e.trie},add:function(e){var n=this;e=t.isArray(e)?e:[e],t.each(e,function(e){var a,r;a=n.datums.push(e)-1,r=i(n.datumTokenizer(e)),t.each(r,function(e){var t,i,r;for(t=n.trie,i=e.split("");r=i.shift();)t=t.children[r]||(t.children[r]=o()),t.ids.push(a)})})},get:function(e){var n,o,s=this;return n=i(this.queryTokenizer(e)),t.each(n,function(e){var t,n,i,a;if(o&&0===o.length)return!1;for(t=s.trie,n=e.split("");t&&(i=n.shift());)t=t.children[i];if(!t||0!==n.length)return o=[],!1;a=t.ids.slice(0),o=o?r(o,a):a}),o?t.map(a(o),function(e){return s.datums[e]}):[]},reset:function(){this.datums=[],this.trie=o()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),l=function(){"use strict";function i(e){return e.local||null}function o(i){var o,a;return a={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(o=i.prefetch||null)&&(o=t.isString(o)?{url:o}:o,o=t.mixin(a,o),o.thumbprint=n+o.thumbprint,o.ajax.type=o.ajax.type||"GET",o.ajax.dataType=o.ajax.dataType||"json",!o.url&&e.error("prefetch requires url to be set")),o}function a(n){var i,o;return o={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(i=n.remote||null)&&(i=t.isString(i)?{url:i}:i,i=t.mixin(o,i),i.rateLimiter=/^throttle$/i.test(i.rateLimitBy)?function(e){return function(n){return t.throttle(n,e)}}(i.rateLimitWait):function(e){return function(n){return t.debounce(n,e)}}(i.rateLimitWait),i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",delete i.rateLimitBy,delete i.rateLimitWait,!i.url&&e.error("remote requires url to be set")),i}return{local:i,prefetch:o,remote:a}}();!function(n){"use strict";function o(t){t&&(t.local||t.prefetch||t.remote)||e.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=d(t.sorter),this.dupDetector=t.dupDetector||c,this.local=l.local(t),this.prefetch=l.prefetch(t),this.remote=l.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new s({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new a(this.cacheKey):null}function d(e){function n(t){return t.sort(e)}function i(e){return e}return t.isFunction(e)?n:i}function c(){return!1}var u,p;u=n.Bloodhound,p={data:"data",protocol:"protocol",thumbprint:"thumbprint"},n.Bloodhound=o,o.noConflict=function(){return n.Bloodhound=u,o},o.tokenizers=i,t.mixin(o.prototype,{_loadPrefetch:function(t){function n(e){a.clear(),a.add(t.filter?t.filter(e):e),a._saveToStorage(a.index.serialize(),t.thumbprint,t.ttl)}var i,o,a=this;return(i=this._readFromStorage(t.thumbprint))?(this.index.bootstrap(i),o=e.Deferred().resolve()):o=e.ajax(t.url,t.ajax).done(n),o},_getFromRemote:function(e,t){function n(e,n){t(e?[]:a.remote.filter?a.remote.filter(n):n)}var i,o,a=this;if(this.transport)return e=e||"",o=encodeURIComponent(e),i=this.remote.replace?this.remote.replace(this.remote.url,e):this.remote.url.replace(this.remote.wildcard,o),this.transport.get(i,this.remote.ajax,n)},_cancelLastRemoteRequest:function(){this.transport&&this.transport.cancel()},_saveToStorage:function(e,t,n){this.storage&&(this.storage.set(p.data,e,n),this.storage.set(p.protocol,location.protocol,n),this.storage.set(p.thumbprint,t,n))},_readFromStorage:function(e){var t,n={};return this.storage&&(n.data=this.storage.get(p.data),n.protocol=this.storage.get(p.protocol),n.thumbprint=this.storage.get(p.thumbprint)),t=n.thumbprint!==e||n.protocol!==location.protocol,n.data&&!t?n.data:null},_initialize:function(){function n(){o.add(t.isFunction(a)?a():a)}var i,o=this,a=this.local;return i=this.prefetch?this._loadPrefetch(this.prefetch):e.Deferred().resolve(),a&&i.done(n),this.transport=this.remote?new r(this.remote):null,this.initPromise=i.promise()},initialize:function(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function(e){this.index.add(e)},get:function(e,n){function i(e){var i=a.slice(0);t.each(e,function(e){var n;return n=t.some(i,function(t){return o.dupDetector(e,t)}),!n&&i.push(e),i.length<o.limit}),n&&n(o.sorter(i))}var o=this,a=[],r=!1;a=this.index.get(e),a=this.sorter(a).slice(0,this.limit),a.length<this.limit?r=this._getFromRemote(e,i):this._cancelLastRemoteRequest(),r||(a.length>0||!this.transport)&&n&&n(a)},clear:function(){this.index.reset()},clearPrefetchCache:function(){this.storage&&this.storage.clear()},clearRemoteCache:function(){this.transport&&r.resetCache()},ttAdapter:function(){return t.bind(this.get,this)}})}(this);var d=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}(),c=function(){"use strict";var e={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return t.isMsie()&&t.mixin(e.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t.isMsie()&&t.isMsie()<=7&&t.mixin(e.input,{marginTop:"-1px"}),e}(),u=function(){"use strict";function n(t){t&&t.el||e.error("EventBus initialized without el"),this.$el=e(t.el)}return t.mixin(n.prototype,{trigger:function(e){var t=[].slice.call(arguments,1);this.$el.trigger("typeahead:"+e,t)}}),n}(),p=function(){"use strict";function e(e,t,n,i){var o;if(!n)return this;for(t=t.split(s),n=i?r(n,i):n,this._callbacks=this._callbacks||{};o=t.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][e].push(n);return this}function t(t,n,i){return e.call(this,"async",t,n,i)}function n(t,n,i){return e.call(this,"sync",t,n,i)}function i(e){var t;if(!this._callbacks)return this;for(e=e.split(s);t=e.shift();)delete this._callbacks[t];return this}function o(e){var t,n,i,o,r;if(!this._callbacks)return this;for(e=e.split(s),i=[].slice.call(arguments,1);(t=e.shift())&&(n=this._callbacks[t]);)o=a(n.sync,this,[t].concat(i)),r=a(n.async,this,[t].concat(i)),o()&&l(r);return this}function a(e,t,n){function i(){for(var i,o=0,a=e.length;!i&&o<a;o+=1)i=!1===e[o].apply(t,n);return!i}return i}function r(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}var s=/\s+/,l=function(){return window.setImmediate?function(e){setImmediate(function(){e()})}:function(e){setTimeout(function(){e()},0)}}();return{onSync:n,onAsync:t,off:i,trigger:o}}(),f=function(e){"use strict";function n(e,n,i){for(var o,a=[],r=0,s=e.length;r<s;r++)a.push(t.escapeRegExChars(e[r]));return o=i?"\\b("+a.join("|")+")\\b":"("+a.join("|")+")",n?new RegExp(o):new RegExp(o,"i")}var i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function a(t){var n,i,a;return(n=s.exec(t.data))&&(a=e.createElement(o.tagName),o.className&&(a.className=o.className),i=t.splitText(n.index),i.splitText(n[0].length),a.appendChild(i.cloneNode(!0)),t.parentNode.replaceChild(a,i)),!!n}function r(e,t){for(var n,i=0;i<e.childNodes.length;i++)n=e.childNodes[i],3===n.nodeType?i+=t(n)?1:0:r(n,t)}var s;o=t.mixin({},i,o),o.node&&o.pattern&&(o.pattern=t.isArray(o.pattern)?o.pattern:[o.pattern],s=n(o.pattern,o.caseSensitive,o.wordsOnly),r(o.node,a))}}(window.document),h=function(){"use strict";function n(n){var o,a,s,l,d=this;n=n||{},n.input||e.error("input is missing"),o=t.bind(this._onBlur,this),a=t.bind(this._onFocus,this),s=t.bind(this._onKeydown,this),l=t.bind(this._onInput,this),this.$hint=e(n.hint),this.$input=e(n.input).on("blur.tt",o).on("focus.tt",a).on("keydown.tt",s),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=t.noop),t.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(e){r[e.which||e.keyCode]||t.defer(t.bind(d._onInput,d,e))}):this.$input.on("input.tt",l),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(t){return e('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function o(e,t){return n.normalizeQuery(e)===n.normalizeQuery(t)}function a(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}var r;return r={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},t.mixin(n.prototype,p,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=r[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var n,i,o;switch(e){case"tab":i=this.getHint(),o=this.getInputValue(),n=i&&i!==o&&!a(t);break;case"up":case"down":n=!a(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!a(t);break;default:n=!0}return n},_checkInputValue:function(){var e,t,n;e=this.getInputValue(),t=o(e,this.query),n=!!t&&this.query.length!==e.length,this.query=e,t?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){this.$input.val(e),t?this.clearHint():this._checkInputValue()},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n,i;e=this.getInputValue(),t=this.getHint(),n=e!==t&&0===t.indexOf(e),!(i=""!==e&&n&&!this.hasOverflow())&&this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,n,i;return e=this.$input.val().length,n=this.$input[0].selectionStart,t.isNumber(n)?n===e:!document.selection||(i=document.selection.createRange(),i.moveStart("character",-e),e===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),m=function(){"use strict";function n(n){n=n||{},n.templates=n.templates||{},n.source||e.error("missing source"),n.name&&!a(n.name)&&e.error("invalid dataset name: "+n.name),this.query=null,this.highlight=!!n.highlight,this.name=n.name||t.getUniqueId(),this.source=n.source,this.displayFn=i(n.display||n.displayKey),this.templates=o(n.templates,this.displayFn),this.$el=e(d.dataset.replace("%CLASS%",this.name))}function i(e){function n(t){return t[e]}return e=e||"value",t.isFunction(e)?e:n}function o(e,n){function i(e){return"<p>"+n(e)+"</p>"}return{empty:e.empty&&t.templatify(e.empty),header:e.header&&t.templatify(e.header),footer:e.footer&&t.templatify(e.footer),suggestion:e.suggestion||i}}function a(e){return/^[_a-zA-Z0-9-]+$/.test(e)}var r="ttDataset",s="ttValue",l="ttDatum";return n.extractDatasetName=function(t){return e(t).data(r)},n.extractValue=function(t){return e(t).data(s)},n.extractDatum=function(t){return e(t).data(l)},t.mixin(n.prototype,p,{_render:function(n,i){function o(){return p.templates.header({query:n,isEmpty:!u})}function a(){return p.templates.footer({query:n,isEmpty:!u})}if(this.$el){var u,p=this;this.$el.empty(),u=i&&i.length,!u&&this.templates.empty?this.$el.html(function(){return p.templates.empty({query:n,isEmpty:!0})}()).prepend(p.templates.header?o():null).append(p.templates.footer?a():null):u&&this.$el.html(function(){function o(t){var n;return n=e(d.suggestion).append(p.templates.suggestion(t)).data(r,p.name).data(s,p.displayFn(t)).data(l,t),n.children().each(function(){e(this).css(c.suggestionChild)}),n}var a,u;return a=e(d.suggestions).css(c.suggestions),u=t.map(i,o),a.append.apply(a,u),p.highlight&&f({className:"tt-highlight",node:a[0],pattern:n}),a}()).prepend(p.templates.header?o():null).append(p.templates.footer?a():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function t(t){n.canceled||e!==n.query||n._render(e,t)}var n=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),n}(),g=function(){"use strict";function n(n){var o,a,r,s=this;n=n||{},n.menu||e.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=t.map(n.datasets,i),o=t.bind(this._onSuggestionClick,this),a=t.bind(this._onSuggestionMouseEnter,this),r=t.bind(this._onSuggestionMouseLeave,this),this.$menu=e(n.menu).on("click.tt",".tt-suggestion",o).on("mouseenter.tt",".tt-suggestion",a).on("mouseleave.tt",".tt-suggestion",r),t.each(this.datasets,function(e){s.$menu.append(e.getRoot()),e.onSync("rendered",s._onRendered,s)})}function i(e){return new m(e)}return t.mixin(n.prototype,p,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",e(t.currentTarget))},_onSuggestionMouseEnter:function(t){this._removeCursor(),this._setCursor(e(t.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function e(e){return e.isEmpty()}this.isEmpty=t.every(this.datasets,e),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(e,t){e.first().addClass("tt-cursor"),!t&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(e){var t,n,i,o;if(this.isOpen){if(n=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),i=t.index(n)+e,-1===(i=(i+1)%(t.length+1)-1))return void this.trigger("cursorRemoved");i<-1&&(i=t.length-1),this._setCursor(o=t.eq(i)),this._ensureVisible(o)}},_ensureVisible:function(e){var t,n,i,o;t=e.position().top,n=t+e.outerHeight(!0),i=this.$menu.scrollTop(),o=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),t<0?this.$menu.scrollTop(i+t):o<n&&this.$menu.scrollTop(i+(n-o))},close:function(){
this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?c.ltr:c.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:m.extractDatum(e),value:m.extractValue(e),datasetName:m.extractDatasetName(e)}),t},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(e){function n(t){t.update(e)}t.each(this.datasets,n)},empty:function(){function e(e){e.clear()}t.each(this.datasets,e),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function e(e){e.destroy()}this.$menu.off(".tt"),this.$menu=null,t.each(this.datasets,e)}}),n}(),v=function(){"use strict";function n(n){var o,a,r;n=n||{},n.input||e.error("missing input"),this.isActivated=!1,this.autoselect=!!n.autoselect,this.minLength=t.isNumber(n.minLength)?n.minLength:1,this.$node=i(n.input,n.withHint),o=this.$node.find(".tt-dropdown-menu"),a=this.$node.find(".tt-input"),r=this.$node.find(".tt-hint"),a.on("blur.tt",function(e){var n,i,r;n=document.activeElement,i=o.is(n),r=o.has(n).length>0,t.isMsie()&&(i||r)&&(e.preventDefault(),e.stopImmediatePropagation(),t.defer(function(){a.focus()}))}),o.on("mousedown.tt",function(e){e.preventDefault()}),this.eventBus=n.eventBus||new u({el:a}),this.dropdown=new g({menu:o,datasets:n.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new h({input:a,hint:r}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function i(t,n){var i,a,s,l;i=e(t),a=e(d.wrapper).css(c.wrapper),s=e(d.dropdown).css(c.dropdown),l=i.clone().css(c.hint).css(o(i)),l.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),i.data(r,{dir:i.attr("dir"),autocomplete:i.attr("autocomplete"),spellcheck:i.attr("spellcheck"),style:i.attr("style")}),i.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(n?c.input:c.inputWithNoHint);try{!i.attr("dir")&&i.attr("dir","auto")}catch(e){}return i.wrap(a).parent().prepend(n?l:null).append(s)}function o(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}function a(e){var n=e.find(".tt-input");t.each(n.data(r),function(e,i){t.isUndefined(e)?n.removeAttr(i):n.attr(i,e)}),n.detach().removeData(r).removeClass("tt-input").insertAfter(e),e.remove()}var r="ttAttrs";return t.mixin(n.prototype,{_onSuggestionClicked:function(e,t){var n;(n=this.dropdown.getDatumForSuggestion(t))&&this._select(n)},_onCursorMoved:function(){var e=this.dropdown.getDatumForCursor();this.input.setInputValue(e.value,!0),this.eventBus.trigger("cursorchanged",e.raw,e.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function(e,t){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),t.preventDefault()):this.autoselect&&i&&(this._select(i),t.preventDefault())},_onTabKeyed:function(e,t){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e;this.dir!==(e=this.input.getLanguageDirection())&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,n,i,o,a,r;e=this.dropdown.getDatumForTopSuggestion(),e&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(n=this.input.getInputValue(),i=h.normalizeQuery(n),o=t.escapeRegExChars(i),a=new RegExp("^(?:"+o+")(.+$)","i"),r=a.exec(e.value),r?this.input.setHint(n+r[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,n,i,o;t=this.input.getHint(),n=this.input.getQuery(),i=e||this.input.isCursorAtEnd(),t&&n!==t&&i&&(o=this.dropdown.getDatumForTopSuggestion(),o&&this.input.setInputValue(o.value),this.eventBus.trigger("autocompleted",o.raw,o.datasetName))},_select:function(e){this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",e.raw,e.datasetName),this.dropdown.close(),t.defer(t.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){e=t.toStr(e),this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),a(this.$node),this.$node=null}}),n}();!function(){"use strict";var n,i,o;n=e.fn.typeahead,i="ttTypeahead",o={initialize:function(n,o){function a(){var a,r=e(this);t.each(o,function(e){e.highlight=!!n.highlight}),a=new v({input:r,eventBus:new u({el:r}),withHint:!!t.isUndefined(n.hint)||!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:o}),r.data(i,a)}return o=t.isArray(o)?o:[].slice.call(arguments,1),n=n||{},this.each(a)},open:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.open()}return this.each(t)},close:function(){function t(){var t,n=e(this);(t=n.data(i))&&t.close()}return this.each(t)},val:function(t){function n(){var n,o=e(this);(n=o.data(i))&&n.setVal(t)}return arguments.length?this.each(n):function(e){var t,n;return(t=e.data(i))&&(n=t.getVal()),n}(this.first())},destroy:function(){function t(){var t,n=e(this);(t=n.data(i))&&(t.destroy(),n.removeData(i))}return this.each(t)}},e.fn.typeahead=function(t){var n;return o[t]&&"initialize"!==t?(n=this.filter(function(){return!!e(this).data(i)}),o[t].apply(n,[].slice.call(arguments,1))):o.initialize.apply(this,arguments)},e.fn.typeahead.noConflict=function(){return e.fn.typeahead=n,this}}()}(window.jQuery),jQuery(document).onZonesAndDomReady(function(){"use strict";fastdom.measure(function(){function e(e,t,n){fastdom.mutate(function(){jQuery(e).off(t).on(t,n)})}function t(){CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?(e(".js__image--expandable","click",function(){var e=jQuery(this);fastdom.mutate(function(){var t=e.parents(".el__embedded");t.find(".el__image__close--expandable").show(),e.stop().animate({width:"100%","margin-top":A,"margin-right":0},w,function(){fastdom.mutate(function(){CNN.ResponsiveImages.processChildrenImages(this),t.addClass("el__embedded--open").height(e.outerHeight())}.bind(this))}).show().addClass("el__image--expandfull").removeClass("el__image--expandable")})}),e(".js__image__close--expandable","click",function(e){var t=jQuery(this),n=t.parents(".el__embedded");fastdom.mutate(function(){n.removeClass("el__embedded--open").css("height","auto"),t.hide(),n.find(".js__image--expandable").stop().animate({width:v,"margin-top":"10px","margin-right":"30px"},w,function(){fastdom.mutate(function(){CNN.ResponsiveImages.processChildrenImages(this)}.bind(this))}).show().addClass("el__image--expandable").removeClass("el__image--expandfull")}),e.stopPropagation()}),fastdom.mutate(function(){jQuery(".el__image--expandable .el__image__expand--expandable").show(),jQuery(".el__image--expandfull .el__image__close--expandable").show()})):fastdom.mutate(function(){jQuery(".el__image__close--expandable").hide(),jQuery(".el__image__expand--expandable").hide(),jQuery(".js__image--expandable").off()})}function n(e,t,n,i){var o,a,r,s,l=!!n;!0!==l&&!0!==i||(a=t.find(".media__video--responsive"),o=a.attr("id"),"fave"===CNN.VideoPlayer.getLibraryName(o)&&(s=FAVE.player.getInstance(o),s.resume())),r=function(){var n,r=t.parents(".el__embedded"),d=t.find(".media__video--thumbnail"),c=t.find(".el__storyelements--close"),u=r.find(".video-red-spinner"),p=a||t.find(".media__video--responsive"),f=p.find("object").get(0),h=p.find("video").get(0),m=o||p.attr("id"),v=navigator.userAgent.toLowerCase();void 0===g&&(g=t.width()),!1===l&&!0!==i&&"fave"===CNN.VideoPlayer.getLibraryName(m)&&(s=FAVE.player.getInstance(m),s.resume()),n=function(){d.css("position",""),t.stop().animate({width:"100%","margin-top":A,"margin-right":0},w,function(){fastdom.mutate(function(){"videoLoader"===CNN.VideoPlayer.getLibraryName(m)&&(b?(u.show(),-1===v.indexOf("msie")&&-1===v.indexOf("trident")||void 0===f||f.replayContent()):void 0!==h&&h.play(),t.find(".el__video__play-button").triggerHandler("click")),r.addClass("el__embedded--open")})}),t.show().addClass("el__video--expandfull").removeClass(e),p.show(),window.innerWidth>CNN.minWidthForExpandElements?(c.show(),c.css("display","block")):(c.hide(),c.css("display","none")),FAVE.settings.enabled&&jQuery(window).on("orientationchange",function(){fastdom.mutate(function(){window.innerWidth>CNN.minWidthForExpandElements?(c.show(),c.css("display","block")):(c.hide(),c.css("display","none"))})})},!0===i?n():fastdom.mutate(n)},!0===i?r():fastdom.measure(r)}function i(e,t,n){fastdom.measure(function(){var n,i,o=t.parents(".el__embedded"),a=o.find(".media__video--thumbnail"),r=o.find(".media__video--responsive"),s=o.find(".video-red-spinner"),l=r.find("object").get(0),d=r.find("video").get(0),c=r.attr("id"),u=navigator.userAgent.toLowerCase();t=t.parent(),fastdom.mutate(function(){o.removeClass("el__embedded--open"),t.stop().animate({width:g,"margin-top":"10px","margin-right":"30px"},w,function(){fastdom.mutate(function(){t.css("width","")})}),t.find(".el__video__close--expandable").hide(),t.addClass(e).removeClass("el__video--expandfull"),r.hide(),a.show(),a.css("position","relative"),"fave"===CNN.VideoPlayer.getLibraryName(c)?(i=FAVE.player.getInstance(c),i.pause()):b?(s.hide(),-1===u.indexOf("msie")&&-1===u.indexOf("trident")||void 0===l||l.stopContent()):void 0!==d&&d.pause()}),n=o.find(".js-media__video .js-video__end-slate").eq(0),fastdom.mutate(function(){n.removeClass("video__end-slate--active").addClass("video__end-slate--inactive"),o.find(".js-video-demand").show()})}),n.stopPropagation()}function o(){fastdom.measure(function(){e(".js__video--standard .media__video--thumbnail","click",function(e){n("el__video--standard",jQuery(this).parents(".js__video--standard"),e)}),e(".js__video--expandable .media__video--thumbnail","click",function(e){n("el__video--expandable",jQuery(this).parents(".js__video--expandable"),e)}),e(".js__video__close--standard","click",function(e){i("el__video--standard",jQuery(this),e)}),e(".js__video__close--expandable","click",function(e){i("el__video--expandable",jQuery(this),e)}),fastdom.mutate(function(){jQuery(".el__video--expandfull .el__video__close--standard").show(),jQuery(".el__video--expandfull .el__video__close--expandable").show(),jQuery(".el__video--expandable .el__video__expand--expandable").show(),jQuery(".el__video--standard .el__video__expand--standard").show(),jQuery(".js-video-demand").show()}),E=!1}.bind(this))}function a(){fastdom.measure(function(){CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?(e(".js__video--standard","click",function(e){n("el__video--standard",jQuery(this),e)}),e(".js__video--expandable","click",function(e){n("el__video--expandable",jQuery(this),e)}),e(".js__video__close--standard","click",function(e){i("el__video--standard",jQuery(this),e)}),e(".js__video__close--expandable","click",function(e){i("el__video--expandable",jQuery(this),e)}),fastdom.mutate(function(){jQuery(".el__video--expandfull .el__video__close--standard").show(),jQuery(".el__video--expandfull .el__video__close--expandable").show(),jQuery(".el__video--expandable .el__video__expand--expandable").show(),jQuery(".el__video--standard .el__video__expand--standard").show(),jQuery(".js-video-demand").show()})):fastdom.mutate(function(){jQuery(".el__video__close--standard").hide(),jQuery(".el__video__expand--standard").hide(),jQuery(".el__video__close--expandable").hide(),jQuery(".el__video__expand--expandable").hide(),!0===CNN.orientationLandscape?jQuery(".js-video-demand").show():jQuery(".js-video-demand").hide()}),!1===E&&!0===CNN.orientationLandscape&&(jQuery(".js__video--standard").each(function(){var e,t=jQuery(this),i=t.find(".js-video-demand");0===t.find(".js-el__video__play-button").size()?(e=t.find(".el__video__expand--standard"),fastdom.mutate(function(e,t){e.hide(),!0===CNN.orientationLandscape&&n("el__video--standard",t,null,!0)}.bind(this,i,e))):fastdom.mutate(function(e){e.show()}.bind(this,i))}),jQuery(".js__video--expandable").each(function(){var e,t=jQuery(this),i=t.find(".js-video-demand");0===t.find(".js-el__video__play-button").size()?(e=t.find(".el__video__expand--expandable"),fastdom.mutate(function(e,t){e.hide(),!0===CNN.orientationLandscape&&n("el__video--expandable",t,null,!0)}.bind(this,i,e))):fastdom.mutate(function(e){e.show()}.bind(this,i))})),E=!1}.bind(this))}function r(){FAVE.settings.enabled?o():a()}function s(e,t,n){t.is(".el__gallery--expandfull")||(void 0===m&&(m=t.width()),CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?fastdom.measure(function(){var n,i,o=t.parents(".el__embedded"),a=t,r=t.find(".el__gallery--teaseimage"),s=t.find(".el-carousel__wrapper"),l=s.find(".js-owl-carousel"),d=s.find(".js-owl-filmstrip"),c=!!s.attr("data-initialized");i=function(e){e.css({opacity:"1",position:"relative","z-index":"0"}),s.attr("data-initialized","true")},fastdom.mutate(function(){s.css({display:"block",visibility:"visible",opacity:"0"}),a.stop().animate({width:o.width()+"px","margin-top":A,"margin-right":0},w,function(){fastdom.mutate(function(){a.css("width","100%"),n=9*o.width()/16/2-_,l.siblings(".ad-slide").find(".ad-slide__prev, .ad-slide__next").css("top",n+"px"),o.addClass("el__embedded--open"),o.css("overflow","hidden"),a.css({"min-height":r.height()+"px","max-height":r.height()+"px"}),setTimeout(function(e,t){fastdom.mutate(function(){e.css({"max-height":1.5*t.height()+"px"}),CNN.Carousel.refreshCarousels()})},100,a,l),!1===c||l.data("owl.carousel").width()!==a.width()?(l.on("resized.owl.carousel",{$wrapper:s},function(e){fastdom.mutate(function(){i(e.data.$wrapper),jQuery(this).off("resized.owl.carousel")}.bind(this))}),d.on("resized.owl.carousel",function(e){fastdom.mutate(function(){CNN.Carousel.owl().setNumberOfItems(e),e.relatedTarget.to(0),jQuery(this).off("resized.owl.carousel")}.bind(this))}),l.data("owl.carousel").onResize(),d.data("owl.carousel").onResize()):i(s),a.addClass("el__gallery--expandfull").removeClass(e),void 0!==s.attr("isExtended")&&"false"!==s.attr("isExtended")||(setTimeout(function(){fastdom.mutate(function(){p(jQuery(s.find(".owl-wrapper-outer")),!0,!0)})},2e3),s.attr("isExtended","true"))}.bind(this))})}.bind(this))}):n.stopPropagation())}function l(e,t,n){fastdom.measure(function(){var n=t.parents(".el__embedded"),i=n.find(".el-carousel__wrapper"),o=i.find(".owl-wrapper-outer"),a=o.find(".el__gallery-caption"),r=t.parents(".el__gallery--expandfull");fastdom.mutate(function(){n.css({"max-height":"",overflow:""}),i.css({position:"absolute",opacity:0}),n.removeClass("el__embedded--open"),r.css({"min-height":"","max-height":""}),r.stop().animate({width:m,"margin-top":"10px","margin-right":"30px"},w,function(){fastdom.mutate(function(){jQuery(this).addClass(e).removeClass("el__gallery--expandfull")}.bind(this))}),i.attr("isExtended","false"),r.addClass(e).removeClass("el__gallery--expandfull"),a.hasClass("el__gallery-caption--closed")&&(a.toggleClass("el__gallery-caption--closed"),a.text(r.hasClass("el__gallery-caption--closed")?"Show Caption":"Hide Caption"))}.bind(this))}.bind(this)),n.stopPropagation()}function d(){window.innerWidth>CNN.minWidthForExpandElements?(e(".js__gallery--standard","click",function(e){s("el__gallery--standard",jQuery(this),e)}),e(".js__gallery--expandable","click",function(e){s("el__gallery--expandable",jQuery(this),e)}),e(".js__gallery__close--standard","click",function(e){l("el__gallery--standard",jQuery(this),e)}),e(".js__gallery__close--expandable","click",function(e){l("el__gallery--expandable",jQuery(this),e)}),jQuery(".js__gallery__close--standard, .js__gallery__close--expandable").trigger("click"),fastdom.mutate(function(){jQuery(".el-carousel__wrapper").not(jQuery(".zn-large-media .el-carousel__wrapper, .el__embedded--fullstandardwidth .el-carousel__wrapper,.pg-special-article__head .el-carousel__wrapper")).css({opacity:"0",position:"","z-index":""})})):fastdom.mutate(function(){jQuery(".el-carousel__wrapper").css({opacity:"1",position:"relative","z-index":"0"})}),!1===y&&window.innerWidth<=CNN.showGalleryCaptionWidth&&c()}function c(){fastdom.measure(function(){jQuery(".js__leafmedia--gallery").each(function(e,t){fastdom.mutate(function(e,t){e.hide(),t.addClass("el__gallery-caption--closed").text("Show Caption")}.bind(this,jQuery(".el__gallery_image-title",t),jQuery(".el__gallery-caption",t)))})})}function u(e,t){var n=jQuery(e),i=n.closest(".owl-stage"),o=i.find(".el__gallery_image-title"),a=i.find(".el__gallery-caption");fastdom.mutate(function(){CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?a.hasClass("el__gallery-caption--closed")?(a.removeClass("el__gallery-caption--closed"),o.show()):(a.addClass("el__gallery-caption--closed"),o.hide()):(a.toggleClass("el__gallery-caption--closed"),o.toggle()),CNN.Carousel.refreshCarousels(),a.text(a.hasClass("el__gallery-caption--closed")?"Show Caption":"Hide Caption")})}function p(e,t,n){var i=0,o=0,a=jQuery(".owl-item",e).each(function(){o=jQuery(this).height(),t&&jQuery(this).attr("owlItemHeight",o),o>i&&(i=o)});t&&jQuery(e).attr("max",i),a.each(function(){var i=jQuery(this),o=jQuery(".el__gallery-showhide",i);t||n?o.css("bottom",i.attr("owlItemHeight")-jQuery(e).attr("max")+"px"):o.css("bottom","0px")})}function f(e){e&&fastdom.mutate(function(){var t,n;for(t=0,n=e.length;t<n;t++)p(e[t],!0,!0)})}function h(){t(),r(),d()}var m,g,v=jQuery(".js__image--expandable").width(),y=!1,w=700,_=30,b=!(!Modernizr||Modernizr.phone||Modernizr.mobile||Modernizr.tablet),C=0!==jQuery("html.mobile").length,x=jQuery(window),E=!0,A="36px",S=CNN.Utils.exists;CNN.contentModel=CNN.contentModel||{},CNN.CurrentSize=CNN.CurrentSize||{},CNN.CurrentSize.getClientWidth=CNN.CurrentSize.getClientWidth||jQuery.noop,CNN.minWidthForExpandElements=480,CNN.showGalleryCaptionWidth=640,CNN.orientationLandscape=!1,CNN.adLockingDisableWidth=960,CNN.adLockEnable=!!(S(CNN.AdsConfig)&&!0===CNN.AdsConfig.enableAdLock&&CNN.CurrentSize.getClientWidth()>=CNN.adLockingDisableWidth&&0!==jQuery(".pg-rail.pg-rail-tall__rail").length&&0!==jQuery(".pg-rail-tall__head").length),h(),C?x.on("orientationchange",function(){"function"==typeof CNN.Carousel.resetOnResize&&CNN.Carousel.resetOnResize()}):jQuery(window).resize(function(){y=!0,h(),setTimeout(function(){f(jQuery(".owl-wrapper-outer"))},2e3)}),function(){function e(e,t){function n(){o.addClass(t)}function i(){o.removeClass(t)}var o=jQuery(e).children().last(),a=CNN.eventListenerWithOptions&&CNN.eventListenerWithOptions.addListener;a(e,"touchstart",n,{passive:!0}),a(e,"touchcancel",i,{passive:!0}),a(e,"touchend",i,{passive:!0})}function t(t,o){e(o,i[n].className)}var n=0,i=[];for(i=[{selector:".js__image--expandable",className:"el__image--touchhover"},{selector:".js__video--standard",className:"el__video--touchhover"},{selector:".js__video--expandable",className:"el__video--touchhover"},{selector:".js__gallery--standard",className:"el__gallery--touchhover"},{selector:".js__gallery--expandable",className:"el__gallery--touchhover"}],n=0;n<i.length;n++)jQuery(i[n].selector).each(t)}(),jQuery(".js-el__gallery-caption").on("click",function(){fastdom.measure(function(){u(this)}.bind(this))})})});var nativo={},$staggeredZone,$staggeredColumn,$nativeContainer,layoutSize,$staggeredNativo,$authorDetails,$twitterImage,$nativeEmbedVideo,$bigPicture,isGalleryRendered=!1,$nativeHubCarousel,isEpicRendered=!1;!function(){"use strict";function e(e,t){var n=jQuery(e).closest(document.getElementById("bigPicture")),i=n.find(".media__caption"),o=n.find(".el__gallery-caption");CNN.CurrentSize=CNN.CurrentSize||{},CNN.CurrentSize.getClientWidth=CNN.CurrentSize.getClientWidth||jQuery.noop,CNN.CurrentSize.getClientWidth()>CNN.minWidthForExpandElements?o.hasClass("el__gallery-caption--closed")?o.removeClass("el__gallery-caption--closed"):o.addClass("el__gallery-caption--closed"):o.toggleClass("el__gallery-caption--closed"),i.toggle(t),o.text(o.hasClass("el__gallery-caption--closed")?"Show Caption":"Hide Caption")}function t(e){var t=jQuery(".js-pg-sponsor .owl-stage-outer .owl-stage .owl-item.synced"),i=t.next(),o=t.prev();"prev"===e?void 0!==o&&o.length>0&&n(o):void 0!==i&&i.length>0&&n(i)}function n(e){var t=jQuery(".js-pg-sponsor"),n=t.find(".cnngo-bigPicture"),i=n.find("img"),o=e.find(".link").attr("data-img-full");i.attr("src",o),e.parent().find(".owl-item").removeClass("synced"),e.addClass("synced"),n.find(".js-active-count").html(e.closest(".owl-item").index()+1),n.find(".image__caption").html(e.find(".link").attr("data-value"))}nativo={fbFeed:"",twFeed:"",social_hub:{icons:{twitter:"",facebook:"",linkedin:"",google:"",pinterest:"",instagram:""},fb_like:"",tw_follow:""}},nativo.renderAuthor=function(){"string"==typeof nativo.authorName&&nativo.authorName.length>0&&($authorDetails=jQuery(".js-sponsor-article-author"),$authorDetails.find(".js-author_name").text(nativo.authorName+","),$authorDetails.show())},nativo.renderEpic=function(){var e="international"===CNN.contentModel.edition?"cnni":"cnn";"string"==typeof nativo.epicAdName&&nativo.epicAdName.length>0&&!isEpicRendered&&(window.AdFuel.processNewRegistry(CNN.epicAdRegistry+"/"+e+"_native_"+nativo.epicAdName+".js"),jQuery(".js-epicAd_Render").show(),isEpicRendered=!0)},nativo.renderFacebook=function(){var e,t;"string"==typeof nativo.fbFeed&&nativo.fbFeed.length>0&&(e=encodeURIComponent(nativo.fbFeed),t=document.getElementById("fb-likebox"),t.innerHTML='<iframe src="//www.facebook.com/plugins/likebox.php?href='+e+'&amp;width=300&amp;height=590&amp;show_faces=true&amp;colorscheme=light&amp;stream=true&amp;show_border=true&amp;header=true&amp;appId=70673860847" scrolling="no" frameborder="0" class="sponsor-content-fb" allowTransparency="true"></iframe>')},nativo.renderTwitter=function(){var e,t;"string"==typeof nativo.twFeed&&nativo.twFeed.length>0&&(jQuery(document.getElementById("tw-feedbox")).html(nativo.twFeed),jQuery(".js-right-rail-tw").show()),t=document.getElementsByTagName("script")[0],document.getElementById("twitter-wjs")||(e=document.createElement("script"),e.id="twitter-wjs",e.src="//platform.twitter.com/widgets.js",t.parentNode.insertBefore(e,t)),"string"==typeof nativo.twitterImage&&nativo.twitterImage.length>0&&($twitterImage=jQuery(".js-twitterImage"),$twitterImage.find("img").attr("src",nativo.twitterImage),$twitterImage.show())},nativo.renderGallery=function(){setTimeout(function(){var n,i,o,a,r,s,l,d,c;jQuery(".js-pg-sponsor .owl-carousel").owlCarousel({slideSpeed:300,pagination:!0,paginationSpeed:400,items:9,nav:!0,navText:["",""],dots:!1,lazyLoad:!0,loop:!1,autoWidth:!0,autoHeight:!1}),n=jQuery(".js-pg-sponsor"),i=n.find(".cnngo-bigPicture"),o=i.find("img"),a=n.find(".owl-carousel").find(".link"),r=a.first().attr("data-img-full"),s=a.first().attr("data-value"),l=i.attr("data-title"),d=n.find(".owl-stage-outer .owl-stage"),c=d.find(".owl-item").length,0===i.find("img").length&&i.append("<img/>"),o.attr("src",r),i.append(n.find(".js-galleryCaption")),i.append(n.find(".js-owl-nav")),c>=1&&(i.find(".js-active-count").html(1),i.find(".js-total-count").html(c),i.find(".js-gallery-title").html(l),i.find(".el__storyelement__gray").html(" "+c+" Photos"),d.find(".owl-item").first().addClass("synced"),i.find(".image__caption").html(s)),a.on("click",function(e){var t=jQuery(this);o.attr("src",t.data("imgFull")),t.parent().parent().find(".owl-item").removeClass("synced"),t.parent().addClass("synced"),i.find(".js-active-count").html(t.closest(".owl-item").index()+1),i.find(".image__caption").html(t.attr("data-value"))}),i.find(".js-el__gallery-caption").click(function(){e(this,"slow")}),i.find(".js-owl-prev").click(function(){t("prev")}),i.find(".js-owl-next").click(function(){t("next")}),changeOwlCarousalWidth()},800)},jQuery(window).resize(function(){setTimeout(function(){changeOwlCarousalWidth()},300)})}(),function(){"use strict";var e;try{CNN.INJECTOR.createDeferredForFeature("header1"),CNN.INJECTOR.createDeferredForFeature("header2"),CNN.INJECTOR.createDeferredForFeature("footer"),CNN.INJECTOR.createDeferredForFeature("videodemanddust"),e=["onZonesAndDomReady","onZoneRendered"],CNN.INJECTOR.registerEvents(e),CNN.INJECTOR.scriptComplete("header1"),CNN.INJECTOR.scriptComplete("header2")}catch(e){console.log(e)}}();