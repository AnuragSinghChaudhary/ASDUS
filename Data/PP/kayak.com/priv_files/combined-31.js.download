(new R9.logger).time("combined");(function(a,b){a.createComponentClass("common.corporate.Menu",{menu:null,init:function(){this.menu=this.getChildElement("menu")},addEventHandlers:function(){var a=this;b(".leftMenuCover").bind("click",function(){a.menu.toggleClass("menuOpen")})}})})(R9,jQuery);(function(b,d){b.createComponentClass("framework.JavaScriptComponent",{options:{vertical:null,global:!1},addEventHandlers:function(){var a=this;this.subscribe("resultspage.JavaScriptComponent.cleanup",function(c){a.options.vertical===c||a.options.global?a.options.vertical=c:a.options.singleton?b.ComponentManager.removeSingleton(a._namespace):a.destroy()})}})})(R9,jQuery);(function(a,c){a.createComponentClass("common.kn.BlockerDetector",{wasBlocked:null,options:{selfAdsUrl:null,remoteAdsImgUrl:null},init:function(){var b=this;a.question.answer("adblock.detected",function(){return{adblock:b.wasBlocked}});a.events.when("ajaxComponent.highPriority.initialized",function(){b.options.selfAdsUrl&&c.ajax(b.options.selfAdsUrl,{complete:function(a,c){"error"===c&&b.blocked()}});if(b.options.remoteAdsImgUrl){var a=new Image;a.onerror=function(){b.blocked()};a.style="height:0;width:0;display:block";
a.src=b.options.remoteAdsImgUrl;document.body.appendChild(a)}})},blocked:function(){this.wasBlocked||(this.wasBlocked=1,a.Analytics.api.trackEvent("shields-up/detected"),a.events.publish("adblock.detected"),a.globals.adBlock=1)}})})(R9,jQuery);(function(b){b.createComponentClass("common.layout.StyleJamSiteWideMessage",{redirectMessage:void 0,options:{redirectFromTo:void 0,redirectFromToAlt:void 0,upgradeBrowserEnabled:!1},upgradeId:void 0,addEventHandlers:function(){var a=this;this.upgradeId=this.id("upgrade");$(document).ready(function(){a.redirectMessage=new b.Common.RedirectMessage(a.id(),a.options.redirectFromTo,a.options.redirectFromToAlt);a.redirectMessage.addEventHandlers();b.events.subscribe("frontdoor.view.changed",function(){a.redirectMessage.updateRedirectUrl()})});
$(this.upgradeId).length&&b.ajax.execute("common/upgrade/UpgradeBrowser",{appendTo:this.upgradeId})}})})(R9);(function(a,d){a.createComponentClass("common.tracking.GoogleTagManager",{searchId:null,init:function(b){this.gtm=d(b)[0];a.config.getBoolean("ui.tracking.gtm.iframe",!1)?(d(this.gtm).on("load",d.proxy(this.setUpInitialData,this)),this.gtm.src="/gtm"+location.pathname+location.search+location.hash):(this.setUpInitialData(),this.initApi())},setUpInitialData:function(){var b=a.globals.analytics||[],c=b.pixelContext||{},b={vertical:b.vertical||a.globals.vertical,locale:a.globals.locale.loc,affiliate:a.globals.affiliate,
affiliateskin:a.globals.brand,geoIpCc:a.globals.geoIpCc,experiment:a.globals.experiment,pageId:b.pageId,subPageId:b.subPageId,presentation:b.presentation||a.globals.presentation,clickTripz:a.config.getBoolean("ui.clicktripz.enabled",!1),pixelContext:c};a.config.getBoolean("ui.tracking.gtm.iframe",!1)&&(b.event="pageView");setTimeout(this.updateDataLayer.bind(this,b),1);this.searchId=c.searchId},updateDataLayer:function(b){try{this.log.console("updating data layer",b);var c=a.config.getBoolean("ui.tracking.gtm.iframe",
!1)?this.gtm.contentWindow:window;c.dataLayer||(c.dataLayer=[]);c.dataLayer.push(b)}catch(e){}},addEventHandlers:function(){var b=this;a.config.getBoolean("ui.tracking.gtm.iframe",!1)&&a.events.subscribe("frontdoor.view.changed",function(){var a=b.gtm.contentWindow;a.history&&a.history.replaceState&&a.history.replaceState("",document.title,location.href);a.document.title=document.title});var c=a.config.getInt("ui.horizon.resultspage.gtm.updateDelay",100);a.events.subscribe("search.poll.response",
function(a){a.pixelContext&&b.searchId!==a.pixelContext.searchId&&(setTimeout(b.updateDataLayer.bind(b,{event:"pageView",vertical:a.vertical,pageId:"results",pixelContext:a.pixelContext}),c),b.searchId=a.pixelContext.searchId);a.completed&&setTimeout(b.updateDataLayer.bind(b,{event:"resultsLoaded"}),c)});a.events.subscribe(["login.success","fbauth.login.success","googleauth.login.success"],function(){b.updateDataLayer({event:"login"})});a.events.subscribe("signup.success",function(){b.updateDataLayer({event:"signup"})});
a.events.subscribe("gtm.update",function(a){b.updateDataLayer(a)})},initApi:function(){var a=window,c=document;a.dataLayer=a.dataLayer||[];a.dataLayer.push({"gtm.start":(new Date).getTime(),event:"gtm.js"});a=c.getElementsByTagName("script")[0];c=c.createElement("script");c.async=!0;c.src="//www.googletagmanager.com/gtm.js?id\x3dGTM-T654MX";a.parentNode.insertBefore(c,a)}})})(R9,jq||jQuery);(function(a,b){a.createComponentClass("common.privacy.StyleJamHeaderCookiesMessage",{init:function(b){a.ajax.execute("common/privacy/AjaxStyleJamHeaderCookiesMessage",{type:"GET",replace:!0})}})})(window.R9,window.jQuery);(function(b,a){b.createComponentClass("common.currency.StyleJamCurrencyMessage",{options:{displayLater:!1,displayImmediately:!1,cookieName:"hideCurrencyMessage"},isVisible:!1,closeBtn:void 0,init:function(b){this.closeBtn=a("#"+this.id("close"));this.options.displayImmediately?this.showMessage():this.options.displayLater&&(this.subscribe("resultspage.view.setvisible",a.proxy(this.showMessage,this)),this.subscribe("header.view.set",{view:"results"},a.proxy(this.showMessage,this)),this.subscribe("pageContainers.changed",
{state:"results"},a.proxy(this.showMessage,this)),this.subscribe("resultspage.routed",a.proxy(this.showMessage,this)))},addEventHandlers:function(){this.closeBtn.bind("click",a.proxy(this.close,this))},showMessage:function(){this.isVisible||(this.element.slideDown("slow"),window.setMetaCookie(this.options.cookieName,!0),this.isVisible=!0)},close:function(){this.element.slideUp("slow")}})})(window.R9,window.jQuery);(function(b,f){b.createComponentClass("common.layout.StyleJamNavLink",{loggingPrefix:"StyleJamNavLink",openedSwindleTab:!1,options:{url:null,active:!1,verticalName:null,preventNavigation:!1,pageStates:{default:{base:null,defaultState:null,activeState:null},results:{base:null,defaultState:null,activeState:null}}},view:null,addEventHandlers:function(){var a=this;a.element.on("click",function(d){var c=a.getStates();a.options.preventNavigation?(a.options.active||(b.events.publish("NavLink.clicked",{vertical:a.options.verticalName,
url:a.options.url,active:a.options.active}),b.dom.swapClasses(a.element,c.defaultState,c.activeState),a.options.active=!0),d.preventDefault()):b.Analytics.api.trackEvent({category:a.loggingPrefix,action:"click",label:a.options.verticalName})});a.options.preventNavigation&&this.subscribe("NavLink.clicked",this.onActiveNavChanged.bind(this));if(!b.config.getBoolean("ui.no.popup.enabled",!1)||"notloggedin"===b.globals.analytics.loginState){if(b.config.getBoolean("ui.search.swindle.enabled",!0)&&b.config.getBoolean("ui.search.swindle."+
a.options.verticalName+".enabled",!0)&&(!b.config.getBoolean("ui.suppress.swindle",!1)||b.config.getBoolean("ui.suppress.swindle",!1)&&!b.storage.get("suppress_swindle")))a.element.on("click",function(d){var c=b.storage.get("lastSwindleClick"),e=b.config.getInt("ui.search.swindle.expiration",864E5);if(("/"===document.location.pathname||"/hotels"===document.location.pathname)&&!a.options.active&&(!c||c+e<Date.now()))return b.storage.set("lastSwindleClick",Date.now()),b.events.publish("swindleTab.activated"),
window.open(a.options.url,"_blank"),d.preventDefault(),!1});this.subscribe(["header.view.set","sem.explore.form.change-state"],function(b){if(b.view||b.newstate)if(b=b.view||b.newstate,a.view="rp"===b?"results":b,b=a.getStates())a.element.removeClass(),a.element.addClass(b.base),a.options.active?a.element.addClass(b.activeState):a.element.addClass(b.defaultState)});this.subscribe("omni.vertical.changed",function(d){var c=a.getStates();a.options.verticalName!==d?(b.dom.swapClasses(a.element,c.activeState,
c.defaultState),a.options.active=!1):(b.dom.swapClasses(a.element,c.defaultState,c.activeState),a.options.active=!0)})}},onActiveNavChanged:function(a){a.vertical!==this.options.verticalName&&this.options.active&&(a=this.getStates(),b.dom.swapClasses(this.element,a.activeState,a.defaultState),this.options.active=!1)},getStates:function(){return"results"===this.view?this.options.pageStates.results:this.options.pageStates.default}})})(R9,jQuery);(function(b,c){b.createComponentClass("common.layout.StyleJamMoreNavMenuContent",{options:{isLogoutFullUrl:!1,flightTrackerV3Enabled:!1,parentId:void 0,preventNavigation:!1},loggingPrefix:"MoreNavMenuContent",init:function(){this.getChildElement("more-magazine").attr("target","_blank")},addEventHandlers:function(){var a=this;a.getChildElement("more-login").click(function(){b.authentication.showLogin()});a.getChildElement("more-logout").click(function(){b.Social.WebCredentials.requireUserMediation();
document.location="/k/ident/signout?redir\x3d"+encodeURIComponent(a.options.isLogoutFullUrl?window.location.href:window.location.pathname)});c(a.element).find("a").on("click",function(){b.Analytics.api.trackEvent({category:a.loggingPrefix,action:"click",label:c(this).attr("class")});if(a.options.preventNavigation)return c(this).hasClass("js-navselected")||(a.element.find("a.js-navselected").removeClass("js-navselected"),b.events.publish("NavLink.clicked",{vertical:c(this).attr("data-vertical"),url:c(this).attr("href"),
active:!0}),a.element.addClass("js-navselected"),b.dom.swapClasses(a.element,a.options.unselectedNavLinkClzs,a.options.selectedNavLinkClzs)),!1});a.options.flightTrackerV3Enabled&&a.getChildElement("more-flighttracker").click(function(e){e.preventDefault();var d="#"+a.options.parentId+"-navMoreMenu";e=c(d);d=c(d+"_content");0!==e.length&&0!==d.length&&(e.removeClass("open"),d.removeClass("open"));b.events.publish("menu.flightracker.click")})}})})(R9,jQuery);(function(g,f){g.createWidgetClass("dropdown.StyleJamDropdownDialog",{element:null,trigger:null,triggerObj:void 0,elementNode:null,content:null,label:null,value:null,icon:null,isOpen:!1,leftOffset:0,ajaxLoadFailed:!1,eventSuffix:null,subValue:null,animationDuration:200,options:{autoOpen:!1,alignment:null,direction:"down",isPopover:!1,showIcon:!0,matchWidth:!1,isFixedWidth:!1,loadWithAjaxOnInit:!1,ajaxUrl:"",ajaxData:{},iconClass:"",contentClass:"",triggerElemId:null,content:null,onInit:null,onOpen:null,
onClose:null,text:"",coverTrigger:!1,topOffset:0,leftOffset:0,removeZIndex:!1,flippable:!0,delayShowDropdown:f.noop,showDropdownDelay:200,hasSubValue:!1,animateClose:null,expandTo:null,forceTriggerWidth:!1,openDisabled:!1},states:null,init:function(){!this.options.alignment&&this.element&&this.element.data("alignment")&&(this.options.alignment=this.element.data("alignment"));!this.options.expandTo&&this.element&&this.element.data("expandto")&&(this.options.expandTo=this.element.data("expandto"));
this.options.alignment||(this.options.alignment="left");this.eventSuffix=".DropdownDialog."+this.id();this.options.autoOpen?this.open():this.element.addClass(this.options.closedStateClzs);this.options.coverTrigger&&(this.cover=this.getChildElement("cover"),this.innerContent=this.getChildElement("inner"));if(this.options.onInit)this.options.onInit(this);this.createTrigger();this.elementNode=this.element[0];this.createContent();this.popoverArrow=this.getChildElement("popover-arrow");this.options.loadWithAjaxOnInit&&
this.options.ajaxUrl&&this.loadAjax();this.options.alignment||(this.options.alignment="left");this.options.coverTrigger&&g.dom.schedule(this.reposition.bind(this))},addEventHandlers:function(){function a(a){b.isOpen&&(a=f(a.target).closest(".StyleJamDropdownDialog"),b.content[0]!=a[0]&&b.isOpen&&b.close())}var b=this,c=f("body"),d=this.trigger;c.on("click"+this.eventSuffix,a);this.subscribe("trips.menu.open",f.proxy(this.close,this));this.subscribe("authentication.showLogin",this.close.bind(this,
null,!0));this.registerEvent("click",d,function(d){c.off("click",a);b.toggleContent();setTimeout(function(){c.on("click",a)},10)});this.registerEvent("keydown",d,function(a){if(13===a.which||32===a.which)d.trigger("click"),a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation()});this.registerEvent("keydown"+this.eventSuffix,f(document),function(a){27===a.which&&b.close(a,null,!0)});this.registerEvent("resize"+this.eventSuffix,f(window),function(){b.isOpen&&b.reposition(!0)});this.registerEvent("scroll"+
this.eventSuffix,f(document),function(){b.isOpen&&b.reposition(!0)});this.registerEvent("scroll"+this.eventSuffix,f(".viewport"),function(){b.isOpen&&b.reposition(!0)});var e=null,h=function(){b.triggerObj&&!b.triggerObj.isVisible()||e||g.Common.Utils.Browsers.isIE(11)||(e=setTimeout(function(){b.reposition(!0);e=null},25))};this.registerEvent("click",this.content.find(".close"),this.close.bind(this));this.registerEvent("mouseup touchend",this.content,h);this.subscribe("horizon.dropdownDialog.reposition",
h)},destroy:function(){this.base();f(".viewport").off("scroll"+this.eventSuffix);f(window).off("resize"+this.eventSuffix);f(document).off("scroll"+this.eventSuffix);f(document).off("keydown"+this.eventSuffix);f(document.body).off("click"+this.eventSuffix)},createContent:function(){this.content=this.options.content&&this.options.content.length?f(this.options.content):f("#"+this.element.attr("id")+"_content");this.options.isFixedWidth&&this.content.css("width",this.getTriggerWidth()+"px")},createTrigger:function(){if(null!=
this.options.triggerElemId)this.trigger=f("#"+this.options.triggerElemId);else{var a=this.element.data("trigger-id");null!=a&&""!==a&&(this.trigger=f("#"+a))}null!=this.trigger&&this.trigger.length?this.triggerObj=this.trigger.getWidget():this.trigger=this.element;this.label=this.trigger.find(".js-label");this.options.showIcon&&(this.icon=this.trigger.find(".js-icon"));this.options.hasSubValue&&(this.subValue=this.label.find(".js-subValue"));if(this.options.text)this[this.options.hasSubValue?"updateValue":
"updateLabel"](this.options.text);else this.options.hasSubValue||(a=this.label.html())&&a.trim()&&this.updateLabel(a.trim())},open:function(){if(this.options.openDisabled)console.log("disabled"),console.log(this.element);else{this.isOpen=!0;var a=this,b="body";if("function"===typeof this.options.delayShowDropdown&&this.options.delayShowDropdown()&&!this.showDropdownTimeout)this.showDropdownTimeout=setTimeout(this.open.bind(this),this.options.showDropdownDelay);else{null!==this.showDropdownTimeout&&
(clearTimeout(this.showDropdownTimeout),this.showDropdownTimeout=null);this.options.container&&""!==this.options.container&&(b=this.options.container,f(a.options.container).off("scroll."+a.id()).on("scroll."+a.id(),function(){a.isOpen&&a.reposition()}));this.options.isPopover&&this.popoverArrow.show();this.content.appendTo(b);if(this.options.onOpen)this.options.onOpen(this);a.triggerObj&&a.triggerObj.open();this.reposition();g.dom.swapClasses(a.content,this.getStateClasses("closed"),this.getStateClasses("open"));
this.options.coverTrigger&&(g.dom.swapClasses(this.cover,this.getStateClasses("coverClosed"),this.getStateClasses("coverOpened")),g.dom.swapClasses(this.innerContent,this.getStateClasses("contentClosed"),this.getStateClasses("contentOpened")));this.content.attr("aria-expanded",!0);g.events.publish("DropdownDialog.open",{id:a.id()});this.setupTabKeyHandling()}}},setupTabKeyHandling:function(){var a=this,b=this.getFocusableElements();b.length&&(a.content.off("keydown","**"),setTimeout(function(){f(b[0]).focus();
a.content.on("mouseover","a, [tabindex]",function(){a.content.find(":focus").trigger("blur")});a.content.on("keydown",function(c){b=a.getFocusableElements();var d=c.target,e=b.get(0)===d,d=b.get(b.length-1)===d;9===c.which&&(1===b.length||e&&c.shiftKey||d&&!c.shiftKey)&&(a.toggleContent(),a.triggerObj&&a.triggerObj.focus())})},25))},getFocusableElements:function(){return this.content.find(":input:visible,[tabindex]:visible").not("[tabindex\x3d-1],[disabled]")},_close:function(a,b,c){var d=this.isOpen,
e=this;this.isOpen=!1;this.options.isPopover&&this.popoverArrow.hide();this.triggerObj&&this.triggerObj.close();g.dom.swapClasses(this.content,this.getStateClasses("open"),this.getStateClasses("closed"));this.options.coverTrigger&&(g.dom.swapClasses(this.cover,this.getStateClasses("coverOpened"),this.getStateClasses("coverClosed")),g.dom.swapClasses(this.innerContent,this.getStateClasses("contentOpened"),this.getStateClasses("contentClosed")));this.content.css({top:"",right:"",left:"",bottom:""});
this.options.coverTrigger?setTimeout(function(){e.element.append(e.content)},200):this.element.append(this.content);c&&setTimeout(function(){e.triggerObj&&e.triggerObj.focus()},1);if(this.options.onClose)this.options.onClose(d,this,a);g.events.publish("DropdownDialog.close",{id:this.id(),silent:!!b});this.content.attr("aria-expanded",!1)},close:function(a,b,c){if(this.options.animateClose){var d=this;this.animateClose(function(){d._close(a,b,c)})}else this.isOpen&&this._close(a,b,c)},toggleContent:function(){this.isOpen?
this.close(null,null,!0):this.open()},updateLabel:function(a,b,c){b&&(a+=(c||"")+b);this.label.html(a);"0"==a+""||a?this.triggerObj&&this.triggerObj.addHasValue():this.triggerObj&&this.triggerObj.removeHasValue()},updateValue:function(a){a=a||"";this.value.html(a);"0"==a+""||a?this.triggerObj&&this.triggerObj.addHasValue():this.triggerObj&&this.triggerObj.removeHasValue()},hasValue:function(){return this.triggerObj?this.triggerObj.hasValue():!1},reposition:function(a){var b=this.options.direction,
c=this.options.alignment,d=this.trigger.offset(),e=f(this.options.container),h=f(this.options.expandTo),l=h.length&&h.is(":visible"),m=l?h.offset():null;if(e.length)var k=e.offset(),d={top:d.top-k.top+e.scrollTop(),left:d.left-k.left};else e=f(window);k=d.top+this.trigger.outerHeight();0===this.trigger.width()&&0!==this.trigger.position().top&&(k+=window.scrollY);if(this.options.coverTrigger)h=Math.floor(k)-this.trigger.outerHeight()+"px",l=Math.floor(this.trigger.offset().left)+"px",this.content.css({transform:"translate("+
l+","+h+")",top:0,right:"inherit !important"}),this.cover.css({width:this.trigger.outerWidth()-16,height:this.trigger.outerHeight()-16});else{this.shouldFlipDirection(b)&&(b=this.getReversedDirection(b));this.shouldFlipAlignment(c)&&(c=this.getReversedDirection(c));this.updateAnimationClass(b,c);this.content.toggleClass("noAnimation",!!a);"up"===b?(g.dom.swapClasses(this.content,this.getStateClasses("default"),this.getStateClasses("up")),k=d.top-this.content.outerHeight()):g.dom.swapClasses(this.content,
this.getStateClasses("up"),this.getStateClasses("default"));if("left"===b||"right"===b)k="up"===this.options.alignment?d.top-this.trigger.outerHeight()/2:"down"===this.options.alignment?d.top-this.content.outerHeight()+this.trigger.outerHeight():d.top+this.trigger.outerHeight()/2-this.content.outerHeight()/2;a={top:Math.floor(k)+"px"};l?"right"===c?a.right=Math.floor(e.width()-h.width()-m.left)+"px":a.left=Math.floor(m.left)+"px":"left"===b?a.right=Math.floor(e.width()-d.left)+"px":"right"===b?a.left=
Math.floor(d.left+this.trigger.width())+"px":"right"===c?(b=this.getTriggerWidth(),38>b&&!this.options.forceTriggerWidth&&(b=38),a.right=Math.floor(e.width()-(d.left+b))+"px"):a.left="center"===c?Math.floor(d.left-this.content.outerWidth()/2)+this.getTriggerWidth()/2+"px":Math.floor(d.left)+"px";this.options.topOffset&&0!==this.options.topOffset&&(a.marginTop=this.options.topOffset+"px");this.options.leftOffset&&0!==this.options.leftOffset&&(a.right?a.right=parseInt(a.right.replace("px",""))-this.options.leftOffset+
"px":a.left&&(a.left=parseInt(a.left.replace("px",""))+this.options.leftOffset+"px"));this.leftOffset&&(a.marginLeft=this.leftOffset+"px");this.options.isPopover&&"right"===c&&(a.left=Math.floor(d.left+this.getTriggerWidth()+22)+"px",a.top=Math.floor(k-45)+"px");c=this.options.isFixedWidth?"width":"minWidth";this.options.matchWidth?a[c]=this.getTriggerWidth()+"px":l?a[c]=h.outerWidth()+"px":a.minWidth="";this.options.removeZIndex||(a.zIndex=this.trigger.zIndex()+9999);this.content.css(a)}},shouldFlipDirection:function(a){if(this.options.flippable){var b=
f(window).scrollTop(),c=b+f(window).outerHeight(),d=this.content.outerHeight(),e=this.trigger.offset().top,c=e+this.trigger.outerHeight()+d>c,b=e-d<b;if("down"===a)return c&&!b;if("up"===a)return b&&!c}return!1},shouldFlipAlignment:function(a){if(this.options.flippable){var b=f(window).width(),c=this.content.width(),d=this.trigger.offset().left,e=this.trigger.width(),e=0>=d+("left"===a?0:e)-c,b=d+("left"===a?c:0)>=b;if("left"===a)return!e&&b;if("right"===a)return e&&!b}return!1},getReversedDirection:function(a){switch(a){case "down":return"up";
case "up":return"down";case "left":return"right";case "right":return"left";case "bottom":return"top";case "top":return"bottom";case "center":return"center"}return a},updateAnimationClass:function(a,b){a=this.getDirectionClass(a,b);this.content.hasClass(a)||this.content.removeClass(function(a,b){return(b.match(/\banimate-\S+/g)||[]).join(" ")}).addClass(a).removeAttr("style")},getDirectionClass:function(a,b){var c;"left"===a||"right"===a?(c="down"===b?"top":"bottom",a="center"===a?"right":this.getReversedDirection(a)):
(c="down"===a?"top":"bottom",a="center"===b?"right":b);return"animate-"+c+"-"+a},loadAjax:function(){var a=this;return g.ajax.execute(this.options.ajaxUrl,{data:this.options.ajaxData,customUpdate:function(b){b.innerHTML&&""!==b.innerHTML?a.content.html(b.innerHTML):(a.element.remove(),a.ajaxLoadFailed=!0);return!0}})},getTriggerWidth:function(){if(null!=this.trigger){var a=this.trigger[0].getBoundingClientRect();return a?a.right-a.left:this.trigger.outerWidth()}return 0},disableDropdown:function(){this.options.openDisabled=
!0;this.element.addClass("disabled");this.triggerObj&&this.triggerObj.disable()},enableDropdown:function(){this.options.openDisabled=!1;this.element.removeClass("disabled");this.triggerObj&&this.triggerObj.enable()},animateClose:function(a){var b=this,c=this.content.attr("class").match(/\banimate-\S+/);c&&c.length&&(this.content.removeClass(c[0]),window.setTimeout(function(){b.content.addClass(c[0]+" close-animation")},1),window.setTimeout(function(){a();b.content.removeClass("close-animation")},
this.animationDuration))},getStateClasses:function(a){null===this.states&&(this.states=g.question.ask("dropdown.dialog.states"));if(this.states)return this.states[a]}})})(R9,jQuery);(function(c,d){c.createComponentClass("common.layout.StyleJamMoreNavLink",{navMoreMenuDialog:null,options:{pageStates:{default:{base:null,defaultState:null,activeState:null},results:{base:null,defaultState:null,activeState:null}}},init:function(){this.getChildElement("navMoreMenu");this.navMoreMenuDialog=this.getChildElement("navMoreMenu").styleJamDropdownDialog().getWidget()},addEventHandlers:function(){var b=this;this.navMoreMenuDialog.options.onOpen=function(){c.events.publish("navMoreMenu.open")};
this.navMoreMenuDialog.options.onClose=function(){c.events.publish("navMoreMenu.close")};this.subscribe(["header.view.set","sem.explore.form.change-state"],function(a){if(a.view||a.newstate)if(a=a.view||a.newstate,a=b.getStates("rp"===a?"results":a))b.element.removeClass(),b.element.addClass(a)})},getStates:function(b){return"results"===b?this.options.pageStates.results:this.options.pageStates.default}})})(R9,jQuery);(function(b,g){b.createComponentClass("common.trips.EmailSyncPostLogin",{options:{isGoogleUser:!1},dialog:null,successDialog:null,errorMsgElement:null,ensureAPIPromise:void 0,init:function(a){a=this.getChildElement("dialog");this.dialog=a.dialog().getWidget();a.addClass("no-transition-dialog");this.errorMsgElement=this.getChildElement("error");this.successDialog=this.getChildElement("successDialog").dialog().getWidget();this.ensureAPIPromise=b.Social.Google.Gmail.ensureApiLoaded();this.logAction("show");
this.dialog.open()},addEventHandlers:function(a){var b=this,d="-"+a.height()+"px",e=this.getChildElement("page-one"),f=this.getChildElement("page-two");this.getChildElement("more").click(function(){a.removeClass("js-state-one").addClass("js-state-two");e.css("transform","translateY("+d+")");f.css("transform","translateY("+d+")");return!1});this.getChildElement("less").click(function(){a.removeClass("js-state-two").addClass("js-state-one");e.css("transform","translateY(0)");f.css("transform","translateY(0)");
return!1});this.getChildElement("submit").click(this.enableSync.bind(this));this.getChildElement("nope").click(this.dialogClose.bind(this));this.element.find("[data-log]").click(this.logElementEventAction.bind(this));this.subscribe("dialog.close",function(){return b.logAction("close")})},dialogClose:function(){this.logAction("close");this.dialog.close()},logElementEventAction:function(a){a=g(a.target).data("log");this.logAction(a)},logAction:function(a){var c=b.globals.analytics||{};b.Analytics.api.trackEvent({vertical:c.vertical||
b.globals.vertical,pageId:c.pageId,subPageId:"",category:"emailsync",action:a})},enableSync:function(){var a=this;this.ensureAPIPromise.done(function(){return b.Social.Google.Gmail.authorize(a.openSuccessDialog.bind(a),a.handleConnectionError.bind(a))}).fail(this.handleConnectionError.bind(this))},openSuccessDialog:function(){this.dialogClose();this.successDialog.open()},handleConnectionError:function(){this.errorMsgElement.show()}})})(R9,jQuery);(function(b,d){b.createComponentClass("common.layout.StyleJamNavMenu",{dropdown:null,view:null,ajaxPath:"common/layout/StyleJamNavMenu",options:{isLoggedInUser:!1,signInOutLink:"",includeContent:!1,showEmailLogin:!1,tripsCount:0,alertsCount:0,showUpcomingTripNotification:!1,isLogoutFullUrl:!1,upcomingTripV2Enabled:!1,isAjaxInitEnabled:!1,pageStates:{default:{presentationName:null,menuStyles:null},results:{presentationName:null,menuStyles:null}},isPhoenixRising:!1,utils:{utilsIconNotHover:null,utilsIconHover:null,
utilsLabelNotHover:null,utilsLabelHover:null}},isInitialLoad:!0,upcomingTripNotificationKey:"upcomingtrip-notification",upcomingTripDialog:void 0,init:function(){var a=this;window.showAlertRegRedirect=function(c){if(a.options.isLoggedInUser)window.location="/alerts";else{var e={onclose:d.noop,success:function(){a.options.isLoggedInUser=!0;window.location="/alerts"}};b.config.getBoolean("ui.sheep.campaign.pricealert.enabled",!1)&&c&&(e.promo=c);b.authentication.showSignup(e)}};this.showUpcomingTripNotification()},
addEventHandlers:function(){var a=this;a.options.isPhoenixRising&&(jq(".js-trips-header-button").on("mouseenter",function(){b.dom.swapClasses(jq(".js-header-trips-icon"),a.options.utils.utilsIconNotHover,a.options.utils.utilsIconHover);b.dom.swapClasses(jq(".js-header-trips-label"),a.options.utils.utilsLabelNotHover,a.options.utils.utilsLabelHover)}).on("mouseleave",function(){b.dom.swapClasses(jq(".js-header-trips-icon"),a.options.utils.utilsIconHover,a.options.utils.utilsIconNotHover);b.dom.swapClasses(jq(".js-header-trips-label"),
a.options.utils.utilsLabelHover,a.options.utils.utilsLabelNotHover)}),jq(".js-trigger").on("mouseenter",function(){b.dom.swapClasses(jq(".js-header-account-icon"),a.options.utils.utilsIconNotHover,a.options.utils.utilsIconHover);b.dom.swapClasses(jq(".js-trigger-label"),a.options.utils.utilsLabelNotHover,a.options.utils.utilsLabelHover)}).on("mouseleave",function(){b.dom.swapClasses(jq(".js-header-account-icon"),a.options.utils.utilsIconHover,a.options.utils.utilsIconNotHover);b.dom.swapClasses(jq(".js-trigger-label"),
a.options.utils.utilsLabelHover,a.options.utils.utilsLabelNotHover)}));this.getChildElement("login").click(function(a){d("body").click();b.Social.WebCredentials.trySignIn(function(){b.authentication.showLogin()});a.preventDefault()});this.getChildElement("signup").click(function(a){d("body").click();b.authentication.showSignup({promoType:"all"});a.preventDefault()});this.getChildElement("more-logout").click(function(){b.Social.WebCredentials.requireUserMediation();document.location="/k/ident/signout?redir\x3d"+
encodeURIComponent(a.options.isLogoutFullUrl?window.location.href:window.location.pathname)});this.subscribe(["trips.add","trips.remove","trips.move.event.finished"],this.updateNotificationCount.bind(this,!0));this.options.upcomingTripV2Enabled&&this.answer("upcoming.trips.showDialog",d.proxy(this.showUpcomingTripsDialog,this));if(this.options.isAjaxInitEnabled){this.subscribe(["my.account.menu.loaded"],d.proxy(this.openDialog,this));var c=this;this.element.on("click",".js-trigger-label, .js-trigger-icon",
function(){c.isInitialLoad?c.updateNotificationCount():c.openDialog()})}this.addUpcomingTripNotificationCloseHandler();this.subscribe(["header.view.set","sem.explore.form.change-state"],function(b){if(b.view||b.newstate)if(b=b.view||b.newstate,a.view="rp"===b?"results":b,b=a.getStates()){var c=a.element.find(".js-trigger");c.removeClass();c.addClass("col js-trigger "+b.menuStyles)}})},showUpcomingTripNotification:function(){var a=this;if(this.options.showUpcomingTripNotification){var b=a.showUpcomingTripsDialog();
this.upcomingTripDialog=this.getChildElement("upcomingtrip-notification").getWidget();b&&!this.options.upcomingTripV2Enabled&&setTimeout(function(){a.upcomingTripDialog.open()},1E3)}},showUpcomingTripsDialog:function(){if(this.options.showUpcomingTripNotification){var a=b.storage.get(this.upcomingTripNotificationKey),c=!0;a&&(c=new Date,c.setDate(c.getDate()-3),(c=new Date(a)<c)&&b.storage.remove(this.upcomingTripNotificationKey));return c}return!1},updateNotificationCount:function(a){var c=this;
b.ajax.execute(this.ajaxPath,{data:{isAjaxLoad:!0,isPhoenixRising:this.options.isPhoenixRising,styleJamPresentation:this.getStates().presentationName},appendTo:c.element.parent(),replace:!0}).then(function(d){a||b.events.publish("my.account.menu.loaded");c.destroy()})},openDialog:function(){var a=this.getChildElement("dropdown");this.isInitialLoad?(setTimeout(function(){a.click()},50),this.isInitialLoad=!1):a.click()},addUpcomingTripNotificationCloseHandler:function(){var a=this;this.options.showUpcomingTripNotification&&
this.getChildElement("upcomingtrip-notification-close").off("click").click(function(){a.upcomingTripDialog.close();b.storage.set(a.upcomingTripNotificationKey,new Date)})},getStates:function(){return"results"===this.view?this.options.pageStates.results:this.options.pageStates.default}})})(R9,jQuery);(function(c,f){c.createComponentClass("common.layout.StyleJamHeader",{options:{focusHeaderMenuOnLoad:!1,navigationVisible:!0,statesClasses:{"default":{main:"",headerWrapper:""},results:{main:""},navWrapper:{hidden:"",visible:""},activeState:""}},inlineComponentsReady:function(){this.options.focusHeaderMenuOnLoad&&this.element.find(".StyleJamNavLink")[0].focus()},addEventHandlers:function(){var b=this;b.element.find("#myAccount").click(function(a){a.stopPropagation();c.events.publish("header.account.clicked",
{})});c.events.subscribe(["header.view.set","pageContainers.changed","sem.explore.form.change-state"],function(a){if(a.view||a.newstate)a=a.view||a.newstate,b.changeView("rp"===a?"results":a)})},changeView:function(b){var a=this.options.statesClasses[b],d=this.options.statesClasses.activeState,e=this.options.statesClasses[d]||this.options.statesClasses.default;a||(a=this.options.statesClasses.default);a&&b!==d&&(c.dom.swapClasses(this.element,e.main,a.main),c.dom.swapClasses(this.getChildElement("headerWrapper"),
e.headerWrapper,a.headerWrapper),this.options.statesClasses.activeState=b,"results"!==b||this.options.navigationVisible||(this.options.navigationVisible=!0,this.getChildElement("verticals").attr("aria-hidden","false")))}})})(R9,jQuery);(function(g,d){g.createWidgetClass("dropdown.DropdownDialog",{element:null,elementNode:null,content:null,placeholder:null,label:null,value:null,icon:null,isOpen:!1,leftOffset:0,ajaxLoadFailed:!1,eventSuffix:null,openDisabled:!1,subValue:null,animationDuration:200,options:{autoOpen:!1,alignment:null,direction:"down",isPopover:!1,showIcon:!0,matchWidth:!1,isFixedWidth:!1,loadWithAjaxOnInit:!1,ajaxUrl:"",ajaxData:{},iconClass:"",contentClass:"",triggerClass:"",content:null,onInit:null,onOpen:null,onClose:null,
text:"",placeholder:"",topOffset:0,leftOffset:0,removeZIndex:!1,flippable:!0,delayShowDropdown:d.noop,showDropdownDelay:200,hasSubValue:!1,animateClose:null,expandTo:null,forceTriggerWidth:!1,useCover:!1},init:function(){!this.options.alignment&&this.element&&this.element.data("alignment")&&(this.options.alignment=this.element.data("alignment"));!this.options.expandTo&&this.element&&this.element.data("expandto")&&(this.options.expandTo=this.element.data("expandto"));this.options.alignment||(this.options.alignment=
"left");this.eventSuffix=".DropdownDialog."+this.id();this.options.autoOpen&&this.open();if(this.options.onInit)this.options.onInit(this);this.createContent();this.elementNode=this.element[0];this.createTrigger();this.popoverArrow=this.getChildElement("popover-arrow");this.options.loadWithAjaxOnInit&&this.options.ajaxUrl&&this.loadAjax();this.options.alignment||(this.options.alignment="left");this.options.useCover&&(this.cover=this.getChildElement("cover"),this.coverInner=this.getChildElement("cover-inner"))},
addEventHandlers:function(){function a(a){b.isOpen&&(!b.content||!b.content[0]||b.content[0]!==a.target&&1>b.content.find(a.target).length)&&b.close()}var b=this,c;c=this.options.triggerClass?d("."+b.options.triggerClass):d(b.element);this.subscribe(["authentication.showLogin","trips.menu.open","afterclick.dialog.opened"],this.close.bind(this,null,!0));this.registerEvent("click"+this.eventSuffix,c,function(){var c=d("body"),f="click.dialog"+b.eventSuffix;c.off(f,a);b.toggleContent();b.isOpen&&setTimeout(function(){c.on(f,
a)},10)});this.registerEvent("keydown",function(a){if(13===a.which||32===a.which)b.element.trigger("click"),a.preventDefault(),a.stopImmediatePropagation(),a.stopPropagation()})},bindOpenDialogEvents:function(){var a=this;d(document).on("keydown"+this.eventSuffix,function(b){27===b.which&&a.close(b,null,!0)});d(window).on("resize"+this.eventSuffix,function(){a.isOpen&&a.reposition(!0)});d(document).on("scroll"+this.eventSuffix,function(){a.isOpen&&a.reposition(!0)});d(".viewport").on("scroll"+this.eventSuffix,
function(){a.isOpen&&a.reposition(!0)});var b=function(){a.element.is(":visible")&&(g.Common.Utils.Browsers.isIE(11)||setTimeout(function(){a.reposition(!0)},25))};this.registerEvent("click",this.content.find(".close"),this.close.bind(this));this.registerEvent("mouseup touchend",this.content,b);this.subscribe("horizon.dropdownDialog.reposition",b)},destroy:function(){this.base();this.removeOpenDialogEvents()},removeOpenDialogEvents:function(){d(".viewport").off("scroll"+this.eventSuffix);d(window).off("resize"+
this.eventSuffix);d(document).off("scroll"+this.eventSuffix);d(document).off("keydown"+this.eventSuffix);d(document.body).off("click"+this.eventSuffix)},createContent:function(){this.content=this.options.content?d(this.options.content):d("#"+this.element.attr("id")+"_content");this.options.isFixedWidth&&this.content.css("width",this.getTriggerWidth()+"px")},createTrigger:function(){this.element.hasClass("open")&&(this.isOpen=!0);this.label=this.element.find(".label");this.label.length||(this.label=
d("\x3cdiv\x3e",{"class":"label"}),this.element.prepend(this.label));this.placeholder=this.element.find(".placeholder");this.placeholder.length||(this.placeholder=d("\x3cdiv\x3e",{"class":"placeholder",text:this.options.placeholder}),this.element.append(this.placeholder));this.options.showIcon&&(this.icon=this.element.find(".icon"),this.icon.length||(this.icon=d("\x3cdiv\x3e",{"class":"icon "+this.options.iconClass}),this.element.append(this.icon)));this.options.hasSubValue&&(this.value=this.label.find(".value"),
this.value.length||(this.value=d("\x3cdiv\x3e",{"class":"value"}),this.label.prepend(this.value)),this.subValue=this.label.find(".subValue"),this.subValue.length||(this.subValue=d("\x3cdiv\x3e",{"class":"subValue"}),this.label.prepend(this.subValue)));if(this.options.text)this[this.options.hasSubValue?"updateValue":"updateLabel"](this.options.text);else if(!this.options.hasSubValue){var a=this.label.html();a&&a.trim()&&this.updateLabel(a.trim())}},open:function(){if(!this.openDisabled){this.isOpen=
!0;var a=this,b="body";if("function"===typeof this.options.delayShowDropdown&&this.options.delayShowDropdown()&&!this.showDropdownTimeout)this.showDropdownTimeout=setTimeout(this.open.bind(this),this.options.showDropdownDelay);else{null!==this.showDropdownTimeout&&(clearTimeout(this.showDropdownTimeout),this.showDropdownTimeout=null);this.bindOpenDialogEvents();this.options.container&&""!==this.options.container&&(b=this.options.container,d(a.options.container).off("scroll."+a.id()).on("scroll."+
a.id(),function(){a.isOpen&&a.reposition()}));this.options.isPopover&&this.popoverArrow.show();this.content.appendTo(b);if(this.options.onOpen)this.options.onOpen(this);this.reposition();this.element.attr("aria-pressed")&&this.element.attr("aria-pressed",!0);a.element.addClass("open");a.content.addClass("open");this.content.attr("aria-expanded",!0);this.element.attr("aria-expanded",!0);this.content.data("owner",this.element.attr("id"));g.events.publish("DropdownDialog.open",{id:a.id()});this.toggleCover(!0);
this.setupTabKeyHandling()}}},setupTabKeyHandling:function(){var a=this,b=this.getFocusableElements();b.length&&(a.content.off("keydown","**"),setTimeout(function(){d(b[0]).focus();a.content.on("mouseover","a, [tabindex]",function(){a.content.find(":focus").trigger("blur")});a.content.on("keydown",function(c){b=a.getFocusableElements();var e=c.target,d=b.get(0)===e,e=b.get(b.length-1)===e;9===c.which&&(1===b.length||d&&c.shiftKey||e&&!c.shiftKey)&&(a.toggleContent(),a.element.focus())})},25))},getFocusableElements:function(){return this.content.find(":input:visible,[tabindex]:visible, a[href]:visible").not("[tabindex\x3d-1],[disabled]")},
_close:function(a,b,c){var e=this.isOpen,d=this;this.isOpen=!1;this.options.isPopover&&this.popoverArrow.hide();this.element.removeClass("open");this.content.removeClass("open");this.toggleCover(!1);d.element.after(d.content);c&&setTimeout(function(){d.element.focus()},1);if(this.options.onClose)this.options.onClose(e,this,a);g.events.publish("DropdownDialog.close",{id:d.id(),silent:!!b});this.element.attr("aria-pressed")&&this.element.attr("aria-pressed",!1);this.content.attr("aria-expanded",!1);
this.element.attr("aria-expanded",!1)},close:function(a,b,c){this.removeOpenDialogEvents();if(this.options.animateClose){var d=this;this.animateClose(function(){d._close(a,b,c)})}else this.isOpen&&this._close(a,b,c);null!=a&&a.stopPropagation()},toggleContent:function(){this.isOpen?this.close(null,null,!0):this.open()},updateLabel:function(a,b,c){b&&(a+=(c||"")+b);this.label.html(a);"0"==a+""||a?this.element.addClass("hasValue"):this.element.removeClass("hasValue")},updateValue:function(a){a=a||"";
this.value.html(a);"0"==a+""||a?this.element.addClass("hasValue"):this.element.removeClass("hasValue")},hasValue:function(){return this.element.hasClass("hasValue")},reposition:function(a){var b=this.options.direction,c=this.options.alignment,e=this.element.offset(),f=d(this.options.container),g=d("#"+this.options.expandTo),k=g.length&&g.is(":visible"),l=k?g.offset():null;a=a||!1;if(f.length)var h=f.offset(),e={top:e.top-h.top+f.scrollTop(),left:e.left-h.left};else f=d(window);h=e.top+this.element.outerHeight();
0===this.element.width()&&0!==this.element.position().top&&(h+=window.scrollY);this.shouldFlipDirection(b)&&(b=this.getReversedDirection(b));this.shouldFlipAlignment(c)&&(c=this.getReversedDirection(c));this.updateAnimationClass(b,c);this.content.toggleClass("noAnimation",a);"up"===b?(this.content.addClass("up"),h=e.top-this.content.outerHeight()):this.content.removeClass("up");if("left"===b||"right"===b)h="up"===this.options.alignment?e.top-this.element.outerHeight()/2:"down"===this.options.alignment?
e.top-this.content.outerHeight()+this.element.outerHeight():e.top+this.element.outerHeight()/2-this.content.outerHeight()/2;a={top:Math.floor(h)+"px"};k?"right"===c?a.right=Math.floor(f.width()-g.width()-l.left)+"px":a.left=Math.floor(l.left)+"px":"left"===b?a.right=Math.floor(f.width()-e.left)+"px":"right"===b?a.left=Math.floor(e.left+this.element.width())+"px":"right"===c?(b=this.getTriggerWidth(),38>b&&!this.options.forceTriggerWidth&&(b=38),a.right=Math.floor(f.width()-(e.left+b))+"px"):a.left=
"center"===c?Math.floor(e.left-this.content.outerWidth()/2)+this.getTriggerWidth()/2+"px":Math.floor(e.left)+"px";this.options.topOffset&&0!==this.options.topOffset&&(a.marginTop=this.options.topOffset+"px");this.options.leftOffset&&0!==this.options.leftOffset&&(a.right?a.right=parseInt(a.right.replace("px",""))-this.options.leftOffset+"px":a.left&&(a.left=parseInt(a.left.replace("px",""))+this.options.leftOffset+"px"));this.leftOffset&&(a.marginLeft=this.leftOffset+"px");this.options.isPopover&&
"right"===c&&(a.left=Math.floor(e.left+this.getTriggerWidth()+22)+"px",a.top=Math.floor(h-45)+"px");c=this.options.isFixedWidth?"width":"minWidth";this.options.matchWidth?a[c]=this.getTriggerWidth()+"px":k?a[c]=g.outerWidth()+"px":a.minWidth="";this.options.removeZIndex||(a.zIndex=this.element.zIndex()+9999);this.content.css(a)},shouldFlipDirection:function(a){if(this.options.flippable){var b=d(window).scrollTop(),c=b+d(window).outerHeight(),e=this.content.outerHeight(),f=this.element.offset().top,
c=f+this.element.outerHeight()+e>c,b=f-e<b;if("down"===a)return c&&!b;if("up"===a)return b&&!c}return!1},shouldFlipAlignment:function(a){if(this.options.flippable){var b=d(window).width(),c=this.content.width(),e=this.element.offset().left,f=this.element.width(),f=0>=e+("left"===a?0:f)-c,b=e+("left"===a?c:0)>=b;if("left"===a)return!f&&b;if("right"===a)return f&&!b}return!1},getReversedDirection:function(a){switch(a){case "down":return"up";case "up":return"down";case "left":return"right";case "right":return"left";
case "bottom":return"top";case "top":return"bottom";case "center":return"center"}return a},updateAnimationClass:function(a,b){a=this.getDirectionClass(a,b);this.content.hasClass(a)||this.content.removeClass(function(a,b){return(b.match(/\banimate-\S+/g)||[]).join(" ")}).addClass(a).removeAttr("style")},getDirectionClass:function(a,b){var c;"left"===a||"right"===a?(c="down"===b?"top":"bottom",a="center"===a?"right":this.getReversedDirection(a)):(c="down"===a?"top":"bottom",a="center"===b?"right":b);
return"animate-"+c+"-"+a},loadAjax:function(){var a=this;return g.ajax.execute(this.options.ajaxUrl,{data:this.options.ajaxData,customUpdate:function(b){b.innerHTML&&""!==b.innerHTML?a.content.html(b.innerHTML):(a.element.remove(),a.content.remove(),a.ajaxLoadFailed=!0);return!0}})},getTriggerWidth:function(){var a=this.elementNode.getBoundingClientRect();return a?a.right-a.left:this.element.outerWidth()},animateClose:function(a){var b=this,c=this.content.attr("class");(c=c&&c.match(/\banimate-\S+/))&&
c.length&&(this.content.removeClass(c[0]),window.setTimeout(function(){b.content.addClass(c[0]+" close-animation")},1),window.setTimeout(function(){a();b.content.removeClass("close-animation")},this.animationDuration))},toggleCover:function(a){this.options.useCover&&(a?this.coverInner.css("transform","scale("+(this.cover.outerWidth()+2)/this.element.outerWidth()+", 1.333)"):this.coverInner.css("transform","scale(1)"))}})})(window.R9,window.jQuery);(function(e,c){e.createComponentClass("common.layout.CountryPicker",{dropdown:null,options:{currentLocale:"",baseUrl:""},init:function(){},addEventHandlers:function(){var d=this;this.element.find("[data-locale]").hover(function(a){a=c(a.target).attr("data-locale");var b=c(this).find("[data-locale\x3d%s]".format(a));b.length&&b.addClass("hover");b=c(this).parent();b.is("[data-locale]")&&!b.is("[data-locale\x3d%s]".format(a))&&d.element.find("[data-locale]").removeClass("hover")},function(a){d.element.find("[data-locale]").removeClass("hover");
c(this).parent().is("[data-locale]")&&(a=c(this).parent().attr("data-locale"),a=c(this).parent().find("[data-locale\x3d%s]".format(a)),a.length&&a.addClass("hover"))});this.element.delegate("a","click keypress",function(a){a.preventDefault();var b=c(a.target).attr("data-locale");if((!a.keyCode||a.keyCode==e.globals.keyCodes.RETURN)&&b!==d.options.currentLocale){e.Analytics.api.trackEvent("countrylangpicker/change/"+b);var f=c.proxy(function(){var b=c(a.target).attr("data-href")||c(this).attr("href");
window.location=b},this);d.options.baseUrl?d.makeRedirect(d.options.baseUrl,b,f):f()}});c(".Common-Layout-CountryPicker-Trigger.DropDown").on("click",function(a){a.preventDefault();c(this).hasClass("open")&&e.Analytics.api.trackEvent("countrylangpicker/open")})},makeRedirect:function(d,a,b){e.globals.isSeo?b():c.ajax({url:d+"/k/run/isp/setcc",dataType:"jsonp",data:{cc:a},complete:function(){b()}})}})})(window.R9,window.jq||window.jQuery);(function(b,c){function g(a,d){if(a)for(var b=0,h=a.childElementCount;b<h;b++)if(a.children){var f=d?a.children[h-b-1]:a.children[b],e=f;if((e&&null!==e.getAttribute("tabindex")&&""!==e.getAttribute("tabindex")&&"-1"!==e.getAttribute("tabindex")||-1<k.indexOf(e.tagName)||"INPUT"===e.tagName&&"hidden"!==e.getAttribute("type"))&&c(e).is(":visible")||(f=g(f,d)))return f}}var k=["SELECT","A","BUTTON","TEXTAREA"];b.createWidgetClass("dialog.Dialog",{content:null,contentBody:null,closeButton:null,modalBackground:null,
focusBoundaries:null,initialFocus:null,lastFocus:null,documentEvents:{},options:{fullHeight:!1,customWidth:!1,modal:!0,blur:!1,onClose:null,onOpen:null,afterOpen:null,initialFocusId:null,preventInitialFocus:!1,closeOnModalClick:!0,openImmediately:!1,preventClose:!1,renderInline:!1,isMobile:!1},topLevelComponent:null,returnElement:null,init:function(){var a=this;a.content=this.getChildElement("content");a.contentBody=this.getChildElement("body");a.closeButton=this.getChildElement("close");a.modalBackground=
this.getChildElement("modal");a.viewport=this.getChildElement("viewport");a.body=c("body");(b.Common.Utils.Browsers.isIE()||b.Common.Utils.Browsers.isEdge())&&a.content.addClass("ie");this.options.modal||a.modalBackground.hide();a.options.preventClose?a.closeButton.hide():c(document).keydown(function(d){27===d.which&&a.close(!0)});this.topLevelComponent=this.contentBody.children("div").eq("0");b.config.getBoolean("ui.accessibility.features.dialog.enabled",!0)||(this.options.preventInitialFocus=!1);
this.options.renderInline&&this.body.append(this.element);this.options.openImmediately&&b.dom.schedule(this.open.bind(this))},addEventHandlers:function(){var a=this,d=this.closeOnModalClick.bind(this);this.options.preventClose||(this.closeButton.click(function(){a.close(!0)}),this.closeButton.keypress(function(a){switch(a.which){case b.globals.keyCodes.RETURN:this.close(!0)}}));if(this.viewport&&this.options.closeOnModalClick)this.viewport.on("click",d);c(this.content).click(function(b){a.viewport.off("click",
d);setTimeout(function(){a.viewport.on("click",d)},50)});this.subscribe("dialogs.close",function(){a.isOpen()&&a.close()});b.config.getBoolean("ui.accessibility.features.dialog.enabled",!0)&&(this.getChildElement("focusStartBoundary").focus(a.resetFocus.bind(a,!1)),this.getChildElement("focusEndBoundary").focus(a.resetFocus.bind(a,!0)),this.setDocumentEvent("keypress",this.handleKeyPress))},closeOnModalClick:function(a){a=c(a.target).closest(".content");this.content[0]===a[0]||this.options.preventClose||
this.close(!0)},calculateDimensions:function(){if(this.topLevelComponent&&this.topLevelComponent.length){var a=this.topLevelComponent[0].getBoundingClientRect(),d=this.content[0].getBoundingClientRect(),b="number"===typeof this.topLevelComponent.outerWidth()?Math.ceil(a.width):null,a="number"===typeof this.topLevelComponent.outerHeight()?Math.ceil(a.height):null;this.options.customWidth||b===Math.ceil(d.width)||this.content.width(b);this.options.fullHeight||a===Math.ceil(d.height)||this.content.height(a)}},
resetFocus:function(a){(a?this.closeButton:this.lastFocus?this.lastFocus:this.findFirstFocusableElement(!0)).focus();return!1},setDocumentEvent:function(a,b){a=a+"."+this.id()+"-"+this.documentEvents.length;c(document).on(a,b.bind(this));this.documentEvents[this.id()]=a},handleKeyPress:function(a){switch(a.which){case b.globals.keyCodes.ESC:this.close(!0)}},setContentDimensions:function(a,b){void 0!==a&&this.content.width(a);void 0!==b&&this.content.height(b)},setContent:function(a){this.contentBody.html(a);
this.topLevelComponent=this.contentBody.children("div").eq("0")},close:function(a){if(this.isOpen()){var d;this.isTouchDevice()&&(d=this.body.css("top").replace("-","").replace("px",""),this.body.css({overflow:"",position:"",width:""}));this.body.scrollTop(d);this.element.removeClass("visible");this.element.attr("aria-hidden",!0);if("function"===typeof this.options.onClose)this.options.onClose(this.element,a);b.events.publish("dialog.close",{id:this.id()});this.options.blur&&b.events.publish("pageContainer.contentBlur",
!1);c("body").removeClass("hideOverflow modal-open");this.returnElement&&this.returnElement.length&&(this.returnElement.focus(),this.returnElement=null);c(window).off("resize."+this.id())}},open:function(a){this.topLevelComponent&&0!==this.topLevelComponent.length||(this.topLevelComponent=this.contentBody.children("div").eq("0"));this.returnElement=c(document.activeElement);this.element.addClass("visible");this.element.attr("aria-hidden",!1);null===this.initialFocus&&this.setFocusTargets();this.options.preventInitialFocus||
this.focusInitialElement();if("function"===typeof this.options.onOpen)this.options.onOpen(this.element);"function"===typeof a&&a(this.element);this.modalBackground.length&&c("body").addClass("hideOverflow modal-open");this.options.blur&&b.events.publish("pageContainer.contentBlur",!0);null!==this.topLevelComponent&&setTimeout(this.calculateDimensions.bind(this),1);this.isTouchDevice()&&this.body.css({overflow:"hidden",position:"fixed",width:"100%"});c(window).on("resize.%s"+this.id(),this.calculateDimensions.bind(this));
"function"===typeof this.options.afterOpen&&this.options.afterOpen()},focusInitialElement:function(){var a=this;setTimeout(function(){a.initialFocus.get(0).focus()},501)},setFocusTargets:function(){this.focusBoundaries=this.getChildElement("focusStartBoundary").add(this.getChildElement("focusEndBoundary"));this.initialFocus=this.findFirstFocusableElement(!1);this.lastFocus=this.findFirstFocusableElement(!0)},findFirstFocusableElement:function(a){if(this.options.initialFocusId&&!a)return c("#"+this.options.initialFocusId);
a=g(this.contentBody[0],a);a||(a=this.closeButton);return c(a)},isOpen:function(){return this.element.hasClass("visible")},isTouchDevice:function(){return"ontouchstart"in window||navigator&&navigator.maxTouchPoints},destroy:function(){this.documentEvents[this.id()]&&(c(document).off(this.documentEvents[this.id()]),this.documentEvents[this.id()]=void 0)}})})(R9,jQuery);(function(e,b){e.createComponentClass("common.layout.CurrencyPicker",{dialog:null,options:{anonymousOnly:!1},init:function(){this.dialog=this.getChildElement("dialog").dialog({}).getWidget()},saveCurrency:function(a,c){b.ajax({type:"POST",url:"/k/ident/currency",data:{currency:a,posted:!0,save:c},dataType:"text",success:function(){location.reload()},cache:!1})},addEventHandlers:function(){var a=this;b(".currency-tooltip-item",this.element).on("click keypress",function(c){if(!c.keyCode||c.keyCode==
e.globals.keyCodes.RETURN){a.getChildElement("dropdown").getWidget().close();var d=b(this).data("cur");c=b(".saveToProfile",a.dialog.element);var f=b(".visitOnly",a.dialog.element);b(".currency_holder",a.dialog.element).html(d);if(a.options.anonymousOnly)a.saveCurrency(d,!1);else if(a.dialog.open(),f.on("click",function(){a.saveCurrency(d,!1)}),a.options.isLoggedIn)c.on("click",function(){a.saveCurrency(d,!0)});else c.on("click",function(){e.authentication.showSignup({onclose:b.noop,success:function(){a.saveCurrency(d,
!0)}})})}})}})})(window.R9,window.jq||window.jQuery);(function(a){a.createComponentClass("common.layout.StyleJamFooter",{options:{isSeo:!1,loadContent:!1,needSeoFooter:!1},fdFooter:null,rpFooter:null,init:function(){this.fdFooter=jq("#footer-fd",this.element);this.rpFooter=jq("#footer-rp",this.element);this.options.loadContent&&a.ajax.execute("common/layout/AjaxFooterLinks",{type:"GET",data:{id:this.id(),isSeo:this.options.isSeo},replace:!0})},addEventHandlers:function(){var b=this;a.question.answer("footer.offset",function(){return b.element.position()});
a.events.subscribe("footer.show",function(){b.element.show()});a.events.subscribe("footer.hide",function(){b.element.hide()});a.events.publish("footer.init");a.events.subscribe("resultspage.view.setvisible",this.updateVisibility.bind(this));a.events.subscribe("footer.update.rp.disclaimer",this.updateText.bind(this))},updateVisibility:function(){this.options.needSeoFooter&&this.fdFooter&&this.rpFooter&&(this.fdFooter.addClass("hidden"),this.rpFooter.removeClass("hidden"))},updateText:function(a){this.options.needSeoFooter&&
this.rpFooter&&this.rpFooter.html(a.message)}})})(R9);(function(a,d){a.createComponentClass("common.authentication.PromotedSignup","framework.JavaScriptComponent",{options:{showForcedSignup:!1,isMultiLocaleMandatorySignup:!1},init:function(){},inlineComponentsReady:function(){var c=this.options.isMultiLocaleMandatorySignup;this.options.showForcedSignup&&setTimeout(function(){if(c)a.authentication.showSignup({promo:"multilocale",preventClose:!0,type:"login"});else{var b=window.location.href;-1===b.lastIndexOf("/maps/hotelnew")&&-1===b.lastIndexOf("/reset/")&&
-1===b.lastIndexOf("/mobile")&&setMetaCookie("forced-signup-shown","true",function(){a.config.getBoolean("ui.forcedsignup.enabled",!1)&&a.authentication.showSignup({promo:"promotedsignupv2"})})}},10)}})})(R9,jq||jQuery);(function(a,b){a.createComponentClass("common.utils.admin.Tools",{options:{showExperimentSwitchTool:!1,showFeaturesSwitchTool:!1,showCookieControlTool:!1,showFindTemplateTool:!1,currentExperiments:null},legacyAdminToolsInstance:null,constructor:function(a,c,d){this.options=b.extend({},this.options,b.extend(c||{},d||{}));this.init()},init:function(){this.legacyAdminToolsInstance=a.Admin.AdminTools.getInstance({classNameMainContainer:"Common-Utils-Admin-Tools layer-sticky r9-admin-main"},!0);this.options.showExperimentSwitchTool&&
this.legacyAdminToolsInstance.addTool(new a.Admin.Tools.ExperimentTool({currentExperiments:this.options.currentExperiments}));this.options.showFeaturesSwitchTool&&this.legacyAdminToolsInstance.addTool(new a.Admin.Tools.FeatureTool);this.options.showCookieControlTool&&this.legacyAdminToolsInstance.addTool(new a.Admin.Tools.CookieTool);this.options.showFindTemplateTool&&this.legacyAdminToolsInstance.addTool(new a.Admin.Tools.FindTemplateTool)}})})(window.R9,window.jQuery);(function(b,c){b.createComponentClass("common.errors.ErrorDialog",{dialog:null,dialogEl:null,title:null,messages:null,init:function(){this.dialogEl=this.getChildElement("dialog");this.dialog=this.dialogEl.dialog({}).getWidget();this.title=this.getChildElement("title");this.messages=this.getChildElement("messages")},addEventHandlers:function(){var a=this;this.subscribe("error.alert",this.show.bind(this));b.events.when("error.alert",this.show.bind(this));this.subscribe("error.dismiss",this.hide.bind(this));
this.getChildElement("close").on("click keydown",function(c){c.keyCode!==b.globals.keyCodes.TAB&&a.dialog.close()})},show:function(a){var b=this;a.title?(this.title.html(a.title),this.dialogEl.addClass("hasTitle")):(this.title.html(""),this.dialogEl.removeClass("hasTitle"));this.messages.html("");a.messages&&(c.isArray(a.messages)||(a.messages=[a.messages]),c.each(a.messages,function(a,d){a=c("\x3cli\x3e").html(d);b.messages.append(a)}));this.dialog.open()},hide:function(){this.dialog.close()}})})(R9,
jQuery);(function(a,b){a.createComponentClass("common.layout.StandardBody",{stateClasses:{results:"ResultsPageBody"},init:function(){},addEventHandlers:function(){}})})(R9,jQuery);(function(e){var f={},d=!1;R9.extend("Widgets",{Tooltip:function(a,b){this.element=e(a);this.element.data(this.widgetName,this);this.setOptions(b,!0)}});R9.extend("Widgets.Tooltip",{validateElement:function(a){return void 0===e(a).data(this.prototype.widgetName)},getInstance:function(a,b){return this.validateElement(a)?new R9.Widgets.Tooltip(a,b):(a=e(a).data(this.prototype.widgetName),b?a.setOptions(b):a)},removeWidget:function(a){this.validateElement(a)||this.getInstance(a).removeWidget()},setDebug:function(a){d=
a}});R9.extend("Widgets.Tooltip.prototype",{element:null,widgetNamespace:"r9-tooltip",widgetBaseClass:"r9-tooltip",widgetName:"tooltip",positionTarget:"data-tooltip-position-target",isOpen:!1,options:{delay:200,fadeIn:200,fadeOut:200,edgeOffset:3,baseClass:null,content:null,position:"top",activation:"hover",showImmediately:!1,subNameSpace:"",onOpen:null,onClose:null,positionUpdate:!1,appendTo:"body",offsetLeft:0,offsetAgainstEdge:!0,keepOpenOnContentHover:!1,readContentOnOpen:!1,closeDelay:0,fallbackPosition:null,
forceDesiredPosition:!1},_timer:null,_closeTimer:null,_originalTitle:null,_positionUpdater:null,init:function(){this._removeAllWidgetBindings();f.hasOwnProperty(this.options.subNameSpace)||(f[this.options.subNameSpace]=null);var a=this;switch(this.options.activation){case "click":this.element.on("click."+this.widgetName,function(b){null===f[a.options.subNameSpace]&&(a.isOpen=!1);a.isOpen?a.close(b):setTimeout(a.open.bind(a,b),0)});this.options.keepOpenOnContentHover||this.bindContainerHoverEvents();
this.options.showImmediately&&this.element.trigger("click."+this.widgetName);break;case "focus":this.element.on("focus."+this.widgetName,function(b){a.open(b)});this.element.on("blur."+this.widgetName,function(b){a.close(b)});this.options.showImmediately&&this.element.trigger("focus."+this.widgetName);break;default:this.element.on("mouseenter."+this.widgetName,function(b){clearTimeout(a._closeTimer);a.open(b)}),this.element.on("mouseleave."+this.widgetName,function(b){a.options.closeDelay?a._closeTimer=
setTimeout(function(){a.close(b)},a.options.closeDelay):a.close(b)}),this.options.showImmediately&&this.element.trigger("mouseenter."+this.widgetName),this.options.keepOpenOnContentHover&&this.bindContainerHoverEvents()}return this},bindContainerHoverEvents:function(){var a=this;this._getContainerElement().on("mouseenter."+this.widgetName,function(){a.isOpen&&clearTimeout(a._closeTimer)}).on("mouseleave."+this.widgetName,function(b){a.isOpen&&(a._closeTimer=setTimeout(function(){a.close(b)},a.options.closeDelay))})},
setOptions:function(a,b){a&&(this.options=e.extend({},this.options,a));(a||b)&&this.init();return this},open:function(a){var b=this.getContent(a);if(!b||this.isOpen)return this;f[this.options.subNameSpace]&&f[this.options.subNameSpace]!==this&&f[this.options.subNameSpace].close();var c=this._getWrapperElement(),d=this._getContainerElement(),g=this._getArrowElement();this.renderContent(b,d);this._resetElements(c,d,g);b=this._getPositionMap(c,g);this._updateArrowElement(b,g);this._updateWrapperElement(b,
c);this._updateContainerElement(b,d);this._timer&&clearTimeout(this._timer);this._closeTimer&&clearTimeout(this._closeTimer);this.isOpen=!0;f[this.options.subNameSpace]=this;if(this.options.delay){var k=this;this._timer=setTimeout(function(){k._open(c,a)},this.options.delay)}else this._open(c,a);this._positionUpdater&&clearInterval(this._positionUpdater);e(window).on("resize",e.proxy(this._updatePosition,this));return this},renderContent:function(a,b){b.html(a)},close:function(){if(!d){this._timer&&
clearTimeout(this._timer);this._closeTimer&&clearTimeout(this._closeTimer);this._positionUpdater&&clearInterval(this._positionUpdater);e(window).off("resize",this._updatePosition);var a=this._getWrapperElement();a.stop(!0,!0);this.isOpen=!1;f[this.options.subNameSpace]=null;var b=this;this.options.fadeOut?a.fadeOut(this.options.fadeOut,function(){b._close()}):(a.hide(),this._close());return this}},getContent:function(a){var b=this.element.attr("title");b&&(this._originalTitle=b,this.element.attr("title",
""));return this.options.content?"function"==typeof this.options.content?this.options.content.call(this,a):this.options.content:this._originalTitle?this._originalTitle:null!=this.element.data("title")?this.element.data("title"):this.element.text()},removeWidget:function(){this._removeAllWidgetBindings();this.element.removeData(this.widgetName);this.close();return this},_updatePosition:function(){var a=this._getWrapperElement(),b=this._getContainerElement(),c=this._getArrowElement(),d=this._getPositioning(a,
c);this._updateArrowElement(d,c);a.css({top:d.newWrapperTop+"px",left:d.newWrapperLeft+"px"});this._updateContainerElement(d,b)},_getWrapperElement:function(){var a=e("#"+this._getIdValue("-wrapper"));a.length||(a=this._createDOMElement("-wrapper"),this.options.readContentOnOpen?a.attr("role","alert"):a.attr("role","tooltip"),e(this.options.appendTo).append(a));return a},_getContainerElement:function(){var a=e("#"+this._getIdValue("-container"));a.length||(a=this._createDOMElement("-container"),this._getWrapperElement().append(a));
return a},_getArrowElement:function(){var a=e("#"+this._getIdValue("-arrow"));a.length||(a=this._createDOMElement("-arrow"),this._getWrapperElement().append(a));return a},_createDOMElement:function(a){var b=e("\x3cdiv\x3e\x3c/div\x3e").attr("id",this._getIdValue(a));this._setStyleClasses(b,a);return b},_removeAllWidgetBindings:function(){this.element.off("click."+this.widgetName).off("focus."+this.widgetName).off("blur."+this.widgetName).off("mouseenter."+this.widgetName).off("mouseleave."+this.widgetName);
return this},_getOffsetInformation:function(a,b,c){var d=this.element,g=this.element.attr(this.positionTarget);g&&(g=e(g,this.element),0<g.length&&(d=g));var g=d.outerWidth(),k=d.outerHeight(),f=d.offset().top-e(this.options.appendTo).offset().top,d=d.offset().left-e(this.options.appendTo).offset().left;a="width"===a?c.outerWidth():c.outerHeight();return{arrowSize:Math.round(a/2),elementWidth:g,elementHeight:k,wrapperWidth:b.outerWidth(),wrapperHeight:b.outerHeight(),offset:{top:Math.floor(f),left:Math.floor(d)}}},
_getPositionMap:function(a,b){a.attr("style","").css({top:"-1000px",left:"-5000px",display:"block"});return this._getPositioning(a,b)},_getPositioning:function(a,b,c){switch(c||this.options.position){case "bottom":return this._getBottomPositioning(a,b);case "left":return this._getLeftPositioning(a,b);case "right":return this._getRightPositioning(a,b);default:return this._getTopPositioning(a,b)}},_getCommonPositioningMap:function(){return{newArrowTop:0,newArrowLeft:0,newWrapperTop:0,newWrapperLeft:0,
wrapperClass:""}},getLeftRightOffsetAgainstEdge:function(a,b,c){if(this.options.offsetAgainstEdge){var d=e(this.options.appendTo).offset(),g=d?d.left+e(this.options.appendTo).width():e(this.options.appendTo).width(),f,h=null!=d&&a<d.left,l=!isNaN(g)&&a+c.wrapperWidth>g;h?f=Math.floor(d.left+this.options.edgeOffset):l&&(f=Math.floor(g-c.wrapperWidth-this.options.edgeOffset));if(h||l)b+=a-f,a=f}return{wrapperLeft:a,arrowLeft:b}},_getTopPositioning:function(a,b){var c=this._getOffsetInformation("height",
a,b),d=Math.floor(c.elementWidth/2),g="-top",f=c.wrapperHeight,h=c.offset.top-this.options.edgeOffset-c.arrowSize-c.wrapperHeight;if(!this.options.forceDesiredPosition&&0>=h){if(this.options.fallbackPosition&&"top"!==this.options.fallbackPosition)return this._getPositioning(a,b,this.options.fallbackPosition);g="-bottom";h=c.offset.top+c.elementHeight+this.options.edgeOffset+c.arrowSize;f=-1*c.arrowSize}a=this.getLeftRightOffsetAgainstEdge(c.offset.left+d-Math.floor(c.wrapperWidth/2)+this.options.offsetLeft,
Math.floor(c.wrapperWidth/2)-c.arrowSize,c);return e.extend(this._getCommonPositioningMap(),{newArrowTop:f,newArrowLeft:a.arrowLeft,newWrapperTop:h,newWrapperLeft:a.wrapperLeft,wrapperClass:g})},_getBottomPositioning:function(a,b){var c=this._getOffsetInformation("height",a,b),d=Math.floor(c.elementWidth/2),g="-bottom",f=-1*c.arrowSize,h=c.offset.top+c.elementHeight+this.options.edgeOffset+c.arrowSize;if(!this.options.forceDesiredPosition&&h+c.wrapperHeight>=jq(window).scrollTop()+e(window).height()){if(this.options.fallbackPosition&&
"bottom"!==this.options.fallbackPosition)return this._getPositioning(a,b,this.options.fallbackPosition);g="-top";h=c.offset.top-this.options.edgeOffset-c.arrowSize-c.wrapperHeight;f=c.wrapperHeight}a=this.getLeftRightOffsetAgainstEdge(c.offset.left+d-Math.floor(c.wrapperWidth/2)+this.options.offsetLeft,Math.floor(c.wrapperWidth/2)-c.arrowSize,c);return e.extend(this._getCommonPositioningMap(),{newArrowTop:f,newArrowLeft:a.arrowLeft,newWrapperTop:h,newWrapperLeft:a.wrapperLeft,wrapperClass:g})},_getLeftPositioning:function(a,
b){var c=this._getOffsetInformation("width",a,b),d=Math.floor(c.elementHeight/2),f=Math.floor(c.wrapperHeight/2),k="-left",h=c.wrapperWidth,l=c.offset.left-this.options.edgeOffset-c.arrowSize-c.wrapperWidth;if(!this.options.forceDesiredPosition&&0>=l){if(this.options.fallbackPosition&&"left"!==this.options.fallbackPosition)return this._getPositioning(a,b,this.options.fallbackPosition);k="-right";l=c.offset.left+c.elementWidth+this.options.edgeOffset+c.arrowSize;h=-1*c.arrowSize}return e.extend(this._getCommonPositioningMap(),
{newArrowTop:f-c.arrowSize,newArrowLeft:h,newWrapperTop:c.offset.top+d-f,newWrapperLeft:l,wrapperClass:k})},_getRightPositioning:function(a,b){var c=this._getOffsetInformation("border-right-width",a,b),d=Math.floor(c.elementHeight/2),f=Math.floor(c.wrapperHeight/2),k="-right",h=-1*c.arrowSize,l=c.offset.left+c.elementWidth+this.options.edgeOffset+c.arrowSize;if(!this.options.forceDesiredPosition&&l+c.wrapperWidth>=e(window).width()){if(this.options.fallbackPosition&&"right"!==this.options.fallbackPosition)return this._getPositioning(a,
b,this.options.fallbackPosition);a=c.offset.left-this.options.edgeOffset-c.arrowSize-c.wrapperWidth;0<=a&&(k="-left",l=a,h=c.wrapperWidth)}return e.extend(this._getCommonPositioningMap(),{newArrowTop:f-c.arrowSize,newArrowLeft:h,newWrapperTop:c.offset.top+d-f,newWrapperLeft:l,wrapperClass:k})},_setStyleClasses:function(a,b,c){a.attr("class","");this._addStyleClasses(a,b,c);return this},_addStyleClasses:function(a,b,c){b&&(a.addClass(this.widgetBaseClass+b),c&&a.addClass(this.widgetBaseClass+b+c),
this.options.baseClass&&(a.addClass(this.options.baseClass+b),c&&a.addClass(this.options.baseClass+b+c)));return this},_updateWrapperElement:function(a,b){this._addStyleClasses(b,"-wrapper",a.wrapperClass);b.attr("style","").css({top:a.newWrapperTop+"px",left:a.newWrapperLeft+"px"});e.browser.msie&&"left"===this.options.position&&b.css("min-width",b.width()+"px");return this},_updateArrowElement:function(a,b){this._addStyleClasses(b,"-arrow",a.wrapperClass);b.css({top:a.newArrowTop+"px",left:a.newArrowLeft+
"px"});return this},_updateContainerElement:function(a,b){this._addStyleClasses(b,"-container",a.wrapperClass);return this},_getIdValue:function(a){return this.widgetNamespace+this.options.subNameSpace+a},_open:function(a,b){var c=this;a.stop(!0,!0);var d=function(a){this.options.onOpen&&this.options.onOpen.call(this,a);this.options.positionUpdate&&(this._positionUpdater=setInterval(e.proxy(this._updatePosition,this),1E3/60))};this.options.fadeIn?a.fadeIn(this.options.fadeIn,function(){d.call(c,b)}):
(a.show(),d.call(c,b));return this},_close:function(){this._originalTitle&&(this.element.attr("title",this._originalTitle),this._originalTitle=null);this.options.onClose&&this.options.onClose.call(this,null);return this},_resetElements:function(a,b,c){this._setStyleClasses(a,"-wrapper");this._setStyleClasses(b,"-container");this._setStyleClasses(c,"-arrow");return this}})})(jq||jQuery);
(function(e,f){e.createWidgetClass("tip.ToolTip",f.extend({},e.Widgets.Tooltip.prototype,{contentContainer:null,boundEvents:null,options:f.extend({},e.Widgets.Tooltip.prototype.options,{showImmediately:!1,baseClass:"coolTip",extraClass:null,delay:200,position:"top",fallbackPosition:null,orientation:"middle",onDestroy:null,activation:"hover",subNameSpace:"",alwaysRendered:!1,color:"black",size:"l",closeOnBodyClick:!0,content:"",isComponent:!1,target:null,positionTarget:null}),init:function(){this.base();
this.options.alwaysRendered&&(this.contentContainer=this.getChildElement("rendered-content"),this.setContent(this.contentContainer.children().eq(0)));e.Widgets.Tooltip.prototype.init.call(this);e.Common.Utils.Browsers.isIE()&&this.element.addClass("ie");this.boundEvents={}},addEventHandlers:function(){this.subscribe("common.widgets.tooltip.clearCloseTimers",this._clearCloseTimers.bind(this))},destroy:function(){if("function"===typeof this.options.onDestroy)this.options.onDestroy();var d=e.Widgets.Tooltip.prototype._getContainerElement();
Object.keys(this.boundEvents).forEach(function(a){d.off(a,this.boundEvents[a])}.bind(this));e.Widgets.Tooltip.prototype.removeWidget.call(this);this.base()},bindComponent:function(){this.element.data("toolTip",this);this.element.data("widget")||this.element.data("widget",this)},bindEventHandler:function(d,a,b){d=d+"."+this.id();e.Widgets.Tooltip.prototype._getContainerElement().on(d,a,b);this.boundEvents[d]=a},setContent:function(d){this.options.content=d},renderContent:function(d,a){"string"===typeof d?
e.Widgets.Tooltip.prototype.renderContent.call(this,d,a):this.options.alwaysRendered&&"object"===typeof d&&!f.contains(a,d)&&(a.html(""),a.append(d))},getOptionalTarget:function(d,a){return"string"===typeof d&&d.length?"#"===d[0]?f(d):f("#"+d):null!==d&&"object"===typeof d?f(d):a},_updateWrapperElement:function(d,a){this._addStyleClasses(a,"-wrapper",d.wrapperClass);a.attr("style","").css({top:d.newWrapperTop+"px",left:d.newWrapperLeft+"px"});return this},_updateContainerElement:function(d,a){e.Widgets.Tooltip.prototype._updateContainerElement.call(this,
d,a);d={top:0,left:0};if("middle"!==this.options.orientation){var b,c;a.is(".r9-tooltip-container-left")||a.is(".r9-tooltip-container-right")?(c="top",b="outerHeight"):(c="left",b="outerWidth");var f=this.getOptionalTarget(this.options.positionTarget,this.element)[b]()/2;b=this._getWrapperElement()[b]()/2;"start"===this.options.orientation?d[c]=Math.ceil(b-f):"end"===this.options.orientation&&(d[c]=Math.ceil(f-b))}a.attr("style","").css(d)},_open:function(d){var a=this,b="click."+this.id();e.Widgets.Tooltip.prototype._open.call(this,
d);e.events.publish("common.widgets.tooltip.clearCloseTimers",this.options.subNameSpace);this.element.addClass("tooltip-open");var c=function(c){d[0].contains(c.target)||"click"===a.options.activation&&a.element[0].contains(c.target)||(f(document).off(b),a.close())};this.options.closeOnBodyClick&&setTimeout(function(){f(document).off(b).on(b,c)},1)},_close:function(d){var a=this.getContent();this.options.alwaysRendered&&"object"===typeof a&&this.contentContainer.append(a);e.Widgets.Tooltip.prototype._close.call(this,
d);this.element.removeClass("tooltip-open");this.options.closeOnBodyClick&&e.dom.schedule(function(){f(document).off("click."+this.id())}.bind(this))},_clearCloseTimers:function(d){d===this.options.subNameSpace&&clearTimeout(this._closeTimer)},_addStyleClasses:function(d,a,b){a&&(d.addClass(this.widgetBaseClass+a),b&&d.addClass(this.widgetBaseClass+a+b),this.options.baseClass&&(d.addClass(this.options.baseClass+a),b&&d.addClass(this.options.baseClass+a+b)),this.options.color&&d.addClass("Color-"+
this.options.color));this.options.extraClass&&d.addClass(this.options.extraClass);this.options.size&&d.addClass("size-"+this.options.size);return this},_getOffsetInformation:function(d,a,b){var c=this.getOptionalTarget(this.options.positionTarget,this.element),e=c.outerWidth(),g=c.outerHeight(),k=c.offset().top-f(this.options.appendTo).offset().top,c=c.offset().left-f(this.options.appendTo).offset().left;d="width"===d?b.outerWidth():b.outerHeight();return{arrowSize:Math.round(d/2),elementWidth:e,
elementHeight:g,wrapperWidth:a.outerWidth(),wrapperHeight:a.outerHeight(),offset:{top:Math.floor(k),left:Math.floor(c)}}}}))})(R9,jQuery);(function(d,a){d.createComponentClass("corporate.pages.article.Article",{careersVideo:null,isSafari11:null,options:{country:null},init:function(){(this.careersVideo=a(".careersVideo"))&&this.careersVideo.length&&(this.setUpSafariFlag(),this.bindVideoHandlers(),this.adjustCountrySelection(),this.hidePlayBtnVisibility.call(this));a(".feedbackLink").on("click",function(b){window.location.href="/k/feedback/form"});this.bindCountryMenu()},bindVideoHandlers:function(){var b=this;if(!b.isSafari11)b.careersVideo.add(".careersVideo_play").click(function(){var a=
b.careersVideo[0];a.paused?a.play():a.pause()}).on("play",function(){b.careersVideo.addClass("careersVideo_playing")})},adjustCountrySelection:function(){var b=this;b.options.country?a(".countryWrap div").each(function(){var c=a(this);c.attr("id")===b.options.country?c.addClass("selected"):c.removeClass("selected")}):a("#all").addClass("selected")},bindCountryMenu:function(){a(".careerCountriesCover").bind("click",function(){a(".careerCountries").toggleClass("menuOpen")})},setUpSafariFlag:function(){this.isSafari11=
-1!==window.navigator.userAgent.indexOf("Safari")&&/Version\/11/.test(window.navigator.userAgent)},hidePlayBtnVisibility:function(){(-1!==window.navigator.userAgent.indexOf("Firefox")||this.isSafari11)&&this.careersVideo.addClass("careersVideo_noPlayButton")}})})(R9,jQuery);function validateEmail(a){if(!a||!a.match)return!1;a=a.match(/^[A-Z0-9._%+-]{1,63}@(?:[A-Z0-9-]+\.){1,125}[A-Z]{2,63}$/i);return!!(a&&a[0]&&a[0].length)}function replaceArgs(){str=arguments[0];for(var a=1;a<=arguments.length;a++)str=str.replace("{"+(a-1)+"}",arguments[a]);return str}R9.metacookie=R9.metacookie||{};R9.metacookie.saveQueue=R9.metacookie.saveQueue||[];
function saveQueuedMetaCookie(){if(0!=R9.metacookie.saveQueue.length){var a=R9.metacookie.saveQueue[0];jq.ajax({type:"POST",url:"/k/cookie",data:{action:"setmeta",metacookie:a.name,metavalue:a.value,formtoken:R9.globals.formtoken},complete:function(){R9.metacookie.saveQueue.shift();saveQueuedMetaCookie()},success:function(){a.callback()}})}}function setMetaCookie(a,b,c){R9.metacookie.saveQueue.push({name:a,value:b,callback:c||jq.noop});1==R9.metacookie.saveQueue.length&&saveQueuedMetaCookie()}
function deleteMetaCookie(a,b){"undefined"!=typeof b&&b||(b=jq.noop);jq.ajax({type:"POST",url:"/k/cookie",data:{action:"deletemeta",metacookie:a,formtoken:R9.globals.formtoken},success:b})}jq.ajaxPrefilter("script",function(a){a.cache=!0});(function(c){c.createComponentClass("common.core.RealUserMeasurementsComponent",{options:{fullstoryEnabled:!1},trackedSubmit:!1,addEventHandlers:function(){this.base();this.subscribe("searchform.submit",this.onSearchSubmit.bind(this))},onSearchSubmit:function(a){if(!this.trackedSubmit&&this.options.fullstoryEnabled&&window&&"FS"in window&&a&&a.vertical){this.trackedSubmit=!0;a="did"+this.fixCase(a.vertical)+"Search_bool";var b={};b[a]=!0;FS.setUserVars(b)}},fixCase:function(a){return a.toLowerCase().replace(/(^| )(\w)/g,
function(a){return a.toUpperCase()})}})})(R9);(function(c,f,d,e){c.createComponentClass("common.core.FullyInvisibleCaptcha",{options:{enabled:!1},init:function(){var a=this;this.options.enabled&&(this.setupCaptchaCallback(),this.initAPI().then(function(){a.fireCaptcha()}))},setupCaptchaCallback:function(){var a=this;e.onReCaptchaSubmit=function(b){a.captchaResult(b)}},initAPI:function(){var a=f.Deferred();e.recaptchaReady=function(){a.resolve()};var b=d.createElement("script");b.type="text/javascript";b.async=!0;b.src="https://www.google.com/recaptcha/api.js?onload\x3drecaptchaReady\x26render\x3dexplicit";
d.getElementById("recaptcha-root").appendChild(b);return a},fireCaptcha:function(){"undefined"!==typeof grecaptcha&&(grecaptcha.render("captcha",{},!0),grecaptcha.execute())},captchaResult:function(a){c.action.execute("common.core.FullyInvisibleCaptchaAction",{data:a})}})})(R9,jQuery,document,window);(function(e,d){e.createComponentClass("common.core.FastlyTiming",{options:{runTest:!1,measurementUrl:"/fastly-timer",logUrl:"/s/run/fastlytimerlog"},init:function(){this.options.runTest&&this.runTimingRequest()},runTimingRequest:function(){d.ajax({type:"POST",url:this.options.measurementUrl,success:this.logResult.bind(this)})},logResult:function(c,a,b){b&&c&&c.cluster&&(a=b.getResponseHeader("x-served-by"),b=b.getResponseHeader("x-timer"),a&&b&&(a=a.split(" "),a=a[a.length-1].split("-"),d.ajax({type:"POST",
url:this.options.logUrl,data:{cluster:c.cluster,timer:b,fastlyNode:a[a.length-1]}})))}})})(R9,jQuery);(new R9.logger).timeEnd("combined");