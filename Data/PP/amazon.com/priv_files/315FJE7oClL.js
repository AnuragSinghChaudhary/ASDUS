(function(u,t,v){u.execute(function(){u.when("jQuery").register("microfiche",function(k){t.Microfiche=function(g){this.initialize(g);return this};Microfiche.VERSION="1.8.0";k.extend(Microfiche.prototype,{options:{autoplay:!1,autopause:!1,buttons:!0,bullets:!0,cyclic:!1,keyboard:!1,swipe:!0,clickToAdvance:!1,minDuration:250,duration:500,maxDuration:500,dragThreshold:25,elasticity:.5,swipeThreshold:.125,refreshOnResize:!1,prevButtonLabel:"&larr;",nextButtonLabel:"&rarr;",noScrollAlign:"left"},x:0,initialize:function(g){this.options=
k.extend({},this.options,g);this.el=k(g.el);this.initialContents=this.el.contents();this.el.data("microfiche",this);this.createFilm();this.createScreen();this.calibrate();this.film.width()<=this.screen.width()?(this.noScrollAlign(this.options.noScrollAlign),this.refreshOnResize(this.options.refreshOnResize)):(this.createControls(),this.enableTouch(),this.enableKeyboard(),this.enableClick(),this.prepareCyclic(),this.run(this.options))},createFilm:function(){this.film=k('<div class="microfiche-film">').css({position:"absolute"});
this.el.children().appendTo(this.film).css({"float":"left"});this.prepareFilm&&this.prepareFilm()},createScreen:function(){this.screen=k('<div class="microfiche-screen">').css({position:"relative",overflow:"hidden"}).appendTo(this.el).append(this.film)},prepareCyclic:function(){if(this.options.cyclic){var g=this.film.clone(),c=this.film.clone(),k=this.film.width();g.prependTo(this.film).css({position:"absolute",left:-k+"px"});c.appendTo(this.film).css({position:"absolute",left:k+"px"})}},calibrate:function(){this.screen.width(1E5);
var g=this.film.width(),c=this.film.height();this.film.width(g).height(c);this.screen.width("auto").height(c)},createControls:function(){var g=this;this.controls=k('<span class="microfiche-controls" />').appendTo(this.el);this.controls.delegate("a, button","click",function(c){g.didClickControl(c)});this.options.bullets&&this.createBullets();this.options.buttons&&this.createButtons();this.updateControls()},createBullets:function(){for(var g=k('<span class="microfiche-bullets" />').appendTo(this.controls),
c=0;c<this.totalPageCount();c++)k("<button>").addClass("microfiche-bullet").attr("data-microfiche-page",c).data("action","slideToPage").data("arguments",[c]).html(c+1).appendTo(g)},createButtons:function(){k("<button>").addClass("microfiche-button microfiche-prev-button").attr("rel","prev").data("action","prev").data("arguments",[]).html(this.options.prevButtonLabel).prependTo(this.controls);k("<button>").addClass("microfiche-button microfiche-next-button").attr("rel","next").data("action","next").data("arguments",
[]).html(this.options.nextButtonLabel).appendTo(this.controls)},enableTouch:function(){if(this.options.swipe){var g=this,c=this.touchstart,k=this.touchmove,q=this.touchend;this.touchstart=function(){c.apply(g,arguments)};this.touchmove=function(){k.apply(g,arguments)};this.touchend=function(){q.apply(g,arguments)};this.film.delegate("microfiche-film","touchstart",this.touchstart)}},enableKeyboard:function(){if(this.options.keyboard){var g=this;this.screen.attr("data-microfiche-keyboard",!0);var c=
this.onkeydown;this.onkeydown=function(){c.apply(g,arguments)};k(document).delegate("body","keydown",this.onkeydown)}},enableClick:function(){if(this.options.clickToAdvance){var g=this,c=this.onmousedown;this.onmousedown=function(){c.apply(g,arguments)};this.film.delegate("microfiche-film","mousedown",this.onmousedown)}},didClickControl:function(g){g.preventDefault();var c=k(g.target);g=c.data("action");c=c.data("arguments");this[g].apply(this,c)},touchstart:function(g){!(g=g.originalEvent.targetTouches)||
1<g.length||(this.touchState={then:new Date,ox:g[0].pageX,oy:g[0].pageY,isDrag:!1},k(document).delegate("body","touchmove",this.touchmove).delegate("body","touchend",this.touchend))},touchmove:function(g){var c=g.originalEvent.targetTouches[0],k=c.pageX-this.touchState.ox,q=c.pageY-this.touchState.oy;if(!this.touchState.isDrag){if(Math.abs(q)>=this.options.dragThreshold){this.touchend();return}Math.abs(k)>=this.options.dragThreshold&&(this.touchState.isDrag=!0)}this.touchState.isDrag&&(g.preventDefault(),
g=new Date,c=g-this.touchState.then,this.touchState.vx=(k-this.touchState.dx)/c,this.touchState.vy=(q-this.touchState.dy)/c,this.touchState.dx=k,this.touchState.dy=q,this.touchState.then=g,this.touchState.cx=this.x-k,this.options.cyclic||(this.touchState.cx<this.min()&&(c=this.min()-this.touchState.cx,c*=this.options.elasticity,this.touchState.cx=this.min()-c),this.touchState.cx>this.max()&&(c=this.touchState.cx-this.max(),c*=this.options.elasticity,this.touchState.cx=this.max()+c)),this.film.css({WebkitTransition:"none",
WebkitTransform:"translate3d("+-this.touchState.cx+"px, 0px, 0px)"}))},touchend:function(g){k(document).undelegate("touchmove",this.touchmove).undelegate("touchend",this.touchend);if(this.touchState.isDrag){g=this.touchState.dx;var c=this.screenWidth(),r=this.touchState.vx,q=this.options.swipeThreshold;g<=-c*q?this.slideByPages(1,r):g>=c*q?this.slideByPages(-1,r):this.slideByPages(0)}},onkeydown:function(g){37!==g.keyCode&&39!==g.keyCode||!this.isCentral("[data-microfiche-keyboard]")||(37===g.keyCode?
this.slideByPages(-1):39===g.keyCode&&this.slideByPages(1))},onmousedown:function(g){this.slideByPages(1)},updateControls:function(){this.options.bullets&&this.updateBullets();this.options.buttons&&this.updateButtons()},updateBullets:function(){this.controls.find(".microfiche-bullet").removeClass("selected");this.controls.find('[data-microfiche-page="'+this.currentPageIndex()+'"]').addClass("selected")},updateButtons:function(){this.options.cyclic||(this.controls.find('[rel="prev"]').attr("disabled",
this.x<=this.min()),this.controls.find('[rel="next"]').attr("disabled",this.x>=this.max()))},round:function(g){var c=this.screenWidth();return Math.round(g/c)*c},constrain:function(g,c,k){c===v&&(c=this.min());k===v&&(k=this.max());return Math.max(c,Math.min(g,k))},roundAndConstrain:function(g,c,k){return this.constrain(this.round(g),c,k)},withinBounds:function(g){return this.min()<=g&&g<=this.max()},min:function(){return 0},max:function(){return this.film.width()-this.screenWidth()},currentPageIndex:function(){return Math.round(this.x/
this.screenWidth())},totalPageCount:function(){return Math.ceil(this.film.width()/this.screenWidth())},screenWidth:function(){return this.el.width()},isCentral:function(g){return k(k(g||".microfiche-screen").sort(function(c,g){return Math.abs(1-(k(t).scrollTop()+k(t).height()/2-k(c).height()/2)/k(c).offset().top)-Math.abs(1-(k(t).scrollTop()+k(t).height()/2-k(g).height()/2)/k(g).offset().top)})[0]).parent().data("microfiche")===this},jump:function(){this.el.trigger("microfiche:willMove");this.performJump();
this.updateControls();this.el.trigger("microfiche:didMove")},performJump:function(){this.film.css({left:-this.x})},transition:function(g){var c=this;this.options.cyclic&&this.handleWrappingTransition();null==g&&(g=this.options.duration);var k=function(){c.afterTransition()};this.el.trigger("microfiche:willMove");setTimeout(function(){c.performTransition(g,k)})},handleWrappingTransition:function(){this.x>this.max()?(this.x=this.min()-this.screenWidth(),this.touchState&&this.touchState.dx&&(this.x-=
this.touchState.dx),this.jump(),this.x=this.min(),this.updateControls()):this.x<this.min()&&(this.x=this.max()+this.screenWidth(),this.touchState&&this.touchState.dx&&(this.x-=this.touchState.dx),this.jump(),this.x=this.max(),this.updateControls())},performTransition:function(g,c){this.film.stop().animate({left:-this.x+"px"},g,c)},afterTransition:function(){delete this.touchState;this.el.trigger("microfiche:didMove")},slideByPages:function(g,c){var k=this.x,q=this.screenWidth();this.x=this.constrain((Math.round(this.x/
q)+g)*q);this.options.cyclic&&this.x==k&&(this.x+=g*q);k=c?this.constrain(Math.abs((this.x-k)/c),this.options.minDuration,this.options.maxDuration):this.options.duration;this.updateControls();this.transition(k)},slideToPage:function(g){this.x=this.constrain(g*this.screenWidth());this.updateControls();this.transition()},slideToPoint:function(g){this.x=this.roundAndConstrain(g);this.updateControls();this.transition()},jumpToPage:function(g){this.x=this.constrain(g*this.screenWidth());this.updateControls();
this.jump()},jumpToPoint:function(g){this.x=this.roundAndConstrain(g);this.updateControls();this.jump()},prev:function(){this.slideByPages(-1)},next:function(){this.slideByPages(1)},autoplay:function(g){this.autoplayTimeout&&(clearInterval(this.autoplayTimeout),delete this.autoplayTimeout);g=+g;if(!(isNaN(g)||0>=g)){var c=this;this.autoplayTimeout=setInterval(function(){c.pause||c.next()},1E3*g)}},autopause:function(){var g=this;this.el.hover(function(){g.pause=!0},function(){g.pause=!1})},destroy:function(){this.el.empty();
this.el.undelegate();this.clearResizeHandler();this.el.removeData("microfiche")},refresh:function(){var g=this.el.data("microfiche").options,c=this.getContents();this.destroy();this.el.append(c);new Microfiche(k.extend({el:this.el},g));return this.el},getContents:function(){return this.contentsChanged()?this.el.html():this.el.data("microfiche").initialContents},contentsChanged:function(){return 0===this.el.find(".microfiche-screen").length},refreshOnResize:function(g){this.options.refreshOnResize=
g;this.resizeHandler&&this.clearResizeHandler();if(!1!==g){!0===g&&(g=250);var c=this,r;c.resizeHandler=function(){r&&clearTimeout(r);r=setTimeout(function(){c.refresh()},g)};k(t).resize(c.resizeHandler)}},clearResizeHandler:function(){k(t).unbind("resize",this.resizeHandler)},noScrollAlign:function(g){if(!(this.film.width()>this.screen.width()))switch(g){case "center":this.film.css({left:"50%",marginLeft:this.film.width()/2*-1+"px",right:"auto"});break;case "right":this.film.css({left:"auto",marginLeft:"auto",
right:0});break;default:this.film.css({left:0,marginLeft:"auto",right:"auto"})}},run:function(g){for(var c in g){var r=this[c];k.isFunction(r)&&r.call(this,g[c])}}});"WebKitCSSMatrix"in t&&"m11"in new WebKitCSSMatrix&&k.extend(Microfiche.prototype,{prepareFilm:function(){this.film.css({WebkitTransform:"translate3d(0px, 0px, 0px)"})},performTransition:function(g,c){this.film.one("webkitTransitionEnd",c).css({WebkitTransition:"-webkit-transform "+g+"ms",WebkitTransform:"translate3d("+-this.x+"px, 0px, 0px)"})},
performJump:function(){this.film.css({WebkitTransition:"-webkit-transform 0ms",WebkitTransform:"translate3d("+-this.x+"px, 0px, 0px)"})}});k.fn.microfiche=function(g){return this.each(function(){var c=k(this).data("microfiche");c?c.run(g):new Microfiche(k.extend({el:this},g))})}});u.when("jQuery","viddler-video-playlist").execute("video-player-display",function(k){var g=k(".playlist-initial-video");k=k(".playlist-video-embed");if(g.length){var c=g.first().data("initial-video-id");c&&
k.data("initial-video-id",c);(g=g.first().data("autoplay"))&&k.data("autoplay",g)}k.playlistEmbed()});u.when("jQuery","microfiche").register("viddler-video-playlist",function(k){function g(c,g){return k.ajax({url:"//api.viddler.com/api/v2/viddler.playlists.getDetails.jsonp",data:{key:"1jdn52tb3h1d9bjub21a",playlist_id:c,per_page:100},dataType:"jsonp",success:g})}function c(c,g){g||(g={});var b="//www.viddler.com/embed/"+c+"/";g.autoplay&&(b+="?autoplay=1");return k("<iframe>",{src:b,
height:"372",frameborder:"0",allowfullscreen:!0,id:"video-iframe"})}function r(c){var g=k("<div>",{"class":"thumbs-container"}),b=k("<ul>");k.each(c,function(c,g){var a=k("<a>",{"data-video-id":g.id}),l=k("<img>",{src:g.thumbnail_url.replace("http:",""),alt:g.title});a.append(l);a.append(k("<span>").text(g.title));a=k("<li>").append(a);b.append(a)});g.append(b);return g}function q(){k(document).delegate(".thumbs-container a","click",function(){k("html,body").animate({scrollTop:k("body").offset().top},
"slow");var g=c(k(this).data("video-id"),{autoplay:!0});k("#video-iframe").replaceWith(g)})}k.fn.playlistEmbed=function(){q();this.each(function(){var n=[],p=[],b=k(this),q=b.data("playlist-ids").split(" ");k.each(q,function(c,a){p.push(g(a,function(a){a=a.list_result.video_list;var c=r(a);b.append(c);var e=function(){var a=2;768<=b.width()?a=6:480<=b.width()&&(a=4);a=b.width()/a-14;a=parseInt(a,10);c.find("li, img").css({width:a});a=parseInt(.5625*a,10);c.find("img").css({height:a});b.find(".thumbs-container").css("height",
a+54+"px")};e();c.microfiche({bullets:!1,prevButtonLabel:"&lt;",nextButtonLabel:"&gt;",refreshOnResize:!0});k(t).resize(e);k.each(a,function(a,b){n.push(b.id)})}))});k.when.apply(k,p).then(function(){var g=n[0];b.data("initial-video-id")&&0<=k.inArray(b.data("initial-video-id"),n)&&(g=b.data("initial-video-id"));g=c(g,{autoplay:b.data("autoplay")});b.prepend(g)})})}})})})(function(){var u=window.AmazonUIPageJS||window.P,t=u._namespace||u.attributeErrors;return t?t("CSHelpVideoPlayerJS"):u}(),window);