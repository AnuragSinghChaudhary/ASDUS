var _min=("undefined"!=typeof __min?__min:null)||_min||{_publisher:"MIN-40500"};_min=function(e){"use strict";function t(e,t,n){function i(e,t){var n=null;switch(t=r(e,t),e){case S.Emitter.NEW_VIDEO_EVENT:n=v();break;case S.Emitter.NEW_SCRAPE_EVENT:n=g();break;case S.Emitter.CLICK:case S.Emitter.VIEWPORT:case S.Emitter.VIDEO_PRESENT:case S.Emitter.TIME_ON_PAGE:case S.Emitter.PAGE_VIEW:n=d();break;case S.Emitter.URL_REPORT:case S.Emitter.DAILY_USER:n=h();break;case S.Emitter.ANALYTICS_EVENT:case S.Emitter.STATS_EVENT:n=c();break;case S.Emitter.PLAYER_CONTENT_CHANGED_EVENT:n=f();break;case S.Emitter.ERROR:n=l();break;case S.Emitter.VIDEO_VIEWS:n=u()}n.push(e,t)}function r(t,n){switch(t){case S.Emitter.VIDEO_VIEWS:n.hadImpressionSession=e.parseBool(n.hadImpressionSession),n.hadImpressionSession?Ce.setHadImpressionSession():n.hadImpressionSession=Ce.hadImpressionSession()}return n}function o(){s.forEach(function(e){e.flush()})}var a="production"===p,s=[],l=function(){var n=new L(e,t);return n.init(),s.push(n),function(){return n}}(),c=function(){var i=new L(e,t,n.ServerAnalytics,(!0));return i.enableStorage("_minEE0"+(a?"":"_debug")),i.init(),s.push(i),function(){return i}}(),u=function(){var i=new L(e,t,n.UrlReporter,(!0));return i.init(),s.push(i),function(){return i}}(),d=function(){var i=new L(e,t,n.UrlReporter,(!0));return i.enableStorage("_minEE1"+(a?"":"_debug")),i.init(),s.push(i),function(){return i}}(),h=function(){var i=new L(e,t,n.UrlReporter,(!0));return i.enableStorage("_minEE2"+(a?"":"_debug")),i.init(),s.push(i),function(){return i}}(),v=function(){var i=new L(e,t,n.VideoData,(!1),S.ReportMethods.GET);return i.init(),s.push(i),function(){return i.setValidator(e.validateScraperURL),i}}(),f=function(){var i=new L(e,t,n.VideoData,(!1));return i.init(),s.push(i),function(){return i}}(),g=function(){var i=new L(e,t,n.UrlReporter,(!1));return i.init(),s.push(i),function(){return i.setValidator(e.validateScraperURLForDelayedInternal),i}}();return{getError:l,getAnalytics:c,getVideoViewsReporter:u,getCounterServerReporter:d,getPlayerContent:v,getPlayerContentChange:f,getPlayerContentDelayed:g,send:i,flushAll:o}}function n(e,t,n){var i=n;if(""!==i){e[T.QUERY_PARAMS_SOURCE]+=i+" ",0===i.indexOf(t)&&(i=i.slice(1));for(var r,o,a=i.split("&"),s=/^qadt([\d\w]+)$/,l=0;l<a.length;l++)r=a[l].split("="),o=r[0],s.test(o)&&(o=o.replace(s,"$1"),e[o]=r[1])}}function i(e,t,n,i){function r(){var t=s(),n=e.getlistAsArray(t[b]);n=o(n),n.length>0&&d([n]),t[b]=[],l(t)}function o(e){if(e.length<=1)return e;var t=[];e.forEach(function(e,n,i){t.push(JSON.stringify(e))});var n=t.filter(function(e,n){return t.indexOf(e)===n});return t=[],n.forEach(function(e,n,i){t.push(JSON.parse(e))}),t}function a(t,n){var i,r=s();r[n]=e.getlistAsArray(r[n]),i=r[n],i.push(t),l(r)}function s(){var e=L.getItem(I);if(e){if(e=JSON.parse(e),e.clicks)for(var t=0;t<e.clicks.length;t++)e.clicks[t]=i.extract(e.clicks[t]);if(e.clicksDelay)for(var t=0;t<e.clicksDelay.length;t++)e.clicksDelay[t]=i.extract(e.clicksDelay[t])}else e={};return e}function l(e){if(e.clicks)for(var t=0;t<e.clicks.length;t++)e.clicks[t]=i.compress(e.clicks[t]);if(e.clicksDelay)for(var t=0;t<e.clicksDelay.length;t++)e.clicksDelay[t]=i.compress(e.clicksDelay[t]);L.setItem(I,JSON.stringify(e),w)}function u(e,t){var n,i,r=typeof e;if("string"===r||"number"===r){if(n=s(),n[t]=n[t]||[],i=n[t],0===i.length)return null;for(var o=0;o<i.length;o++)if(i[o].id===e)return i[o];return null}}function d(t){if(!e.isArray(t))return void e.log("Report not an array");for(var i,r="Test:"+fe.getGroupCode(),o=0;o<t.length;o++){i=e.isArray(t[o])?t[o]:[t[o]];for(var a=0;a<i.length;a++){var s=JSON.parse(JSON.stringify(i[a]));Re.send(S.Emitter.ANALYTICS_EVENT,s),Re.send(S.Emitter.CLICK,s),s=e.cloneObject(s),r+=","+s.id+":PClick:"+(s.product||"0");var l=he.get(s.id,s.placementFunction,S.Emitter.CLICK_TYPE_CLICK,s.test_mode,s.product);l.isSent()||(s.uniq=!0,Re.send(S.Emitter.ANALYTICS_EVENT,s),Re.send(S.Emitter.CLICK,s),l.setAnalyticState(),r+=","+s.id+":UClick:"+(s.product||"0")),s&&s.product===S.Emitter.PRODUCT_APV&&Ne.sendClick(s),_.dispatchEvent(S.Events.DomWindow.CLICK)}}(ge.getCanReportImmediately()||Y.urlHasChanged())&&(Y.touchUrlHasChanged(),n.getAnalytics().flush(),n.getCounterServerReporter().flush())}function p(){r(),_.addEventListener(S.Events.DomWindow.URL_CHANGE,r,this),_.addEventListener(S.Events.PLAYER_VIDEO_CHANGED,f,this),ge.isForceFlushAnalytics()&&h()}function h(){P=new c.utils.Timer(S.FLUSH_ANALYTICS,r,this),P.start()}function v(){e.log("sent logs immediately because we can :)"),r()}function f(){e.log("sent logs due to click on regular apv that cause for main video change"),r()}function g(e){a(e,b)}function m(e){a(e,T)}function y(e,t){var n,i,r=typeof e;if(("string"===r||"number"===r)&&(n=s(),n[t]=n[t]||[],i=n[t],0!==i.length)){for(var o=0;o<i.length;o++)if(i[o].id===e){i.splice(o,1);break}l(n)}}function E(e){y(e,T)}function A(e){var t=u(e,T);t&&(t.type=S.Emitter.ANALYTICS_CLICK_EVENT,d([t]),E(e))}var P,I="minAnalytics",b="clicks",T="clicksDelay",L=t.getLocalStorageInstance(),w={};return{init:p,startForceFlush:h,sendLogsDueToInArticleClick:v,log:g,logDelay:m,removeLogFromList:y,removeLogDelayById:E,sendLogDelayById:A}}function r(){function e(){e.__superCtor__.call(this)}c.apv=c.apv||{},c.apv.domAdapter=c.apv.domAdapter||{};var t=c.apv.domAdapter;t.InArticleTestGroup||(t.InArticleTestGroup=e,u["extends"](e,c.apv.inArticleDomAdapter),e.prototype.init=function(t){e.__super__.init.call(this,t),this.attachWindowEvents(),this.dispatchViewportEvent()},e.getTypeName=function(){return"TestGroup"},e.prototype._init=function(){this.minContainer=this.elementToReplace},e.prototype.getBoundingClientRect=function(){return this.apvData.getElementToReplace().getBoundingClientRect()},e.prototype.hideElementToReplace=function(){},e.prototype.getStyleDisplay=function(e){return""},e.prototype.attachWindowEvents=function(){e.__super__.hasOwnProperty("attachWindowEvents")&&e.__super__.attachWindowEvents.call(this)})}function o(e){function t(e,t){a.addEventListener(e,t)}function n(e){a.removeEventListener(e)}function i(){u.windowDispatchEvent(S.Events.MINUTE_READY),s&&(ge.getReportCompatibilityOnly()?ue.isBrowserSupported()&&(u.log("MinuteEventListener >> consts.Events.DAILY_USER"),a.dispatchEvent("apvUser",r())):(u.log("MinuteEventListener >> consts.Events.DAILY_USER"),a.dispatchEvent("apvUser",r())))}function r(){return{isMinuteActive:!e.isTestGroup()}}function o(){_.addEventListener(S.Events.PLAYER_PLAYING,function(t){if(t&&t.data){if(e.isTestGroup()){if(t.data.counter>=ge.getVVCounterTestLimit())return}else if(t.data.counter>=ge.getVVCounterLimit())return;u.log("MinuteEventListener >> consts.Events.PLAYER_PLAYING"),a.dispatchEvent("minuteVideoView",r())}}),_.addEventListener(S.Events.DAILY_USER,function(e){s=!0})}var a=new l,s=!1;return{addEventListener:t,removeEventListener:n,dispatchReadyEvent:i,init:o}}function a(t){function n(){var e=de.get(o);return d&&(e=!1),"boolean"!=typeof e&&(e=u.parsePercentValue(f),de.set(o,e)),e===!1&&de.get(s)===!0&&de.get(a)===!0&&(e=!0),e}function i(){if("boolean"==typeof l)return l;var e=de.get(s);return d&&(e=!1),"boolean"!=typeof e&&(e=t.isAnalyticThrottle(),de.set(s,e)),l=e,e}function r(){if("boolean"==typeof c)return c;var e=de.get(a);return d&&(e=!1),"boolean"!=typeof e&&(e=t.isVisualThrottle(),de.set(a,e)),c=e,e}var o="configLoadThrottle",a="visualThrottle",s="analyticsThrottle",l=null,c=null,d="true"===e.debugParams[b.FORCE_ENABLE];return{isPreventConfigLoad:n,isPreventAnalytics:i,isPreventVisual:r}}if(_min.debug)window._minAlreadyLoaded=!1;else{if(window._minAlreadyLoaded)return void console.warn("Minute.ly already loaded");window._minAlreadyLoaded=!0}var s=function(){function e(e,t,n,i){function r(n){o=t(r,i),e(n-(a||n)),a=n}var o,a;return{start:function(){o||r(0)},stop:function(){n(o),o=null,a=0}}}function t(t){return e(t,requestAnimationFrame,cancelAnimationFrame)}function n(e,t,n,i){function r(t){Boolean(e[n])===Boolean(i)&&t.stopImmediatePropagation(),delete e[n]}return e.addEventListener(t,r,!1),r}function i(e,t,n,i){function r(){return n[t]}function o(e){n[t]=e}i&&o(e[t]),Object.defineProperty(e,t,{get:r,set:o})}function r(e,t,n){n.addEventListener(t,function(){return e.dispatchEvent(new Event(t))})}function o(e,t){Promise.resolve().then(function(){e.dispatchEvent(new Event(t))})}function a(e){var t=new Audio;return r(e,"play",t),r(e,"playing",t),r(e,"pause",t),t.crossOrigin=e.crossOrigin,t.src=e.src||e.currentSrc||"data:",t}function s(e,t,n){(f||0)+200<Date.now()&&(e[E]=!0,f=Date.now()),n||(e.currentTime=t),P[++S%3]=100*t|0}function l(e){return e.driver.currentTime>=e.video.duration}function c(e){var t=this;t.video.readyState>=t.video.HAVE_FUTURE_DATA?(t.hasAudio||(t.driver.currentTime=t.video.currentTime+e*t.video.playbackRate/1e3,t.video.loop&&l(t)&&(t.driver.currentTime=0)),s(t.video,t.driver.currentTime)):t.video.networkState!==t.video.NETWORK_IDLE||t.video.buffered.length||t.video.load(),t.video.ended&&(delete t.video[E],t.video.pause(!0))}function u(){var e=this,t=e[y];return e.webkitDisplayingFullscreen?void e[_]():("data:"!==t.driver.src&&t.driver.src!==e.src&&(s(e,0,!0),t.driver.src=e.src),void(e.paused&&(t.paused=!1,e.buffered.length||e.load(),t.driver.play(),t.updater.start(),t.hasAudio||(o(e,"play"),t.video.readyState>=t.video.HAVE_ENOUGH_DATA&&o(e,"playing")))))}function d(e){var t=this,n=t[y];n.driver.pause(),n.updater.stop(),t.webkitDisplayingFullscreen&&t[A](),n.paused&&!e||(n.paused=!0,n.hasAudio||o(t,"pause"),t.ended&&(t[E]=!0,o(t,"ended")))}function p(e,n){var i=e[y]={};i.paused=!0,i.hasAudio=n,i.video=e,i.updater=t(c.bind(i)),n?i.driver=a(e):(e.addEventListener("canplay",function(){e.paused||o(e,"playing")}),i.driver={src:e.src||e.currentSrc||"data:",muted:!0,paused:!0,pause:function(){i.driver.paused=!0},play:function(){i.driver.paused=!1,l(i)&&s(e,0)},get ended(){return l(i)}}),e.addEventListener("emptied",function(){var t=!i.driver.src||"data:"===i.driver.src;i.driver.src&&i.driver.src!==e.src&&(s(e,0,!0),i.driver.src=e.src,t?i.driver.play():i.updater.stop())},!1),e.addEventListener("webkitbeginfullscreen",function(){e.paused?n&&!i.driver.buffered.length&&i.driver.load():(e.pause(),e[_]())}),n&&(e.addEventListener("webkitendfullscreen",function(){i.driver.currentTime=e.currentTime}),e.addEventListener("seeking",function(){P.indexOf(100*e.currentTime|0)<0&&(i.driver.currentTime=e.currentTime)}))}function h(e){var t=e[y];e[_]=e.play,e[A]=e.pause,e.play=u,e.pause=d,i(e,"paused",t.driver),i(e,"muted",t.driver,!0),i(e,"playbackRate",t.driver,!0),i(e,"ended",t.driver),i(e,"loop",t.driver,!0),n(e,"seeking"),n(e,"seeked"),n(e,"timeupdate",E,!1),n(e,"ended",E,!1)}function v(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0),n&&!m||e[y]||(p(e,t),h(e),e.classList.add("IIV"),!t&&e.autoplay&&e.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments"))}var f,g="undefined"==typeof Symbol?function(e){return"@"+(e||"@")+Math.random()}:Symbol,m=/iPhone|iPod/i.test(navigator.userAgent)&&!matchMedia("(-webkit-video-playable-inline)").matches,y=g(),E=g(),_=g("nativeplay"),A=g("nativepause"),P=[],S=0;return v.isWhitelisted=m,v}(),l=function(){function e(e){return Array.prototype.slice.call(e)}var t=function(){this.listeners=Object.create(null)};return t.prototype.addEventListener=function(t,n,i){var r=e(arguments);r=r.length>3?r.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:i,callback:n,isOnce:!1,args:r})},t.prototype.addEventListenerOnce=function(t,n,i){var r=e(arguments);r=r.length>3?r.slice(3):[],this.listeners[t]=this.listeners[t]||[],this.listeners[t].push({context:i,callback:n,isOnce:!0,args:r})},t.prototype.removeEventListener=function(e,t,n){if(this.listeners[e]){for(var i=this.listeners[e].length,r=[],o=0;o<i;o++){var a=this.listeners[e][o];a.context===n&&a.callback===t||r.push(a)}this.listeners[e]=r}},t.prototype.removeAllEventListener=function(){this.listeners={}},t.prototype.dispatchEvent=function(t,n){var i,r,o=0,a={type:t,data:n},s=e(arguments).slice(2);s=[a].concat(s);var l=this.listeners[t];if(l){var c=l.length;for(i=0;i<c;i++)if(r=l[i],r&&r.callback){var u=s.concat(r.args);r.callback.apply(r.context,u),o+=1}for(i=c-1;i>=0;i--)r=l[i],r&&r.isOnce&&l.splice(i,1)}},t}();e=e,e.ver="1.9.5.21",e._publisher=e._publisher||"",e._publisherDebugUrl=e._publisherDebugUrl||"";var c={};c.publisher={};var u={};u.getDateNow=function(){return new Date},u.getTimeNow=function(){return u.getDateNow().getTime()};var d={},p="production",h="bet",v=parseInt("2"),f="false",g=!0,m=!1,y=u.getTimeNow(),E=window.performance?window.performance.timing.navigationStart:y,_=new l,A=!1,P="/";A||(P="");var S={};S.Urls=function(){var e="https:"==window.location.protocol?1:0;return{ServerData:["http://data.minute.ly/","https://z2d7c5q4.map2.ssl.hwcdn.net/"][e],ServerAnalytics:["http://data.minute.ly/","https://z2d7c5q4.map2.ssl.hwcdn.net/"][e],UrlReporter:["http://counter.snackly.co/","https://counter.snackly.co/"][e],VideoData:["http://vdata.minute.ly/","https://b3g8i8r3.map2.ssl.hwcdn.net/"][e],Configuration:["http://apv.configuration.minute.ly/","https://r7c2k6b3.map2.ssl.hwcdn.net/"][e],Logger:["http://logger.snackly.co/","https://logger.snackly.co/"][e],Error:["http://errors.snackly.co/","https://errors.snackly.co/"][e]}}(),S.SELECTOR="selectors",S.Selectors={PREVIEW_SELECTOR:"preview",LINK_SELECTOR:"link",CLICK_SELECTOR:"click",CONTAINER_SELECTOR:"container",HOVER_SELECTOR:"hover",OBSERVER_SELECTOR:"observer",CAROUSEL_SELECTOR:"carousel",VALIDATOR_SELECTOR:"validator",VIDEO_DATA_SELECTOR:"videoDataSelector"},S.styleOverrides={CONTAINER:"container",APV:"apv",CLONE:"clone",ELEMENT_TO_REPLACE:"elementToReplace",LOGO:"logo",CUSTOM:"custom"},S.DEFAULT_MEDIAQUERY="active",S.USE_APV_ORIGIN="apvOrigin",S.styles={},S.styles.MARGIN_TOP="margin-top",S.styles.PARENT="parent",S.styles.HEIGHT="height",S.styles.WIDTH="width",S.styles.OBJECT_FIT="object-fit",S.values={},S.values.RELATIVE="relative",S.values.ABSOLUTE="absolute",S.values.HIDDEN="hidden",S.values.COVER="cover",S.values.NONE="none",S.values.BLOCK="block",S.values.HUNDRED_PERCENT="100%",S.APV={Origin:{source:"[o]",target:"o",size:450}},S.APVStates={Disposed:"disposed",New:"new",Blocked:"blocked",Disabled:"disabled",Active:"active"},S.Analytics={},S.Analytics.PlayModes={unknown:0,viewport:2,semihover:4,hover:5},S.config={},S.config.WindowIntervals={SCROLL:"scroll",RESIZE:"resize",URL:"url",ECHO_TIME:"echoTime",ECHO_REPEAT:"echoRepeat"},S.config.PlayModes={Viewport:"viewport",SemiHover:"semihover",Hover:"hover",InArticle:"in_article",BrightcovePlugin:"brightcove_plugin"},S.DOM_ADAPTER_TYPE="domAdapter",S.LOGO_TYPE="logoType",S.LOGO_SMALLEST_WIDTH=12,S.FLUSH_ANALYTICS=5e3,S.APPEND_CHILD_CODE=-1,S.APV_MOUSE_ENTER_SEND_TIMEOUT=2e3,S.HOVER_IMPRESSION_DELAY=1e4,S.TIMER_ELEMENT_CHECK=5e3,S.PLACEMENTS_DOM_REFRESH_INTERVAL=5e3,S.WindowKeys={COMPATIBILITY:"compatibility"},S.PlacementKeys={COMPATIBILITY:"compatibility",CHILD:"child"},S.Events={WINDOW_DISPOSE:"windowDispose",TEST_MODE_READY:"testModeReady",WINDOW_SERVICE_READY:"windowServiceReady",POST_MESSAGE_RESPONSE:"postMessageResponse",FIRST_APV_CREATED:"firstApvCreated",VIDEOS_UPDATE:"videosUpdate",APV_DISPOSED:"apvDisposed",PLAYER_VIDEO_VIEW_CLICK:"playerVideoViewClick",APV_LOGO_CLICK:"apvLogoClick",PLAYER_FOUND:"playerFound",PLAYER_PLACEHOLDER_FOUND:"playerPlaceholderFound",PLAYER_PLAYING:"playerPlaying",PLAYER_VIDEO_CHANGED:"playerVideoChanged",IMPRESSION:"impressionAnalytics",CLIENT_INIT_ANALYTICS:"clientInitAnalyticsEvent",DAILY_USER:"dailyUserCreated",FIRST_VIDEO_VIEW:"firstVideoView",SYSTEM_RUNNING:"systemRunning",NEW_VIDEO_DATE:"newVideoData",LOAD_MORE_FOUND:"loadmorefound",AUXCLICK_EVENT:"auxclick",MESSAGE_EVENT:"message",UI_FLOW_CHANGED:"uiFlowChange",FORCE_FIND_ELMS:"forceFindElements"},S.Events.Element={VISIBLE:"elmVisible",NON_VISIBLE:"elmNonVisible",ANALYTICS_VISIBLE:"elmVisibleAnalytics",CLICK:"elmClick",CONTEXT_MENU_OPEN:"elmContextMenuOpen",CONTEXT_MENU_CLOSE:"elmContextMenuClose",MUTANT:"elmMutant",MOUSE_ENTER:"mouseenter",MOUSE_OUT:"mouseout",READY:"ready",UPDATE_CAROUSEL_ELEMENT:"updateCarouselContainer"},S.Events.Players={PLAYING:"playing",PAUSED:"paused",LOADED:"loaded",ENDED:"ended",ERROR:"error"},S.Events.DomWindow={SCROLL:"scroll",FOCUS:"focus",BLUR:"blur",RESIZE:"resize",URL_CHANGE:"urlChange",CHECK_VISIBILITY:"checkVisibility",CLICK:"click",VISIBILITY_CHANGE:"visibilitychange"},S.UrlStructure={Origin:"origin",PathName:"pathname",Search:"search",Hash:"hash"},S.Effects={APV_FADE:500},S.Emitter={ANALYTICS_EVENT:0,STATS_EVENT:1,NEW_VIDEO_EVENT:2,PLAYER_CONTENT_CHANGED_EVENT:5,ERROR:3,VIDEO_VIEWS:42,CLICK:94,DAILY_USER:93,VIEWPORT:95,NEW_SCRAPE_EVENT:97,URL_REPORT:98,VIDEO_PRESENT:96,TIME_ON_PAGE:90,PAGE_VIEW:89,CONTEXT_MENU_OPEN_EVENT:4,ANALYTICS_CLICK_EVENT:0,ANALYTICS_IMPRESSION_EVENT:1,ANALYTICS_BLOCKING_DISTANCE_POTENTIAL:2,ANALYTICS_SOURCE_WEB_MOBILE:2,ANALYTICS_SOURCE_WEB_DESKTOP:1,PRODUCT_APV:0,PRODUCT_IN_ARTICLE:1,CLICK_TYPE_NONE:"n",CLICK_TYPE_CLICK:"c"},S.Placements={VIEWPORT_IMPRESSION:1,HOVER_IMPRESSION:2},S.Scraper={},S.Scraper.PlayerList={FLOW_PLAYER:1,OOYALA:2,SMPFLASH:3,VIDEOJS_PLAYER:4,YOUTUBE:6,HTML5_PLAYER:7,JW_PLAYER:8,DAILY_PLAYER:20,CLUBIC_PLAYER:10,LEMONDE_PLAYER:11,KALTURA_PLAYER:12,BRIGHTCOVE_PLAYER:13,CNN_PLAYER:14,NBA_PLAYER:15,ABC_PLAYER:16,BET_PLAYER:17,KOTAKU_PLAYER:18,SPORTING_PLAYER:21,HEATST_PLAYER:23,RGJBRIGHTCOVE_PLAYER:24,AOL_PLAYER:25,FOXSPORTS_PLAYER:26,VJSBRIGHTCOVE_PLAYER:27,OOYALA_TELEGRAPH_PLAYER:28,THE_PLATFORM_IFRAME_PLAYER:29},S.LocalStorage={POTENTIAL:"_minPotentialScrapers"},S.Scraper.ALL_PLAYERS=[S.Scraper.PlayerList.FLOW_PLAYER,S.Scraper.PlayerList.OOYALA,S.Scraper.PlayerList.SMPFLASH,S.Scraper.PlayerList.YOUTUBE,S.Scraper.PlayerList.HTML5_PLAYER,S.Scraper.PlayerList.JW_PLAYER,S.Scraper.PlayerList.VIDEOJS_PLAYER,S.Scraper.PlayerList.DAILY_PLAYER,S.Scraper.PlayerList.CLUBIC_PLAYER,S.Scraper.PlayerList.LEMONDE_PLAYER,S.Scraper.PlayerList.KALTURA_PLAYER,S.Scraper.PlayerList.BRIGHTCOVE_PLAYER,S.Scraper.PlayerList.RGJBRIGHTCOVE_PLAYER,S.Scraper.PlayerList.CNN_PLAYER,S.Scraper.PlayerList.NBA_PLAYER,S.Scraper.PlayerList.ABC_PLAYER,S.Scraper.PlayerList.BET_PLAYER,S.Scraper.PlayerList.KOTAKU_PLAYER,S.Scraper.PlayerList.SPORTING_PLAYER,S.Scraper.PlayerList.AOL_PLAYER,S.Scraper.PlayerList.HEATST_PLAYER,S.Scraper.PlayerList.VJSBRIGHTCOVE_PLAYER,S.Scraper.PlayerList.FOXSPORTS_PLAYER,S.Scraper.PlayerList.OOYALA_TELEGRAPH_PLAYER,S.Scraper.PlayerList.THE_PLATFORM_IFRAME_PLAYER],S.MinuteUiTests={},S.MinuteUiTests.HtmlAttributes={EXISTS:"minute-ui-test",ACTIVE:"minute-ui-test-active"},S.ReportMethods={GIF:"gif",GET:"get",POST:"post"},S.GROUP_42="__42_group",S.CURRENT_PAGE="currentPage",S.OriginalSrc={PATH:"path",ATTR:"attr"},S.iframeScope={INNER:"inner",OUTER:"outer"},S.integrationDataSet={ENABLE:"data-min-enable",ANCHOR:"data-min-anchor",PREVIEW:"data-min-preview",SIZE:"data-min-size",VIEWPORT_MASK:"data-min-mask",VIEWPORT_OBSERVER:"data-min-observer"},S.IFramePostMessageTypes={RequestPercentsVisible:"RequestPercentsVisible",PercentsVisible:"PercentsVisible"},e.debug?S.Events.MINUTE_READY="minuteReady_debug":S.Events.MINUTE_READY="minuteReady",S.logoPositions={"top-left":{left:0,top:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"top-right":{right:0,top:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"bottom-left":{left:0,bottom:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"},"bottom-right":{right:0,bottom:0,marginRight:"2%",marginLeft:"2%",marginTop:"2%",marginBottom:"2%"}},c.utils=c.utils||{},c.utils.Signal=function(){function e(e,t,n,i,r){this._listener=t,this._isOnce=n,this.context=i,this._signal=e,this._priority=r||0}function t(e,t){if("function"!=typeof e)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function n(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){n.prototype.dispatch.apply(e,arguments)}}return e.prototype={active:!0,params:null,execute:function(e){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,n,i,r){var o,a=this._indexOfListener(t,i);if(a!==-1){if(o=this._bindings[a],o.isOnce()!==n)throw new Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else o=new e(this,t,n,i,r),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){var t=this._bindings.length;do--t;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===e&&n.context===t)return i;return-1},has:function(e,t){return this._indexOfListener(e,t)!==-1},add:function(e,n,i){return t(e,"add"),this._registerListener(e,!1,n,i)},addOnce:function(e,n,i){return t(e,"addOnce"),this._registerListener(e,!0,n,i)},remove:function(e,n){t(e,"remove");var i=this._indexOfListener(e,n);return i!==-1&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,n=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=n),i){t=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(t[i]&&this._shouldPropagate&&t[i].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},n}();var I=function(){function e(){return 0===o&&(o=r(y-E)),o}function t(){return 0===a&&(a=r(u.getTimeNow()-E)),a}function n(){return r(u.getTimeNow()-E)}function i(){return r(u.getTimeNow()-y)}function r(e){return 100*Math.floor(e/100)}var o=0,a=0;return{getScriptTime:e,getConfigTime:t,getTimeFromGenesis:n,getTimeFromMinuteGenesis:i}}(),b={HIGHLIGHT_APVS:"highlightAPV",ENABLE_DEBUG:"enableDebug",FORCE_TEST:"forceTest",FORCE_YOUTUBE_API:"forceYtApi",DISABLE_PROD:"disableProd",BYPASS_WINDOW_LOAD:"bypassWindowLoad",ACTIVE_ALL:"activeAll",PREVENT_PAGE_LOAD:"preventPageLoad",IGNORE_REFERRERS:"ignoreReferrers",DISABLE_SCRIPT:"disableScript",ENABLE_BLOCKING_DISTANCE:"enableBD",ENABLE_BLOCKING_DISTANCE_DEBUG:"enableBDDebug",MINUTE_UI_TEST:"uiTest",DEBUG_VISIBILITY:"debugVisibility",FORCE_ENABLE:"forceEnable",FORCE_CONTENT_CHANGED:"forceContentChanged"},T={QUERY_PARAMS_SOURCE:"queryParams",SCRIPT_HOSTNAME:"scriptHostname",IS_PROCUTION:"isProduction"};e.debugParams={},c.utils=c.utils||{},c.utils.Debounce=function(e,t,n){function i(e){E=e||v,h("enableFilter(time="+E+")")}function r(e,t){h("setEcho(time="+e+", repeat="+t+")"),A=e||v,P=t||P}function o(){h("start");var e=arguments.length>0?u.cloneArray(arguments):m;L(e),w(e)}function a(){h("stop"),c(),_=0}function s(){h("kill"),c(),f=null,g=null,m=null,T=!0}function l(){return y>0}function c(){h("_clear"),l()&&(clearTimeout(y),y=0)}function d(e){I=e}function p(){b=!0,h("debug")}function h(e){b&&u.log("Deboucer >> "+I+" >> "+e)}var v=e,f=t,g=n||null,m=u.cloneArray(arguments).slice(3),y=0,E=0,_=0,A=0,P=1,S=0,I="",b=!1,T=!1,L=function(e){if(h("_checkTimeFilter"),!(E<=0)){var t=u.getTimeNow();0===_&&(_=t);var n=t>_+E;if(n){if(h("****** callback by _checkTimeFilter!"),T)return;if(!f)return void u.log("Debounce is dead, and timer is running... exiting");f.apply(g,e),_=t}}},w=function(e){h("_startEcho");var t=u.cloneArray(e);c(),S=0,y=setTimeout(function n(){if(S+1===P&&(t=t.concat(!0)),h("****** callback by echo!"),!T){if(!f)return void u.log("Debounce is dead, and timer is running... exiting");f.apply(g,t),S++,S<P&&setTimeout(n,v),a()}},v)};return{enableFilter:i,setEcho:r,start:o,stop:a,kill:s,isRunning:l,setName:d,debug:p}},c.utils=c.utils||{},c.utils.Timer=function(e,t,n){function i(){if(0===A){var e=arguments.length>0?u.cloneArray(arguments):_;T(e)}}function r(e){S=e||0}function o(){return I}function a(){I=0}function s(){b=null,g()}function d(){g(),y=null,E=null,_=null,b=null,P.removeAllEventListener()}function p(){return 0!==A}function h(){P.addEventListener.apply(P,u.cloneArray(arguments))}function v(){P.removeEventListener.apply(P,u.cloneArray(arguments))}function f(e){y&&y.apply(E,e),0===S||I<S?(I++,P.dispatchEvent(c.utils.Timer.Tick)):g()}function g(){A>0&&(clearInterval(A),A=0)}var m=e,y=t,E=n||null,_=u.cloneArray(arguments).slice(3),A=0,P=new l,S=0,I=0,b=null,T=function(e){b=e,g(),A=setInterval(function(){f(b)},m)};return{start:i,stop:s,kill:d,reset:a,isRunning:p,setCounterLimit:r,getCounter:o,addEventListener:h,removeEventListener:v}},c.utils.Timer.Tick="timerTick",c.utils.Timer.start=function(e){var t=new c.utils.Timer(e);return t.start(),t},function(){function e(e,t){function n(e){e=e||{},f=!!e.isTrackAlsoDisplay}function i(){h.start()}function r(){h.stop()}function o(){l=null,h.kill(),h=null,d.removeAll(),d=null,p.removeAll(),p=null}function a(){return f?!!l.offsetParent:document.body.contains(l)}function s(){var e=a();v!==e&&(v=e,v?(u.added&&u.added(),d.dispatch()):(u.removed&&u.removed(),p.dispatch()))}var l=e,u=t||{},d=new c.utils.Signal,p=new c.utils.Signal,h=new c.utils.Timer(100,s),v=a(),f=!1;return{start:i,stop:r,dispose:o,onAddToDom:d,onRemovedFromDom:p,setTrackingOptions:n}}c.utils.DomElementTracker=e}();var L=function(t,n,i,r,o){function a(e){T=e,L=!!C}function s(e){r&&(e.session=de.getId(),e.user=de.getUserId()),e.url=e.url||t.urls.getCurrentStructuredUrl(),e.stor=!!C}function l(n,i){if(I){if(t.isArray(i))for(var r=0;r<i.length;r++)s(i[r]);else s(i);var o={ver:e.ver,type:n,payload:i};P&&(o.timestamp=t.getTimeNow()),L&&p(o),y.push(o),y.length>=E&&u()}}function c(){I=!1}function u(){if(document&&document.body){if(L&&(y=h(),f([])),0===y.length||b&&!b())return void(y=[]);var e,n=y.slice();y=[];var i=!0;if("string"==typeof n&&""!==n?e=0===n.indexOf('"[{\\"')?JSON.parse(n):n:t.isArray(n)&&n.length>0?e=JSON.stringify(n):t.isArray(n)&&0===n.length?i=!1:(t.sendErrorReport("EmitterEventsCorrupt"),i=!1),!Ee.isDebug()&&i&&!Ee.isActiveAll()){var r="data="+encodeURIComponent(t.b64EncodeUnicode(e));t.sendReportByUrl(_,r,A)}t.log("Emitter Send: "+JSON.stringify(n)),t.log(n)}}function d(e){b=e}function p(e){var t=h();t.push(e),f(t)}function h(){var e=v(T);return e&&0!==JSON.parse(e).length||!w||t.logWarning("Another tab or IFrame, sent your emitters"),e=e?JSON.parse(e):[],w=!1,e}function v(e){if(!C)return null;try{return C.getItem(e)}catch(t){}return null}function f(e){e.length&&(w=!0),C&&C.setItem(T,JSON.stringify(e))}function g(){setInterval(u.bind(this),m)}var m=3e3,y=[],E=5,_=i||S.Urls.ServerData,A=o,P=t.parseBool(r,!0),I=!0,b=null,T=null,L=!1,w=!1,C=n.getLocalStorageInstance();return{enableStorage:a,push:l,disable:c,flush:u,setValidator:d,init:g}},w=function(){function e(){function e(){return ge.getIsAnalyticsBroadcasterEnabled()?(u.log("*** AnalyticsBroadcaster Enabled: "+U),x=c.utils.Timer(n,I),x.start(),window.self.addEventListener("message",T),h(),void g()):void(W=o.Master)}function d(){return window.self!==window.top}function p(){return W===o.Master}function h(){var e=window.top.frames;_(window.top);for(var t=0;t<e.length;t++)_(e[t])}function v(){if(ge.getIsAnalyticsBroadcasterEnabled()){var e=de.get(r);H=u.extendObject(H,e)}}function f(){if(ge.getIsAnalyticsBroadcasterEnabled()){for(var e,t,n={},i=0;i<s.length;i++)e=s[i],t=m(e.event,e),H[t]===!0&&(n[t]=!0);de.set(r,n)}}function g(){a.forEach(function(e){H[e]=!1})}function m(e,t){return""+e+"_"+(t.uniq?1:0)}function y(e,t){return!(l.indexOf(e)>-1)&&(v(),!!H[m(e,t)])}function E(e,t){H[m(e,t)]=!0,f()}function _(e,t){if(window.self!==e){var n={id:t?t.id:-1,window:e,status:t?t.status:o.Unknown};return F.push(n),A(e),n}}function A(e){e.postMessage&&e.postMessage(JSON.stringify({origin:t,type:i.DATA_UPDATE,id:U,status:W}),"*")}function P(e,n){G.postMessage&&G.postMessage(JSON.stringify({origin:t,type:i.REPORT_EVENT,id:U,eventType:e,eventData:n}),"*")}function S(){for(var e=0;e<F.length;e++)A(F[e].window)}function I(){x.kill(),b(),p()&&u.log("*** AnalyticsBroadcaster Master: "+U)}function b(){x.kill();for(var e=!0,t=0;t<F.length;t++){var n=F[t];if(n.id!==-1){if(n.status===o.Master)return G=n.window,void(W=o.Slave);U>n.id&&(e=!1)}}e&&(W=o.Master,S(),k())}function T(e){var n=e.source,r=L(e.data);if(r&&r.origin===t)switch(r.type){case i.DATA_UPDATE:w(n,r);break;case i.REPORT_EVENT:D(r)}}function L(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){}return null}function w(e,t){var n=C(e);n?(n.id=t.id,n.status=t.status):n=_(e,t),p()?A(e):n.status===o.Master&&(x.kill(),W=o.Slave,G=n.window,M())}function C(e){for(var t,n=0;n<F.length;n++)if(t=F[n],t.window===e)return t;return null}function D(e){if(!p())throw new Error("Report event to non master window.");R(e.eventType,e.eventData)}function V(e,t){return ke.isPreventAnalytics()?void u.log("analytics prevented by config throttle"):p()?void R(e,t):void N(e,t)}function O(e){return a.indexOf(e)>-1}function R(e,t){O(e)&&y(e,t)||(E(e,t),pe.send(e,t))}function N(e,t){return G?void P(e,t):void B.push({type:e,data:t})}function k(){B.forEach(function(e){R(e.type,e.data)}),B=[]}function M(){B.forEach(function(e){P(e.type,e.data)}),B=[]}var U=d()?u.getTimeNow():0,F=[],B=[],W=o.Unknown,x=null,G=null,H={};return{init:e,send:V}}var t="minuteBroadcaster",n=1500,i={DATA_UPDATE:"minuteDataUpdate",REPORT_EVENT:"minuteReportEvent"},r="bseSent",o={Unknown:0,Master:1,Slave:2},a=[S.Emitter.NEW_VIDEO_EVENT,S.Emitter.NEW_SCRAPE_EVENT,S.Emitter.URL_REPORT,S.Emitter.DAILY_USER,S.Emitter.VIDEO_PRESENT,S.Emitter.TIME_ON_PAGE,S.Emitter.PAGE_VIEW,S.Emitter.VIDEO_VIEWS,S.Emitter.VIEWPORT,S.Emitter.CLICK],s=[{event:S.Emitter.URL_REPORT,uniq:!0},{event:S.Emitter.DAILY_USER,uniq:!1}],l=[S.Emitter.PAGE_VIEW,S.Emitter.VIDEO_VIEWS,S.Emitter.VIEWPORT,S.Emitter.CLICK];return e}();!function(){c.reports={},c.reports.Levels={Debug:"debug",Info:"info",Warning:"warning",Error:"error"},u.sendReportByUrl=function(e,t,n){D.send(e,t,n)},u.sendLoggerReport=function(t){var n={ver:e.ver,env:p,publisher_id:e._publisher,source:ue.isMobile()?2:1,user_id:de.getUserId(),session_id:de.getId(),url:Y.getLocationUrl(),level:t.level||c.reports.Levels.Info,category:t.category||"general",message:"string"==typeof t?t:t.message};t.stack&&(n.stack=t.stack);var i=JSON.stringify(n);D.sendLog(i),u.log("Send report: "+i)},u.sendUserAgentLoggerReport=function(e){D.sendLog(e)},u.sendErrorReport=function(e){if(ge.getIsEnableErrorReport()){var t={};"string"==typeof e?t.message=e||"empty":t.message=e.message||"empty",e.stack&&(t.stack=e.stack),t.level=c.reports.Levels.Error,u.sendLoggerReport(t)}}}();var C=function(){function e(e,i){var r=n(e.split("."),4),o=n(i.split("."),4);return t(r,o)}function t(e,t){if(e.length!==t.length)return null;for(var n=0;n<t.length;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0}function n(e,t){for(var n=t?t:3,i=e.map(function(e){return parseInt(e,10)}),r=n-i.length,o=r;o>0;o--)i.push(0);
return i}return{compare:t,convertVersionToNumbers:n,compareStr:e}};!function(){u.urls={},u.urls.setReferrerUrl=function(){window.parent===window&&(_min.referrer=window.location.href||"")},u.urls._getReferrerUrlCommon=function(e){var t;if(ge.getIsTopWindowReferrerEnabled()&&window.parent!==window)try{t=window.parent._min.referrer||""}catch(n){}t||(t=document.referrer||"");var i=e(t);return i.length<1500?i:""},u.urls.getReferrerUrl=function(){return u.urls._getReferrerUrlCommon(u.urls.getStructuredByUrlWithoutOrigin)},u.urls.getReferrerUrlWithOrigin=function(){return u.urls._getReferrerUrlCommon(u.urls.getStructuredByUrl)},u.hasOwnProperty=Object.prototype.hasOwnProperty,u.isObjEmpty=function(e){if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var t in e)if(u.hasOwnProperty.call(e,t))return!1;return!0},u.urls.getCurrentUrl=function(){return window.location.href},u.urls.removeOrigin=function(){var e=document.createElement("a");return function(t){return e.href=t,(ue.isIE()||ue.isEdge())&&(e.origin=e.protocol+"//"+e.hostname),t.split(e.origin)[1]}}(),u.urls.removeTrailingSlash=function(e){return e&&e.length>0&&"/"==e.charAt(e.length-1)?e.substring(0,e.length-1):e},u.urls.getCanonicalUrl=function(){var e=null;return function(){return e||(e=u.urls.getCurrentUrl().replace(/^(https?:\/\/)www\./i,"$1")),e}}(),u.urls.getStructuredByUrl=function(){var e=document.createElement("a");return function(t,n){e.href=t;var i="",r=n||ge.getUrlStructure();if(0===r.length)return t;for(var o=0;o<r.length;o++)i+=r[o]!==S.UrlStructure.Origin||e.origin?r[o]!==S.UrlStructure.PathName||"/"===e[r[o]].charAt(0)?e[r[o]]:"/"+e[r[o]]:window.location.origin;return c.publisher.updateUrlPattern&&(i=c.publisher.updateUrlPattern(i)),u.urls.removeTrailingSlash(i)}}(),u.urls.getStructuredByUrlWithoutOrigin=function(e,t){var n=u.cloneArray(t||ge.getUrlStructure());return n.indexOf(S.UrlStructure.Origin)>-1&&n.splice(0,1),u.urls.getStructuredByUrl(e,n)},u.urls.isImageUrl=function(){var e=document.createElement("a"),t=/\.(?:gif|png|webp|jpg|jpeg)$/i;return function(n){return e.href=n,t.test(e.pathname)}}(),u.urls.getCurrentStructuredUrl=function(){return u.urls.getStructuredByUrl(Y.getLocationUrl())},u.urls.getCurrentStructuredUrlWithoutOrigin=function(e){return u.urls.getStructuredByUrlWithoutOrigin(Y.getLocationUrl(),e)},u.urls.isImageUrl=function(){var e=document.createElement("a"),t=/\.(?:gif|png|webp|jpg|jpeg)$/i;return function(n){return e.href=n,t.test(e.pathname)}}(),u.urls.getFullPathByUrl=function(e){var t=document.createElement("a");return t.href=e,t.href}}();var u=u||{};!function(){!function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))}(),function(){String.prototype.endsWith||(String.prototype.endsWith=function(e,t){if(void 0===e)return!1;var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return i!==-1&&i===t})}()}(),function(){function t(){n&&n();var t=e.debugParams[b.PREVENT_PAGE_LOAD]||"";if(_.dispatchEvent(S.Events.WINDOW_DISPOSE),""!==t)return t}var n=window.onbeforeunload;window.onbeforeunload=t}(),u.globalTasks={},u.globalTasks.listenToWindowErrors=function(){!u.isDebugEnabled()&&window.addEventListener&&window.addEventListener("error",function(e){e.error&&u.reportErrorIfNeeded(e.error)})},u.config={},u.config.getIndexLocation=function(e){return"undefined"==typeof e.getContainerIndexLocation()?S.APPEND_CHILD_CODE:parseInt(e.getContainerIndexLocation(),10)},u.config.isParentAppend=function(e){return":parent"===e.getContainerIndexLocation()},u.DomAdapter={},u.DomAdapter.getContainingsElements=function(e,t,n){},u.flags={},u.flags.isNewScraper=function(){return c.scrap&&c.scrap.ScraperService},u.isDebugEnabled=function(){return u.debugParamsOverrides(),e.debug},u.isNative=function(e){return/\{\s*\[native code]\s*}/.test(""+e)},u.reportErrorIfNeeded=function(e){var t=/(mi-[\d\w_-]*\.js|mi\.js)/i;if(e&&e.stack&&t.test(e.stack)){u.log("Error found!");var n={message:e.message,stack:e.stack};u.sendErrorReport(n)}},u.logData={id:Math.floor(1e3*Math.random()),color:function(){function e(){return Math.floor((Math.ceil(256*Math.random())+(/^((?!chrome|android|crios).)*(safari|iphone|ipad)/i.test(navigator.userAgent)?0:255))/2)}return e().toString(16)+e().toString(16)+e().toString(16)}()},u.cleanWindowInstance=function(){var e=document.createElement("iframe");return e.style.display="none",document.head.appendChild(e),e.contentWindow}(),u.consoleNative=u.cleanWindowInstance.console,u.sendBeaconNative=function(){return navigator.sendBeacon||u.cleanWindowInstance.navigator.sendBeacon?u.isNative(navigator.sendBeacon)?navigator.sendBeacon:u.isNative(u.cleanWindowInstance.navigator.sendBeacon)?u.cleanWindowInstance.navigator.sendBeacon:null:null}(),u.log=function(){window._min.logger=window._min.logger||[],500==window._min.logger.length&&window._min.logger.shift();var t="string"==typeof arguments[0]?arguments[0]:JSON.stringify(arguments[0]);if(window._min.logger.push(t),e.debug===!0){var n=fe.isTestGroup()?" [Test Group]":"";if("string"==typeof arguments[0]&&(arguments[0]=n+" "+(u.getTimeNow()-E)+"ms >> "+arguments[0]),ae.isIframe()&&"string"==typeof arguments[0]){var i=arguments.length>1&&"string"==typeof arguments[1]&&0===arguments[1].indexOf("color:#");arguments[0]=(i?"":"%c ")+"IFrame "+u.logData.id+n+": "+arguments[0];var r=i?arguments[1]:"color:#"+u.logData.color+";",o="undefined"!=typeof arguments[1]&&"string"!=typeof arguments[1]?arguments[1]:"";u.consoleNative.log(arguments[0],r,o)}else u.consoleNative.log.apply(console,arguments)}if(ue.isUserAgentDebug()){var a=u.cloneArray(arguments).join(" ");u.sendUserAgentLoggerReport(a)}},u.logObject=function(){e.debug===!0&&u.consoleNative.log.apply(console,arguments)},u.logWarning=function(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var n="color:#FFAD33;font-weight: bold;font-size:13px";u.log(t,n)},u.logError=function(){var e=Array.prototype.slice.call(arguments),t=e.join(" ");t="%c  *** "+t;var n="color:#FF0000;font-weight: bold;font-size:14px";u.log(t,n)},u.generateUID=function(){function e(){return Math.floor((1+Math.random())*u.getTimeNow()).toString(16).substring(1)}return e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()},u.timestampDiffInSec=function(e,t){return Math.floor((e-t)/1e3)},u.b64EncodeUnicode=function(e){function t(e){function t(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}var n,i,r,o,a,s,l,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",d=0;for(e=t(e);d<e.length;)n=e.charCodeAt(d++),i=e.charCodeAt(d++),r=e.charCodeAt(d++),o=n>>2,a=(3&n)<<4|i>>4,s=(15&i)<<2|r>>6,l=63&r,isNaN(i)?s=l=64:isNaN(r)&&(l=64),u=u+c.charAt(o)+c.charAt(a)+c.charAt(s)+c.charAt(l);return u}return(window.btoa||t)(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},u.timeRounder=function(e){return Math.round(10*e)/10},u.getComputedStyle=function(e){return window.getComputedStyle(e)},u.restore_style_property=function(e,t,n){var i=n[t];i?e.style[t]=n[t]:e.style.removeProperty(t)},u.extendObject=function(e){e=e||{};for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e},u.setMediaElementSize=function(e,t,n){t=t||e.videoWidth||e.naturalWidth,n=n||e.videoHeight||e.naturalHeight,e.setAttribute("data-media_dimensions",t+","+n)},u.extractElementSize=function(e){var t=e.getBoundingClientRect(),n=parseFloat(t.width),i=parseFloat(t.height);return{width:n,height:i,error:""}},u.getMediaElementSize=function(e){var t=e.getAttribute("data-media_dimensions");return t?(t=t.split(","),t.length<0&&(t[0]*=1,t[1]*=1),t):null},u.ElementObjectFit=function(){function e(e){var t="0% 0%";e.style.transformOrigin=t,e.style.webkitTransformOrigin=t,e.style.msTransformOrigin=t,e.style.mozTransformOrigin=t,e.style.oTransformOrigin=t,e.style.maxWidth="none",e.style.maxHeight="none";var n=e.parentNode,i=e.style.borderRadius;0!=i&&(n.style.borderRadius=i,n.style.overflow="hidden")}function t(t,n){if(t.parentNode){var i=u.getMediaElementSize(t);if(i){var r,o=u.getComputedStyle(n);if("100%"!==o.width||"100%"!==o.height){var a,s=i[0],l=i[1],c=parseFloat(o.width),d=parseFloat(o.height),p=d/l;s*p<c&&(p=c/s),a=(s*p-c)/2,p=Math.ceil(10*p)/10,r="scale("+p+")",e(t),t.style.transform=r,t.style.msTransform=r,t.style.mozTransform=r,t.style.webkitTransform=r,t.style.oTransform=r,t.style.width="auto",t.style.height="auto",t.style.left="-"+a+"px"}}}}function n(t){t.parentNode&&(e(t),t.style.width="100%",t.style.height="100%")}function i(e){if(!ue.isObjectFitSupported()){if(!a){var s=new MutationObserver(function(){i(e)});s.observe(e.originalElement,{attributes:!0})}var l;if(e.styleOverrides=e.styleOverrides||{},e.isFullSize=u.parseBool(e.isFullSize,!1),e.styleOverrides[o])return void t(e.mediaElement,e.originalElement,e.styleOverrides[o]);l=e.styleOverrides[r]?e.styleOverrides[r]||e.mediaElement.style.objectFit:e.mediaElement.style.objectFit||"cover","cover"===l&&(e.isFullSize?n(e.mediaElement):t(e.mediaElement,e.originalElement))}}var r="object-fit",o="object-fit-polyfill",a=!1;return{set:i}}(),u.getProtocol=function(){var e="https:"===document.location.protocol?"https":"http";return function(){return e}}(),u.setUrlProtocol=function(){return function(e){return 0===e.indexOf("http")?e:u.getProtocol()+"://"+e}}(),u.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},u.isFunction=function(e){return"function"==typeof e||!!(e&&e.constructor&&e.call&&e.apply)},u.hasPromiseSupport=function(){var e="function"==typeof Promise;return function(){return e}}(),u.isPromise=function(e){return e&&u.hasPromiseSupport()&&e instanceof Promise},function(){try{return Array.prototype.slice.call([1]),void(u.cloneArray=function(e){return Array.prototype.slice.call(e)})}catch(e){}var t=[];u.cloneArray=function(e){return t.slice.call(e)}}(),u.cloneObject=function(e){var t={};for(var n in e)if(u.isArray(e[n]))t[n]=u.cloneArray(e[n]);else if(null!==e[n])switch(typeof e[n]){case"boolean":case"number":case"string":case"undefined":t[n]=e[n];break;case"object":t[n]=u.cloneObject(e[n])}else t[n]=null;return t},u.extentObject=function(e,t){for(var n in e)if(null!==e[n]&&void 0!==e[n]||null===t[n])if(u.isArray(e[n]))t[n]=u.cloneArray(e[n]);else if(void 0!==t[n])switch(typeof e[n]){case"boolean":case"number":case"string":t[n]=e[n];break;case"object":t[n]=u.extentObject(e[n],t[n])}else t[n]=e[n];return t},u.appendDebugMffHashData=function(){var t=document.createElement("a");return function(n){return e.debugMff?(t.href=n,t.hash?n:n+"#"+e.debugMff):n}}(),u.appendDebugToolsQueryData=function(){var t=document.createElement("a");return function(n){var i=u.getAllDebugParamsString();return t.href=n,i&&(t.search+=(t.search?"&":"")+i),t.hash+=e.debugMff,t.href}}(),u.getAllDebugParamsString=function(){for(var t=Object.keys(b),n="",i=0;i<t.length;i++){var r=t[i],o=e.debugParams[b[r]];o&&(n&&(n+="&"),n+="qadt"+b[r]+"="+o)}return n},u.debugParamsOverrides=function(t){if(t||!(Object.keys(e.debugParams).length>0)){var n=u.parseUrlDebugParams();e.debugParams=n,"undefined"!=typeof n[b.ENABLE_DEBUG]&&(e.debug="true"==n[b.ENABLE_DEBUG]),u.parseScriptDomain()}},u.parseUrlDebugParams=function(){var e=document.createElement("a"),t={};return e.href=Y.getLocationUrl(),t[T.QUERY_PARAMS_SOURCE]="",n(t,"?",e.search),n(t,"#",e.hash),t},u.parseScriptDomain=function(){var t="snippet.minute.ly",n="d2d4r7w8.map2.ssl.hwcdn.net",i=u.getScriptHostname();e.debugParams[T.IS_PROCUTION]=i===t||i===n,e.debugParams[T.IS_PROCUTION]&&(i=""),e.debugParams[T.SCRIPT_HOSTNAME]=i},u.getScriptHostname=function(){var e="";if(document.currentScript){var t=document.createElement("a");t.href=document.currentScript.src,e=t.hostname}return function(){return e}}(),u.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n},u.ceil_style_value=function(){var e=/[0-9,\.]*/;return function(t,n){return n=n||0,Math.ceil(parseFloat(t)+n)+""+t.toString().replace(e,"")}}(),u.checkPotentialScraperUrls=function(){var t=null,n=null,i=le.getSessionStorageInstance();return function(){if(e.debugParams[b.IGNORE_REFERRERS])return!0;if(!i)return!0;if(t||(t=decodeURIComponent(i.getItem(S.LocalStorage.POTENTIAL))),!t)return!0;try{n=n||JSON.parse(t)}catch(r){return!0}if(!n||0===n.length)return!0;for(var o=u.urls.getStructuredByUrl(window.location.href),a=0;a<n.length;a++)if(n[a]==o)return!0;return!1}},u.scraperWouldHaveBeenBlocked=function(){return!u.validateScraperReferrerURL()||!u.checkPotentialScraperUrls()},u.validateScraperURLForDelayedInternal=function(){return u.isCurrentUrlFilterValid(ge.getFilterScraper())&&!u.isApvExists()&&u.isPageAllowedByMeta()},u.validateScraperURL=function(){if(ue.isScraperEnabled())if(!ge.getIsScrapOgTypeEnabled()||u.OgType.isArticle()||u.OgType.isVideo())if(u.isPageAllowedByMeta())if(u.checkPotentialScraperUrls(),u.isCurrentUrlFilterValid(ge.getFilterScraper())){if(!u.isApvExists())return!0;u.log("** Scraper blocked by APV already exist. **")}else u.log("** Scraper blocked by Filter URL. **");else u.log("** Scraper disabled by meta tags. **");else u.log("** Scraper disabled by og:type not valid. **");else u.log("** Scraper disabled by configuration. **");return pe.getPlayerContent().disable(),pe.getPlayerContentDelayed().disable(),!1},u.OgType=function(){function e(){return!!o}function t(){if(e())return l=o.getAttribute("content"),s=0===l.indexOf("video"),a=s||0===l.indexOf("article")}function n(){return a}function i(){return s}function r(){if("undefined"==typeof c){var e=document.querySelector("meta[property='og:url'][content]");c=e&&e.content?e.content:""}return c}var o=document.querySelector("meta[property='og:type'][content]"),a=!1,s=!1,l=null,c=void 0;return t(),{isExist:e,isArticle:n,isVideo:i,getArticleUrl:r}}(),u.isPlacementEnabled=function(){return"undefined"!=typeof e.debugParams[b.ACTIVE_ALL]||(ge.getOpenSectionFronts().length>0&&u.isUrlMatchPattern(Y.getLocationUrl(),ge.getOpenSectionFronts())?(ge.getOpenSectionFronts().length>0&&u.logWarning("open by opensectionfront!!!"),!0):u.isCurrentUrlFilterValid(ge.getFilterPlacements()))},u.validateScraperReferrerURL=function(){if("undefined"!=typeof e.debugParams[b.IGNORE_REFERRERS])return!0;var t=ge.getReferrers(),n=u.urls.getReferrerUrlWithOrigin();if(0===t.length)return!0;for(var i,r=0;r<t.length;r++)if(i=new RegExp(t[r],"i"),i.test(n))return!0;return u.log("Referrer URL not match."),!1},u.isCurrentUrlFilterValid=function(e){return u.isUrlFilterValid(Y.getLocationUrl(),e)},u.isUrlFilterValid=function(e,t){return!!u.isUrlMatchPattern(e,t.white)||0===t.white.length&&!u.isUrlMatchPattern(e,t.black)},u.isCurrentUrlExcluded=function(e){if(0===e.length)return!1;var t=Y.getLocationUrl();return!!u.isUrlMatchPattern(t,e)},u.isApvExists=function(){for(var e,t=u.urls.getCurrentStructuredUrl(),n=0;n<Ee.getVideosCount();n++){e=Ee.getByIndex(n);var i=u.urls.getStructuredByUrl(e.getArticleUrl());if(i===t)return u.log("Scraper, video is already known! no need to update server! "+e.getArticleUrl()),!0}return!1},u.isUrlMatchPattern=function(e,t){for(var n,i=0;i<t.length;i++)if(n=new RegExp(t[i],"i"),null!==e.match(n))return!0;return!1},u["extends"]=function(e,t){e.__superCtor__=t,e.__super__=t.prototype,e.prototype=Object.create(t.prototype),e.prototype.constructor=e},u.overrideObjectItems=function(e,t){for(var n in t)e.hasOwnProperty(n)&&(t[n]=e[n])},u.fadeout=function(e){var t=1,n=setInterval(function(){t<=.1&&(clearInterval(n),e.style.opacity=0),e.style.opacity=t,e.style.filter="alpha(opacity="+100*t+")",t-=.1*t},50)},u.getlistAsArray=function(e){return"string"!=typeof e?e||[]:""===e?[]:JSON.parse(e)},u.createArrayFromDictinary=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},u.extractImageUrlFromStyle=function(){var e=/^url\("?([^"]+)"?\)$/i;return function(t){return t&&e.test(t)?t.replace(e,"$1"):null}}(),u.getIFrameWindow=function(e){try{var t=e.contentWindow,n=Object.keys(t);if(n.length>0)return t}catch(i){}return null},u.isElementHasSize=function(e){if(u.plugins.isPlugin())return!0;if(!e)return!1;var t=u.getComputedStyle(e),n=parseInt(t.width,10),i=parseInt(t.height,10);if(i>10&&n>10||"auto"===t.height&&"auto"===t.width)return!0;var r=e.getBoundingClientRect();return r.width>10&&r.height>10},u.plugins=function(){function e(){for(var e=[],t=[],n=0;n<r.length;n++){t=r[n].getIframeWindows();for(var i=0;i<t.length;i++)e.push(t[i])}return e}function t(){for(var e=0;e<r.length;e++)if(r[e].checkPlugin())return!0;return!1}function n(e){e&&r.push({checkPlugin:e.checkPlugin||function(){return!1},getIframeWindows:e.getIframeContentWindow||function(){return[]},addPlayEventListener:e.addPlayEventListener||function(){}})}function i(e,t,n){for(var i=0;i<r.length;i++)r[i].addPlayEventListener(e,t,n)}var r=[];return{addSpecialCheck:n,isPlugin:t,getIframeWindows:e,addPlayEventListener:i}}(),u.parseBool=function(e,t){return"undefined"==typeof e&&"undefined"!=typeof t?t:"true"===e||e===!0},u.parsePercentValue=function(e){if(void 0===e||e===!1||"false"===e)return!1;if(e===!0||"true"===e)return!0;var t=parseInt(e,10),n=100*Math.random();return n>t},u.generateUnique=function(){return"xxxxxxxxxxxx-xxxx-4xxx-yxxxxxx-xxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},u.generateShortUnique=function(){return"xxxxx".replace(/[x]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},u.getTrackerTiming=function(e){return e+"*T"+(u.getTimeNow()-E)},u.getRequestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)};return e&&t(e),t},u.getCancelAnimationFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.oCancelAnimationFrame||function(){}},u.hasVideoViewEnabled=function(){return!!c.videoViews&&!!c.videoViews.VideoViewManager},u.poll=function(e,t,n){var i=setInterval(function(){e()&&(clearInterval(i),t())},n)},u.UniqHandler=function(){var e=this,t={};e.handle=function(e,n){e in t||(t[e]=!0,n())}},u.isElementLazyLoad=function(e){if("IMG"!==e.tagName)return!1;var t=e.getAttribute("srcset"),n=e.getAttribute("src");return!n&&!t||(n&&n.indexOf("base64")>-1&&!t?!ge.isImageBase64()||!(e.src!=e.currentSrc&&""!=e.currentSrc&&(!ue.isIE()&&!ue.isEdge()||"undefined"!=typeof e.currentSrc)):"IMG"!==e.tagName?!u.extractImageUrlFromStyle(e.style.backgroundImage):0==e.offsetHeight)},u.contains=function(e,t){return e.indexOf(t)!==-1},u.listenOnce=function(e,t,n){function i(){e.removeEventListener(t,i),n.apply(null,arguments)}e.addEventListener(t,i)},u.isMidnightPassed=function(e){function t(e){return new Date(e+n)}var n=6e4*u.getDateNow().getTimezoneOffset(),i=new Date(e).getTime(),r=u.getDateNow().getTime(),o=t(i),a=t(r),s=a.getYear(),l=o.getYear(),c=a.getMonth(),d=o.getMonth(),p=a.getDate(),h=o.getDate();return s>l||c>d||p>h},u.isElementToReplaceValid=function(e){if(!e)return!1;if(c.utils.ApvElementUtils.getIsElementReplaced(e)||c.utils.ApvElementUtils.getIsElementWatched(e))return!1;var t=u.extractElementSize(e);if(t.width<=ge.getMinimumWidth())return!1;var n=e.clientWidth,i=e.clientHeight;return!(n/i<ge.getValidRatio())||(u.log("Placement cancel: not valid ratio"),!1)},u.windowDispatchEvent=function(e){var t=null;try{t=new Event(e)}catch(n){t=document.createEvent("Event");var i=!1,r=!1;t.initEvent(e,i,r)}window.dispatchEvent(t)},u.isIFrame=function(){return window.self!==window.top},u.isInt=function(e){return e%1===0},u.isProdEnv=function(){return"production"===p},u.getCurrentQueryParameters=function(){var e={};return document.location.search.replace(/(^\?)/,"").split("&").forEach(function(t){var n=t.split("=");e[n[0]]=n[1]}),e},u.isPageAllowedByMeta=function(){if(ae.isIframe())return!0;var e=ge.getAllowedMeta();if(0===e.length)return!0;for(var t=0;t<e.length;t++)for(var n=e[t],i=0;i<n.content.length;i++){var r=n.content[i];if(document.querySelector("meta[name='"+n.name+"'][content='"+r+"']")||c.publisher.publisherShouldScrap&&c.publisher.publisherShouldScrap(r))return!0}return!1},function(){function e(e,t){function n(){v.addEventListener(d,i,!0),v.addEventListener(S.Events.AUXCLICK_EVENT,i,!0),v.addEventListener("touchstart",r,!0),t&&h.addEventListenerOnce(d,t)}function i(e){e.type===S.Events.AUXCLICK_EVENT&&e.button>=2||(h.dispatchEvent(d),t&&c())}function r(){f=!1,v.addEventListener("touchmove",o,!0),v.addEventListener("touchend",a,!0),u=setTimeout(s,p)}function o(){f=!0}function a(e){f===!1&&i(e)}function s(){v&&(v.removeEventListener("touchmove",o,!0),v.removeEventListener("touchend",a,!0))}function c(){h.removeAllEventListener(),clearTimeout(u),v&&(v.removeEventListener(d,i,!0),v.removeEventListener(S.Events.AUXCLICK_EVENT,i,!0),v.removeEventListener("touchstart",r,!0),s(),v=null)}var u,d="click",p=350,h=new l,v=e,f=!1;return n(),{addEventListener:h.addEventListener.bind(h),removeEventListener:h.removeEventListener.bind(h),addEventListenerOnce:h.addEventListenerOnce.bind(h),dispose:c}}c.utils=c.utils||{},c.utils.MouseClickEventObserver=e}(),u.adapters={},u.adapters.wrap=function(e,t,n){this.originalHandler=e[t];var i=this;e[t]=function(){return n.apply(i,arguments),i.originalHandler.apply(e,arguments)}},u.adapters.unWrap=function(e,t){"function"==typeof this.originalHandler&&(e[t]=this.originalHandler)},u.adapters.VirtualClickOrganizer=function(){function e(e){n[e.getId()]=!0}function t(t){return!(!t.isApvEnabled()||n[t.getId()])&&(e(t),!0)}var n={};return{isValid:t,validate:e}}(),function(){function e(e){function t(){return A}function n(){if(!h){var e=void 0;h=new XMLHttpRequest,f===s?v+="_.gif?"+y:(f=l,v+="_.gif",e=y);try{h.open(f,v,!0)}catch(t){return}g&&h.setRequestHeader(r,g),h.onload=i,h.onerror=p,h.ontimeout=d,h.timeout=m,h.send(e)}}function i(){h.status>=200&&h.status<300?E.dispatch():_.dispatch("XHR_Complete:"+h.status)}function d(){_.dispatch("timeout")}function p(){_.dispatch("error:"+h.status)}var h,v=e.url||"",f=e.method||s,g=f===s?o:a,m=e.timeout||5e3,y=e.data,E=new c.utils.Signal,_=new c.utils.Signal,A="XHR"+u++;return{getID:t,load:n,onComplete:E,onError:_,Methods:{GET:s,POST:l}}}function t(t,n){var i=new e(t),r=function(e){d[i.getID()]=void 0,i.onComplete.removeAll(),i.onError.removeAll(),n(e)};return d[i.getID()]=i,i.onComplete.addOnce(r),i.onError.addOnce(r),i.load(),i}function n(e,n){return e.method=s,t(e,n)}function i(e,n){return e.method=l,t(e,n)}var r="Content-Type",o="image/gif",a="application/text",s="get",l="post",u=0;c.utils=c.utils||{},c.utils.ajax=c.utils.ajax||{},c.utils.ajax.XHRRequest=e;var d={};c.utils.ajax.sendGetRequest=n,c.utils.ajax.sendPostRequest=i}();var D=function(){function e(e){n(S.Urls.Logger,e,S.ReportMethods.POST)}function t(e){n(S.Urls.Error,e,S.ReportMethods.POST)}function n(e,t,n){if(!n&&M)return void d(e+"_.gif?"+t);n=n||ge.getReportMethod()||S.ReportMethods.POST;var o=c.utils.ajax;switch(n){case S.ReportMethods.GIF:r(e,t);break;case S.ReportMethods.GET:o.sendGetRequest({url:e,data:t},i);break;case S.ReportMethods.POST:ge.getBeaconReportMethod()?u.sendBeaconNative.call(navigator,e+"_.gif",t):o.sendPostRequest({url:e,data:t},i)}}function i(e){e&&u.sendErrorReport("EmitterErrorContent:"+e)}function r(e,t){var n=new Image;n.onload=function(){o(this)},n.onerror=function(){u.sendErrorReport("EmitterErrorContent:NoTrace"),o(this)},n.src=e+"_.gif?"+t,document.body.appendChild(n)}function o(e){try{document.body.removeChild(e)}catch(t){}}function a(){var e=M.getItem(b);e=e?JSON.parse(e):[],U=e}function s(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push({owner:i.owner,url:i.url,state:i.state,time:i.time,retry:i.retry})}return t}function l(){clonedList=s(U),M.setItem(b,JSON.stringify(clonedList)),U=null}function d(e){var t={owner:k,url:e,image:null,state:T,time:0,retry:-1};a(),p(t),U.push(t),l()}function p(e){e.image=h(e),e.time=u.getTimeNow(),e.retry+=1,e.state=L,document.body.appendChild(e.image)}function h(e){var t=new Image;return t.onload=function(){v(e)},t.onerror=function(){f(e)},t.src=e.url,t}function v(e){a(),m(e),l()}function f(e){if(u.sendErrorReport("EmitterErrorContent:"+JSON.stringify(e)),e.retry===N)return a(),m(e),void l();var t=e.retry*R;setTimeout(function(){a(),g(e),l()},t)}function g(e){E(e),y(e),p(e),U.push(e)}function m(e){E(e),y(e)}function y(e){for(var t=-1,n=0;n<U.length;n++)e.url===U[n].url&&(t=n);t>-1&&U.splice(t,1)}function E(e){try{document.body.removeChild(e.image)}catch(t){}}function _(){a(),A(),l()}function A(){for(var e,t=0;t<U.length;t++)e=U[t],P(e)&&I(e)}function P(e){if(e.guid===k)return!0;var t=u.getTimeNow()-e.time;return t>V&&(e.guid=k,e.retry=-1,!0)}function I(e){var t=!1;switch(e.state){case T:case w:t=!0;break;case C:m(e);break;case L:var n=u.getTimeNow()-e.time;n>D&&(t=!0)}t&&g(e)}var b="_minRTrs",T=0,L=1,w=2,C=3,D=2e4,V=35e3,O=5e3,R=5e3,N=20,k=u.generateUnique(),M=null,U=null,F=null;return M&&(F=new c.utils.Timer(O,_),F.start()),{send:n,sendLog:e,sendError:t}}(),V=function(){function e(e,t){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),o=i.right>n.right,a=i.left<n.left,s=i.top>=n.bottom,l=i.bottom<=n.top,c={state:r.FULLY_VISIBLE,percentage:1};return s||l?(c.percentage=0,c.state=r.HIDDEN,c):(a?c.percentage=(i.right-n.left)/i.width:o&&(c.percentage=(i.width-(i.right-n.right))/i.width),c.percentage>0&&c.percentage<1?c.state=r.ANALYTICS_VISIBLE:c.percentage<=0?c.state=r.HIDDEN:c.state=r.FULLY_VISIBLE,c.percentage=c.percentage<0?0:100*c.percentage,c)}function t(t,n){var i,a=100*o(t);if(i=0===a?r.HIDDEN:100===a?r.FULLY_VISIBLE:r.ANALYTICS_VISIBLE,n!==window&&i!==r.HIDDEN&&n){var s=e(t,n);return s.percentage<a?s:{state:i,percentage:a}}return{state:i,percentage:a}}function n(e,n){var i=t(e,n).state;return i!==r.HIDDEN}function i(e,n){return t(e,n).percentage}var r={HIDDEN:0,ANALYTICS_VISIBLE:1,FULLY_VISIBLE:2},o=function(){function e(e){return e&&1===e.nodeType||!1}function t(e){var t=e||window;return{height:t.innerHeight,width:t.innerWidth}}function n(e,t){return(t||window).getComputedStyle(e,null)}function i(e,t){return e.getPropertyValue(t)}function r(t,o){o||(o=n(t));var a=i(o,"display");if("none"===a)return!1;var s=t.parentNode;return!e(s)||r(s)}function o(e,t){if(e===(t||window).document)return!0;if(!e||!e.parentNode)return!1;var o=n(e,t),a=i(o,"visibility");return"hidden"!==a&&"collapse"!==a&&r(e,o)}function a(e,t){return!(!e||e.width<=0||e.height<=0)&&(e.bottom>0&&e.right>0&&e.top<t.height&&e.left<t.width)}return function(e,n){if(!e)return 0;var i=e.getBoundingClientRect(),r=t(n);if(!a(i,r)||!o(e,n))return 0;var s=0,l=0;return i.top>=0?s=Math.min(i.height,r.height-i.top):i.bottom>0&&(s=Math.min(r.height,i.bottom)),i.left>=0?l=Math.min(i.width,r.width-i.left):i.right>0&&(l=Math.min(r.width,i.right)),s*l/(i.height*i.width)}}();return{isElementVisible:n,getViewportState:t,getElementVisiblePercents:i,state:r}}(),O=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(n){function i(t,r,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if(o=e({path:"/"},i.defaults,o),"number"==typeof o.expires){var s=u.getDateNow();s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s.toUTCString()}else"function"==typeof o.expires.toUTCString&&(o.expires=o.expires.toUTCString());try{a=JSON.stringify(r),/^[\{\[]/.test(a)&&(r=a)}catch(l){}return r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,o.expires&&"; expires="+o.expires,o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,p=0;p<c.length;p++){var h=c[p].split("="),v=h.slice(1).join("=");'"'===v.charAt(0)&&(v=v.slice(1,-1));try{var f=h[0].replace(d,decodeURIComponent);if(v=n.read?n.read(v,f):n(v,f)||v.replace(d,decodeURIComponent),t===f){a=v;break}t||(a[f]=v)}catch(l){}}return a}}return i.setItem=function(e,t,n){i(e,t,{domain:P,expires:n||9999999})},i.getItem=function(e){return i(e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.removeItem=function(t,n){i(t,"",e(n,{domain:P,expires:-1}))},i.withConverter=t,i.isCookiesEnable=function(){var e=!1;try{i.setItem("_minTest","exist"),e=!!i.getItem("_minTest"),i.removeItem("_minTest","true")}catch(t){return!1}return e}(),i}return t(function(){})},R=function(e){function t(t){return A&&e.isCookiesEnable?e:i?localStorage:r?sessionStorage:t!==!1&&e.isCookiesEnable?e:null}function n(){return r?sessionStorage:i?localStorage:null}var i=function(){try{localStorage.setItem("_minTest","test value"),localStorage.removeItem("_minTest")}catch(e){return!1}return"undefined"!=typeof Storage}(),r=function(){try{sessionStorage.setItem("_minTest","test value"),sessionStorage.removeItem("_minTest")}catch(e){return!1}return!0}();return{getLocalStorageInstance:t,getSessionStorageInstance:n,isLocalStorageEnable:i,isSessionStorageEnable:r}},N=function(e,t){function n(e){var t=h();return t[e]}function i(e,t){"undefined"!=typeof e&&r(e,t)}function r(e,t){if(A){var n=h();A&&n&&(n[e]=t,A.setItem(f,JSON.stringify(n)))}}function o(t){var n=Math.abs(e.getTimeNow()-t);return n>g}function a(){_.addEventListener(S.Events.CLIENT_INIT_ANALYTICS,function(){p()}),window.addEventListener("click",function(){p()},!1),window.addEventListener(S.Events.AUXCLICK_EVENT,function(e){e.type===S.Events.AUXCLICK_EVENT&&e.button>=2||p()},!1),_.addEventListener(S.Events.IMPRESSION,function(){p()})}function s(){if(A){l(),a();var t=h(),n=t[m];n?e.isMidnightPassed(n)?v():o(n)&&v():v()}}function l(){for(var e=["","1","2","3","4","5","6","7","8","9"],t=0;t<e.length;t++)A.removeItem("minSessionToken"+e[t])}function c(){A.removeItem(f)}function u(){return n(y)}function d(){return n(E)}function p(){r(m,e.getTimeNow())}function h(){return A?JSON.parse(A.getItem(f)||"{}"):{}}function v(){var t=null,n=h();t=n&&n[E]?n[E]:e.generateUID(),c(),r(E,t),r(y,e.generateUID()),r(m,e.getTimeNow())}var f="minSessionToken10",g=18e5,m="ts",y="sid",E="uid",A=t.getLocalStorageInstance();return{get:n,set:i,reset:c,init:s,getId:u,getUserId:d}};!function(){var e={};c.utils=c.utils||{},c.utils.ApvElementUtils=e,e.setElementAsProcessed=function(e){e.setAttribute("data-apv_processed","true")},e.getIsElementProcessed=function(e){return"true"===e.getAttribute("data-apv_processed")},e.setElementAsReplaced=function(e){e.setAttribute("data-apv_replaced","true")},e.getIsElementReplaced=function(e){return"true"===e.getAttribute("data-apv_replaced")},e.setElementAsWatched=function(e){e.setAttribute("data-apv_watched","true")},e.getIsElementWatched=function(e){return"true"===e.getAttribute("data-apv_watched")},e.removeIsElementWatched=function(e){return e.removeAttribute("data-apv_watched")}}();var k=function(e,t,n){function i(){t.parent.postMessage(r(),"*")}function r(){return JSON.stringify({origin:E,type:S.DATA_REQUEST,window_origin:t.location.origin})}function o(e){var t=d(e.data);t.type===S.DATA_REQUEST&&a()}function a(){n.getIframes().forEach(function(e){if("object"==typeof e.contentWindow&&e.contentWindow.postMessage instanceof Function){
for(var t=0;t<P.length;t++){var n=P[t];if(e.src.indexOf(n)>-1||""===e.src)return}if(e.contentWindow.postMessage)try{e.contentWindow.postMessage(s(e),"*")}catch(i){}}})}function s(n){var i=c.publisher.getRawUrlForIFrame?c.publisher.getRawUrlForIFrame(n):t.location.href;return i&&(i=e.appendDebugToolsQueryData(i),i=e.appendDebugMffHashData(i)),JSON.stringify({origin:E,type:S.DATA_RESPONSE,isTestGroup:_,subTestGroup:A,window_origin:t.location.origin,href:i})}function l(){n.isIframe()||t.addEventListener("message",o)}function u(e,t){_=e,A=t,n.isIframe()?i():a()}function d(e,t){try{var n=JSON.parse(e);if(n.origin===E)return n.event=t,n}catch(i){}return{type:S.INVALID}}function p(e,t){var n=d(e.data,e);n.type===S.DATA_RESPONSE&&t(n)}function h(e){t.addEventListener("message",function(t){var n=d(t.data,t);n.type===S.MINUTE_REQUEST_FROM_IFRAME&&e(n)})}function v(e,n){t.addEventListener("message",function(t){var i=d(t.data,t);i.subtype===e&&n(i)})}function f(e,t){e.addEventListener("message",function(e){p(e,t)})}function g(e,t,n){e.addEventListener("message",function(e){var i=d(e.data,e);i.subtype===t&&n(i)})}function m(n,i){var r={origin:E,type:S.MINUTE_REQUEST_FROM_IFRAME,window_origin:t.location.origin};r.subtype=n,e.extendObject(r,i||{}),t.parent.postMessage(JSON.stringify(r),"*")}function y(n,i,r){var o={origin:E,type:S.DATA_RESPONSE,isTestGroup:_,subTestGroup:A,window_origin:t.location.origin,href:t.location.href};o.subtype=i,e.extendObject(o,r||{}),n.postMessage(JSON.stringify(o),"*")}var E="minute",_=null,A=null,P=["ads.zivlin.co.il","widgets.outbrain.com","sp.auth.adobe.com"],S=(c.publisher,{DATA_REQUEST:"minuteDataRequest",DATA_RESPONSE:"minuteDataResponse",INVALID:"invalid",MINUTE_REQUEST_FROM_IFRAME:"minuteRequestFromIFrame"});return{broadcast:u,listen:l,addPostMessageListener:f,addParentListener:h,sendToParent:m,addPostMessageListenerBySubtype:g,addParentListenerBySubtype:v,sendToIFrame:y}};!function(){function e(e,t,n){function i(){f||(f=new c.utils.Timer(p,o),f.setCounterLimit(d)),g=null,o(),f.start(),f.reset()}function r(){f.kill(),f=null,h.removeAll(),h=null,l=null}function o(){var e=u.extractElementSize(l);if(!e.error)return g?void(g.width!==e.width||g.height!==e.height?(g=e,f.reset(),h.dispatch()):f.getCounter()>=d&&v.dispatch()):void(g=e)}function a(){return h.add.bind(h)}function s(){return v}var l=e,d=t,p=n,h=new c.utils.Signal,v=new c.utils.Signal,f=null,g=null;return{start:i,addSizeChangedListener:a,addSizeChangeFailedListener:s,dispose:r}}c.utils=c.utils||{},c.utils.ElementSizeTracer=e}();var M=function(e,t,n,i,r){function o(){if(!e.shouldHideNativePlayIcon())return void n.log("Charmer: no need to hide native play button, set by config");var t=".IIV::-webkit-media-controls-play-button,.IIV::-webkit-media-controls-start-playback-button {opacity: 0;pointer-events: none;width: 5px;}",r=document.createElement("style");r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),i.getElementsByTagName("head")[0].appendChild(r)}function a(e){s&&(u||l&&9===t.getiOSVersion()||l&&t.getiOSFullVersion()>=10.3||(o(),r(e,!1,!1)))}c.utils=c.utils||{},c.utils.CharmerService=M;var s=t.isMobile(),l=t.isSafari(),u=t.isAndroid();return{start:a}},U=function(){function e(){r=[],o=[];for(var e=document.querySelectorAll("iframe"),t=0;t<e.length;t++)r.push(e[t].contentWindow),o.push(e[t])}function t(){return e(),r}function n(){return e(),o}function i(){return a}var r=[],o=[],a=u.isIFrame();return{isIframe:i,getIframeWindows:t,getIframes:n}},F=function(e,t,n){function i(e){var t,n,i=e.compatibility;switch(typeof i){case"undefined":return;case"string":i=JSON.parse(i)}U?(t=i.mobile||{},n=i.os||{},j.overrideObjectItems(n,z)):t=i.desktop||{},j.overrideObjectItems(t,Y)}function r(){if(null!==G)return H;var e=q.match(/android\s*(\d+\.?\d*\.?\d*)/i);return e&&2===e.length?(G=!0,H=n.convertVersionToNumbers(e[1].split("."))):(G=!1,H=null),H}function o(e,t,n,i){var r=null;if(n&&e.match(n))return r;i=i||2;var o=e.match(t);return o&&(r=parseInt(o[i],10)),r}function a(e){return{firefox:function(){return o(e,/mozilla\/[\w\.]+.+rv\:.+gecko\/\d+.+(firefox)\/([\w\.]+)/i,K)},edge:function(){return o(e,/(edge)\/((\d+)?[\w\.]+)/i,K)},chrome:function(){return o(e,/(chrome)\/v?([\w\.]+)/i,K)},msie:function(){var t=o(e,/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i),n=o(e,/(?:ms|\()(ie)\s([\w\.]+)/i);return t||n},safari:function(){return o(e,/version\/([\w\.]+).+?(mobile\s?safari|safari)/i,K,1)},crios:function(){return o(e,/(CriOS)\/v?([\w\.]+)/i,K,2)}}}function s(){var e,t=/(?:iPhone|iPod|iPad)/i;return t.test(q)?(e=q.match(/OS (\d+)_(\d+)_?(\d+)?/i),e?n.convertVersionToNumbers(e.slice(1,3)):null):null}function l(){var e,t;if(!U)return!1;if(e=r())return t=J.chrome(),W=t>=Y.chrome||n.compare(e,z.android)>=0?t:0,k="chrome",x=Y.chrome,!0;if(e=s()){var i=n.compare(e,z.ios)>=0;if(i){var o=J.crios();return o?(W=o,x=Y.crios,k="crios"):(W=e[0],k="safari",x=Y.safari),!0}}return!1}function c(){var e;for(var t in Y)if(J[t]){if(e=J[t]())return W=e,k=t,x=Y[t],!0}else j.log("Can't find vendor '"+t+"' version function in comparability");return!1}function u(e){for(var t,n=e.userAgentDebugTime||[],i=0;i<n.length;i++)if(t=new RegExp(n[i],"i"),t.test(q))return void(F=!0);F=!1}function d(){"boolean"!=typeof U&&(U=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(q)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(q.substr(0,4)))}function p(e){i(e);var t=l();t||c(),u(e),h()}function h(){var e=["fban","fbav","fbios"];B=!1;for(var t=0;t<e.length;t++)if(q.indexOf(e[t])>-1){B=!0;break}}function v(){if(W<x)return!1;if(U){var e=r();if(e)return n.compare(e,z.android)>=0;if(e=s())return n.compare(e,z.ios)>=0}return!0}function f(){return/^((?!chrome|android|crios).)*(safari|iphone|ipad)/i.test(q)}function g(){return Z}function m(){return X}function y(){return Q}function E(){if("undefined"!=typeof M)return M;var e={firefox:36,safari:7.1,chrome:31,crios:99};return M=!!e[k]&&W>=e[k]}function _(){return F}function A(){return B}function P(){return!Z&&!X}function I(e){if(!e||!e.desktop)return!0;var t;for(var n in e.desktop)if(J[n]&&(t=J[n]()))return t>=e.desktop[n];return!0}function b(){return U}function T(){return b()?null===s()?0:s()[0]:0}function L(){if(!b())return 0;var e=s();return null===e?0:parseFloat(e[0]+"."+e[1])}function w(){return b()&&!!s()&&f()}function C(){return!!J.chrome()}function D(){return C()?J.chrome():null}function V(){return!!r()}function O(){var e=r();return e?e[0]:0}function R(){return"iPad"===t.platform}function N(){return b()?S.Emitter.ANALYTICS_SOURCE_WEB_MOBILE:S.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP}var k,M,U,F,B,W=0,x=99,G=null,H=null,Y={firefox:34,msie:11,edge:12,chrome:40,safari:9,crios:99},z={android:[4,4,4],ios:[9,0,0]},j=e,q=(t.userAgent||"").toLowerCase(),K=/opr\/|opera|Yandex|SeaMonkey|Maxthon|Avant|Deepnet|Comodo_Dragon|Dooble|Palemoon|Flock|facebookexternalhit|Facebot/i;d();var J=a(q),Z=!!J.msie(),X=!!J.edge(),Q=!!J.firefox();return{init:p,isBrowserSupported:v,isSafari:f,isIE:g,isEdge:m,isFF:y,isObjectFitSupported:E,isUserAgentDebug:_,isUserAgentFacebook:A,isScraperEnabled:P,checkPlacement:I,isMobile:b,getiOSVersion:T,getiOSFullVersion:L,isChrome:C,getChromeVersion:D,isAndroid:V,getAndroidMajorVersion:O,isiPad:R,isIosSafari:w,getMobileAnalyticsCode:N}},B=function(e,t,n){function i(e,t,n,i,r){mt=e,It=n,yt=i,Et=r,_t=t,At=!0,o()}function r(){mt.optimizely=mt.optimizely?mt.optimizely:{enable:!1,impr:!1,vv:!0,filter:{black:[],white:[]}},mt.optimizely.enable=t.parseBool(mt.optimizely.enable),mt.optimizely.impressionFlag=t.parseBool(mt.optimizely.impr),mt.optimizely.vvFlag=t.parseBool(mt.optimizely.vv),mt.optimizely.filter=mt.optimizely.filter?mt.optimizely.filter:{},mt.optimizely.filter.black=mt.optimizely.filter&&mt.optimizely.filter.black?mt.optimizely.filter.black:[],mt.optimizely.filter.white=mt.optimizely.filter&&mt.optimizely.filter.white?mt.optimizely.filter.white:[]}function o(){_t.isMobile()?mt.playMode=S.config.PlayModes.Viewport:mt.playMode=mt.playMode||S.config.PlayModes.Viewport,mt.forceFlushAnalytics=t.parseBool(mt.forceFlushAnalytics),"undefined"!=typeof mt.allowedAnalytics&&(St=100*Math.random()<parseInt(mt.allowedAnalytics)),mt.urlCanonical=mt.urlCanonical||{},mt.urlCanonical.urlStruct=mt.urlCanonical.urlStruct||mt.urlStruct||[S.UrlStructure.Origin,S.UrlStructure.PathName],mt.numberOfLoops=parseInt(mt.numOfLoops||"0",10),r(),mt.enableMobileVideo=t.parseBool(mt.enableMobileVideo,!0),mt.hideNativePlayIcon=t.parseBool(mt.hideNativePlayIcon,!0),mt.blockerCheck=t.parseBool(mt.blockerCheck),mt.loadMoreObservers=mt.loadMoreObservers||[],mt.fullPageAjaxChangeObserver=mt.fullPageAjaxChangeObserver||[];var e="^https?://"+window.location.host+"/?(\\??(?:[\\d\\w_\\-]+=[\\d\\w_\\-]+&?)*)(#.*)?$";mt.referrers?mt.referrers.push(e):mt.referrers=[e],mt.enableAnalyticsBroadcaster=t.parseBool(mt.enableAnalyticsBroadcaster),mt.minimumWidth=parseInt(mt.minimumWidth||"70",10),mt.validRatio=mt.validRatio||.9,mt.overrideIntegrationLayer=t.parseBool(mt.overrideIntegrationLayer),mt.allowUserTrafficAnalytics=t.parseBool(mt.allowUserTrafficAnalytics,!0),mt.imageBase64=t.parseBool(mt.imageBase64,!1),mt.isOldTestMode=t.parseBool(mt.isOldTestMode,!0),"undefined"==typeof mt.shouldLazyWaitForLoad?mt.shouldLazyWaitForLoad=!1:mt.shouldLazyWaitForLoad=t.parseBool(mt.shouldLazyWaitForLoad),mt.enableApvLoadReport=t.parseBool(mt.enableApvLoadReport,!1),mt.apvLoadTimeout=parseInt(mt.apvLoadTimeout||"10000"),mt.renderModulus=parseInt(mt.renderModulus||"5"),mt.maniakRefs?t.isArray(mt.maniakRefs)||(mt.maniakRefs=[mt.maniakRefs]):mt.maniakRefs=[],mt.enableApvBlob=t.parseBool(mt.enableApvBlob,!1),l(),d(),p(),b(),h(),mt.videoDataSearch=mt.videoDataSearch||["articleUrl","videoId"],m(),f(),y(),E(),_(),A(),I(),P(),s(),a(),T()}function a(){var e=Y.getLocationDomain(),t=[];if("undefined"==typeof mt.openSectionFront)return void(mt.openSectionFront=t);mt.openSectionFront=mt.openSectionFront||"",mt.openSectionFront=mt.openSectionFront.split(",");for(var n=mt.openSectionFront,i=0;i<n.length;i++){var r="/"+n[i];"/HOMEPAGE"==r&&(r=""),r="^(?:https?://)?(www.)?"+e+r+"/?(\\??(?:[\\d\\w_\\-]+=[\\d\\w_\\-]+&?)*)(#.*)?$",t.push(r)}mt.openSectionFront=t}function s(){return"undefined"==typeof mt.segmentOptions?(mt.segmentOptions={},void(mt.segmentOptions.enabled=!1)):(mt.segmentOptions.pub_name=mt.segmentOptions.pub_name||window.location.host,t.parseBool(mt.segmentOptions.test,!1)?t.parseBool(mt.segmentOptions.test)&&(mt.segmentOptions.test="TEST - "):mt.segmentOptions.test="",mt.segmentOptions.exp_name=mt.segmentOptions.test+(mt.segmentOptions.exp_name||"Minute - "+mt.segmentOptions.pub_name),mt.segmentOptions.vv_title=mt.segmentOptions.vv_title||"Experiment Action Taken",mt.segmentOptions.apv_user=mt.segmentOptions.apv_user||"Experiment Viewed",mt.segmentOptions.mobile=mt.segmentOptions.mobile||{},mt.segmentOptions.desktop=mt.segmentOptions.desktop||{},void(_t.isMobile()?(mt.segmentOptions.enabled=t.parseBool(mt.segmentOptions.mobile.enabled,!1),mt.segmentOptions.reporthadImpOnly=t.parseBool(mt.segmentOptions.mobile.reporthadImpOnly,!1)):(mt.segmentOptions.enabled=t.parseBool(mt.segmentOptions.desktop.enabled,!1),mt.segmentOptions.reporthadImpOnly=t.parseBool(mt.segmentOptions.desktop.reporthadImpOnly,!1))))}function l(){var e,n=mt.inArticlePlacer||{};mt.inArticlePlacer=n,ue.isMobile()?(e=n.mobile=n.mobile||{},n.active=t.parseBool(e.active,!0)):(e=n.desktop=n.desktop||{},n.active=t.parseBool(e.active,!1)),n.viewportMask=e.viewportMask||n.viewportMask,n.showLogo=t.parseBool(e.showLogo,!0),n.logoPosition=e.logoPosition||"bottom-left",n.charmer=t.parseBool(e.charmer,!0)}function c(){return bt||(bt=mt.inArticlePlacer&&mt.inArticlePlacer.viewportMask?document.querySelector(mt.inArticlePlacer.viewportMask):window),bt}function u(e){bt=e}function d(){function e(e){e="undefined"==typeof e?"100":e;var t=parseInt(e,10);return 100*Math.random()>=t}mt.throttle=mt.throttle||{},"undefined"!=typeof yt?mt.throttle.visual=yt:"undefined"==typeof mt.throttle.visual&&(mt.throttle.visual=t.parseBool(mt.disableScript)?"0":"100"),mt.throttle.visual=e(mt.throttle.visual),mt.throttle.analytic=e(mt.throttle.analytic)}function p(){mt.errorReport=t.parsePercentValue(mt.errorReport)}function h(){mt.window=mt.window||{},t.isArray(mt.window)?v():(mt.window.intervals=mt.window.intervals||{},gt=mt.window.loadTimeout?parseInt(mt.window.loadTimeout,10):0,mt.window.topWindowReferrer=mt.window.topWindowReferrer||!1)}function v(){for(var e=null,t=0;t<mt.window.length;t++){var n=mt.window[t],i=n.hasOwnProperty(S.WindowKeys.COMPATIBILITY);if(e||i){if(i&&_t.checkPlacement(n[S.WindowKeys.COMPATIBILITY])){e=n;break}}else e=n}e&&(mt.window=e)}function f(){mt.filters&&(mt.filter=mt.filters),mt.filter&&(_t.isMobile()?(mt.filter.mobile&&(mt.filter=mt.filter.mobile),mt.filter.iPad&&_t.isiPad()&&(mt.filter=mt.filter.iPad)):mt.filter.desktop&&!_t.isMobile()&&(mt.filter=mt.filter.desktop)),mt.filter=mt.filter||{},mt.filter.scraper=mt.filter.scraper||{},mt.filter.scraper.white=mt.filter.scraper.white||[],mt.filter.scraper.black=mt.filter.scraper.black||[],mt.filter.scraper.ogtype=g&&t.parseBool(mt.filter.scraper.ogtype,!0),mt.filter.placements=mt.filter.placements||{},mt.filter.placements.white=mt.filter.placements.white||[],mt.filter.placements.black=mt.filter.placements.black||[],mt.filter.inArticle=mt.filter.inArticle||{},mt.filter.inArticle.white=mt.filter.inArticle.white||[],mt.filter.inArticle.black=mt.filter.inArticle.black||[],mt.filter.blocking=mt.filter.blocking||{},mt.filter.blocking.white=mt.filter.blocking.white||[],mt.filter.blocking.black=mt.filter.blocking.black||[],mt.filter.exclude=mt.filter.exclude||[]}function m(){var e=mt.rezList||["s","m","l","xl"],t=function(t){for(var n,i={},r=0;r<e.length;r++)n=t[e[r]],n&&(i[e[r]]=n);return i};mt.rezGif||(mt.rezGif={s:50,m:100,l:150}),mt.rezVideo||(mt.rezVideo={s:100,m:200,l:300}),mt.rezGif=t(mt.rezGif),mt.rezVideo=t(mt.rezVideo)}function y(){mt.scraper=mt.scraper||{},mt.scraper.checkInternal=parseInt(mt.scraper.checkInternal||"5000"),mt.scraper.maxCheckCount=parseInt(mt.scraper.maxCheckCount||"0"),mt.scraper.eventsInternal=parseInt(mt.scraper.eventsInternal||"250"),mt.scraper.maxFoundReport=parseInt(mt.scraper.maxFoundReport||"1"),mt.scraper.enableMobileReport=t.parseBool(mt.scraper.enableMobileReport,!1),mt.scraper.enableDesktopReport=t.parseBool(mt.scraper.enableDesktopReport,!0),mt.scraper.enableContentChangeMobile=t.parseBool(mt.scraper.enableContentChangeMobile),mt.scraper.enableContentChangeDesktop=t.parseBool(mt.scraper.enableContentChangeDesktop),mt.scraper.enableEventCollection=t.parseBool(mt.scraper.enableEventCollection,!0),mt.scraper.isImmediateLoad=t.parseBool(mt.scraper.isImmediateLoad,!1),mt.scraper.players?t.isArray||(mt.scraper.players=[mt.scraper.players]):mt.scraper.players=[],mt.scraper.debug=mt.scraper.debug||{},mt.scraper.debug.immediateScraper=t.parseBool(mt.scraper.debug.immediateScraper,!t.isProdEnv()),mt.scraper.allowedMeta=mt.scraper.allowedMeta||[];for(var e=0;e<mt.scraper.allowedMeta.length;e++){var n=mt.scraper.allowedMeta[e];"string"==typeof n.content&&t.logWarning(n.content+" should be set as array")}}function E(){mt.pollVisibility=parseInt(mt.pollVisibility||"0",10),mt.viewportAnalytics=mt.viewportAnalytics||{},mt.viewportAnalytics.percentage=parseInt(mt.viewportAnalytics.percentage||"50",10)}function _(){mt.viewportPercentage=parseInt(mt.viewportPercentage||"1",10)}function A(){mt.effects=mt.effects||{},mt.effects.apvShowDelay=parseInt(mt.effects.apvShowDelay||"500",10),mt.effects.apvTransitionVideo=mt.effects.apvTransitionVideo||"opacity 0.5s ease-out"}function P(){mt.reportMethod=mt.reportMethod||S.ReportMethods.POST,mt.beaconReportMethod=t.parseBool(mt.beaconReportMethod,!0)&&!!t.sendBeaconNative,mt.canReportImmediately=mt.reportMethod===S.ReportMethods.POST&&mt.beaconReportMethod&&!_t.isEdge()}function I(){mt.eagerApv=mt.eagerApv||{},mt.eagerApv.interval=parseInt(mt.eagerApv.interval||"50",10),mt.eagerApv.count=parseInt(mt.eagerApv.count||"1",10)}function b(){mt.placementService=mt.placementService||{},mt.placementService.wrapperCenterElement=mt.placementService.wrapperCenterElement===!0||"true"===mt.placementService.wrapperCenterElement,mt.placementService.baseHeightPercent=parseFloat(mt.placementService.baseHeightPercent||.5),mt.placementService.baseThumbPx=parseInt(mt.placementService.baseThumbPx||250),mt.placementService.domRefresh=parseInt(mt.placementService.domRefresh||5e3);var e="undefined"!=typeof Et;e?mt.placementService.enableBlockingDistance=Et:mt.placementService.enableBlockingDistance=t.parseBool(mt.placementService.enableBlockingDistance),e?mt.placementService.debug=t.parseBool(Et):"production"!==It?mt.placementService.debug=t.parseBool(mt.placementService.debug):mt.placementService.debug=!1,mt.placementService.naRankPercent=parseInt(mt.placementService.naRankPercent||80),mt.placementService.viewportMaskEchoTime=mt.placementService.viewportMaskEchoTime||0,mt.placementService.viewportMaskEchoRepeat=mt.placementService.viewportMaskEchoRepeat||0}function T(){mt.minuteEventListener=mt.minuteEventListener||{mobile:{},desktop:{}},_t.isMobile()?(mt.minuteEventListener.reportCompatibilityOnly=t.parseBool(mt.minuteEventListener.mobile.reportCompatibilityOnly,!0),mt.minuteEventListener.VVCounterLimit=mt.minuteEventListener.mobile.VVCounterLimit||99999,mt.minuteEventListener.VVCounterTestLimit=mt.minuteEventListener.mobile.VVCounterTestLimit||99999):(mt.minuteEventListener.reportCompatibilityOnly=t.parseBool(mt.minuteEventListener.desktop.reportCompatibilityOnly,!0),mt.minuteEventListener.VVCounterLimit=mt.minuteEventListener.desktop.VVCounterLimit||99999,mt.minuteEventListener.VVCounterTestLimit=mt.minuteEventListener.desktop.VVCounterTestLimit||99999)}function L(){return mt.playerIdPattern||mt.brightcovePlayerPattern}function w(){return mt.blockerCheck}function C(){return At}function D(){return Pt}function V(){return mt.filter.scraper}function O(e){return e==S.Emitter.PRODUCT_IN_ARTICLE?mt.filter.inArticle:mt.filter.placements}function R(){return mt.filter.exclude}function N(){return mt.window.intervals}function k(){return gt}function M(){return mt.window.topWindowReferrer}function U(){return mt.rezVideo}function F(){return mt.rezGif}function B(){return mt.throttle.visual}function W(){return mt.throttle.analytic}function x(){return mt.forceFlushAnalytics}function G(){return mt.scraper.checkInternal}function H(){return mt.scraper.maxCheckCount}function z(){return mt.scraper.maxFoundReport}function j(){return ue.isMobile()?mt.scraper.enableMobileReport:mt.scraper.enableDesktopReport}function q(){return ue.isMobile()&&mt.scraper.enableContentChangeMobile||!ue.isMobile()&&mt.scraper.enableContentChangeDesktop}function K(){return mt.scraper.enableEventCollection}function J(){return mt.scraper.eventsInternal}function Z(){return mt.scraper.debug}function X(e){for(var t=mt.scraper.players,n=0;n<t.length;n++)if(t[n].id===e)return JSON.parse(JSON.stringify(t[n]));return{id:e}}function Q(){return mt.scraper.isImmediateLoad}function $(){return mt.placementService.naRankPercent}function ee(){return mt.pollVisibility}function te(){return mt.viewportAnalytics.percentage}function ne(){return Tt!==-1?Tt:Tt=n.isTestGroup()?parseInt(mt.viewportAnalytics.testGroupTimeSpan||"1",10):parseInt(mt.viewportAnalytics.timeSpan||"1",10)}function ie(){return mt.viewportPercentage}function re(){return mt.placementService.baseHeightPercent}function oe(){return window.innerHeight*re()}function ae(){return mt.placementService.debug}function se(){return mt.placementService.wrapperCenterElement}function le(){return mt.placementService.baseThumbPx}function ce(){return mt.playMode}function de(){return St}function pe(){return mt.optimizely}function he(){return mt.urlCanonical.urlStruct}function ve(){return mt.referrers}function fe(){return mt.placementService.domRefresh}function ge(){return t.parseBool(mt.placementService.disableApvOnCarouselScroll)}function me(){if(!n){var e=t.isCurrentUrlFilterValid(mt.filter.blocking),n=mt.placementService.enableBlockingDistance&&e;n&&(e?t.log("Blocking Distance filter passed. Blocking Distance is ON"):t.log("Blocking Distance: Page doesn't comply with blocking distance filter"))}return n}function ye(){return void 0!==e.test?parseInt(e.test):parseInt(mt.testGroupSize||"10")}function Ee(){return mt.effects.apvShowDelay}function _e(){return mt.effects.apvTransitionVideo}function Ae(){return mt.numberOfLoops}function Pe(){return mt.playerSelector}function Se(){return t.parseBool(mt.overrideAllPlacements,!0)}function Ie(){return mt.minimumVer?mt.minimumVer:"0"}function be(){return mt.reportMethod}function Te(){return mt.beaconReportMethod}function Le(){return mt.canReportImmediately}function we(){return mt.placements||{}}function Ce(){return mt.mobile_placements||{}}function De(){return mt.tooltip||"Optimized by minute.ly"}function Ve(){if(!mt.enableMobileVideo||!_t.isMobile())return!1;var e=_t.getiOSFullVersion();return!!(_t.isSafari()&&e>=10)||!!(_t.isAndroid()&&_t.isChrome()&&_t.getChromeVersion()>=53&&_t.getAndroidMajorVersion()>=6)}function Oe(){return mt.hideNativePlayIcon}function Re(){return mt.filter.scraper.ogtype}function Ne(){return mt.loadMoreObservers}function ke(){return mt.fullPageAjaxChangeObserver}function Me(){return mt.baseVideoUrl||""}function Ue(){return mt.errorReport}function Fe(){return mt.eagerApv.interval}function Be(){return mt.eagerApv.count}function We(){return mt.inArticlePlacer.active}function xe(){return mt.inArticlePlacer.charmer&&this.shouldEnableCharmer()}function Ge(){return mt.inArticlePlacer.showLogo}function He(){return mt.inArticlePlacer.logoPosition}function Ye(){return mt.enableAnalyticsBroadcaster}function ze(){return mt.maxApvsPerPage?parseInt(mt.maxApvsPerPage):99999}function je(){return mt.enableMobileVideo}function qe(){return mt.minimumWidth}function Ke(){return mt.validRatio}function Je(){return mt.overrideIntegrationLayer}function Ze(){return mt.allowUserTrafficAnalytics}function Xe(){return mt.logoPosition}function Qe(){return mt.segmentOptions.enabled}function $e(){return mt.segmentOptions}function et(){return mt.shouldLazyWaitForLoad}function tt(){return mt.segmentOptions.reporthadImpOnly}function nt(){return mt.imageBase64}function it(){return mt.openSectionFront}function rt(){return mt.placementService.viewportMaskEchoTime}function ot(){return mt.placementService.viewportMaskEchoRepeat}function at(){return mt.isOldTestMode}function st(){return mt.scraper.allowedMeta}function lt(){return mt.minuteEventListener.reportCompatibilityOnly}function ct(){return mt.minuteEventListener.VVCounterLimit}function ut(){return mt.minuteEventListener.VVCounterTestLimit}function dt(){return mt.apvLoadTimeout}function pt(){return mt.enableApvLoadReport}function ht(){return mt.renderModulus}function vt(){return mt.maniakRefs}function ft(){return mt.enableApvBlob}var gt,mt={},yt=null,Et=null,_t=null,At=!1,Pt=e._publisher,St=!0,It=null,bt=null,Tt=-1;return{init:i,isReady:C,getPublisherId:D,isVisualThrottle:B,isAnalyticThrottle:W,getWindowLoadTimeout:k,getFilterScraper:V,getFilterPlacements:O,getFilterExclude:R,getWindowIntervals:N,getIsTopWindowReferrerEnabled:M,getRezVideo:U,getRezGif:F,isForceFlushAnalytics:x,getScraperInternal:G,getScraperMaxCheckCount:H,getScraperMaxFoundReport:z,isScraperEnable:j,isScraperEnableContentChange:q,isScraperEnableEventCollection:K,getScraperEventsInternal:J,getScraperDebug:Z,getScraperPlayerById:X,getScraperImmediateLoad:Q,getVideoNaRankPercent:$,getViewportAnalyticsPercentage:te,getViewportAnalyticsTimeSpan:ne,getViewportPercentage:ie,getBaseHeightPercent:re,getBaseHeight:oe,isPlacementsDebugEnabled:ae,isWrapperCenterElement:se,getPollVisibility:ee,getDefaultPlayMode:ce,getBaseThumbPx:le,getViewportMaskEchoTime:rt,getViewportMaskEchoRepeat:ot,getIsAnalyticsEnabled:de,getOptimizely:pe,getUrlStructure:he,getReferrers:ve,getPlacementDomRefresh:fe,isBlockingDistanceEnabled:me,getPlayerIdPattern:L,getTestGroupSize:ye,getEffectApvShowDelay:Ee,getEffectApvTransitionVideo:_e,getIsBlockerCheck:w,getNumberOfLoops:Ae,getPlayerSelector:Pe,isOverrideAllPlacements:Se,getMinimumVer:Ie,getReportMethod:be,getBeaconReportMethod:Te,getCanReportImmediately:Le,getTooltip:De,shouldHideNativePlayIcon:Oe,getIsScrapOgTypeEnabled:Re,getLoadMoreObservers:Ne,getFullPageAjaxChangeObserver:ke,getBaseVideoUrl:Me,shouldEnableCharmer:Ve,getIsEnableErrorReport:Ue,getEagerApvInterval:Fe,getEagerApvCount:Be,getIsAnalyticsBroadcasterEnabled:Ye,getRelativePlacements:we,getRelativeMobilePlacements:Ce,getIsDisableApvOnCarouselScroll:ge,getMaxApvsPerPage:ze,getIsEnableMobileVideo:je,getMinimumWidth:qe,getValidRatio:Ke,shouldOverridePlacements:Je,getLogoPosition:Xe,isUserTrafficAnalyticsAllowed:Ze,shouldLazyWaitForLoad:et,isOldTestMode:at,getAllowedMeta:st,getRenderModulus:ht,getManiakRefs:vt,isInArticlePlacerActive:We,getInArticlePlacerCharmer:xe,getInArticleViewportMask:c,setInArticleViewportMask:u,getInArticleShowLogo:Ge,getInArticleLogoPosition:He,isImageBase64:nt,getOpenSectionFronts:it,getReportCompatibilityOnly:lt,getVVCounterLimit:ct,getVVCounterTestLimit:ut,isSegmentEnable:Qe,getSegmentOptions:$e,getReportHadImpOnly:tt,getApvLoadTimeout:dt,getIsApvLoadReportEnabled:pt,getIsApvBlobEnabled:ft}},W=function(e,t){function n(n,i){function r(){return O.videoUrl?k&&""!==k?0===O.videoUrl.indexOf(k)?O.videoUrl:k+O.videoUrl:O.videoUrl:""}function o(){P=parseInt(O.id),S=O.videoId,b=e.parseBool(O.doesCollect),I=parseInt(O.minVidId),T=r(),L=O.videoRatio?parseFloat(O.videoRatio):1.78,w=O.hltId?parseInt(O.hltId):null,C=O.articleUrl,D=e.parseBool(O.overrideBD),T?V="undefined"!=typeof O.rank?parseInt(O.rank):t.getVideoNaRankPercent():(D=!1,V=0)}function a(){return P}function s(){return!!T}function l(){return R}function c(){return e.urls.getStructuredByUrlWithoutOrigin(C)}function u(){return b}function d(){return S}function p(){return I}function h(){return w}function v(){return T}function f(){return L}function g(){return D}function m(){return V}function y(e){V=e}function E(){return!(!w||!T)}function _(){N=!0}function A(){return N}var P,S,I,b,T,L,w,C,D,V,O=e.cloneObject(n),R=i,N=!1,k=t.getBaseVideoUrl();return o(),{getId:a,getArticleUrl:c,getDoesCollect:u,getPublisherVideoId:d,getVideoDBId:p,getHighlightId:h,getAPVUrl:v,getVideoRatio:f,isForcePlacement:g,getRank:m,setRank:y,hasAPV:s,isApvEnabled:E,shouldPlayRegular:l,setUsedInArticle:_,getUsedInArticle:A}}function i(e,t){return new n(e,t)}function r(e,t){return new n({id:Math.floor(1e5*Math.random()),videoId:t||Math.floor(1e6*Math.random()).toString(),doesCollect:!1,minVidId:Math.floor(1e5*Math.random()),videoUrl:"qa3-apv-static.snackly.co/videos/v-2bf2ee5b-7913-4553-23122-abae-63d202e97d48-s10.0-16.0",hltId:Math.floor(1e4*Math.random()),articleUrl:e||"/2017/07/31/analyst-downgrades-facebook-predicts-nearly-20-percent-drop.html"},(!0))}return{create:i,createMock:r}},x=function(t,n,i,r){function o(e){function t(){null===n&&(n=e());var t=document.createElement("a");return t.href=n,t.origin||(t.origin=t.protocol+"//"+t.hostname+(t.port?":"+t.port:"")),t.origin}var n=null;return t}function a(e,n){return t.urls.getStructuredByUrlWithoutOrigin(n)+"_"+e}function s(e,t,n){e[t]?e[t].push(n):e[t]=[n]}function l(e){var t=a(e.getPublisherVideoId(),e.getArticleUrl());O[t]||(V.push(e),s(O,e.getArticleUrl(),e),s(O,e.getPublisherVideoId(),e),s(O,t,e))}function c(e,t){for(var n,i,o=0;o<e.length;o++)i=e[o],i.articleUrl&&u(R()+i.articleUrl)&&(n=r.create(i,t),l(n))}function u(e){return!!e&&"/"!==e&&t.isUrlFilterValid(e,n.getFilterScraper())}function d(n){w=n.videos||[],C=n.inArticle||[],P=e.debugParams[b.ACTIVE_ALL]||e.debugParams[b.MINUTE_UI_TEST],t.log("VideoManager total original video count: "+(w.length+C.length)),c(w,!0),c(C,!1),t.log("VideoManager total valid video count: "+V.length),f()}function p(e){if(!v()){var n=e.videos||[],i=e.inArticle||[];w=w.concat(n),C=C.concat(i),t.log("VideoManager append total original video count: "+(w.length+C.length)),c(n,!0),c(i,!1),t.log("VideoManager total valid video count: "+V.length),f(),_.dispatchEvent(S.Events.VIDEOS_UPDATE)}}function h(){return D!==I}function v(){return P}function f(){var e,t,i,r=0,o=0;for(t=0;t<V.length;t++)i=V[t],i.getRank()===L||i.isForcePlacement()||(r+=i.getRank(),o++);for(e=r/o*(n.getVideoNaRankPercent()/100),t=0;t<V.length;t++)i=V[t],i.getRank()!==L||i.isForcePlacement()||i.setRank(e)}function g(){return V.length}function m(e){return V[e]}function y(e){if(e){if(!O[e]&&v()){var n=T.test(e),i=r.createMock(n?e:null,n?null:e);l(i)}var o=O[e];return o||(e=t.urls.removeOrigin(t.urls.getStructuredByUrl(e)),o=O[e]),o&&1===o.length?o[0]:void 0}}function E(e,n){var i=a(e,n);!O[i]&&v()&&l(r.createMock(n,e));var o=O[i];return o&&0!==o.length?(o.length>1&&t.logError("Not suppose to get multiple publisher video id in the same Article Url."),o[0]):null}function A(e){return r.create({id:0,videoId:e},!0)}var P,I=-2,T=/^(\/|https?:\/\/)/i,L=-999,w=[],C=[],D=I,V=[],O={},R=o(Y.getLocationUrl);return{init:d,isDebug:h,appendVideos:p,isActiveAll:v,getVideosCount:g,getByIndex:m,getVideoDataByKey:y,generateVideoData:A,getVideoDataByVideoIdAndUrl:E}},G=function(e,t){function n(n,i,r){function o(){var e={};return e.styleOverrides={},e}function l(){for(var e=0;e<te.length;e++){var t=te[e];Q.styleOverrides[t]=Q.styleOverrides[t]||{active:{}}}}function c(){for(var e=0;e<te.length;e++){var t=te[e];if(!Q.styleOverrides[t].active){Q.styleOverrides[t].active=a.cloneObject(Q.styleOverrides[t]);var n=Object.keys(Q.styleOverrides[t].active);n.forEach(function(e){delete Q.styleOverrides[t][e]})}}}function u(){return Q.playMode==S.config.PlayModes.InArticle||ue.isMobile()?"SPAN":"SVG"}function d(){Q.styleOverrides=a.extentObject(Q.styleOverrides,a.cloneObject($.styleOverrides)),l(),c(),Q.lazyBackgroundSrc=Q.lazyBackgroundSrc||$.lazyBackgroundSrc,Q.containerIndexLocation=Q.containerIndexLocation||$.containerIndexLocation,Q.apvOrigin=Q.apvOrigin||$.apvOrigin||!1,Q.compatibility=Q.compatibility||$.compatibility,Q.playMode=s.getDefaultPlayMode(),Q.logoType=Q.logoType||u(),Q.safariWebkitFix=a.parseBool(Q.safariWebkitFix),
Q.noClone=Q.noClone||$.noClone||!1,Q.isForceFlush=Q.isForceFlush||$.isForceFlush||s.isForceFlushAnalytics(),Q.sizeObserveEcho=parseInt(Q.sizeObserveEcho||"0",10),Q.sizeObserveDelay=parseInt(Q.sizeObserveDelay||"500",10),Q.sizeObserveDelay=parseInt(Q.sizeObserveDelay||"500",10),Q.viewportPercentage=parseInt(Q.viewportPercentage||$.viewportPercentage||s.getViewportPercentage()||"1",10),Q.minimumWidth=parseInt(Q.minimumWidth||$.minimumWidth||s.getMinimumWidth(),10),"undefined"==typeof Q.enableMobileVideo?Q.enableMobileVideo=t.getIsEnableMobileVideo():Q.enableMobileVideo=e.parseBool(Q.enableMobileVideo),Q.selectors=Q.selectors||{},Q.selectors.scroll=Q.selectors&&Q.selectors.scroll?Q.selectors.scroll:"","undefined"==typeof $.containerFullSize?Q.containerFullSize=e.parseBool(Q.containerFullSize):"undefined"==typeof Q.containerFullSize?Q.containerFullSize=e.parseBool($.containerFullSize):Q.containerFullSize=e.parseBool(Q.containerFullSize)}function p(e,t){return v(e,t).styles}function h(e){var t=Q.styleOverrides[e];if(t){var n=Object.keys(t);if(n.length>1)return!0}return!1}function v(e,t){if(!e)return a.logWarning("No type was sent for style overrides"),{};var n,i=Q.styleOverrides[e];if(t&&i[t])n={styles:i[t]||{}};else{for(var r=S.DEFAULT_MEDIAQUERY,o=Object.keys(i),s=0;s<o.length;s++)if(o[s]!==S.DEFAULT_MEDIAQUERY){var l=parseInt(o[s]);l>window.innerWidth&&(r===S.DEFAULT_MEDIAQUERY||l<=parseInt(r))&&(r=o[s])}n={size:r,styles:i[r]||{}}}return n}function f(){return Q.id}function g(){return Q.selectors.preview}function m(){return Q.selectors.size||""}function y(){return Q.selectors.anchor}function E(){return Q.selectors.container}function _(){return Q.selectors.scroll}function A(){return Q.selectors.click}function P(){return Q.selectors.attr}function I(){return Q.selectors.viewportMask}function b(){return Q.selectors.viewportObserver}function T(){return ee}function L(){return Q.name}function w(e){return p(S.styleOverrides.CONTAINER,e)}function C(e){return p(S.styleOverrides.APV,e)}function D(e){return p(S.styleOverrides.CLONE,e)}function V(e){return p(S.styleOverrides.ELEMENT_TO_REPLACE,e)}function O(e){return p(S.styleOverrides.LOGO,e)}function R(){return Q.playMode}function u(){return Q.logoType}function N(){return Q.lazyBackgroundSrc}function k(){return Q.containerIndexLocation}function M(){return Q.apvOrigin}function U(){return Q.pollVisibility}function F(){return Q.compatibility}function B(){return Q.svgStyle}function W(){return Q.safariWebkitFix}function x(){return Q.additionalResizeEcho&&Q.additionalResizeEcho.echoTime||0}function G(){return Q.additionalResizeEcho&&Q.additionalResizeEcho.echoRepeat||0}function H(){return Q.isForceFlush}function Y(){return Q.noClone}function z(){return Q.sizeObserveEcho}function j(){return Q.sizeObserveDelay}function q(){return Q.viewportPercentage}function K(){return Q.enableMobileVideo}function J(){return Q.containerFullSize}function Z(){return!1}function X(){return Q.minimumWidth}var Q=n,$=i||o(),ee=r||0,te=["container","apv","clone","logo","elementToReplace","custom"];return d(),{getPlacementId:f,getPreviewSelector:g,getSizeSelector:m,getAnchorSelector:y,getContainerSelector:E,getContainerStyleOverride:w,getApvStyleOverride:C,getCloneStyleOverride:D,getElementToReplaceStyleOverride:V,getLogoStyleOverride:O,getPriority:T,getName:L,getPlayMode:R,getLogoType:u,getLazyBackgroundSrc:N,getContainerIndexLocation:k,getApvOrigin:M,getPollVisibility:U,getCompatibility:F,getActiveOverridesWithSize:v,getSvgStyle:B,getSafariWebkitFix:W,getAdditionalEchoTime:x,getAdditionalEchoRepeat:G,getIsForceFlush:H,getNoClone:Y,getSizeObserveEcho:z,getSizeObserveDelay:j,getViewportPercentage:q,getIsEnableMobileVideo:K,isContainerFullSize:J,hasMediaQueries:h,getAttrName:P,isInArticle:Z,getViewportMaskSelector:I,getViewportObserverSelector:b,getScrollSelector:_,getMinimumWidth:X,getRegularManualSelector:A}}function i(e){return e.styleOverrides={},e.selectors={},e}function r(e,t,i){return new n(e,t,i)}function o(){var e={id:321,name:"inArticle Placer",playMode:"in_article"};return new n(i(e))}var a=e,s=t;return{create:r,createInArticle:o}},H=function(e,t,n){function i(){for(var t=0;t<g.length;t++){var n=g[t];if(!n.selectors)return e.log("no selectors where set"),void(n.selectors={});n.selectors.preview=n.selectors.preview||"img",n.selectors.anchor=n.selectors.anchor||"a",n.selectors.click=n.selectors.click||"",n.selectors.preview.endsWith("img")||(n.minuteLocation=S.PlacementKeys.CHILD),n.selectors.attr||(n.selectors.attr="href")}}function r(){for(var e,t=0;t<f.length;t++)e=f[t],e.parentId?(e.parentId=parseInt(e.parentId),y.push(e)):(e.inheritId&&(e.inheritId=parseInt(e.inheritId)),g.push(e))}function o(e){var t=e[S.PlacementKeys.COMPATIBILITY];return!(t&&!v.checkPlacement(t))}function a(e){if(e.inheritId){for(var t=0;t<y.length;t++){var n=y[t];if(n.parentId===e.inheritId)return n}p.log("No parent with parentId "+e.inheritId+" was found to be inherit from placement: "+e.name)}}function s(e){for(var t=e.getRelativePlacements(),n=e.getRelativeMobilePlacements(),i=0;i<n.length;i++){for(var r=!1,o=0;o<t.length;o++)if(t[o].name==n[i].name){t[o]=n[i],r=!0;break}r||t.push(n[i])}return t}function l(e){var t,n;if(f=e.getRelativePlacements()||[],v.isMobile()&&(f=e.isOverrideAllPlacements()?e.getRelativeMobilePlacements()||f:s(e)),0===f.length&&p.log("Configuration has NO PLACEMENTS!"),f.length){r(),i();for(var l=0,c=0;c<g.length;c++)n=g[c],o(n)&&(t=a(n),n.id="p"+m.length,m.push(h.create(n,t,l)),l++)}}function c(){return m}function u(e){return m[e]}function d(){for(var e=[],t=0;t<m.length;t++){var n=m[t];e.push(n.getPlacementDataForPrint())}return e}var p=e,h=t,v=n,f=[],g=[],m=[],y=[];return{init:l,getAllPlacements:c,getAllPlacementsAsObject:d,getPlacementById:u}},Y=function(){function e(){r(),n()}function t(){return f}function n(){ae.isIframe()&&ve.addPostMessageListener(window,i.bind(this))}function i(e){g||(u.log("got window location message. href="+e.href),h=e.href,f=!0,_.dispatchEvent(S.Events.WINDOW_SERVICE_READY),g=!0)}function r(){ae.isIframe()||(v=o(S.config.WindowIntervals.URL)||v,v>0&&(h=window.location.href,setInterval(function(){h!==window.location.href&&(m=!0,h=window.location.href,a(S.Events.DomWindow.URL_CHANGE))},v)))}function o(e){var t=ge.getWindowIntervals()[e];return t?parseInt(t,10):null}function a(e,t){_.dispatchEvent(e,!!t)}function s(){return c.publisher.getCustomUrl?c.publisher.getCustomUrl():h?h:window.location.href}function l(){m=!1}function d(){return m}function p(){var e=document.createElement("A");return e.href=s(),e.hostname.replace("www.","")}var h,v=0,f=!1,g=!1,m=!1;return{init:e,isReady:t,getLocationUrl:s,getLocationDomain:p,urlHasChanged:d,touchUrlHasChanged:l}}(),z=function(){function t(){o(),a(),s(),l(),n(),i()}function n(){ge.getPollVisibility()&&ae.isIframe()===!1&&setInterval(function(){p(S.Events.DomWindow.CHECK_VISIBILITY),g===window.innerWidth&&m===window.innerHeight||(g=window.innerWidth,m=window.innerHeight,p(S.Events.DomWindow.RESIZE))},ge.getPollVisibility())}function i(){window.addEventListener("visibilitychange",function(){p(S.Events.DomWindow.VISIBILITY_CHANGE)})}function r(e,t){var n=new c.utils.Debounce(t,p,null,e);n.enableFilter(),d(S.config.WindowIntervals.ECHO_TIME)&&n.setEcho(d(S.config.WindowIntervals.ECHO_TIME),d(S.config.WindowIntervals.ECHO_REPEAT)),window.addEventListener(e,function(e){n.start()},!0)}function o(){var e=new c.utils.Debounce(f,p,null,S.Events.DomWindow.SCROLL);e.enableFilter(),window.addEventListener(S.Events.DomWindow.FOCUS,function(t){e.start()})}function a(){var e=function(){_.dispatchEvent(S.Events.DomWindow.BLUR)};window.addEventListener?window.addEventListener(S.Events.DomWindow.BLUR,e,!1):window.attachEvent&&window.attachEvent(S.Events.DomWindow.BLUR,e)}function s(){v=d(S.config.WindowIntervals.RESIZE)||v,r(S.Events.DomWindow.RESIZE,v)}function l(){h=d(S.config.WindowIntervals.SCROLL)||h,e.debugParams[b.DEBUG_VISIBILITY]&&u.log("DEBUG_VISIBILITY: scroll is calculated relative to window"),r(S.Events.DomWindow.SCROLL,h)}function d(e){var t=ge.getWindowIntervals()[e];return t?parseInt(t,10):null}function p(e,t){_.dispatchEvent(e,!!t)}var h=100,v=50,f=50,g=0,m=0;return{init:t}}(),j=function(e,t){function n(){if(o.get("minFromCamp"))return void(a=!0);var e=document.referrer;if(!e)return void(a=!1);for(var t=document.createElement("a"),n=0;n<r.getManiakRefs().length;n++){var i=r.getManiakRefs()[n];if(t.href=e,t.host&&t.host.indexOf(i)>-1){o.set("minFromCamp",!0),a=!0;break}}}function i(){return a}var r=e,o=t,a=!1;return{init:n,isReferrerManiak:i}},q=function(t){function n(e,t){t||(t={});var n=t.callbackName||"void",i=t.onSuccess||p,r=t.onTimeout||p,o=window.setTimeout(function(){window[n]=p,r()},d);window[n]=function(e){window.clearTimeout(o),i(e),window[n]=function(){}};var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=e,document.getElementsByTagName("head")[0].appendChild(a)}function i(t){t.onSuccess=t.onSuccess||p,t.onTimeout=t.onTimeout||p;var i="jsonCallback",r=e._publisherDebugUrl||S.Urls.Configuration+"api/v1/web/configuration/"+e._publisher+".json?callback="+i;n(r,{callbackName:i,onTimeout:t.onTimeout,onSuccess:t.onSuccess})}function r(e){return("jsc"+u.b64EncodeUnicode(e||"JsonMinuteReadyNoURL")).replace(/=/g,"")}function o(e){return encodeURIComponent(u.b64EncodeUnicode(e))}function a(e){e.onSuccess=e.onSuccess||p,e.onTimeout=e.onTimeout||p;var t=m,i=c.publisher&&c.publisher.getFirstArticleUrl&&c.publisher.getFirstArticleUrl()||"";i?i=u.urls.getStructuredByUrlWithoutOrigin(i,[S.UrlStructure.PathName]):(!g||g&&(u.OgType.isArticle()||u.OgType.isVideo()))&&(i=u.urls.getCurrentStructuredUrlWithoutOrigin([S.UrlStructure.PathName]));var a=r(i),s={config:!0};i||(s.fallback=!0),t=t.replace(h,o(i)||f),t=t.replace(v,o(JSON.stringify(s))),t+="callback="+a,y.indexOf(i)>-1||(y.push(i),n(t,{callbackName:a,onTimeout:e.onTimeout,onSuccess:e.onSuccess}))}function s(e){if(e.pageUrl){e.onSuccess=e.onSuccess||p,e.onTimeout=e.onTimeout||p;var t=m,i=u.urls.getStructuredByUrlWithoutOrigin(e.pageUrl,ge.getUrlStructure()),a=r(i),s={config:!1};t=t.replace(h,o(i)),t=t.replace(v,o(JSON.stringify(s))),t+="callback="+a,y.indexOf(i)>-1||(y.push(i),n(t,{callbackName:a,onTimeout:e.onTimeout,onSuccess:e.onSuccess}))}}function l(e){e.onSuccess=e.onSuccess||p,e.onTimeout=e.onTimeout||p;var t=m,i=r(),a={fallback:!0,config:!1};t=t.replace(h,f),t=t.replace(v,o(JSON.stringify(a))),t+="callback="+i,n(t,{callbackName:i,onTimeout:e.onTimeout,onSuccess:e.onSuccess})}var d=t.isMobile()?1e4:5e3,p=function(){},h="[article_url]",v="[params]",f="_",m=e._publisherDebugUrl||S.Urls.Configuration+"api/v2/web/configuration/"+e._publisher+"/"+h+"/"+v+".json?",y=[];return{loadAll:i,loadFirstArticle:a,loadNextArticle:s,loadVideosFallback:l}},K=function(){function e(e){var t={};for(var i in e){var r="undefined"!=typeof n[i];if(r){var o=n[i];t[o]=e[i]}else t[i]=e[i]}return t}function t(e){var t={};for(var n in e){var i="undefined"!=typeof r[n];if(i){var o=r[n];t[o]=e[n]}else t[n]=e[n]}return t}var n={id:"a",highlight_id:"b",comp:"c",publisher:"d",hadImpression:"e",hadImpressionSession:"f",url:"g",script_time:"h",config_time:"i",event_time_from_genesis:"j",event_time_from_minute_genesis:"k",test_mode:"l",playMode:"m",sub_test_group:"n",source:"o",type:"p",placementFunction:"q",uniq:"r",product:"s",placement:"t"},i=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t},r=i(n);return{compress:e,extract:t}},J=function(e,t,n,i,r,o){function a(){return Math.floor(100*Math.random()+1)<=b}function s(){if(100===b)return!0;var e=100*b/(100-b);return 100*Math.random()<=e}function l(){var t="undefined"!=typeof o;if(t){if("clear"!==o)return _="true"==o,n.set(m,!0),c(s,y),void e.log("Force test group: "+_);e.log("Force RESET test group"),n.reset()}else;_=c(a,m),A=c(s,y),P||(e.log("** Is Test Group: "+_),P=!0)}function c(e,t){var i=n.get(t);return void 0===i&&(i=e(),n.set(t,i)),i}function u(n,r){b=n,T=r,T?(I=E.PENDING,e.log("** Snippet in iFrame."),i.addPostMessageListener(t,d)):(I=E.READY,l())}function d(t){I!==E.READY&&(e.log("iFrame got message!"),_=Boolean(t.isTestGroup),A=Boolean(t.subTestGroup),I=E.READY,e.log("*** Is Test Group:"+_),r.dispatchEvent(S.Events.TEST_MODE_READY,{isTestGroup:_}))}function p(){return I===E.READY}function h(){return _}function v(){return A}function f(){return _===!0?"1":"0"}function g(){_=null,A=null,P=!1,I=E.NONE,b=null,T=null,n.reset()}var m="_minTestModeEnabled",y="_minSubTestMode",E={NONE:0,PENDING:1,READY:2},_=null,A=null,P=!1,I=E.NONE,b=null,T=null;return{init:u,isReady:p,isTestGroup:h,getSubTestGroup:v,getGroupCode:f,reset:g}},Z=function(e,t,n){function i(){return{time:e.getTimeNow(),list:[]}}function r(){p=i(),a()}function o(){var t;p.time=e.getTimeNow(),t=JSON.stringify(p),t=t.replace(/"/g,""),n.set(d,t)}function a(){var e=n.get(d);p=e&&u.test(e)?s(e):p||i()}function s(e){var t,n=e.replace("time:",'"time":').replace("list:",'"list":');return n.indexOf("[]")===-1&&(n=n.replace("[",'["').replace("]",'"]'),t=n.split("["),t[1]=t[1].replace(/,/g,'","'),n=t.join("[")),JSON.parse(n)}function l(t){function n(){return a(),p.list.indexOf(r)>-1}function i(){p.time=e.getTimeNow(),p.list.indexOf(r)>-1&&e.logError("Duplicated key in Usher! _key: "+r),p.list.push(r),o()}var r=t;return{isSent:n,setAnalyticState:i}}function c(e,t,n,i,r){var o=e.toString()+t+n+(i?"t":"f")+r;return new l(o)}var u=/{(time):\d+,(list):\[([\d\w,]*)+]}/,d="_minUsherData3",p={};return{get:c,init:r}},X=function(t,n,i,r,o,a){function s(){return h?S.Emitter.ANALYTICS_SOURCE_WEB_MOBILE:S.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP}function l(e){v=n.isTestGroup(),h=i.isMobile(),f=r.getIsAnalyticsEnabled(),g=e}function c(e,n){(f||n)&&(Re.send(S.Emitter.ANALYTICS_EVENT,e),Re.send(S.Emitter.VIEWPORT,t.cloneObject(e)))}function u(e,t,n){var i=a.get(e.getId(),t.placementFunction,S.Emitter.CLICK_TYPE_NONE,v,n);i.isSent()||(c(t),i.setAnalyticState())}function d(e){var i={test_mode:v,playMode:S.Analytics.PlayModes[r.getDefaultPlayMode()],sub_test_group:!n.isTestGroup()&&n.getSubTestGroup(),source:s()};return t.extendObject(i,e)}function p(n,r,o){var a=o&&o.getBelongToUrl()||t.urls.getStructuredByUrl(Y.getLocationUrl()),s={id:n.getId(),highlight_id:n.getHighlightId(),comp:i.isBrowserSupported()?1:0,publisher:e._publisher,hadImpression:g.hadImpression(n.getPublisherVideoId()),hadImpressionSession:g.hadImpressionSession(),url:a,script_time:I.getScriptTime(),config_time:I.getConfigTime(),event_time_from_genesis:I.getTimeFromGenesis(),event_time_from_minute_genesis:I.getTimeFromMinuteGenesis()};return t.extendObject(s,d(r))}var h,v=null,f=!1,g=null;return{init:l,pushAnalytics:c,sendSessionImpression:u,getAnalyticPayload:d,getAnalyticPayloadWithVideoData:p}},Q=function(){function e(e){var t=e.getVideoData();t&&(r(t.getId()),g(t,{type:S.Emitter.ANALYTICS_CLICK_EVENT,placementFunction:S.Placements.HOVER_IMPRESSION,uniq:!1,product:e.getProduct(),placement:e.getName()},!1,e))}function t(t,n){if(!(n.hasDisposed()||b.indexOf(t)>-1)){var i=new c.utils.MouseClickEventObserver(t,function(){e(n)});n.onDisposed().add(function(){setTimeout(i.dispose.bind(i),1e3)}),ue.isMobile()?o(n,t):a(n,t),b.push(t)}}function n(e){for(var n=u.cloneArray(e.getClickElements()),i=0;i<n.length;i++){var r=n[i];t(r,e)}}function i(e){t(e.apvData.getManualClick(),e.apvData)}function r(e){_>0&&(clearTimeout(_),_=0,Ae.removeLogDelayById(e))}function o(e,t){var n=function(){s(e)},i=function(){d(e)};t.addEventListener("touchstart",n),t.addEventListener("touchend",i),e.onDisposed().add(function(){t.removeEventListener("touchstart",n),t.removeEventListener("touchend",i)})}function a(e,t){var n=function(){h(e)};t.addEventListener?(t.addEventListener("contextmenu",n),e.onDisposed().add(function(){t.removeEventListener("contextmenu",n)})):(t.attachEvent("oncontextmenu",n),e.onDisposed().add(function(){t.detachEvent("oncontextmenu",n)}))}function s(e){A=setTimeout(function(){h(e)},y),I=setTimeout(function(){l(e)},E),P=u.getTimeNow()}function l(e){I=0,d(e)}function d(e){if(0!==I&&(clearTimeout(I),I=0),0!==A){clearTimeout(A),A=0;var t=u.getTimeNow()-P;t<y&&Ae.removeLogDelayById(e.getVideoData().getId())}}function p(e){r(e),_=setTimeout(function(){r(e)},m)}function h(e){var t=e.getVideoData();p(t.getId());var n=e.getProduct(),i=Ie.getAnalyticPayloadWithVideoData(t,{type:S.Emitter.CONTEXT_MENU_OPEN_EVENT,placementFunction:S.Placements.HOVER_IMPRESSION,uniq:!1,product:n},e);Ae.logDelay(i)}function v(t){t.hasDisposed()||t.getDomAdapter().addEventListener(S.Events.APV_LOGO_CLICK,function(n){e(t)})}function f(){var e=u.urls.getCurrentStructuredUrlWithoutOrigin(),t=Ee.getVideoDataByKey(e);t&&Ae.sendLogDelayById(t.getId())}function g(e,t,n,i){var r=t.product||0,o=r===S.Emitter.PRODUCT_IN_ARTICLE;if(i||(i=we.getApvDataByKeyProduct(e.getPublisherVideoId(),r)),i&&!i.getClickAlreadySent()&&i.getShouldSendClickEvent()){we.setClickAlreadySent(i);var a=Ie.getAnalyticPayloadWithVideoData(e,t,i);Ae.log(a),(o||n||ge.getCanReportImmediately())&&Ae.sendLogsDueToInArticleClick()}}var m=6e4,y=700,E=1500,_=0,A=0,P=0,I=0,b=[];return{addLinkSelector:n,addLogoClickListener:v,sendDelayedClicks:f,addManualAnchor:i,sendClick:g}}(),$=function(){function t(){return ue.isMobile()?S.Emitter.ANALYTICS_SOURCE_WEB_MOBILE:S.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP}function n(n){var i={id:e._publisher,user_agent:navigator.userAgent,uniq:n,test_mode:fe.isTestGroup(),sub_test_group:!fe.isTestGroup()&&fe.getSubTestGroup(),url:u.urls.getCurrentStructuredUrl(),referrer:u.urls.getReferrerUrlWithOrigin(),source:t(),comp:ue.isBrowserSupported(),stor:!!le.getLocalStorageInstance(),script_time:I.getScriptTime(),config_time:I.getConfigTime(),event_time_from_genesis:I.getTimeFromGenesis(),event_time_from_minute_genesis:I.getTimeFromMinuteGenesis()};Re.send(S.Emitter.URL_REPORT,u.cloneObject(i)),n&&(i.uniq=!1,Re.send(S.Emitter.URL_REPORT,i)),_.dispatchEvent(S.Events.CLIENT_INIT_ANALYTICS)}function i(){if(!ae.isIframe()||ge.isUserTrafficAnalyticsAllowed()){var e=!1;de.get(r)||(de.set(r,!0),e=!0),n(e)}}var r="minSessionAnalytics";return{sendUrlReport:i}}(),ee=function(t,n,i,r,o,a,s,l,c){function u(){var l={id:e._publisher,user_agent:navigator.userAgent,test_mode:n.isTestGroup(),sub_test_group:!n.isTestGroup()&&n.getSubTestGroup(),url:t.urls.getCurrentStructuredUrl(),referrer:t.urls.getReferrerUrlWithOrigin(),source:i.getMobileAnalyticsCode(),comp:i.isBrowserSupported(),stor:!!r.getLocalStorageInstance(),script_time:o.getScriptTime(),config_time:o.getConfigTime(),event_time_from_genesis:o.getTimeFromGenesis(),event_time_from_minute_genesis:o.getTimeFromMinuteGenesis(),daily_user:a.getUserId()};s.send(S.Emitter.DAILY_USER,l)}function d(){var e=A[f]||y.NOT_SENT,i=e,r=!1;switch(e){case y.SENT_BOTH:i=y.SENT_BOTH;break;case y.SENT_NON_TEST_MODE:n.isTestGroup()&&(i=y.SENT_BOTH,r=!0);break;case y.SENT_TEST_MODE:n.isTestGroup()||(i=y.SENT_BOTH,r=!0);break;case y.NOT_SENT:i=n.isTestGroup()?y.SENT_TEST_MODE:y.SENT_NON_TEST_MODE,r=!0}r&&(A[g]=t.getTimeNow(),A[m]=t.generateUID(),A[f]=i,u(),_.dispatchEvent(S.Events.DAILY_USER),E.setItem(v,JSON.stringify(A)))}function p(){if(!c.isIframe()||l.isUserTrafficAnalyticsAllowed()){A=h();var e=A[g];e&&t.isMidnightPassed(e)&&(A[f]=y.NOT_SENT),d()}}function h(){return JSON.parse(E.getItem(v)||"{}")}var v="__min_du",f="s",g="ts",m="i",y={NOT_SENT:0,SENT_NON_TEST_MODE:1,SENT_TEST_MODE:2,SENT_BOTH:3},E=r.getLocalStorageInstance(),A={};return{start:p}};!function(){function e(){this._observedElements=[],this._sentSubjects={},this._alreadyAttachedClicks={}}var t="hadImpression";c.analytics=c.analytics||{},c.analytics.BaseAnalyticsService=e,e.prototype.register=function(e){e.getDomAdapter().addEventListener(S.Events.Element.READY,this.addObservedElement,this)},e.prototype.unregister=function(e){e.getDomAdapter().removeEventListener(S.Events.Element.READY,this.addObservedElement,this)},e.prototype.addObservedElement=function(e){var t,n=e.data;t=n.elemToTraceVisibility?n.elemToTraceVisibility:fe.isTestGroup()?n.apvData.getElementToReplace():n.apvData.getApvPlayer().getApvElement();for(var i={id:n.apvData.getUniqId(),videoData:n.apvData.getVideoData(),elem:t,hadImpression:!1,product:n.apvData.getProduct(),apvData:n.apvData},r=!1,o=0;o<this._observedElements.length;o++)if(this._observedElements[o].id===n.apvData.getUniqId()){this._observedElements[o]=i,r=!0;break}return r||this._observedElements.push(i),i},e.prototype.sendImpression=function(e){if(e.apvData.getIgnoreViewportEvent())return void u.sendLoggerReport("Publisher: "+h+" ignore impression due to video play, id: "+e.apvData.getVideoData().getVideoDBId());e.hadImpression=!0,this.setHadImpressionSession();var t=Ie.getAnalyticPayloadWithVideoData(e.videoData,{type:S.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:S.Placements.VIEWPORT_IMPRESSION,uniq:!1,product:e.apvData.getProduct(),placement:e.apvData.getName(),script_time:I.getScriptTime(),config_time:I.getConfigTime()},e.apvData);this.attachClickListeners(e);var n=e.apvData.getKeyProduct();this._sentSubjects[n]!==!0&&(this._sentSubjects[n]=!0,e.apvData.getProduct()===S.Emitter.PRODUCT_IN_ARTICLE&&e.apvData.getManualClick()&&Q.addManualAnchor(e),Ne.sendImpression(t),Ie.pushAnalytics(t))},e.prototype.attachClickListeners=function(e){e.apvData.getProduct()!==S.Emitter.PRODUCT_APV||this._alreadyAttachedClicks[e.apvData.getUniqId()]||(Q.addLinkSelector(e.apvData),Q.addLogoClickListener(e.apvData),this._alreadyAttachedClicks[e.apvData.getUniqId()]=!0)},e.prototype.sendSessionImpression=function(e){if(e.apvData.getIgnoreViewportEvent())return void u.sendLoggerReport("Publisher: "+h+" ignore SESSION impression due to video play, id: "+e.apvData.getVideoData().getVideoDBId());var t=e.apvData.getProduct(),n=Ie.getAnalyticPayloadWithVideoData(e.videoData,{type:S.Emitter.ANALYTICS_IMPRESSION_EVENT,placementFunction:S.Placements.VIEWPORT_IMPRESSION,uniq:!0,product:t,placement:e.apvData.getName()},e.apvData);Ie.sendSessionImpression(e.videoData,n,t)},e.prototype.hadImpression=function(e){for(var t=0;t<this._observedElements.length;t++){var n=this._observedElements[t],i=n.videoData.getPublisherVideoId()===e;if(i&&n.hadImpression&&n.apvData.getProduct()===S.Emitter.PRODUCT_IN_ARTICLE)return!0}return!1},e.prototype.hadImpressionSession=function(){return u.parseBool(de.get(t))},e.prototype.setHadImpressionSession=function(){de.set(t,!0)}}(),function(){function e(){e.__superCtor__.call(this)}var t,n={INIT:0,IN_VIEWPORT:1,OUT_VIEWPORT:2,DONE:3};u["extends"](e,c.analytics.BaseAnalyticsService),c.analytics.ViewportAnalyticsService=e,e.prototype.init=function(){var e=this;t=ge.getViewportAnalyticsPercentage(),_.addEventListener(S.Events.DomWindow.RESIZE,function(){e._debounceStartAll()}),_.addEventListener(S.Events.DomWindow.SCROLL,function(){e._debounceStartAll()}),_.addEventListener(S.Events.DomWindow.URL_CHANGE,function(){e._debounceStartAll()}),ae.isIframe()||e._debounceStartAll()},e.prototype.register=function(t){e.__super__.register.call(this,t);var n=this;t.getDomAdapter().addEventListener(S.Events.Element.ANALYTICS_VISIBLE,this.notifyVisible,this),t.getDomAdapter().addEventListener(S.Events.Element.MUTANT,this.notifyVisibleTimeout,this),t.apvData.onDisposed().add(function(){n.unregister(t)})},e.prototype.unregister=function(t){e.__super__.unregister.call(this,t),t.getDomAdapter().removeEventListener(S.Events.Element.ANALYTICS_VISIBLE,this.notifyVisible,this),t.getDomAdapter().removeEventListener(S.Events.Element.MUTANT,this.notifyVisibleTimeout,this)},e.prototype.addObservedElement=function(t){var i=e.__super__.addObservedElement.call(this,t),r=t.data;return i.carouselElement=r.carouselElement,i.inViewport=u.getTimeNow(),i.state=n.INIT,i.debounce=new c.utils.Debounce(ge.getViewportAnalyticsTimeSpan(),this._handleObservedElementDebounce,this,i),i.debounce.enableFilter(),i},e.prototype._debounceStartAll=function(){for(var e=0;e<this._observedElements.length;e++){var t=this._observedElements[e];t.debounce.start()}},e.prototype.notifyVisible=function(e){for(var t=e.data.apvData,n=0;n<this._observedElements.length;n++){var i=this._observedElements[n];if(i.apvData.getKey()===t.getKey()&&i.apvData.getProduct()===t.getProduct())return i.isVisible=e.data.isVisible,void i.debounce.start()}},e.prototype.notifyVisibleTimeout=function(e){var t=this;setTimeout(function(){t.notifyVisible(e)},e.data.timeout)},e.prototype._handleObservedElementDebounce=function(e){this.doUpdate(e),ge.getViewportAnalyticsTimeSpan()>=0&&setTimeout(this.doUpdate.bind(this,e,!0),ge.getViewportAnalyticsTimeSpan())},e.prototype.doUpdate=function(e,i){var r;if(ae.isIframe()||document.hasFocus())if(e.isVisible)r=e.isVisible;else{var o=void 0;if(e.product===S.Emitter.PRODUCT_IN_ARTICLE){var a=ge.getInArticleViewportMask();a!==window&&(o=a)}else o=e.carouselElement;var s=V.getViewportState(e.elem,o);r=s.percentage>=t}else r=!1;e.apvData&&e.apvData.hasDisposed()||(r?this._handleVisible(e,!!i):e.state=n.OUT_VIEWPORT)},e.prototype._handleVisible=function(e,t){switch(e.state){case n.IN_VIEWPORT:t&&(this._inViewport(e),e.state=n.DONE);break;case n.INIT:case n.OUT_VIEWPORT:e.state=n.IN_VIEWPORT,e.inViewport=u.getTimeNow()}},e.prototype._inViewport=function(e){e.product===S.Emitter.PRODUCT_IN_ARTICLE?(c.analytics.delayImpression(e,this.sendImpression.bind(this)),c.analytics.delayImpression(e,this.sendSessionImpression.bind(this))):(this.sendImpression(e),this.sendSessionImpression(e)),_.dispatchEvent(S.Events.IMPRESSION)}}(),function(){function e(){function e(e){for(var n in e)i[n]||(i[n]=e[n]);t()}function t(){var e={},t=!1;for(var o in i)r[o]||(e[o]=i[o],t=!0);t&&n(e)}function n(e){var t,n;for(var i in e)e[i]&&(t=e[i],n=Ie.getAnalyticPayloadWithVideoData(t.getVideoData(),{type:S.Emitter.ANALYTICS_BLOCKING_DISTANCE_POTENTIAL},t),Re.send(S.Emitter.ANALYTICS_EVENT,n),r[i]=t)}var i={},r={};return{addPotentialAPVs:e}}c.analytics=c.analytics||{},c.analytics.BlockingDistanceAnalytics=e}();var te=function(t,n,i,r,o,a,s){function l(n){var a;if(1===arguments.length?a=n:2===arguments.length&&(a={url:arguments[0],videoId:arguments[1],counter:u,hadImpression:!1}),a&&a.videoId&&a.url&&"number"==typeof a.counter){var s={url:a.url,vid:a.videoId,test_mode:i.getGroupCode(),group:r.get(S.GROUP_42),comp:o.isBrowserSupported()?1:0,sub_test_group:!i.isTestGroup()&&i.getSubTestGroup(),source:o.isMobile()?S.Emitter.ANALYTICS_SOURCE_WEB_MOBILE:S.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP,publisher:e._publisher,hadImpression:a.hadImpression,hadImpressionSession:d.hadImpressionSession(),counter:a.counter,script_time:I.getScriptTime(),config_time:I.getConfigTime()};u+=1,Re.send(S.Emitter.VIDEO_VIEWS,s),t.log("--SEND VIDEO VIEW ANALYTICS--")}}function c(e){d=e}var u=0,d=null;return{sendVideoView:l,init:c}},ne=function(){function e(){return JSON.parse(r.getItem(s)||"{}")}function t(e,t){p[e]=t;var n=JSON.stringify(p);r.setItem(s,n)}function n(e,t,n,i){var r=t.exec(e);if(a.isArray(r)){var o=r[1],s=r[2];if(o.indexOf(n)>-1){var l=o.substring(n.length);i(l,s||void 0)}}}function i(e,t,n){return new h(e,t,n)}var r=null,o=null,a=null,s="__mff__",l="+mff",c="-mff",u=/[^#]*#(\+\w+)=(.*)/g,d=/[^#]*#(-\w+)/g,p={},h=function(i,s,h){r=s.getLocalStorageInstance(),a=i,r&&h&&(o="string"==typeof h?h:a.appendDebugMffHashData(h.href),p=e(),n(o,u,l,function(e,n){t(e,n)}),n(o,d,c,function(e){t(e,void 0)}))};return h.prototype.get=function(e){return p[e]},h.prototype.CONSTS={DISABLE_VERSION:"disableVersion",FORCE_ENABLE:"forceEnable"},{create:i}}();!function(){function e(){function e(e){var t=e.getSubType?e.getSubType():c.scrap.player.SubTypes.DEFAULT;n[e.getType()]=n[e.getType()]||{},n[e.getType()][t]=e}function t(e,t){return n[e]&&n[e][t||c.scrap.player.SubTypes.DEFAULT]}var n={};return{addItem:e,getItem:t}}c.scrap=c.scrap||{},c.scrap.utils=c.scrap.utils||{},c.scrap.player=c.scrap.player||{},c.scrap.detector=c.scrap.detector||{},c.scrap.driver=c.scrap.driver||{},c.scrap.picker=c.scrap.picker||{},c.scrap.plugin=c.scrap.plugin||{},c.scrap.utils.defineError=function(e,t,n){throw n=n?" "+n:"",new Error("Scraper "+(e?"'"+e.getName()+"' ":"")+"'"+t+"' Not Defined."+n)},c.scrap.PlayersNameEnum={OOYALA:"Ooyala",VideoJS:"VideoJS",AmpAbc:"AmpAbc",SportingNews:"SportingNews",ThePlatformFoxSports:"ThePlatformFoxSports",ThePlatformCnbc:"ThePlatformCnbc",ThePlatformBravo:"ThePlatformBravo",JwPlayerWcvb:"JwPlayerWcvb",TheoPlayerCNN:"TheoPlayerCNN",Flowplayer:"Flowplayer",Jwplayer:"Jwplayer",Edge:"Edge",NFL:"NFL",CINCOPA:"Cincopa"};var t=c.scrap.PlayerEnum={DEBUG:Number.MAX_VALUE,Flowplayer:1,OOYALA:2,Jwplayer:8,VideoJS:13,TheoPlayerCNN:14,AMP_ABC:16,Edge:17,SportingNews:21,ThePlatform:26,ThePlatformBravo:29,JwPlayerWcvb:31,NFL:32,ThePlatformCnbc:33,CINCOPA:34};c.scrap.PlayerEnumAll=[t.DEBUG,t.OOYALA,t.VideoJS,t.AMP_ABC,t.SportingNews,t.ThePlatform,t.ThePlatformBravo,t.JwPlayerWcvb,t.TheoPlayerCNN,t.Jwplayer,t.Flowplayer,t.Edge,t.NFL,t.ThePlatformCnbc,t.CINCOPA];var n=c.scrap.ScrapPlugin={VIDEO_VIEW:1,PLAYER_COVERAGE:2,VISUAL_CLICKS:3,PLAYER_CONTENT_CHANGED:5,OPTIMIZELY:6,PLAYER_FOUND:7,PLACEHOLDER_FOUND:8,PLAYER_VIDEO_CHANGED:9};c.scrap.ScrapPluginAll=[n.PLAYER_CONTENT_CHANGED,n.VIDEO_VIEW,n.PLAYER_COVERAGE,n.VISUAL_CLICKS,n.OPTIMIZELY,n.PLAYER_FOUND,n.PLACEHOLDER_FOUND,n.PLAYER_VIDEO_CHANGED],c.scrap.player.SubTypes={DEFAULT:"default"},c.scrap.driver={},c.scrap.driver.PlayerAction={NONE:"none",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",ERROR:"error",ENDED:"ended",SEEK_START:"seekStart",SEEK_END:"seekEnd",VOLUME_CHANGE:"volume",MUTE_CHANGE:"mute",FULLSCREEN:"fullscreen",NEW_VIDEO:"newVideo",REPLAY:"replay",FOCUS:"focus"},c.scrap.utils={},c.scrap.utils.roundValue=function(e){return Math.round(1e3*e)/1e3},c.scrap.consts={VOLUME_EMPTY:-2,TIME_EMPTY:-1},c.scrap.factory=function(){var t=new e,n=new e,i=new e,r=new e;return{addPlugin:i.addItem,getPlugin:i.getItem,addDetector:t.addItem,getDetector:t.getItem,addDriver:n.addItem,getDriver:n.getItem,addPicker:r.addItem,getPicker:r.getItem}}()}(),function(){function e(){}var t=c.scrap.utils.defineError;e.shouldRun=function(){return!0},e.prototype.getType=function(){t(null,"getType")},e.prototype.setPlayerCollection=function(e){},e.prototype.addDriver=function(e){},c.scrap.plugin.Base=e}(),function(){function e(){e.__superCtor__.call(this),this._driverList=[],this._isEnabled=!0}u["extends"](e,c.scrap.plugin.Base),e.getType=function(){return c.scrap.ScrapPlugin.OPTIMIZELY},e.getName=function(){return"Optimizely"},e.prototype.getType=function(){return e.getType()},e.prototype.addDriver=function(e){this._isEnabled&&(this._driverList.push(e),e.onVideoView().add(this.handleVideoView,this))},e.prototype.handleVideoView=function(e){function t(){_.dispatchEvent(S.Events.FIRST_VIDEO_VIEW),n._isEnabled=!1,n._driverList.forEach(function(e){e.onVideoView().remove(n.handleVideoView,n)})}var n=this;ge.getOptimizely().vvFlag?t():e.hadImpression&&t()},c.scrap.plugin.Optimizely=e,c.scrap.factory.addPlugin(e)}(),function(){function e(){}u["extends"](e,c.scrap.plugin.Base),e.getType=function(){return c.scrap.ScrapPlugin.PLACEHOLDER_FOUND},e.getName=function(){return"PlaceholderFound"},e.prototype.getType=function(){return e.getType()},e.prototype.setPlayerCollection=function(e){e.onPlayerPlaceholderFound().add(this.handleDetector_PlayerPlaceholderFound,this)},e.prototype.handleDetector_PlayerPlaceholderFound=function(e){_.dispatchEvent(S.Events.PLAYER_PLACEHOLDER_FOUND,e)},c.scrap.plugin.PlayerFound=e,c.scrap.factory.addPlugin(e)}(),function(){function t(){this._searchPlayerDebounce=new c.utils.Debounce(n,this.handlePlayerDebounce,this),this._hasFoundVideoInList=!1,this._hasVideoChangedEventSent=!1}var n=3e4;u["extends"](t,c.scrap.plugin.Base),t.getType=function(){return c.scrap.ScrapPlugin.PLAYER_CONTENT_CHANGED},t.getName=function(){return"PlayerContentChanged"},t.shouldRun=function(){return ge.isScraperEnableContentChange()},t.prototype.getType=function(){return t.getType()},t.prototype.setPlayerCollection=function(e){
e.onPlayerFeaturedInstanceFound().add(this.handleDetector_PlayerFeaturedInstanceFound,this)},t.prototype.handleDetector_PlayerFeaturedInstanceFound=function(t){var n=Ee.getVideoDataByKey(t.url);if(n&&e.debugParams[b.FORCE_CONTENT_CHANGED])return void this.sendContentChanged(n.getId(),!0);if(n&&this._searchPlayerDebounce){if(!c.scrap.shouldPlayerContentChange(t))return void u.log("Player Content Changed blocked (Type 5 won't send).");this._hasFoundVideoInList=this._hasFoundVideoInList||n.getPublisherVideoId()===t.videoId,this._searchPlayerDebounce.start(n.getId())}},t.prototype.handlePlayerDebounce=function(e){this._searchPlayerDebounce.kill(),this._searchPlayerDebounce=null,this._hasFoundVideoInList||this.sendContentChanged(e,!1)},t.prototype.sendContentChanged=function(e,t){if(!this._hasVideoChangedEventSent&&(this._hasVideoChangedEventSent=!0,"complete"===document.readyState||t)){u.logWarning("Video content changed. will send event 5. Is forced: "+!!t);var n={id:e,timestamp:100*Math.floor(u.getTimeNow()/100)};t&&(n.force=!0),Re.send(S.Emitter.PLAYER_CONTENT_CHANGED_EVENT,n)}},c.scrap.plugin.PlayerContentChanged=t,c.scrap.factory.addPlugin(t)}(),function(){function t(){}u["extends"](t,c.scrap.plugin.Base),t.getType=function(){return c.scrap.ScrapPlugin.PLAYER_COVERAGE},t.getName=function(){return"PlayerCoverage"},t.prototype.getType=function(){return t.getType()},t.prototype.setPlayerCollection=function(e){e.onPlayerInstanceFound().addOnce(this.handleDetector_PlayerInstanceFound,this)},t.prototype.handleDetector_PlayerInstanceFound=function(t){if(!c.scrap.shouldSendPlayerCoverage(t))return void u.log("should not send player coverage because of publisher script");var n={id:e._publisher,url:t.url,exist:this.reportAsExist(t.url)};Re.send(S.Emitter.VIDEO_PRESENT,n)},t.prototype.reportAsExist=function(e){var t=u.urls.getStructuredByUrlWithoutOrigin(e),n=Ee.getVideoDataByKey(t);return!!n&&n.isApvEnabled()},c.scrap.plugin.PlayerCoverage=t,c.scrap.factory.addPlugin(t)}(),function(){function e(){this._playerOnHold={},_.addEventListener(S.Events.VIDEOS_UPDATE,this.handleVideosUpdate.bind(this))}u["extends"](e,c.scrap.plugin.Base),e.getType=function(){return c.scrap.ScrapPlugin.PLAYER_FOUND},e.getName=function(){return"PlayerFound"},e.prototype.getType=function(){return e.getType()},e.prototype.setPlayerCollection=function(e){e.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this)},e.prototype.handleVideosUpdate=function(){for(var e=Object.keys(this._playerOnHold),t=0;t<e.length;t++){var n=e[t],i=this._playerOnHold[n];i&&Ee.getVideoDataByKey(i.url)&&(this.sendEvent(i),this._playerOnHold[n]=null)}},e.prototype.handleDetector_PlayerInstanceFound=function(e){var t=Ee.getVideoDataByKey(e.url);t?this.sendEvent(e):(u.log("Player Found - WAITING for VideoData:"),u.logObject(e),this._playerOnHold[e.playerId]=e)},e.prototype.sendEvent=function(e){var t=Ee.getVideoDataByVideoIdAndUrl(e.videoId,e.url);return t?(u.log("Player Found - READY:"),u.logObject(e),void _.dispatchEvent(S.Events.PLAYER_FOUND,{container:e.playerPlaceholder,playerJS:e.playerJS,videoId:e.videoId,articleUrl:e.url,autoplay:e.isPlayerStarted,videoData:t})):(u.log("Player Found - does NOT have correct Video ID:"),void u.logObject(e))},c.scrap.plugin.PlayerFound=e,c.scrap.factory.addPlugin(e)}(),function(){function e(){}u["extends"](e,c.scrap.plugin.Base),e.getType=function(){return c.scrap.ScrapPlugin.PLAYER_VIDEO_CHANGED},e.getName=function(){return"PlayerVideoChanged"},e.prototype.getType=function(){return e.getType()},e.prototype.addDriver=function(e){e.onPlayerVideoChanged().add(this.handleDriver_PlayerVideoChanged,this)},e.prototype.handleDriver_PlayerVideoChanged=function(e){_.dispatchEvent(S.Events.PLAYER_VIDEO_CHANGED,{container:e.scrapData.playerPlaceholder,playerJS:e.scrapData.playerJS,articleUrl:e.scrapData.url,videoId:e.scrapData.videoId,newVideoId:e.videoId})},c.scrap.plugin.PlayerVideoChanged=e,c.scrap.factory.addPlugin(e)}(),function(){function t(){t.__superCtor__.call(this),this._driverList=[]}u["extends"](t,c.scrap.plugin.Base),t.getType=function(){return c.scrap.ScrapPlugin.VIDEO_VIEW},t.getName=function(){return"VideoViews"},t.prototype.getType=function(){return t.getType()},t.prototype.addDriver=function(e){this._driverList.push(e),e.onVideoView().add(this.handleVideoView,this)},t.prototype.handleVideoView=function(t){_.dispatchEvent(S.Events.PLAYER_PLAYING,{videoId:t.videoId,counter:t.counter});var n={url:t.url,vid:t.videoId,test_mode:fe.getGroupCode(),group:de.get(S.GROUP_42),comp:ue.isBrowserSupported()?1:0,sub_test_group:!fe.isTestGroup()&&fe.getSubTestGroup(),source:ue.isMobile()?S.Emitter.ANALYTICS_SOURCE_WEB_MOBILE:S.Emitter.ANALYTICS_SOURCE_WEB_DESKTOP,publisher:e._publisher,hadImpression:t.hadImpression,hadImpressionSession:Ce.hadImpressionSession(),counter:t.counter,script_time:I.getScriptTime(),config_time:I.getConfigTime()};Re.send(S.Emitter.VIDEO_VIEWS,n)},c.scrap.plugin.VideoViews=t,c.scrap.factory.addPlugin(t)}(),function(){function e(){e.__superCtor__.call(this),this._driverList=[],this._clicks={}}u["extends"](e,c.scrap.plugin.Base),e.getType=function(){return c.scrap.ScrapPlugin.VISUAL_CLICKS},e.getName=function(){return"VirtualClicks"},e.shouldRun=function(){return c.scrap.shouldActiveVirtualClick()},e.prototype.getType=function(){return e.getType()},e.prototype.addDriver=function(e){this._driverList.push(e),e.onVideoView().add(this.handleVideoView,this),e.onError().add(this.handleError,this)},e.prototype.handleVideoView=function(e){0===e.counter&&this.reportClick(e)},e.prototype.handleError=function(e){this.reportClick(e)},e.prototype.reportClick=function(e){var t=Ce.hadImpression(e.videoId);if(t){Ne.sendFirstVideoView(e.url);var n=Ee.getVideoDataByVideoIdAndUrl(e.videoId,e.url);n&&n.isApvEnabled()&&Q.sendClick(n,{type:S.Emitter.ANALYTICS_CLICK_EVENT,placementFunction:S.Placements.HOVER_IMPRESSION,uniq:!1,product:S.Emitter.PRODUCT_IN_ARTICLE,placement:"virtual click"},!0)}},c.scrap.plugin.VirtualClicks=e,c.scrap.factory.addPlugin(e)}(),function(){function e(e){return!0}function t(t){return e(t)}function n(e){return!0}function i(){return!0}function r(e){return!0}c.scrap.shouldScrapDetectorDefault=e,c.scrap.shouldScrapDetector=e,c.scrap.shouldScrapDriverDefault=t,c.scrap.shouldScrapDriver=t,c.scrap.shouldSendPlayerCoverage=r,c.scrap.shouldPlayerContentChange=n,c.scrap.shouldActiveVirtualClick=i}(),function(){function e(){this._onPlayerInstanceFound=new c.utils.Signal,this._onPlayerFeaturedInstanceFound=new c.utils.Signal,this._onPlayerPlaceholderFound=new c.utils.Signal,this._onPlayerTypePresent=new c.utils.Signal,this._detectorList=[],this._pickerList=[],this._counter=0,this._scraperTimer=null}c.scrap.DetectorsCollector=e,e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerFeaturedInstanceFound=function(){return this._onPlayerFeaturedInstanceFound},e.prototype.onPlayerPlaceholderFound=function(){return this._onPlayerPlaceholderFound},e.prototype.onPlayerTypePresent=function(){return this._onPlayerTypePresent},e.prototype.init=function(){this.initPlayers(),this.initPicker(),this.startTimer(),this.detectNewPlayers(),_.addEventListener(S.Events.DomWindow.URL_CHANGE,this.handleWindowEvent_UrlChange,this)},e.prototype.initPlayers=function(){for(var e,t,n=0;n<c.scrap.PlayerEnumAll.length;n++)e=c.scrap.factory.getDetector(c.scrap.PlayerEnumAll[n]),e&&(t=new e,t.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this),t.onPlayerPlaceholderFound().add(this.handleDetector_PlayerPlaceholderFound,this),t.onPlayerTypePresent().add(this.handlePlayer_PlayerTypePresent,this),this._detectorList.push(t));0===this._detectorList.length&&u.log("No scrapers found to initialize.")},e.prototype.initPicker=function(){for(var e,t=0;t<c.scrap.PlayerEnumAll.length;t++)e=c.scrap.factory.getPicker(c.scrap.PlayerEnumAll[t]),e&&this.createPicker(e);0===this._pickerList.length&&(this.createPicker(c.scrap.picker.Base),u.log("No picker found to initialize - using Base"))},e.prototype.addDriver=function(e){for(var t=0;t<this._pickerList.length;t++){var n=this._pickerList[t];n.addDriver(e)}e.onDisposed().addOnce(this.handleDriver_Disposed,this)},e.prototype.createPicker=function(e){var t=new e;t.setPlayerCollection(this),t.onPlayerFeaturedInstanceFound().add(this.handlePicker_PlayerFeaturedInstanceFound,this),this._pickerList.push(t)},e.prototype.handleDetector_PlayerInstanceFound=function(e){e.index=this._counter,this._onPlayerInstanceFound.dispatch(e),this._counter++},e.prototype.handleDetector_PlayerPlaceholderFound=function(e){this._onPlayerPlaceholderFound.dispatch(e)},e.prototype.handlePlayer_PlayerTypePresent=function(e){this._onPlayerTypePresent.dispatch(e)},e.prototype.handlePicker_PlayerFeaturedInstanceFound=function(e){this._onPlayerFeaturedInstanceFound.dispatch(e)},e.prototype.handleDriver_Disposed=function(e){for(var t=0;t<this._detectorList.length;t++){var n=this._detectorList[t];n.playerDisposed(e.getID())}},e.prototype.startTimer=function(){this._scraperTimer=new c.utils.Timer(ge.getScraperInternal(),this.detectNewPlayers,this),this._scraperTimer.setCounterLimit(ge.getScraperMaxCheckCount()),this._scraperTimer.start()},e.prototype.handleWindowEvent_UrlChange=function(){this._scraperTimer.reset(),this._scraperTimer.start(),this._counter=0,this.detectNewPlayers()},e.prototype.detectNewPlayers=function(){for(var e=0;e<this._detectorList.length;e++){var t=this._detectorList[e];t.detectNewPlayers()}}}(),function(){function e(e){this._detectorCollection=e,this._pluginHash=[],this._init()}c.scrap.PluginsCollector=e,e.prototype.addDriver=function(e){for(var t=0;t<this._pluginHash.length;t++){var n=this._pluginHash[t];n.addDriver(e)}},e.prototype._init=function(){for(var e=0;e<c.scrap.ScrapPluginAll.length;e++){var t=c.scrap.factory.getPlugin(c.scrap.ScrapPluginAll[e]);if(t)if(!t.shouldRun||t.shouldRun()){var n=new t;n.setPlayerCollection(this._detectorCollection),this._pluginHash.push(n)}else u.log("Plugin "+(t.getName()||t.getType())+" is not running.")}}}(),function(){function e(){e.__superCtor__.call(this),this._driverHash={},this._detectorCollection=new c.scrap.DetectorsCollector,this._detectorCollection.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this),this._detectorCollection.init(),this._pluginsCollection=new c.scrap.PluginsCollector(this._detectorCollection),c.scrap.startUrlTracker(this._detectorCollection)}u["extends"](e,l),e.prototype.handleDetector_PlayerInstanceFound=function(e){this._driverHash[e.playerId]||this.createScrapDriver(e)},e.prototype.handleDriver_Disposed=function(e){this._driverHash[e.getID()]=void 0},e.prototype.createScrapDriver=function(e){var t=c.scrap.factory.getDriver(e.driverType,e.driverSubType);if(!t)return void u.logWarning("No scraper driver exist for player Type: "+e.driverType+", SubType: "+(e.driverSubType||c.scrap.player.SubTypes.DEFAULT));var n=Ee.getVideoDataByVideoIdAndUrl(e.videoId,e.url),i=new t;i.setVideoData(n),i.setScrapData(e),this._pluginsCollection.addDriver(i),this._driverHash[e.playerId]=i,i.onDisposed().addOnce(this.handleDriver_Disposed,this),this._detectorCollection.addDriver(i),i.init()},c.scrap.ScraperService=e}(),function(){function e(e){this._sessionId=u.generateUID(),this._apvId=e.getId(),this._minVidId=e.getVideoDBId(),this._queue=[],this._interactionId=0,this._debounce=new c.utils.Debounce(t,this.sendInteraction,this)}var t=2e3;c.scrap.InteractionCollector=e,e.prototype.log=function(e){this._queue.push(e),this._debounce.start()},e.prototype.sendInteraction=function(){0!==this._queue.length&&(Re.send(S.Emitter.STATS_EVENT,{session_id:this._sessionId,interaction_id:this._interactionId,apv_id:this._apvId,min_vid_id:this._minVidId,events:this._queue}),u.log("*** Player Interaction: "+JSON.stringify(this._queue)),this._queue=[],this._interactionId++)}}(),function(){function e(e){this._collector=new c.scrap.InteractionCollector(e)}var t=c.scrap.utils.roundValue;c.scrap.EventsDataCollector=e,e.prototype.init=function(e,n,i,r){var o={};o.clientTimestamp=e,o.initVol=t(n),o.isMute=i?1:0,o.isAutoPlay=r?1:0,this._collector.log({init:o})},e.prototype.pause=function(e){var n={};n.second=t(e),this._collector.log({pause:n})},e.prototype.pauseDuration=function(e,n){var i={};i.second=t(e),i.duration=t(n),this._collector.log({pauseDuration:i})},e.prototype.play=function(e){var n={};n.second=t(e),this._collector.log({play:n})},e.prototype.watched=function(e,n){var i={};n>1&&(i.second=t(e),i.duration=t(n),this._collector.log({watched:i}))},e.prototype.startBuffering=function(e){var n={};n.second=t(e),this._collector.log({buffer:n})},e.prototype.bufferDuration=function(e,n){var i={};i.second=t(e),i.duration=t(n),this._collector.log({bufferDuration:i})},e.prototype.seek=function(e,n){var i={};i.from=t(e),i.to=t(n),this._collector.log({seek:i})},e.prototype.fullscreen=function(e,n){var i={};i.second=t(e),i.status=n?1:0,this._collector.log({fullscreen:i})},e.prototype.mute=function(e,n){var i={};i.second=t(e),i.status=n?1:0,this._collector.log({mute:i})},e.prototype.volume=function(e,n,i){var r={};r.second=t(e),r.from=t(n),r.delta=t(i),this._collector.log({vol:r})},e.prototype.focus=function(e,n,i){var r={};r.second=t(e),r.status=n?1:0,r.isPlay=i?1:0,this._collector.log({focus:r})},e.prototype.replay=function(){this._collector.log({replay:{}})},e.prototype.ended=function(){this._collector.log({ended:{}})}}(),function(){function e(){return{status:a.NONE,volume:-1,isMuted:!1,playheadTime:-1,isFullscreen:!1,isFocused:!0}}function t(e){this._driver=e,this._eventCollector=new c.scrap.EventsDataCollector(e.getVideoData()),this._onEnd=new c.utils.Signal,this._isLastPlayed=!1,this._seekStart=r,this._viewsCounter=0,this._initDriverData=null}c.scrap=c.scrap||{};var n=500,i=5,r=-1,o=2,a=c.scrap.driver.PlayerAction;c.scrap.EventsAnalyser=t,t.prototype.onEnd=function(){return this._onEnd},t.prototype.init=function(){return this._driver.getPlayerStatus()===a.ERROR?void this._onEnd.dispatch():(this._stateCurrent=e(),this._stateLast=e(),this._stateSent=e(),this._stateCurrent.status=this._driver.getPlayerStatus(),this._stateSent.status=this._stateLast.status=this._stateCurrent.status,this._stateCurrent.playheadTime=this._driver.getPlayheadTime(),this._stateLast.playheadTime=this._stateCurrent.playheadTime,this._stateSent.playheadTime=c.scrap.consts.TIME_EMPTY,this._stateCurrent.isMuted=this._driver.getIsMuted(),this._stateSent.isMuted=this._stateCurrent.isMuted,this._stateCurrent.volume=this._driver.getVolume(),this._stateSent.volume=this._stateCurrent.volume,this._stateCurrent.isFocused=this._driver.getIsFocused(),this._stateSent.isFocused=this._stateCurrent.isFocused,this._volumeDebounce=c.utils.Debounce(n,this.handleVolumeUpdate,this),this._volumeTimeChanged=0,this._lastWatchReportTime=0,this._pauseStartDateTime=0,this._pauseStartPlayheadTime=0,this._bufferingStartDateTime=0,this._bufferingStartPlayheadTime=0,this._initDriverData=[u.getTimeNow(),this._stateCurrent.volume,this._stateCurrent.isMuted,this._driver.getIsAutoStart()],this._driver.onPlayerAction().add(this.handlePlayerAction,this),void this._driver.onPlayerProgress().add(this.handlePlayerProgress,this))},t.prototype.dispose=function(){this._driver.onPlayerAction().remove(this.handlePlayerAction,this),this._driver.onPlayerProgress().remove(this.handlePlayerProgress,this),this._eventCollector=null,this._driver=null,this._onEnd.removeAll(),this._onEnd=null},t.prototype.handlePlayerAction=function(e,t){switch(e){case a.PLAYING:case a.BUFFERING:case a.PAUSED:case a.ENDED:this.sendEventCollectorInitData(),this._stateCurrent.status=e,this._process_Replay(),this._process_Watching(),this._process_Paused(),this._process_Buffer(),this._process_Ended(),this._process_LastPlayed(),this._stateLast.status!==this._stateCurrent.status&&(this._stateLast.status=this._stateCurrent.status);break;case a.ERROR:this._stateCurrent.status=a.ERROR,this._process_Error();break;case a.SEEK_START:this._process_SeekStart(t);break;case a.SEEK_END:this._process_SeekEnd(t),this._process_Buffer_Complete();break;case a.VOLUME_CHANGE:this.handlePlayerAction_VolumeChanged(t);break;case a.MUTE_CHANGE:this.handlePlayerAction_MuteChanged(t);break;case a.FULLSCREEN:this._process_FullScreen(t);break;case a.NEW_VIDEO:this._viewsCounter+=1;break;case a.FOCUS:this._process_Focus(t)}(e===a.ENDED||this._viewsCounter>1)&&this._onEnd.dispatch()},t.prototype.handlePlayerProgress=function(e){this._stateCurrent.playheadTime=e,this._process_Watching(),this.sendEventCollectorInitData()},t.prototype.handlePlayerAction_VolumeChanged=function(e){this._stateCurrent.volume=e,this._volumeTimeChanged=this._volumeTimeChanged||this._stateCurrent.playheadTime,this._volumeDebounce.start()},t.prototype.handlePlayerAction_MuteChanged=function(e){this._stateCurrent.isMuted=e,this._volumeTimeChanged=this._volumeTimeChanged||this._stateCurrent.playheadTime,this._volumeDebounce.start()},t.prototype.handleVolumeUpdate=function(){this._stateCurrent.volume!==this._stateSent.volume&&(this._eventCollector.volume(this._volumeTimeChanged,this._stateSent.volume,this._stateCurrent.volume-this._stateSent.volume),this._stateSent.volume=this._stateCurrent.volume),this._stateCurrent.isMuted!==this._stateSent.isMuted&&(this._eventCollector.mute(this._volumeTimeChanged,this._stateCurrent.isMuted),this._stateSent.isMuted=this._stateCurrent.isMuted),this._volumeTimeChanged=0},t.prototype._process_LastPlayed=function(){switch(this._stateCurrent.status){case a.PLAYING:this._isLastPlayed=!0;break;case a.ENDED:case a.PAUSED:this._isLastPlayed=!1}},t.prototype._process_Watching=function(){var e=Math.abs(this._stateCurrent.playheadTime-this._lastWatchReportTime);(e>i||this._stateCurrent.status===a.ENDED)&&this._sendWatchReport()},t.prototype._process_Paused=function(){if(this._isLastPlayed&&this._stateCurrent.status===a.PAUSED)return this._eventCollector.pause(this._stateCurrent.playheadTime),this._sendWatchReport(),this._stateLast.status=a.PAUSED,this._pauseStartDateTime=u.getTimeNow(),this._pauseStartPlayheadTime=this._stateCurrent.playheadTime,void(this._stateSent.status=this._stateLast.status=this._stateCurrent.status);if((this._stateCurrent.status===a.PLAYING||this._stateCurrent.status===a.ENDED)&&!this._isLastPlayed&&this._pauseStartDateTime>0){var e=u.timestampDiffInSec(u.getTimeNow(),this._pauseStartDateTime);this._pauseStartDateTime=0,e>0&&this._eventCollector.pauseDuration(this._pauseStartPlayheadTime,e)}},t.prototype._process_Buffer=function(){return this._stateLast.status!==a.BUFFERING&&this._stateCurrent.status===a.BUFFERING?(this._sendWatchReport(),this._stateSent.status=this._stateLast.status=this._stateCurrent.status,this._bufferingStartDateTime=u.getTimeNow(),void(this._bufferingStartPlayheadTime=this._stateCurrent.playheadTime)):void(this._stateCurrent.status!==a.BUFFERING&&this._process_Buffer_Complete())},t.prototype._process_Buffer_Complete=function(){if(!(this._bufferingStartDateTime<=0)){var e=u.timestampDiffInSec(u.getTimeNow(),this._bufferingStartDateTime);e>1&&(this._eventCollector.startBuffering(this._bufferingStartPlayheadTime),this._eventCollector.bufferDuration(this._bufferingStartPlayheadTime,e)),this._stateSent.status=this._stateLast.status=this._stateCurrent.status,this._bufferingStartDateTime=0}},t.prototype._process_Ended=function(){this._stateCurrent.status===a.ENDED&&(this._sendWatchReport(),this._eventCollector.ended(),this._stateSent.status=this._stateLast.status=this._stateCurrent.status)},t.prototype._process_Replay=function(){this._stateLast.status===a.ENDED&&this._stateCurrent.status!==a.ENDED&&(this._eventCollector.replay(),this._stateSent.status=this._stateLast.status=this._stateCurrent.status,this._lastWatchReportTime=0,this._stateCurrent.playheadTime=0)},t.prototype._process_Error=function(){this._onEnd.dispatch()},t.prototype._process_SeekStart=function(e){this._seekStart=e},t.prototype._process_SeekEnd=function(e){if(this._seekStart!==r){var t=Math.abs(e-this._seekStart);if(t<o)return void(this._seekStart=r);this._eventCollector.seek(this._seekStart,e),this._eventCollector.watched(this._lastWatchReportTime,Math.abs(this._seekStart-this._lastWatchReportTime)),this._stateLast.playheadTime=this._stateCurrent.playheadTime=this._lastWatchReportTime=e,this._seekStart=r}},t.prototype._process_FullScreen=function(e){this._stateCurrent.isFullscreen=e,this._stateSent.isFullscreen!==e&&(this._eventCollector.fullscreen(this._stateCurrent.playheadTime,e),this._stateSent.isFullscreen=e)},t.prototype._process_Focus=function(e){if(this._stateCurrent.isFocused=e,this._stateCurrent.status!==a.NONE&&this._stateLast.isFocused!==e){var t=this._stateCurrent.status!==a.ENDED;t&&!this._stateLast.isFullscreen&&this._eventCollector.focus(this._stateCurrent.playheadTime,e,this._stateCurrent.status===a.PLAYING),this._stateLast.isFocused=e}},t.prototype.sendEventCollectorInitData=function(){this._initDriverData&&(this._eventCollector.init.apply(this._eventCollector,this._initDriverData),this._initDriverData=null)},t.prototype._sendWatchReport=function(){this._eventCollector.watched(this._lastWatchReportTime,Math.abs(this._stateCurrent.playheadTime-this._lastWatchReportTime)),this._stateLast.playheadTime=this._lastWatchReportTime=this._stateCurrent.playheadTime}}(),function(){function e(e,t){throw new Error("Scraper Player "+(e?"'"+e.getName()+"' ":"")+"'"+t+"' Not Defined.")}function t(){this._state=0,this._onPlayerInstanceFound=new c.utils.Signal,this._onPlayerPlaceholderFound=new c.utils.Signal,this._onPlayerTypePresent=new c.utils.Signal,this._configPlayer=ge.getScraperPlayerById(this.getType()),this._foundList={},this._isPlayerFoundSent=!1,this._validateImplementation(),this._validatePlayerConfig(),this._setStateIdle()}var n=/[^\d\w\s\-?!\u0590-\u05fe\.,]/g,i=c.scrap.player.EState={IDLE:1,SEARCHING:2,FOUND:3};t.prototype.getType=function(){e(null,"getType")},t.prototype.getName=function(){e(null,"getName")},t.prototype._validateImplementation=function(){this.getType(),this.getName()},t.prototype._validatePlayerConfig=function(){},t.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},t.prototype.onPlayerPlaceholderFound=function(){return this._onPlayerPlaceholderFound},t.prototype.onPlayerTypePresent=function(){return this._onPlayerTypePresent},t.prototype.detectNewPlayers=function(e){this.isIdle()&&(this._state=i.SEARCHING,setTimeout(this._detectNewPlayers.bind(this),e?e:0))},t.prototype.playerDisposed=function(e){this._hasPlayerInstanceFound(e)&&(this._foundList[e]=!1)},t.prototype._detectNewPlayers=function(){},t.prototype._sendPlayerTypePresent=function(e,t){this._isPlayerFoundSent||(this._isPlayerFoundSent=!0,this._onPlayerTypePresent.dispatch(this._collectPlayerTypePresentData(e,t)))},t.prototype._collectVideoData=function(e,t){var i={},r={};return i.data=r,r.duration=0,r.version=this.getName(),r.video_id=this._getVideoId(e,t),r.stream=this._getVideoStream(e,t),r.url=this._getPlayerUrl(e,t),r.raw_url=this._getPlayerUrlRaw(e,t),r.title=(this._getVideoTitle(e,t)||"").replace(n,""),r.raw_title=u.b64EncodeUnicode(this._getVideoTitle(e,t)||""),r.publisher=ge.getPublisherId(),r.player_id=this.getType(),i.index=-1,i.driverType=this.getType(),i.driverSubType=this._getPlayerSubType(e,t),i.videoId=r.video_id,i.playerId=this._getPlayerId(e,t)||i.videoId,i.url=r.url,i.playerJS=e,i.playerHtmlElement=t,i.playerConfig=this._configPlayer,i.isLive=this._getIsLive(e,t),i.isAutoPlay=this._getIsAutoPlay(e,t),i.isPlayerStarted=i.isAutoPlay||this._getIsPlayerStarted(e,t),i.playerPlaceholder=this._getPlayerPlaceholder(e,t),i.isFeatured=this._getIsFeatured(e,t),i.clone=this.cloneScrapData,i},t.prototype.cloneScrapData=function(e){var t={};return t.data=u.cloneObject(e.data),t.index=e.index,t.driverType=e.driverType,t.driverSubType=e.driverSubType,t.videoId=e.videoId,t.playerId=e.playerId,t.url=e.url,t.playerJS=e.playerJS,t.playerHtmlElement=e.playerHtmlElement,t.playerConfig=e.playerConfig,t.isLive=e.isLive,t.isAutoPlay=e.isAutoPlay,t.isPlayerStarted=e.isPlayerStarted,t.playerPlaceholder=e.playerPlaceholder,t.isFeatured=e.isFeatured,t.clone=this.cloneScrapData,t},t.prototype._collectPlaceholderPlayerData=function(e){var t={};return t.playerType=this.getType(),t.id=u.generateUID(),t.url="",t.videoId="",t},t.prototype._collectPlayerTypePresentData=function(e,t){var n={url:this._getPlayerUrl(e,t)};return n},t.prototype._setStateIdle=function(){this._state=i.IDLE},t.prototype._setStateFound=function(){this._state=i.FOUND},t.prototype.isIdle=function(){return this._state===i.IDLE},t.prototype._sendPlayerInstanceFound=function(e){this._onPlayerInstanceFound.dispatch(e)},t.prototype._sendPlayerPlaceholderFound=function(e){this._onPlayerPlaceholderFound.dispatch(e)},t.prototype._addPlayerInstanceFound=function(e){return this._foundList[e]=!0},t.prototype._hasPlayerInstanceFound=function(e){return this._foundList.hasOwnProperty(e)},t.prototype._getVideoId=function(t,n){e(this,"_getVideoId")},t.prototype._getVideoStream=function(t,n){e(this,"_getVideoStream")},t.prototype._getVideoTitle=function(e,t){return document.title},t.prototype._getIsLive=function(e,t){return!1},t.prototype._getIsAutoPlay=function(e,t){return null},t.prototype._getIsFeatured=function(e,t){},t.prototype._getIsPlayerStarted=function(e,t){return!1},t.prototype._getPlayerId=function(e,t){return""},t.prototype._getPlayerSubType=function(e,t){return this._configPlayer.subType&&c.scrap.player.SubTypes[this._configPlayer.subType]||""},t.prototype._getPlayerUrl=function(e,t){return u.urls.getCurrentStructuredUrl()},t.prototype._getPlayerUrlRaw=function(e,t){return Y.getLocationUrl()},t.prototype._getPlayerPlaceholder=function(e,t){return null},c.scrap.detector.Base=t}(),function(){function e(){this._videoData=null,this._scrapData=null,this._onDisposed=new c.utils.Signal,this._onPlayerAction=new c.utils.Signal,this._onPlayerProgress=new c.utils.Signal,this._onVideoView=new c.utils.Signal,this._onError=new c.utils.Signal,this._onPlayerInstanceFound=new c.utils.Signal,this._onPlayerVideoChanged=new c.utils.Signal,this._analyser=null,this._progressTimer=null,this._viewsCounter=0,this._hadImpression=!1,this._handleFocusInEvent=null,this._handleFocusOutEvent=null,this._doesCollect=null}var t=c.scrap.utils.defineError,n=c.scrap.driver.PlayerAction,i=!1;e.prototype.getID=function(){return this._scrapData.playerId},e.prototype.getType=function(){t(null,"getType")},e.prototype.getSubType=function(){return c.scrap.player.SubTypes.DEFAULT},e.prototype.getName=function(){t(null,"getName")},e.prototype.setVideoData=function(e){this._videoData=e},e.prototype.getVideoData=function(){return this._videoData},e.prototype.setScrapData=function(e){this._scrapData=e},e.prototype.onPlayerAction=function(){return this._onPlayerAction},e.prototype.onDisposed=function(){return this._onDisposed},e.prototype.onPlayerProgress=function(){return this._onPlayerProgress},e.prototype.onVideoView=function(){return this._onVideoView},e.prototype.onError=function(){return this._onError},e.prototype.onPlayerInstanceFound=function(){return this._onPlayerInstanceFound},e.prototype.onPlayerVideoChanged=function(){return this._onPlayerVideoChanged},e.prototype.resetViewsCounter=function(){this._viewsCounter=0},e.prototype.sendPlayerActionEvent=function(e,t){this._onPlayerAction.dispatch(e,t)},e.prototype.sendPlayerProgressEvent=function(e){this._onPlayerProgress.dispatch(e)},e.prototype.reportVideoView=function(){this.sendPlayerActionEvent(n.NEW_VIDEO);var e=this.getCurrentVideoId(),t=Ce.hadImpression(e);this._hadImpression=this._hadImpression||t;var i={driverType:this.getType(),counter:this._viewsCounter,url:this.getCurrentUrl(),videoId:e,hadImpression:t,playerId:this._scrapData.playerId};this._viewsCounter+=1,this._onVideoView.dispatch(i)},e.prototype.reportError=function(){this.sendPlayerActionEvent(n.ERROR);var e={driverType:this.getType(),url:this.getCurrentUrl(),videoId:this.getCurrentVideoId(),playerId:this._scrapData.playerId};this._onError.dispatch(e)},e.prototype.sendPlayerInstanceFound=function(e){this._onPlayerInstanceFound.dispatch(e||this._scrapData)},e.prototype.reportPlayerVideoChanged=function(e){this._onPlayerVideoChanged.dispatch({scrapData:this._scrapData,videoId:e})},e.prototype.init=function(){this._videoData=this._videoData||Ee.generateVideoData(this._scrapData.id),this._canCollectEvents()?(this._analyser=new c.scrap.EventsAnalyser(this),this._analyser.onEnd().add(this.handleAnalyserEnded,this),this._analyser.init(),this.startListenWindowFocusEvent(),this.sendCurrentFocusState(),i=!0):u.log("Will not collect video events: "+this._videoData.getId())},e.prototype._canCollectEvents=function(){return null!==this._doesCollect?this._doesCollect:(this._doesCollect=!i&&ge.isScraperEnableEventCollection()&&u.parseBool(this._scrapData.playerConfig.enableEventCollection,!0)&&this._videoData.getDoesCollect()&&!ue.isIE()&&!ue.isEdge()&&!ue.isMobile(),this._doesCollect)},e.prototype.dispose=function(){this._onDisposed.dispatch(this),this._videoData=null,this._scrapData=null,this._onPlayerAction.removeAll(),this._onPlayerAction=null,this._onPlayerProgress.removeAll(),this._onPlayerProgress=null,this._onVideoView.removeAll(),this._onVideoView=null,this._onDisposed.removeAll(),this._onDisposed=null,this.stopProgressTimer(),this._progressTimer=null,this.stopListenWindowFocusEvent(),this._analyser&&(this._analyser.dispose(),this._analyser=null)},e.prototype.getPlayerStatus=function(){t(this,"getPlayerStatus")},e.prototype.getPlayheadTime=function(){t(this,"getPlayheadTime")},e.prototype.getIsMuted=function(){t(this,"getIsMuted")},e.prototype.getVolume=function(){t(this,"getVolume")},e.prototype.getIsFullscreen=function(){t(this,"getIsFullscreen")},e.prototype.getIsFocused=function(){return document.hasFocus()},e.prototype.getIsAutoStart=function(){return!ue.isMobile()},e.prototype.getCurrentVideoId=function(){t(this,"getCurrentVideoId")},e.prototype.getCurrentUrl=function(){return this._scrapData.data.url},e.prototype.startProgressTimer=function(){this._progressTimer||(this._progressTimer=new c.utils.Timer(ge.getScraperEventsInternal(),this.handleProgressTimerEvent,this)),this._progressTimer.start(),this.handleProgressTimerEvent()},e.prototype.stopProgressTimer=function(){this._progressTimer&&this._progressTimer.stop()},e.prototype.handleProgressTimerEvent=function(){t(this,"handleProgressTimerEvent","You use progress timer without override this function.")},e.prototype.startListenWindowFocusEvent=function(){this._handleFocusInEvent||(this._handleFocusInEvent=this.handleFocusInEvent.bind(this),this._handleFocusOutEvent=this.handleFocusOutEvent.bind(this),window.addEventListener?(window.addEventListener("focus",this._handleFocusInEvent,!1),window.addEventListener("blur",this._handleFocusOutEvent,!1)):window.attachEvent&&(window.attachEvent("focus",this._handleFocusInEvent),window.attachEvent("blur",this._handleFocusOutEvent)))},e.prototype.stopListenWindowFocusEvent=function(){this._handleFocusInEvent&&(window.removeEventListener?(window.removeEventListener("focus",this._handleFocusInEvent,!1),window.removeEventListener("blur",this._handleFocusOutEvent,!1)):window.detachEvent&&(window.detachEvent("focus",this._handleFocusInEvent),window.detachEvent("blur",this._handleFocusOutEvent)),this._handleFocusInEvent=null,this._handleFocusOutEvent=null)},e.prototype.handleFocusInEvent=function(e){this.sendPlayerActionEvent(n.FOCUS,!0)},e.prototype.handleFocusOutEvent=function(e){this.sendPlayerActionEvent(n.FOCUS,!1)},e.prototype.sendCurrentFocusState=function(){this.sendPlayerActionEvent(n.FOCUS,document.hasFocus())},e.prototype.handleAnalyserEnded=function(){this._analyser.dispose(),this._analyser=null},c.scrap.driver.Base=e}(),function(){function e(){this._onPlayerFeaturedInstanceFound=new c.utils.Signal,this._featuredScraperData=null,this._placeholderFoundList=[],this._scrapSentCounter=0;
}e.prototype.setPlayerCollection=function(e){ge.isScraperEnable()&&(e.onPlayerInstanceFound().add(this.handleDetector_PlayerInstanceFound,this),e.onPlayerPlaceholderFound().add(this.handleDetector_PlayerPlaceholderFound,this))},e.prototype.addDriver=function(e){ge.isScraperEnable()&&e.onPlayerInstanceFound().add(this.handleDriver_PlayerInstanceFound,this)},e.prototype.onPlayerFeaturedInstanceFound=function(){return this._onPlayerFeaturedInstanceFound},e.prototype.isScrapDataValid=function(e){if(!e)return!1;if(e.isLive)return u.log("Scrap cancel: Live player instance."),!1;if(!e.data.video_id||!e.data.stream)return u.log("Scrap cancel: Missing data. video_id: '"+e.data.video_id+"', stream: '"+e.data.stream+"'"),!1;if(!u.isPageAllowedByMeta())return u.log("Scrap cancel: Meta tags or publisher scrap check"),!1;if(this.shouldScrap(e))return u.parseBool(e.isFeatured,!0)},e.prototype.shouldScrap=function(e){return c.scrap.shouldScrapDetector(e)},e.prototype.handleDetector_PlayerInstanceFound=function(e){this.isScrapDataValid(e)&&(this._featuredScraperData=e,this.sendPlayerFeaturedInstanceFound())},e.prototype.handleDriver_PlayerInstanceFound=function(e){this.handleDetector_PlayerInstanceFound(e)},e.prototype.handleDetector_PlayerPlaceholderFound=function(e){this._placeholderFoundList=this._placeholderFoundList.concat(e)},e.prototype.sendPlayerFeaturedInstanceFound=function(){return this.isScrapDataValid(this._featuredScraperData)?(ge.getScraperMaxFoundReport()>this._scrapSentCounter&&!Ee.getVideoDataByKey(this._featuredScraperData.url)&&(this._scrapSentCounter++,this.sendScrapEvent()),this._onPlayerFeaturedInstanceFound.dispatch(this._featuredScraperData),void(this._featuredScraperData=null)):void(this._featuredScraperData=null)},e.prototype.sendScrapEvent=function(){var e=this._featuredScraperData.data,t=ge.getScraperDebug().immediateScraper;!t&&u.scraperWouldHaveBeenBlocked()?Re.send(S.Emitter.NEW_SCRAPE_EVENT,e):(e.cb=t?u.getTimeNow().toString():void 0,Re.send(S.Emitter.NEW_VIDEO_EVENT,e))},c.scrap.picker.Base=e}(),function(){c.scrap.startUrlTracker=function(e){}}(),function(){function e(){e.__superCtor__.call(this),this._watchPlayerList={}}u["extends"](e,c.scrap.detector.Base);c.scrap.utils[c.scrap.PlayersNameEnum.Edge];e.getType=function(){return c.scrap.PlayerEnum.Edge},e.prototype.getType=function(){return e.getType()},e.prototype.getName=function(){return c.scrap.PlayersNameEnum.Edge},e.prototype._detectNewPlayers=function(){var e=this._getPlayers();return e.hasFound?(this._collectVideoDataList(e.players),void this._setStateIdle()):void this._setStateIdle()},e.prototype._getPlayers=function(){var e={players:{},hasFound:!1};if("undefined"==typeof EdgePlayer)return e;var t=EdgePlayer.getPlayers(),n=Object.keys(t||{});EdgePlayer.getPlayers().length>0&&EdgePlayer.getPlayers()[0].ready&&EdgePlayer.getPlayers()[0].currentMetadata&&EdgePlayer.getPlayers()[0].currentMetadata.mediaGen&&(e.hasFound=!0);for(var i=0;i<n.length;i++){var r=n[i],o=t[r];o.ready&&(this._hasPlayerInstanceFound(r)||(e.players[r]=o,e.hasFound=!0))}return e},e.prototype._collectVideoDataList=function(e){for(var t,n,i=Object.keys(e),r=0;r<i.length;r++)n=i[r],t=e[n],t&&(this._addPlayerInstanceFound(n),this._sendPlayerTypePresent(t,t.contentElement),this._sendPlayerInstanceFound(this._collectVideoData(t,t.contentElement)))},e.prototype._getVideoId=function(e,t){return e.playlistModel&&e.playlistModel.currentItem.rss.guid},e.prototype._getVideoStream=function(e,t){return e.currentMetadata.src},e.prototype._getIsLive=function(e){return e.currentMetadata&&e.currentMetadata.mediaGen&&e.currentMetadata.mediaGen.isLive||!1},e.prototype._getIsAutoPlay=function(e,t){return!ue.isMobile()&&e.config.autoPlay},e.prototype._getIsPlayerStarted=function(e){return null!==e.state||e.playhead>0},c.scrap.detector.Jwplayer=e,c.scrap.factory.addDetector(e)}(),function(){function e(){e.__superCtor__.call(this),this.player=null,this.isSent=!1,this.url=Y.getLocationUrl()}var t=(c.scrap.driver.PlayerAction,{PLAYER_READY:"ready",PLAY_HEAD_CHANGED:"playheadUpdate",METADATA_CHANGE:"metadata"});u["extends"](e,c.scrap.driver.Base),e.getType=function(){return c.scrap.PlayerEnum.Edge},e.prototype.getType=function(){return e.getType()},e.prototype.getName=function(){return c.scrap.PlayersNameEnum.Edge},e.prototype.init=function(){e.__super__.init.call(this),this.player=this._scrapData.playerJS;this.isDispalyingAd()?this.sendEmitter():(this._waitForVideoStart(),this._waitMetaDataChangeHandler=this._waitMetaDataChange.bind(this),this.player._addListeners(t.METADATA_CHANGE,this._waitMetaDataChangeHandler),this._waitMediaEndHandler=this._waitMediaEnd.bind(this),this.player._addListeners("mediaEnd",this._waitMediaEndHandler),this._waitForVideoStartHandler=this._waitForVideoStart.bind(this),this.player._addListeners(t.PLAY_HEAD_CHANGED,this._waitForVideoStartHandler))},e.prototype._waitMetaDataChange=function(){this.isDispalyingAd()&&this.sendEmitter()},e.prototype._waitMediaEnd=function(){this.isSent=!1},e.prototype.onMetaDataChange=function(e){this.isDispalyingAd()&&this.sendEmitter()},e.prototype.isDispalyingAd=function(){var e=this.player.currentMetadata.isAd;return"undefined"!=typeof e&&e},e.prototype.isVideoStarted=function(){return this.player.absolutePlayhead>0},e.prototype._waitForVideoStart=function(){this.isVideoStarted()&&this.sendEmitter()},e.prototype.sendEmitter=function(){this.isSent||(this.isSent=!0,this.reportVideoView())},e.prototype.getCurrentVideoId=function(){return this.player.playlistModel.currentItem.rss.guid},e.prototype.getPlayerStatus=function(){},c.scrap.driver.Edge=e,c.scrap.factory.addDriver(e)}(),function(){c.analytics=c.analytics||{},c.analytics.delayImpression=function(e,t){t(e)}}(),function(){function e(){e.__superCtor__.call(this),this.ATTR_MEDIA_SIZE="data-media_file_size",this.mediaHeightIndex="",this._apvElement=null,this._hasPlayerAssetLoaded=!1}c.apv=c.apv||{},c.apv.players=c.apv.players||{},u["extends"](e,l),c.apv.players.ApvPlayerBase=e,e.prototype.init=function(e){this.elementToReplace=e.getElementToReplace(),this._videoData=e.getVideoData(),this._apvData=e,fe.isTestGroup()||_.addEventListener(S.Events.DomWindow.RESIZE,this.handleResizeEvent,this),this.mediaHeightIndex=this.getNearestSize(this.elementToReplace)},e.prototype.handleResizeEvent=function(){this._apvData&&u.ElementObjectFit.set({mediaElement:this.getApvElement(),originalElement:this.elementToReplace,isFullSize:this._apvData.getProduct()===S.Emitter.PRODUCT_IN_ARTICLE})},e.prototype.setOriginalImage=function(e){},e.prototype.play=function(){},e.prototype.setAutoplay=function(){},e.prototype.pause=function(){},e.prototype.forcePlay=function(){},e.prototype.isPaused=function(){},e.prototype.sendEventPlaying=function(){u.log("APV Playing: "+this._videoData.getId()),this.dispatchEvent(S.Events.Players.PLAYING),_.dispatchEvent(S.Events.Players.PLAYING)},e.prototype.sendEventPaused=function(){u.log("APV Paused: "+this._videoData.getId()),this.dispatchEvent(S.Events.Players.PAUSED)},e.prototype.getApvElement=function(){return this._apvElement},e.prototype.getSizeData=function(){return{}},e.prototype.getStyle=function(e){return this._apvElement?this._apvElement.style[e]:null},e.prototype.setStyles=function(e){if(this._apvElement)for(var t in e)this._apvElement.style[t]=e[t]},e.prototype.setElementAttribute=function(e,t){this._apvElement&&this._apvElement.setAttribute(e,t)},e.prototype.getNearestSize=function(e){var t,n,i,r="m",o=u.extractElementSize(e),a=this.getSizeData();if(!o.width||!o.height)return a[r]?r:Object.keys(a)[0];if(n=Math.ceil(o.width/o.height*100)/100,t=this._videoData.getVideoRatio(),o.width*=.9,o.height*=.9,!t||t>n){for(i in a)if(a.hasOwnProperty(i)&&a[i]>=o.height)return i}else{var s;for(i in a)if(a.hasOwnProperty(i)&&(s=a[i]*t,s>=o.width))return i}return i||"R"},e.prototype.getFullVideoUrl=function(e,t){var n=this._videoData.getAPVUrl()+this.mediaHeightIndex+(t||"")+"."+e;for(var i in S.APV)n=n.replace(S.APV[i].source,S.APV[i].target);return u.setUrlProtocol(n)},e.prototype.isShow=function(){return!0},e.prototype.show=function(){},e.prototype.hide=function(){},e.prototype.handleMediaMetadataLoaded=function(){u.setMediaElementSize(this.getApvElement()),u.ElementObjectFit.set({mediaElement:this.getApvElement(),originalElement:this.elementToReplace,isFullSize:this._apvData.getProduct()===S.Emitter.PRODUCT_IN_ARTICLE})},e.prototype.dispose=function(){_.removeEventListener(S.Events.DomWindow.RESIZE,this.handleResizeEvent,this),this.removeAllEventListener(),this.elementToReplace=null,this._videoData=null,this._apvData=null,this._apvElement&&this._apvElement.parentElement&&this._apvElement.parentElement.removeChild(this._apvElement),this._apvElement=null},e.prototype.hasPlayerAssetLoaded=function(){return this._hasPlayerAssetLoaded}}(),function(){function e(e){return e.stopImmediatePropagation(),!1}function t(){t.__superCtor__.call(this),this._rezVideo=null,this.alreadyPlayed=!1}c.apv=c.apv||{},c.apv.players=c.apv.players||{};var n=["mp4"];u["extends"](t,c.apv.players.ApvPlayerBase),c.apv.players.ApvVideoPlayer=t,t.States={STATE_HAVE_NOTHING:0,STATE_HAVE_METADATA:1,STATE_HAVE_CURRENT_DATA:2,STATE_HAVE_FUTURE_DATA:3,STATE_HAVE_ENOUGH_DATA:4},t.prototype.init=function(e,n,i){t.__super__.init.call(this,e,n,i),this._apvElement=document.createElement("video"),this._apvElement.className="minute_apv",this._apvElement.setAttribute("minVideoID",this._videoData.getId()),ue.isMobile()&&(this._apvElement.setAttribute("muted",""),this._apvElement.muted=!0,this._apvElement.volume=0),ue.isFF()&&(this._apvElement.volume=0),this._apvElement.setAttribute("playsinline",""),this._apvElement.setAttribute("webkit-playsinline",""),this.setLoopPlay(),this._apvElement.style.transition=ge.getEffectApvTransitionVideo(),this._apvElement.style.opacity=0,this.attachVideoEvents(),this.buildVideoSources(),Te.start(this._apvElement)},t.prototype.setLoopPlay=function(){try{this._apvElement.setAttribute("loop","")}catch(e){}},t.prototype.setAutoplay=function(){try{this._apvElement.setAttribute("preload","auto"),this._apvElement.setAttribute("autoplay","")}catch(e){}},t.prototype.buildVideoSources=function(){for(var e=0;e<n.length;e++){var t=document.createElement("source");t.src=this.getFullVideoUrl(n[e]),this._apvElement.appendChild(t)}this._apvElement.setAttribute(this.ATTR_MEDIA_SIZE,ge.getRezVideo()[this.mediaHeightIndex])},t.prototype.attachVideoEvents=function(){function t(){o>0&&(clearTimeout(o),o=0)}function n(){i.hasStartPlaying()?u.getRequestAnimationFrame(n):(i._hasPlayerAssetLoaded=!0,i.dispatchEvent(S.Events.Players.LOADED))}var i=this,r=!1,o=0;this._handleVideoEvent_LoadedMetadata=function(e){r=!0,t(),i.dispatchEvent("loadedmetadata"),i.handleMediaMetadataLoaded()},this._handleVideoEvent_Play=function(t){return i.handleVideoEvent_Play(),e(t)},this._handleVideoEvent_Pause=function(t){return i.handleVideoEvent_Pause(),e(t)},this._handleVideoEvent_Error=function(t){return i.handleVideoEvent_Error(t),e(t)},this._handleVideoEvent_Ended=function(t){return i.handleVideoEvent_Ended(),e(t)},this._handleCanPlayThrough=function(){i._apvElement&&i._apvElement.removeEventListener("canplaythrough",i._handleCanPlayThrough),i._handleCanPlayThrough=null,n()},this._apvElement.addEventListener("loadedmetadata",this._handleVideoEvent_LoadedMetadata),this._apvElement.addEventListener("play",this._handleVideoEvent_Play),this._apvElement.addEventListener("pause",this._handleVideoEvent_Pause),this._apvElement.addEventListener("error",this._handleVideoEvent_Error),this._apvElement.addEventListener("ended",this._handleVideoEvent_Ended),this._apvElement.addEventListener("canplaythrough",this._handleCanPlayThrough),this._apvElement.addEventListener("timeupdate",e),this._apvElement.addEventListener("playing",e),this._apvElement.addEventListener("waiting",e),this._apvElement.addEventListener("load",e),this._apvElement.addEventListener("progress",e),this._apvElement.addEventListener("durationchange",e)},t.prototype.handleVideoEvent_Play=function(){this.dispatchEvent(S.Events.Players.PLAYING),u.log("playing video for article "+this._videoData.getArticleUrl())},t.prototype.handleVideoEvent_Pause=function(){this.shouldPlay===!0?this.playElement():this.sendEventPaused()},t.prototype.handleVideoEvent_Ended=function(){this.dispatchEvent("ended"),u.log("video ended for article "+this._videoData.getArticleUrl())},t.prototype.handleVideoEvent_Error=function(e){u.log(e),this.dispatchEvent("error"),u.log("Browser cannot play video!")},t.prototype.setOriginalImage=function(e){this._apvElement&&e&&u.urls.isImageUrl(e)&&this._apvElement.setAttribute("poster",e)},t.prototype.play=function(){this.shouldPlay=!0,(this._apvElement.readyState===t.States.STATE_HAVE_ENOUGH_DATA||this.alreadyPlayed)&&(this.playElement(),this.sendEventPlaying())},t.prototype.playElement=function(){this.alreadyPlayed=!0;var e=this._apvElement.play();u.isPromise(e)&&e["catch"](function(){})},t.prototype.forcePlay=function(){this.playElement()},t.prototype.pause=function(){this.shouldPlay=!1,this._apvElement.pause()},t.prototype.isShow=function(){return this._apvElement.style.opacity>0},t.prototype.show=function(){this._apvElement&&(this._apvElement.style.opacity=1)},t.prototype.hide=function(){this._apvElement&&(this._apvElement.style.opacity=0)},t.prototype.getSizeData=function(){return this._rezVideo?this._rezVideo:(this._rezVideo=u.cloneObject(ge.getRezVideo()),this._rezVideo)},t.prototype.hasStartPlaying=function(){return!!this._apvElement&&!this._apvElement.paused&&0!==this._apvElement.currentTime},t.prototype.isPaused=function(){return this._apvElement.paused},t.prototype.setShouldPlay=function(e){this.shouldPlay=e},t.prototype.dispose=function(){this._rezVideo=null,this._apvElement.removeEventListener("loadedmetadata",this._handleVideoEvent_LoadedMetadata),this._apvElement.removeEventListener("play",this._handleVideoEvent_Play),this._apvElement.removeEventListener("pause",this._handleVideoEvent_Pause),this._apvElement.removeEventListener("error",this._handleVideoEvent_Error),this._apvElement.removeEventListener("ended",this._handleVideoEvent_Ended),this._apvElement.removeEventListener("canplaythrough",this._handleCanPlayThrough),this._apvElement.removeEventListener("timeupdate",e),this._apvElement.removeEventListener("playing",e),this._apvElement.removeEventListener("waiting",e),this._apvElement.removeEventListener("load",e),this._apvElement.removeEventListener("progress",e),this._apvElement.removeEventListener("durationchange",e),this._handleVideoEvent_Play=null,this._handleVideoEvent_Pause=null,this._handleVideoEvent_Error=null,this._handleVideoEvent_Ended=null,this._handleCanPlayThrough=null,this._handleVideoEvent_LoadedMetadata=null,t.__super__.dispose.call(this)}}(),function(){function e(){e.__superCtor__.call(this)}c.apv=c.apv||{},c.apv.players=c.apv.players||{},u["extends"](e,c.apv.players.ApvPlayerBase),c.apv.players.ApvGifPlayer=e,e.prototype.init=function(t,n,i){e.__super__.init.call(this,t,n,i),u.log("Mobile detected. Loading GIFs.");var r=document.createElement("img");this._apvElement=r,c.utils.ApvElementUtils.setElementAsReplaced(r),r.setAttribute("minVideoID",this._videoData.getId()),r.setAttribute("src",u.setUrlProtocol(this._videoData.getAPVUrl()+this.mediaHeightIndex+".gif")),r.style.margin=0,this.addGifEvents(r),fe.isTestGroup()&&(this._apvElement.style.visibility="hidden")},e.prototype.addGifEvents=function(){var e=this;this._apvElement.addEventListener("load",function(t){e._hasPlayerAssetLoaded=!0,e.dispatchEvent(S.Events.Players.LOADED),e.handleMediaMetadataLoaded(),e.dispatchEvent(S.Events.Players.PLAYING)})},e.prototype.getSizeData=function(){return ge.getRezGif()},e.prototype.hide=function(){this._apvElement.style.opacity=0},e.prototype.setShouldPlay=function(){}}(),function(){c.placements=c.placements||{},c.placements.getContainerOverlay=function(){return u.logWarning("config set with container overlay but no file was gulped"),document.createElement("img")}}(),function(){c.apv=c.apv||{},c.apv.logos=c.apv.logos||{};var e=c.apv.logos;e.LogoElmBase=function(){e.LogoElmBase.__superCtor__.call(this)},u["extends"](e.LogoElmBase,l),e.LogoElmBase.prototype.init=function(e){this.isMobile=ue.isMobile(),this.trans="0 , 0",this.buildLogoLinkElement(e),this.hide()},e.LogoElmBase.prototype.buildLogoLinkElement=function(e){var t=this.createElement();t.className="minute_logo",t.title=t.alt=ge.getTooltip(),t.style.cursor="pointer",t.style.width="4%",t.style.paddingTop="4%",ue.isMobile()&&(t.style.minWidth="12px"),t.style.minWidth="16px",t.style.outline="none",t.style.transition="opacity 0.5s ease-out",t.style.transform="translateZ(1px)",t.style.position="absolute",t.style.pointerEvents="auto",t.style.backgroundColor="transparent",t.style["z-index"]=1;for(var n=0==e?ge.getLogoPosition():ge.getInArticleLogoPosition(),i=S.logoPositions[n||"bottom-left"],r=Object.keys(i),o=0;o<r.length;o++){var a=r[o];t.style[a]=i[a]}t.innerHTML=this.getLogoInnerHtml(),this.minuteLinkElm=t},e.LogoElmBase.prototype.createElement=function(){return document.createElement("span")},e.LogoElmBase.prototype.getLogoElement=function(){return this.minuteLinkElm},e.LogoElmBase.prototype.show=function(){fe.isTestGroup()?(this.getLogoElement().style.opacity=0,this.getLogoElement().style.visibility="hidden"):.6!==this.getLogoElement().style.opacity&&(this.getLogoElement().style.opacity=.6)},e.LogoElmBase.prototype.hide=function(){0!==this.getLogoElement().style.opacity&&(this.getLogoElement().style.opacity=0)},e.LogoElmBase.prototype.getLogoInnerHtml=function(){return'<svg version="1.1" id="MinuteLogo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 46 46" style="position: absolute; left: 0; top: 0; transform: translate('+this.trans+');" xml:space="preserve"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:#FFFFFF;" d="M42.7,13.4L42.7,13.4l-6.8,3.3c1,2,1.5,4.2,1.5,6.5c0,8-6.5,14.4-14.4,14.4c-8,0-14.4-6.5-14.4-14.4 S15.1,8.8,23.1,8.8c1.3,0,2.5,0.2,3.6,0.5l2-7.4c-2-0.5-3.6-0.7-5.7-0.7h0h0c-3.4,0-6.5,0.7-9.6,2.2C2.5,8.6-2,21.7,3.3,32.6 C8.6,43.5,21.7,48,32.6,42.7C43.5,37.4,48,24.3,42.7,13.4"/><circle style="fill:#2ABFD5;" cx="23" cy="23" r="9"/> </svg>'}}(function(){function t(){t.__superCtor__.call(this),this.minContainer=null,this.blockingState=S.APVStates.Active,this._isLastVisibleAnalytics=!1,this._isVisible=!1,this._containerOL=null,this._observerAttrChange=[],this.isIE=ue.isIE()}c.apv=c.apv||{},c.apv.domAdapter=c.apv.domAdapter||{};var n=c.apv.domAdapter,i={"box-shadow":"none",border:0,padding:"(0,0,0,0)",paddingLeft:"0px",paddingRight:"0px",paddinTop:"0px",paddingBottom:"0px","box-sizing":"border-box;","float":"none",borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomLeftRadius:0,borderBottomRightRadius:0},r={"border-radius":0};n.Base=t,u["extends"](t,l),t.getTypeName=function(){return"Base"},t.prototype.getState=function(){return this.state},t.prototype.init=function(e){this.apvData=e,this.elementToReplace=this.apvData.getElementToReplace(),this.elementSize=this.apvData.getElementSize(),this.apvPlayer=this.apvData.getApvPlayer(),this.minuteLink=this.apvData.getMinuteLogo(),this.videoData=this.apvData.getVideoData(),u.log("initializing DOM adapter. videoData.getId(): "+this.videoData.getId()),this._init(),this.attachWindowEvents(),this.eventsRegister(),this.dispatchReadyEvent()},t.prototype.blurHandle=function(){this._isVisible=!1},t.prototype.eventsRegister=function(){this.apvPlayer.addEventListenerOnce(S.Events.Players.PLAYING,this.handlePlayerEvent_Playing,this),_.addEventListener(S.Events.DomWindow.CHECK_VISIBILITY,this.handleWindowEvent_CheckVisibility,this),_.addEventListener(S.Events.UI_FLOW_CHANGED,this.handleGlobalUiFlowChange,this),_.addEventListener(S.Events.DomWindow.BLUR,this.blurHandle,this),this.setElementToObserve()},t.prototype._init=function(){this.createMinContainer(),this.createVideoElement(),this.createLogoElement(),this.createVideoWrapper(),this.applyZIndexForAbsoluteElements(),this._videoWrapper.appendChild(this.apvPlayer.getApvElement()),this._videoWrapper.appendChild(this.minuteLinkElm),this.minContainer.appendChild(this._videoWrapper),this.insertContainerToDOM(this.elementToReplace.parentNode),this.render(this.getBorderFix()),this.startAnimationResize()},t.prototype.getBorderFix=function(){var e={left:0,top:0,right:0};if((ue.isFF()||ue.isSafari())&&this.elementSize!==this.elementToReplace&&null!==this.elementToReplace.offsetParent){var t=window.getComputedStyle(this.elementToReplace.offsetParent);e.left=parseFloat(t.borderLeftWidth),e.right=parseFloat(t.borderRightWidth),e.top=parseFloat(t.borderTopWidth)}return e},t.prototype.render=function(e){var t=this.elementToReplace.offsetParent,n=getComputedStyle(this.elementSize),i=this.elementSize.getBoundingClientRect(),r=t.getBoundingClientRect();switch(n.transform.split("(")[0]){case"none":break;case"matrix3d":var o=n.transform.split("(")[1].split(")")[0].split(",").map(parseFloat);this.minContainer.style.transform="scale3d("+o[0]+","+o[5]+","+o[10]+")"}this.minContainer.style.width=n.width,this.minContainer.style.height=n.height,this.isIE&&(this.minContainer.style.height=""+(parseInt(n.height)+parseInt(n.paddingTop)+parseInt(n.paddingBottom))+"px"),this.minContainer.style.top=i.top-r.top-parseFloat(e.top)+"px","rtl"==n.direction?this.minContainer.style.right=r.right-i.right+e.right+"px":this.minContainer.style.left=i.left-r.left-parseFloat(e.left)+"px",this.minuteLinkElm&&(this.minuteLinkElm.style.paddingTop=this.minuteLinkElm.offsetWidth+"px")},t.prototype.startAnimationResize=function(){var e=this,t=this.getBorderFix(),n=-1,i=function(){return n+=1,e.minContainer&&n%6===0?e.isElementToReplaceVisibleValid()?(e.minContainer.style.display="flex",e.render(t),void u.getRequestAnimationFrame(i)):(e.minContainer.style.display="none",void u.getRequestAnimationFrame(i)):void u.getRequestAnimationFrame(i)};i()},t.prototype._copyStylesFromElement=function(e,t,n){var i=u.getComputedStyle(e);for(var r in n)t.style[r]=i[r]},t.prototype.createMinContainer=function(){this.minContainer=document.createElement("div"),this.minContainer.classList.add("minute-container"),this.minContainer.setAttribute("placement",this.apvData.getName()),this.minContainer.setAttribute("container_minvideoid",this.videoData.getId()),this.minContainer.setAttribute("id",this.apvData.getContainerUnique()),e.debug===!0&&(this.minContainer.apvData=this.apvData),this.minContainer.style.position="absolute",this.minContainer.style.overflow="hidden",this.minContainer.style.display="flex",this._copyStylesFromElement(this.elementToReplace,this.minContainer,i)},t.prototype.createVideoElement=function(){this.apvPlayer.setOriginalImage(this.getOriginalUrl()[S.OriginalSrc.PATH]),this.apvPlayer.addEventListener(S.Events.Players.LOADED,this.handleApvPlayerLoadedEvent,this),this.apvPlayer.setOriginalImage(this.getOriginalUrl()[S.OriginalSrc.PATH]);var e=S.values.HUNDRED_PERCENT,t=S.values.HUNDRED_PERCENT;u.isInt(parseFloat(this.minContainer.style.width))||(e="calc("+S.values.HUNDRED_PERCENT+" + 1px)"),u.isInt(parseFloat(this.minContainer.style.height))||(t="calc("+S.values.HUNDRED_PERCENT+" + 1px)"),this.apvPlayer.setStyles({position:S.values.RELATIVE,display:S.values.BLOCK,width:e,height:t,objectFit:"cover"}),this._copyStylesFromElement(this.elementToReplace,this.apvPlayer._apvElement,r)},t.prototype.createVideoWrapper=function(){this._videoWrapper=document.createElement("div"),this._videoWrapper.style.width=S.values.HUNDRED_PERCENT,this._videoWrapper.style.height=S.values.HUNDRED_PERCENT,this._videoWrapper.style.position=S.values.RELATIVE,this._videoWrapper.style.overflow="hidden",this._videoWrapper.style.flex="1"},t.prototype.applyZIndexForAbsoluteElements=function(){for(var e,t,n=Number.MAX_VALUE,i=document.createTreeWalker(this.elementToReplace.parentElement,NodeFilter.SHOW_ELEMENT,null,!1);i.nextNode();)t=getComputedStyle(i.currentNode),"absolute"===t.position&&"auto"!=t.zIndex&&i.currentNode!=this.elementToReplace&&(e=Number(t.zIndex),isNaN(e)&&(e=0),n>e&&(n=e),i.currentNode.style.zIndex=e+1);n!==Number.MAX_VALUE&&(this.minContainer.style.zIndex=n)},t.prototype.insertContainerToDOM=function(){"A"==this.elementToReplace.tagName?this.elementToReplace.insertAdjacentElement("beforeend",this.minContainer):this.elementToReplace.insertAdjacentElement("afterend",this.minContainer)},t.prototype.getOriginalUrl=function(){var e,t=this.elementToReplace.currentSrc||this.elementToReplace.src||this.elementToReplace.srcset,n=this.elementToReplace.src?"src":"srcset";if(!t){var i=this.elementToReplace.parentElement;"PICTURE"===i.tagName?(e=i.querySelector("source[src], source[srcset]"),t=e.src||e.getAttribute("srcset").split(" ")[0]):(t=getComputedStyle(this.elementToReplace).backgroundImage.replace(/^url\(['"]?(.+?)['"]?\)/,"$1"),n="backgoundImage")}var r={};return r[S.OriginalSrc.PATH]=t,r[S.OriginalSrc.ATTR]=n,r},t.prototype.dispose=function(){if(this.apvData){if(this.removeAllEventListener(),_.removeEventListener(S.Events.DomWindow.CHECK_VISIBILITY,this.handleWindowEvent_CheckVisibility,this),_.removeEventListener(S.Events.UI_FLOW_CHANGED,this.handleGlobalUiFlowChange,this),_.removeEventListener(S.Events.DomWindow.SCROLL,this.handleWindowEvent_Scroll,this),_.removeEventListener(S.Events.DomWindow.RESIZE,this.handleWindowEvent_Resize,this),_.removeEventListener(S.Events.DomWindow.URL_CHANGE,this.handleWindowEvent_UrlChange,this),_.removeEventListener(S.Events.DomWindow.VISIBILITY_CHANGE,this.handleWindowEvent_VisibilityChange,this),_.removeEventListener(S.Events.DomWindow.BLUR,this.blurHandle,this),this.apvPlayer.removeEventListener(S.Events.Players.LOADED,this.handleApvPlayerLoadedEvent,this),this.apvPlayer.removeEventListener(S.Events.Players.PLAYING,this.handlePlayerEvent_Playing,this),ue.isSafari()||this.apvPlayer.setStyles({opacity:0}),this.apvPlayer.dispose(),this.apvPlayer=null,this._debounceCarousel&&(this._debounceCarousel.kill(),this._debounceCarousel=null),this._observerAttrChange&&this._observerAttrChange.length>0)for(var e=0;e<this._observerAttrChange.length;e++){var t=this._observerAttrChange[e];t.disconnect(),t=null}this._observerAttrChange=null,this.elementToReplace=null,this.elementSize=null,this._videoWrapper&&(this._videoWrapper.parentElement&&this._videoWrapper.parentElement.removeChild(this._videoWrapper),this._videoWrapper=null),this.minuteLinkElm&&(this.minuteLinkElm.parentElement&&this.minuteLinkElm.parentElement.removeChild(this.minuteLinkElm),this.minuteLinkElm.removeEventListener("click",this._handleMinuteLinkClick),this.minuteLinkElm=null,this._handleMinuteLinkClick=null),this.minuteLink=null,this.videoData=null,this.minContainer.apvData=null,this.minContainer=null,this._containerOL=null,this.apvData=null}},t.prototype.setElementToObserve=function(){this.startObserveAttrChange(this.apvData.getViewportObserver())},t.prototype.handleWindowEvent_CheckVisibility=function(e){this.dispatchViewportEvent()},t.prototype.handleGlobalUiFlowChange=function(e){},t.prototype.isElementToReplaceVisibleValid=function(){return!!this.elementToReplace&&!!this.elementToReplace.offsetParent},t.prototype.handleWindowEvent_Scroll=function(e){this.dispatchViewportEvent()},t.prototype.handleWindowEvent_Resize=function(e){var t=e.data;t&&this.dispatchViewportEvent()},t.prototype.handleWindowEvent_UrlChange=function(e){this.dispatchViewportEvent()},t.prototype.handleWindowEvent_VisibilityChange=function(){this.apvPlayer.setShouldPlay(!document.hidden),this.dispatchViewportEvent(),document.hidden&&(this._isVisible=!1,this._isLastVisibleAnalytics=!1)},t.prototype.handleWindowDisposeEvent=function(){this.dispose()},t.prototype.handleApvPlayerLoadedEvent=function(e){this.minuteLink.show()},t.prototype.handlePlayerEvent_Playing=function(e){this.minuteLink.show(),this.dispatchViewportEvent()},t.prototype.setLoopPlay=function(){this.apvPlayer.setElementAttribute("loop","")},t.prototype.keepVideoVisible=function(){"visible"!==this.apvPlayer.getStyle("visibility")&&(this.apvPlayer.setStyles({visibility:"visible"}),this.dispatchViewportEvent())},t.prototype.hide=function(){this.hideVideo(),this.hideLogo(),this.hideOverlay()},t.prototype.hideVideo=function(){this.apvPlayer.isShow()&&(this.apvPlayer.hide(),u.logWarning("hide video send inactive"))},t.prototype.showLogo=function(){this.minuteLink&&this.minuteLink.show()},t.prototype.hideLogo=function(){this.minuteLink&&this.minuteLink.hide()},t.prototype.isElementVisible=function(){return V.isElementVisible(this.minContainer,this.apvData.getViewportMaskElement())},t.prototype.getElementVisiblePercents=function(){return V.getElementVisiblePercents(this.minContainer,this.apvData.getViewportMaskElement())},t.prototype.dispatchViewportEvent=function(){if(this.apvData){var t=this.getElementVisiblePercents()||(V.isElementVisible(this.elementSize,this.apvData.getViewportMaskElement())?1:0);e.debugParams[b.DEBUG_VISIBILITY]&&u.log("DEBUG_VISIBILITY: Visibility for APV Id="+this.videoData.getId()+" is: "+t+"%; the threshold is: "+ge.getViewportAnalyticsPercentage()+"%"),this._updateVisible(t>=ge.getViewportPercentage()),this._updateVisibleAnalytics(t>=ge.getViewportAnalyticsPercentage())}},t.prototype._updateVisible=function(e){if(this._isVisible===e)return!1;var t=this._isVisible=e;return this.dispatchEvent(t?S.Events.Element.VISIBLE:S.Events.Element.NON_VISIBLE,{videoData:this.videoData,apvData:this.apvData}),!0},t.prototype._updateVisibleAnalytics=function(e){this._isLastVisibleAnalytics!==e&&(this._isLastVisibleAnalytics=e,e&&this.dispatchEvent(S.Events.Element.ANALYTICS_VISIBLE,{videoData:this.videoData,apvData:this.apvData,isVisible:e}))},t.prototype.dispatchReadyEvent=function(){this.dispatchEvent(S.Events.Element.READY,{videoData:this.videoData,apvElement:this.apvPlayer.getApvElement(),carouselElement:this.apvData.getViewportMaskElement(),apvData:this.apvData})},t.prototype.play=function(){this.apvPlayer&&this.apvPlayer.isPaused()&&(this.keepVideoVisible(),this.apvPlayer.play())},t.prototype.pause=function(){this.apvPlayer&&!this.apvPlayer.isPaused()&&this.apvPlayer.pause()},t.prototype.attachWindowEvents=function(){_.addEventListener(S.Events.DomWindow.SCROLL,this.handleWindowEvent_Scroll,this),_.addEventListener(S.Events.DomWindow.RESIZE,this.handleWindowEvent_Resize,this),_.addEventListener(S.Events.DomWindow.URL_CHANGE,this.handleWindowEvent_UrlChange,this),_.addEventListener(S.Events.DomWindow.VISIBILITY_CHANGE,this.handleWindowEvent_VisibilityChange,this)},t.prototype.handleCarouselDebounceCallback=function(){this.dispatchEvent(S.Events.Element.MUTANT,{videoData:this.videoData,apvData:this.apvData})},t.prototype.startObserveAttrChange=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n)return;var i={attributes:!0,characterData:!0,childList:!0},r=this;this._debounceCarousel=new c.utils.Debounce(250,this.handleCarouselDebounceCallback,this);var o=ge.getViewportMaskEchoTime(),a=ge.getViewportMaskEchoRepeat();o&&a&&this._debounceCarousel.setEcho(o,a),this._observerAttrChange;var s=new MutationObserver(function(e){r._debounceCarousel.start()});n&&s.observe(n,i),this._observerAttrChange.push(s)}},t.prototype.createLogoElement=function(){return this.minuteLinkElm=this.minuteLink.getLogoElement(),ue.isMobile()?void(this.minuteLinkElm.style.pointerEvents="none"):(this._handleMinuteLinkClick=this.handleMinuteLinkClick.bind(this),void this.minuteLinkElm.addEventListener("click",this._handleMinuteLinkClick))},t.prototype.handleMinuteLinkClick=function(e){return e.preventDefault(),e.stopImmediatePropagation(),window.open(this.apvData.getRawAnchorValue(),"_blank"),window.open("http://www.minute.ly/publisher","_self"),this.dispatchEvent(S.Events.APV_LOGO_CLICK,{videoData:this.videoData,apvData:this.apvData}),!1},t.prototype.getBoundingClientRect=function(){return this.minContainer.getBoundingClientRect()},t.prototype.activateApv=function(){ge.isBlockingDistanceEnabled()&&u.log("BlockingD: "+this.videoData.getArticleUrl()+" is now active"),
this.showElement(this.apvPlayer.getApvElement()),this.showLogo(),this.showDebugBlocking()},t.prototype.blockApv=function(){ge.isBlockingDistanceEnabled()&&u.log("BlockingD: "+this.videoData.getArticleUrl()+" is now Blocked"),this.hideElement(this.apvPlayer.getApvElement()),this.hideLogo(),this.hideDebugBlocking()},t.prototype.setState=function(e){if(this.videoData&&this.blockingState!==e)switch(this.blockingState=e,e){case S.APVStates.Active:this.activateApv();break;case S.APVStates.Disabled:case S.APVStates.Blocked:this.blockApv()}},t.prototype.hideElement=function(e){e&&(e.style.opacity=0)},t.prototype.showElement=function(e){e&&(e.style.opacity=1)},t.prototype.hideDebugBlocking=function(){this.apvData.getDebug()&&(this.apvData.getDebug().style.opacity=0)},t.prototype.showDebugBlocking=function(){this.apvData.getDebug()&&(this.apvData.getDebug().style.opacity=1)},t.prototype.hideOverlay=function(){this._containerOL&&(this._containerOL.style.opacity=0)}}()),function(){function e(){e.__superCtor__.call(this)}c.apv=c.apv||{},c.apv.domAdapter=c.apv.domAdapter||{};var t=c.apv.domAdapter;t.TestGroup=e,u["extends"](e,t.Base),e.prototype.init=function(t){e.__super__.init.call(this,t),this.dispatchViewportEvent()},e.getTypeName=function(){return"TestGroup"},e.prototype._init=function(){this.minContainer=this.elementToReplace},e.prototype.dispatchReadyEvent=function(){this.dispatchEvent(S.Events.Element.READY,{apvData:this.apvData})},e.prototype.getBoundingClientRect=function(){return this.apvData.getElementToReplace().getBoundingClientRect()}}(),function(){function e(){var e;return new(e=ae.isIframe()?t():n())}function t(){function e(){e.__superCtor__.call(this)}return r?r:(u["extends"](e,c.apv.inArticleDomAdapter),e.prototype.attachWindowEvents=function(){var e=this;ve.addPostMessageListenerBySubtype(window,S.IFramePostMessageTypes.PercentsVisible,function(t){e.percentage=t.percents,e.dispatchViewportEvent(t.percents)})},e.prototype.dispatchViewportEvent=function(e){"undefined"!=typeof e&&(this._updateVisible(e>=this._placement.getViewportPercentage()),this._updateVisibleAnalytics(e>=ge.getViewportAnalyticsPercentage()))},e.prototype.init=function(t){e.__super__.init.call(this,t)},e.getTypeName=function(){return"TestGroupInterFrames Inner"},e.prototype._init=function(){this.minContainer=this.elementToReplace},e.prototype.getBoundingClientRect=function(){return this.apvData.getElementToReplace().getBoundingClientRect()},e.prototype.hideElementToReplace=function(){},r=e)}function n(){function e(){e.__superCtor__.call(this)}return o?o:(u["extends"](e,i.Base),e.prototype.dispatchViewportEvent=function(){for(var e=this.getElementVisiblePercents(),t=0;t<ae.getIframeWindows().length;t++){var n=ae.getIframeWindows()[t],i=this.videoData.getPublisherVideoId();ve.sendToIFrame(n,"percentsVisible",{percentsVisible:e,videoId:i})}},e.prototype.init=function(t){e.__super__.init.call(this,t),this.dispatchViewportEvent()},e.getTypeName=function(){return"TestGroupInterFrames"},e.prototype._init=function(){this.minContainer=this.elementToReplace},e.prototype.dispatchReadyEvent=function(){},e.prototype.getBoundingClientRect=function(){return this.apvData.getElementToReplace().getBoundingClientRect()},e.prototype.hideElementToReplace=function(){},o=e)}c.apv=c.apv||{},c.apv.domAdapter=c.apv.domAdapter||{};var i=c.apv.domAdapter,r=null,o=null;i.testGroupInterFrames=e}(),function(){function t(e){r[e.data.videoId]=e.data}function n(){n.__superCtor__.call(this),this._handleWindowDisposeEvent=null,this.minContainer=null,this.blockingState=S.APVStates.Active,this._isLastVisibleAnalytics=!1,_.addEventListener(S.Events.PLAYER_PLAYING,this.handlePlayerPlayingEvent,this)}c.apv=c.apv||{},c.apv.domAdapter=c.apv.domAdapter||{};var i=c.apv.domAdapter,r={};_.addEventListener(S.Events.PLAYER_PLAYING,t),i.InArticleBase=n,u["extends"](n,l),n.prototype.getState=function(){return this.state},n.prototype.handlePlayerPlayingEvent=function(e){0===e.data.counter&&e.data.videoId==this.videoData.getPublisherVideoId()&&(_.removeEventListener(S.Events.PLAYER_PLAYING,this.handlePlayerPlayingEvent,this),this.apvData.ignoreViewportEvent(),this.apvPlayer.pause(),this.hide(),fe.isTestGroup()||(this.minContainer.style.opacity=0))},n.prototype.isPlayerPlayingOnInit=function(){return!!r[this.videoData.getPublisherVideoId()]},n.prototype.cleanInstance=function(){this.apvData=null,this.elementToReplace=null,this.apvPlayer=null,this.minuteLink=null,this.videoData=null,this.player=null,this._coverLayer=null},n.prototype.init=function(e){return this.apvData=e,this.elementToReplace=e.getElementToReplace(),this.apvPlayer=e.getApvPlayer(),this.minuteLink=e.getMinuteLogo(),this.videoData=e.getVideoData(),this.player=e.getPlayerInstance(),this._coverLayer=null,this.isPlayerPlayingOnInit()?void this.cleanInstance():(this.initElements(),this._init(),this.attachWindowEvents(),this.addEvents(),this.dispatchReadyEvent(),ae.isIframe()&&!m||this.dispatchViewportEvent(),void this._observeViewportMask())},n.prototype._observeViewportMask=function(){var e=ge.getInArticleViewportMask();if(e!==window){var t=function(){u.log("InArticleBase observed change!"),this.dispatchViewportEvent();var e=new c.utils.Timer(500,this.dispatchViewportEvent,this);e.setCounterLimit(3),e.start(),this.mutationObserver.disconnect()}.bind(this);this.mutationObserver=new MutationObserver(t),this.mutationObserver.observe(e,{attributes:!0})}},n.prototype.addEvents=function(){var e=this;_.addEventListener(S.Events.PLAYER_VIDEO_CHANGED,this.handleVideoDataChanged.bind(this)),this.apvPlayer.addEventListener(S.Events.Players.PLAYING,this.handlePlayerEvent_Playing,this),_.addEventListener(S.Events.DomWindow.CHECK_VISIBILITY,function(){e.dispatchViewportEvent()})},n.prototype._init=function(){this.createMinContainer(),this.createVideoElement(),this.createCoverLayerElement(),this.createLogoElement(),this.minContainer.appendChild(this.apvPlayer.getApvElement()),this.minContainer.appendChild(this._coverLayer),ge.getInArticleShowLogo()&&this.minContainer.appendChild(this.minuteLinkElm),this.insertContainerToDOM(this.elementToReplace)},n.prototype.createMinContainer=function(){this.minContainer=document.createElement("div"),this.decorateElementWithPlacementName(this.minContainer),this.minContainer.style.width="100%",this.minContainer.style.height="100%",this.minContainer.style.position=S.values.ABSOLUTE,this.minContainer.style.top="0px"},n.prototype.getTypeName=function(){throw new Error("inarticle placer: getTypeName has to be implemented")},n.prototype.decorateElementWithPlacementName=function(e){e.setAttribute("placement",this.getTypeName())},n.prototype.createVideoElement=function(){var e={position:S.values.RELATIVE,display:S.values.BLOCK,width:S.values.HUNDRED_PERCENT,height:S.values.HUNDRED_PERCENT};e[S.styles.OBJECT_FIT]="cover",this.apvPlayer.setStyles(e)},n.prototype.createCoverLayerElement=function(){this._coverLayer=document.createElement("div"),this._coverLayer.style.width=S.values.HUNDRED_PERCENT,this._coverLayer.style.height=S.values.HUNDRED_PERCENT,this._coverLayer.style.position=S.values.ABSOLUTE,this._coverLayer.style.top="0px"},n.prototype.insertContainerToDOM=function(){throw new Error("inarticle placer: insert to dom has to be implemented")},n.prototype.getOriginalUrl=function(){var e,t=this.elementToReplace.src||this.elementToReplace.srcset,n=this.elementToReplace.src?"src":"srcset";"undefined"!=typeof t&&""!==t||"PICTURE"!==this.elementToReplace.parentElement.tagName||(e=this.elementToReplace.parentElement.querySelector("source[src], source[srcset]"),t=e.src,"undefined"!=typeof t&&""!==t||(t=e.getAttribute("srcset").substr(0,e.getAttribute("srcset").indexOf(" "))));var i={};return i[S.OriginalSrc.PATH]=t,i[S.OriginalSrc.ATTR]=n,i},n.prototype.initElements=function(){throw new Error("inarticle placer: set wrapper on drived implementation")},n.prototype.handlePlayerEvent_Playing=function(e){this.minuteLink.show()},n.prototype.keepVideoVisible=function(){ae.isIframe()||"visible"!==this.apvPlayer.getStyle("visibility")&&(this.apvPlayer.setStyles({visibility:"visible"}),this.dispatchViewportEvent())},n.prototype.hide=function(){this.hideVideo(),this.hideLogo(),this.hideOverlay()},n.prototype.hideVideo=function(){this.apvPlayer.isShow()&&(this.apvPlayer.hide(),u.log("hide video send inactive"))},n.prototype.showLogo=function(){this.minuteLink&&this.minuteLink.show(),this._containerOverlay&&(this._containerOverlay.style.opacity=1)},n.prototype.hideLogo=function(){this.minuteLink&&this.minuteLink.hide(),this._containerOverlay&&(this._containerOverlay.style.opacity=0)},n.prototype.isElementVisible=function(){var e=ge.getInArticleViewportMask();return V.isElementVisible(this.wrapperElement,e)},n.prototype.getElementVisiblePercents=function(){var e=ge.getInArticleViewportMask();return V.getElementVisiblePercents(this.wrapperElement,e)},n.prototype.dispatchViewportEvent=function(){var t=this.getElementVisiblePercents();e.debugParams[b.DEBUG_VISIBILITY]&&u.log(this.apvData.getIgnoreViewportEvent()?"Visible 0 by ignore viewport":"DEBUG_VISIBILITY: Visibility for InArticle APV Id="+this.videoData.getId()+" is: "+t+"%; the threshold is: "+ge.getViewportAnalyticsPercentage()+"%"),this._updateVisible(t>=1),this._updateVisibleAnalytics(t>=ge.getViewportAnalyticsPercentage())},n.prototype._updateVisible=function(e){e?this.dispatchEvent(S.Events.Element.VISIBLE,{videoData:this.videoData}):this.dispatchEvent(S.Events.Element.NON_VISIBLE,{videoData:this.videoData})},n.prototype._updateVisibleAnalytics=function(e){this._isLastVisibleAnalytics!==e&&(this._isLastVisibleAnalytics=e,e&&this.dispatchEvent(S.Events.Element.ANALYTICS_VISIBLE,{apvData:this.apvData,videoData:this.videoData,isVisible:e}))},n.prototype.dispatchReadyEvent=function(){this.dispatchEvent(S.Events.Element.READY,{apvData:this.apvData,elemToTraceVisibility:this.getElementToTraceVisibility()})},n.prototype.play=function(){this.apvPlayer&&this.apvPlayer.isPaused()&&(this.keepVideoVisible(),this.apvPlayer.play())},n.prototype.pause=function(){this.apvPlayer&&!this.apvPlayer.isPaused()&&this.apvPlayer.pause()},n.prototype.attachWindowEvents=function(){var e=this;_.addEventListener(S.Events.DomWindow.SCROLL,function(){e.dispatchViewportEvent()}),_.addEventListener(S.Events.DomWindow.URL_CHANGE,function(){e.resetLogoStyle(),e.dispatchViewportEvent()})},n.prototype.createLogoElement=function(){this.minuteLinkElm=this.minuteLink.getLogoElement(),this.minuteLinkElm.style["z-index"]=1,this.minuteLinkElm.style.pointerEvents="none"},n.prototype.resetLogoStyle=function(){this.minuteLinkElm&&this.setLogoSize()},n.prototype.setLogoSize=function(){var e=u.extractElementSize(this.minuteLinkElm),t=e.width,n=this.minuteLinkElm.style.width;t<S.LOGO_SMALLEST_WIDTH&&(n=S.LOGO_SMALLEST_WIDTH+"px"),this.minuteLinkElm.style.width=n,this.minuteLinkElm.style.height=n,this.minuteLinkElm.style.backgroundSize=n},n.prototype.activateApv=function(){this.showElement(this.apvPlayer.getApvElement()),this.showLogo()},n.prototype.setState=function(e){this.activateApv()},n.prototype.hideElement=function(e){e&&(e.style.opacity=0)},n.prototype.showElement=function(e){e&&(e.style.opacity=1)},n.prototype.observerAttrChange=function(){},n.prototype.getBoundingClientRect=function(){},n.prototype.blockApv=function(){},n.prototype.hideDebugBlocking=function(){},n.prototype.showDebugBlocking=function(){},n.prototype.hideOverlay=function(){},n.prototype.setLoopPlay=function(){},n.prototype.handleVideoDataChanged=function(e){},n.prototype.getElementToTraceVisibility=function(){}}(),function(){function e(){e.__superCtor__.call(this)}c.apv=c.apv||{},c.apv.domAdapter=c.apv.domAdapter||{},c.apv.inArticleDomAdapter=e,u["extends"](e,c.apv.domAdapter.InArticleBase),e.prototype._init=function(){this.createMinContainer(),this.createVideoElement(),this.createCoverLayerElement(),this.createLogoElement(),this.createContainerOverlay(),this.minContainer.appendChild(this.apvPlayer.getApvElement()),this.minContainer.appendChild(this._coverLayer),this.minContainer.appendChild(this.minuteLinkElm),this.minContainer.appendChild(this._containerOverlay),this.insertContainerToDOM(this.elementToReplace)},e.prototype.getTypeName=function(){return"Edge"},e.prototype.createLogoElement=function(){e.__super__.createLogoElement.call(this),this.minuteLinkElm.style["z-index"]=1},e.prototype.createMinContainer=function(){this.minContainer=document.createElement("div"),this.minContainer.setAttribute("placement",this.getTypeName()),this.minContainer.style.width="100%",this.minContainer.style.height="100%",this.minContainer.style.position="absolute",this.minContainer.style.top=0},e.prototype.insertContainerToDOM=function(e){var t=e.querySelector("div.edge-placeholder");t.appendChild(this.minContainer)},e.prototype.createContainerOverlay=function(){var e=document.createElement("div");document.createElement("img");e.className="edge-placeholder-button",this._containerOverlay=e},e.prototype.initElements=function(){this.wrapperElement=this.player.$el[0]}}(),function(){function e(){e.__superCtor__.call(this),this.apvData=null,this.domAdapter=null,this.apvPlayer=null,this.videoData=null,this.currentPlacement=null}c.apv=c.apv||{},c.apv.playmodes=c.apv.playmodes||{},c.apv.playmodes.Base=e,u["extends"](e,l),e.prototype.setDomAdapter=function(e){this.apvData=e,this.domAdapter=this.apvData.getDomAdapter(),this.apvPlayer=this.apvData.getApvPlayer(),this.videoData=this.apvData.getVideoData()},e.prototype.start=function(){}}(),function(){function e(){e.__superCtor__.call(this)}c.apv.playmodes.AndroidCharmerInArticle=e,u["extends"](e,c.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.setAutoplay(),this.apvPlayer.addEventListener(S.Events.Players.LOADED,function(){t.domAdapter.isElementVisible()?t.domAdapter.play():t.domAdapter.pause()}),this.apvPlayer.addEventListener(S.Events.Players.PLAYING,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ge.getEffectApvShowDelay())}),this.domAdapter.addEventListener(S.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(S.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),u.plugins.addPlayEventListener(function(){t.domAdapter.hide()},this.currentPlacement,this.videoData)}}(),function(){function e(){e.__superCtor__.call(this)}c.apv.playmodes.AndroidCharmerViewport=e,u["extends"](e,c.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.setAutoplay(),this.apvPlayer.addEventListener(S.Events.Players.LOADED,function(){t.domAdapter.isElementVisible()?t.domAdapter.play():t.domAdapter.pause()}),this.apvPlayer.addEventListener(S.Events.Players.PLAYING,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ge.getEffectApvShowDelay())}),this.domAdapter.addEventListener(S.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(S.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),this.domAdapter.addEventListener(S.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},10)}),this.domAdapter.hideLogo()}}(),function(){function e(){e.__superCtor__.call(this)}c.apv.playmodes.iOSCharmerInArticle=e,u["extends"](e,c.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.forcePlay(),this.apvPlayer.addEventListener(S.Events.Players.PLAYING,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ge.getEffectApvShowDelay())}),this.domAdapter.addEventListener(S.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(S.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),u.plugins.addPlayEventListener(function(){t.domAdapter.hide()},this.currentPlacement,this.videoData)}}(),function(){function e(){e.__superCtor__.call(this)}c.apv.playmodes.iOSCharmerViewport=e,u["extends"](e,c.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.forcePlay(),this.apvPlayer.addEventListener(S.Events.Players.PLAYING,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ge.getEffectApvShowDelay())}),this.domAdapter.addEventListener(S.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(S.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},10)}),this.domAdapter.hideLogo()}}(),function(){function e(){e.__superCtor__.call(this)}c.apv.playmodes.Viewport=e,u["extends"](e,c.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.addEventListener(S.Events.Players.LOADED,function(){t.domAdapter.isElementVisible()?t.domAdapter.play():t.domAdapter.pause()}),this.apvPlayer.addEventListener(S.Events.Players.PLAYING,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ge.getEffectApvShowDelay())}),this.domAdapter.addEventListener(S.Events.Element.VISIBLE,function(){t.domAdapter.play()}),this.domAdapter.addEventListener(S.Events.Element.NON_VISIBLE,function(){t.domAdapter.pause()}),this.domAdapter.addEventListener(S.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},10)}),this.domAdapter.hideLogo()}}(),function(){function e(){e.__superCtor__.call(this)}c.apv.playmodes.MobileGif=e,u["extends"](e,c.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this),this.domAdapter.showLogo()}}(),function(){function e(){e.__superCtor__.call(this)}c.apv.playmodes.InArticleMobile=e,u["extends"](e,c.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.apvPlayer.addEventListener(S.Events.Players.LOADED,function(){setTimeout(t.apvPlayer.show.bind(t.apvPlayer),ge.getEffectApvShowDelay()),t.domAdapter.showLogo(),t.domAdapter.play()}),u.plugins.addPlayEventListener(function(){t.domAdapter.hide()},this.currentPlacement,this.videoData)}}(),function(){function e(){e.__superCtor__.call(this)}c.apv.playmodes.TestGroup=e,u["extends"](e,c.apv.playmodes.Base),e.prototype.start=function(){e.__super__.start.call(this);var t=this;this.domAdapter.addEventListener(S.Events.Element.MUTANT,function(e){setTimeout(function(){t.domAdapter.dispatchViewportEvent()},10)})}}();var ie=function(){function e(e){this.APV_LOAD_TIMEOUT=ge.getApvLoadTimeout(),this._containerUnique=u.generateShortUnique(),this._uuid=u.generateUnique(),this._videoData=e.videoData,this._key=""+this._videoData.getHighlightId(),this._keyProduct=this._key+"_"+e.product,this._name=e.name,this._elementToReplace=e.elmToReplace,this._elementSize=e.elementSize,this._attrValue=e.attrValue,this._apvPlayer=null,this._domAdapter=null,this._minuteLogo=null,this._watcher=null,this._inArticleType="",this._debug=null,this._state=S.APVStates.New,this._playerInstance=null,this._product=e.product,this._isCharmerEnabled=e.charmer,this._manualClick=null,this._isLazy=e.isLazy,this._rawAnchorValue=e.rawUrl,this._clickElements=[],this._ignoreViewportEvent=!1,this._viewportMask=e.viewportMaskElement,this._viewportObserver=e.viewportObserver,this._containerElement=null,this._domContainerElementTracker=null,this._onDisposed=new c.utils.Signal,this._shouldSendClickEvent=!0,this._clickAlreadySent=!1,this._hasDisposed=!1,this._apvLoadTimeoutCode=0,this._hasPlayerAssetLoaded=!1,this._apvCreationTime=u.getTimeNow(),this._belongToUrl=null,this.setContainerElement(e.containerElement),this.startApvLoadTracking()}return e.prototype.ignoreViewportEvent=function(){this._ignoreViewportEvent=!0},e.prototype.getIgnoreViewportEvent=function(){return this._ignoreViewportEvent},e.prototype.setClickElements=function(e){this._clickElements=e},e.prototype.getVideoId=function(){return this._videoData&&this._videoData.getPublisherVideoId()},e.prototype.getName=function(){return this._name},e.prototype.setName=function(e){this._name=e},e.prototype.getClickElements=function(){return this._clickElements},e.prototype.setAttributeValue=function(e){this._attrValue=e},e.prototype.setContainerElement=function(e){e&&!this._containerElement&&(this._containerElement=e,this._createElementsTracker(),this._belongToUrl=c.publisher.utils&&c.publisher.utils.getElementUrl&&c.publisher.utils.getElementUrl(this._containerElement))},e.prototype._createElementsTracker=function(){this._domContainerElementTracker=new c.utils.DomElementTracker(this._containerElement),this._domContainerElementTracker.onRemovedFromDom.addOnce(this._onContainerElementRemoved,this),this._domContainerElementTracker.start()},e.prototype.getIsCharmerActive=function(){return this._isCharmerEnabled},e.prototype.getProduct=function(){return this._product},e.prototype.getKey=function(){return this._key},e.prototype.getKeyProduct=function(){return this._keyProduct},e.prototype.getVideoData=function(){return this._videoData},e.prototype.getElementToReplace=function(){return this._elementToReplace},e.prototype.getElementSize=function(){return this._elementSize},e.prototype.getContainerElement=function(){return this._containerElement},e.prototype.setApvPlayer=function(e){return this._apvPlayer=e,this.trackApvLoaded(),this._apvPlayer},e.prototype.getApvPlayer=function(){return this._apvPlayer},e.prototype.setDomAdapter=function(e){return this._domAdapter=e},e.prototype.getDomAdapter=function(){return this._domAdapter},e.prototype.setMinuteLogo=function(e){return this._minuteLogo=e},e.prototype.getMinuteLogo=function(){return this._minuteLogo},e.prototype.setWatcher=function(e){this._watcher=e},e.prototype.removeWatcher=function(){this._watcher=null},e.prototype.getWatcher=function(){return this._watcher},e.prototype.setInArticleType=function(e){this._inArticleType=e},e.prototype.getInArticleType=function(){return this._inArticleType},e.prototype.getBlockingDistance=function(){return ge.getBaseHeight()+this.getRect().width/ge.getBaseThumbPx()},e.prototype.getPosition=function(){var e=this.getRect();return{top:e.top+document.body.scrollTop+parseInt(e.height)/2,left:e.left+document.body.scrollLeft+parseInt(e.width)/2}},e.prototype.getRect=function(){return this._domAdapter?this._domAdapter.getBoundingClientRect():this._elementToReplace.getBoundingClientRect()},e.prototype.setDebug=function(e){this._debug=e},e.prototype.getDebug=function(){return this._debug},e.prototype.setState=function(e){this._state=e,this._domAdapter&&this._domAdapter.setState(e)},e.prototype.getState=function(){return this._state},e.prototype.getViewportMaskElement=function(){return this._viewportMask},e.prototype.setViewportObserver=function(e){this._viewportObserver=e},e.prototype.getViewportObserver=function(){return this._viewportObserver},e.prototype.setPlayerInstance=function(e){this._playerInstance=e},e.prototype.getPlayerInstance=function(){return this._playerInstance},e.prototype.setManualClick=function(e){this._manualClick=e},e.prototype.getManualClick=function(){return this._manualClick},e.prototype.setIsLazy=function(e){this._isLazy=e},e.prototype.getIsLazy=function(){return this._isLazy},e.prototype.getUniqId=function(){return this._uuid},e.prototype.getRawAnchorValue=function(){return this._rawAnchorValue},e.prototype.setRawAnchorValue=function(e){this._rawAnchorValue=e},e.prototype.setShouldSendClickEvent=function(e){this._shouldSendClickEvent=e},e.prototype.getShouldSendClickEvent=function(){return this._shouldSendClickEvent},e.prototype.setClickAlreadySent=function(){this._clickAlreadySent=!0},e.prototype.getClickAlreadySent=function(){return this._clickAlreadySent},e.prototype.getContainerUnique=function(){return this._containerUnique},e.prototype.dispose=function(){this._onDisposed&&(this._onDisposed.dispatch(this),this._domContainerElementTracker&&(this._domContainerElementTracker.dispose(),this._domContainerElementTracker=null),this._domAdapter&&(this._domAdapter.dispose(),this._domAdapter=null),this._videoData=null,this._apvPlayer=null,this._elementToReplace=null,this._elementSize=null,this._attrValue=null,this._isCharmerEnabled=null,this._viewportMask=null,this._viewportObserver=null,this._containerElement=null,this._onDisposed.removeAll(),this._onDisposed=null,this._hasDisposed=!0,this._minuteLogo=null,this._watcher=null,this._manualClick=null,this._clickElements=null)},e.prototype.hasDisposed=function(){return this._hasDisposed},e.prototype.onDisposed=function(){return this._onDisposed},e.prototype._onContainerElementRemoved=function(){this.dispose()},e.prototype.getBelongToUrl=function(){return this._belongToUrl},e.prototype.startApvLoadTracking=function(){0===this._apvLoadTimeoutCode&&(this._apvLoadTimeoutCode=setTimeout(this.handleApvLoadTimeout.bind(this),this.APV_LOAD_TIMEOUT))},e.prototype.stopApvLoadTracking=function(){0!==this._apvLoadTimeoutCode&&(clearTimeout(this._apvLoadTimeoutCode),this._apvLoadTimeoutCode=0)},e.prototype.handleApvLoadTimeout=function(){this._apvLoadTimeoutCode=0,u.sendLoggerReport({message:"APV not load timeout: "+this.APV_LOAD_TIMEOUT,severity:c.reports.Levels.Warning,category:"apv"})},e.prototype.trackApvLoaded=function(){if(this._apvPlayer)return this._apvPlayer.hasPlayerAssetLoaded()?void(this._hasPlayerAssetLoaded=!0):void this._apvPlayer.addEventListener(S.Events.Players.LOADED,this.handleApvLoaded.bind(this))},e.prototype.handleApvLoaded=function(){if(this.stopApvLoadTracking(),ge.getIsApvLoadReportEnabled()){var e=100*Math.round((u.getTimeNow()-this._apvCreationTime)/100);u.sendLoggerReport({message:"APV loaded: "+e,severity:c.reports.Levels.Info,category:"apv"})}},e}();!function(){function e(e){function t(e,t){d.has(e,t)||d.add(e,t)}function n(){return!d||d.getNumListeners()>0}function i(){l&&(p&&(p.disconnect(),p=null),d.removeAll(),d=null,l=null)}function r(){ge.shouldLazyWaitForLoad()||(p=new MutationObserver(o),p.observe(l.getElementToReplace(),{attributes:!0}));var e=l.getElementToReplace();e.addEventListener?e.addEventListener("load",a):e.attachEvent("onload",a),l.onDisposed().add(i)}function o(e){u.isElementLazyLoad(l.getElementToReplace())===!1&&s()}function a(){if(l){var e=l.getElementToReplace();u.isElementLazyLoad(e)===!1&&s()}}function s(){h>0&&(clearTimeout(h),h=0),u.isElementHasSize(l.getElementToReplace())?(c.utils.ApvElementUtils.removeIsElementWatched(l.getElementToReplace()),d.dispatch(l)):h=setTimeout(s,50)}var l=e,d=new c.utils.Signal,p=null,h=0;return r(),{addListener:t,isWatched:n,dispose:i}}c.apv=c.apv||{},c.apv.LazyLoadWatcher=e}(),function(){function e(){this._usedApvDataList={},this._isRequestDisposedUpdate=!1,this._clickSentApv={}}e.prototype.isVideoDataAlreadyOnPage=function(e){return!!this._usedApvDataList[e.getId().toString()]},e.prototype.add=function(e){if(!e.hasDisposed()){var t=this;this._usedApvDataList[e.getContainerUnique()]=e,e.onDisposed().add(function(e){t.remove(e)}),this._clickSentApv[e.getKeyProduct()]&&e.setClickAlreadySent()}},e.prototype.remove=function(e){var t=e.getContainerUnique();this._usedApvDataList[t]&&delete this._usedApvDataList[t],this._isRequestDisposedUpdate||(this._isRequestDisposedUpdate=!0,u.getRequestAnimationFrame(this.sendApvDisposedEvent.bind(this)))},e.prototype.sendApvDisposedEvent=function(){this._isRequestDisposedUpdate=!1,_.dispatchEvent(S.Events.APV_DISPOSED)},e.prototype.getApvDataByKeyProduct=function(e,t){var n=this._getAllApvDataByKeyProduct(e,t);return n.length>0?n[0]:null},e.prototype.getCount=function(){return Object.keys(this._usedApvDataList).length},e.prototype.setClickAlreadySent=function(e){e&&e.setClickAlreadySent();for(var t=this._getAllApvDataByKeyProduct(e.getVideoId(),e.getProduct()),n=0;n<t.length;n++){var i=t[n];i!==e&&i.setClickAlreadySent()}this._clickSentApv[e.getKeyProduct()]=!0},e.prototype._getAllApvDataByKeyProduct=function(e,t){for(var n=Object.keys(this._usedApvDataList),i=[],r=0;r<n.length;r++){var o=this._usedApvDataList[n[r]];o.getVideoId()===e&&o.getProduct()===t&&i.push(o)}return i},c.ApvDataManager=e}(),function(){function e(e){t=e,_.addEventListener(S.Events.LOAD_MORE_FOUND,this.markPlaces,this)}var t;e.prototype.markPlaces=function(){for(var e,t=Se.getAllPlacements(),n=0;n<t.length;n++){e=t[n];var i=document.querySelectorAll(e.getContainerSelector());if(0!==i.length){for(var r=0;r<i.length;r++){var o=i[r];if(o.setAttribute(S.integrationDataSet.ENABLE,e.getName()||"true"),"a"!=e.getAnchorSelector()){var a=o.querySelector(e.getAnchorSelector());a&&a.setAttribute(S.integrationDataSet.ANCHOR,"true")}if("img"!=e.getPreviewSelector()){var s=o.querySelector(e.getPreviewSelector());s&&s.setAttribute(S.integrationDataSet.PREVIEW,"true")}if("undefined"!=typeof e.getSizeSelector()&&""!==e.getSizeSelector()){var l=o.querySelector(e.getSizeSelector());l&&l.setAttribute(S.integrationDataSet.SIZE,"true"),"CONTAINER"==e.getSizeSelector()&&o.setAttribute(S.integrationDataSet.SIZE,"true")}}if(e.getViewportObserverSelector())for(var c=document.querySelectorAll(e.getViewportObserverSelector()),u=0;u<c.length;u++){var d=c[u];d.setAttribute(S.integrationDataSet.VIEWPORT_OBSERVER,"true")}if(e.getViewportMaskSelector())for(var p=document.querySelectorAll(e.getViewportMaskSelector()),u=0;u<p.length;u++){var d=p[u];d.setAttribute(S.integrationDataSet.VIEWPORT_MASK,"true")}}}},c.services=c.services||{},c.services.Simulation=e}(),function(){function e(r,o,a){e.__superCtor__.call(this),!t&&(t=r),!n&&(n=o),!i&&(i=a),this.videosManagerCount=0,this._apvDataCounter=0}var t,n,i,r=c.utils.ApvElementUtils;u["extends"](e,l),e.prototype.getVideoDataByUrl=function(e){return Ee.getVideoDataByKey(e)},e.prototype.checkForVideoData=function(e){return we.isVideoDataAlreadyOnPage(e)},e.prototype.createData=function(e){e.product=S.Emitter.PRODUCT_APV,e.charmer=ge.getIsEnableMobileVideo();var t=new ie(e),i=[],r=[];return c.publisher.utils&&c.publisher.utils.getAdditionalClickElements&&(r=c.publisher.utils.getAdditionalClickElements(e)),e.containerElement===e.anchorElement?(u.log("Relative Selectors no anchor was set -> container equals to anchor"),i=[t.getContainerElement()]):(i=t.getContainerElement().querySelectorAll("["+e.attributeName+"*='"+e.attrValue+"'], ["+e.attributeName+"*='"+encodeURIComponent(e.attrValue)+"']"),i=Array.prototype.slice.call(i)),i=i.concat(r),t.setClickElements(i),n.add(t),t},e.prototype.filterHiddenElements=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i.offsetParent&&t.push(i)}return t},e.prototype.setPotentialObserver=function(e){var t=this;e.observer=new MutationObserver(function(n){n.forEach(function(){var n=t.retrieveDomElements(e);if(n){if(!i.isElementToReplaceValid(n.elmToReplace))return;r.setElementAsWatched(n.elmToReplace),u.extendObject(e,n);var o=t.createData(e);if(!o)return;t.dispatchEvent(S.Events.NEW_VIDEO_DATE,[o]),e.observer.disconnect()}})}),e.observer.observe(e.containerElement,{attributes:!0,subtree:!0,childList:!0})},e.prototype.retrieveDomElements=function(e){var t={};if(t.elmToReplace=this.getElementToReplace(e),!t.elmToReplace||!i.isElementToReplaceValid(t.elmToReplace))return e.observer||this.setPotentialObserver(e),null;if(t.isLazy=i.isElementLazyLoad(t.elmToReplace),t.isLazy&&!e.observer){if(r.getIsElementWatched(t.elmToReplace))return null;r.setElementAsWatched(t.elmToReplace)}else if(r.getIsElementReplaced(t.elmToReplace))return null;return t.elementSize=this.getElementSize(e)||t.elmToReplace,t.viewportMaskElement=this.getViewportMaskElement(e,t.elmToReplace),t.viewportObserver=this.getViewportObserver(e,t.elmToReplace),t.name=this._generateName(e),t},e.prototype.getApvDataByContainer=function(e){var t=this.checkForVideoData(e);if(t){u.extendObject(e,t);var n=this.retrieveDomElements(e);if(n)return r.setElementAsProcessed(n.elmToReplace),u.extendObject(e,n),this.createData(e)}},e.prototype.getViewportMaskElement=function(e,t){throw new Error("Must implement function")},e.prototype.getViewportObserver=function(e,t){throw new Error("Must implement function")},e.prototype.getNewApvData=function(){throw new Error("Must implement function")},c.services=c.services||{},c.services.VideoGenerator=c.services.VideoGenerator||{},
c.services.VideoGenerator.Base=e}(),function(){function e(e){return!!e&&(0===e.indexOf("http")||0===e.indexOf("/"))}function t(e,o,a){t.__superCtor__.call(this,e,o,a),!n&&(n=e),!i&&(i=o),!r&&(r=a),this.potentialsLength=0,this.anchorWarned=!1,this.previewWarned=!1}var n,i,r;u["extends"](t,c.services.VideoGenerator.Base),t.prototype._getVideoData=function(t){for(var n,i,r,o=t.attributes,a=0;a<o.length;a++){r=o[a].name,i=t.getAttribute(r);var s="A"==t.tagName&&"href"===r;if((s||e(i))&&(n=Ee.getVideoDataByKey(u.urls.getStructuredByUrlWithoutOrigin(i))))return{attributeName:r,targetUrl:i,videoData:n}}return null},t.prototype._getAnchorElement=function(e){var t=e.containerElement.querySelector("["+S.integrationDataSet.ANCHOR+"]");if(!t){var n=e.containerElement.querySelectorAll("a");t=n[0],n.length>1&&!this.anchorWarned&&(u.sendErrorReport("MinIntLayer: Found more than one anchor inside a container, please consider using 'data-min-anchor'"),this.anchorWarned=!0),0!==n.length||this.anchorWarned||(u.sendErrorReport("MinIntLayer: No anchor was found inside a container, please consider using 'data-min-anchor'"),this.anchorWarned=!0),t||"A"!==e.containerElement.tagName||(t=e.containerElement)}return t},t.prototype.getNewApvData=function(e){var t=[],n=this.getIntegrationContainers();if(0!==n.length){var i=this.potentialsLength!==n.length,r=this.videosManagerCount!==Ee.getVideosCount();if(i||r||e){for(var o=0;o<n.length;o++){var a=this.getApvDataByContainer({containerElement:n[o]});a&&t.push(a)}return this.potentialsLength=n.length,this.videosManagerCount=Ee.getVideosCount(),t}}},t.prototype.getIntegrationContainers=function(){var e=document.querySelectorAll("["+S.integrationDataSet.ENABLE+"]");return 0===e.length?[]:e},t.prototype.checkForVideoData=function(e){var n=this._getAnchorElement(e);if(!n)return null;var i=this._getVideoData(n);if(!i||u.isObjEmpty(i))return null;var r=i.videoData;return r&&r.hasAPV()&&r.shouldPlayRegular()?t.__super__.checkForVideoData.call(this,r)?null:{anchorElement:n,attributeName:i.attributeName,attrValue:u.urls.getStructuredByUrlWithoutOrigin(i.targetUrl),rawUrl:u.urls.getFullPathByUrl(i.targetUrl),videoData:r}:null},t.prototype.getElementToReplace=function(e){var t=e.containerElement,n=t.querySelector("["+S.integrationDataSet.PREVIEW+"]");if(!n){var i=t.querySelectorAll("img");if(i.length>=1&&(i.length>1&&!this.previewWarned&&(u.sendErrorReport("MinIntLayer: Found more than one img tag inside a container, please consider using 'data-min-preview'"),this.previewWarned=!0),n=i[0]),0===i.length&&!this.previewWarned)return u.sendErrorReport("MinIntLayer: No img tag was found inside a container, please consider using 'data-min-preview'"),this.previewWarned=!0,null}return n},t.prototype.getElementSize=function(e){return e.containerElement.dataset.minSize?e.containerElement:e.containerElement.querySelector("["+S.integrationDataSet.SIZE+"]")},t.prototype.getViewportObserver=function(e,t){var n=[],i=document.querySelectorAll("["+S.integrationDataSet.VIEWPORT_OBSERVER+"]");if(i)for(var r=0;r<i.length;r++){var o=i[r];o.contains(t)&&n.push(o)}return n},t.prototype.getViewportMaskElement=function(e,t){var n=document.querySelectorAll("["+S.integrationDataSet.VIEWPORT_MASK+"]");if(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.contains(t))return r}return window}return window},t.prototype._generateName=function(e){var t="true",n=e.containerElement;return t="true"!==n.getAttribute(S.integrationDataSet.ENABLE)&&""!==n.getAttribute(S.integrationDataSet.ENABLE)?n.getAttribute(S.integrationDataSet.ENABLE):n.offsetWidth+"X"+n.offsetHeight},c.services=c.services||{},c.services.VideoGenerator=c.services.VideoGenerator||{},c.services.VideoGenerator.Integrated=t}(),function(){function e(r,o,a){e.__superCtor__.call(this,r,o,a),!t&&(t=r),!n&&(n=o),!i&&(i=a),this.potentialsPerPlacements={}}var t,n,i;u["extends"](e,c.services.VideoGenerator.Base),e.prototype.getNewApvData=function(e){for(var t,i=Se.getAllPlacements(),r=[],o=this.videosManagerCount!==Ee.getVideosCount(),a=this._apvDataCounter>n.getCount(),s=0;s<i.length;s++){t=i[s];var l=document.querySelectorAll(t.getContainerSelector());if(0!==l.length&&(this.didContainerAmountChanged(t,l)||o||a||e)){this.potentialsPerPlacements[t.getName()]=l.length;for(var c=0;c<l.length;c++){var u=this.getApvDataByContainer({placement:t,containerElement:l[c]});u&&r.push(u)}}}return this.videosManagerCount=Ee.getVideosCount(),this._apvDataCounter=n.getCount(),r},e.prototype.didContainerAmountChanged=function(e,t){return!this.potentialsPerPlacements.hasOwnProperty(e.getName())||this.potentialsPerPlacements[e.getName()]!==t.length},e.prototype.checkForVideoData=function(e){var t={},n=e.containerElement.querySelector(e.placement.getAnchorSelector());if(!n){if("A"!==e.containerElement.tagName)return null;n=e.containerElement}var r=e.placement.getAttrName(),o=r&&n.getAttribute(r),a=this.getVideoDataByUrl(i.urls.getStructuredByUrlWithoutOrigin(o));return a&&a.hasAPV()&&a.shouldPlayRegular()?(t.anchorElement=n,t.attributeName=r,t.videoData=a,t.attrValue=i.urls.getStructuredByUrlWithoutOrigin(o),t.rawUrl=u.urls.getFullPathByUrl(o),t):null},e.prototype.getElementToReplace=function(e){return e.containerElement.querySelector(e.placement.getPreviewSelector())},e.prototype.getElementSize=function(e){var t=e.placement;if("undefined"!=typeof t.getSizeSelector()&&""!==t.getSizeSelector()){var n=e.containerElement.querySelector(t.getSizeSelector());if(n)return n;if("CONTAINER"==t.getSizeSelector())return e.containerElement}return null},e.prototype.getViewportObserver=function(e,t){var n=e.placement,i=n.getViewportObserverSelector();if(i){for(var r=document.querySelectorAll(i),o=0;o<r.length;o++){var a=r[o];if(a.contains(t))return[a]}u.logWarning("no observer element was found that contains the element to replace on placement name: "+n.getName())}return[]},e.prototype.getViewportMaskElement=function(e,t){var n=e.placement,i=n.getViewportMaskSelector();if(i){for(var r=document.querySelectorAll(i),o=0;o<r.length;o++){var a=r[o];if(a.contains(t))return a}return u.logWarning("no mask element was found that contains the element to replace on placement name: "+n.getName()),window}return window},e.prototype._generateName=function(e){return e.placement.getName()},c.services=c.services||{},c.services.VideoGenerator=c.services.VideoGenerator||{},c.services.VideoGenerator.Relative=e}(),function(){function e(e){function t(){if(e.isBlockingDistanceEnabled()){var t=new c.services.BlockingDistance.DocumentRadiusPainterFactory(e).create();return new c.services.BlockingDistance.BlockingDistanceService(e,t)}return new c.services.BlockingDistance.NotActivatedBlockingDistance}return{create:t}}c.services=c.services||{},c.services.BlockingDistance=c.services.BlockingDistance||{},c.services.BlockingDistance.Factory=e}(),function(){function e(e,t){this.carouselContainers=[],o=t}function t(e,t){return t.getPosition().top-e.getPosition().top}function n(e){if(ge.getIsDisableApvOnCarouselScroll()){var t=e.getViewportMaskElement();if(t){for(var n=null,i=0;i<this.carouselContainers.length;i++)if(this.carouselContainers[i].getViewportMaskElement()===t){n=this.carouselContainers[i];break}if(n||(n=new c.apv.CarouselContainer(t),this.carouselContainers.push(n)),n.isCarouselBlocking())return!0}}return!1}function i(e,t){var n=Math.pow(e.top-t.top,2),i=Math.pow(e.left-t.left,2);return Math.sqrt(i+n)}function r(e,t){for(var n,r,o=ge.isPlacementsDebugEnabled(),s=0;r=t[s];s++)if(e.getKey()!==r.getKey()&&r.getState()!==S.APVStates.Blocked&&r.getState()!==S.APVStates.Disabled&&r.getState()!==S.APVStates.New&&(n=i(e.getPosition(),r.getPosition()),n<r.getBlockingDistance())){if(o){var l=r.getVideoData().getId(),c=r.getVideoData().getArticleUrl(),d=e.getVideoData().getArticleUrl();u.log("BlockingD: ID: "+l+" with URL: "+c+" is blocking "+d)}var p=e.getState()===S.APVStates.New?S.APVStates.Blocked:S.APVStates.Disabled,h=e.getElementToReplace();return a.indexOf(h)===-1&&a.push(h),p}return S.APVStates.Active}c.services=c.services||{},c.services.BlockingDistance=c.services.BlockingDistance||{},c.services.BlockingDistance.BlockingDistanceService=e;var o=null,a=[];e.prototype.calculate=function(e,i){i=i||[];var s=e.sort(t),l=i.concat(e).sort(t);s.forEach(function(e){var t;if(e.getState()===S.APVStates.New){if(a.indexOf(e.getElementToReplace())>-1)return void e.setState(S.APVStates.Blocked);t=n(e)?S.APVStates.Blocked:e.getVideoData().isForcePlacement()?S.APVStates.Active:r(e,l),e.getState()!==t&&e.setState(t)}}.bind(this)),o.draw(i.concat(e))}}(),function(){function e(){this.state=t.SCROLLED}var t={INIT:0,NOT_SCROLLED:1,SCROLLED:2},n=function(n){this.viewportMaskElement=n,this.mutationObserver=new MutationObserver(e.bind(this)),this.mutationObserver.observe(this.viewportMaskElement,{attributes:!0}),this.state=t.INIT};n.prototype.isCarouselBlocking=function(){return this.state===t.SCROLLED},n.prototype.getViewportMaskElement=function(){return this.viewportMaskElement},c.apv=c.apv||{},c.apv.CarouselContainer=n}(),function(){function e(e){return{create:function(){var n=e.isPlacementsDebugEnabled()&&!u.isProdEnv();return{draw:n?t():function(){}}}}}function t(){function e(e,t){var n=t.getElementToReplace();switch(e){case S.APVStates.Active:n.style.border="0 solid black",n.style.boxSizing="border-box",n.style.opacity=1,u.log("BlockingD: "+t.getVideoData().getArticleUrl()+" is ACTIVE");break;case S.APVStates.Blocked:case S.APVStates.Disabled:case S.APVStates.Disposed:n.style.border="13px solid black",n.style.boxSizing="border-box",n.style.opacity=.2,t.getDebug().style.opacity=0,u.log("BlockingD: "+t.getVideoData().getArticleUrl()+" is BLOCKED")}}function t(e,t){var n=e.getPosition(),i=n.left,o=n.top,a=2*e.getBlockingDistance(),s=e.getVideoData().isForcePlacement(),l="rgba(255, 0, 0, 0.05)",c="rgba(255, 215, 0, 0.3);",d=s?c:l,p=r(o,i,a,d);t.appendChild(p),u.log("Top: "+o+", Left: "+i)}function n(n){if(!n.getDebug()){var i=document.createElement("div");o.insertBefore(i,o.childNodes[0]),n.setDebug(i)}t(n,n.getDebug());var r=n.getState();e(r,n)}function i(e){e.forEach(function(e){n(e)})}function r(e,t,n,i){var r=document.createElement("div");return r.className="minPoint",r.style.position="absolute",r.style.width=n+"px",r.style.height=n+"px",r.style.top=e+"px",r.style.left=t+"px",r.style.zIndex=1e7,r.style.backgroundColor=i,r.style.transform="translate(-50%,-50%)",r.style.border="dotted green",r.style.borderRadius="50%",r.style.display="flex",r.style.alignItems="center",r.style.alignContent="center",r.style.justifyContent="center",r.style.textShadow="0 0 10px white",r.style.fontSize="40px",r.style.pointerEvents="none",r.textContent="radius: "+n,r}var o=document.body;return i}c.services=c.services||{},c.services.BlockingDistance=c.services.BlockingDistance||{},c.services.BlockingDistance.DocumentRadiusPainterFactory=e}(),function(){function e(){}c.services=c.services||{},c.services.BlockingDistance=c.services.BlockingDistance||{},c.services.BlockingDistance.NotActivatedBlockingDistance=e,e.prototype.calculate=function(e){e.forEach(function(e){e.setState(S.APVStates.Active)})}}(),function(){function e(e,a,s,l,c){t=e,n=a,i=s,r=l,o=c,this._placeholderList={}}var t=null,n=null,i=null,r=null,o=null;c.services=c.services||{},c.services.inArticlePlacers=c.services.inArticlePlacers||{},c.services.inArticlePlacers.Base=e,c.services.inArticlePlacers.Placer=e,e.prototype.createInArticleApvWrapper=function(e){if(e){o.add(e),e.getVideoData().setUsedInArticle();var t=new c.apv.APVInArticleWrapper(e);t.start(),u.log("APV IN ARTICLE Wrapper Created. VideoId: "+e.getVideoData().getId()+', selector: "'+e.getName()+'"')}},e.prototype.getName=function(){return"InArticle"},e.prototype.init=function(){this.startAPVFactory(),this.listenToNewUrls(),_.addEventListener(S.Events.PLAYER_FOUND,this.newPlayerFoundHandler.bind(this)),_.addEventListener(S.Events.PLAYER_PLACEHOLDER_FOUND,this.newPlaceholderFoundHandler.bind(this)),_.addEventListener(S.Events.VIDEOS_UPDATE,this.checkPlaceholderQueue.bind(this)),_.addEventListener(S.Events.VIDEOS_UPDATE,this.startAPVFactory.bind(this))},e.prototype.checkPlaceholderQueue=function(){for(var e in this._placeholderList){var t=this._placeholderList[e];t&&this.validatePlaceHolderData(t)&&(this.newPlaceholderFound(t),this._placeholderList[e]=null)}},e.prototype.startAPVFactory=function(){var e=this.getPlayersOnPage()||[];e instanceof NodeList&&(e=Array.prototype.slice.call(e));var t=Object.keys(e||{});if(0===t.length)return u.log("InArticlePlacer: no players were found on this page"),void this.listenToNewPlayerEvent();for(var n=0;n<t.length;n++)this.createInArticleByPlayer(e[t[n]])},e.prototype.createInArticleByPlayer=function(e){var t=this.collectApvWrapperData(e);this.createInArticleApvWrapper(t)},e.prototype.listenToNewUrls=function(){},e.prototype.newPlayerFoundHandler=function(e){},e.prototype.newPlaceholderFoundHandler=function(e){this.validatePlaceHolderData(e.data)&&this.newPlaceholderFound(e.data)},e.prototype.validatePlaceHolderData=function(e){var t=Ee.getVideoDataByVideoIdAndUrl(e.videoId,e.url);return t?(e.videoData=t,!0):(this._placeholderList[e.id]=e,!1)},e.prototype.newPlaceholderFound=function(e){u.logWarning("Player placeholder found, need to override newPlaceholderFoundHandler.")},e.prototype.collectApvWrapperData=function(e){if(this.shouldPlayAPV(e)){var t={};t.player=e;var n=this.getVideoData(e);if(n&&n.hasAPV()&&!n.getUsedInArticle()){t.videoData=n;var i=this.getElementToReplace(t);return i?(t.elementToReplace=i,this.createApvData(t)):void 0}}},e.prototype.createApvData=function(e){var t=this.getContainerElement(e.player),n=new ie({videoData:e.videoData,elmToReplace:e.elementToReplace,containerElement:t,product:S.Emitter.PRODUCT_IN_ARTICLE,charmer:ge.getInArticlePlacerCharmer()});return n.setName(this.getName()),this.getManualClick(e.player)&&n.setManualClick(this.getManualClick(e.player)),this.addArgsToApvData(n),n.setPlayerInstance(e.player),n.setInArticleType(this.getInArticleType(e.player)),n},e.prototype.addArgsToApvData=function(){},e.prototype.listenToNewPlayerEvent=function(){},e.prototype.getPlayersOnPage=function(){throw new Error("Have to implement method that returns all players' instances")},e.prototype.getVideoData=function(){throw new Error("getVideoData is not implemented")},e.prototype.getElementToReplace=function(){throw new Error("getElementToReplace is not implemented")},e.prototype.getInArticleType=function(){return""},e.prototype.shouldPlayAPV=function(e){return!0},e.prototype.getManualClick=function(){return null},e.prototype.getContainerElement=function(e){return null}}(),function(){function e(i,r,o,a,s){t=i,n=a,e.__superCtor__.call(this,i,r,o,a,s)}var t=null,n=null;u["extends"](e,c.services.inArticlePlacers.Base),c.services.inArticlePlacers.Placer=e,e.prototype.init=function(){n.isMobile()&&e.__super__.init.call(this)},e.prototype.hasSufficiantDataToContinue=function(){return"undefined"!=typeof EdgePlayer&&!!(EdgePlayer.getPlayers()&&EdgePlayer.getPlayers()[0]&&EdgePlayer.getPlayers()[0].ready)},e.prototype.listenToNewPlayerEvent=function(){var e=this,t=setInterval(function(){e.hasSufficiantDataToContinue()&&(clearInterval(t),e.startAPVFactory())},100)},e.prototype.getPlayersOnPage=function(){if(this.hasSufficiantDataToContinue())return EdgePlayer.getPlayers()},e.prototype.getVideoData=function(e){var t=e.playlistModel.currentItem.rss.guid,n=u.urls.getCurrentStructuredUrlWithoutOrigin();return Ee.getVideoDataByVideoIdAndUrl(t,n)},e.prototype.shouldPlayAPV=function(e){return!e.state},e.prototype.getElementToReplace=function(e){return e.player.$el[0]},e.prototype.getManualClick=function(e){return e.$el[0]}}(),function(){function e(){var e=c.apv.domAdapter;return fe.isTestGroup()&&ge.isOldTestMode()?new e.TestGroup:c.apv.domAdapter.pubDomAdapter?new c.apv.domAdapter.pubDomAdapter:new c.apv.domAdapter.Base}function t(e){return ue.isUserAgentFacebook()?new c.apv.players.ApvGifPlayer:!ue.isMobile()||ge.shouldEnableCharmer()&&e?new c.apv.players.ApvVideoPlayer:new c.apv.players.ApvGifPlayer}function n(e){return fe.isTestGroup()?new c.apv.playmodes.TestGroup:ue.isMobile()?i(e):r()}function i(e){var t=c.apv.playmodes,n=ue.isSafari(),i=ue.isChrome()&&ue.isAndroid();return ge.shouldEnableCharmer()&&e.getIsCharmerActive()&&!ue.isUserAgentFacebook()?n?new t.iOSCharmerViewport:i?new t.AndroidCharmerViewport:void 0:new t.MobileGif}function r(){var e=c.apv.playmodes;return new e.Viewport}function o(e){this.apvData=e,this.elementToReplace=e.getElementToReplace(),this.domAdapter=null,this.apvPlayer=null,this.minuteLogo=null,this.playmode=null,a=Ce,this._initElements()}var a;c.apv=c.apv||{},c.apv.APVWrapper=o,o.prototype.getId=function(){return this.apvData.getKey()},o.prototype.getDomAdapter=function(){return this.domAdapter},o.prototype._addDomAdapterEvents=function(){a.register(this)},o.prototype._initElements=function(){return this.apvPlayer=t(this.apvData.getIsCharmerActive()),this.apvPlayer.init(this.apvData),this.apvData.setApvPlayer(this.apvPlayer),this.minuteLogo=new c.apv.logos.LogoElmBase,this.minuteLogo.init(S.Emitter.PRODUCT_APV),this.apvData.setMinuteLogo(this.minuteLogo),this.domAdapter=e(),this.domAdapter?(this._addDomAdapterEvents(),this.apvData.setDomAdapter(this.domAdapter),this.domAdapter.init(this.apvData),this.playmode=n(this.apvData),void this.playmode.setDomAdapter(this.apvData)):(u.log("No DomAdapter found."),null)},o.prototype.start=function(){this.playmode.start()},o.prototype.setState=function(e){this.domAdapter.setState(e)}}(),function(){function e(){return fe.isTestGroup()&&ge.isOldTestMode()?(r(),new c.apv.domAdapter.InArticleTestGroup):new c.apv.inArticleDomAdapter}function t(e){return ue.isUserAgentFacebook()?new c.apv.players.ApvGifPlayer:!ue.isMobile()||ge.shouldEnableCharmer()&&e?new c.apv.players.ApvVideoPlayer:new c.apv.players.ApvGifPlayer}function n(){return fe.isTestGroup()?new c.apv.playmodes.TestGroup:ue.isMobile()?i():o()}function i(){var e=c.apv.playmodes,t=ue.isSafari(),n=ue.isChrome()&&ue.isAndroid();return!ge.shouldEnableCharmer()||ue.isUserAgentFacebook()?new e.InArticleMobile:t?new e.iOSCharmerInArticle:n?new e.AndroidCharmerInArticle:void 0}function o(){var e=c.apv.playmodes;return new e.Viewport}function a(){var e=c.apv.logos;return new e.LogoElmBase}function s(e){s.__superCtor__.call(this,e)}var l=c.utils.ApvElementUtils;u["extends"](s,c.apv.APVWrapper),c.apv=c.apv||{},c.apv.APVInArticleWrapper=s,s.prototype._initElements=function(){return this.apvPlayer=t(this.apvData.getIsCharmerActive()),this.apvPlayer.init(this.apvData),this.apvData.setApvPlayer(this.apvPlayer),this.minuteLogo=a(),this.minuteLogo.init(S.Emitter.PRODUCT_IN_ARTICLE),this.apvData.setMinuteLogo(this.minuteLogo),this.domAdapter=e(),this.domAdapter?(this._addDomAdapterEvents(),this.domAdapter.init(this.apvData),this.apvData.setDomAdapter(this.domAdapter),this.playmode=n(),this.playmode.setDomAdapter(this.apvData),void l.setElementAsReplaced(this.elementToReplace)):(u.log("No DomAdapter found."),null)}}(),function(){function t(){var e=c.services.VideoGenerator;return e.pubApvData?e.pubApvData:document.querySelectorAll("["+S.integrationDataSet.ENABLE+"]").length>0&&!r.shouldOverridePlacements()?e.Integrated:e.Relative}function n(e){for(var t=u.cloneArray(e.getContainerElement().querySelectorAll("img,div[style*='background-image']")||[]),n=0;n<t.length;n++){var i=t[n];c.utils.ApvElementUtils.setElementAsReplaced(i)}c.utils.ApvElementUtils.setElementAsReplaced(e.getElementToReplace())}function i(e,n,i){r=e,o=n;var s=t(),l=this;a=new s(e,n,i),a.addEventListener(S.Events.NEW_VIDEO_DATE,function(e){l.processApvDataList(e.data)}),this.blockingDistanceService=Ve.create(r),this._apvWrapperNotCreatedHash={},this._lazyWatcherHash={},this._numOfFoundApvs=0,this._htmlReport=null,this._firstRun=!0,this._apvsOnPage=0,this.apvDataList=[],this.findReplaceableElementsAndPlaceVideos(),this.startEagerInterval(),this.setLoadMoreObserver(),this.setFullPageAjaxChangeObserver(),_.addEventListener(S.Events.VIDEOS_UPDATE,this.findReplaceableElementsAndPlaceVideos.bind(this,!1)),_.addEventListener(S.Events.FORCE_FIND_ELMS,this.findReplaceableElementsAndPlaceVideos.bind(this,!0)),_.addEventListener(S.Events.DomWindow.URL_CHANGE,this.handleUrlChange.bind(this)),_.addEventListener(S.Events.APV_DISPOSED,this.handleApvDisposed.bind(this))}c.services=c.services||{};var r=null,o=null,a=null;c.services.PlacementService=i,i.prototype.startEagerInterval=function(){var e=this,t=r.getEagerApvCount(),n=r.getEagerApvInterval();this.eagerInterval=setInterval(function(){return 0===t||e._numOfFoundApvs>0?(clearInterval(e.eagerInterval),void e.sendFirstApvEvent()):(t--,void e.findReplaceableElementsAndPlaceVideos())},n)},i.prototype.setLoadMoreObserver=function(){var e=r.getLoadMoreObservers();if(0!==e.length){var t=e.join(),n=document.querySelectorAll(t);n.length>10&&u.log("Load More Observer: more than 10 results are caught, refine the 'loadmoreObserver' config");for(var i=new c.utils.Debounce(200,this.handleLoadMoreElements,this),o=0;o<n.length;o++){var a=new MutationObserver(function(){i.start()});a.observe(n[o],{childList:!0})}}},i.prototype.handleLoadMoreElements=function(){_.dispatchEvent(S.Events.LOAD_MORE_FOUND),this.findReplaceableElementsAndPlaceVideos()},i.prototype.setFullPageAjaxChangeObserver=function(){var e=r.getFullPageAjaxChangeObserver();if(0!=e.length){var t=e.join(),n=document.querySelectorAll(t);n.length>10&&u.log("Full page Observers: more than 10 results are caught, refine the 'loadmoreObserver' config");for(var i=new c.utils.Debounce(500,this.handleUrlChange,this),o=0;o<n.length;o++){var a=new MutationObserver(function(){i.start()});a.observe(n[o],{childList:!0})}}},i.prototype.handleUrlChange=function(){this.findReplaceableElementsAndPlaceVideos()},i.prototype.handleApvDisposed=function(){this.findReplaceableElementsAndPlaceVideos()},i.prototype.findReplaceableElementsAndPlaceVideos=function(e){"undefined"==typeof e&&(e=!1);var t=a.getNewApvData(e);this.processApvDataList(t)},i.prototype.processApvDataList=function(e){if(e){var t=this;e&&(this.blockingDistanceService.calculate(e,this.apvDataList),e.forEach(function(e){t._lazyWatcherHash[e.getKey()]===e||t._apvWrapperNotCreatedHash[e.getKey()]||e.hasDisposed()||e.getState()===S.APVStates.Blocked||e.getState()===S.APVStates.Disabled||(e.getIsLazy()?t.createLazyWatcher(e):t.createApvWrapper(e),e.onDisposed().add(function(e){var n=e.getKey();t._lazyWatcherHash[n]&&delete t._lazyWatcherHash[n];var i=t.apvDataList.indexOf(e);i>-1&&t.apvDataList.splice(i,1)}))}),this.reportCounters())}},i.prototype.sendFirstApvEvent=function(){this._firstRun&&(this._firstRun=!1,_.dispatchEvent(S.Events.FIRST_APV_CREATED))},i.prototype.createLazyWatcher=function(e){var t=new c.apv.LazyLoadWatcher(e);e.setWatcher(t),t.addListener(this.handleLazyLoadWatcher,this),this._lazyWatcherHash[e.getKey()]=e,u.log("Lazy Load Watcher Created. VideoId: "+e.getVideoData().getId())},i.prototype.deleteLazyWatcher=function(e){var t=e.getWatcher();t.dispose(),e.removeWatcher(),this._lazyWatcherHash[e.getKey()]=null,delete this._lazyWatcherHash[e.getKey()]},i.prototype.createApvWrapper=function(e){if(this._apvsOnPage++>=r.getMaxApvsPerPage())return this._apvWrapperNotCreatedHash[e.getKey()]=!0,void u.log("Blocked APV creation. number of APVs on page exceeds limit. Max="+r.getMaxApvsPerPage());var t=new c.apv.APVWrapper(e);t.start(),n(e),u.log("APV Wrapper Created. VideoId: "+e.getVideoData().getId()),this.reportCounters()},i.prototype.handleLazyLoadWatcher=function(e){var t=e.getElementToReplace();u.isElementToReplaceValid(t)&&(this.createApvWrapper(e),this.deleteLazyWatcher(e))},i.prototype.reportCounters=function(){var t=e._report||{APVs:-1,Watchers:-1};e._report={APVs:document.querySelectorAll("[data-apv_replaced]").length,NotCreated:Object.keys(this._apvWrapperNotCreatedHash).length,Watchers:document.querySelectorAll("[data-apv_watched]").length},t.Watchers===e._report.Watchers&&t.NotCreated===e._report.NotCreated&&t.APVs===e._report.APVs||document.body&&document.body.appendChild&&(this._numOfFoundApvs=e._report.Watchers+e._report.NotCreated+e._report.APVs,u.log("Total APVs: "+e._report.APVs+", Total APVs not created: "+e._report.NotCreated+", Total APVs Watchers: "+e._report.Watchers),this._htmlReport||(this._htmlReport=document.createElement("div"),this._htmlReport.setAttribute("id","minReport"),this._htmlReport.style.display="none",document.body.appendChild(this._htmlReport)),this._htmlReport.setAttribute("data-apvs",e._report.APVs),this._htmlReport.setAttribute("data-apvs-not-created",e._report.NotCreated),this._htmlReport.setAttribute("data-watchers",e._report.Watchers),this._htmlReport.setAttribute("data-test",fe.isTestGroup()))}}();var re=function(e,t,n,i){function r(e){e.product==S.Emitter.PRODUCT_APV&&(i.isTestGroup()?s("click_test_apv",!1,e.url):s("click_minute_apv",!1,e.url))}function o(e){e.test_mode&&e.product==S.Emitter.PRODUCT_APV?s("impression_test_apv",!1,e.url):e.test_mode||e.product!=S.Emitter.PRODUCT_APV?e.test_mode&&e.product==S.Emitter.PRODUCT_IN_ARTICLE?s("impression_test_ia",!1,e.url):e.test_mode||e.product!=S.Emitter.PRODUCT_IN_ARTICLE||s("impression_minute_ia",!1,e.url):s("impression_minute_apv",!1,e.url)}function a(){i.isTestGroup()?s("first_video_view_test_ia",!1,Y.getLocationUrl()):s("first_video_view_minute_ia",!1,Y.getLocationUrl())}function s(i,r,o){t.getOptimizely().enable&&e.isUrlFilterValid(o,t.getOptimizely().filter)&&(r||("undefined"==typeof window.optimizely&&(window.optimizely=[]),window.optimizely.push(["trackEvent",i]),e.log("send optimizely: "+i)),e.sendLoggerReport("optimizely:user:"+n.getUserId()+":"+i))}return{sendClick:r,sendImpression:o,sendFirstVideoView:a}};u.debugParamsOverrides();var oe=null,ae=new U,se=new O,le=new R(se);if(oe=ne.create(u,le,window.location),oe.get(oe.CONSTS.DISABLE_VERSION)!==e.ver){var ce=new C,ue=new F(u,navigator,ce),de=new N(u,le),pe=new t(u,le,S.Urls),he=new Z(u,le,de),ve=new k(u,window,ae),fe=new J(u,window,de,ve,_,e.debugParams[b.FORCE_TEST]),ge=new B(e,u,fe),me=new j(ge,de),ye=new W(u,ge),Ee=new x(u,ge,ue,ye),_e=new K,Ae=new i(u,le,pe,_e),Pe=new G(u,ge),Se=new H(u,Pe,ue),Ie=new X(u,fe,ue,ge,pe,he),be=new te(u,pe,fe,de,ue,Ee,Ie),Te=new M(ge,ue,u,document,s),Le=new q(ue),we=new c.ApvDataManager,Ce=new c.analytics.ViewportAnalyticsService,De=new c.services.Simulation(ge),Ve=new c.services.BlockingDistance.Factory(ge),Oe=null,Re=new w,Ne=new re(u,ge,de,fe),ke=new a(ge),Me=new ee(u,fe,ue,le,I,de,Re,ge,ae),Ue=new o(fe);Ue.init(),e.events=Ue;if(u.checkPotentialScraperUrls(),d.utils=d.utils||{},de.init(),ke.isPreventConfigLoad())return void u.log("Minute disabled by build load throttle.");var Fe=function(){function t(){return u.globalTasks.listenToWindowErrors(),u.log(e.debugParams),e.debugParams[T.IS_PROCUTION]&&u.parseBool(e.debugParams[b.DISABLE_PROD])?void u.log("Minute Production disabled by debug tool"):(e.debug===!0?u.consoleNative.log("Welcome to Minute "+e.ver+" "+e.debugParams[T.SCRIPT_HOSTNAME]):u.consoleNative.log("Welcome to Minute"),u.log("Getting configuration for publisher: "+e._publisher),u.urls.setReferrerUrl(),!ae.isIframe()||m?i():l(),void _.addEventListener(S.Events.FIRST_APV_CREATED,C))}function n(){c.publisher&&c.publisher.runSegment&&c.publisher.runSegment()}function i(){switch(W+=1,v){case 1:Le.loadAll({onSuccess:a,onTimeout:r});break;case 2:Le.loadFirstArticle({onSuccess:a,onTimeout:r})}}function r(){E(),u.sendLoggerReport({message:"Configuration timeout",severity:c.reports.Levels.Warning}),W>U?(u.logWarning("Configuration timeout "+W+", NO more tryout."),u.sendLoggerReport({message:"Configuration not loaded",severity:c.reports.Levels.Error})):(u.log("Configuration timeout "+W+", trying again ..."),i())}function o(){n(),Ue.dispatchReadyEvent()}function a(t){if(u.log("Configuration loaded"),H=t,H.fallbackUsed=u.parseBool(H.fallbackUsed),ue.init(H.config),he.init(),ge.init(H.config,ue,p,e.debugParams[b.DISABLE_SCRIPT],e.debugParams[b.ENABLE_BLOCKING_DISTANCE]),me=new j(ge,de),u.isCurrentUrlExcluded(ge.getFilterExclude()))return void u.logWarning("This page was EXCLUDED by configuration");if(ke.isPreventVisual()&&ke.isPreventAnalytics())return void u.log("Minute disabled by configuration.");var n=ce.compareStr(e.ver,ge.getMinimumVer())<0;return n?void u.log("Minute blocked by minimum version"):(me.init(),me.isReferrerManiak()?void u.log("Minute blocked by maniak referrer"):(Re.init(),Ce.init(),be.init(Ce),z.init(),s(),d(),o(),pe.flushAll(),void _.dispatchEvent(S.Events.SYSTEM_RUNNING)))}function s(){ae.isIframe()&&!m||(fe.init(ge.getTestGroupSize(),!1),ve.broadcast(fe.isTestGroup(),fe.getSubTestGroup()),A(),P(),ve.listen())}function l(){fe.init(0,!0),Y.init(),ve.broadcast(),_.addEventListenerOnce(S.Events.TEST_MODE_READY,h),_.addEventListenerOnce(S.Events.WINDOW_SERVICE_READY,f),ve.listen()}function d(){ae.isIframe()&&(A(),P())}function h(){u.log("testGroupService.isTest = "+fe.isTestGroup()+" "+window.location.origin),g()}function f(){u.log("iFrame Top Window URL = "+Y.getLocationUrl()),u.debugParamsOverrides(!0),g()}function g(){fe.isReady()&&Y.isReady()&&(oe=ne.create(u,le,Y.getLocationUrl()),oe.get(oe.CONSTS.DISABLE_VERSION)!==e.ver&&i())}function y(){E(),G=setTimeout(function(){x=!0,u.log("Minute window load start after timeout."),P()}.bind(this),ge.getWindowLoadTimeout())}function E(){G&&clearTimeout(G),G=0}function A(){if(!q){if(q=!0,Ie.init(Ce),$.sendUrlReport(),u.hasVideoViewEnabled()&&(B=new c.videoViews.VideoViewManager),!ue.isBrowserSupported())return u.log("Minute is not supported "+e.ver+" "+e.debugParams[T.SCRIPT_HOSTNAME]),u.sendLoggerReport("ver="+e.ver+"&pid="+e._publisher+"&incompatibility=Browser"),E(),void D();if(!le.getLocalStorageInstance())return u.log("Local Storage and Session Storage are not supported. Disable Minute."),le.isLocalStorageEnable||le.isSessionStorageEnable||se.isCookiesEnable||u.sendLoggerReport("ver="+e.ver+"&pid="+e._publisher+"&incompatibility=NoStorage"),E(),void D();Me.start(),Ee.init(H),Ae.init(),Q.sendDelayedClicks(),Se.init(ge),u.validateScraperURL()}}function P(){0===ge.getWindowLoadTimeout()&&(x=!0),L()?I():ke.isPreventVisual()?D():w()===!1&&y()}function I(){V(),O()&&!ge.getScraperImmediateLoad()||D(),W=0,R(),N()}function L(){if(!q)return!1;if(!ge.isReady())return u.log("Configuration did not load yet."),!1;if(Ee.getVideosCount()||2===v||u.log("no videos found in configuration"),w()===!1)return u.log("Minute wait for window load."),!1;E();var t=u.parseBool(oe.get(oe.CONSTS.FORCE_ENABLE));return!(!t&&"true"!==e.debugParams[b.FORCE_ENABLE]&&ke.isPreventVisual())||(u.log("Minute APV disabled by configuration."),!1)}function w(){return"complete"===document.readyState||"true"===e.debugParams[b.BYPASS_WINDOW_LOAD]||x}function C(){_.removeEventListener(S.Events.FIRST_APV_CREATED,C),D()}function D(){F||(u.log("Scraper creation."),F=new c.scrap.ScraperService)}function V(){if(ke.isPreventVisual())return void u.log("in article is turned off in Visual Throttling");if(!ge.isInArticlePlacerActive())return void u.log("in article is turned off in configuration");if(!c.services.inArticlePlacers.Placer)return void u.log("No inArticlePlacers to create. disabled!");var e=new c.services.inArticlePlacers.Placer(u,ge,Pe,ue,we);e.init()}function O(){return u.isPlacementEnabled()?(De.markPlaces(),Oe=new c.services.PlacementService(ge,we,u),!0):(u.log("** Placement Disabled by configuration. See filter configuration. **"),!1)}function R(){2===v&&(W+=1,H.fallbackUsed||Le.loadVideosFallback({onSuccess:k,onTimeout:M}))}function N(){_.addEventListener(S.Events.DomWindow.URL_CHANGE,function(){Le.loadNextArticle({onSuccess:k,videosFallback:!1,pageUrl:Y.getLocationUrl()})})}function k(e){Ee.appendVideos(e),Q.sendDelayedClicks()}function M(){W>U?u.logWarning("All videos timeout "+W+", NO more tryout."):(u.log("All videos timeout "+W+", trying again ..."),R())}var U=3,F=null,B=null,W=0,x=!1,G=0,H=null,q=!1;
t()};new Fe;return e}}(_min||{});