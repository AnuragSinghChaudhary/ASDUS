/*! picturefill - v3.0.2 - 2016-02-12
 * https://scottjehl.github.io/picturefill/
 * Copyright (c) 2016 https://github.com/scottjehl/picturefill/blob/master/Authors.txt; Licensed MIT
 */
;
/*! Gecko-Picture - v1.0
 * https://github.com/scottjehl/picturefill/tree/3.0/src/plugins/gecko-picture
 * Firefox's early picture implementation (prior to FF41) is static and does
 * not react to viewport changes. This tiny module fixes this.
 */
(function(b){var a=navigator.userAgent;
if(b.HTMLPictureElement&&((/ecko/).test(a)&&a.match(/rv\:(\d+)/)&&RegExp.$1<45)){addEventListener("resize",(function(){var j;
var h=document.createElement("source");
var c=function(k){var n,l;
var m=k.parentNode;
if(m.nodeName.toUpperCase()==="PICTURE"){n=h.cloneNode();
m.insertBefore(n,m.firstElementChild);
setTimeout(function(){m.removeChild(n)
})
}else{if(!k._pfLastSize||k.offsetWidth>k._pfLastSize){k._pfLastSize=k.offsetWidth;
l=k.sizes;
k.sizes+=",100vw";
setTimeout(function(){k.sizes=l
})
}}};
var e=function(){var k;
var l=document.querySelectorAll("picture > img, img[srcset][sizes]");
for(k=0;
k<l.length;
k++){c(l[k])
}};
var f=function(){clearTimeout(j);
j=setTimeout(e,99)
};
var d=b.matchMedia&&matchMedia("(orientation: landscape)");
var g=function(){f();
if(d&&d.addListener){d.addListener(f)
}};
h.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
if(/^[c|i]|d$/.test(document.readyState||"")){g()
}else{document.addEventListener("DOMContentLoaded",g)
}return f
})())
}})(window);
/*! Picturefill - v3.0.2
 * http://scottjehl.github.io/picturefill
 * Copyright (c) 2015 https://github.com/scottjehl/picturefill/blob/master/Authors.txt;
 *  License: MIT
 */
(function(Q,g,w){g.createElement("picture");
var v,X,F,x;
var A={};
var L=false;
var ab=function(){};
var f=g.createElement("img");
var af=f.getAttribute;
var E=f.setAttribute;
var N=f.removeAttribute;
var j=g.documentElement;
var R={};
var n={algorithm:""};
var q="data-pfsrc";
var c=q+"set";
var U=navigator.userAgent;
var b=(/rident/).test(U)||((/ecko/).test(U)&&U.match(/rv\:(\d+)/)&&RegExp.$1>35);
var I="currentSrc";
var m=/\s+\+?\d+(e\d+)?w/;
var u=/(\([^)]+\))?\s*(.+)/;
var B=Q.picturefillCFG;
var y="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)";
var T="font-size:100%!important;";
var K=true;
var C={};
var ad={};
var k=Q.devicePixelRatio;
var ac={px:1,"in":96};
var h=g.createElement("a");
var Y=false;
var M=/^[ \t\n\r\u000c]+/,V=/^[, \t\n\r\u000c]+/,ag=/^[^ \t\n\r\u000c]+/,D=/[,]+$/,J=/^\d+$/,l=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/;
var O=function(ak,ah,aj,ai){if(ak.addEventListener){ak.addEventListener(ah,aj,ai||false)
}else{if(ak.attachEvent){ak.attachEvent("on"+ah,aj)
}}};
var e=function(ai){var ah={};
return function(aj){if(!(aj in ah)){ah[aj]=ai(aj)
}return ah[aj]
}
};
function r(ah){return(ah==="\u0020"||ah==="\u0009"||ah==="\u000A"||ah==="\u000C"||ah==="\u000D")
}var p=(function(){var ah=/^([\d\.]+)(em|vw|px)$/;
var ai=function(){var am=arguments,al=0,ak=am[0];
while(++al in am){ak=ak.replace(am[al],am[++al])
}return ak
};
var aj=e(function(ak){return"return "+ai((ak||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/ig,"")+";"
});
return function(al,am){var ak;
if(!(al in C)){C[al]=false;
if(am&&(ak=al.match(ah))){C[al]=ak[1]*ac[ak[2]]
}else{try{C[al]=new Function("e",aj(al))(ac)
}catch(an){}}}return C[al]
}
})();
var W=function(ai,ah){if(ai.w){ai.cWidth=A.calcListLength(ah||"100vw");
ai.res=ai.w/ai.cWidth
}else{ai.res=ai.d
}return ai
};
var S=function(aj){if(!L){return
}var al,ai,ak;
var ah=aj||{};
if(ah.elements&&ah.elements.nodeType===1){if(ah.elements.nodeName.toUpperCase()==="IMG"){ah.elements=[ah.elements]
}else{ah.context=ah.elements;
ah.elements=null
}}al=ah.elements||A.qsa((ah.context||g),(ah.reevaluate||ah.reselect)?A.sel:A.selShort);
if((ak=al.length)){A.setupRun(ah);
Y=true;
for(ai=0;
ai<ak;
ai++){A.fillImg(al[ai],ah)
}A.teardownRun(ah)
}};
v=(Q.console&&console.warn)?function(ah){console.warn(ah)
}:ab;
if(!(I in f)){I="src"
}R["image/jpeg"]=true;
R["image/gif"]=true;
R["image/png"]=true;
function G(ah,aj){var ai=new Q.Image();
ai.onerror=function(){R[ah]=false;
S()
};
ai.onload=function(){R[ah]=ai.width===1;
S()
};
ai.src=aj;
return"pending"
}R["image/svg+xml"]=g.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1");
function o(){K=false;
k=Q.devicePixelRatio;
C={};
ad={};
A.DPR=k||1;
ac.width=Math.max(Q.innerWidth||0,j.clientWidth);
ac.height=Math.max(Q.innerHeight||0,j.clientHeight);
ac.vw=ac.width/100;
ac.vh=ac.height/100;
x=[ac.height,ac.width,k].join("-");
ac.em=A.getEmValue();
ac.rem=ac.em
}function z(ah,aj,al,ai){var an,ak,ao,am;
if(n.algorithm==="saveData"){if(ah>2.7){am=al+1
}else{ak=aj-al;
an=Math.pow(ah-0.6,1.5);
ao=ak*an;
if(ai){ao+=0.1*an
}am=ah+ao
}}else{am=(al>1)?Math.sqrt(ah*aj):ah
}return am>al
}function aa(ai){var ah;
var ak=A.getSet(ai);
var aj=false;
if(ak!=="pending"){aj=x;
if(ak){ah=A.setRes(ak);
A.applySetCandidate(ah,ai)
}}ai[A.ns].evaled=aj
}function H(ai,ah){return ai.res-ah.res
}function ae(ah,aj,ak){var ai;
if(!ak&&aj){ak=ah[A.ns].sets;
ak=ak&&ak[ak.length-1]
}ai=Z(aj,ak);
if(ai){aj=A.makeUrl(aj);
ah[A.ns].curSrc=aj;
ah[A.ns].curCan=ai;
if(!ai.res){W(ai,ai.set.sizes)
}}return ai
}function Z(ak,al){var ah,ai,aj;
if(ak&&al){aj=A.parseSet(al);
ak=A.makeUrl(ak);
for(ah=0;
ah<aj.length;
ah++){if(ak===A.makeUrl(aj[ah].url)){ai=aj[ah];
break
}}}return ai
}function d(am,al){var aj,ah,ak,an;
var ai=am.getElementsByTagName("source");
for(aj=0,ah=ai.length;
aj<ah;
aj++){ak=ai[aj];
ak[A.ns]=true;
an=ak.getAttribute("srcset");
if(an){al.push({srcset:an,media:ak.getAttribute("media"),type:ak.getAttribute("type"),sizes:ak.getAttribute("sizes")})
}}}function P(ap,aq){function au(ax){var aw,av=ax.exec(ap.substring(ao));
if(av){aw=av[0];
ao+=aw.length;
return aw
}}var aj=ap.length,ai,at,am,ah,al,ao=0,ak=[];
function ar(){var aC=false,aD,az,aw,av,aF={},ax,aE,aB,ay,aA;
for(av=0;
av<at.length;
av++){ax=at[av];
aE=ax[ax.length-1];
aB=ax.substring(0,ax.length-1);
ay=parseInt(aB,10);
aA=parseFloat(aB);
if(J.test(aB)&&(aE==="w")){if(aD||az){aC=true
}if(ay===0){aC=true
}else{aD=ay
}}else{if(l.test(aB)&&(aE==="x")){if(aD||az||aw){aC=true
}if(aA<0){aC=true
}else{az=aA
}}else{if(J.test(aB)&&(aE==="h")){if(aw||az){aC=true
}if(ay===0){aC=true
}else{aw=ay
}}else{aC=true
}}}}if(!aC){aF.url=ai;
if(aD){aF.w=aD
}if(az){aF.d=az
}if(aw){aF.h=aw
}if(!aw&&!az&&!aD){aF.d=1
}if(aF.d===1){aq.has1x=true
}aF.set=aq;
ak.push(aF)
}}function an(){au(M);
am="";
ah="in descriptor";
while(true){al=ap.charAt(ao);
if(ah==="in descriptor"){if(r(al)){if(am){at.push(am);
am="";
ah="after descriptor"
}}else{if(al===","){ao+=1;
if(am){at.push(am)
}ar();
return
}else{if(al==="\u0028"){am=am+al;
ah="in parens"
}else{if(al===""){if(am){at.push(am)
}ar();
return
}else{am=am+al
}}}}}else{if(ah==="in parens"){if(al===")"){am=am+al;
ah="in descriptor"
}else{if(al===""){at.push(am);
ar();
return
}else{am=am+al
}}}else{if(ah==="after descriptor"){if(r(al)){}else{if(al===""){ar();
return
}else{ah="in descriptor";
ao-=1
}}}}}ao+=1
}}while(true){au(V);
if(ao>=aj){return ak
}ai=au(ag);
at=[];
if(ai.slice(-1)===","){ai=ai.replace(D,"");
ar()
}else{an()
}}}function a(ao){var aj=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i;
var ai=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;
var al;
var ap;
var aq;
var ah;
var am;
var ar;
function an(ay){var aB;
var aA="";
var aw=[];
var au=[];
var at=0;
var az=0;
var aC=false;
function ax(){if(aA){aw.push(aA);
aA=""
}}function av(){if(aw[0]){au.push(aw);
aw=[]
}}while(true){aB=ay.charAt(az);
if(aB===""){ax();
av();
return au
}else{if(aC){if((aB==="*")&&(ay[az+1]==="/")){aC=false;
az+=2;
ax();
continue
}else{az+=1;
continue
}}else{if(r(aB)){if((ay.charAt(az-1)&&r(ay.charAt(az-1)))||!aA){az+=1;
continue
}else{if(at===0){ax();
az+=1;
continue
}else{aB=" "
}}}else{if(aB==="("){at+=1
}else{if(aB===")"){at-=1
}else{if(aB===","){ax();
av();
az+=1;
continue
}else{if((aB==="/")&&(ay.charAt(az+1)==="*")){aC=true;
az+=2;
continue
}}}}}}}aA=aA+aB;
az+=1
}}function ak(at){if(aj.test(at)&&(parseFloat(at)>=0)){return true
}if(ai.test(at)){return true
}if((at==="0")||(at==="-0")||(at==="+0")){return true
}return false
}ap=an(ao);
aq=ap.length;
for(al=0;
al<aq;
al++){ah=ap[al];
am=ah[ah.length-1];
if(ak(am)){ar=am;
ah.pop()
}else{continue
}if(ah.length===0){return ar
}ah=ah.join(" ");
if(!(A.matchesMedia(ah))){continue
}return ar
}return"100vw"
}A.ns=("pf"+new Date().getTime()).substr(0,9);
A.supSrcset="srcset" in f;
A.supSizes="sizes" in f;
A.supPicture=!!Q.HTMLPictureElement;
if(A.supSrcset&&A.supPicture&&!A.supSizes){(function(ah){f.srcset="data:,a";
ah.src="data:,a";
A.supSrcset=f.complete===ah.complete;
A.supPicture=A.supSrcset&&A.supPicture
})(g.createElement("img"))
}if(A.supSrcset&&!A.supSizes){(function(){var ai="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==";
var aj="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";
var ah=g.createElement("img");
var ak=function(){var al=ah.width;
if(al===2){A.supSizes=true
}F=A.supSrcset&&!A.supSizes;
L=true;
setTimeout(S)
};
ah.onload=ak;
ah.onerror=ak;
ah.setAttribute("sizes","9px");
ah.srcset=aj+" 1w,"+ai+" 9w";
ah.src=aj
})()
}else{L=true
}A.selShort="picture>img,img[srcset]";
A.sel=A.selShort;
A.cfg=n;
A.DPR=(k||1);
A.u=ac;
A.types=R;
A.setSize=ab;
A.makeUrl=e(function(ah){h.href=ah;
return h.href
});
A.qsa=function(ah,ai){return("querySelector" in ah)?ah.querySelectorAll(ai):[]
};
A.matchesMedia=function(){if(Q.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches){A.matchesMedia=function(ah){return !ah||(matchMedia(ah).matches)
}
}else{A.matchesMedia=A.mMQ
}return A.matchesMedia.apply(this,arguments)
};
A.mMQ=function(ah){return ah?p(ah):true
};
A.calcLength=function(ah){var ai=p(ah,true)||false;
if(ai<0){ai=false
}return ai
};
A.supportsType=function(ah){return(ah)?R[ah]:true
};
A.parseSize=e(function(ai){var ah=(ai||"").match(u);
return{media:ah&&ah[1],length:ah&&ah[2]}
});
A.parseSet=function(ah){if(!ah.cands){ah.cands=P(ah.srcset,ah)
}return ah.cands
};
A.getEmValue=function(){var ah;
if(!X&&(ah=g.body)){var ak=g.createElement("div"),ai=j.style.cssText,aj=ah.style.cssText;
ak.style.cssText=y;
j.style.cssText=T;
ah.style.cssText=T;
ah.appendChild(ak);
X=ak.offsetWidth;
ah.removeChild(ak);
X=parseFloat(X,10);
j.style.cssText=ai;
ah.style.cssText=aj
}return X||16
};
A.calcListLength=function(ai){if(!(ai in ad)||n.uT){var ah=A.calcLength(a(ai));
ad[ai]=!ah?ac.width:ah
}return ad[ai]
};
A.setRes=function(ak){var aj;
if(ak){aj=A.parseSet(ak);
for(var ai=0,ah=aj.length;
ai<ah;
ai++){W(aj[ai],ak.sizes)
}}return aj
};
A.setRes.res=W;
A.applySetCandidate=function(am,al){if(!am.length){return
}var au,ak,aj,ai,ap,aq,ao,an,at;
var ah=al[A.ns];
var ar=A.DPR;
aq=ah.curSrc||al[I];
ao=ah.curCan||ae(al,aq,am[0].set);
if(ao&&ao.set===am[0].set){at=(b&&!al.complete&&ao.res-0.1>ar);
if(!at){ao.cached=true;
if(ao.res>=ar){ap=ao
}}}if(!ap){am.sort(H);
ai=am.length;
ap=am[ai-1];
for(ak=0;
ak<ai;
ak++){au=am[ak];
if(au.res>=ar){aj=ak-1;
if(am[aj]&&(at||aq!==A.makeUrl(au.url))&&z(am[aj].res,au.res,ar,am[aj].cached)){ap=am[aj]
}else{ap=au
}break
}}}if(ap){an=A.makeUrl(ap.url);
ah.curSrc=an;
ah.curCan=ap;
if(an!==aq){A.setSrc(al,ap)
}A.setSize(al)
}};
A.setSrc=function(ah,ai){var aj;
ah.src=ai.url;
if(ai.set.type==="image/svg+xml"){aj=ah.style.width;
ah.style.width=(ah.offsetWidth+1)+"px";
if(ah.offsetWidth+1){ah.style.width=aj
}}};
A.getSet=function(ah){var aj,am,al;
var ai=false;
var ak=ah[A.ns].sets;
for(aj=0;
aj<ak.length&&!ai;
aj++){am=ak[aj];
if(!am.srcset||!A.matchesMedia(am.media)||!(al=A.supportsType(am.type))){continue
}if(al==="pending"){am=al
}ai=am;
break
}return ai
};
A.parseSets=function(al,an,ao){var ak,am,ai,ap;
var aj=an&&an.nodeName.toUpperCase()==="PICTURE";
var ah=al[A.ns];
if(ah.src===w||ao.src){ah.src=af.call(al,"src");
if(ah.src){E.call(al,q,ah.src)
}else{N.call(al,q)
}}if(ah.srcset===w||ao.srcset||!A.supSrcset||al.srcset){ak=af.call(al,"srcset");
ah.srcset=ak;
ap=true
}ah.sets=[];
if(aj){ah.pic=true;
d(an,ah.sets)
}if(ah.srcset){am={srcset:ah.srcset,sizes:af.call(al,"sizes")};
ah.sets.push(am);
ai=(F||ah.src)&&m.test(ah.srcset||"");
if(!ai&&ah.src&&!Z(ah.src,am)&&!am.has1x){am.srcset+=", "+ah.src;
am.cands.push({url:ah.src,d:1,set:am})
}}else{if(ah.src){ah.sets.push({srcset:ah.src,sizes:null})
}}ah.curCan=null;
ah.curSrc=w;
ah.supported=!(aj||(am&&!A.supSrcset)||(ai&&!A.supSizes));
if(ap&&A.supSrcset&&!ah.supported){if(ak){E.call(al,c,ak);
al.srcset=""
}else{N.call(al,c)
}}if(ah.supported&&!ah.srcset&&((!ah.src&&al.src)||al.src!==A.makeUrl(ah.src))){if(ah.src===null){al.removeAttribute("src")
}else{al.src=ah.src
}}ah.parsed=true
};
A.fillImg=function(aj,ai){var ak;
var ah=ai.reselect||ai.reevaluate;
if(!aj[A.ns]){aj[A.ns]={}
}ak=aj[A.ns];
if(!ah&&ak.evaled===x){return
}if(!ak.parsed||ai.reevaluate){A.parseSets(aj,aj.parentNode,ai)
}if(!ak.supported){aa(aj)
}else{ak.evaled=x
}};
A.setupRun=function(){if(!Y||K||(k!==Q.devicePixelRatio)){o()
}};
if(A.supPicture){S=ab;
A.fillImg=ab
}else{(function(){var aj;
var an=Q.attachEvent?/d$|^c/:/d$|^c|^i/;
var am=function(){var ao=g.readyState||"";
ah=setTimeout(am,ao==="loading"?200:999);
if(g.body){A.fillImgs();
aj=aj||an.test(ao);
if(aj){clearTimeout(ah)
}}};
var ah=setTimeout(am,g.body?9:99);
var ai=function(ap,at){var ar,aq;
var ao=function(){var au=(new Date())-aq;
if(au<at){ar=setTimeout(ao,at-au)
}else{ar=null;
ap()
}};
return function(){aq=new Date();
if(!ar){ar=setTimeout(ao,at)
}}
};
var ak=j.clientHeight;
var al=function(){K=Math.max(Q.innerWidth||0,j.clientWidth)!==ac.width||j.clientHeight!==ak;
ak=j.clientHeight;
if(K){A.fillImgs()
}};
O(Q,"resize",ai(al,99));
O(g,"readystatechange",am)
})()
}A.picturefill=S;
A.fillImgs=S;
A.teardownRun=ab;
S._=A;
Q.picturefillCFG={pf:A,push:function(ai){var ah=ai.shift();
if(typeof A[ah]==="function"){A[ah].apply(A,ai)
}else{n[ah]=ai[0];
if(Y){A.fillImgs({reselect:true})
}}}};
while(B&&B.length){Q.picturefillCFG.push(B.shift())
}Q.picturefill=S;
if(typeof module==="object"&&typeof module.exports==="object"){module.exports=S
}else{if(typeof define==="function"&&define.amd){define("picturefill",function(){return S
})
}}if(!A.supPicture){R["image/webp"]=G("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==")
}})(window,document);
/*!
 * Modernizr v2.8.3
 * www.modernizr.com
 *
 * Copyright (c) Faruk Ates, Paul Irish, Alex Sexton
 * Available under the BSD and MIT licenses: www.modernizr.com/license/
 */
;
window.Modernizr=(function(D,c,g){var M="2.8.3",z={},B=true,P=c.documentElement,a="modernizr",L=c.createElement(a),H=L.style,O=c.createElement("input"),F=":)",b={}.toString,k=" -webkit- -moz- -o- -ms- ".split(" "),h="Webkit Moz O ms",I=h.split(" "),N=h.toLowerCase().split(" "),K={svg:"http://www.w3.org/2000/svg"},m={},q={},f={},e=[],l=e.slice,v,o=function(Y,aa,S,Z){var R,X,U,V,Q=c.createElement("div"),W=c.body,T=W||c.createElement("body");
if(parseInt(S,10)){while(S--){U=c.createElement("div");
U.id=Z?Z[S]:a+(S+1);
Q.appendChild(U)
}}R=["&#173;",'<style id="s',a,'">',Y,"</style>"].join("");
Q.id=a;
(W?Q:T).innerHTML+=R;
T.appendChild(Q);
if(!W){T.style.background="";
T.style.overflow="hidden";
V=P.style.overflow;
P.style.overflow="hidden";
P.appendChild(T)
}X=aa(Q,Y);
if(!W){T.parentNode.removeChild(T);
P.style.overflow=V
}else{Q.parentNode.removeChild(Q)
}return !!X
},J=function(S){var R=D.matchMedia||D.msMatchMedia;
if(R){return R(S)&&R(S).matches||false
}var Q;
o("@media "+S+" { #"+a+" { position: absolute; } }",function(T){Q=(D.getComputedStyle?getComputedStyle(T,null):T.currentStyle)["position"]=="absolute"
});
return Q
},p=(function(){var R={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};
function Q(S,U){U=U||c.createElement(R[S]||"div");
S="on"+S;
var T=S in U;
if(!T){if(!U.setAttribute){U=c.createElement("div")
}if(U.setAttribute&&U.removeAttribute){U.setAttribute(S,"");
T=u(U[S],"function");
if(!u(U[S],"undefined")){U[S]=g
}U.removeAttribute(S)
}}U=null;
return T
}return Q
})(),j=({}).hasOwnProperty,A;
if(!u(j,"undefined")&&!u(j.call,"undefined")){A=function(Q,R){return j.call(Q,R)
}
}else{A=function(Q,R){return((R in Q)&&u(Q.constructor.prototype[R],"undefined"))
}
}if(!Function.prototype.bind){Function.prototype.bind=function d(S){var T=this;
if(typeof T!="function"){throw new TypeError()
}var Q=l.call(arguments,1),R=function(){if(this instanceof R){var W=function(){};
W.prototype=T.prototype;
var V=new W();
var U=T.apply(V,Q.concat(l.call(arguments)));
if(Object(U)===U){return U
}return V
}else{return T.apply(S,Q.concat(l.call(arguments)))
}};
return R
}
}function G(Q){H.cssText=Q
}function x(R,Q){return G(k.join(R+";")+(Q||""))
}function u(R,Q){return typeof R===Q
}function w(R,Q){return !!~(""+R).indexOf(Q)
}function C(S,Q){for(var R in S){var T=S[R];
if(!w(T,"-")&&H[T]!==g){return Q=="pfx"?T:true
}}return false
}function r(R,U,T){for(var Q in R){var S=U[R[Q]];
if(S!==g){if(T===false){return R[Q]
}if(u(S,"function")){return S.bind(T||U)
}return S
}}return false
}function n(U,Q,T){var R=U.charAt(0).toUpperCase()+U.slice(1),S=(U+" "+I.join(R+" ")+R).split(" ");
if(u(Q,"string")||u(Q,"undefined")){return C(S,Q)
}else{S=(U+" "+(N).join(R+" ")+R).split(" ");
return r(S,Q,T)
}}m.flexbox=function(){return n("flexWrap")
};
m.flexboxlegacy=function(){return n("boxDirection")
};
m.canvas=function(){var Q=c.createElement("canvas");
return !!(Q.getContext&&Q.getContext("2d"))
};
m.canvastext=function(){return !!(z.canvas&&u(c.createElement("canvas").getContext("2d").fillText,"function"))
};
m.webgl=function(){return !!D.WebGLRenderingContext
};
m.touch=function(){var Q;
if(("ontouchstart" in D)||D.DocumentTouch&&c instanceof DocumentTouch){Q=true
}else{o(["@media (",k.join("touch-enabled),("),a,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(R){Q=R.offsetTop===9
})
}return Q
};
m.geolocation=function(){return"geolocation" in navigator
};
m.postmessage=function(){return !!D.postMessage
};
m.websqldatabase=function(){return !!D.openDatabase
};
m.indexedDB=function(){return !!n("indexedDB",D)
};
m.hashchange=function(){return p("hashchange",D)&&(c.documentMode===g||c.documentMode>7)
};
m.history=function(){return !!(D.history&&history.pushState)
};
m.draganddrop=function(){var Q=c.createElement("div");
return("draggable" in Q)||("ondragstart" in Q&&"ondrop" in Q)
};
m.websockets=function(){return"WebSocket" in D||"MozWebSocket" in D
};
m.rgba=function(){G("background-color:rgba(150,255,150,.5)");
return w(H.backgroundColor,"rgba")
};
m.hsla=function(){G("background-color:hsla(120,40%,100%,.5)");
return w(H.backgroundColor,"rgba")||w(H.backgroundColor,"hsla")
};
m.multiplebgs=function(){G("background:url(https://),url(https://),red url(https://)");
return(/(url\s*\(.*?){3}/).test(H.background)
};
m.backgroundsize=function(){return n("backgroundSize")
};
m.borderimage=function(){return n("borderImage")
};
m.borderradius=function(){return n("borderRadius")
};
m.boxshadow=function(){return n("boxShadow")
};
m.textshadow=function(){return c.createElement("div").style.textShadow===""
};
m.opacity=function(){x("opacity:.55");
return(/^0.55$/).test(H.opacity)
};
m.cssanimations=function(){return n("animationName")
};
m.csscolumns=function(){return n("columnCount")
};
m.cssgradients=function(){var S="background-image:",R="gradient(linear,left top,right bottom,from(#9f9),to(white));",Q="linear-gradient(left top,#9f9, white);";
G((S+"-webkit- ".split(" ").join(R+S)+k.join(Q+S)).slice(0,-S.length));
return w(H.backgroundImage,"gradient")
};
m.cssreflections=function(){return n("boxReflect")
};
m.csstransforms=function(){return !!n("transform")
};
m.csstransforms3d=function(){var Q=!!n("perspective");
if(Q&&"webkitPerspective" in P.style){o("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(R,S){Q=R.offsetLeft===9&&R.offsetHeight===3
})
}return Q
};
m.csstransitions=function(){return n("transition")
};
m.fontface=function(){var Q;
o('@font-face {font-family:"font";src:url("https://")}',function(U,V){var T=c.getElementById("smodernizr"),R=T.sheet||T.styleSheet,S=R?(R.cssRules&&R.cssRules[0]?R.cssRules[0].cssText:R.cssText||""):"";
Q=/src/i.test(S)&&S.indexOf(V.split(" ")[0])===0
});
return Q
};
m.generatedcontent=function(){var Q;
o(["#",a,"{font:0/0 a}#",a,':after{content:"',F,'";visibility:hidden;font:3px/1 a}'].join(""),function(R){Q=R.offsetHeight>=3
});
return Q
};
m.video=function(){var R=c.createElement("video"),Q=false;
try{if(Q=!!R.canPlayType){Q=new Boolean(Q);
Q.ogg=R.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"");
Q.h264=R.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"");
Q.webm=R.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")
}}catch(S){}return Q
};
m.audio=function(){var R=c.createElement("audio"),Q=false;
try{if(Q=!!R.canPlayType){Q=new Boolean(Q);
Q.ogg=R.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"");
Q.mp3=R.canPlayType("audio/mpeg;").replace(/^no$/,"");
Q.wav=R.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"");
Q.m4a=(R.canPlayType("audio/x-m4a;")||R.canPlayType("audio/aac;")).replace(/^no$/,"")
}}catch(S){}return Q
};
m.localstorage=function(){try{localStorage.setItem(a,a);
localStorage.removeItem(a);
return true
}catch(Q){return false
}};
m.sessionstorage=function(){try{sessionStorage.setItem(a,a);
sessionStorage.removeItem(a);
return true
}catch(Q){return false
}};
m.webworkers=function(){return !!D.Worker
};
m.applicationcache=function(){return !!D.applicationCache
};
m.svg=function(){return !!c.createElementNS&&!!c.createElementNS(K.svg,"svg").createSVGRect
};
m.inlinesvg=function(){var Q=c.createElement("div");
Q.innerHTML="<svg/>";
return(Q.firstChild&&Q.firstChild.namespaceURI)==K.svg
};
m.smil=function(){return !!c.createElementNS&&/SVGAnimate/.test(b.call(c.createElementNS(K.svg,"animate")))
};
m.svgclippaths=function(){return !!c.createElementNS&&/SVGClipPath/.test(b.call(c.createElementNS(K.svg,"clipPath")))
};
function E(){z.input=(function(S){for(var R=0,Q=S.length;
R<Q;
R++){f[S[R]]=!!(S[R] in O)
}if(f.list){f.list=!!(c.createElement("datalist")&&D.HTMLDataListElement)
}return f
})("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));
z.inputtypes=(function(T){for(var S=0,R,V,U,Q=T.length;
S<Q;
S++){O.setAttribute("type",V=T[S]);
R=O.type!=="text";
if(R){O.value=F;
O.style.cssText="position:absolute;visibility:hidden;";
if(/^range$/.test(V)&&O.style.WebkitAppearance!==g){P.appendChild(O);
U=c.defaultView;
R=U.getComputedStyle&&U.getComputedStyle(O,null).WebkitAppearance!=="textfield"&&(O.offsetHeight!==0);
P.removeChild(O)
}else{if(/^(search|tel)$/.test(V)){}else{if(/^(url|email)$/.test(V)){R=O.checkValidity&&O.checkValidity()===false
}else{R=O.value!=F
}}}}q[T[S]]=!!R
}return q
})("search tel url email datetime date month week time datetime-local number range color".split(" "))
}for(var y in m){if(A(m,y)){v=y.toLowerCase();
z[v]=m[y]();
e.push((z[v]?"":"no-")+v)
}}z.input||E();
z.addTest=function(R,S){if(typeof R=="object"){for(var Q in R){if(A(R,Q)){z.addTest(Q,R[Q])
}}}else{R=R.toLowerCase();
if(z[R]!==g){return z
}S=typeof S=="function"?S():S;
if(typeof B!=="undefined"&&B){P.className+=" "+(S?"":"no-")+R
}z[R]=S
}return z
};
G("");
L=O=null;
(function(aa,ac){var W="3.7.0";
var T=aa.html5||{};
var X=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;
var S=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;
var ag;
var Y="_html5shiv";
var Q=0;
var ae={};
var U;
(function(){try{var aj=ac.createElement("a");
aj.innerHTML="<xyz></xyz>";
ag=("hidden" in aj);
U=aj.childNodes.length==1||(function(){(ac.createElement)("a");
var al=ac.createDocumentFragment();
return(typeof al.cloneNode=="undefined"||typeof al.createDocumentFragment=="undefined"||typeof al.createElement=="undefined")
}())
}catch(ak){ag=true;
U=true
}}());
function V(aj,al){var am=aj.createElement("p"),ak=aj.getElementsByTagName("head")[0]||aj.documentElement;
am.innerHTML="x<style>"+al+"</style>";
return ak.insertBefore(am.lastChild,ak.firstChild)
}function ab(){var aj=Z.elements;
return typeof aj=="string"?aj.split(" "):aj
}function af(aj){var ak=ae[aj[Y]];
if(!ak){ak={};
Q++;
aj[Y]=Q;
ae[Q]=ak
}return ak
}function ad(am,aj,al){if(!aj){aj=ac
}if(U){return aj.createElement(am)
}if(!al){al=af(aj)
}var ak;
if(al.cache[am]){ak=al.cache[am].cloneNode()
}else{if(S.test(am)){ak=(al.cache[am]=al.createElem(am)).cloneNode()
}else{ak=al.createElem(am)
}}return ak.canHaveChildren&&!X.test(am)&&!ak.tagUrn?al.frag.appendChild(ak):ak
}function ah(al,an){if(!al){al=ac
}if(U){return al.createDocumentFragment()
}an=an||af(al);
var ao=an.frag.cloneNode(),am=0,ak=ab(),aj=ak.length;
for(;
am<aj;
am++){ao.createElement(ak[am])
}return ao
}function ai(aj,ak){if(!ak.cache){ak.cache={};
ak.createElem=aj.createElement;
ak.createFrag=aj.createDocumentFragment;
ak.frag=ak.createFrag()
}aj.createElement=function(al){if(!Z.shivMethods){return ak.createElem(al)
}return ad(al,aj,ak)
};
aj.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+ab().join().replace(/[\w\-]+/g,function(al){ak.createElem(al);
ak.frag.createElement(al);
return'c("'+al+'")'
})+");return n}")(Z,ak.frag)
}function R(aj){if(!aj){aj=ac
}var ak=af(aj);
if(Z.shivCSS&&!ag&&!ak.hasCSS){ak.hasCSS=!!V(aj,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")
}if(!U){ai(aj,ak)
}return aj
}var Z={elements:T.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:W,shivCSS:(T.shivCSS!==false),supportsUnknownElements:U,shivMethods:(T.shivMethods!==false),type:"default",shivDocument:R,createElement:ad,createDocumentFragment:ah};
aa.html5=Z;
R(ac)
}(this,c));
z._version=M;
z._prefixes=k;
z._domPrefixes=N;
z._cssomPrefixes=I;
z.mq=J;
z.hasEvent=p;
z.testProp=function(Q){return C([Q])
};
z.testAllProps=n;
z.testStyles=o;
z.prefixed=function(S,R,Q){if(!R){return n(S,"pfx")
}else{return n(S,R,Q)
}};
P.className=P.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(B?" js "+e.join(" "):"");
return z
})(this,this.document);
/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */
(function(b,a){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=b.document?a(b,true):function(c){if(!c.document){throw new Error("jQuery requires a window with a document")
}return a(c)
}
}else{a(b)
}}(typeof window!=="undefined"?window:this,function(window,noGlobal){var arr=[];
var slice=arr.slice;
var concat=arr.concat;
var push=arr.push;
var indexOf=arr.indexOf;
var class2type={};
var toString=class2type.toString;
var hasOwn=class2type.hasOwnProperty;
var support={};
var document=window.document,version="2.1.4",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)
},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()
};
jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)
},get:function(num){return num!=null?(num<0?this[num+this.length]:this[num]):slice.call(this)
},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);
ret.prevObject=this;
ret.context=this.context;
return ret
},each:function(callback,args){return jQuery.each(this,callback,args)
},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)
}))
},slice:function(){return this.pushStack(slice.apply(this,arguments))
},first:function(){return this.eq(0)
},last:function(){return this.eq(-1)
},eq:function(i){var len=this.length,j=+i+(i<0?len:0);
return this.pushStack(j>=0&&j<len?[this[j]]:[])
},end:function(){return this.prevObject||this.constructor(null)
},push:push,sort:arr.sort,splice:arr.splice};
jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;
if(typeof target==="boolean"){deep=target;
target=arguments[i]||{};
i++
}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}
}if(i===length){target=this;
i--
}for(;
i<length;
i++){if((options=arguments[i])!=null){for(name in options){src=target[name];
copy=options[name];
if(target===copy){continue
}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;
clone=src&&jQuery.isArray(src)?src:[]
}else{clone=src&&jQuery.isPlainObject(src)?src:{}
}target[name]=jQuery.extend(deep,clone,copy)
}else{if(copy!==undefined){target[name]=copy
}}}}}return target
};
jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg)
},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"
},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window
},isNumeric:function(obj){return !jQuery.isArray(obj)&&(obj-parseFloat(obj)+1)>=0
},isPlainObject:function(obj){if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false
}if(obj.constructor&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false
}return true
},isEmptyObject:function(obj){var name;
for(name in obj){return false
}return true
},type:function(obj){if(obj==null){return obj+""
}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj
},globalEval:function(code){var script,indirect=eval;
code=jQuery.trim(code);
if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");
script.text=code;
document.head.appendChild(script).parentNode.removeChild(script)
}else{indirect(code)
}}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)
},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()
},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);
if(args){if(isArray){for(;
i<length;
i++){value=callback.apply(obj[i],args);
if(value===false){break
}}}else{for(i in obj){value=callback.apply(obj[i],args);
if(value===false){break
}}}}else{if(isArray){for(;
i<length;
i++){value=callback.call(obj[i],i,obj[i]);
if(value===false){break
}}}else{for(i in obj){value=callback.call(obj[i],i,obj[i]);
if(value===false){break
}}}}return obj
},trim:function(text){return text==null?"":(text+"").replace(rtrim,"")
},makeArray:function(arr,results){var ret=results||[];
if(arr!=null){if(isArraylike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)
}else{push.call(ret,arr)
}}return ret
},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)
},merge:function(first,second){var len=+second.length,j=0,i=first.length;
for(;
j<len;
j++){first[i++]=second[j]
}first.length=i;
return first
},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;
for(;
i<length;
i++){callbackInverse=!callback(elems[i],i);
if(callbackInverse!==callbackExpect){matches.push(elems[i])
}}return matches
},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];
if(isArray){for(;
i<length;
i++){value=callback(elems[i],i,arg);
if(value!=null){ret.push(value)
}}}else{for(i in elems){value=callback(elems[i],i,arg);
if(value!=null){ret.push(value)
}}}return concat.apply([],ret)
},guid:1,proxy:function(fn,context){var tmp,args,proxy;
if(typeof context==="string"){tmp=fn[context];
context=fn;
fn=tmp
}if(!jQuery.isFunction(fn)){return undefined
}args=slice.call(arguments,2);
proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))
};
proxy.guid=fn.guid=fn.guid||jQuery.guid++;
return proxy
},now:Date.now,support:support});
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()
});
function isArraylike(obj){var length="length" in obj&&obj.length,type=jQuery.type(obj);
if(type==="function"||jQuery.isWindow(obj)){return false
}if(obj.nodeType===1&&length){return true
}return type==="array"||length===0||typeof length==="number"&&length>0&&(length-1) in obj
}var Sizzle=
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
(function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date(),preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true
}return 0
},MAX_NEGATIVE=1<<31,hasOwn=({}).hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;
for(;
i<len;
i++){if(list[i]===elem){return i
}}return -1
},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;
return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)
},unloadHandler=function(){setDocument()
};
try{push.apply((arr=slice.call(preferredDoc.childNodes)),preferredDoc.childNodes);
arr[preferredDoc.childNodes.length].nodeType
}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))
}:function(target,els){var j=target.length,i=0;
while((target[j++]=els[i++])){}target.length=j-1
}}
}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;
if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context)
}context=context||document;
results=results||[];
nodeType=context.nodeType;
if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results
}if(!seed&&documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if((m=match[1])){if(nodeType===9){elem=context.getElementById(m);
if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);
return results
}}else{return results
}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);
return results
}}}else{if(match[2]){push.apply(results,context.getElementsByTagName(selector));
return results
}else{if((m=match[3])&&support.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));
return results
}}}}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){nid=old=expando;
newContext=context;
newSelector=nodeType!==1&&selector;
if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);
if((old=context.getAttribute("id"))){nid=old.replace(rescape,"\\$&")
}else{context.setAttribute("id",nid)
}nid="[id='"+nid+"'] ";
i=groups.length;
while(i--){groups[i]=nid+toSelector(groups[i])
}newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;
newSelector=groups.join(",")
}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));
return results
}catch(qsaError){}finally{if(!old){context.removeAttribute("id")
}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)
}function createCache(){var keys=[];
function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()]
}return(cache[key+" "]=value)
}return cache
}function markFunction(fn){fn[expando]=true;
return fn
}function assert(fn){var div=document.createElement("div");
try{return !!fn(div)
}catch(e){return false
}finally{if(div.parentNode){div.parentNode.removeChild(div)
}div=null
}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=attrs.length;
while(i--){Expr.attrHandle[arr[i]]=handler
}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);
if(diff){return diff
}if(cur){while((cur=cur.nextSibling)){if(cur===b){return -1
}}}return a?1:-1
}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();
return name==="input"&&elem.type===type
}
}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();
return(name==="input"||name==="button")&&elem.type===type
}
}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;
return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;
while(i--){if(seed[(j=matchIndexes[i])]){seed[j]=!(matches[j]=seed[j])
}}})
})
}function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context
}support=Sizzle.support={};
isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;
return documentElement?documentElement.nodeName!=="HTML":false
};
setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;
if(doc===document||doc.nodeType!==9||!doc.documentElement){return document
}document=doc;
docElem=doc.documentElement;
parent=doc.defaultView;
if(parent&&parent!==parent.top){if(parent.addEventListener){parent.addEventListener("unload",unloadHandler,false)
}else{if(parent.attachEvent){parent.attachEvent("onunload",unloadHandler)
}}}documentIsHTML=!isXML(doc);
support.attributes=assert(function(div){div.className="i";
return !div.getAttribute("className")
});
support.getElementsByTagName=assert(function(div){div.appendChild(doc.createComment(""));
return !div.getElementsByTagName("*").length
});
support.getElementsByClassName=rnative.test(doc.getElementsByClassName);
support.getById=assert(function(div){docElem.appendChild(div).id=expando;
return !doc.getElementsByName||!doc.getElementsByName(expando).length
});
if(support.getById){Expr.find.ID=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var m=context.getElementById(id);
return m&&m.parentNode?[m]:[]
}};
Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);
return function(elem){return elem.getAttribute("id")===attrId
}
}
}else{delete Expr.find.ID;
Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);
return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");
return node&&node.value===attrId
}
}
}Expr.find.TAG=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag)
}else{if(support.qsa){return context.querySelectorAll(tag)
}}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);
if(tag==="*"){while((elem=results[i++])){if(elem.nodeType===1){tmp.push(elem)
}}return tmp
}return results
};
Expr.find.CLASS=support.getElementsByClassName&&function(className,context){if(documentIsHTML){return context.getElementsByClassName(className)
}};
rbuggyMatches=[];
rbuggyQSA=[];
if((support.qsa=rnative.test(doc.querySelectorAll))){assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\f]' msallowcapture=''><option selected=''></option></select>";
if(div.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")")
}if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")
}if(!div.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=")
}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")
}if(!div.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]")
}});
assert(function(div){var input=doc.createElement("input");
input.setAttribute("type","hidden");
div.appendChild(input).setAttribute("name","D");
if(div.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=")
}if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")
}div.querySelectorAll("*,:x");
rbuggyQSA.push(",.*:")
})
}if((support.matchesSelector=rnative.test((matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)))){assert(function(div){support.disconnectedMatch=matches.call(div,"div");
matches.call(div,"[s!='']:x");
rbuggyMatches.push("!=",pseudos)
})
}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));
rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));
hasCompare=rnative.test(docElem.compareDocumentPosition);
contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;
return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))
}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true
}}}return false
};
sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;
return 0
}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;
if(compare){return compare
}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;
if(compare&1||(!support.sortDetached&&b.compareDocumentPosition(a)===compare)){if(a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return -1
}if(b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1
}return sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0
}return compare&4?-1:1
}:function(a,b){if(a===b){hasDuplicate=true;
return 0
}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];
if(!aup||!bup){return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?(indexOf(sortInput,a)-indexOf(sortInput,b)):0
}else{if(aup===bup){return siblingCheck(a,b)
}}cur=a;
while((cur=cur.parentNode)){ap.unshift(cur)
}cur=b;
while((cur=cur.parentNode)){bp.unshift(cur)
}while(ap[i]===bp[i]){i++
}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0
};
return doc
};
Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)
};
Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem)
}expr=expr.replace(rattributeQuotes,"='$1']");
if(support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);
if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret
}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0
};
Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context)
}return contains(context,elem)
};
Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem)
}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;
return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null
};
Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)
};
Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;
hasDuplicate=!support.detectDuplicates;
sortInput=!support.sortStable&&results.slice(0);
results.sort(sortOrder);
if(hasDuplicate){while((elem=results[i++])){if(elem===results[i]){j=duplicates.push(i)
}}while(j--){results.splice(duplicates[j],1)
}}sortInput=null;
return results
};
getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;
if(!nodeType){while((node=elem[i++])){ret+=getText(node)
}}else{if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent
}else{for(elem=elem.firstChild;
elem;
elem=elem.nextSibling){ret+=getText(elem)
}}}else{if(nodeType===3||nodeType===4){return elem.nodeValue
}}}return ret
};
Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);
match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);
if(match[2]==="~="){match[3]=" "+match[3]+" "
}return match.slice(0,4)
},CHILD:function(match){match[1]=match[1].toLowerCase();
if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0])
}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));
match[5]=+((match[7]+match[8])||match[3]==="odd")
}else{if(match[3]){Sizzle.error(match[0])
}}return match
},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];
if(matchExpr.CHILD.test(match[0])){return null
}if(match[3]){match[2]=match[4]||match[5]||""
}else{if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);
match[2]=unquoted.slice(0,excess)
}}return match.slice(0,3)
}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();
return nodeNameSelector==="*"?function(){return true
}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName
}
},CLASS:function(className){var pattern=classCache[className+" "];
return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"")
})
},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);
if(result==null){return operator==="!="
}if(!operator){return true
}result+="";
return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false
}
},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";
return first===1&&last===0?function(elem){return !!elem.parentNode
}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;
if(parent){if(simple){while(dir){node=elem;
while((node=node[dir])){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false
}}start=dir=type==="only"&&!start&&"nextSibling"
}return true
}start=[forward?parent.firstChild:parent.lastChild];
if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});
cache=outerCache[type]||[];
nodeIndex=cache[0]===dirruns&&cache[1];
diff=cache[0]===dirruns&&cache[2];
node=nodeIndex&&parent.childNodes[nodeIndex];
while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if(node.nodeType===1&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];
break
}}}else{if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns){diff=cache[1]
}else{while((node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){(node[expando]||(node[expando]={}))[type]=[dirruns,diff]
}if(node===elem){break
}}}}}diff-=last;
return diff===first||(diff%first===0&&diff/first>=0)
}}
},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);
if(fn[expando]){return fn(argument)
}if(fn.length>1){args=[pseudo,pseudo,"",argument];
return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;
while(i--){idx=indexOf(seed,matched[i]);
seed[idx]=!(matches[idx]=matched[i])
}}):function(elem){return fn(elem,0,args)
}
}return fn
}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));
return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;
while(i--){if((elem=unmatched[i])){seed[i]=!(matches[i]=elem)
}}}):function(elem,context,xml){input[0]=elem;
matcher(input,null,xml,results);
input[0]=null;
return !results.pop()
}
}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0
}
}),contains:markFunction(function(text){text=text.replace(runescape,funescape);
return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1
}
}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang)
}lang=lang.replace(runescape,funescape).toLowerCase();
return function(elem){var elemLang;
do{if((elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))){elemLang=elemLang.toLowerCase();
return elemLang===lang||elemLang.indexOf(lang+"-")===0
}}while((elem=elem.parentNode)&&elem.nodeType===1);
return false
}
}),target:function(elem){var hash=window.location&&window.location.hash;
return hash&&hash.slice(1)===elem.id
},root:function(elem){return elem===docElem
},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)
},enabled:function(elem){return elem.disabled===false
},disabled:function(elem){return elem.disabled===true
},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();
return(nodeName==="input"&&!!elem.checked)||(nodeName==="option"&&!!elem.selected)
},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex
}return elem.selected===true
},empty:function(elem){for(elem=elem.firstChild;
elem;
elem=elem.nextSibling){if(elem.nodeType<6){return false
}}return true
},parent:function(elem){return !Expr.pseudos.empty(elem)
},header:function(elem){return rheader.test(elem.nodeName)
},input:function(elem){return rinputs.test(elem.nodeName)
},button:function(elem){var name=elem.nodeName.toLowerCase();
return name==="input"&&elem.type==="button"||name==="button"
},text:function(elem){var attr;
return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")
},first:createPositionalPseudo(function(){return[0]
}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]
}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]
}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;
for(;
i<length;
i+=2){matchIndexes.push(i)
}return matchIndexes
}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;
for(;
i<length;
i+=2){matchIndexes.push(i)
}return matchIndexes
}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;
for(;
--i>=0;
){matchIndexes.push(i)
}return matchIndexes
}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;
for(;
++i<length;
){matchIndexes.push(i)
}return matchIndexes
})}};
Expr.pseudos.nth=Expr.pseudos.eq;
for(i in {radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)
}for(i in {submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)
}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;
Expr.setFilters=new setFilters();
tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];
if(cached){return parseOnly?0:cached.slice(0)
}soFar=selector;
groups=[];
preFilters=Expr.preFilter;
while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar
}groups.push((tokens=[]))
}matched=false;
if((match=rcombinators.exec(soFar))){matched=match.shift();
tokens.push({value:matched,type:match[0].replace(rtrim," ")});
soFar=soFar.slice(matched.length)
}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();
tokens.push({value:matched,type:type,matches:match});
soFar=soFar.slice(matched.length)
}}if(!matched){break
}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)
};
function toSelector(tokens){var i=0,len=tokens.length,selector="";
for(;
i<len;
i++){selector+=tokens[i].value
}return selector
}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;
return combinator.first?function(elem,context,xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)
}}}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];
if(xml){while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true
}}}}else{while((elem=elem[dir])){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});
if((oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return(newCache[2]=oldCache[2])
}else{outerCache[dir]=newCache;
if((newCache[2]=matcher(elem,context,xml))){return true
}}}}}}
}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;
while(i--){if(!matchers[i](elem,context,xml)){return false
}}return true
}:matchers[0]
}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;
for(;
i<len;
i++){Sizzle(selector,contexts[i],results)
}return results
}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;
for(;
i<len;
i++){if((elem=unmatched[i])){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);
if(mapped){map.push(i)
}}}}return newUnmatched
}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)
}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)
}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;
if(matcher){matcher(matcherIn,matcherOut,context,xml)
}if(postFilter){temp=condense(matcherOut,postMap);
postFilter(temp,[],context,xml);
i=temp.length;
while(i--){if((elem=temp[i])){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)
}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];
i=matcherOut.length;
while(i--){if((elem=matcherOut[i])){temp.push((matcherIn[i]=elem))
}}postFinder(null,(matcherOut=[]),temp,xml)
}i=matcherOut.length;
while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)
}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);
if(postFinder){postFinder(null,results,matcherOut,xml)
}else{push.apply(results,matcherOut)
}}})
}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext
},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1
},implicitRelative,true),matchers=[function(elem,context,xml){var ret=(!leadingRelative&&(xml||context!==outermostContext))||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));
checkContext=null;
return ret
}];
for(;
i<len;
i++){if((matcher=Expr.relative[tokens[i].type])){matchers=[addCombinator(elementMatcher(matchers),matcher)]
}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);
if(matcher[expando]){j=++i;
for(;
j<len;
j++){if(Expr.relative[tokens[j].type]){break
}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens((tokens=tokens.slice(j))),j<len&&toSelector(tokens))
}matchers.push(matcher)
}}return elementMatcher(matchers)
}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=(dirruns+=contextBackup==null?1:Math.random()||0.1),len=elems.length;
if(outermost){outermostContext=context!==document&&context
}for(;
i!==len&&(elem=elems[i])!=null;
i++){if(byElement&&elem){j=0;
while((matcher=elementMatchers[j++])){if(matcher(elem,context,xml)){results.push(elem);
break
}}if(outermost){dirruns=dirrunsUnique
}}if(bySet){if((elem=!matcher&&elem)){matchedCount--
}if(seed){unmatched.push(elem)
}}}matchedCount+=i;
if(bySet&&i!==matchedCount){j=0;
while((matcher=setMatchers[j++])){matcher(unmatched,setMatched,context,xml)
}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)
}}}setMatched=condense(setMatched)
}push.apply(results,setMatched);
if(outermost&&!seed&&setMatched.length>0&&(matchedCount+setMatchers.length)>1){Sizzle.uniqueSort(results)
}}if(outermost){dirruns=dirrunsUnique;
outermostContext=contextBackup
}return unmatched
};
return bySet?markFunction(superMatcher):superMatcher
}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];
if(!cached){if(!match){match=tokenize(selector)
}i=match.length;
while(i--){cached=matcherFromTokens(match[i]);
if(cached[expando]){setMatchers.push(cached)
}else{elementMatchers.push(cached)
}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));
cached.selector=selector
}return cached
};
select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize((selector=compiled.selector||selector));
results=results||[];
if(match.length===1){tokens=match[0]=match[0].slice(0);
if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0];
if(!context){return results
}else{if(compiled){context=context.parentNode
}}selector=selector.slice(tokens.shift().value.length)
}i=matchExpr.needsContext.test(selector)?0:tokens.length;
while(i--){token=tokens[i];
if(Expr.relative[(type=token.type)]){break
}if((find=Expr.find[type])){if((seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){tokens.splice(i,1);
selector=seed.length&&toSelector(tokens);
if(!selector){push.apply(results,seed);
return results
}break
}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context);
return results
};
support.sortStable=expando.split("").sort(sortOrder).join("")===expando;
support.detectDuplicates=!!hasDuplicate;
setDocument();
support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1
});
if(!assert(function(div){div.innerHTML="<a href='#'></a>";
return div.firstChild.getAttribute("href")==="#"
})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)
}})
}if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";
div.firstChild.setAttribute("value","");
return div.firstChild.getAttribute("value")===""
})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue
}})
}if(!assert(function(div){return div.getAttribute("disabled")==null
})){addHandle(booleans,function(elem,name,isXML){var val;
if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null
}})
}return Sizzle
})(window);
jQuery.find=Sizzle;
jQuery.expr=Sizzle.selectors;
jQuery.expr[":"]=jQuery.expr.pseudos;
jQuery.unique=Sizzle.uniqueSort;
jQuery.text=Sizzle.getText;
jQuery.isXMLDoc=Sizzle.isXML;
jQuery.contains=Sizzle.contains;
var rneedsContext=jQuery.expr.match.needsContext;
var rsingleTag=(/^<(\w+)\s*\/?>(?:<\/\1>|)$/);
var risSimple=/^.[^:#\[\.,]*$/;
function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return !!qualifier.call(elem,i,elem)!==not
})
}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return(elem===qualifier)!==not
})
}if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)
}qualifier=jQuery.filter(qualifier,elements)
}return jQuery.grep(elements,function(elem){return(indexOf.call(qualifier,elem)>=0)!==not
})
}jQuery.filter=function(expr,elems,not){var elem=elems[0];
if(not){expr=":not("+expr+")"
}return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1
}))
};
jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;
if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;
i<len;
i++){if(jQuery.contains(self[i],this)){return true
}}}))
}for(i=0;
i<len;
i++){jQuery.find(selector,self[i],ret)
}ret=this.pushStack(len>1?jQuery.unique(ret):ret);
ret.selector=this.selector?this.selector+" "+selector:selector;
return ret
},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))
},not:function(selector){return this.pushStack(winnow(this,selector||[],true))
},is:function(selector){return !!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length
}});
var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;
if(!selector){return this
}if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]
}else{match=rquickExpr.exec(selector)
}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;
jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));
if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])
}else{this.attr(match,context[match])
}}}return this
}else{elem=document.getElementById(match[2]);
if(elem&&elem.parentNode){this.length=1;
this[0]=elem
}this.context=document;
this.selector=selector;
return this
}}else{if(!context||context.jquery){return(context||rootjQuery).find(selector)
}else{return this.constructor(context).find(selector)
}}}else{if(selector.nodeType){this.context=this[0]=selector;
this.length=1;
return this
}else{if(jQuery.isFunction(selector)){return typeof rootjQuery.ready!=="undefined"?rootjQuery.ready(selector):selector(jQuery)
}}}if(selector.selector!==undefined){this.selector=selector.selector;
this.context=selector.context
}return jQuery.makeArray(selector,this)
};
init.prototype=jQuery.fn;
rootjQuery=jQuery(document);
var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};
jQuery.extend({dir:function(elem,dir,until){var matched=[],truncate=until!==undefined;
while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break
}matched.push(elem)
}}return matched
},sibling:function(n,elem){var matched=[];
for(;
n;
n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)
}}return matched
}});
jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;
return this.filter(function(){var i=0;
for(;
i<l;
i++){if(jQuery.contains(this,targets[i])){return true
}}})
},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;
for(;
i<l;
i++){for(cur=this[i];
cur&&cur!==context;
cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);
break
}}}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)
},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1
}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])
}return indexOf.call(this,elem.jquery?elem[0]:elem)
},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))
},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))
}});
function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur
}jQuery.each({parent:function(elem){var parent=elem.parentNode;
return parent&&parent.nodeType!==11?parent:null
},parents:function(elem){return jQuery.dir(elem,"parentNode")
},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)
},next:function(elem){return sibling(elem,"nextSibling")
},prev:function(elem){return sibling(elem,"previousSibling")
},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")
},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")
},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)
},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)
},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)
},children:function(elem){return jQuery.sibling(elem.firstChild)
},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)
}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);
if(name.slice(-5)!=="Until"){selector=until
}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)
}if(this.length>1){if(!guaranteedUnique[name]){jQuery.unique(matched)
}if(rparentsprev.test(name)){matched.reverse()
}}return this.pushStack(matched)
}
});
var rnotwhite=(/\S+/g);
var optionsCache={};
function createOptions(options){var object=optionsCache[options]={};
jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true
});
return object
}jQuery.Callbacks=function(options){options=typeof options==="string"?(optionsCache[options]||createOptions(options)):jQuery.extend({},options);
var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;
fired=true;
firingIndex=firingStart||0;
firingStart=0;
firingLength=list.length;
firing=true;
for(;
list&&firingIndex<firingLength;
firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;
break
}}firing=false;
if(list){if(stack){if(stack.length){fire(stack.shift())
}}else{if(memory){list=[]
}else{self.disable()
}}}},self={add:function(){if(list){var start=list.length;
(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);
if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg)
}}else{if(arg&&arg.length&&type!=="string"){add(arg)
}}})
})(arguments);
if(firing){firingLength=list.length
}else{if(memory){firingStart=start;
fire(memory)
}}}return this
},remove:function(){if(list){jQuery.each(arguments,function(_,arg){var index;
while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);
if(firing){if(index<=firingLength){firingLength--
}if(index<=firingIndex){firingIndex--
}}}})
}return this
},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length)
},empty:function(){list=[];
firingLength=0;
return this
},disable:function(){list=stack=memory=undefined;
return this
},disabled:function(){return !list
},lock:function(){stack=undefined;
if(!memory){self.disable()
}return this
},locked:function(){return !stack
},fireWith:function(context,args){if(list&&(!fired||stack)){args=args||[];
args=[context,args.slice?args.slice():args];
if(firing){stack.push(args)
}else{fire(args)
}}return this
},fire:function(){self.fireWith(this,arguments);
return this
},fired:function(){return !!fired
}};
return self
};
jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state
},always:function(){deferred.done(arguments).fail(arguments);
return this
},then:function(){var fns=arguments;
return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];
deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);
if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)
}else{newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)
}})
});
fns=null
}).promise()
},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise
}},deferred={};
promise.pipe=promise.then;
jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];
promise[tuple[1]]=list.add;
if(stateString){list.add(function(){state=stateString
},tuples[i^1][2].disable,tuples[2][2].lock)
}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);
return this
};
deferred[tuple[0]+"With"]=list.fireWith
});
promise.promise(deferred);
if(func){func.call(deferred,deferred)
}return deferred
},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||(subordinate&&jQuery.isFunction(subordinate.promise))?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;
values[i]=arguments.length>1?slice.call(arguments):value;
if(values===progressValues){deferred.notifyWith(contexts,values)
}else{if(!(--remaining)){deferred.resolveWith(contexts,values)
}}}
},progressValues,progressContexts,resolveContexts;
if(length>1){progressValues=new Array(length);
progressContexts=new Array(length);
resolveContexts=new Array(length);
for(;
i<length;
i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))
}else{--remaining
}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)
}return deferred.promise()
}});
var readyList;
jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);
return this
};
jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++
}else{jQuery.ready(true)
}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return
}jQuery.isReady=true;
if(wait!==true&&--jQuery.readyWait>0){return
}readyList.resolveWith(document,[jQuery]);
if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");
jQuery(document).off("ready")
}}});
function completed(){document.removeEventListener("DOMContentLoaded",completed,false);
window.removeEventListener("load",completed,false);
jQuery.ready()
}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();
if(document.readyState==="complete"){setTimeout(jQuery.ready)
}else{document.addEventListener("DOMContentLoaded",completed,false);
window.addEventListener("load",completed,false)
}}return readyList.promise(obj)
};
jQuery.ready.promise();
var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;
if(jQuery.type(key)==="object"){chainable=true;
for(i in key){jQuery.access(elems,fn,i,key[i],true,emptyGet,raw)
}}else{if(value!==undefined){chainable=true;
if(!jQuery.isFunction(value)){raw=true
}if(bulk){if(raw){fn.call(elems,value);
fn=null
}else{bulk=fn;
fn=function(elem,key,value){return bulk.call(jQuery(elem),value)
}
}}if(fn){for(;
i<len;
i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))
}}}}return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet
};
jQuery.acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!(+owner.nodeType)
};
function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}
}});
this.expando=jQuery.expando+Data.uid++
}Data.uid=1;
Data.accepts=jQuery.acceptData;
Data.prototype={key:function(owner){if(!Data.accepts(owner)){return 0
}var descriptor={},unlock=owner[this.expando];
if(!unlock){unlock=Data.uid++;
try{descriptor[this.expando]={value:unlock};
Object.defineProperties(owner,descriptor)
}catch(e){descriptor[this.expando]=unlock;
jQuery.extend(owner,descriptor)
}}if(!this.cache[unlock]){this.cache[unlock]={}
}return unlock
},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];
if(typeof data==="string"){cache[data]=value
}else{if(jQuery.isEmptyObject(cache)){jQuery.extend(this.cache[unlock],data)
}else{for(prop in data){cache[prop]=data[prop]
}}}return cache
},get:function(owner,key){var cache=this.cache[this.key(owner)];
return key===undefined?cache:cache[key]
},access:function(owner,key,value){var stored;
if(key===undefined||((key&&typeof key==="string")&&value===undefined)){stored=this.get(owner,key);
return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key))
}this.set(owner,key,value);
return value!==undefined?value:key
},remove:function(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];
if(key===undefined){this.cache[unlock]={}
}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase))
}else{camel=jQuery.camelCase(key);
if(key in cache){name=[key,camel]
}else{name=camel;
name=name in cache?[name]:(name.match(rnotwhite)||[])
}}i=name.length;
while(i--){delete cache[name[i]]
}}},hasData:function(owner){return !jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})
},discard:function(owner){if(owner[this.expando]){delete this.cache[owner[this.expando]]
}}};
var data_priv=new Data();
var data_user=new Data();
var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;
function dataAttr(elem,key,data){var name;
if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();
data=elem.getAttribute(name);
if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data
}catch(e){}data_user.set(elem,key,data)
}else{data=undefined
}}return data
}jQuery.extend({hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem)
},data:function(elem,name,data){return data_user.access(elem,name,data)
},removeData:function(elem,name){data_user.remove(elem,name)
},_data:function(elem,name,data){return data_priv.access(elem,name,data)
},_removeData:function(elem,name){data_priv.remove(elem,name)
}});
jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;
if(key===undefined){if(this.length){data=data_user.get(elem);
if(elem.nodeType===1&&!data_priv.get(elem,"hasDataAttrs")){i=attrs.length;
while(i--){if(attrs[i]){name=attrs[i].name;
if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));
dataAttr(elem,name,data[name])
}}}data_priv.set(elem,"hasDataAttrs",true)
}}return data
}if(typeof key==="object"){return this.each(function(){data_user.set(this,key)
})
}return access(this,function(value){var data,camelKey=jQuery.camelCase(key);
if(elem&&value===undefined){data=data_user.get(elem,key);
if(data!==undefined){return data
}data=data_user.get(elem,camelKey);
if(data!==undefined){return data
}data=dataAttr(elem,camelKey,undefined);
if(data!==undefined){return data
}return
}this.each(function(){var data=data_user.get(this,camelKey);
data_user.set(this,camelKey,value);
if(key.indexOf("-")!==-1&&data!==undefined){data_user.set(this,key,value)
}})
},null,value,arguments.length>1,null,true)
},removeData:function(key){return this.each(function(){data_user.remove(this,key)
})
}});
jQuery.extend({queue:function(elem,type,data){var queue;
if(elem){type=(type||"fx")+"queue";
queue=data_priv.get(elem,type);
if(data){if(!queue||jQuery.isArray(data)){queue=data_priv.access(elem,type,jQuery.makeArray(data))
}else{queue.push(data)
}}return queue||[]
}},dequeue:function(elem,type){type=type||"fx";
var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)
};
if(fn==="inprogress"){fn=queue.shift();
startLength--
}if(fn){if(type==="fx"){queue.unshift("inprogress")
}delete hooks.stop;
fn.call(elem,next,hooks)
}if(!startLength&&hooks){hooks.empty.fire()
}},_queueHooks:function(elem,type){var key=type+"queueHooks";
return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])
})})
}});
jQuery.fn.extend({queue:function(type,data){var setter=2;
if(typeof type!=="string"){data=type;
type="fx";
setter--
}if(arguments.length<setter){return jQuery.queue(this[0],type)
}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);
jQuery._queueHooks(this,type);
if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)
}})
},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)
})
},clearQueue:function(type){return this.queue(type||"fx",[])
},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!(--count)){defer.resolveWith(elements,[elements])
}};
if(typeof type!=="string"){obj=type;
type=undefined
}type=type||"fx";
while(i--){tmp=data_priv.get(elements[i],type+"queueHooks");
if(tmp&&tmp.empty){count++;
tmp.empty.add(resolve)
}}resolve();
return defer.promise(obj)
}});
var pnum=(/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;
var cssExpand=["Top","Right","Bottom","Left"];
var isHidden=function(elem,el){elem=el||elem;
return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)
};
var rcheckableType=(/^(?:checkbox|radio)$/i);
(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");
input.setAttribute("type","radio");
input.setAttribute("checked","checked");
input.setAttribute("name","t");
div.appendChild(input);
support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;
div.innerHTML="<textarea>x</textarea>";
support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue
})();
var strundefined=typeof undefined;
support.focusinBubbles="onfocusin" in window;
var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;
function returnTrue(){return true
}function returnFalse(){return false
}function safeActiveElement(){try{return document.activeElement
}catch(err){}}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);
if(!elemData){return
}if(handler.handler){handleObjIn=handler;
handler=handleObjIn.handler;
selector=handleObjIn.selector
}if(!handler.guid){handler.guid=jQuery.guid++
}if(!(events=elemData.events)){events=elemData.events={}
}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!==strundefined&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined
}
}types=(types||"").match(rnotwhite)||[""];
t=types.length;
while(t--){tmp=rtypenamespace.exec(types[t])||[];
type=origType=tmp[1];
namespaces=(tmp[2]||"").split(".").sort();
if(!type){continue
}special=jQuery.event.special[type]||{};
type=(selector?special.delegateType:special.bindType)||type;
special=jQuery.event.special[type]||{};
handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);
if(!(handlers=events[type])){handlers=events[type]=[];
handlers.delegateCount=0;
if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)
}}}if(special.add){special.add.call(elem,handleObj);
if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid
}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)
}else{handlers.push(handleObj)
}jQuery.event.global[type]=true
}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);
if(!elemData||!(events=elemData.events)){return
}types=(types||"").match(rnotwhite)||[""];
t=types.length;
while(t--){tmp=rtypenamespace.exec(types[t])||[];
type=origType=tmp[1];
namespaces=(tmp[2]||"").split(".").sort();
if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)
}continue
}special=jQuery.event.special[type]||{};
type=(selector?special.delegateType:special.bindType)||type;
handlers=events[type]||[];
tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");
origCount=j=handlers.length;
while(j--){handleObj=handlers[j];
if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);
if(handleObj.selector){handlers.delegateCount--
}if(special.remove){special.remove.call(elem,handleObj)
}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)
}delete events[type]
}}if(jQuery.isEmptyObject(events)){delete elemData.handle;
data_priv.remove(elem,"events")
}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];
cur=tmp=elem=elem||document;
if(elem.nodeType===3||elem.nodeType===8){return
}if(rfocusMorph.test(type+jQuery.event.triggered)){return
}if(type.indexOf(".")>=0){namespaces=type.split(".");
type=namespaces.shift();
namespaces.sort()
}ontype=type.indexOf(":")<0&&"on"+type;
event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);
event.isTrigger=onlyHandlers?2:3;
event.namespace=namespaces.join(".");
event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;
event.result=undefined;
if(!event.target){event.target=elem
}data=data==null?[event]:jQuery.makeArray(data,[event]);
special=jQuery.event.special[type]||{};
if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return
}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;
if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode
}for(;
cur;
cur=cur.parentNode){eventPath.push(cur);
tmp=cur
}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)
}}i=0;
while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;
handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle");
if(handle){handle.apply(cur,data)
}handle=ontype&&cur[ontype];
if(handle&&handle.apply&&jQuery.acceptData(cur)){event.result=handle.apply(cur,data);
if(event.result===false){event.preventDefault()
}}}event.type=type;
if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&jQuery.acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];
if(tmp){elem[ontype]=null
}jQuery.event.triggered=type;
elem[type]();
jQuery.event.triggered=undefined;
if(tmp){elem[ontype]=tmp
}}}}return event.result
},dispatch:function(event){event=jQuery.event.fix(event);
var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};
args[0]=event;
event.delegateTarget=this;
if(special.preDispatch&&special.preDispatch.call(this,event)===false){return
}handlerQueue=jQuery.event.handlers.call(this,event,handlers);
i=0;
while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;
j=0;
while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;
event.data=handleObj.data;
ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);
if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();
event.stopPropagation()
}}}}}if(special.postDispatch){special.postDispatch.call(this,event)
}return event.result
},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;
if(delegateCount&&cur.nodeType&&(!event.button||event.type!=="click")){for(;
cur!==this;
cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){matches=[];
for(i=0;
i<delegateCount;
i++){handleObj=handlers[i];
sel=handleObj.selector+" ";
if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length
}if(matches[sel]){matches.push(handleObj)
}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches})
}}}}if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)})
}return handlerQueue
},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode
}return event
}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;
if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;
doc=eventDoc.documentElement;
body=eventDoc.body;
event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);
event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)
}if(!event.which&&button!==undefined){event.which=(button&1?1:(button&2?3:(button&4?2:0)))
}return event
}},fix:function(event){if(event[jQuery.expando]){return event
}var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];
if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}
}copy=fixHook.props?this.props.concat(fixHook.props):this.props;
event=new jQuery.Event(originalEvent);
i=copy.length;
while(i--){prop=copy[i];
event[prop]=originalEvent[prop]
}if(!event.target){event.target=document
}if(event.target.nodeType===3){event.target=event.target.parentNode
}return fixHook.filter?fixHook.filter(event,originalEvent):event
},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();
return false
}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();
return false
}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();
return false
}},_default:function(event){return jQuery.nodeName(event.target,"a")
}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result
}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event(),event,{type:type,isSimulated:true,originalEvent:{}});
if(bubble){jQuery.event.trigger(e,null,elem)
}else{jQuery.event.dispatch.call(elem,e)
}if(e.isDefaultPrevented()){event.preventDefault()
}}};
jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)
}};
jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)
}if(src&&src.type){this.originalEvent=src;
this.type=src.type;
this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse
}else{this.type=src
}if(props){jQuery.extend(this,props)
}this.timeStamp=src&&src.timeStamp||jQuery.now();
this[jQuery.expando]=true
};
jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;
this.isDefaultPrevented=returnTrue;
if(e&&e.preventDefault){e.preventDefault()
}},stopPropagation:function(){var e=this.originalEvent;
this.isPropagationStopped=returnTrue;
if(e&&e.stopPropagation){e.stopPropagation()
}},stopImmediatePropagation:function(){var e=this.originalEvent;
this.isImmediatePropagationStopped=returnTrue;
if(e&&e.stopImmediatePropagation){e.stopImmediatePropagation()
}this.stopPropagation()
}};
jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;
if(!related||(related!==target&&!jQuery.contains(target,related))){event.type=handleObj.origType;
ret=handleObj.handler.apply(this,arguments);
event.type=fix
}return ret
}}
});
if(!support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)
};
jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);
if(!attaches){doc.addEventListener(orig,handler,true)
}data_priv.access(doc,fix,(attaches||0)+1)
},teardown:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;
if(!attaches){doc.removeEventListener(orig,handler,true);
data_priv.remove(doc,fix)
}else{data_priv.access(doc,fix,attaches)
}}}
})
}jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;
if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;
selector=undefined
}for(type in types){this.on(type,selector,data,types[type],one)
}return this
}if(data==null&&fn==null){fn=selector;
data=selector=undefined
}else{if(fn==null){if(typeof selector==="string"){fn=data;
data=undefined
}else{fn=data;
data=selector;
selector=undefined
}}}if(fn===false){fn=returnFalse
}else{if(!fn){return this
}}if(one===1){origFn=fn;
fn=function(event){jQuery().off(event);
return origFn.apply(this,arguments)
};
fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)
}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)
})
},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)
},off:function(types,selector,fn){var handleObj,type;
if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;
jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);
return this
}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])
}return this
}if(selector===false||typeof selector==="function"){fn=selector;
selector=undefined
}if(fn===false){fn=returnFalse
}return this.each(function(){jQuery.event.remove(this,types,fn,selector)
})
},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)
})
},triggerHandler:function(type,data){var elem=this[0];
if(elem){return jQuery.event.trigger(type,data,elem,true)
}}});
var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};
wrapMap.optgroup=wrapMap.option;
wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;
wrapMap.th=wrapMap.td;
function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem
}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;
return elem
}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);
if(match){elem.type=match[1]
}else{elem.removeAttribute("type")
}return elem
}function setGlobalEval(elems,refElements){var i=0,l=elems.length;
for(;
i<l;
i++){data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))
}}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;
if(dest.nodeType!==1){return
}if(data_priv.hasData(src)){pdataOld=data_priv.access(src);
pdataCur=data_priv.set(dest,pdataOld);
events=pdataOld.events;
if(events){delete pdataCur.handle;
pdataCur.events={};
for(type in events){for(i=0,l=events[type].length;
i<l;
i++){jQuery.event.add(dest,type,events[type][i])
}}}}if(data_user.hasData(src)){udataOld=data_user.access(src);
udataCur=jQuery.extend({},udataOld);
data_user.set(dest,udataCur)
}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];
return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret
}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();
if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked
}else{if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue
}}}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);
if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);
srcElements=getAll(elem);
for(i=0,l=srcElements.length;
i<l;
i++){fixInput(srcElements[i],destElements[i])
}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);
destElements=destElements||getAll(clone);
for(i=0,l=srcElements.length;
i<l;
i++){cloneCopyEvent(srcElements[i],destElements[i])
}}else{cloneCopyEvent(elem,clone)
}}destElements=getAll(clone,"script");
if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))
}return clone
},buildFragment:function(elems,context,scripts,selection){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;
for(;
i<l;
i++){elem=elems[i];
if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)
}else{if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))
}else{tmp=tmp||fragment.appendChild(context.createElement("div"));
tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();
wrap=wrapMap[tag]||wrapMap._default;
tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];
j=wrap[0];
while(j--){tmp=tmp.lastChild
}jQuery.merge(nodes,tmp.childNodes);
tmp=fragment.firstChild;
tmp.textContent=""
}}}}fragment.textContent="";
i=0;
while((elem=nodes[i++])){if(selection&&jQuery.inArray(elem,selection)!==-1){continue
}contains=jQuery.contains(elem.ownerDocument,elem);
tmp=getAll(fragment.appendChild(elem),"script");
if(contains){setGlobalEval(tmp)
}if(scripts){j=0;
while((elem=tmp[j++])){if(rscriptType.test(elem.type||"")){scripts.push(elem)
}}}}return fragment
},cleanData:function(elems){var data,elem,type,key,special=jQuery.event.special,i=0;
for(;
(elem=elems[i])!==undefined;
i++){if(jQuery.acceptData(elem)){key=elem[data_priv.expando];
if(key&&(data=data_priv.cache[key])){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)
}else{jQuery.removeEvent(elem,type,data.handle)
}}}if(data_priv.cache[key]){delete data_priv.cache[key]
}}}delete data_user.cache[elem[data_user.expando]]
}}});
jQuery.fn.extend({text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value
}})
},null,value,arguments.length)
},append:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);
target.appendChild(elem)
}})
},prepend:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);
target.insertBefore(elem,target.firstChild)
}})
},before:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)
}})
},after:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)
}})
},remove:function(selector,keepData){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;
for(;
(elem=elems[i])!=null;
i++){if(!keepData&&elem.nodeType===1){jQuery.cleanData(getAll(elem))
}if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem)){setGlobalEval(getAll(elem,"script"))
}elem.parentNode.removeChild(elem)
}}return this
},empty:function(){var elem,i=0;
for(;
(elem=this[i])!=null;
i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));
elem.textContent=""
}}return this
},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;
deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;
return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)
})
},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;
if(value===undefined&&elem.nodeType===1){return elem.innerHTML
}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");
try{for(;
i<l;
i++){elem=this[i]||{};
if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));
elem.innerHTML=value
}}elem=0
}catch(e){}}if(elem){this.empty().append(value)
}},null,value,arguments.length)
},replaceWith:function(){var arg=arguments[0];
this.domManip(arguments,function(elem){arg=this.parentNode;
jQuery.cleanData(getAll(this));
if(arg){arg.replaceChild(elem,this)
}});
return arg&&(arg.length||arg.nodeType)?this:this.remove()
},detach:function(selector){return this.remove(selector,true)
},domManip:function(args,callback){args=concat.apply([],args);
var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);
if(isFunction||(l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value))){return this.each(function(index){var self=set.eq(index);
if(isFunction){args[0]=value.call(this,index,self.html())
}self.domManip(args,callback)
})
}if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,this);
first=fragment.firstChild;
if(fragment.childNodes.length===1){fragment=first
}if(first){scripts=jQuery.map(getAll(fragment,"script"),disableScript);
hasScripts=scripts.length;
for(;
i<l;
i++){node=fragment;
if(i!==iNoClone){node=jQuery.clone(node,true,true);
if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))
}}callback.call(this[i],node,i)
}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;
jQuery.map(scripts,restoreScript);
for(i=0;
i<hasScripts;
i++){node=scripts[i];
if(rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)
}}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""))
}}}}}}return this
}});
jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;
for(;
i<=last;
i++){elems=i===last?this:this.clone(true);
jQuery(insert[i])[original](elems);
push.apply(ret,elems.get())
}return this.pushStack(ret)
}
});
var iframe,elemdisplay={};
function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");
elem.detach();
return display
}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];
if(!display){display=actualDisplay(nodeName,doc);
if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);
doc=iframe[0].contentDocument;
doc.write();
doc.close();
display=actualDisplay(nodeName,doc);
iframe.detach()
}elemdisplay[nodeName]=display
}return display
}var rmargin=(/^margin/);
var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");
var getStyles=function(elem){if(elem.ownerDocument.defaultView.opener){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)
}return window.getComputedStyle(elem,null)
};
function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;
computed=computed||getStyles(elem);
if(computed){ret=computed.getPropertyValue(name)||computed[name]
}if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)
}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;
minWidth=style.minWidth;
maxWidth=style.maxWidth;
style.minWidth=style.maxWidth=style.width=ret;
ret=computed.width;
style.width=width;
style.minWidth=minWidth;
style.maxWidth=maxWidth
}}return ret!==undefined?ret+"":ret
}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;
return
}return(this.get=hookFn).apply(this,arguments)
}}
}(function(){var pixelPositionVal,boxSizingReliableVal,docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div");
if(!div.style){return
}div.style.backgroundClip="content-box";
div.cloneNode(true).style.backgroundClip="";
support.clearCloneStyle=div.style.backgroundClip==="content-box";
container.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute";
container.appendChild(div);
function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute";
div.innerHTML="";
docElem.appendChild(container);
var divStyle=window.getComputedStyle(div,null);
pixelPositionVal=divStyle.top!=="1%";
boxSizingReliableVal=divStyle.width==="4px";
docElem.removeChild(container)
}if(window.getComputedStyle){jQuery.extend(support,{pixelPosition:function(){computePixelPositionAndBoxSizingReliable();
return pixelPositionVal
},boxSizingReliable:function(){if(boxSizingReliableVal==null){computePixelPositionAndBoxSizingReliable()
}return boxSizingReliableVal
},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));
marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0";
marginDiv.style.marginRight=marginDiv.style.width="0";
div.style.width="1px";
docElem.appendChild(container);
ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight);
docElem.removeChild(container);
div.removeChild(marginDiv);
return ret
}})
}})();
jQuery.swap=function(elem,options,callback,args){var ret,name,old={};
for(name in options){old[name]=elem.style[name];
elem.style[name]=options[name]
}ret=callback.apply(elem,args||[]);
for(name in options){elem.style[name]=old[name]
}return ret
};
var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];
function vendorPropName(style,name){if(name in style){return name
}var capName=name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;
while(i--){name=cssPrefixes[i]+capName;
if(name in style){return name
}}return origName
}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);
return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value
}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;
for(;
i<4;
i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)
}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)
}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)
}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);
if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)
}}}return val
}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";
if(val<=0||val==null){val=curCSS(elem,name,styles);
if(val<0||val==null){val=elem.style[name]
}if(rnumnonpx.test(val)){return val
}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);
val=parseFloat(val)||0
}return(val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles))+"px"
}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;
for(;
index<length;
index++){elem=elements[index];
if(!elem.style){continue
}values[index]=data_priv.get(elem,"olddisplay");
display=elem.style.display;
if(show){if(!values[index]&&display==="none"){elem.style.display=""
}if(elem.style.display===""&&isHidden(elem)){values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName))
}}else{hidden=isHidden(elem);
if(display!=="none"||!hidden){data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))
}}}for(index=0;
index<length;
index++){elem=elements[index];
if(!elem.style){continue
}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"
}}return elements
}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");
return ret===""?"1":ret
}}}},cssNumber:{columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return
}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;
name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));
hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];
if(value!==undefined){type=typeof value;
if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));
type="number"
}if(value==null||value!==value){return
}if(type==="number"&&!jQuery.cssNumber[origName]){value+="px"
}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"
}if(!hooks||!("set" in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value
}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret
}return style[name]
}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);
name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));
hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];
if(hooks&&"get" in hooks){val=hooks.get(elem,true,extra)
}if(val===undefined){val=curCSS(elem,name,styles)
}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]
}if(extra===""||extra){num=parseFloat(val);
return extra===true||jQuery.isNumeric(num)?num||0:val
}return val
}});
jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)
}):getWidthOrHeight(elem,name,extra)
}},set:function(elem,value,extra){var styles=extra&&getStyles(elem);
return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)
}}
});
jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])
}});
jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];
for(;
i<4;
i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]
}return expanded
}};
if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber
}});
jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;
if(jQuery.isArray(name)){styles=getStyles(elem);
len=name.length;
for(;
i<len;
i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)
}return map
}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)
},name,value,arguments.length>1)
},show:function(){return showHide(this,true)
},hide:function(){return showHide(this)
},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide()
}return this.each(function(){if(isHidden(this)){jQuery(this).show()
}else{jQuery(this).hide()
}})
}});
function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)
}jQuery.Tween=Tween;
Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;
this.prop=prop;
this.easing=easing||"swing";
this.options=options;
this.start=this.now=this.cur();
this.end=end;
this.unit=unit||(jQuery.cssNumber[prop]?"":"px")
},cur:function(){var hooks=Tween.propHooks[this.prop];
return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)
},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];
if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)
}else{this.pos=eased=percent
}this.now=(this.end-this.start)*eased+this.start;
if(this.options.step){this.options.step.call(this.elem,this.now,this)
}if(hooks&&hooks.set){hooks.set(this)
}else{Tween.propHooks._default.set(this)
}return this
}};
Tween.prototype.init.prototype=Tween.prototype;
Tween.propHooks={_default:{get:function(tween){var result;
if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop]
}result=jQuery.css(tween.elem,tween.prop,"");
return !result||result==="auto"?0:result
},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)
}else{if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit)
}else{tween.elem[tween.prop]=tween.now
}}}}};
Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now
}}};
jQuery.easing={linear:function(p){return p
},swing:function(p){return 0.5-Math.cos(p*Math.PI)/2
}};
jQuery.fx=Tween.prototype.init;
jQuery.fx.step={};
var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||unit!=="px"&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;
if(start&&start[3]!==unit){unit=unit||start[3];
parts=parts||[];
start=+target||1;
do{scale=scale||".5";
start=start/scale;
jQuery.style(tween.elem,prop,start+unit)
}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations)
}if(parts){start=tween.start=+start||+target||0;
tween.unit=unit;
tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]
}return tween
}]};
function createFxNow(){setTimeout(function(){fxNow=undefined
});
return(fxNow=jQuery.now())
}function genFx(type,includeWidth){var which,i=0,attrs={height:type};
includeWidth=includeWidth?1:0;
for(;
i<4;
i+=2-includeWidth){which=cssExpand[i];
attrs["margin"+which]=attrs["padding"+which]=type
}if(includeWidth){attrs.opacity=attrs.width=type
}return attrs
}function createTween(value,prop,animation){var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;
for(;
index<length;
index++){if((tween=collection[index].call(animation,prop,value))){return tween
}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow");
if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");
if(hooks.unqueued==null){hooks.unqueued=0;
oldfire=hooks.empty.fire;
hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()
}}
}hooks.unqueued++;
anim.always(function(){anim.always(function(){hooks.unqueued--;
if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()
}})
})
}if(elem.nodeType===1&&("height" in props||"width" in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];
display=jQuery.css(elem,"display");
checkDisplay=display==="none"?data_priv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display;
if(checkDisplay==="inline"&&jQuery.css(elem,"float")==="none"){style.display="inline-block"
}}if(opts.overflow){style.overflow="hidden";
anim.always(function(){style.overflow=opts.overflow[0];
style.overflowX=opts.overflow[1];
style.overflowY=opts.overflow[2]
})
}for(prop in props){value=props[prop];
if(rfxtypes.exec(value)){delete props[prop];
toggle=toggle||value==="toggle";
if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true
}else{continue
}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)
}else{display=undefined
}}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden" in dataShow){hidden=dataShow.hidden
}}else{dataShow=data_priv.access(elem,"fxshow",{})
}if(toggle){dataShow.hidden=!hidden
}if(hidden){jQuery(elem).show()
}else{anim.done(function(){jQuery(elem).hide()
})
}anim.done(function(){var prop;
data_priv.remove(elem,"fxshow");
for(prop in orig){jQuery.style(elem,prop,orig[prop])
}});
for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);
if(!(prop in dataShow)){dataShow[prop]=tween.start;
if(hidden){tween.end=tween.start;
tween.start=prop==="width"||prop==="height"?1:0
}}}}else{if((display==="none"?defaultDisplay(elem.nodeName):display)==="inline"){style.display=display
}}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;
for(index in props){name=jQuery.camelCase(index);
easing=specialEasing[name];
value=props[index];
if(jQuery.isArray(value)){easing=value[1];
value=props[index]=value[0]
}if(index!==name){props[name]=value;
delete props[index]
}hooks=jQuery.cssHooks[name];
if(hooks&&"expand" in hooks){value=hooks.expand(value);
delete props[name];
for(index in value){if(!(index in props)){props[index]=value[index];
specialEasing[index]=easing
}}}else{specialEasing[name]=easing
}}}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem
}),tick=function(){if(stopped){return false
}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;
for(;
index<length;
index++){animation.tweens[index].run(percent)
}deferred.notifyWith(elem,[animation,percent,remaining]);
if(percent<1&&length){return remaining
}else{deferred.resolveWith(elem,[animation]);
return false
}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);
animation.tweens.push(tween);
return tween
},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;
if(stopped){return this
}stopped=true;
for(;
index<length;
index++){animation.tweens[index].run(1)
}if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd])
}else{deferred.rejectWith(elem,[animation,gotoEnd])
}return this
}}),props=animation.props;
propFilter(props,animation.opts.specialEasing);
for(;
index<length;
index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);
if(result){return result
}}jQuery.map(props,createTween,animation);
if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)
}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));
return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)
}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;
props=["*"]
}else{props=props.split(" ")
}var prop,index=0,length=props.length;
for(;
index<length;
index++){prop=props[index];
tweeners[prop]=tweeners[prop]||[];
tweeners[prop].unshift(callback)
}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback)
}else{animationPrefilters.push(callback)
}}});
jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};
opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;
if(opt.queue==null||opt.queue===true){opt.queue="fx"
}opt.old=opt.complete;
opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)
}if(opt.queue){jQuery.dequeue(this,opt.queue)
}};
return opt
};
jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)
},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);
if(empty||data_priv.get(this,"finish")){anim.stop(true)
}};
doAnimation.finish=doAnimation;
return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)
},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;
delete hooks.stop;
stop(gotoEnd)
};
if(typeof type!=="string"){gotoEnd=clearQueue;
clearQueue=type;
type=undefined
}if(clearQueue&&type!==false){this.queue(type||"fx",[])
}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);
if(index){if(data[index]&&data[index].stop){stopQueue(data[index])
}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])
}}}for(index=timers.length;
index--;
){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);
dequeue=false;
timers.splice(index,1)
}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)
}})
},finish:function(type){if(type!==false){type=type||"fx"
}return this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;
data.finish=true;
jQuery.queue(this,type,[]);
if(hooks&&hooks.stop){hooks.stop.call(this,true)
}for(index=timers.length;
index--;
){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);
timers.splice(index,1)
}}for(index=0;
index<length;
index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)
}}delete data.finish
})
}});
jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];
jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)
}
});
jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)
}
});
jQuery.timers=[];
jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;
fxNow=jQuery.now();
for(;
i<timers.length;
i++){timer=timers[i];
if(!timer()&&timers[i]===timer){timers.splice(i--,1)
}}if(!timers.length){jQuery.fx.stop()
}fxNow=undefined
};
jQuery.fx.timer=function(timer){jQuery.timers.push(timer);
if(timer()){jQuery.fx.start()
}else{jQuery.timers.pop()
}};
jQuery.fx.interval=13;
jQuery.fx.start=function(){if(!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)
}};
jQuery.fx.stop=function(){clearInterval(timerId);
timerId=null
};
jQuery.fx.speeds={slow:600,fast:200,_default:400};
jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;
type=type||"fx";
return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);
hooks.stop=function(){clearTimeout(timeout)
}
})
};
(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));
input.type="checkbox";
support.checkOn=input.value!=="";
support.optSelected=opt.selected;
select.disabled=true;
support.optDisabled=!opt.disabled;
input=document.createElement("input");
input.value="t";
input.type="radio";
support.radioValue=input.value==="t"
})();
var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;
jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)
},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)
})
}});
jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;
if(!elem||nType===3||nType===8||nType===2){return
}if(typeof elem.getAttribute===strundefined){return jQuery.prop(elem,name,value)
}if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();
hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)
}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name)
}else{if(hooks&&"set" in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret
}else{elem.setAttribute(name,value+"");
return value
}}}else{if(hooks&&"get" in hooks&&(ret=hooks.get(elem,name))!==null){return ret
}else{ret=jQuery.find.attr(elem,name);
return ret==null?undefined:ret
}}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);
if(attrNames&&elem.nodeType===1){while((name=attrNames[i++])){propName=jQuery.propFix[name]||name;
if(jQuery.expr.match.bool.test(name)){elem[propName]=false
}elem.removeAttribute(name)
}}},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;
elem.setAttribute("type",value);
if(val){elem.value=val
}return value
}}}}});
boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)
}else{elem.setAttribute(name,name)
}return name
}};
jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;
attrHandle[name]=function(elem,name,isXML){var ret,handle;
if(!isXML){handle=attrHandle[name];
attrHandle[name]=ret;
ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;
attrHandle[name]=handle
}return ret
}
});
var rfocusable=/^(?:input|select|textarea|button)$/i;
jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)
},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]
})
}});
jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;
if(!elem||nType===3||nType===8||nType===2){return
}notxml=nType!==1||!jQuery.isXMLDoc(elem);
if(notxml){name=jQuery.propFix[name]||name;
hooks=jQuery.propHooks[name]
}if(value!==undefined){return hooks&&"set" in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem[name]=value)
}else{return hooks&&"get" in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name]
}},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1
}}}});
if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;
if(parent&&parent.parentNode){parent.parentNode.selectedIndex
}return null
}}
}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this
});
var rclass=/[\t\r\n\f]/g;
jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=typeof value==="string"&&value,i=0,len=this.length;
if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))
})
}if(proceed){classes=(value||"").match(rnotwhite)||[];
for(;
i<len;
i++){elem=this[i];
cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");
if(cur){j=0;
while((clazz=classes[j++])){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "
}}finalValue=jQuery.trim(cur);
if(elem.className!==finalValue){elem.className=finalValue
}}}}return this
},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=arguments.length===0||typeof value==="string"&&value,i=0,len=this.length;
if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))
})
}if(proceed){classes=(value||"").match(rnotwhite)||[];
for(;
i<len;
i++){elem=this[i];
cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");
if(cur){j=0;
while((clazz=classes[j++])){while(cur.indexOf(" "+clazz+" ")>=0){cur=cur.replace(" "+clazz+" "," ")
}}finalValue=value?jQuery.trim(cur):"";
if(elem.className!==finalValue){elem.className=finalValue
}}}}return this
},toggleClass:function(value,stateVal){var type=typeof value;
if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)
}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)
})
}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];
while((className=classNames[i++])){if(self.hasClass(className)){self.removeClass(className)
}else{self.addClass(className)
}}}else{if(type===strundefined||type==="boolean"){if(this.className){data_priv.set(this,"__className__",this.className)
}this.className=this.className||value===false?"":data_priv.get(this,"__className__")||""
}}})
},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;
for(;
i<l;
i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true
}}return false
}});
var rreturn=/\r/g;
jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];
if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];
if(hooks&&"get" in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret
}ret=elem.value;
return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret
}return
}isFunction=jQuery.isFunction(value);
return this.each(function(i){var val;
if(this.nodeType!==1){return
}if(isFunction){val=value.call(this,i,jQuery(this).val())
}else{val=value
}if(val==null){val=""
}else{if(typeof val==="number"){val+=""
}else{if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""
})
}}}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];
if(!hooks||!("set" in hooks)||hooks.set(this,val,"value")===undefined){this.value=val
}})
}});
jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");
return val!=null?val:jQuery.trim(jQuery.text(elem))
}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;
for(;
i<max;
i++){option=options[i];
if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();
if(one){return value
}values.push(value)
}}return values
},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;
while(i--){option=options[i];
if((option.selected=jQuery.inArray(option.value,values)>=0)){optionSet=true
}}if(!optionSet){elem.selectedIndex=-1
}return values
}}}});
jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0)
}}};
if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value
}
}});
jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)
}
});
jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)
},bind:function(types,data,fn){return this.on(types,null,data,fn)
},unbind:function(types,fn){return this.off(types,null,fn)
},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)
},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)
}});
var nonce=jQuery.now();
var rquery=(/\?/);
jQuery.parseJSON=function(data){return JSON.parse(data+"")
};
jQuery.parseXML=function(data){var xml,tmp;
if(!data||typeof data!=="string"){return null
}try{tmp=new DOMParser();
xml=tmp.parseFromString(data,"text/xml")
}catch(e){xml=undefined
}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)
}return xml
};
var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/mg,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*"),ajaxLocation=window.location.href,ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];
function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;
dataTypeExpression="*"
}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];
if(jQuery.isFunction(func)){while((dataType=dataTypes[i++])){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";
(structure[dataType]=structure[dataType]||[]).unshift(func)
}else{(structure[dataType]=structure[dataType]||[]).push(func)
}}}}
}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=(structure===transports);
function inspect(dataType){var selected;
inspected[dataType]=true;
jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);
if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);
inspect(dataTypeOrTransport);
return false
}else{if(seekingTransport){return !(selected=dataTypeOrTransport)
}}});
return selected
}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")
}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};
for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key]
}}if(deep){jQuery.extend(true,target,deep)
}return target
}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;
while(dataTypes[0]==="*"){dataTypes.shift();
if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")
}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);
break
}}}if(dataTypes[0] in responses){finalDataType=dataTypes[0]
}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;
break
}if(!firstDataType){firstDataType=type
}}finalDataType=finalDataType||firstDataType
}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)
}return responses[finalDataType]
}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();
if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]
}}current=dataTypes.shift();
while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response
}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)
}prev=current;
current=dataTypes.shift();
if(current){if(current==="*"){current=prev
}else{if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];
if(!conv){for(conv2 in converters){tmp=conv2.split(" ");
if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];
if(conv){if(conv===true){conv=converters[conv2]
}else{if(converters[conv2]!==true){current=tmp[0];
dataTypes.unshift(tmp[1])
}}break
}}}}if(conv!==true){if(conv&&s["throws"]){response=conv(response)
}else{try{response=conv(response)
}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}
}}}}}}}return{state:"success",data:response}
}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)
},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;
url=undefined
}options=options||{};
var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;
if(state===2){if(!responseHeaders){responseHeaders={};
while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2]
}}match=responseHeaders[key.toLowerCase()]
}return match==null?null:match
},getAllResponseHeaders:function(){return state===2?responseHeadersString:null
},setRequestHeader:function(name,value){var lname=name.toLowerCase();
if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;
requestHeaders[name]=value
}return this
},overrideMimeType:function(type){if(!state){s.mimeType=type
}return this
},statusCode:function(map){var code;
if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]]
}}else{jqXHR.always(map[jqXHR.status])
}}return this
},abort:function(statusText){var finalText=statusText||strAbort;
if(transport){transport.abort(finalText)
}done(0,finalText);
return this
}};
deferred.promise(jqXHR).complete=completeDeferred.add;
jqXHR.success=jqXHR.done;
jqXHR.error=jqXHR.fail;
s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");
s.type=options.method||options.type||s.method||s.type;
s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""];
if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());
s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?"80":"443"))!==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443"))))
}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)
}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);
if(state===2){return jqXHR
}fireGlobals=jQuery.event&&s.global;
if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")
}s.type=s.type.toUpperCase();
s.hasContent=!rnoContent.test(s.type);
cacheURL=s.url;
if(!s.hasContent){if(s.data){cacheURL=(s.url+=(rquery.test(cacheURL)?"&":"?")+s.data);
delete s.data
}if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++
}}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])
}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])
}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)
}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);
for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])
}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()
}strAbort="abort";
for(i in {success:1,error:1,complete:1}){jqXHR[i](s[i])
}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);
if(!transport){done(-1,"No Transport")
}else{jqXHR.readyState=1;
if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])
}if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")
},s.timeout)
}try{state=1;
transport.send(requestHeaders,done)
}catch(e){if(state<2){done(-1,e)
}else{throw e
}}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;
if(state===2){return
}state=2;
if(timeoutTimer){clearTimeout(timeoutTimer)
}transport=undefined;
responseHeadersString=headers||"";
jqXHR.readyState=status>0?4:0;
isSuccess=status>=200&&status<300||status===304;
if(responses){response=ajaxHandleResponses(s,jqXHR,responses)
}response=ajaxConvert(s,response,jqXHR,isSuccess);
if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");
if(modified){jQuery.lastModified[cacheURL]=modified
}modified=jqXHR.getResponseHeader("etag");
if(modified){jQuery.etag[cacheURL]=modified
}}if(status===204||s.type==="HEAD"){statusText="nocontent"
}else{if(status===304){statusText="notmodified"
}else{statusText=response.state;
success=response.data;
error=response.error;
isSuccess=!error
}}}else{error=statusText;
if(status||!statusText){statusText="error";
if(status<0){status=0
}}}jqXHR.status=status;
jqXHR.statusText=(nativeStatusText||statusText)+"";
if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])
}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])
}jqXHR.statusCode(statusCode);
statusCode=undefined;
if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])
}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);
if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);
if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop")
}}}return jqXHR
},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")
},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")
}});
jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;
callback=data;
data=undefined
}return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})
}
});
jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,"throws":true})
};
jQuery.fn.extend({wrapAll:function(html){var wrap;
if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))
})
}if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);
if(this[0].parentNode){wrap.insertBefore(this[0])
}wrap.map(function(){var elem=this;
while(elem.firstElementChild){elem=elem.firstElementChild
}return elem
}).append(this)
}return this
},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))
})
}return this.each(function(){var self=jQuery(this),contents=self.contents();
if(contents.length){contents.wrapAll(html)
}else{self.append(html)
}})
},wrap:function(html){var isFunction=jQuery.isFunction(html);
return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)
})
},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)
}}).end()
}});
jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0
};
jQuery.expr.filters.visible=function(elem){return !jQuery.expr.filters.hidden(elem)
};
var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;
function buildParams(prefix,obj,traditional,add){var name;
if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)
}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)
}})
}else{if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)
}}else{add(prefix,obj)
}}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():(value==null?"":value);
s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)
};
if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional
}if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value)
})
}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)
}}return s.join("&").replace(r20,"+")
};
jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())
},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");
return elements?jQuery.makeArray(elements):this
}).filter(function(){var type=this.type;
return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))
}).map(function(i,elem){var val=jQuery(this).val();
return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}
}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}
}).get()
}});
jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest()
}catch(e){}};
var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();
if(window.attachEvent){window.attachEvent("onunload",function(){for(var key in xhrCallbacks){xhrCallbacks[key]()
}})
}support.cors=!!xhrSupported&&("withCredentials" in xhrSupported);
support.ajax=xhrSupported=!!xhrSupported;
jQuery.ajaxTransport(function(options){var callback;
if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;
xhr.open(options.type,options.url,options.async,options.username,options.password);
if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]
}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)
}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"
}for(i in headers){xhr.setRequestHeader(i,headers[i])
}callback=function(type){return function(){if(callback){delete xhrCallbacks[id];
callback=xhr.onload=xhr.onerror=null;
if(type==="abort"){xhr.abort()
}else{if(type==="error"){complete(xhr.status,xhr.statusText)
}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,typeof xhr.responseText==="string"?{text:xhr.responseText}:undefined,xhr.getAllResponseHeaders())
}}}}
};
xhr.onload=callback();
xhr.onerror=callback("error");
callback=xhrCallbacks[id]=callback("abort");
try{xhr.send(options.hasContent&&options.data||null)
}catch(e){if(callback){throw e
}}},abort:function(){if(callback){callback()
}}}
}});
jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){jQuery.globalEval(text);
return text
}}});
jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false
}if(s.crossDomain){s.type="GET"
}});
jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;
return{send:function(_,complete){script=jQuery("<script>").prop({async:true,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();
callback=null;
if(evt){complete(evt.type==="error"?404:200,evt.type)
}});
document.head.appendChild(script[0])
},abort:function(){if(callback){callback()
}}}
}});
var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;
jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||(jQuery.expando+"_"+(nonce++));
this[callback]=true;
return callback
}});
jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");
if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;
if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)
}else{if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName
}}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")
}return responseContainer[0]
};
s.dataTypes[0]="json";
overwritten=window[callbackName];
window[callbackName]=function(){responseContainer=arguments
};
jqXHR.always(function(){window[callbackName]=overwritten;
if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;
oldCallbacks.push(callbackName)
}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])
}responseContainer=overwritten=undefined
});
return"script"
}});
jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null
}if(typeof context==="boolean"){keepScripts=context;
context=false
}context=context||document;
var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];
if(parsed){return[context.createElement(parsed[1])]
}parsed=jQuery.buildFragment([data],context,scripts);
if(scripts&&scripts.length){jQuery(scripts).remove()
}return jQuery.merge([],parsed.childNodes)
};
var _load=jQuery.fn.load;
jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)
}var selector,type,response,self=this,off=url.indexOf(" ");
if(off>=0){selector=jQuery.trim(url.slice(off));
url=url.slice(0,off)
}if(jQuery.isFunction(params)){callback=params;
params=undefined
}else{if(params&&typeof params==="object"){type="POST"
}}if(self.length>0){jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;
self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)
}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])
})
}return this
};
jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)
}
});
jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem
}).length
};
var docElem=window.document.documentElement;
function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView
}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};
if(position==="static"){elem.style.position="relative"
}curOffset=curElem.offset();
curCSSTop=jQuery.css(elem,"top");
curCSSLeft=jQuery.css(elem,"left");
calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;
if(calculatePosition){curPosition=curElem.position();
curTop=curPosition.top;
curLeft=curPosition.left
}else{curTop=parseFloat(curCSSTop)||0;
curLeft=parseFloat(curCSSLeft)||0
}if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset)
}if(options.top!=null){props.top=(options.top-curOffset.top)+curTop
}if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft
}if("using" in options){options.using.call(elem,props)
}else{curElem.css(props)
}}};
jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)
})
}var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;
if(!doc){return
}docElem=doc.documentElement;
if(!jQuery.contains(docElem,elem)){return box
}if(typeof elem.getBoundingClientRect!==strundefined){box=elem.getBoundingClientRect()
}win=getWindow(doc);
return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}
},position:function(){if(!this[0]){return
}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};
if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()
}else{offsetParent=this.offsetParent();
offset=this.offset();
if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()
}parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);
parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)
}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}
},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||docElem;
while(offsetParent&&(!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent
}return offsetParent||docElem
})
}});
jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;
jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);
if(val===undefined){return win?win[prop]:elem[method]
}if(win){win.scrollTo(!top?val:window.pageXOffset,top?val:window.pageYOffset)
}else{elem[method]=val
}},method,val,arguments.length,null)
}
});
jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);
return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed
}})
});
jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");
return access(this,function(elem,type,value){var doc;
if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]
}if(elem.nodeType===9){doc=elem.documentElement;
return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])
}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)
},type,chainable?margin:undefined,chainable,null)
}
})
});
jQuery.fn.size=function(){return this.length
};
jQuery.fn.andSelf=jQuery.fn.addBack;
if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery
})
}var _jQuery=window.jQuery,_$=window.$;
jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$
}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery
}return jQuery
};
if(typeof noGlobal===strundefined){window.jQuery=window.$=jQuery
}return jQuery
}));
(function(){var y=this;
var l=y._;
var L=Array.prototype,g=Object.prototype,o=Function.prototype;
var O=L.push,m=L.slice,c=g.toString,k=g.hasOwnProperty;
var v=Array.isArray,e=Object.keys,M=o.bind,E=Object.create;
var H=function(){};
var S=function(T){if(T instanceof S){return T
}if(!(this instanceof S)){return new S(T)
}this._wrapped=T
};
if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=S
}exports._=S
}else{y._=S
}S.VERSION="1.8.3";
var b=function(U,T,V){if(T===void 0){return U
}switch(V==null?3:V){case 1:return function(W){return U.call(T,W)
};
case 2:return function(X,W){return U.call(T,X,W)
};
case 3:return function(X,W,Y){return U.call(T,X,W,Y)
};
case 4:return function(W,Y,X,Z){return U.call(T,W,Y,X,Z)
}
}return function(){return U.apply(T,arguments)
}
};
var I=function(U,T,V){if(U==null){return S.identity
}if(S.isFunction(U)){return b(U,T,V)
}if(S.isObject(U)){return S.matcher(U)
}return S.property(U)
};
S.iteratee=function(U,T){return I(U,T,Infinity)
};
var q=function(U,T){return function(ac){var aa=arguments.length;
if(aa<2||ac==null){return ac
}for(var W=1;
W<aa;
W++){var ab=arguments[W],Z=U(ab),V=Z.length;
for(var Y=0;
Y<V;
Y++){var X=Z[Y];
if(!T||ac[X]===void 0){ac[X]=ab[X]
}}}return ac
}
};
var F=function(U){if(!S.isObject(U)){return{}
}if(E){return E(U)
}H.prototype=U;
var T=new H;
H.prototype=null;
return T
};
var P=function(T){return function(U){return U==null?void 0:U[T]
}
};
var N=Math.pow(2,53)-1;
var R=P("length");
var G=function(U){var T=R(U);
return typeof T=="number"&&T>=0&&T<=N
};
S.each=S.forEach=function(X,Y,U){Y=b(Y,U);
var T,W;
if(G(X)){for(T=0,W=X.length;
T<W;
T++){Y(X[T],T,X)
}}else{var V=S.keys(X);
for(T=0,W=V.length;
T<W;
T++){Y(X[V[T]],V[T],X)
}}return X
};
S.map=S.collect=function(Y,aa,V){aa=I(aa,V);
var X=!G(Y)&&S.keys(Y),W=(X||Y).length,U=Array(W);
for(var T=0;
T<W;
T++){var Z=X?X[T]:T;
U[T]=aa(Y[Z],Z,Y)
}return U
};
function C(T){function U(Z,ab,V,Y,W,X){for(;
W>=0&&W<X;
W+=T){var aa=Y?Y[W]:W;
V=ab(V,Z[aa],aa,Z)
}return V
}return function(aa,ab,V,X){ab=b(ab,X,4);
var Z=!G(aa)&&S.keys(aa),Y=(Z||aa).length,W=T>0?0:Y-1;
if(arguments.length<3){V=aa[Z?Z[W]:W];
W+=T
}return U(aa,ab,V,Z,W,Y)
}
}S.reduce=S.foldl=S.inject=C(1);
S.reduceRight=S.foldr=C(-1);
S.find=S.detect=function(W,T,V){var U;
if(G(W)){U=S.findIndex(W,T,V)
}else{U=S.findKey(W,T,V)
}if(U!==void 0&&U!==-1){return W[U]
}};
S.filter=S.select=function(W,T,V){var U=[];
T=I(T,V);
S.each(W,function(Z,X,Y){if(T(Z,X,Y)){U.push(Z)
}});
return U
};
S.reject=function(V,T,U){return S.filter(V,S.negate(I(T)),U)
};
S.every=S.all=function(Y,T,V){T=I(T,V);
var X=!G(Y)&&S.keys(Y),W=(X||Y).length;
for(var U=0;
U<W;
U++){var Z=X?X[U]:U;
if(!T(Y[Z],Z,Y)){return false
}}return true
};
S.some=S.any=function(Y,T,V){T=I(T,V);
var X=!G(Y)&&S.keys(Y),W=(X||Y).length;
for(var U=0;
U<W;
U++){var Z=X?X[U]:U;
if(T(Y[Z],Z,Y)){return true
}}return false
};
S.contains=S.includes=S.include=function(W,V,T,U){if(!G(W)){W=S.values(W)
}if(typeof T!="number"||U){T=0
}return S.indexOf(W,V,T)>=0
};
S.invoke=function(V,W){var T=m.call(arguments,2);
var U=S.isFunction(W);
return S.map(V,function(Y){var X=U?W:Y[W];
return X==null?X:X.apply(Y,T)
})
};
S.pluck=function(U,T){return S.map(U,S.property(T))
};
S.where=function(U,T){return S.filter(U,S.matcher(T))
};
S.findWhere=function(U,T){return S.find(U,S.matcher(T))
};
S.max=function(W,Y,T){var ab=-Infinity,Z=-Infinity,aa,V;
if(Y==null&&W!=null){W=G(W)?W:S.values(W);
for(var X=0,U=W.length;
X<U;
X++){aa=W[X];
if(aa>ab){ab=aa
}}}else{Y=I(Y,T);
S.each(W,function(ae,ac,ad){V=Y(ae,ac,ad);
if(V>Z||V===-Infinity&&ab===-Infinity){ab=ae;
Z=V
}})
}return ab
};
S.min=function(W,Y,T){var ab=Infinity,Z=Infinity,aa,V;
if(Y==null&&W!=null){W=G(W)?W:S.values(W);
for(var X=0,U=W.length;
X<U;
X++){aa=W[X];
if(aa<ab){ab=aa
}}}else{Y=I(Y,T);
S.each(W,function(ae,ac,ad){V=Y(ae,ac,ad);
if(V<Z||V===Infinity&&ab===Infinity){ab=ae;
Z=V
}})
}return ab
};
S.shuffle=function(X){var Y=G(X)?X:S.values(X);
var W=Y.length;
var T=Array(W);
for(var U=0,V;
U<W;
U++){V=S.random(0,U);
if(V!==U){T[U]=T[V]
}T[V]=Y[U]
}return T
};
S.sample=function(U,V,T){if(V==null||T){if(!G(U)){U=S.values(U)
}return U[S.random(U.length-1)]
}return S.shuffle(U).slice(0,Math.max(0,V))
};
S.sortBy=function(U,V,T){V=I(V,T);
return S.pluck(S.map(U,function(Y,W,X){return{value:Y,index:W,criteria:V(Y,W,X)}
}).sort(function(Z,Y){var X=Z.criteria;
var W=Y.criteria;
if(X!==W){if(X>W||X===void 0){return 1
}if(X<W||W===void 0){return -1
}}return Z.index-Y.index
}),"value")
};
var r=function(T){return function(W,X,V){var U={};
X=I(X,V);
S.each(W,function(aa,Y){var Z=X(aa,Y,W);
T(U,aa,Z)
});
return U
}
};
S.groupBy=r(function(T,V,U){if(S.has(T,U)){T[U].push(V)
}else{T[U]=[V]
}});
S.indexBy=r(function(T,V,U){T[U]=V
});
S.countBy=r(function(T,V,U){if(S.has(T,U)){T[U]++
}else{T[U]=1
}});
S.toArray=function(T){if(!T){return[]
}if(S.isArray(T)){return m.call(T)
}if(G(T)){return S.map(T,S.identity)
}return S.values(T)
};
S.size=function(T){if(T==null){return 0
}return G(T)?T.length:S.keys(T).length
};
S.partition=function(X,T,V){T=I(T,V);
var W=[],U=[];
S.each(X,function(Z,Y,aa){(T(Z,Y,aa)?W:U).push(Z)
});
return[W,U]
};
S.first=S.head=S.take=function(V,U,T){if(V==null){return void 0
}if(U==null||T){return V[0]
}return S.initial(V,V.length-U)
};
S.initial=function(V,U,T){return m.call(V,0,Math.max(0,V.length-(U==null||T?1:U)))
};
S.last=function(V,U,T){if(V==null){return void 0
}if(U==null||T){return V[V.length-1]
}return S.rest(V,Math.max(0,V.length-U))
};
S.rest=S.tail=S.drop=function(V,U,T){return m.call(V,U==null||T?1:U)
};
S.compact=function(T){return S.filter(T,S.identity)
};
var A=function(Z,V,aa,ad){var U=[],ac=0;
for(var X=ad||0,T=R(Z);
X<T;
X++){var ab=Z[X];
if(G(ab)&&(S.isArray(ab)||S.isArguments(ab))){if(!V){ab=A(ab,V,aa)
}var W=0,Y=ab.length;
U.length+=Y;
while(W<Y){U[ac++]=ab[W++]
}}else{if(!aa){U[ac++]=ab
}}}return U
};
S.flatten=function(U,T){return A(U,T,false)
};
S.without=function(T){return S.difference(T,m.call(arguments,1))
};
S.uniq=S.unique=function(aa,W,Z,U){if(!S.isBoolean(W)){U=Z;
Z=W;
W=false
}if(Z!=null){Z=I(Z,U)
}var ac=[];
var T=[];
for(var Y=0,V=R(aa);
Y<V;
Y++){var ab=aa[Y],X=Z?Z(ab,Y,aa):ab;
if(W){if(!Y||T!==X){ac.push(ab)
}T=X
}else{if(Z){if(!S.contains(T,X)){T.push(X);
ac.push(ab)
}}else{if(!S.contains(ac,ab)){ac.push(ab)
}}}}return ac
};
S.union=function(){return S.uniq(A(arguments,true,true))
};
S.intersection=function(Z){var T=[];
var Y=arguments.length;
for(var V=0,X=R(Z);
V<X;
V++){var W=Z[V];
if(S.contains(T,W)){continue
}for(var U=1;
U<Y;
U++){if(!S.contains(arguments[U],W)){break
}}if(U===Y){T.push(W)
}}return T
};
S.difference=function(U){var T=A(arguments,true,true,1);
return S.filter(U,function(V){return !S.contains(T,V)
})
};
S.zip=function(){return S.unzip(arguments)
};
S.unzip=function(W){var V=W&&S.max(W,R).length||0;
var T=Array(V);
for(var U=0;
U<V;
U++){T[U]=S.pluck(W,U)
}return T
};
S.object=function(X,U){var T={};
for(var V=0,W=R(X);
V<W;
V++){if(U){T[X[V]]=U[V]
}else{T[X[V][0]]=X[V][1]
}}return T
};
function x(T){return function(Y,U,W){U=I(U,W);
var X=R(Y);
var V=T>0?0:X-1;
for(;
V>=0&&V<X;
V+=T){if(U(Y[V],V,Y)){return V
}}return -1
}
}S.findIndex=x(1);
S.findLastIndex=x(-1);
S.sortedIndex=function(aa,Y,Z,V){Z=I(Z,V,1);
var X=Z(Y);
var T=0,W=R(aa);
while(T<W){var U=Math.floor((T+W)/2);
if(Z(aa[U])<X){T=U+1
}else{W=U
}}return T
};
function f(T,U,V){return function(aa,Z,W){var X=0,Y=R(aa);
if(typeof W=="number"){if(T>0){X=W>=0?W:Math.max(W+Y,X)
}else{Y=W>=0?Math.min(W+1,Y):W+Y+1
}}else{if(V&&W&&Y){W=V(aa,Z);
return aa[W]===Z?W:-1
}}if(Z!==Z){W=U(m.call(aa,X,Y),S.isNaN);
return W>=0?W+X:-1
}for(W=T>0?X:Y-1;
W>=0&&W<Y;
W+=T){if(aa[W]===Z){return W
}}return -1
}
}S.indexOf=f(1,S.findIndex,S.sortedIndex);
S.lastIndexOf=f(-1,S.findLastIndex);
S.range=function(Y,V,X){if(V==null){V=Y||0;
Y=0
}X=X||1;
var W=Math.max(Math.ceil((V-Y)/X),0);
var U=Array(W);
for(var T=0;
T<W;
T++,Y+=X){U[T]=Y
}return U
};
var B=function(Y,V,X,Z,W){if(!(Z instanceof V)){return Y.apply(X,W)
}var U=F(Y.prototype);
var T=Y.apply(U,W);
if(S.isObject(T)){return T
}return U
};
S.bind=function(W,U){if(M&&W.bind===M){return M.apply(W,m.call(arguments,1))
}if(!S.isFunction(W)){throw new TypeError("Bind must be called on a function")
}var T=m.call(arguments,2);
var V=function(){return B(W,V,U,this,T.concat(m.call(arguments)))
};
return V
};
S.partial=function(U){var V=m.call(arguments,1);
var T=function(){var W=0,Z=V.length;
var X=Array(Z);
for(var Y=0;
Y<Z;
Y++){X[Y]=V[Y]===S?arguments[W++]:V[Y]
}while(W<arguments.length){X.push(arguments[W++])
}return B(U,T,this,this,X)
};
return T
};
S.bindAll=function(W){var U,V=arguments.length,T;
if(V<=1){throw new Error("bindAll must be passed function names")
}for(U=1;
U<V;
U++){T=arguments[U];
W[T]=S.bind(W[T],W)
}return W
};
S.memoize=function(U,T){var V=function(Y){var X=V.cache;
var W=""+(T?T.apply(this,arguments):Y);
if(!S.has(X,W)){X[W]=U.apply(this,arguments)
}return X[W]
};
V.cache={};
return V
};
S.delay=function(U,V){var T=m.call(arguments,2);
return setTimeout(function(){return U.apply(null,T)
},V)
};
S.defer=S.partial(S.delay,S,1);
S.throttle=function(U,W,aa){var T,Y,ab;
var Z=null;
var X=0;
if(!aa){aa={}
}var V=function(){X=aa.leading===false?0:S.now();
Z=null;
ab=U.apply(T,Y);
if(!Z){T=Y=null
}};
return function(){var ac=S.now();
if(!X&&aa.leading===false){X=ac
}var ad=W-(ac-X);
T=this;
Y=arguments;
if(ad<=0||ad>W){if(Z){clearTimeout(Z);
Z=null
}X=ac;
ab=U.apply(T,Y);
if(!Z){T=Y=null
}}else{if(!Z&&aa.trailing!==false){Z=setTimeout(V,ad)
}}return ab
}
};
S.debounce=function(V,X,U){var aa,Z,T,Y,ab;
var W=function(){var ac=S.now()-Y;
if(ac<X&&ac>=0){aa=setTimeout(W,X-ac)
}else{aa=null;
if(!U){ab=V.apply(T,Z);
if(!aa){T=Z=null
}}}};
return function(){T=this;
Z=arguments;
Y=S.now();
var ac=U&&!aa;
if(!aa){aa=setTimeout(W,X)
}if(ac){ab=V.apply(T,Z);
T=Z=null
}return ab
}
};
S.wrap=function(T,U){return S.partial(U,T)
};
S.negate=function(T){return function(){return !T.apply(this,arguments)
}
};
S.compose=function(){var T=arguments;
var U=T.length-1;
return function(){var W=U;
var V=T[U].apply(this,arguments);
while(W--){V=T[W].call(this,V)
}return V
}
};
S.after=function(U,T){return function(){if(--U<1){return T.apply(this,arguments)
}}
};
S.before=function(V,U){var T;
return function(){if(--V>0){T=U.apply(this,arguments)
}if(V<=1){U=null
}return T
}
};
S.once=S.partial(S.before,2);
var J=!{toString:null}.propertyIsEnumerable("toString");
var a=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];
function d(X,W){var T=a.length;
var U=X.constructor;
var V=(S.isFunction(U)&&U.prototype)||g;
var Y="constructor";
if(S.has(X,Y)&&!S.contains(W,Y)){W.push(Y)
}while(T--){Y=a[T];
if(Y in X&&X[Y]!==V[Y]&&!S.contains(W,Y)){W.push(Y)
}}}S.keys=function(V){if(!S.isObject(V)){return[]
}if(e){return e(V)
}var U=[];
for(var T in V){if(S.has(V,T)){U.push(T)
}}if(J){d(V,U)
}return U
};
S.allKeys=function(V){if(!S.isObject(V)){return[]
}var U=[];
for(var T in V){U.push(T)
}if(J){d(V,U)
}return U
};
S.values=function(X){var W=S.keys(X);
var V=W.length;
var T=Array(V);
for(var U=0;
U<V;
U++){T[U]=X[W[U]]
}return T
};
S.mapObject=function(Y,aa,V){aa=I(aa,V);
var X=S.keys(Y),W=X.length,U={},Z;
for(var T=0;
T<W;
T++){Z=X[T];
U[Z]=aa(Y[Z],Z,Y)
}return U
};
S.pairs=function(X){var V=S.keys(X);
var U=V.length;
var W=Array(U);
for(var T=0;
T<U;
T++){W[T]=[V[T],X[V[T]]]
}return W
};
S.invert=function(X){var T={};
var W=S.keys(X);
for(var U=0,V=W.length;
U<V;
U++){T[X[W[U]]]=W[U]
}return T
};
S.functions=S.methods=function(V){var U=[];
for(var T in V){if(S.isFunction(V[T])){U.push(T)
}}return U.sort()
};
S.extend=q(S.allKeys);
S.extendOwn=S.assign=q(S.keys);
S.findKey=function(Z,T,W){T=I(T,W);
var Y=S.keys(Z),V;
for(var U=0,X=Y.length;
U<X;
U++){V=Y[U];
if(T(Z[V],V,Z)){return V
}}};
S.pick=function(V,Z,T){var ad={},W=V,Y,ac;
if(W==null){return ad
}if(S.isFunction(Z)){ac=S.allKeys(W);
Y=b(Z,T)
}else{ac=A(arguments,false,false,1);
Y=function(af,ae,ag){return ae in ag
};
W=Object(W)
}for(var X=0,U=ac.length;
X<U;
X++){var ab=ac[X];
var aa=W[ab];
if(Y(aa,ab,W)){ad[ab]=aa
}}return ad
};
S.omit=function(V,W,T){if(S.isFunction(W)){W=S.negate(W)
}else{var U=S.map(A(arguments,false,false,1),String);
W=function(Y,X){return !S.contains(U,X)
}
}return S.pick(V,W,T)
};
S.defaults=q(S.allKeys,true);
S.create=function(U,V){var T=F(U);
if(V){S.extendOwn(T,V)
}return T
};
S.clone=function(T){if(!S.isObject(T)){return T
}return S.isArray(T)?T.slice():S.extend({},T)
};
S.tap=function(U,T){T(U);
return U
};
S.isMatch=function(U,T){var Y=S.keys(T),X=Y.length;
if(U==null){return !X
}var Z=Object(U);
for(var W=0;
W<X;
W++){var V=Y[W];
if(T[V]!==Z[V]||!(V in Z)){return false
}}return true
};
var Q=function(ab,aa,U,W){if(ab===aa){return ab!==0||1/ab===1/aa
}if(ab==null||aa==null){return ab===aa
}if(ab instanceof S){ab=ab._wrapped
}if(aa instanceof S){aa=aa._wrapped
}var Y=c.call(ab);
if(Y!==c.call(aa)){return false
}switch(Y){case"[object RegExp]":case"[object String]":return""+ab===""+aa;
case"[object Number]":if(+ab!==+ab){return +aa!==+aa
}return +ab===0?1/+ab===1/aa:+ab===+aa;
case"[object Date]":case"[object Boolean]":return +ab===+aa
}var V=Y==="[object Array]";
if(!V){if(typeof ab!="object"||typeof aa!="object"){return false
}var Z=ab.constructor,X=aa.constructor;
if(Z!==X&&!(S.isFunction(Z)&&Z instanceof Z&&S.isFunction(X)&&X instanceof X)&&("constructor" in ab&&"constructor" in aa)){return false
}}U=U||[];
W=W||[];
var T=U.length;
while(T--){if(U[T]===ab){return W[T]===aa
}}U.push(ab);
W.push(aa);
if(V){T=ab.length;
if(T!==aa.length){return false
}while(T--){if(!Q(ab[T],aa[T],U,W)){return false
}}}else{var ad=S.keys(ab),ac;
T=ad.length;
if(S.keys(aa).length!==T){return false
}while(T--){ac=ad[T];
if(!(S.has(aa,ac)&&Q(ab[ac],aa[ac],U,W))){return false
}}}U.pop();
W.pop();
return true
};
S.isEqual=function(U,T){return Q(U,T)
};
S.isEmpty=function(T){if(T==null){return true
}if(G(T)&&(S.isArray(T)||S.isString(T)||S.isArguments(T))){return T.length===0
}return S.keys(T).length===0
};
S.isElement=function(T){return !!(T&&T.nodeType===1)
};
S.isArray=v||function(T){return c.call(T)==="[object Array]"
};
S.isObject=function(U){var T=typeof U;
return T==="function"||T==="object"&&!!U
};
S.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(T){S["is"+T]=function(U){return c.call(U)==="[object "+T+"]"
}
});
if(!S.isArguments(arguments)){S.isArguments=function(T){return S.has(T,"callee")
}
}if(typeof/./!="function"&&typeof Int8Array!="object"){S.isFunction=function(T){return typeof T=="function"||false
}
}S.isFinite=function(T){return isFinite(T)&&!isNaN(parseFloat(T))
};
S.isNaN=function(T){return S.isNumber(T)&&T!==+T
};
S.isBoolean=function(T){return T===true||T===false||c.call(T)==="[object Boolean]"
};
S.isNull=function(T){return T===null
};
S.isUndefined=function(T){return T===void 0
};
S.has=function(U,T){return U!=null&&k.call(U,T)
};
S.noConflict=function(){y._=l;
return this
};
S.identity=function(T){return T
};
S.constant=function(T){return function(){return T
}
};
S.noop=function(){};
S.property=P;
S.propertyOf=function(T){return T==null?function(){}:function(U){return T[U]
}
};
S.matcher=S.matches=function(T){T=S.extendOwn({},T);
return function(U){return S.isMatch(U,T)
}
};
S.times=function(X,W,V){var T=Array(Math.max(0,X));
W=b(W,V,1);
for(var U=0;
U<X;
U++){T[U]=W(U)
}return T
};
S.random=function(U,T){if(T==null){T=U;
U=0
}return U+Math.floor(Math.random()*(T-U+1))
};
S.now=Date.now||function(){return new Date().getTime()
};
var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};
var n=S.invert(u);
var z=function(X){var U=function(Y){return X[Y]
};
var W="(?:"+S.keys(X).join("|")+")";
var V=RegExp(W);
var T=RegExp(W,"g");
return function(Y){Y=Y==null?"":""+Y;
return V.test(Y)?Y.replace(T,U):Y
}
};
S.escape=z(u);
S.unescape=z(n);
S.result=function(T,V,W){var U=T==null?void 0:T[V];
if(U===void 0){U=W
}return S.isFunction(U)?U.call(T):U
};
var D=0;
S.uniqueId=function(T){var U=++D+"";
return T?T+U:U
};
S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};
var w=/(.)^/;
var h={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"};
var j=/\\|'|\r|\n|\u2028|\u2029/g;
var K=function(T){return"\\"+h[T]
};
S.template=function(ac,W,Z){if(!W&&Z){W=Z
}W=S.defaults({},W,S.templateSettings);
var X=RegExp([(W.escape||w).source,(W.interpolate||w).source,(W.evaluate||w).source].join("|")+"|$","g");
var Y=0;
var T="__p+='";
ac.replace(X,function(ae,af,ad,ah,ag){T+=ac.slice(Y,ag).replace(j,K);
Y=ag+ae.length;
if(af){T+="'+\n((__t=("+af+"))==null?'':_.escape(__t))+\n'"
}else{if(ad){T+="'+\n((__t=("+ad+"))==null?'':__t)+\n'"
}else{if(ah){T+="';\n"+ah+"\n__p+='"
}}}return ae
});
T+="';\n";
if(!W.variable){T="with(obj||{}){\n"+T+"}\n"
}T="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+T+"return __p;\n";
try{var V=new Function(W.variable||"obj","_",T)
}catch(aa){aa.source=T;
throw aa
}var ab=function(ad){return V.call(this,ad,S)
};
var U=W.variable||"obj";
ab.source="function("+U+"){\n"+T+"}";
return ab
};
S.chain=function(U){var T=S(U);
T._chain=true;
return T
};
var p=function(T,U){return T._chain?S(U).chain():U
};
S.mixin=function(T){S.each(S.functions(T),function(U){var V=S[U]=T[U];
S.prototype[U]=function(){var W=[this._wrapped];
O.apply(W,arguments);
return p(this,V.apply(S,W))
}
})
};
S.mixin(S);
S.each(["pop","push","reverse","shift","sort","splice","unshift"],function(T){var U=L[T];
S.prototype[T]=function(){var V=this._wrapped;
U.apply(V,arguments);
if((T==="shift"||T==="splice")&&V.length===0){delete V[0]
}return p(this,V)
}
});
S.each(["concat","join","slice"],function(T){var U=L[T];
S.prototype[T]=function(){return p(this,U.apply(this._wrapped,arguments))
}
});
S.prototype.value=function(){return this._wrapped
};
S.prototype.valueOf=S.prototype.toJSON=S.prototype.value;
S.prototype.toString=function(){return""+this._wrapped
};
if(typeof define==="function"&&define.amd){define("underscore",[],function(){return S
})
}}.call(this));
(function(b){var a=(typeof self=="object"&&self.self==self&&self)||(typeof global=="object"&&global.global==global&&global);
if(typeof define==="function"&&define.amd){define(["underscore","jquery","exports"],function(g,h,e){a.Backbone=b(a,e,g,h)
})
}else{if(typeof exports!=="undefined"){var c=require("underscore"),d;
try{d=require("jquery")
}catch(f){}b(a,exports,c,d)
}else{a.Backbone=b(a,{},a._,(a.jQuery||a.Zepto||a.ender||a.$))
}}}(function(z,G,S,F){var K=z.Backbone;
var o=Array.prototype.slice;
G.VERSION="1.2.3";
G.$=F;
G.noConflict=function(){z.Backbone=K;
return this
};
G.emulateHTTP=false;
G.emulateJSON=false;
var L=function(U,V,T){switch(U){case 1:return function(){return S[V](this[T])
};
case 2:return function(W){return S[V](this[T],W)
};
case 3:return function(X,W){return S[V](this[T],I(X,this),W)
};
case 4:return function(X,Y,W){return S[V](this[T],I(X,this),Y,W)
};
default:return function(){var W=o.call(arguments);
W.unshift(this[T]);
return S[V].apply(S,W)
}
}};
var v=function(U,T,V){S.each(T,function(W,X){if(S[X]){U.prototype[X]=L(W,X,V)
}})
};
var I=function(U,T){if(S.isFunction(U)){return U
}if(S.isObject(U)&&!T._isModel(U)){return r(U)
}if(S.isString(U)){return function(V){return V.get(U)
}
}return U
};
var r=function(T){var U=S.matches(T);
return function(V){return U(V.attributes)
}
};
var Q=G.Events={};
var B=/\s+/;
var C=function(Y,V,T,Z,W){var U=0,X;
if(T&&typeof T==="object"){if(Z!==void 0&&"context" in W&&W.context===void 0){W.context=Z
}for(X=S.keys(T);
U<X.length;
U++){V=C(Y,V,X[U],T[X[U]],W)
}}else{if(T&&B.test(T)){for(X=T.split(B);
U<X.length;
U++){V=Y(V,X[U],Z,W)
}}else{V=Y(V,T,Z,W)
}}return V
};
Q.on=function(T,V,U){return h(this,T,V,U)
};
var h=function(X,T,Y,V,U){X._events=C(E,X._events||{},T,Y,{context:V,ctx:X,listening:U});
if(U){var W=X._listeners||(X._listeners={});
W[U.id]=U
}return X
};
Q.listenTo=function(X,U,Z){if(!X){return this
}var Y=X._listenId||(X._listenId=S.uniqueId("l"));
var W=this._listeningTo||(this._listeningTo={});
var V=W[Y];
if(!V){var T=this._listenId||(this._listenId=S.uniqueId("l"));
V=W[Y]={obj:X,objId:Y,id:T,listeningTo:W,count:0}
}h(X,U,Z,this,V);
return this
};
var E=function(Z,W,aa,V){if(aa){var U=Z[W]||(Z[W]=[]);
var Y=V.context,T=V.ctx,X=V.listening;
if(X){X.count++
}U.push({callback:aa,context:Y,ctx:Y||T,listening:X})
}return Z
};
Q.off=function(T,V,U){if(!this._events){return this
}this._events=C(d,this._events,T,V,{context:U,listeners:this._listeners});
return this
};
Q.stopListening=function(Y,T,Z){var W=this._listeningTo;
if(!W){return this
}var X=Y?[Y._listenId]:S.keys(W);
for(var V=0;
V<X.length;
V++){var U=W[X[V]];
if(!U){break
}U.obj.off(T,Z,this)
}if(S.isEmpty(W)){this._listeningTo=void 0
}return this
};
var d=function(af,U,ad,ag){if(!af){return
}var Z=0,aa;
var V=ag.context,ac=ag.listeners;
if(!U&&!ad&&!V){var T=S.keys(ac);
for(;
Z<T.length;
Z++){aa=ac[T[Z]];
delete ac[aa.id];
delete aa.listeningTo[aa.objId]
}return
}var ab=U?[U]:S.keys(af);
for(;
Z<ab.length;
Z++){U=ab[Z];
var W=af[U];
if(!W){break
}var X=[];
for(var Y=0;
Y<W.length;
Y++){var ae=W[Y];
if(ad&&ad!==ae.callback&&ad!==ae.callback._callback||V&&V!==ae.context){X.push(ae)
}else{aa=ae.listening;
if(aa&&--aa.count===0){delete ac[aa.id];
delete aa.listeningTo[aa.objId]
}}}if(X.length){af[U]=X
}else{delete af[U]
}}if(S.size(af)){return af
}};
Q.once=function(T,W,V){var U=C(J,{},T,W,S.bind(this.off,this));
return this.on(U,void 0,V)
};
Q.listenToOnce=function(V,T,W){var U=C(J,{},T,W,S.bind(this.stopListening,this,V));
return this.listenTo(V,U)
};
var J=function(W,T,X,V){if(X){var U=W[T]=S.once(function(){V(T,U);
X.apply(this,arguments)
});
U._callback=X
}return W
};
Q.trigger=function(U){if(!this._events){return this
}var W=Math.max(0,arguments.length-1);
var T=Array(W);
for(var V=0;
V<W;
V++){T[V]=arguments[V+1]
}C(n,this._events,U,void 0,T);
return this
};
var n=function(U,X,T,W){if(U){var Y=U[X];
var V=U.all;
if(Y&&V){V=V.slice()
}if(Y){b(Y,W)
}if(V){b(V,[X].concat(W))
}}return U
};
var b=function(Y,W){var Z,X=-1,V=Y.length,U=W[0],T=W[1],aa=W[2];
switch(W.length){case 0:while(++X<V){(Z=Y[X]).callback.call(Z.ctx)
}return;
case 1:while(++X<V){(Z=Y[X]).callback.call(Z.ctx,U)
}return;
case 2:while(++X<V){(Z=Y[X]).callback.call(Z.ctx,U,T)
}return;
case 3:while(++X<V){(Z=Y[X]).callback.call(Z.ctx,U,T,aa)
}return;
default:while(++X<V){(Z=Y[X]).callback.apply(Z.ctx,W)
}return
}};
Q.bind=Q.on;
Q.unbind=Q.off;
S.extend(G,Q);
var M=G.Model=function(T,V){var U=T||{};
V||(V={});
this.cid=S.uniqueId(this.cidPrefix);
this.attributes={};
if(V.collection){this.collection=V.collection
}if(V.parse){U=this.parse(U,V)||{}
}U=S.defaults({},U,S.result(this,"defaults"));
this.set(U,V);
this.changed={};
this.initialize.apply(this,arguments)
};
S.extend(M.prototype,Q,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(T){return S.clone(this.attributes)
},sync:function(){return G.sync.apply(this,arguments)
},get:function(T){return this.attributes[T]
},escape:function(T){return S.escape(this.get(T))
},has:function(T){return this.get(T)!=null
},matches:function(T){return !!S.iteratee(T,this)(this.attributes)
},set:function(ab,T,af){if(ab==null){return this
}var ac;
if(typeof ab==="object"){ac=ab;
af=T
}else{(ac={})[ab]=T
}af||(af={});
if(!this._validate(ac,af)){return false
}var ad=af.unset;
var Z=af.silent;
var aa=[];
var ae=this._changing;
this._changing=true;
if(!ae){this._previousAttributes=S.clone(this.attributes);
this.changed={}
}var Y=this.attributes;
var W=this.changed;
var U=this._previousAttributes;
for(var X in ac){T=ac[X];
if(!S.isEqual(Y[X],T)){aa.push(X)
}if(!S.isEqual(U[X],T)){W[X]=T
}else{delete W[X]
}ad?delete Y[X]:Y[X]=T
}this.id=this.get(this.idAttribute);
if(!Z){if(aa.length){this._pending=af
}for(var V=0;
V<aa.length;
V++){this.trigger("change:"+aa[V],this,Y[aa[V]],af)
}}if(ae){return this
}if(!Z){while(this._pending){af=this._pending;
this._pending=false;
this.trigger("change",this,af)
}}this._pending=false;
this._changing=false;
return this
},unset:function(T,U){return this.set(T,void 0,S.extend({},U,{unset:true}))
},clear:function(U){var T={};
for(var V in this.attributes){T[V]=void 0
}return this.set(T,S.extend({},U,{unset:true}))
},hasChanged:function(T){if(T==null){return !S.isEmpty(this.changed)
}return S.has(this.changed,T)
},changedAttributes:function(V){if(!V){return this.hasChanged()?S.clone(this.changed):false
}var U=this._changing?this._previousAttributes:this.attributes;
var X={};
for(var T in V){var W=V[T];
if(S.isEqual(U[T],W)){continue
}X[T]=W
}return S.size(X)?X:false
},previous:function(T){if(T==null||!this._previousAttributes){return null
}return this._previousAttributes[T]
},previousAttributes:function(){return S.clone(this._previousAttributes)
},fetch:function(U){U=S.extend({parse:true},U);
var T=this;
var V=U.success;
U.success=function(X){var W=U.parse?T.parse(X,U):X;
if(!T.set(W,U)){return false
}if(V){V.call(U.context,T,X,U)
}T.trigger("sync",T,X,U)
};
P(this,U);
return this.sync("read",this,U)
},save:function(Y,U,ac){var Z;
if(Y==null||typeof Y==="object"){Z=Y;
ac=U
}else{(Z={})[Y]=U
}ac=S.extend({validate:true,parse:true},ac);
var W=ac.wait;
if(Z&&!W){if(!this.set(Z,ac)){return false
}}else{if(!this._validate(Z,ac)){return false
}}var X=this;
var aa=ac.success;
var V=this.attributes;
ac.success=function(ae){X.attributes=V;
var ad=ac.parse?X.parse(ae,ac):ae;
if(W){ad=S.extend({},Z,ad)
}if(ad&&!X.set(ad,ac)){return false
}if(aa){aa.call(ac.context,X,ae,ac)
}X.trigger("sync",X,ae,ac)
};
P(this,ac);
if(Z&&W){this.attributes=S.extend({},V,Z)
}var T=this.isNew()?"create":(ac.patch?"patch":"update");
if(T==="patch"&&!ac.attrs){ac.attrs=Z
}var ab=this.sync(T,this,ac);
this.attributes=V;
return ab
},destroy:function(U){U=U?S.clone(U):{};
var T=this;
var Y=U.success;
var W=U.wait;
var V=function(){T.stopListening();
T.trigger("destroy",T,T.collection,U)
};
U.success=function(Z){if(W){V()
}if(Y){Y.call(U.context,T,Z,U)
}if(!T.isNew()){T.trigger("sync",T,Z,U)
}};
var X=false;
if(this.isNew()){S.defer(U.success)
}else{P(this,U);
X=this.sync("delete",this,U)
}if(!W){V()
}return X
},url:function(){var T=S.result(this,"urlRoot")||S.result(this.collection,"url")||w();
if(this.isNew()){return T
}var U=this.get(this.idAttribute);
return T.replace(/[^\/]$/,"$&/")+encodeURIComponent(U)
},parse:function(U,T){return U
},clone:function(){return new this.constructor(this.attributes)
},isNew:function(){return !this.has(this.idAttribute)
},isValid:function(T){return this._validate({},S.defaults({validate:true},T))
},_validate:function(V,U){if(!U.validate||!this.validate){return true
}V=S.extend({},this.attributes,V);
var T=this.validationError=this.validate(V,U)||null;
if(!T){return true
}this.trigger("invalid",this,T,S.extend(U,{validationError:T}));
return false
}});
var a={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};
v(M,a,"attributes");
var c=G.Collection=function(U,T){T||(T={});
if(T.model){this.model=T.model
}if(T.comparator!==void 0){this.comparator=T.comparator
}this._reset();
this.initialize.apply(this,arguments);
if(U){this.reset(U,S.extend({silent:true},T))
}};
var p={add:true,remove:true,merge:true};
var R={add:true,remove:false};
var y=function(Y,X,T){T=Math.min(Math.max(T,0),Y.length);
var U=Array(Y.length-T);
var W=X.length;
for(var V=0;
V<U.length;
V++){U[V]=Y[V+T]
}for(V=0;
V<W;
V++){Y[V+T]=X[V]
}for(V=0;
V<U.length;
V++){Y[V+W+T]=U[V]
}};
S.extend(c.prototype,Q,{model:M,initialize:function(){},toJSON:function(T){return this.map(function(U){return U.toJSON(T)
})
},sync:function(){return G.sync.apply(this,arguments)
},add:function(U,T){return this.set(U,S.extend({merge:false},T,R))
},remove:function(W,T){T=S.extend({},T);
var U=!S.isArray(W);
W=U?[W]:S.clone(W);
var V=this._removeModels(W,T);
if(!T.silent&&V){this.trigger("update",this,T)
}return U?V[0]:V
},set:function(ak,U){if(ak==null){return
}U=S.defaults({},U,p);
if(U.parse&&!this._isModel(ak)){ak=this.parse(ak,U)
}var X=!S.isArray(ak);
ak=X?[ak]:ak.slice();
var Z=U.at;
if(Z!=null){Z=+Z
}if(Z<0){Z+=this.length+1
}var Y=[];
var al=[];
var ae=[];
var ac={};
var aa=U.add;
var W=U.merge;
var am=U.remove;
var ai=false;
var T=this.comparator&&(Z==null)&&U.sort!==false;
var ah=S.isString(this.comparator)?this.comparator:null;
var V;
for(var ag=0;
ag<ak.length;
ag++){V=ak[ag];
var ab=this.get(V);
if(ab){if(W&&V!==ab){var ad=this._isModel(V)?V.attributes:V;
if(U.parse){ad=ab.parse(ad,U)
}ab.set(ad,U);
if(T&&!ai){ai=ab.hasChanged(ah)
}}if(!ac[ab.cid]){ac[ab.cid]=true;
Y.push(ab)
}ak[ag]=ab
}else{if(aa){V=ak[ag]=this._prepareModel(V,U);
if(V){al.push(V);
this._addReference(V,U);
ac[V.cid]=true;
Y.push(V)
}}}}if(am){for(ag=0;
ag<this.length;
ag++){V=this.models[ag];
if(!ac[V.cid]){ae.push(V)
}}if(ae.length){this._removeModels(ae,U)
}}var af=false;
var aj=!T&&aa&&am;
if(Y.length&&aj){af=this.length!=Y.length||S.some(this.models,function(ao,an){return ao!==Y[an]
});
this.models.length=0;
y(this.models,Y,0);
this.length=this.models.length
}else{if(al.length){if(T){ai=true
}y(this.models,al,Z==null?this.length:Z);
this.length=this.models.length
}}if(ai){this.sort({silent:true})
}if(!U.silent){for(ag=0;
ag<al.length;
ag++){if(Z!=null){U.index=Z+ag
}V=al[ag];
V.trigger("add",V,this,U)
}if(ai||af){this.trigger("sort",this,U)
}if(al.length||ae.length){this.trigger("update",this,U)
}}return X?ak[0]:ak
},reset:function(V,T){T=T?S.clone(T):{};
for(var U=0;
U<this.models.length;
U++){this._removeReference(this.models[U],T)
}T.previousModels=this.models;
this._reset();
V=this.add(V,S.extend({silent:true},T));
if(!T.silent){this.trigger("reset",this,T)
}return V
},push:function(U,T){return this.add(U,S.extend({at:this.length},T))
},pop:function(U){var T=this.at(this.length-1);
return this.remove(T,U)
},unshift:function(U,T){return this.add(U,S.extend({at:0},T))
},shift:function(U){var T=this.at(0);
return this.remove(T,U)
},slice:function(){return o.apply(this.models,arguments)
},get:function(T){if(T==null){return void 0
}var U=this.modelId(this._isModel(T)?T.attributes:T);
return this._byId[T]||this._byId[U]||this._byId[T.cid]
},at:function(T){if(T<0){T+=this.length
}return this.models[T]
},where:function(T,U){return this[U?"find":"filter"](T)
},findWhere:function(T){return this.where(T,true)
},sort:function(U){var T=this.comparator;
if(!T){throw new Error("Cannot sort a set without a comparator")
}U||(U={});
var V=T.length;
if(S.isFunction(T)){T=S.bind(T,this)
}if(V===1||S.isString(T)){this.models=this.sortBy(T)
}else{this.models.sort(T)
}if(!U.silent){this.trigger("sort",this,U)
}return this
},pluck:function(T){return S.invoke(this.models,"get",T)
},fetch:function(T){T=S.extend({parse:true},T);
var V=T.success;
var U=this;
T.success=function(W){var X=T.reset?"reset":"set";
U[X](W,T);
if(V){V.call(T.context,U,W,T)
}U.trigger("sync",U,W,T)
};
P(this,T);
return this.sync("read",this,T)
},create:function(U,T){T=T?S.clone(T):{};
var V=T.wait;
U=this._prepareModel(U,T);
if(!U){return false
}if(!V){this.add(U,T)
}var X=this;
var W=T.success;
T.success=function(Z,aa,Y){if(V){X.add(Z,Y)
}if(W){W.call(Y.context,Z,aa,Y)
}};
U.save(null,T);
return U
},parse:function(U,T){return U
},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})
},modelId:function(T){return T[this.model.prototype.idAttribute||"id"]
},_reset:function(){this.length=0;
this.models=[];
this._byId={}
},_prepareModel:function(V,U){if(this._isModel(V)){if(!V.collection){V.collection=this
}return V
}U=U?S.clone(U):{};
U.collection=this;
var T=new this.model(V,U);
if(!T.validationError){return T
}this.trigger("invalid",this,T.validationError,U);
return false
},_removeModels:function(Y,V){var X=[];
for(var W=0;
W<Y.length;
W++){var U=this.get(Y[W]);
if(!U){continue
}var T=this.indexOf(U);
this.models.splice(T,1);
this.length--;
if(!V.silent){V.index=T;
U.trigger("remove",U,this,V)
}X.push(U);
this._removeReference(U,V)
}return X.length?X:false
},_isModel:function(T){return T instanceof M
},_addReference:function(U,T){this._byId[U.cid]=U;
var V=this.modelId(U.attributes);
if(V!=null){this._byId[V]=U
}U.on("all",this._onModelEvent,this)
},_removeReference:function(U,T){delete this._byId[U.cid];
var V=this.modelId(U.attributes);
if(V!=null){delete this._byId[V]
}if(this===U.collection){delete U.collection
}U.off("all",this._onModelEvent,this)
},_onModelEvent:function(V,U,X,T){if((V==="add"||V==="remove")&&X!==this){return
}if(V==="destroy"){this.remove(U,T)
}if(V==="change"){var W=this.modelId(U.previousAttributes());
var Y=this.modelId(U.attributes);
if(W!==Y){if(W!=null){delete this._byId[W]
}if(Y!=null){this._byId[Y]=U
}}}this.trigger.apply(this,arguments)
}});
var D={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};
v(c,D,"models");
var O=G.View=function(T){this.cid=S.uniqueId("view");
S.extend(this,S.pick(T,f));
this._ensureElement();
this.initialize.apply(this,arguments)
};
var A=/^(\S+)\s*(.*)$/;
var f=["model","collection","el","id","attributes","className","tagName","events"];
S.extend(O.prototype,Q,{tagName:"div",$:function(T){return this.$el.find(T)
},initialize:function(){},render:function(){return this
},remove:function(){this._removeElement();
this.stopListening();
return this
},_removeElement:function(){this.$el.remove()
},setElement:function(T){this.undelegateEvents();
this._setElement(T);
this.delegateEvents();
return this
},_setElement:function(T){this.$el=T instanceof G.$?T:G.$(T);
this.el=this.$el[0]
},delegateEvents:function(V){V||(V=S.result(this,"events"));
if(!V){return this
}this.undelegateEvents();
for(var U in V){var W=V[U];
if(!S.isFunction(W)){W=this[W]
}if(!W){continue
}var T=U.match(A);
this.delegate(T[1],T[2],S.bind(W,this))
}return this
},delegate:function(U,T,V){this.$el.on(U+".delegateEvents"+this.cid,T,V);
return this
},undelegateEvents:function(){if(this.$el){this.$el.off(".delegateEvents"+this.cid)
}return this
},undelegate:function(U,T,V){this.$el.off(U+".delegateEvents"+this.cid,T,V);
return this
},_createElement:function(T){return document.createElement(T)
},_ensureElement:function(){if(!this.el){var T=S.extend({},S.result(this,"attributes"));
if(this.id){T.id=S.result(this,"id")
}if(this.className){T["class"]=S.result(this,"className")
}this.setElement(this._createElement(S.result(this,"tagName")));
this._setAttributes(T)
}else{this.setElement(S.result(this,"el"))
}},_setAttributes:function(T){this.$el.attr(T)
}});
G.sync=function(aa,V,U){var X=l[aa];
S.defaults(U||(U={}),{emulateHTTP:G.emulateHTTP,emulateJSON:G.emulateJSON});
var Z={type:X,dataType:"json"};
if(!U.url){Z.url=S.result(V,"url")||w()
}if(U.data==null&&V&&(aa==="create"||aa==="update"||aa==="patch")){Z.contentType="application/json";
Z.data=JSON.stringify(U.attrs||V.toJSON(U))
}if(U.emulateJSON){Z.contentType="application/x-www-form-urlencoded";
Z.data=Z.data?{model:Z.data}:{}
}if(U.emulateHTTP&&(X==="PUT"||X==="DELETE"||X==="PATCH")){Z.type="POST";
if(U.emulateJSON){Z.data._method=X
}var W=U.beforeSend;
U.beforeSend=function(ab){ab.setRequestHeader("X-HTTP-Method-Override",X);
if(W){return W.apply(this,arguments)
}}
}if(Z.type!=="GET"&&!U.emulateJSON){Z.processData=false
}var T=U.error;
U.error=function(ac,ad,ab){U.textStatus=ad;
U.errorThrown=ab;
if(T){T.call(U.context,ac,ad,ab)
}};
var Y=U.xhr=G.ajax(S.extend(Z,U));
V.trigger("request",V,Y,U);
return Y
};
var l={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};
G.ajax=function(){return G.$.ajax.apply(G.$,arguments)
};
var q=G.Router=function(T){T||(T={});
if(T.routes){this.routes=T.routes
}this._bindRoutes();
this.initialize.apply(this,arguments)
};
var u=/\((.*?)\)/g;
var x=/(\(\?)?:\w+/g;
var e=/\*\w+/g;
var j=/[\-{}\[\]+?.,\\\^$|#\s]/g;
S.extend(q.prototype,Q,{initialize:function(){},route:function(U,V,W){if(!S.isRegExp(U)){U=this._routeToRegExp(U)
}if(S.isFunction(V)){W=V;
V=""
}if(!W){W=this[V]
}var T=this;
G.history.route(U,function(Y){var X=T._extractParameters(U,Y);
if(T.execute(W,X,V)!==false){T.trigger.apply(T,["route:"+V].concat(X));
T.trigger("route",V,X);
G.history.trigger("route",T,V,X)
}});
return this
},execute:function(V,U,T){if(V){V.apply(this,U)
}},navigate:function(U,T){G.history.navigate(U,T);
return this
},_bindRoutes:function(){if(!this.routes){return
}this.routes=S.result(this,"routes");
var U,T=S.keys(this.routes);
while((U=T.pop())!=null){this.route(U,this.routes[U])
}},_routeToRegExp:function(T){T=T.replace(j,"\\$&").replace(u,"(?:$1)?").replace(x,function(V,U){return U?V:"([^/?]+)"
}).replace(e,"([^?]*?)");
return new RegExp("^"+T+"(?:\\?([\\s\\S]*))?$")
},_extractParameters:function(T,U){var V=T.exec(U).slice(1);
return S.map(V,function(X,W){if(W===V.length-1){return X||null
}return X?decodeURIComponent(X):null
})
}});
var k=G.History=function(){this.handlers=[];
this.checkUrl=S.bind(this.checkUrl,this);
if(typeof window!=="undefined"){this.location=window.location;
this.history=window.history
}};
var H=/^[#\/]|\s+$/g;
var g=/^\/+|\/+$/g;
var N=/#.*$/;
k.started=false;
S.extend(k.prototype,Q,{interval:50,atRoot:function(){var T=this.location.pathname.replace(/[^\/]$/,"$&/");
return T===this.root&&!this.getSearch()
},matchRoot:function(){var U=this.decodeFragment(this.location.pathname);
var T=U.slice(0,this.root.length-1)+"/";
return T===this.root
},decodeFragment:function(T){return decodeURI(T.replace(/%25/g,"%2525"))
},getSearch:function(){var T=this.location.href.replace(/#.*/,"").match(/\?.+/);
return T?T[0]:""
},getHash:function(U){var T=(U||this).location.href.match(/#(.*)$/);
return T?T[1]:""
},getPath:function(){var T=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);
return T.charAt(0)==="/"?T.slice(1):T
},getFragment:function(T){if(T==null){if(this._usePushState||!this._wantsHashChange){T=this.getPath()
}else{T=this.getHash()
}}return T.replace(H,"")
},start:function(V){if(k.started){throw new Error("Backbone.history has already been started")
}k.started=true;
this.options=S.extend({root:"/"},this.options,V);
this.root=this.options.root;
this._wantsHashChange=this.options.hashChange!==false;
this._hasHashChange="onhashchange" in window&&(document.documentMode===void 0||document.documentMode>7);
this._useHashChange=this._wantsHashChange&&this._hasHashChange;
this._wantsPushState=!!this.options.pushState;
this._hasPushState=!!(this.history&&this.history.pushState);
this._usePushState=this._wantsPushState&&this._hasPushState;
this.fragment=this.getFragment();
this.root=("/"+this.root+"/").replace(g,"/");
if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var U=this.root.slice(0,-1)||"/";
this.location.replace(U+"#"+this.getPath());
return true
}else{if(this._hasPushState&&this.atRoot()){this.navigate(this.getHash(),{replace:true})
}}}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe");
this.iframe.src="javascript:0";
this.iframe.style.display="none";
this.iframe.tabIndex=-1;
var T=document.body;
var W=T.insertBefore(this.iframe,T.firstChild).contentWindow;
W.document.open();
W.document.close();
W.location.hash="#"+this.fragment
}var X=window.addEventListener||function(Y,Z){return attachEvent("on"+Y,Z)
};
if(this._usePushState){X("popstate",this.checkUrl,false)
}else{if(this._useHashChange&&!this.iframe){X("hashchange",this.checkUrl,false)
}else{if(this._wantsHashChange){this._checkUrlInterval=setInterval(this.checkUrl,this.interval)
}}}if(!this.options.silent){return this.loadUrl()
}},stop:function(){var T=window.removeEventListener||function(U,V){return detachEvent("on"+U,V)
};
if(this._usePushState){T("popstate",this.checkUrl,false)
}else{if(this._useHashChange&&!this.iframe){T("hashchange",this.checkUrl,false)
}}if(this.iframe){document.body.removeChild(this.iframe);
this.iframe=null
}if(this._checkUrlInterval){clearInterval(this._checkUrlInterval)
}k.started=false
},route:function(T,U){this.handlers.unshift({route:T,callback:U})
},checkUrl:function(U){var T=this.getFragment();
if(T===this.fragment&&this.iframe){T=this.getHash(this.iframe.contentWindow)
}if(T===this.fragment){return false
}if(this.iframe){this.navigate(T)
}this.loadUrl()
},loadUrl:function(T){if(!this.matchRoot()){return false
}T=this.fragment=this.getFragment(T);
return S.some(this.handlers,function(U){if(U.route.test(T)){U.callback(T);
return true
}})
},navigate:function(W,V){if(!k.started){return false
}if(!V||V===true){V={trigger:!!V}
}W=this.getFragment(W||"");
var T=this.root;
if(W===""||W.charAt(0)==="?"){T=T.slice(0,-1)||"/"
}var U=T+W;
W=this.decodeFragment(W.replace(N,""));
if(this.fragment===W){return
}this.fragment=W;
if(this._usePushState){this.history[V.replace?"replaceState":"pushState"]({},document.title,U)
}else{if(this._wantsHashChange){this._updateHash(this.location,W,V.replace);
if(this.iframe&&(W!==this.getHash(this.iframe.contentWindow))){var X=this.iframe.contentWindow;
if(!V.replace){X.document.open();
X.document.close()
}this._updateHash(X.location,W,V.replace)
}}else{return this.location.assign(U)
}}if(V.trigger){return this.loadUrl(W)
}},_updateHash:function(T,V,W){if(W){var U=T.href.replace(/(javascript:|#).*$/,"");
T.replace(U+"#"+V)
}else{T.hash="#"+V
}}});
G.history=new k;
var m=function(T,V){var U=this;
var X;
if(T&&S.has(T,"constructor")){X=T.constructor
}else{X=function(){return U.apply(this,arguments)
}
}S.extend(X,U,V);
var W=function(){this.constructor=X
};
W.prototype=U.prototype;
X.prototype=new W;
if(T){S.extend(X.prototype,T)
}X.__super__=U.prototype;
return X
};
M.extend=c.extend=q.extend=O.extend=k.extend=m;
var w=function(){throw new Error('A "url" property or function must be specified')
};
var P=function(V,U){var T=U.error;
U.error=function(W){if(T){T.call(U.context,V,W,U)
}V.trigger("error",V,W,U)
}
};
return G
}));
/*!
Waypoints - 3.1.1
Copyright © 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
(function(){var b=0;
var c={};
function a(d){if(!d){throw new Error("No options passed to Waypoint constructor")
}if(!d.element){throw new Error("No element option passed to Waypoint constructor")
}if(!d.handler){throw new Error("No handler option passed to Waypoint constructor")
}this.key="waypoint-"+b;
this.options=a.Adapter.extend({},a.defaults,d);
this.element=this.options.element;
this.adapter=new a.Adapter(this.element);
this.callback=d.handler;
this.axis=this.options.horizontal?"horizontal":"vertical";
this.enabled=this.options.enabled;
this.triggerPoint=null;
this.group=a.Group.findOrCreate({name:this.options.group,axis:this.axis});
this.context=a.Context.findOrCreateByElement(this.options.context);
if(a.offsetAliases[this.options.offset]){this.options.offset=a.offsetAliases[this.options.offset]
}this.group.add(this);
this.context.add(this);
c[this.key]=this;
b+=1
}a.prototype.queueTrigger=function(d){this.group.queueTrigger(this,d)
};
a.prototype.trigger=function(d){if(!this.enabled){return
}if(this.callback){this.callback.apply(this,d)
}};
a.prototype.destroy=function(){this.context.remove(this);
this.group.remove(this);
delete c[this.key]
};
a.prototype.disable=function(){this.enabled=false;
return this
};
a.prototype.enable=function(){this.context.refresh();
this.enabled=true;
return this
};
a.prototype.next=function(){return this.group.next(this)
};
a.prototype.previous=function(){return this.group.previous(this)
};
a.invokeAll=function(h){var g=[];
for(var e in c){g.push(c[e])
}for(var f=0,d=g.length;
f<d;
f++){g[f][h]()
}};
a.destroyAll=function(){a.invokeAll("destroy")
};
a.disableAll=function(){a.invokeAll("disable")
};
a.enableAll=function(){a.invokeAll("enable")
};
a.refreshAll=function(){a.Context.refreshAll()
};
a.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight
};
a.viewportWidth=function(){return document.documentElement.clientWidth
};
a.adapters=[];
a.defaults={context:window,continuous:true,enabled:true,group:"default",horizontal:false,offset:0};
a.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()
},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()
}};
window.Waypoint=a
}());
(function(){function d(g){window.setTimeout(g,1000/60)
}var c=0;
var f={};
var b=window.Waypoint;
var e=window.onload;
function a(g){this.element=g;
this.Adapter=b.Adapter;
this.adapter=new this.Adapter(g);
this.key="waypoint-context-"+c;
this.didScroll=false;
this.didResize=false;
this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()};
this.waypoints={vertical:{},horizontal:{}};
g.waypointContextKey=this.key;
f[g.waypointContextKey]=this;
c+=1;
this.createThrottledScrollHandler();
this.createThrottledResizeHandler()
}a.prototype.add=function(g){var h=g.options.horizontal?"horizontal":"vertical";
this.waypoints[h][g.key]=g;
this.refresh()
};
a.prototype.checkEmpty=function(){var g=this.Adapter.isEmptyObject(this.waypoints.horizontal);
var h=this.Adapter.isEmptyObject(this.waypoints.vertical);
if(g&&h){this.adapter.off(".waypoints");
delete f[this.key]
}};
a.prototype.createThrottledResizeHandler=function(){var g=this;
function h(){g.handleResize();
g.didResize=false
}this.adapter.on("resize.waypoints",function(){if(!g.didResize){g.didResize=true;
b.requestAnimationFrame(h)
}})
};
a.prototype.createThrottledScrollHandler=function(){var g=this;
function h(){g.handleScroll();
g.didScroll=false
}this.adapter.on("scroll.waypoints",function(){if(!g.didScroll||b.isTouch){g.didScroll=true;
b.requestAnimationFrame(h)
}})
};
a.prototype.handleResize=function(){b.Context.refreshAll()
};
a.prototype.handleScroll=function(){var o={};
var n={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};
for(var h in n){var k=n[h];
var u=k.newScroll>k.oldScroll;
var q=u?k.forward:k.backward;
for(var m in this.waypoints[h]){var l=this.waypoints[h][m];
var p=k.oldScroll<l.triggerPoint;
var j=k.newScroll>=l.triggerPoint;
var g=p&&j;
var r=!p&&!j;
if(g||r){l.queueTrigger(q);
o[l.group.id]=l.group
}}}for(var v in o){o[v].flushTriggers()
}this.oldScroll={x:n.horizontal.newScroll,y:n.vertical.newScroll}
};
a.prototype.innerHeight=function(){if(this.element==this.element.window){return b.viewportHeight()
}return this.adapter.innerHeight()
};
a.prototype.remove=function(g){delete this.waypoints[g.axis][g.key];
this.checkEmpty()
};
a.prototype.innerWidth=function(){if(this.element==this.element.window){return b.viewportWidth()
}return this.adapter.innerWidth()
};
a.prototype.destroy=function(){var l=[];
for(var k in this.waypoints){for(var h in this.waypoints[k]){l.push(this.waypoints[k][h])
}}for(var j=0,g=l.length;
j<g;
j++){l[j].destroy()
}};
a.prototype.refresh=function(){var j=this.element==this.element.window;
var q=j?undefined:this.adapter.offset();
var v={};
var u;
this.handleScroll();
u={horizontal:{contextOffset:j?0:q.left,contextScroll:j?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:j?0:q.top,contextScroll:j?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};
for(var h in u){var k=u[h];
for(var n in this.waypoints[h]){var l=this.waypoints[h][n];
var y=l.options.offset;
var z=l.triggerPoint;
var g=0;
var x=z==null;
var w,r,p;
var m,o;
if(l.element!==l.element.window){g=l.adapter.offset()[k.offsetProp]
}if(typeof y==="function"){y=y.apply(l)
}else{if(typeof y==="string"){y=parseFloat(y);
if(l.options.offset.indexOf("%")>-1){y=Math.ceil(k.contextDimension*y/100)
}}}w=k.contextScroll-k.contextOffset;
l.triggerPoint=g+w-y;
r=z<k.oldScroll;
p=l.triggerPoint>=k.oldScroll;
m=r&&p;
o=!r&&!p;
if(!x&&m){l.queueTrigger(k.backward);
v[l.group.id]=l.group
}else{if(!x&&o){l.queueTrigger(k.forward);
v[l.group.id]=l.group
}else{if(x&&k.oldScroll>=l.triggerPoint){l.queueTrigger(k.forward);
v[l.group.id]=l.group
}}}}}b.requestAnimationFrame(function(){for(var A in v){v[A].flushTriggers()
}});
return this
};
a.findOrCreateByElement=function(g){return a.findByElement(g)||new a(g)
};
a.refreshAll=function(){for(var g in f){f[g].refresh()
}};
a.findByElement=function(g){return f[g.waypointContextKey]
};
window.onload=function(){if(e){e()
}a.refreshAll()
};
b.requestAnimationFrame=function(h){var g=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||d;
g.call(window,h)
};
b.Context=a
}());
(function(){function e(g,f){return g.triggerPoint-f.triggerPoint
}function d(g,f){return f.triggerPoint-g.triggerPoint
}var a={vertical:{},horizontal:{}};
var b=window.Waypoint;
function c(f){this.name=f.name;
this.axis=f.axis;
this.id=this.name+"-"+this.axis;
this.waypoints=[];
this.clearTriggerQueues();
a[this.axis][this.name]=this
}c.prototype.add=function(f){this.waypoints.push(f)
};
c.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}
};
c.prototype.flushTriggers=function(){for(var k in this.triggerQueues){var l=this.triggerQueues[k];
var h=k==="up"||k==="left";
l.sort(h?d:e);
for(var j=0,g=l.length;
j<g;
j+=1){var f=l[j];
if(f.options.continuous||j===l.length-1){f.trigger([k])
}}}this.clearTriggerQueues()
};
c.prototype.next=function(f){this.waypoints.sort(e);
var g=b.Adapter.inArray(f,this.waypoints);
var h=g===this.waypoints.length-1;
return h?null:this.waypoints[g+1]
};
c.prototype.previous=function(f){this.waypoints.sort(e);
var g=b.Adapter.inArray(f,this.waypoints);
return g?this.waypoints[g-1]:null
};
c.prototype.queueTrigger=function(f,g){this.triggerQueues[g].push(f)
};
c.prototype.remove=function(f){var g=b.Adapter.inArray(f,this.waypoints);
if(g>-1){this.waypoints.splice(g,1)
}};
c.prototype.first=function(){return this.waypoints[0]
};
c.prototype.last=function(){return this.waypoints[this.waypoints.length-1]
};
c.findOrCreate=function(f){return a[f.axis][f.name]||new c(f)
};
b.Group=c
}());
(function(){var c=window.jQuery;
var b=window.Waypoint;
function a(d){this.$element=c(d)
}c.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(d,e){a.prototype[e]=function(){var f=Array.prototype.slice.call(arguments);
return this.$element[e].apply(this.$element,f)
}
});
c.each(["extend","inArray","isEmptyObject"],function(d,e){a[e]=c[e]
});
b.adapters.push({name:"jquery",Adapter:a});
b.Adapter=a
}());
(function(){var a=window.Waypoint;
function b(c){return function(){var e=[];
var d=arguments[0];
if(c.isFunction(arguments[0])){d=c.extend({},arguments[1]);
d.handler=arguments[0]
}this.each(function(){var f=c.extend({},d,{element:this});
if(typeof f.context==="string"){f.context=c(this).closest(f.context)[0]
}e.push(new a(f))
});
return e
}
}if(window.jQuery){window.jQuery.fn.waypoint=b(window.jQuery)
}if(window.Zepto){window.Zepto.fn.waypoint=b(window.Zepto)
}}());
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)
}else{if(typeof exports==="object"){module.exports=a
}else{a(jQuery)
}}}(function(c){var d=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],k=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],h=Array.prototype.slice,j,b;
if(c.event.fixHooks){for(var e=d.length;
e;
){c.event.fixHooks[d[--e]]=c.event.mouseHooks
}}var f=c.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var m=k.length;
m;
){this.addEventListener(k[--m],l,false)
}}else{this.onmousewheel=l
}c.data(this,"mousewheel-line-height",f.getLineHeight(this));
c.data(this,"mousewheel-page-height",f.getPageHeight(this))
},teardown:function(){if(this.removeEventListener){for(var m=k.length;
m;
){this.removeEventListener(k[--m],l,false)
}}else{this.onmousewheel=null
}c.removeData(this,"mousewheel-line-height");
c.removeData(this,"mousewheel-page-height")
},getLineHeight:function(n){var m=c(n),o=m["offsetParent" in c.fn?"offsetParent":"parent"]();
if(!o.length){o=c("body")
}return parseInt(o.css("fontSize"),10)||parseInt(m.css("fontSize"),10)||16
},getPageHeight:function(m){return c(m).height()
},settings:{adjustOldDeltas:true,normalizeOffset:true}};
c.fn.extend({mousewheel:function(m){return m?this.bind("mousewheel",m):this.trigger("mousewheel")
},unmousewheel:function(m){return this.unbind("mousewheel",m)
}});
function l(m){var p=m||window.event,x=h.call(arguments,1),z=0,r=0,q=0,w=0,v=0,u=0;
m=c.event.fix(p);
m.type="mousewheel";
if("detail" in p){q=p.detail*-1
}if("wheelDelta" in p){q=p.wheelDelta
}if("wheelDeltaY" in p){q=p.wheelDeltaY
}if("wheelDeltaX" in p){r=p.wheelDeltaX*-1
}if("axis" in p&&p.axis===p.HORIZONTAL_AXIS){r=q*-1;
q=0
}z=q===0?r:q;
if("deltaY" in p){q=p.deltaY*-1;
z=q
}if("deltaX" in p){r=p.deltaX;
if(q===0){z=r*-1
}}if(q===0&&r===0){return
}if(p.deltaMode===1){var y=c.data(this,"mousewheel-line-height");
z*=y;
q*=y;
r*=y
}else{if(p.deltaMode===2){var o=c.data(this,"mousewheel-page-height");
z*=o;
q*=o;
r*=o
}}w=Math.max(Math.abs(q),Math.abs(r));
if(!b||w<b){b=w;
if(a(p,w)){b/=40
}}if(a(p,w)){z/=40;
r/=40;
q/=40
}z=Math[z>=1?"floor":"ceil"](z/b);
r=Math[r>=1?"floor":"ceil"](r/b);
q=Math[q>=1?"floor":"ceil"](q/b);
if(f.settings.normalizeOffset&&this.getBoundingClientRect){var n=this.getBoundingClientRect();
v=m.clientX-n.left;
u=m.clientY-n.top
}m.deltaX=r;
m.deltaY=q;
m.deltaFactor=b;
m.offsetX=v;
m.offsetY=u;
m.deltaMode=0;
x.unshift(m,z,r,q);
if(j){clearTimeout(j)
}j=setTimeout(g,200);
return(c.event.dispatch||c.event.handle).apply(this,x)
}function g(){b=null
}function a(n,m){return f.settings.adjustOldDeltas&&n.type==="mousewheel"&&m%120===0
}}));
/*!
 * jquery-visibility v1.0.11
 * Page visibility shim for jQuery.
 *
 * Project Website: http://mths.be/visibility
 * 
 * @version 1.0.11
 * @license MIT.
 * @author Mathias Bynens - @mathias
 * @author Jan Paepke - @janpaepke
 */
;
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return b(a,c)
})
}else{if(typeof exports==="object"){module.exports=b(a,require("jquery"))
}else{b(a,jQuery)
}}}(this,function(g,d,b){var h=g.document,j,a=["webkit","o","ms","moz",""],c=d.support||{},f="onfocusin" in h&&"hasFocus" in h?"focusin focusout":"focus blur";
var e;
while((e=a.pop())!==b){j=(e?e+"H":"h")+"idden";
c.pageVisibility=h[j]!==b;
if(c.pageVisibility){f=e+"visibilitychange";
break
}}function k(){if(j!=="hidden"){h.hidden=c.pageVisibility?h[j]:b
}}k();
d(/blur$/.test(f)?g:h).on(f,function(o){var n=o.type;
var l=o.originalEvent;
if(!l){return
}var m=l.toElement;
if(!/^focus./.test(n)||(m===b&&l.fromElement===b&&l.relatedTarget===b)){d(h).triggerHandler(j&&h[j]||/^(?:blur|focusout)$/.test(n)?"hide":"show")
}k()
})
}));
(function(k,d){if(k.fn.dotdotdot){return
}k.fn.dotdotdot=function(A){if(this.length==0){k.fn.dotdotdot.debug('No element found for "'+this.selector+'".');
return this
}if(this.length>1){return this.each(function(){k(this).dotdotdot(A)
})
}var w=this;
if(w.data("dotdotdot")){w.trigger("destroy.dot")
}w.data("dotdotdot-style",w.attr("style")||"");
w.css("word-wrap","break-word");
if(w.css("white-space")==="nowrap"){w.css("white-space","normal")
}w.bind_events=function(){w.bind("update.dot",function(D,F){w.removeClass("is-truncated");
D.preventDefault();
D.stopPropagation();
switch(typeof y.height){case"number":y.maxHeight=y.height;
break;
case"function":y.maxHeight=y.height.call(w[0]);
break;
default:y.maxHeight=r(w);
break
}y.maxHeight+=y.tolerance;
if(typeof F!="undefined"){if(typeof F=="string"||("nodeType" in F&&F.nodeType===1)){F=k("<div />").append(F).contents()
}if(F instanceof k){B=F
}}x=w.wrapInner('<div class="dotdotdot" />').children();
x.contents().detach().end().append(B.clone(true)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});
var E=false,C=false;
if(v.afterElement){E=v.afterElement.clone(true);
E.show();
v.afterElement.detach()
}if(n(x,y)){if(y.wrap=="children"){C=c(x,y,E)
}else{C=p(x,w,x,y,E)
}}x.replaceWith(x.contents());
x=null;
if(k.isFunction(y.callback)){y.callback.call(w[0],C,B)
}v.isTruncated=C;
return C
}).bind("isTruncated.dot",function(D,C){D.preventDefault();
D.stopPropagation();
if(typeof C=="function"){C.call(w[0],v.isTruncated)
}return v.isTruncated
}).bind("originalContent.dot",function(D,C){D.preventDefault();
D.stopPropagation();
if(typeof C=="function"){C.call(w[0],B)
}return B
}).bind("destroy.dot",function(C){C.preventDefault();
C.stopPropagation();
w.unwatch().unbind_events().contents().detach().end().append(B).attr("style",w.data("dotdotdot-style")||"").data("dotdotdot",false)
});
return w
};
w.unbind_events=function(){w.unbind(".dot");
return w
};
w.watch=function(){w.unwatch();
if(y.watch=="window"){var E=k(window),D=E.width(),C=E.height();
E.bind("resize.dot"+v.dotId,function(){if(D!=E.width()||C!=E.height()||!y.windowResizeFix){D=E.width();
C=E.height();
if(u){clearInterval(u)
}u=setTimeout(function(){w.trigger("update.dot")
},100)
}})
}else{z=m(w);
u=setInterval(function(){if(w.is(":visible")){var F=m(w);
if(z.width!=F.width||z.height!=F.height){w.trigger("update.dot");
z=F
}}},500)
}return w
};
w.unwatch=function(){k(window).unbind("resize.dot"+v.dotId);
if(u){clearInterval(u)
}return w
};
var B=w.contents(),y=k.extend(true,{},k.fn.dotdotdot.defaults,A),v={},z={},u=null,x=null;
if(!(y.lastCharacter.remove instanceof Array)){y.lastCharacter.remove=k.fn.dotdotdot.defaultArrays.lastCharacter.remove
}if(!(y.lastCharacter.noEllipsis instanceof Array)){y.lastCharacter.noEllipsis=k.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis
}v.afterElement=b(y.after,w);
v.isTruncated=false;
v.dotId=o++;
w.data("dotdotdot",true).bind_events().trigger("update.dot");
if(y.watch){w.watch()
}return w
};
k.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:true,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:false,windowResizeFix:true};
k.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","\u3000",",",";",".","!","?"],noEllipsis:[]}};
k.fn.dotdotdot.debug=function(u){};
var o=1;
function c(x,B,A){var z=x.children(),u=false;
x.empty();
for(var w=0,v=z.length;
w<v;
w++){var y=z.eq(w);
x.append(y);
if(A){x.append(A)
}if(n(x,B)){y.remove();
u=true;
break
}else{if(A){A.detach()
}}}return u
}function p(v,w,B,A,z){var u=false;
var y="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style";
var x="script, .dotdotdot-keep";
v.contents().detach().each(function(){var D=this,C=k(D);
if(typeof D=="undefined"){return true
}else{if(C.is(x)){v.append(C)
}else{if(u){return true
}else{v.append(C);
if(z&&!C.is(A.after)&&!C.find(A.after).length){v[v.is(y)?"after":"append"](z)
}if(n(B,A)){if(D.nodeType==3){u=e(C,w,B,A,z)
}else{u=p(C,w,B,A,z)
}if(!u){C.detach();
u=true
}}if(!u){if(z){z.detach()
}}}}}});
w.addClass("is-truncated");
return u
}function e(w,y,J,z,v){var G=w[0];
if(!G){return false
}var C=j(G),u=(C.indexOf(" ")!==-1)?" ":"\u3000",E=(z.wrap=="letter")?"":u,H=C.split(E),D=-1,K=-1,F=0,x=H.length-1;
if(z.fallbackToLetter&&F==0&&x==0){E="";
H=C.split(E);
x=H.length-1
}while(F<=x&&!(F==0&&x==0)){var A=Math.floor((F+x)/2);
if(A==K){break
}K=A;
a(G,H.slice(0,K+1).join(E)+z.ellipsis);
J.children().each(function(){k(this).toggle().toggle()
});
if(!n(J,z)){D=K;
F=K
}else{x=K;
if(z.fallbackToLetter&&F==0&&x==0){E="";
H=H[0].split(E);
D=-1;
K=-1;
F=0;
x=H.length-1
}}}if(D!=-1&&!(H.length==1&&H[0].length==0)){C=g(H.slice(0,D+1).join(E),z);
a(G,C)
}else{var B=w.parent();
w.detach();
var I=(v&&v.closest(B).length)?v.length:0;
if(B.contents().length>I){G=f(B.contents().eq(-1-I),y)
}else{G=f(B,y,true);
if(!I){B.detach()
}}if(G){C=g(j(G),z);
a(G,C);
if(I&&v){k(G).parent().append(v)
}}}return true
}function n(v,u){return v.innerHeight()>u.maxHeight
}function g(u,v){while(k.inArray(u.slice(-1),v.lastCharacter.remove)>-1){u=u.slice(0,-1)
}if(k.inArray(u.slice(-1),v.lastCharacter.noEllipsis)<0){u+=v.ellipsis
}return u
}function m(u){return{width:u.innerWidth(),height:u.innerHeight()}
}function a(v,u){if(v.innerText){v.innerText=u
}else{if(v.nodeValue){v.nodeValue=u
}else{if(v.textContent){v.textContent=u
}}}}function j(u){if(u.innerText){return u.innerText
}else{if(u.nodeValue){return u.nodeValue
}else{if(u.textContent){return u.textContent
}else{return""
}}}}function l(u){do{u=u.previousSibling
}while(u&&u.nodeType!==1&&u.nodeType!==3);
return u
}function f(v,y,u){var x=v&&v[0],w;
if(x){if(!u){if(x.nodeType===3){return x
}if(k.trim(v.text())){return f(v.contents().last(),y)
}}w=l(x);
while(!w){v=v.parent();
if(v.is(y)||!v.length){return false
}w=l(v[0])
}if(w){return f(k(w),y)
}}return false
}function b(u,v){if(!u){return false
}if(typeof u==="string"){u=k(u,v);
return(u.length)?u:false
}return !u.jquery?false:u
}function r(x){var y=x.innerHeight(),w=["paddingTop","paddingBottom"];
for(var A=0,v=w.length;
A<v;
A++){var u=parseInt(x.css(w[A]),10);
if(isNaN(u)){u=0
}y-=u
}return y
}var q=k.fn.html;
k.fn.html=function(u){if(u!=d&&!k.isFunction(u)&&this.data("dotdotdot")){return this.trigger("update",[u])
}return q.apply(this,arguments)
};
var h=k.fn.text;
k.fn.text=function(u){if(u!=d&&!k.isFunction(u)&&this.data("dotdotdot")){u=k("<div />").text(u).html();
return this.trigger("update",[u])
}return h.apply(this,arguments)
}
})(jQuery);
/*!
 * clipboard.js v1.5.8
 * https://zenorocha.github.io/clipboard.js
 *
 * Licensed MIT © Zeno Rocha
 */
(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()
}else{if(typeof define==="function"&&define.amd){define([],b)
}else{var a;
if(typeof window!=="undefined"){a=window
}else{if(typeof global!=="undefined"){a=global
}else{if(typeof self!=="undefined"){a=self
}else{a=this
}}}a.Clipboard=b()
}}})(function(){var d,b,a;
return(function c(f,k,h){function g(r,p){if(!k[r]){if(!f[r]){var n=typeof require=="function"&&require;
if(!p&&n){return n(r,!0)
}if(e){return e(r,!0)
}var q=new Error("Cannot find module '"+r+"'");
throw q.code="MODULE_NOT_FOUND",q
}var m=k[r]={exports:{}};
f[r][0].call(m.exports,function(l){var o=f[r][1][l];
return g(o?o:l)
},m,m.exports,c,f,k,h)
}return k[r].exports
}var e=typeof require=="function"&&require;
for(var j=0;
j<h.length;
j++){g(h[j])
}return g
})({1:[function(f,g,e){var h=f("matches-selector");
g.exports=function(l,k,j){var m=j?l:l.parentNode;
while(m&&m!==document){if(h(m,k)){return m
}m=m.parentNode
}}
},{"matches-selector":5}],2:[function(f,g,e){var j=f("closest");
function h(o,n,p,q,m){var l=k.apply(this,arguments);
o.addEventListener(p,l,m);
return{destroy:function(){o.removeEventListener(p,l,m)
}}
}function k(m,l,n,o){return function(p){p.delegateTarget=j(p.target,l,true);
if(p.delegateTarget){o.call(m,p)
}}
}g.exports=h
},{closest:1}],3:[function(f,g,e){e.node=function(h){return h!==undefined&&h instanceof HTMLElement&&h.nodeType===1
};
e.nodeList=function(j){var h=Object.prototype.toString.call(j);
return j!==undefined&&(h==="[object NodeList]"||h==="[object HTMLCollection]")&&("length" in j)&&(j.length===0||e.node(j[0]))
};
e.string=function(h){return typeof h==="string"||h instanceof String
};
e.fn=function(j){var h=Object.prototype.toString.call(j);
return h==="[object Function]"
}
},{}],4:[function(g,f,j){var k=g("./is");
var l=g("delegate");
function h(p,o,q){if(!p&&!o&&!q){throw new Error("Missing required arguments")
}if(!k.string(o)){throw new TypeError("Second argument must be a String")
}if(!k.fn(q)){throw new TypeError("Third argument must be a Function")
}if(k.node(p)){return e(p,o,q)
}else{if(k.nodeList(p)){return n(p,o,q)
}else{if(k.string(p)){return m(p,o,q)
}else{throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")
}}}}function e(p,o,q){p.addEventListener(o,q);
return{destroy:function(){p.removeEventListener(o,q)
}}
}function n(o,p,q){Array.prototype.forEach.call(o,function(r){r.addEventListener(p,q)
});
return{destroy:function(){Array.prototype.forEach.call(o,function(r){r.removeEventListener(p,q)
})
}}
}function m(o,p,q){return l(document.body,o,p,q)
}f.exports=h
},{"./is":3,delegate:2}],5:[function(g,h,e){var j=Element.prototype;
var k=j.matchesSelector||j.webkitMatchesSelector||j.mozMatchesSelector||j.msMatchesSelector||j.oMatchesSelector;
h.exports=f;
function f(o,l){if(k){return k.call(o,l)
}var m=o.parentNode.querySelectorAll(l);
for(var n=0;
n<m.length;
++n){if(m[n]==o){return true
}}return false
}},{}],6:[function(g,h,f){function e(k){var m;
if(k.nodeName==="INPUT"||k.nodeName==="TEXTAREA"){k.focus();
k.setSelectionRange(0,k.value.length);
m=k.value
}else{if(k.hasAttribute("contenteditable")){k.focus()
}var l=window.getSelection();
var j=document.createRange();
j.selectNodeContents(k);
l.removeAllRanges();
l.addRange(j);
m=l.toString()
}return m
}h.exports=e
},{}],7:[function(f,g,e){function h(){}h.prototype={on:function(k,m,j){var l=this.e||(this.e={});
(l[k]||(l[k]=[])).push({fn:m,ctx:j});
return this
},once:function(l,n,j){var k=this;
function m(){k.off(l,m);
n.apply(j,arguments)
}m._=n;
return this.on(l,m,j)
},emit:function(k){var n=[].slice.call(arguments,1);
var m=((this.e||(this.e={}))[k]||[]).slice();
var l=0;
var j=m.length;
for(l;
l<j;
l++){m[l].fn.apply(m[l].ctx,n)
}return this
},off:function(l,p){var o=this.e||(this.e={});
var k=o[l];
var n=[];
if(k&&p){for(var m=0,j=k.length;
m<j;
m++){if(k[m].fn!==p&&k[m].fn._!==p){n.push(k[m])
}}}(n.length)?o[l]=n:delete o[l];
return this
}};
g.exports=h
},{}],8:[function(g,e,j){j.__esModule=true;
var h=(function(){function o(u,q){for(var p=0;
p<q.length;
p++){var r=q[p];
r.enumerable=r.enumerable||false;
r.configurable=true;
if("value" in r){r.writable=true
}Object.defineProperty(u,r.key,r)
}}return function(r,p,q){if(p){o(r.prototype,p)
}if(q){o(r,q)
}return r
}
})();
function n(o){return o&&o.__esModule?o:{"default":o}
}function k(o,p){if(!(o instanceof p)){throw new TypeError("Cannot call a class as a function")
}}var f=g("select");
var m=n(f);
var l=(function(){function q(C){k(this,q);
this.resolveOptions(C);
this.initSelection()
}q.prototype.resolveOptions=function u(){var C=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];
this.action=C.action;
this.emitter=C.emitter;
this.target=C.target;
this.text=C.text;
this.trigger=C.trigger;
this.selectedText=""
};
q.prototype.initSelection=function z(){if(this.text&&this.target){throw new Error('Multiple attributes declared, use either "target" or "text"')
}else{if(this.text){this.selectFake()
}else{if(this.target){this.selectTarget()
}else{throw new Error('Missing required attributes, use either "target" or "text"')
}}}};
q.prototype.selectFake=function A(){var D=this;
var C=document.documentElement.getAttribute("dir")=="rtl";
this.removeFake();
this.fakeHandler=document.body.addEventListener("click",function(){return D.removeFake()
});
this.fakeElem=document.createElement("textarea");
this.fakeElem.style.fontSize="12pt";
this.fakeElem.style.border="0";
this.fakeElem.style.padding="0";
this.fakeElem.style.margin="0";
this.fakeElem.style.position="absolute";
this.fakeElem.style[C?"right":"left"]="-9999px";
this.fakeElem.style.top=(window.pageYOffset||document.documentElement.scrollTop)+"px";
this.fakeElem.setAttribute("readonly","");
this.fakeElem.value=this.text;
document.body.appendChild(this.fakeElem);
this.selectedText=m["default"](this.fakeElem);
this.copyText()
};
q.prototype.removeFake=function y(){if(this.fakeHandler){document.body.removeEventListener("click");
this.fakeHandler=null
}if(this.fakeElem){document.body.removeChild(this.fakeElem);
this.fakeElem=null
}};
q.prototype.selectTarget=function p(){this.selectedText=m["default"](this.target);
this.copyText()
};
q.prototype.copyText=function r(){var D=undefined;
try{D=document.execCommand(this.action)
}catch(C){D=false
}this.handleResult(D)
};
q.prototype.handleResult=function v(C){if(C){this.emitter.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})
}else{this.emitter.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})
}};
q.prototype.clearSelection=function B(){if(this.target){this.target.blur()
}window.getSelection().removeAllRanges()
};
q.prototype.destroy=function x(){this.removeFake()
};
h(q,[{key:"action",set:function w(){var C=arguments.length<=0||arguments[0]===undefined?"copy":arguments[0];
this._action=C;
if(this._action!=="copy"&&this._action!=="cut"){throw new Error('Invalid "action" value, use either "copy" or "cut"')
}},get:function o(){return this._action
}},{key:"target",set:function w(C){if(C!==undefined){if(C&&typeof C==="object"&&C.nodeType===1){this._target=C
}else{throw new Error('Invalid "target" value, use a valid Element')
}}},get:function o(){return this._target
}}]);
return q
})();
j["default"]=l;
e.exports=j["default"]
},{select:6}],9:[function(g,f,j){j.__esModule=true;
function r(v){return v&&v.__esModule?v:{"default":v}
}function k(v,w){if(!(v instanceof w)){throw new TypeError("Cannot call a class as a function")
}}function q(w,v){if(typeof v!=="function"&&v!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof v)
}w.prototype=Object.create(v&&v.prototype,{constructor:{value:w,enumerable:false,writable:true,configurable:true}});
if(v){Object.setPrototypeOf?Object.setPrototypeOf(w,v):w.__proto__=v
}}var l=g("./clipboard-action");
var p=r(l);
var h=g("tiny-emitter");
var m=r(h);
var u=g("good-listener");
var e=r(u);
var n=(function(z){q(y,z);
function y(F,E){k(this,y);
z.call(this);
this.resolveOptions(E);
this.listenClick(F)
}y.prototype.resolveOptions=function x(){var E=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];
this.action=typeof E.action==="function"?E.action:this.defaultAction;
this.target=typeof E.target==="function"?E.target:this.defaultTarget;
this.text=typeof E.text==="function"?E.text:this.defaultText
};
y.prototype.listenClick=function v(E){var F=this;
this.listener=e["default"](E,"click",function(G){return F.onClick(G)
})
};
y.prototype.onClick=function A(F){var E=F.delegateTarget||F.currentTarget;
if(this.clipboardAction){this.clipboardAction=null
}this.clipboardAction=new p["default"]({action:this.action(E),target:this.target(E),text:this.text(E),trigger:E,emitter:this})
};
y.prototype.defaultAction=function w(E){return o("action",E)
};
y.prototype.defaultTarget=function C(F){var E=o("target",F);
if(E){return document.querySelector(E)
}};
y.prototype.defaultText=function B(E){return o("text",E)
};
y.prototype.destroy=function D(){this.listener.destroy();
if(this.clipboardAction){this.clipboardAction.destroy();
this.clipboardAction=null
}};
return y
})(m["default"]);
j["default"]=n;
function o(x,v){var w="data-clipboard-"+x;
if(!v.hasAttribute(w)){return
}return v.getAttribute(w)
}f.exports=j["default"]
},{"./clipboard-action":8,"good-listener":4,"tiny-emitter":7}]},{},[9])(9)
});
/*!
 * JavaScript Cookie v2.1.2
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
;
(function(b){if(typeof define==="function"&&define.amd){define(b)
}else{if(typeof exports==="object"){module.exports=b()
}else{var a=window.Cookies;
var c=window.Cookies=b();
c.noConflict=function(){window.Cookies=a;
return c
}
}}}(function(){function b(){var f=0;
var c={};
for(;
f<arguments.length;
f++){var d=arguments[f];
for(var e in d){c[e]=d[e]
}}return c
}function a(d){function c(o,n,k){var r;
if(typeof document==="undefined"){return
}if(arguments.length>1){k=b({path:"/"},c.defaults,k);
if(typeof k.expires==="number"){var h=new Date();
h.setMilliseconds(h.getMilliseconds()+k.expires*86400000);
k.expires=h
}try{r=JSON.stringify(n);
if(/^[\{\[]/.test(r)){n=r
}}catch(m){}if(!d.write){n=encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)
}else{n=d.write(n,o)
}o=encodeURIComponent(String(o));
o=o.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);
o=o.replace(/[\(\)]/g,escape);
return(document.cookie=[o,"=",n,k.expires&&"; expires="+k.expires.toUTCString(),k.path&&"; path="+k.path,k.domain&&"; domain="+k.domain,k.secure?"; secure":""].join(""))
}if(!o){r={}
}var q=document.cookie?document.cookie.split("; "):[];
var p=/(%[0-9A-Z]{2})+/g;
var l=0;
for(;
l<q.length;
l++){var j=q[l].split("=");
var g=j.slice(1).join("=");
if(g.charAt(0)==='"'){g=g.slice(1,-1)
}try{var f=j[0].replace(p,decodeURIComponent);
g=d.read?d.read(g,f):d(g,f)||g.replace(p,decodeURIComponent);
if(this.json){try{g=JSON.parse(g)
}catch(m){}}if(o===f){r=g;
break
}if(!o){r[f]=g
}}catch(m){}}return r
}c.set=c;
c.get=function(e){return c(e)
};
c.getJSON=function(){return c.apply({json:true},[].slice.call(arguments))
};
c.defaults={};
c.remove=function(f,e){c(f,"",b(e,{expires:-1}))
};
c.withConverter=a;
return c
}return a(function(){})
}));
(function(d){var b={elements:[],players:[]};
var a={};
try{d.BETPlayersManager=d.top.BETPlayersManager||a;
if(d.BETPlayersManager!==a){return
}}catch(f){}a.pauseOverride=false;
a.addPlayer=function(e){if(!d.featureFlag_playersManager){return
}b.elements.push(e.$el[0]);
b.players.push(new c(e))
};
a.getPlayer=function(g){if(!d.featureFlag_playersManager){return null
}var e=b.elements.indexOf(g);
if(e===-1){return null
}return b.players[e]
};
a.getOriginalPlayer=function(g){if(!d.featureFlag_playersManager){return null
}var e=this.getPlayer(g);
if(!e){return null
}return e.getOriginalPlayer()
};
a.putOnHold=function(g){if(!d.featureFlag_playersManager){return false
}var e=this.getPlayer(g);
if(!e){return false
}e.putOnHold();
return true
};
a.reestablish=function(g){if(!d.featureFlag_playersManager){return false
}var e=this.getPlayer(g);
if(!e){return false
}e.reestablish();
return true
};
function c(e){this.player=e;
this.isOnHold=false;
this.isActive=false;
this._bindMethods();
this._bindEvents()
}c.prototype._bindMethods=function(){this._pauseIfShouldBeOnHold=this._pauseIfShouldBeOnHold.bind(this);
this._setActive=this._setActive.bind(this);
this._setNonActive=this._setNonActive.bind(this)
};
c.prototype._bindEvents=function(){this.player.on("playRequested",this._setActive);
this.player.on("adPauseRequested",this._setNonActive);
this.player.on("stateChange:paused",this._setNonActive);
this.player.on("adStarted",this._pauseIfShouldBeOnHold);
this.player.on("mediaStart",this._pauseIfShouldBeOnHold)
};
c.prototype._pauseIfShouldBeOnHold=function(){if(this.isOnHold||a.pauseOverride){this.player.pause()
}};
c.prototype._setActive=function(){this.isActive=true;
this.isOnHold=false
};
c.prototype._setNonActive=function(){this.isActive=false
};
c.prototype.putOnHold=function(){if(!this.isActive){return
}this.isOnHold=true;
this.player.pause()
};
c.prototype.reestablish=function(){if(!this.isOnHold){return
}this.player.play()
};
c.prototype.getOriginalPlayer=function(){return this.player
}
})(window);
var MTVN=(function(n,h){n.EdgePlayerAPI=n.EdgePlayerAPI||{};
function l(p,r){for(var o in r){if(r.hasOwnProperty(o)){var q=r[o];
if(q!=undefined){p[o]=r[o]
}}}return p
}function j(){var p=document.URL.match(/(cid|CID)=([^&]+)/i),o=p&&decodeURIComponent(p[2]);
if(sessionStorage){o&&sessionStorage.setItem("cid",o);
o=sessionStorage.getItem("cid")
}return o?"&cid="+o:""
}function f(o){o=l(o||{},{mediaStart:function(p){if(!MTVN.EdgePlayerAPI.isViralPlayer()){window.parent.fbq&&window.parent.fbq("track","ViewContent");
window.parent.fbq&&window.parent.fbq("track","Lead");
c()
}}})
}function c(){window.parent.dotq=window.parent.dotq||[];
window.parent.dotq.push({projectId:"10000",properties:{pixelId:"10001003",qstrings:{et:"custom",ea:"videoview"}}})
}function g(o){if(typeof pxDataPhase!=="undefined"&&pxDataPhase!==null&&pxDataPhase>=3&&a(o)){var p=o.substr(0,o.lastIndexOf(":")+1);
return m(pxDataTarget,p)
}return o
}function m(x,o){var y=document.getElementById("projectXBlock"),u=y.getAttribute("defaultuuid"),p=y.getAttribute("mvpdmapping"),q=JSON.parse(p);
if(q&&q.count>0&&x){for(var r=1;
r<=q.count;
r++){var w="mvpd_mapping_item_"+r,v=q[w];
if(v.provider==x&&v.uuid){return o+v.uuid
}}}return o+u
}function a(o){return o.indexOf("episode")!=-1
}function b(p,r){var q=r.authReq;
if(q){var o={tveAuthRequired:q};
if(TVEAuth.MVPD_ID){o.tveMvpdName=TVEAuth.MVPD_ID.toLowerCase()
}l(p,{tve:o})
}}n.EdgePlayerAPI.playBetVideo=function(q,w,v){f(v);
var u;
var p=g(w.videoURI),o=w.adParams;
if(o){o=o+j()
}var r={uri:p,width:"100%",height:"100%",embedVars:{locationPath:w.locationPath,custParams:o,correlator:new Date().getTime()}};
b(r,w);
u=new EdgePlayer.Player(q,r,v);
if(u instanceof Array){u=u[0]
}h.addPlayer(u);
return u
};
n.EdgePlayerAPI.isViralPlayer=function(){try{return window.parent.location.host!=window.location.host
}catch(o){return true
}};
n.EdgePlayerAPI.play=function(o){try{e(o).play()
}catch(p){}};
n.EdgePlayerAPI.pause=function(o){try{e(o).pause()
}catch(p){}};
n.EdgePlayerAPI.putOnHold=function(o){return h.putOnHold(o)
};
n.EdgePlayerAPI.reestablish=function(o){return h.reestablish(o)
};
n.EdgePlayerAPI.getInstance=function(o){return e()
};
function e(o){if(typeof o==="string"){return k(o)
}else{if(typeof o==="object"){return d(o)
}}return EdgePlayer.getPlayer()
}function k(o){var q=EdgePlayer.getPlayers();
var p;
for(p=0;
p<q.length;
p++){if(o!==q[p].config.uri){continue
}return q[p]
}return null
}function d(p){var q=EdgePlayer.getPlayers();
var o;
for(o=0;
o<q.length;
o++){if(p!==q[o].$el[0]){continue
}return q[o]
}return null
}return n
})(MTVN||{},window.BETPlayersManager);
(function(c,a,g){var d="Parallax";
var f=30;
var b={relativeInput:false,clipRelativeInput:false,calibrationThreshold:100,calibrationDelay:500,supportDelay:500,calibrateX:false,calibrateY:true,invertX:true,invertY:true,limitX:false,limitY:false,scalarX:10,scalarY:10,frictionX:0.1,frictionY:0.1,originX:0.5,originY:0.5};
function e(k,h){this.element=k;
this.layers=k.getElementsByClassName("layer");
var l={calibrateX:this.data(this.element,"calibrate-x"),calibrateY:this.data(this.element,"calibrate-y"),invertX:this.data(this.element,"invert-x"),invertY:this.data(this.element,"invert-y"),limitX:this.data(this.element,"limit-x"),limitY:this.data(this.element,"limit-y"),scalarX:this.data(this.element,"scalar-x"),scalarY:this.data(this.element,"scalar-y"),frictionX:this.data(this.element,"friction-x"),frictionY:this.data(this.element,"friction-y"),originX:this.data(this.element,"origin-x"),originY:this.data(this.element,"origin-y")};
for(var j in l){if(l[j]===null){delete l[j]
}}this.extend(this,b,h,l);
this.calibrationTimer=null;
this.calibrationFlag=true;
this.enabled=false;
this.depths=[];
this.raf=null;
this.bounds=null;
this.ex=0;
this.ey=0;
this.ew=0;
this.eh=0;
this.ecx=0;
this.ecy=0;
this.erx=0;
this.ery=0;
this.cx=0;
this.cy=0;
this.ix=0;
this.iy=0;
this.mx=0;
this.my=0;
this.vx=0;
this.vy=0;
this.onMouseMove=this.onMouseMove.bind(this);
this.onDeviceOrientation=this.onDeviceOrientation.bind(this);
this.onOrientationTimer=this.onOrientationTimer.bind(this);
this.onCalibrationTimer=this.onCalibrationTimer.bind(this);
this.onAnimationFrame=this.onAnimationFrame.bind(this);
this.onWindowResize=this.onWindowResize.bind(this);
this.initialise()
}e.prototype.extend=function(){if(arguments.length>1){var n=arguments[0];
for(var m=1,h=arguments.length;
m<h;
m++){var j=arguments[m];
for(var k in j){n[k]=j[k]
}}}};
e.prototype.data=function(j,h){return this.deserialize(j.getAttribute("data-"+h))
};
e.prototype.deserialize=function(h){if(h==="true"){return true
}else{if(h==="false"){return false
}else{if(h==="null"){return null
}else{if(!isNaN(parseFloat(h))&&isFinite(h)){return parseFloat(h)
}else{return h
}}}}};
e.prototype.camelCase=function(h){return h.replace(/-+(.)?/g,function(j,k){return k?k.toUpperCase():""
})
};
e.prototype.transformSupport=function(w){var n=a.createElement("div");
var r=false;
var m=null;
var q=false;
var u=null;
var h=null;
for(var o=0,k=this.vendors.length;
o<k;
o++){if(this.vendors[o]!==null){u=this.vendors[o][0]+"transform";
h=this.vendors[o][1]+"Transform"
}else{u="transform";
h="transform"
}if(n.style[h]!==g){r=true;
break
}}switch(w){case"2D":q=r;
break;
case"3D":if(r){var p=a.body||a.createElement("body");
var v=a.documentElement;
var j=v.style.overflow;
if(!a.body){v.style.overflow="hidden";
v.appendChild(p);
p.style.overflow="hidden";
p.style.background=""
}p.appendChild(n);
n.style[h]="translate3d(1px,1px,1px)";
m=c.getComputedStyle(n).getPropertyValue(u);
q=m!==g&&m.length>0&&m!=="none";
v.style.overflow=j;
p.removeChild(n)
}break
}return q
};
e.prototype.ww=null;
e.prototype.wh=null;
e.prototype.wcx=null;
e.prototype.wcy=null;
e.prototype.wrx=null;
e.prototype.wry=null;
e.prototype.portrait=null;
e.prototype.desktop=!navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i);
e.prototype.vendors=[null,["-webkit-","webkit"],["-moz-","Moz"],["-o-","O"],["-ms-","ms"]];
e.prototype.motionSupport=!!c.DeviceMotionEvent;
e.prototype.orientationSupport=!!c.DeviceOrientationEvent;
e.prototype.orientationStatus=0;
e.prototype.transform2DSupport=e.prototype.transformSupport("2D");
e.prototype.transform3DSupport=e.prototype.transformSupport("3D");
e.prototype.propertyCache={};
e.prototype.initialise=function(){if(this.transform3DSupport){this.accelerate(this.element)
}var h=c.getComputedStyle(this.element);
if(h.getPropertyValue("position")==="static"){this.element.style.position="relative"
}this.updateLayers();
this.updateDimensions();
this.enable();
this.queueCalibration(this.calibrationDelay)
};
e.prototype.updateLayers=function(){this.layers=this.element.getElementsByClassName("layer");
this.depths=[];
for(var k=0,h=this.layers.length;
k<h;
k++){var j=this.layers[k];
if(this.transform3DSupport){this.accelerate(j)
}j.style.position=k?"absolute":"relative";
j.style.display="block";
j.style.left=0;
j.style.top=0;
this.depths.push(this.data(j,"depth")||0)
}};
e.prototype.updateDimensions=function(){this.ww=c.innerWidth;
this.wh=c.innerHeight;
this.wcx=this.ww*this.originX;
this.wcy=this.wh*this.originY;
this.wrx=Math.max(this.wcx,this.ww-this.wcx);
this.wry=Math.max(this.wcy,this.wh-this.wcy)
};
e.prototype.updateBounds=function(){this.bounds=this.element.getBoundingClientRect();
this.ex=this.bounds.left;
this.ey=this.bounds.top;
this.ew=this.bounds.width;
this.eh=this.bounds.height;
this.ecx=this.ew*this.originX;
this.ecy=this.eh*this.originY;
this.erx=Math.max(this.ecx,this.ew-this.ecx);
this.ery=Math.max(this.ecy,this.eh-this.ecy)
};
e.prototype.queueCalibration=function(h){clearTimeout(this.calibrationTimer);
this.calibrationTimer=setTimeout(this.onCalibrationTimer,h)
};
e.prototype.enable=function(){if(!this.enabled){this.enabled=true;
if(this.orientationSupport){this.portrait=null;
c.addEventListener("deviceorientation",this.onDeviceOrientation);
setTimeout(this.onOrientationTimer,this.supportDelay)
}else{this.cx=0;
this.cy=0;
this.portrait=false;
c.addEventListener("mousemove",this.onMouseMove)
}c.addEventListener("resize",this.onWindowResize);
this.raf=requestAnimationFrame(this.onAnimationFrame)
}};
e.prototype.disable=function(){if(this.enabled){this.enabled=false;
if(this.orientationSupport){c.removeEventListener("deviceorientation",this.onDeviceOrientation)
}else{c.removeEventListener("mousemove",this.onMouseMove)
}c.removeEventListener("resize",this.onWindowResize);
cancelAnimationFrame(this.raf)
}};
e.prototype.calibrate=function(h,j){this.calibrateX=h===g?this.calibrateX:h;
this.calibrateY=j===g?this.calibrateY:j
};
e.prototype.invert=function(h,j){this.invertX=h===g?this.invertX:h;
this.invertY=j===g?this.invertY:j
};
e.prototype.friction=function(h,j){this.frictionX=h===g?this.frictionX:h;
this.frictionY=j===g?this.frictionY:j
};
e.prototype.scalar=function(h,j){this.scalarX=h===g?this.scalarX:h;
this.scalarY=j===g?this.scalarY:j
};
e.prototype.limit=function(h,j){this.limitX=h===g?this.limitX:h;
this.limitY=j===g?this.limitY:j
};
e.prototype.origin=function(h,j){this.originX=h===g?this.originX:h;
this.originY=j===g?this.originY:j
};
e.prototype.clamp=function(k,j,h){k=Math.max(k,j);
k=Math.min(k,h);
return k
};
e.prototype.css=function(k,o,n){var m=this.propertyCache[o];
if(!m){for(var j=0,h=this.vendors.length;
j<h;
j++){if(this.vendors[j]!==null){m=this.camelCase(this.vendors[j][1]+"-"+o)
}else{m=o
}if(k.style[m]!==g){this.propertyCache[o]=m;
break
}}}k.style[m]=n
};
e.prototype.accelerate=function(h){this.css(h,"transform","translate3d(0,0,0)");
this.css(h,"transform-style","preserve-3d");
this.css(h,"backface-visibility","hidden")
};
e.prototype.setPosition=function(j,h,k){h+="px";
k+="px";
if(this.transform3DSupport){this.css(j,"transform","translate3d("+h+","+k+",0)")
}else{if(this.transform2DSupport){this.css(j,"transform","translate("+h+","+k+")")
}else{j.style.left=h;
j.style.top=k
}}};
e.prototype.onOrientationTimer=function(h){if(this.orientationSupport&&this.orientationStatus===0){this.disable();
this.orientationSupport=false;
this.enable()
}};
e.prototype.onCalibrationTimer=function(h){this.calibrationFlag=true
};
e.prototype.onWindowResize=function(h){this.updateDimensions()
};
e.prototype.onAnimationFrame=function(){this.updateBounds();
var k=this.ix-this.cx;
var j=this.iy-this.cy;
if((Math.abs(k)>this.calibrationThreshold)||(Math.abs(j)>this.calibrationThreshold)){this.queueCalibration(0)
}if(this.portrait){this.mx=this.calibrateX?j:this.iy;
this.my=this.calibrateY?k:this.ix
}else{this.mx=this.calibrateX?k:this.ix;
this.my=this.calibrateY?j:this.iy
}this.mx*=this.ew*(this.scalarX/100);
this.my*=this.eh*(this.scalarY/100);
if(!isNaN(parseFloat(this.limitX))){this.mx=this.clamp(this.mx,-this.limitX,this.limitX)
}if(!isNaN(parseFloat(this.limitY))){this.my=this.clamp(this.my,-this.limitY,this.limitY)
}this.vx+=(this.mx-this.vx)*this.frictionX;
this.vy+=(this.my-this.vy)*this.frictionY;
for(var n=0,h=this.layers.length;
n<h;
n++){var m=this.layers[n];
var q=this.depths[n];
var o=this.vx*q*(this.invertX?-1:1);
var p=this.vy*q*(this.invertY?-1:1);
this.setPosition(m,o,p)
}this.raf=requestAnimationFrame(this.onAnimationFrame)
};
e.prototype.onDeviceOrientation=function(j){if(!this.desktop&&j.beta!==null&&j.gamma!==null){this.orientationStatus=1;
var h=(j.beta||0)/f;
var l=(j.gamma||0)/f;
var k=this.wh>this.ww;
if(this.portrait!==k){this.portrait=k;
this.calibrationFlag=true
}if(this.calibrationFlag){this.calibrationFlag=false;
this.cx=h;
this.cy=l
}this.ix=h;
this.iy=l
}};
e.prototype.onMouseMove=function(k){var j=k.clientX;
var h=k.clientY;
if(!this.orientationSupport&&this.relativeInput){if(this.clipRelativeInput){j=Math.max(j,this.ex);
j=Math.min(j,this.ex+this.ew);
h=Math.max(h,this.ey);
h=Math.min(h,this.ey+this.eh)
}this.ix=(j-this.ex-this.ecx)/this.erx;
this.iy=(h-this.ey-this.ecy)/this.ery
}else{this.ix=(j-this.wcx)/this.wrx;
this.iy=(h-this.wcy)/this.wry
}};
c[d]=e
})(window,document);
(function(){var b=0;
var c=["ms","moz","webkit","o"];
for(var a=0;
a<c.length&&!window.requestAnimationFrame;
++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];
window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]
}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();
var f=Math.max(0,16-(d-b));
var g=window.setTimeout(function(){h(d+f)
},f);
b=d+f;
return g
}
}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)
}
}}());
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)
}else{if(typeof exports!=="undefined"){module.exports=a(require("jquery"))
}else{a(jQuery)
}}}(function(a){var b=window.Slick||{};
b=(function(){var c=0;
function d(g,h){var f=this,e;
f.defaults={accessibility:true,adaptiveHeight:false,appendArrows:a(g),appendDots:a(g),arrows:true,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:false,autoplaySpeed:3000,centerMode:false,centerPadding:"50px",cssEase:"ease",customPaging:function(k,j){return a('<button type="button" data-role="none" role="button" tabindex="0" />').text(j+1)
},dots:false,dotsClass:"slick-dots",draggable:true,easing:"linear",edgeFriction:0.35,fade:false,focusOnSelect:false,infinite:true,initialSlide:0,lazyLoad:"ondemand",mobileFirst:false,pauseOnHover:true,pauseOnFocus:true,pauseOnDotsHover:false,respondTo:"window",responsive:null,rows:1,rtl:false,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:true,swipeToSlide:false,touchMove:true,touchThreshold:5,useCSS:true,useTransform:true,variableWidth:false,vertical:false,verticalSwiping:false,waitForAnimate:true,zIndex:1000};
f.initials={animating:false,dragging:false,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:false,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:false,unslicked:false};
a.extend(f,f.initials);
f.activeBreakpoint=null;
f.animType=null;
f.animProp=null;
f.breakpoints=[];
f.breakpointSettings=[];
f.cssTransitions=false;
f.focussed=false;
f.interrupted=false;
f.hidden="hidden";
f.paused=true;
f.positionProp=null;
f.respondTo=null;
f.rowCount=1;
f.shouldClick=true;
f.$slider=a(g);
f.$slidesCache=null;
f.transformType=null;
f.transitionType=null;
f.visibilityChange="visibilitychange";
f.windowWidth=0;
f.windowTimer=null;
e=a(g).data("slick")||{};
f.options=a.extend({},f.defaults,h,e);
f.currentSlide=f.options.initialSlide;
f.originalSettings=f.options;
if(typeof document.mozHidden!=="undefined"){f.hidden="mozHidden";
f.visibilityChange="mozvisibilitychange"
}else{if(typeof document.webkitHidden!=="undefined"){f.hidden="webkitHidden";
f.visibilityChange="webkitvisibilitychange"
}}f.autoPlay=a.proxy(f.autoPlay,f);
f.autoPlayClear=a.proxy(f.autoPlayClear,f);
f.autoPlayIterator=a.proxy(f.autoPlayIterator,f);
f.changeSlide=a.proxy(f.changeSlide,f);
f.clickHandler=a.proxy(f.clickHandler,f);
f.selectHandler=a.proxy(f.selectHandler,f);
f.setPosition=a.proxy(f.setPosition,f);
f.swipeHandler=a.proxy(f.swipeHandler,f);
f.dragHandler=a.proxy(f.dragHandler,f);
f.keyHandler=a.proxy(f.keyHandler,f);
f.instanceUid=c++;
f.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/;
f.registerBreakpoints();
f.init(true)
}return d
}());
b.prototype.activateADA=function(){var c=this;
c.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})
};
b.prototype.addSlide=b.prototype.slickAdd=function(c,e,f){var d=this;
if(typeof(e)==="boolean"){f=e;
e=null
}else{if(e<0||(e>=d.slideCount)){return false
}}d.unload();
if(typeof(e)==="number"){if(e===0&&d.$slides.length===0){a(c).appendTo(d.$slideTrack)
}else{if(f){a(c).insertBefore(d.$slides.eq(e))
}else{a(c).insertAfter(d.$slides.eq(e))
}}}else{if(f===true){a(c).prependTo(d.$slideTrack)
}else{a(c).appendTo(d.$slideTrack)
}}d.$slides=d.$slideTrack.children(this.options.slide);
d.$slideTrack.children(this.options.slide).detach();
d.$slideTrack.append(d.$slides);
d.$slides.each(function(g,h){a(h).attr("data-slick-index",g)
});
d.$slidesCache=d.$slides;
d.reinit()
};
b.prototype.animateHeight=function(){var d=this;
if(d.options.slidesToShow===1&&d.options.adaptiveHeight===true&&d.options.vertical===false){var c=d.$slides.eq(d.currentSlide).outerHeight(true);
d.$list.animate({height:c},d.options.speed)
}};
b.prototype.animateSlide=function(f,e){var d={},c=this;
c.animateHeight();
if(c.options.rtl===true&&c.options.vertical===false){f=-f
}if(c.transformsEnabled===false){if(c.options.vertical===false){c.$slideTrack.animate({left:f},c.options.speed,c.options.easing,e)
}else{c.$slideTrack.animate({top:f},c.options.speed,c.options.easing,e)
}}else{if(c.cssTransitions===false){if(c.options.rtl===true){c.currentLeft=-(c.currentLeft)
}a({animStart:c.currentLeft}).animate({animStart:f},{duration:c.options.speed,easing:c.options.easing,step:function(g){g=Math.ceil(g);
if(c.options.vertical===false){d[c.animType]="translate("+g+"px, 0px)";
c.$slideTrack.css(d)
}else{d[c.animType]="translate(0px,"+g+"px)";
c.$slideTrack.css(d)
}},complete:function(){if(e){e.call()
}}})
}else{c.applyTransition();
f=Math.ceil(f);
if(c.options.vertical===false){d[c.animType]="translate3d("+f+"px, 0px, 0px)"
}else{d[c.animType]="translate3d(0px,"+f+"px, 0px)"
}c.$slideTrack.css(d);
if(e){setTimeout(function(){c.disableTransition();
e.call()
},c.options.speed)
}}}};
b.prototype.getNavTarget=function(){var d=this,c=d.options.asNavFor;
if(c&&c!==null){c=a(c).not(d.$slider)
}return c
};
b.prototype.asNavFor=function(e){var d=this,c=d.getNavTarget();
if(c!==null&&typeof c==="object"){c.each(function(){var f=a(this).slick("getSlick");
if(!f.unslicked){f.slideHandler(e,true)
}})
}};
b.prototype.applyTransition=function(c){var d=this,e={};
if(d.options.fade===false){e[d.transitionType]=d.transformType+" "+d.options.speed+"ms "+d.options.cssEase
}else{e[d.transitionType]="opacity "+d.options.speed+"ms "+d.options.cssEase
}if(d.options.fade===false){d.$slideTrack.css(e)
}else{d.$slides.eq(c).css(e)
}};
b.prototype.autoPlay=function(){var c=this;
c.autoPlayClear();
if(c.slideCount>c.options.slidesToShow){c.autoPlayTimer=setInterval(c.autoPlayIterator,c.options.autoplaySpeed)
}};
b.prototype.autoPlayClear=function(){var c=this;
if(c.autoPlayTimer){clearInterval(c.autoPlayTimer)
}};
b.prototype.autoPlayIterator=function(){var c=this,d=c.currentSlide+c.options.slidesToScroll;
if(!c.paused&&!c.interrupted&&!c.focussed){if(c.options.infinite===false){if(c.direction===1&&(c.currentSlide+1)===(c.slideCount-1)){c.direction=0
}else{if(c.direction===0){d=c.currentSlide-c.options.slidesToScroll;
if(c.currentSlide-1===0){c.direction=1
}}}}c.slideHandler(d)
}};
b.prototype.buildArrows=function(){var c=this;
if(c.options.arrows===true){c.$prevArrow=a(c.options.prevArrow).addClass("slick-arrow");
c.$nextArrow=a(c.options.nextArrow).addClass("slick-arrow");
if(c.slideCount>c.options.slidesToShow){c.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex");
c.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex");
if(c.htmlExpr.test(c.options.prevArrow)){c.$prevArrow.prependTo(c.options.appendArrows)
}if(c.htmlExpr.test(c.options.nextArrow)){c.$nextArrow.appendTo(c.options.appendArrows)
}if(c.options.infinite!==true){c.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")
}}else{c.$prevArrow.add(c.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"})
}}};
b.prototype.buildDots=function(){var d=this,e,c;
if(d.options.dots===true&&d.slideCount>d.options.slidesToShow){d.$slider.addClass("slick-dotted");
c=a("<ul />").addClass(d.options.dotsClass);
for(e=0;
e<=d.getDotCount();
e+=1){c.append(a("<li />").append(d.options.customPaging.call(this,d,e)))
}d.$dots=c.appendTo(d.options.appendDots);
d.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")
}};
b.prototype.buildOut=function(){var c=this;
c.$slides=c.$slider.children(c.options.slide+":not(.slick-cloned)").addClass("slick-slide");
c.slideCount=c.$slides.length;
c.$slides.each(function(d,e){a(e).attr("data-slick-index",d).data("originalStyling",a(e).attr("style")||"")
});
c.$slider.addClass("slick-slider");
c.$slideTrack=(c.slideCount===0)?a('<div class="slick-track"/>').appendTo(c.$slider):c.$slides.wrapAll('<div class="slick-track"/>').parent();
c.$list=c.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent();
c.$slideTrack.css("opacity",0);
if(c.options.centerMode===true||c.options.swipeToSlide===true){c.options.slidesToScroll=1
}a("img[data-lazy]",c.$slider).not("[src]").addClass("slick-loading");
c.setupInfinite();
c.buildArrows();
c.buildDots();
c.updateDots();
c.setSlideClasses(typeof c.currentSlide==="number"?c.currentSlide:0);
if(c.options.draggable===true){c.$list.addClass("draggable")
}};
b.prototype.buildRows=function(){var n=this,m,l,j,d,k,h,e;
d=document.createDocumentFragment();
h=n.$slider.children();
if(n.options.rows>1){e=n.options.slidesPerRow*n.options.rows;
k=Math.ceil(h.length/e);
for(m=0;
m<k;
m++){var f=document.createElement("div");
for(l=0;
l<n.options.rows;
l++){var o=document.createElement("div");
for(j=0;
j<n.options.slidesPerRow;
j++){var g=(m*e+((l*n.options.slidesPerRow)+j));
if(h.get(g)){o.appendChild(h.get(g))
}}f.appendChild(o)
}d.appendChild(f)
}n.$slider.empty().append(d);
n.$slider.children().children().children().css({width:(100/n.options.slidesPerRow)+"%",display:"inline-block"})
}};
b.prototype.checkResponsive=function(h,k){var l=this,j,c,e,f=false;
var g=l.$slider.width();
var d=window.innerWidth||a(window).width();
if(l.respondTo==="window"){e=d
}else{if(l.respondTo==="slider"){e=g
}else{if(l.respondTo==="min"){e=Math.min(d,g)
}}}if(l.options.responsive&&l.options.responsive.length&&l.options.responsive!==null){c=null;
for(j in l.breakpoints){if(l.breakpoints.hasOwnProperty(j)){if(l.originalSettings.mobileFirst===false){if(e<l.breakpoints[j]){c=l.breakpoints[j]
}}else{if(e>l.breakpoints[j]){c=l.breakpoints[j]
}}}}if(c!==null){if(l.activeBreakpoint!==null){if(c!==l.activeBreakpoint||k){l.activeBreakpoint=c;
if(l.breakpointSettings[c]==="unslick"){l.unslick(c)
}else{l.options=a.extend({},l.originalSettings,l.breakpointSettings[c]);
if(h===true){l.currentSlide=l.options.initialSlide
}l.refresh(h)
}f=c
}}else{l.activeBreakpoint=c;
if(l.breakpointSettings[c]==="unslick"){l.unslick(c)
}else{l.options=a.extend({},l.originalSettings,l.breakpointSettings[c]);
if(h===true){l.currentSlide=l.options.initialSlide
}l.refresh(h)
}f=c
}}else{if(l.activeBreakpoint!==null){l.activeBreakpoint=null;
l.options=l.originalSettings;
if(h===true){l.currentSlide=l.options.initialSlide
}l.refresh(h);
f=c
}}if(!h&&f!==false){l.$slider.trigger("breakpoint",[l,f])
}}};
b.prototype.changeSlide=function(g,k){var e=this,c=a(g.currentTarget),j,f,h;
if(c.is("a")){g.preventDefault()
}if(!c.is("li")){c=c.closest("li")
}h=(e.slideCount%e.options.slidesToScroll!==0);
j=h?0:(e.slideCount-e.currentSlide)%e.options.slidesToScroll;
switch(g.data.message){case"previous":f=j===0?e.options.slidesToScroll:e.options.slidesToShow-j;
if(e.slideCount>e.options.slidesToShow){e.slideHandler(e.currentSlide-f,false,k)
}break;
case"next":f=j===0?e.options.slidesToScroll:j;
if(e.slideCount>e.options.slidesToShow){e.slideHandler(e.currentSlide+f,false,k)
}break;
case"index":var d=g.data.index===0?0:g.data.index||c.index()*e.options.slidesToScroll;
e.slideHandler(e.checkNavigable(d),false,k);
c.children().trigger("focus");
break;
default:return
}};
b.prototype.checkNavigable=function(d){var c=this,e,f;
e=c.getNavigableIndexes();
f=0;
if(d>e[e.length-1]){d=e[e.length-1]
}else{for(var g in e){if(d<e[g]){d=f;
break
}f=e[g]
}}return d
};
b.prototype.cleanUpEvents=function(){var c=this;
if(c.options.dots&&c.$dots!==null){a("li",c.$dots).off("click.slick",c.changeSlide).off("mouseenter.slick",a.proxy(c.interrupt,c,true)).off("mouseleave.slick",a.proxy(c.interrupt,c,false))
}c.$slider.off("focus.slick blur.slick");
if(c.options.arrows===true&&c.slideCount>c.options.slidesToShow){c.$prevArrow&&c.$prevArrow.off("click.slick",c.changeSlide);
c.$nextArrow&&c.$nextArrow.off("click.slick",c.changeSlide)
}c.$list.off("touchstart.slick mousedown.slick",c.swipeHandler);
c.$list.off("touchmove.slick mousemove.slick",c.swipeHandler);
c.$list.off("touchend.slick mouseup.slick",c.swipeHandler);
c.$list.off("touchcancel.slick mouseleave.slick",c.swipeHandler);
c.$list.off("click.slick",c.clickHandler);
a(document).off(c.visibilityChange,c.visibility);
c.cleanUpSlideEvents();
if(c.options.accessibility===true){c.$list.off("keydown.slick",c.keyHandler)
}if(c.options.focusOnSelect===true){a(c.$slideTrack).children().off("click.slick",c.selectHandler)
}a(window).off("orientationchange.slick.slick-"+c.instanceUid,c.orientationChange);
a(window).off("resize.slick.slick-"+c.instanceUid,c.resize);
a("[draggable!=true]",c.$slideTrack).off("dragstart",c.preventDefault);
a(window).off("load.slick.slick-"+c.instanceUid,c.setPosition);
a(document).off("ready.slick.slick-"+c.instanceUid,c.setPosition)
};
b.prototype.cleanUpSlideEvents=function(){var c=this;
c.$list.off("mouseenter.slick",a.proxy(c.interrupt,c,true));
c.$list.off("mouseleave.slick",a.proxy(c.interrupt,c,false))
};
b.prototype.cleanUpRows=function(){var d=this,c;
if(d.options.rows>1){c=d.$slides.children().children();
c.removeAttr("style");
d.$slider.empty().append(c)
}};
b.prototype.clickHandler=function(d){var c=this;
if(c.shouldClick===false){d.stopImmediatePropagation();
d.stopPropagation();
d.preventDefault()
}};
b.prototype.destroy=function(d){var c=this;
c.autoPlayClear();
c.touchObject={};
c.cleanUpEvents();
a(".slick-cloned",c.$slider).detach();
if(c.$dots){c.$dots.remove()
}if(c.$prevArrow&&c.$prevArrow.length){c.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display","");
if(c.htmlExpr.test(c.options.prevArrow)){c.$prevArrow.remove()
}}if(c.$nextArrow&&c.$nextArrow.length){c.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display","");
if(c.htmlExpr.test(c.options.nextArrow)){c.$nextArrow.remove()
}}if(c.$slides){c.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){a(this).attr("style",a(this).data("originalStyling"))
});
c.$slideTrack.children(this.options.slide).detach();
c.$slideTrack.detach();
c.$list.detach();
c.$slider.append(c.$slides)
}c.cleanUpRows();
c.$slider.removeClass("slick-slider");
c.$slider.removeClass("slick-initialized");
c.$slider.removeClass("slick-dotted");
c.unslicked=true;
if(!d){c.$slider.trigger("destroy",[c])
}};
b.prototype.disableTransition=function(c){var d=this,e={};
e[d.transitionType]="";
if(d.options.fade===false){d.$slideTrack.css(e)
}else{d.$slides.eq(c).css(e)
}};
b.prototype.fadeSlide=function(d,e){var c=this;
if(c.cssTransitions===false){c.$slides.eq(d).css({zIndex:c.options.zIndex});
c.$slides.eq(d).animate({opacity:1},c.options.speed,c.options.easing,e)
}else{c.applyTransition(d);
c.$slides.eq(d).css({opacity:1,zIndex:c.options.zIndex});
if(e){setTimeout(function(){c.disableTransition(d);
e.call()
},c.options.speed)
}}};
b.prototype.fadeSlideOut=function(d){var c=this;
if(c.cssTransitions===false){c.$slides.eq(d).animate({opacity:0,zIndex:c.options.zIndex-2},c.options.speed,c.options.easing)
}else{c.applyTransition(d);
c.$slides.eq(d).css({opacity:0,zIndex:c.options.zIndex-2})
}};
b.prototype.filterSlides=b.prototype.slickFilter=function(d){var c=this;
if(d!==null){c.$slidesCache=c.$slides;
c.unload();
c.$slideTrack.children(this.options.slide).detach();
c.$slidesCache.filter(d).appendTo(c.$slideTrack);
c.reinit()
}};
b.prototype.focusHandler=function(){var c=this;
c.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*:not(.slick-arrow)",function(e){e.stopImmediatePropagation();
var d=a(this);
setTimeout(function(){if(c.options.pauseOnFocus){c.focussed=d.is(":focus");
c.autoPlay()
}},0)
})
};
b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var c=this;
return c.currentSlide
};
b.prototype.getDotCount=function(){var d=this;
var f=0;
var c=0;
var e=0;
if(d.options.infinite===true){while(f<d.slideCount){++e;
f=c+d.options.slidesToScroll;
c+=d.options.slidesToScroll<=d.options.slidesToShow?d.options.slidesToScroll:d.options.slidesToShow
}}else{if(d.options.centerMode===true){e=d.slideCount
}else{if(!d.options.asNavFor){e=1+Math.ceil((d.slideCount-d.options.slidesToShow)/d.options.slidesToScroll)
}else{while(f<d.slideCount){++e;
f=c+d.options.slidesToScroll;
c+=d.options.slidesToScroll<=d.options.slidesToShow?d.options.slidesToScroll:d.options.slidesToShow
}}}}return e-1
};
b.prototype.getLeft=function(f){var d=this,h,e,c=0,g;
d.slideOffset=0;
e=d.$slides.first().outerHeight(true);
if(d.options.infinite===true){if(d.slideCount>d.options.slidesToShow){d.slideOffset=(d.slideWidth*d.options.slidesToShow)*-1;
c=(e*d.options.slidesToShow)*-1
}if(d.slideCount%d.options.slidesToScroll!==0){if(f+d.options.slidesToScroll>d.slideCount&&d.slideCount>d.options.slidesToShow){if(f>d.slideCount){d.slideOffset=((d.options.slidesToShow-(f-d.slideCount))*d.slideWidth)*-1;
c=((d.options.slidesToShow-(f-d.slideCount))*e)*-1
}else{d.slideOffset=((d.slideCount%d.options.slidesToScroll)*d.slideWidth)*-1;
c=((d.slideCount%d.options.slidesToScroll)*e)*-1
}}}}else{if(f+d.options.slidesToShow>d.slideCount){d.slideOffset=((f+d.options.slidesToShow)-d.slideCount)*d.slideWidth;
c=((f+d.options.slidesToShow)-d.slideCount)*e
}}if(d.slideCount<=d.options.slidesToShow){d.slideOffset=0;
c=0
}if(d.options.centerMode===true&&d.options.infinite===true){d.slideOffset+=d.slideWidth*Math.floor(d.options.slidesToShow/2)-d.slideWidth
}else{if(d.options.centerMode===true){d.slideOffset=0;
d.slideOffset+=d.slideWidth*Math.floor(d.options.slidesToShow/2)
}}if(d.options.vertical===false){h=((f*d.slideWidth)*-1)+d.slideOffset
}else{h=((f*e)*-1)+c
}if(d.options.variableWidth===true){if(d.slideCount<=d.options.slidesToShow||d.options.infinite===false){g=d.$slideTrack.children(".slick-slide").eq(f)
}else{g=d.$slideTrack.children(".slick-slide").eq(f+d.options.slidesToShow)
}if(d.options.rtl===true){if(g[0]){h=(d.$slideTrack.width()-g[0].offsetLeft-g.width())*-1
}else{h=0
}}else{h=g[0]?g[0].offsetLeft*-1:0
}if(d.options.centerMode===true){if(d.slideCount<=d.options.slidesToShow||d.options.infinite===false){g=d.$slideTrack.children(".slick-slide").eq(f)
}else{g=d.$slideTrack.children(".slick-slide").eq(f+d.options.slidesToShow+1)
}if(d.options.rtl===true){if(g[0]){h=(d.$slideTrack.width()-g[0].offsetLeft-g.width())*-1
}else{h=0
}}else{h=g[0]?g[0].offsetLeft*-1:0
}h+=(d.$list.width()-g.outerWidth())/2
}}return h
};
b.prototype.getOption=b.prototype.slickGetOption=function(d){var c=this;
return c.options[d]
};
b.prototype.getNavigableIndexes=function(){var f=this,g=0,d=0,e=[],c;
if(f.options.infinite===false){c=f.slideCount
}else{g=f.options.slidesToScroll*-1;
d=f.options.slidesToScroll*-1;
c=f.slideCount*2
}while(g<c){e.push(g);
g=d+f.options.slidesToScroll;
d+=f.options.slidesToScroll<=f.options.slidesToShow?f.options.slidesToScroll:f.options.slidesToShow
}return e
};
b.prototype.getSlick=function(){return this
};
b.prototype.getSlideCount=function(){var e=this,d,f,c;
c=e.options.centerMode===true?e.slideWidth*Math.floor(e.options.slidesToShow/2):0;
if(e.options.swipeToSlide===true){e.$slideTrack.find(".slick-slide").each(function(h,g){if(g.offsetLeft-c+(a(g).outerWidth()/2)>(e.swipeLeft*-1)){f=g;
return false
}});
d=Math.abs(a(f).attr("data-slick-index")-e.currentSlide)||1;
return d
}else{return e.options.slidesToScroll
}};
b.prototype.goTo=b.prototype.slickGoTo=function(c,e){var d=this;
d.changeSlide({data:{message:"index",index:parseInt(c)}},e)
};
b.prototype.init=function(c){var d=this;
if(!a(d.$slider).hasClass("slick-initialized")){a(d.$slider).addClass("slick-initialized");
d.buildRows();
d.buildOut();
d.setProps();
d.startLoad();
d.loadSlider();
d.initializeEvents();
d.updateArrows();
d.updateDots();
d.checkResponsive(true);
d.focusHandler()
}if(c){d.$slider.trigger("init",[d])
}if(d.options.accessibility===true){d.initADA()
}if(d.options.autoplay){d.paused=false;
d.autoPlay()
}};
b.prototype.initADA=function(){var c=this;
c.$slides.add(c.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"});
c.$slideTrack.attr("role","listbox");
c.$slides.not(c.$slideTrack.find(".slick-cloned")).each(function(d){a(this).attr({role:"option","aria-describedby":"slick-slide"+c.instanceUid+d+""})
});
if(c.$dots!==null){c.$dots.attr("role","tablist").find("li").each(function(d){a(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+c.instanceUid+d+"",id:"slick-slide"+c.instanceUid+d+""})
}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar")
}c.activateADA()
};
b.prototype.initArrowEvents=function(){var c=this;
if(c.options.arrows===true&&c.slideCount>c.options.slidesToShow){c.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},c.changeSlide);
c.$nextArrow.off("click.slick").on("click.slick",{message:"next"},c.changeSlide)
}};
b.prototype.initDotEvents=function(){var c=this;
if(c.options.dots===true&&c.slideCount>c.options.slidesToShow){a("li",c.$dots).on("click.slick",{message:"index"},c.changeSlide)
}if(c.options.dots===true&&c.options.pauseOnDotsHover===true){a("li",c.$dots).on("mouseenter.slick",a.proxy(c.interrupt,c,true)).on("mouseleave.slick",a.proxy(c.interrupt,c,false))
}};
b.prototype.initSlideEvents=function(){var c=this;
if(c.options.pauseOnHover){c.$list.on("mouseenter.slick",a.proxy(c.interrupt,c,true));
c.$list.on("mouseleave.slick",a.proxy(c.interrupt,c,false))
}};
b.prototype.initializeEvents=function(){var c=this;
c.initArrowEvents();
c.initDotEvents();
c.initSlideEvents();
c.$list.on("touchstart.slick mousedown.slick",{action:"start"},c.swipeHandler);
c.$list.on("touchmove.slick mousemove.slick",{action:"move"},c.swipeHandler);
c.$list.on("touchend.slick mouseup.slick",{action:"end"},c.swipeHandler);
c.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},c.swipeHandler);
c.$list.on("click.slick",c.clickHandler);
a(document).on(c.visibilityChange,a.proxy(c.visibility,c));
if(c.options.accessibility===true){c.$list.on("keydown.slick",c.keyHandler)
}if(c.options.focusOnSelect===true){a(c.$slideTrack).children().on("click.slick",c.selectHandler)
}a(window).on("orientationchange.slick.slick-"+c.instanceUid,a.proxy(c.orientationChange,c));
a(window).on("resize.slick.slick-"+c.instanceUid,a.proxy(c.resize,c));
a("[draggable!=true]",c.$slideTrack).on("dragstart",c.preventDefault);
a(window).on("load.slick.slick-"+c.instanceUid,c.setPosition);
a(document).on("ready.slick.slick-"+c.instanceUid,c.setPosition)
};
b.prototype.initUI=function(){var c=this;
if(c.options.arrows===true&&c.slideCount>c.options.slidesToShow){c.$prevArrow.show();
c.$nextArrow.show()
}if(c.options.dots===true&&c.slideCount>c.options.slidesToShow){c.$dots.show()
}};
b.prototype.keyHandler=function(d){var c=this;
if(!d.target.tagName.match("TEXTAREA|INPUT|SELECT")){if(d.keyCode===37&&c.options.accessibility===true){c.changeSlide({data:{message:c.options.rtl===true?"next":"previous"}})
}else{if(d.keyCode===39&&c.options.accessibility===true){c.changeSlide({data:{message:c.options.rtl===true?"previous":"next"}})
}}}};
b.prototype.lazyLoad=function(){var e=this,c,h,g,f;
function d(j){a("img[data-lazy]",j).each(function(){var l=a(this),m=a(this).attr("data-lazy"),k=document.createElement("img");
k.onload=function(){l.animate({opacity:0},100,function(){l.attr("src",m).animate({opacity:1},200,function(){l.removeAttr("data-lazy").removeClass("slick-loading")
});
e.$slider.trigger("lazyLoaded",[e,l,m])
})
};
k.onerror=function(){l.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");
e.$slider.trigger("lazyLoadError",[e,l,m])
};
k.src=m
})
}if(e.options.centerMode===true){if(e.options.infinite===true){g=e.currentSlide+(e.options.slidesToShow/2+1);
f=g+e.options.slidesToShow+2
}else{g=Math.max(0,e.currentSlide-(e.options.slidesToShow/2+1));
f=2+(e.options.slidesToShow/2+1)+e.currentSlide
}}else{g=e.options.infinite?e.options.slidesToShow+e.currentSlide:e.currentSlide;
f=Math.ceil(g+e.options.slidesToShow);
if(e.options.fade===true){if(g>0){g--
}if(f<=e.slideCount){f++
}}}c=e.$slider.find(".slick-slide").slice(g,f);
d(c);
if(e.slideCount<=e.options.slidesToShow){h=e.$slider.find(".slick-slide");
d(h)
}else{if(e.currentSlide>=e.slideCount-e.options.slidesToShow){h=e.$slider.find(".slick-cloned").slice(0,e.options.slidesToShow);
d(h)
}else{if(e.currentSlide===0){h=e.$slider.find(".slick-cloned").slice(e.options.slidesToShow*-1);
d(h)
}}}};
b.prototype.loadSlider=function(){var c=this;
c.setPosition();
c.$slideTrack.css({opacity:1});
c.$slider.removeClass("slick-loading");
c.initUI();
if(c.options.lazyLoad==="progressive"){c.progressiveLazyLoad()
}};
b.prototype.next=b.prototype.slickNext=function(){var c=this;
c.changeSlide({data:{message:"next"}})
};
b.prototype.orientationChange=function(){var c=this;
c.checkResponsive();
c.setPosition()
};
b.prototype.pause=b.prototype.slickPause=function(){var c=this;
c.autoPlayClear();
c.paused=true
};
b.prototype.play=b.prototype.slickPlay=function(){var c=this;
c.autoPlay();
c.options.autoplay=true;
c.paused=false;
c.focussed=false;
c.interrupted=false
};
b.prototype.postSlide=function(d){var c=this;
if(!c.unslicked){c.$slider.trigger("afterChange",[c,d]);
c.animating=false;
c.setPosition();
c.swipeLeft=null;
if(c.options.autoplay){c.autoPlay()
}if(c.options.accessibility===true){c.initADA()
}}};
b.prototype.prev=b.prototype.slickPrev=function(){var c=this;
c.changeSlide({data:{message:"previous"}})
};
b.prototype.preventDefault=function(c){c.preventDefault()
};
b.prototype.progressiveLazyLoad=function(e){e=e||1;
var d=this,c=a("img[data-lazy]",d.$slider),g,h,f;
if(c.length){g=c.first();
h=g.attr("data-lazy");
f=document.createElement("img");
f.onload=function(){g.attr("src",h).removeAttr("data-lazy").removeClass("slick-loading");
if(d.options.adaptiveHeight===true){d.setPosition()
}d.$slider.trigger("lazyLoaded",[d,g,h]);
d.progressiveLazyLoad()
};
f.onerror=function(){if(e<3){setTimeout(function(){d.progressiveLazyLoad(e+1)
},500)
}else{g.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error");
d.$slider.trigger("lazyLoadError",[d,g,h]);
d.progressiveLazyLoad()
}};
f.src=h
}else{d.$slider.trigger("allImagesLoaded",[d])
}};
b.prototype.refresh=function(d){var e=this,f,c;
c=e.slideCount-e.options.slidesToShow;
if(!e.options.infinite&&(e.currentSlide>c)){e.currentSlide=c
}if(e.slideCount<=e.options.slidesToShow){e.currentSlide=0
}f=e.currentSlide;
e.destroy(true);
a.extend(e,e.initials,{currentSlide:f});
e.init();
if(!d){e.changeSlide({data:{message:"index",index:f}},false)
}};
b.prototype.registerBreakpoints=function(){var e=this,d,f,c,g=e.options.responsive||null;
if(a.type(g)==="array"&&g.length){e.respondTo=e.options.respondTo||"window";
for(d in g){c=e.breakpoints.length-1;
f=g[d].breakpoint;
if(g.hasOwnProperty(d)){while(c>=0){if(e.breakpoints[c]&&e.breakpoints[c]===f){e.breakpoints.splice(c,1)
}c--
}e.breakpoints.push(f);
e.breakpointSettings[f]=g[d].settings
}}e.breakpoints.sort(function(j,h){return(e.options.mobileFirst)?j-h:h-j
})
}};
b.prototype.reinit=function(){var c=this;
c.$slides=c.$slideTrack.children(c.options.slide).addClass("slick-slide");
c.slideCount=c.$slides.length;
if(c.currentSlide>=c.slideCount&&c.currentSlide!==0){c.currentSlide=c.currentSlide-c.options.slidesToScroll
}if(c.slideCount<=c.options.slidesToShow){c.currentSlide=0
}c.registerBreakpoints();
c.setProps();
c.setupInfinite();
c.buildArrows();
c.updateArrows();
c.initArrowEvents();
c.buildDots();
c.updateDots();
c.initDotEvents();
c.cleanUpSlideEvents();
c.initSlideEvents();
c.checkResponsive(false,true);
if(c.options.focusOnSelect===true){a(c.$slideTrack).children().on("click.slick",c.selectHandler)
}c.setSlideClasses(typeof c.currentSlide==="number"?c.currentSlide:0);
c.setPosition();
c.focusHandler();
c.paused=!c.options.autoplay;
c.autoPlay();
c.$slider.trigger("reInit",[c])
};
b.prototype.resize=function(){var c=this;
if(a(window).width()!==c.windowWidth){clearTimeout(c.windowDelay);
c.windowDelay=window.setTimeout(function(){c.windowWidth=a(window).width();
c.checkResponsive();
if(!c.unslicked){c.setPosition()
}},50)
}};
b.prototype.removeSlide=b.prototype.slickRemove=function(d,f,e){var c=this;
if(typeof(d)==="boolean"){f=d;
d=f===true?0:c.slideCount-1
}else{d=f===true?--d:d
}if(c.slideCount<1||d<0||d>c.slideCount-1){return false
}c.unload();
if(e===true){c.$slideTrack.children().remove()
}else{c.$slideTrack.children(this.options.slide).eq(d).remove()
}c.$slides=c.$slideTrack.children(this.options.slide);
c.$slideTrack.children(this.options.slide).detach();
c.$slideTrack.append(c.$slides);
c.$slidesCache=c.$slides;
c.reinit()
};
b.prototype.setCSS=function(d){var e=this,f={},c,g;
if(e.options.rtl===true){d=-d
}c=e.positionProp=="left"?Math.ceil(d)+"px":"0px";
g=e.positionProp=="top"?Math.ceil(d)+"px":"0px";
f[e.positionProp]=d;
if(e.transformsEnabled===false){e.$slideTrack.css(f)
}else{f={};
if(e.cssTransitions===false){f[e.animType]="translate("+c+", "+g+")";
e.$slideTrack.css(f)
}else{f[e.animType]="translate3d("+c+", "+g+", 0px)";
e.$slideTrack.css(f)
}}};
b.prototype.setDimensions=function(){var c=this;
if(c.options.vertical===false){if(c.options.centerMode===true){c.$list.css({padding:("0px "+c.options.centerPadding)})
}}else{c.$list.height(c.$slides.first().outerHeight(true)*c.options.slidesToShow);
if(c.options.centerMode===true){c.$list.css({padding:(c.options.centerPadding+" 0px")})
}}c.listWidth=c.$list.width();
c.listHeight=c.$list.height();
if(c.options.vertical===false&&c.options.variableWidth===false){c.slideWidth=Math.ceil(c.listWidth/c.options.slidesToShow);
c.$slideTrack.width(Math.ceil((c.slideWidth*c.$slideTrack.children(".slick-slide").length)))
}else{if(c.options.variableWidth===true){c.$slideTrack.width(5000*c.slideCount)
}else{c.slideWidth=Math.ceil(c.listWidth);
c.$slideTrack.height(Math.ceil((c.$slides.first().outerHeight(true)*c.$slideTrack.children(".slick-slide").length)))
}}var d=c.$slides.first().outerWidth(true)-c.$slides.first().width();
if(c.options.variableWidth===false){c.$slideTrack.children(".slick-slide").width(c.slideWidth-d)
}};
b.prototype.setFade=function(){var c=this,d;
c.$slides.each(function(e,f){d=(c.slideWidth*e)*-1;
if(c.options.rtl===true){a(f).css({position:"relative",right:d,top:0,zIndex:c.options.zIndex-2,opacity:0})
}else{a(f).css({position:"relative",left:d,top:0,zIndex:c.options.zIndex-2,opacity:0})
}});
c.$slides.eq(c.currentSlide).css({zIndex:c.options.zIndex-1,opacity:1})
};
b.prototype.setHeight=function(){var d=this;
if(d.options.slidesToShow===1&&d.options.adaptiveHeight===true&&d.options.vertical===false){var c=d.$slides.eq(d.currentSlide).outerHeight(true);
d.$list.css("height",c)
}};
b.prototype.setOption=b.prototype.slickSetOption=function(){var d=this,c,h,g,j,f=false,e;
if(a.type(arguments[0])==="object"){g=arguments[0];
f=arguments[1];
e="multiple"
}else{if(a.type(arguments[0])==="string"){g=arguments[0];
j=arguments[1];
f=arguments[2];
if(arguments[0]==="responsive"&&a.type(arguments[1])==="array"){e="responsive"
}else{if(typeof arguments[1]!=="undefined"){e="single"
}}}}if(e==="single"){d.options[g]=j
}else{if(e==="multiple"){a.each(g,function(k,l){d.options[k]=l
})
}else{if(e==="responsive"){for(h in j){if(a.type(d.options.responsive)!=="array"){d.options.responsive=[j[h]]
}else{c=d.options.responsive.length-1;
while(c>=0){if(d.options.responsive[c].breakpoint===j[h].breakpoint){d.options.responsive.splice(c,1)
}c--
}d.options.responsive.push(j[h])
}}}}}if(f){d.unload();
d.reinit()
}};
b.prototype.setPosition=function(){var c=this;
c.setDimensions();
c.setHeight();
if(c.options.fade===false){c.setCSS(c.getLeft(c.currentSlide))
}else{c.setFade()
}c.$slider.trigger("setPosition",[c])
};
b.prototype.setProps=function(){var d=this,c=document.body.style;
d.positionProp=d.options.vertical===true?"top":"left";
if(d.positionProp==="top"){d.$slider.addClass("slick-vertical")
}else{d.$slider.removeClass("slick-vertical")
}if(c.WebkitTransition!==undefined||c.MozTransition!==undefined||c.msTransition!==undefined){if(d.options.useCSS===true){d.cssTransitions=true
}}if(d.options.fade){if(typeof d.options.zIndex==="number"){if(d.options.zIndex<3){d.options.zIndex=3
}}else{d.options.zIndex=d.defaults.zIndex
}}if(c.OTransform!==undefined){d.animType="OTransform";
d.transformType="-o-transform";
d.transitionType="OTransition";
if(c.perspectiveProperty===undefined&&c.webkitPerspective===undefined){d.animType=false
}}if(c.MozTransform!==undefined){d.animType="MozTransform";
d.transformType="-moz-transform";
d.transitionType="MozTransition";
if(c.perspectiveProperty===undefined&&c.MozPerspective===undefined){d.animType=false
}}if(c.webkitTransform!==undefined){d.animType="webkitTransform";
d.transformType="-webkit-transform";
d.transitionType="webkitTransition";
if(c.perspectiveProperty===undefined&&c.webkitPerspective===undefined){d.animType=false
}}if(c.msTransform!==undefined){d.animType="msTransform";
d.transformType="-ms-transform";
d.transitionType="msTransition";
if(c.msTransform===undefined){d.animType=false
}}if(c.transform!==undefined&&d.animType!==false){d.animType="transform";
d.transformType="transform";
d.transitionType="transition"
}d.transformsEnabled=d.options.useTransform&&(d.animType!==null&&d.animType!==false)
};
b.prototype.setSlideClasses=function(f){var e=this,c,d,h,g;
d=e.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true");
e.$slides.eq(f).addClass("slick-current");
if(e.options.centerMode===true){c=Math.floor(e.options.slidesToShow/2);
if(e.options.infinite===true){if(f>=c&&f<=(e.slideCount-1)-c){e.$slides.slice(f-c,f+c+1).addClass("slick-active").attr("aria-hidden","false")
}else{h=e.options.slidesToShow+f;
d.slice(h-c+1,h+c+2).addClass("slick-active").attr("aria-hidden","false")
}if(f===0){d.eq(d.length-1-e.options.slidesToShow).addClass("slick-center")
}else{if(f===e.slideCount-1){d.eq(e.options.slidesToShow).addClass("slick-center")
}}}e.$slides.eq(f).addClass("slick-center")
}else{if(f>=0&&f<=(e.slideCount-e.options.slidesToShow)){e.$slides.slice(f,f+e.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")
}else{if(d.length<=e.options.slidesToShow){d.addClass("slick-active").attr("aria-hidden","false")
}else{g=e.slideCount%e.options.slidesToShow;
h=e.options.infinite===true?e.options.slidesToShow+f:f;
if(e.options.slidesToShow==e.options.slidesToScroll&&(e.slideCount-f)<e.options.slidesToShow){d.slice(h-(e.options.slidesToShow-g),h+g).addClass("slick-active").attr("aria-hidden","false")
}else{d.slice(h,h+e.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")
}}}}if(e.options.lazyLoad==="ondemand"){e.lazyLoad()
}};
b.prototype.setupInfinite=function(){var c=this,d,f,e;
if(c.options.fade===true){c.options.centerMode=false
}if(c.options.infinite===true&&c.options.fade===false){f=null;
if(c.slideCount>c.options.slidesToShow){if(c.options.centerMode===true){e=c.options.slidesToShow+1
}else{e=c.options.slidesToShow
}for(d=c.slideCount;
d>(c.slideCount-e);
d-=1){f=d-1;
a(c.$slides[f]).clone(true).attr("id","").attr("data-slick-index",f-c.slideCount).prependTo(c.$slideTrack).addClass("slick-cloned")
}for(d=0;
d<e;
d+=1){f=d;
a(c.$slides[f]).clone(true).attr("id","").attr("data-slick-index",f+c.slideCount).appendTo(c.$slideTrack).addClass("slick-cloned")
}c.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")
})
}}};
b.prototype.interrupt=function(c){var d=this;
if(!c){d.autoPlay()
}d.interrupted=c
};
b.prototype.selectHandler=function(f){var e=this;
var d=a(f.target).is(".slick-slide")?a(f.target):a(f.target).parents(".slick-slide");
var c=parseInt(d.attr("data-slick-index"));
if(!c){c=0
}if(e.slideCount<=e.options.slidesToShow){e.setSlideClasses(c);
e.asNavFor(c);
return
}e.slideHandler(c)
};
b.prototype.slideHandler=function(f,j,e){var d,m,h,k,g=null,l=this,c;
j=j||false;
if(l.animating===true&&l.options.waitForAnimate===true){return
}if(l.options.fade===true&&l.currentSlide===f){return
}if(l.slideCount<=l.options.slidesToShow){return
}if(j===false){l.asNavFor(f)
}d=f;
g=l.getLeft(d);
k=l.getLeft(l.currentSlide);
l.currentLeft=l.swipeLeft===null?k:l.swipeLeft;
if(l.options.infinite===false&&l.options.centerMode===false&&(f<0||f>l.getDotCount()*l.options.slidesToScroll)){if(l.options.fade===false){d=l.currentSlide;
if(e!==true){l.animateSlide(k,function(){l.postSlide(d)
})
}else{l.postSlide(d)
}}return
}else{if(l.options.infinite===false&&l.options.centerMode===true&&(f<0||f>(l.slideCount-l.options.slidesToScroll))){if(l.options.fade===false){d=l.currentSlide;
if(e!==true){l.animateSlide(k,function(){l.postSlide(d)
})
}else{l.postSlide(d)
}}return
}}if(l.options.autoplay){clearInterval(l.autoPlayTimer)
}if(d<0){if(l.slideCount%l.options.slidesToScroll!==0){m=l.slideCount-(l.slideCount%l.options.slidesToScroll)
}else{m=l.slideCount+d
}}else{if(d>=l.slideCount){if(l.slideCount%l.options.slidesToScroll!==0){m=0
}else{m=d-l.slideCount
}}else{m=d
}}l.animating=true;
l.$slider.trigger("beforeChange",[l,l.currentSlide,m]);
h=l.currentSlide;
l.currentSlide=m;
l.setSlideClasses(l.currentSlide);
if(l.options.asNavFor){c=l.getNavTarget();
c=c.slick("getSlick");
if(c.slideCount<=c.options.slidesToShow){c.setSlideClasses(l.currentSlide)
}}l.updateDots();
l.updateArrows();
if(l.options.fade===true){if(e!==true){l.fadeSlideOut(h);
l.fadeSlide(m,function(){l.postSlide(m)
})
}else{l.postSlide(m)
}l.animateHeight();
return
}if(e!==true){l.animateSlide(g,function(){l.postSlide(m)
})
}else{l.postSlide(m)
}};
b.prototype.startLoad=function(){var c=this;
if(c.options.arrows===true&&c.slideCount>c.options.slidesToShow){c.$prevArrow.hide();
c.$nextArrow.hide()
}if(c.options.dots===true&&c.slideCount>c.options.slidesToShow){c.$dots.hide()
}c.$slider.addClass("slick-loading")
};
b.prototype.swipeDirection=function(){var c,f,e,g,d=this;
c=d.touchObject.startX-d.touchObject.curX;
f=d.touchObject.startY-d.touchObject.curY;
e=Math.atan2(f,c);
g=Math.round(e*180/Math.PI);
if(g<0){g=360-Math.abs(g)
}if((g<=45)&&(g>=0)){return(d.options.rtl===false?"left":"right")
}if((g<=360)&&(g>=315)){return(d.options.rtl===false?"left":"right")
}if((g>=135)&&(g<=225)){return(d.options.rtl===false?"right":"left")
}if(d.options.verticalSwiping===true){if((g>=35)&&(g<=135)){return"down"
}else{return"up"
}}return"vertical"
};
b.prototype.swipeEnd=function(e){var d=this,c,f;
d.dragging=false;
d.interrupted=false;
d.shouldClick=(d.touchObject.swipeLength>10)?false:true;
if(d.touchObject.curX===undefined){return false
}if(d.touchObject.edgeHit===true){d.$slider.trigger("edge",[d,d.swipeDirection()])
}if(d.touchObject.swipeLength>=d.touchObject.minSwipe){f=d.swipeDirection();
switch(f){case"left":case"down":c=d.options.swipeToSlide?d.checkNavigable(d.currentSlide+d.getSlideCount()):d.currentSlide+d.getSlideCount();
d.currentDirection=0;
break;
case"right":case"up":c=d.options.swipeToSlide?d.checkNavigable(d.currentSlide-d.getSlideCount()):d.currentSlide-d.getSlideCount();
d.currentDirection=1;
break;
default:}if(f!="vertical"){d.slideHandler(c);
d.touchObject={};
d.$slider.trigger("swipe",[d,f])
}}else{if(d.touchObject.startX!==d.touchObject.curX){d.slideHandler(d.currentSlide);
d.touchObject={}
}}};
b.prototype.swipeHandler=function(d){var c=this;
if((c.options.swipe===false)||("ontouchend" in document&&c.options.swipe===false)){return
}else{if(c.options.draggable===false&&d.type.indexOf("mouse")!==-1){return
}}c.touchObject.fingerCount=d.originalEvent&&d.originalEvent.touches!==undefined?d.originalEvent.touches.length:1;
c.touchObject.minSwipe=c.listWidth/c.options.touchThreshold;
if(c.options.verticalSwiping===true){c.touchObject.minSwipe=c.listHeight/c.options.touchThreshold
}switch(d.data.action){case"start":c.swipeStart(d);
break;
case"move":c.swipeMove(d);
break;
case"end":c.swipeEnd(d);
break
}};
b.prototype.swipeMove=function(f){var e=this,k=false,h,d,g,c,j;
j=f.originalEvent!==undefined?f.originalEvent.touches:null;
if(!e.dragging||j&&j.length!==1){return false
}h=e.getLeft(e.currentSlide);
e.touchObject.curX=j!==undefined?j[0].pageX:f.clientX;
e.touchObject.curY=j!==undefined?j[0].pageY:f.clientY;
e.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(e.touchObject.curX-e.touchObject.startX,2)));
if(e.options.verticalSwiping===true){e.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(e.touchObject.curY-e.touchObject.startY,2)))
}d=e.swipeDirection();
if(d==="vertical"){return
}if(f.originalEvent!==undefined&&e.touchObject.swipeLength>4){f.preventDefault()
}c=(e.options.rtl===false?1:-1)*(e.touchObject.curX>e.touchObject.startX?1:-1);
if(e.options.verticalSwiping===true){c=e.touchObject.curY>e.touchObject.startY?1:-1
}g=e.touchObject.swipeLength;
e.touchObject.edgeHit=false;
if(e.options.infinite===false){if((e.currentSlide===0&&d==="right")||(e.currentSlide>=e.getDotCount()&&d==="left")){g=e.touchObject.swipeLength*e.options.edgeFriction;
e.touchObject.edgeHit=true
}}if(e.options.vertical===false){e.swipeLeft=h+g*c
}else{e.swipeLeft=h+(g*(e.$list.height()/e.listWidth))*c
}if(e.options.verticalSwiping===true){e.swipeLeft=h+g*c
}if(e.options.fade===true||e.options.touchMove===false){return false
}if(e.animating===true){e.swipeLeft=null;
return false
}e.setCSS(e.swipeLeft)
};
b.prototype.swipeStart=function(d){var c=this,e;
c.interrupted=true;
if(c.touchObject.fingerCount!==1||c.slideCount<=c.options.slidesToShow){c.touchObject={};
return false
}if(d.originalEvent!==undefined&&d.originalEvent.touches!==undefined){e=d.originalEvent.touches[0]
}c.touchObject.startX=c.touchObject.curX=e!==undefined?e.pageX:d.clientX;
c.touchObject.startY=c.touchObject.curY=e!==undefined?e.pageY:d.clientY;
c.dragging=true
};
b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var c=this;
if(c.$slidesCache!==null){c.unload();
c.$slideTrack.children(this.options.slide).detach();
c.$slidesCache.appendTo(c.$slideTrack);
c.reinit()
}};
b.prototype.unload=function(){var c=this;
a(".slick-cloned",c.$slider).remove();
if(c.$dots){c.$dots.remove()
}if(c.$prevArrow&&c.htmlExpr.test(c.options.prevArrow)){c.$prevArrow.remove()
}if(c.$nextArrow&&c.htmlExpr.test(c.options.nextArrow)){c.$nextArrow.remove()
}c.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")
};
b.prototype.unslick=function(d){var c=this;
c.$slider.trigger("unslick",[c,d]);
c.destroy()
};
b.prototype.updateArrows=function(){var d=this,c;
c=Math.floor(d.options.slidesToShow/2);
if(d.options.arrows===true&&d.slideCount>d.options.slidesToShow&&!d.options.infinite){d.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false");
d.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false");
if(d.currentSlide===0){d.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true");
d.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")
}else{if(d.currentSlide>=d.slideCount-d.options.slidesToShow&&d.options.centerMode===false){d.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true");
d.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")
}else{if(d.currentSlide>=d.slideCount-1&&d.options.centerMode===true){d.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true");
d.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")
}}}}};
b.prototype.updateDots=function(){var c=this;
if(c.$dots!==null){c.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true");
c.$dots.find("li").eq(Math.floor(c.currentSlide/c.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false")
}};
b.prototype.visibility=function(){var c=this;
if(c.options.autoplay){if(document[c.hidden]){c.interrupted=true
}else{c.interrupted=false
}}};
a.fn.slick=function(){var f=this,h=arguments[0],e=Array.prototype.slice.call(arguments,1),c=f.length,g,d;
for(g=0;
g<c;
g++){if(typeof h=="object"||typeof h=="undefined"){f[g].slick=new b(f[g],h)
}else{d=f[g].slick[h].apply(f[g].slick,e)
}if(typeof d!="undefined"){return d
}}return f
}
}));
/*! skrollr 0.6.30 (2015-06-19) | Alexander Prinzhorn - https://github.com/Prinzhorn/skrollr | Free to use under terms of MIT license */
;
!function(aW,aV,aU){function aR(f){if(aQ=aV.documentElement,aP=aV.body,a6(),bj=this,f=f||{},bD=f.constants||{},f.easing){for(var e in f.easing){a3[e]=f.easing[e]
}}bw=f.edgeStrategy||"set",ae={beforerender:f.beforerender,render:f.render,keyframe:f.keyframe},bM=f.forceHeight!==!1,bM&&(ao=f.scale||1),bq=f.mobileDeceleration||at,an=f.smoothScrolling!==!1,ag=f.smoothScrollingDuration||bv,bO={targetTop:bj.getScrollTop()},ac=(f.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||aW.opera)
})(),ac?(al=aV.getElementById(f.skrollrBody||ar),al&&bB(),a2(),am(aQ,[az,aw],[ay])):am(aQ,[az,ax],[ay]),bj.refresh(),ai(aW,"resize orientationchange",function(){var d=aQ.clientWidth,c=aQ.clientHeight;
(c!==aZ||d!==bx)&&(aZ=c,bx=d,aq=!0)
});
var b=a5();
return function a(){bF(),ap=b(a)
}(),bj
}var aQ,aP,aO={get:function(){return bj
},init:function(b){return bj||new aR(b)
},VERSION:"0.6.29"},aN=Object.prototype.hasOwnProperty,aK=aW.Math,aJ=aW.getComputedStyle,aI="touchstart",aH="touchmove",aG="touchcancel",aE="touchend",aD="skrollable",aC=aD+"-before",aB=aD+"-between",aA=aD+"-after",az="skrollr",ay="no-"+az,ax=az+"-desktop",aw=az+"-mobile",av="linear",au=1000,at=0.004,ar="skrollr-body",bv=200,bu="start",bt="end",bs="center",bp="bottom",bo="___skrollable_id",bn=/^(?:input|textarea|button|select)$/i,bm=/^\s+|\s+$/g,bl=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,bi=/\s*(@?[\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,bh=/^(@?[a-z\-]+)\[(\w+)\]$/,bg=/-([a-z0-9_])/g,bf=function(d,c){return c.toUpperCase()
},be=/[\-+]?[\d]*\.?[\d]+/g,bd=/\{\?\}/g,bb=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,a9=/[a-z\-]+-gradient/g,a8="",a7="",a6=function(){var e=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;
if(aJ){var d=aJ(aP,null);
for(var f in d){if(a8=f.match(e)||+f==f&&d[f].match(e)){break
}}if(!a8){return void (a8=a7="")
}a8=a8[0],"-"===a8.slice(0,1)?(a7=a8,a8={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[a8]):a7="-"+a8.toLowerCase()+"-"
}},a5=function(){var a=aW.requestAnimationFrame||aW[a8.toLowerCase()+"RequestAnimationFrame"],d=bE();
return(ac||!a)&&(a=function(c){var g=bE()-d,f=aK.max(0,1000/60-g);
return aW.setTimeout(function(){d=bE(),c()
},f)
}),a
},a4=function(){var a=aW.cancelAnimationFrame||aW[a8.toLowerCase()+"CancelAnimationFrame"];
return(ac||!a)&&(a=function(c){return aW.clearTimeout(c)
}),a
},a3={begin:function(){return 0
},end:function(){return 1
},linear:function(b){return b
},quadratic:function(b){return b*b
},cubic:function(b){return b*b*b
},swing:function(b){return -aK.cos(b*aK.PI)/2+0.5
},sqrt:function(b){return aK.sqrt(b)
},outCubic:function(b){return aK.pow(b-1,3)+1
},bounce:function(d){var c;
if(0.5083>=d){c=3
}else{if(0.8489>=d){c=9
}else{if(0.96208>=d){c=27
}else{if(!(0.99981>=d)){return 1
}c=91
}}}return 1-aK.abs(3*aK.cos(d*c*1.028)/c)
}};
aR.prototype.refresh=function(T){var S,R,Q=!1;
for(T===aU?(Q=!0,aL=[],aj=0,T=aV.getElementsByTagName("*")):T.length===aU&&(T=[T]),S=0,R=T.length;
R>S;
S++){var P=T[S],O=P,N=[],M=an,L=bw,K=!1;
if(Q&&bo in P&&delete P[bo],P.attributes){for(var J=0,I=P.attributes.length;
I>J;
J++){var H=P.attributes[J];
if("data-anchor-target"!==H.name){if("data-smooth-scrolling"!==H.name){if("data-edge-strategy"!==H.name){if("data-emit-events"!==H.name){var G=H.name.match(bl);
if(null!==G){var F={props:H.value,element:P,eventType:H.name.replace(bg,bf)};
N.push(F);
var E=G[1];
E&&(F.constant=E.substr(1));
var D=G[2];
/p$/.test(D)?(F.isPercentage=!0,F.offset=(0|D.slice(0,-1))/100):F.offset=0|D;
var C=G[3],B=G[4]||C;
C&&C!==bu&&C!==bt?(F.mode="relative",F.anchors=[C,B]):(F.mode="absolute",C===bt?F.isEnd=!0:F.isPercentage||(F.offset=F.offset*ao))
}}else{K=!0
}}else{L=H.value
}}else{M="off"!==H.value
}}else{if(O=aV.querySelector(H.value),null===O){throw'Unable to find anchor target "'+H.value+'"'
}}}if(N.length){var A,o,c;
!Q&&bo in P?(c=P[bo],A=aL[c].styleAttr,o=aL[c].classAttr):(c=P[bo]=aj++,A=P.style.cssText,o=aM(P)),aL[c]={element:P,styleAttr:A,classAttr:o,anchorTarget:O,keyFrames:N,smoothScrolling:M,edgeStrategy:L,emitEvents:K,lastFrameIndex:-1},am(P,[aD],[])
}}}for(bL(),S=0,R=T.length;
R>S;
S++){var b=aL[T[S][bo]];
b!==aU&&(aY(b),bc(b))
}return bj
},aR.prototype.relativeToAbsolute=function(j,e,o){var n=aQ.clientHeight,m=j.getBoundingClientRect(),l=m.top,k=m.bottom-m.top;
return e===bp?l-=n:e===bs&&(l-=n/2),o===bp?l+=k:o===bs&&(l+=k/2),l+=bj.getScrollTop(),l+0.5|0
},aR.prototype.animateTo=function(g,c){c=c||{};
var k=bE(),j=bj.getScrollTop(),h=c.duration===aU?au:c.duration;
return aS={startTop:j,topDiff:g-j,targetTop:g,duration:h,startTime:k,endTime:k+h,easing:a3[c.easing||av],done:c.done},aS.topDiff||(aS.done&&aS.done.call(bj,!1),aS=aU),bj
},aR.prototype.stopAnimateTo=function(){aS&&aS.done&&aS.done.call(bj,!0),aS=aU
},aR.prototype.isAnimatingTo=function(){return !!aS
},aR.prototype.isMobile=function(){return ac
},aR.prototype.setScrollTop=function(a,d){return bG=d===!0,ac?bJ=aK.min(aK.max(a,0),aT):aW.scrollTo(0,a),bj
},aR.prototype.getScrollTop=function(){return ac?bJ:aW.pageYOffset||aQ.scrollTop||aP.scrollTop||0
},aR.prototype.getMaxScrollTop=function(){return aT
},aR.prototype.on=function(d,c){return ae[d]=c,bj
},aR.prototype.off=function(b){return delete ae[b],bj
},aR.prototype.destroy=function(){var e=a4();
e(ap),bI(),am(aQ,[ay],[az,ax,aw]);
for(var c=0,f=aL.length;
f>c;
c++){bK(aL[c].element)
}aQ.style.overflow=aP.style.overflow="",aQ.style.height=aP.style.height="",al&&aO.setStyle(al,"transform","none"),bj=aU,al=aU,ae=aU,bM=aU,aT=0,ao=1,bD=aU,bq=aU,ah="down",bP=-1,bx=0,aZ=0,aq=!1,aS=aU,an=aU,ag=aU,bO=aU,bG=aU,aj=0,bw=aU,ac=!1,bJ=0,aX=aU
};
var a2=function(){var m,l,k,f,e,c,b,a,y,x,w,n;
ai(aQ,[aI,aH,aG,aE].join(" "),function(u){var p=u.changedTouches[0];
for(f=u.target;
3===f.nodeType;
){f=f.parentNode
}switch(e=p.clientY,c=p.clientX,x=u.timeStamp,bn.test(f.tagName)||u.preventDefault(),u.type){case aI:m&&m.blur(),bj.stopAnimateTo(),m=f,l=b=e,k=c,y=x;
break;
case aH:bn.test(f.tagName)&&aV.activeElement!==f&&u.preventDefault(),a=e-b,n=x-w,bj.setScrollTop(bJ-a,!0),b=e,w=x;
break;
default:case aG:case aE:var o=l-e,E=k-c,v=E*E+o*o;
if(49>v){if(!bn.test(m.tagName)){m.focus();
var r=aV.createEvent("MouseEvents");
r.initMouseEvent("click",!0,!0,u.view,1,p.screenX,p.screenY,p.clientX,p.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,0,null),m.dispatchEvent(r)
}return
}m=aU;
var q=a/n;
q=aK.max(aK.min(q,3),-3);
var j=aK.abs(q/bq),h=q*j+0.5*bq*j*j,g=bj.getScrollTop()-h,d=0;
g>aT?(d=(aT-g)/h,g=aT):0>g&&(d=-g/h,g=0),j*=1-d,bj.animateTo(g+0.5|0,{easing:"outCubic",duration:j})
}}),aW.scrollTo(0,0),aQ.style.overflow=aP.style.overflow="hidden"
},a1=function(){var C,B,A,z,y,x,w,v,u,r,q,p=aQ.clientHeight,e=bC();
for(v=0,u=aL.length;
u>v;
v++){for(C=aL[v],B=C.element,A=C.anchorTarget,z=C.keyFrames,y=0,x=z.length;
x>y;
y++){w=z[y],r=w.offset,q=e[w.constant]||0,w.frame=r,w.isPercentage&&(r*=p,w.frame=r),"relative"===w.mode&&(bK(B),w.frame=bj.relativeToAbsolute(A,w.anchors[0],w.anchors[1])-r,bK(B,!0)),w.frame+=q,bM&&!w.isEnd&&w.frame>aT&&(aT=w.frame)
}}for(aT=aK.max(aT,bk()),v=0,u=aL.length;
u>v;
v++){for(C=aL[v],z=C.keyFrames,y=0,x=z.length;
x>y;
y++){w=z[y],q=e[w.constant]||0,w.isEnd&&(w.frame=aT-w.offset+q)
}C.keyFrames.sort(br)
}},a0=function(T,S){for(var R=0,Q=aL.length;
Q>R;
R++){var P,O,N=aL[R],M=N.element,L=N.smoothScrolling?T:S,K=N.keyFrames,J=K.length,I=K[0],E=K[K.length-1],D=L<I.frame,r=L>E.frame,q=D?I:E,p=N.emitEvents,o=N.lastFrameIndex;
if(D||r){if(D&&-1===N.edge||r&&1===N.edge){continue
}switch(D?(am(M,[aC],[aA,aB]),p&&o>-1&&(by(M,I.eventType,ah),N.lastFrameIndex=-1)):(am(M,[aA],[aC,aB]),p&&J>o&&(by(M,E.eventType,ah),N.lastFrameIndex=J)),N.edge=D?-1:1,N.edgeStrategy){case"reset":bK(M);
continue;
case"ease":L=q.frame;
break;
default:case"set":var h=q.props;
for(P in h){aN.call(h,P)&&(O=ad(h[P].value),0===P.indexOf("@")?M.setAttribute(P.substr(1),O):aO.setStyle(M,P,O))
}continue
}}else{0!==N.edge&&(am(M,[aD,aB],[aC,aA]),N.edge=0)
}for(var g=0;
J-1>g;
g++){if(L>=K[g].frame&&L<=K[g+1].frame){var H=K[g],G=K[g+1];
for(P in H.props){if(aN.call(H.props,P)){var F=(L-H.frame)/(G.frame-H.frame);
F=H.props[P].easing(F),O=ak(H.props[P].value,G.props[P].value,F),O=ad(O),0===P.indexOf("@")?M.setAttribute(P.substr(1),O):aO.setStyle(M,P,O)
}}p&&o!==g&&("down"===ah?by(M,H.eventType,ah):by(M,G.eventType,ah),N.lastFrameIndex=g);
break
}}}},bF=function(){aq&&(aq=!1,bL());
var g,c,n=bj.getScrollTop(),m=bE();
if(aS){m>=aS.endTime?(n=aS.targetTop,g=aS.done,aS=aU):(c=aS.easing((m-aS.startTime)/aS.duration),n=aS.startTop+c*aS.topDiff|0),bj.setScrollTop(n,!0)
}else{if(!bG){var l=bO.targetTop-n;
l&&(bO={startTop:bP,topDiff:n-bP,targetTop:n,startTime:bH,endTime:bH+ag}),m<=bO.endTime&&(c=a3.sqrt((m-bO.startTime)/ag),n=bO.startTop+c*bO.topDiff|0)
}}if(bG||bP!==n){ah=n>bP?"down":bP>n?"up":ah,bG=!1;
var k={curTop:n,lastTop:bP,maxTop:aT,direction:ah},j=ae.beforerender&&ae.beforerender.call(bj,k);
j!==!1&&(a0(n,bj.getScrollTop()),ac&&al&&aO.setStyle(al,"transform","translate(0, "+-bJ+"px) "+aX),bP=n,ae.render&&ae.render.call(bj,k)),g&&g.call(bj,!1)
}bH=m
},aY=function(r){for(var q=0,p=r.keyFrames.length;
p>q;
q++){for(var o,n,m,l,k=r.keyFrames[q],j={};
null!==(l=bi.exec(k.props));
){m=l[1],n=l[2],o=m.match(bh),null!==o?(m=o[1],o=o[2]):o=av,n=n.indexOf("!")?bA(n):[n.slice(1)],j[m]={value:n,easing:a3[o]}
}k.props=j
}},bA=function(d){var c=[];
return bb.lastIndex=0,d=d.replace(bb,function(b){return b.replace(be,function(e){return e/255*100+"%"
})
}),a7&&(a9.lastIndex=0,d=d.replace(a9,function(b){return a7+b
})),d=d.replace(be,function(b){return c.push(+b),"{?}"
}),c.unshift(d),c
},bc=function(f){var e,h,g={};
for(e=0,h=f.keyFrames.length;
h>e;
e++){aF(f.keyFrames[e],g)
}for(g={},e=f.keyFrames.length-1;
e>=0;
e--){aF(f.keyFrames[e],g)
}},aF=function(e,d){var f;
for(f in d){aN.call(e.props,f)||(e.props[f]=d[f])
}for(f in e.props){d[f]=e.props[f]
}},ak=function(h,g,m){var l,k=h.length;
if(k!==g.length){throw"Can't interpolate between \""+h[0]+'" and "'+g[0]+'"'
}var j=[h[0]];
for(l=1;
k>l;
l++){j[l]=h[l]+(g[l]-h[l])*m
}return j
},ad=function(d){var c=1;
return bd.lastIndex=0,d[0].replace(bd,function(){return d[c++]
})
},bK=function(h,g){h=[].concat(h);
for(var m,l,k=0,j=h.length;
j>k;
k++){l=h[k],m=aL[l[bo]],m&&(g?(l.style.cssText=m.dirtyStyleAttr,am(l,m.dirtyClassAttr)):(m.dirtyStyleAttr=l.style.cssText,m.dirtyClassAttr=aM(l),l.style.cssText=m.styleAttr,am(l,m.classAttr)))
}},bB=function(){aX="translateZ(0)",aO.setStyle(al,"transform",aX);
var f=aJ(al),e=f.getPropertyValue("transform"),h=f.getPropertyValue(a7+"transform"),g=e&&"none"!==e||h&&"none"!==h;
g||(aX="")
};
aO.setStyle=function(g,f,k){var j=g.style;
if(f=f.replace(bg,bf).replace("-",""),"zIndex"===f){isNaN(k)?j[f]=k:j[f]=""+(0|k)
}else{if("float"===f){j.styleFloat=j.cssFloat=k
}else{try{a8&&(j[a8+f.slice(0,1).toUpperCase()+f.slice(1)]=k),j[f]=k
}catch(h){}}}};
var bj,aL,al,ae,bM,bD,bq,aS,an,ag,bO,bG,bw,aX,ap,ai=aO.addEvent=function(a,o,n){var m=function(c){return c=c||aW.event,c.target||(c.target=c.srcElement),c.preventDefault||(c.preventDefault=function(){c.returnValue=!1,c.defaultPrevented=!0
}),n.call(this,c)
};
o=o.split(" ");
for(var l,k=0,j=o.length;
j>k;
k++){l=o[k],a.addEventListener?a.addEventListener(l,n,!1):a.attachEvent("on"+l,m),bz.push({element:a,name:l,listener:n})
}},ab=aO.removeEvent=function(g,f,k){f=f.split(" ");
for(var j=0,h=f.length;
h>j;
j++){g.removeEventListener?g.removeEventListener(f[j],k,!1):g.detachEvent("on"+f[j],k)
}},bI=function(){for(var e,d=0,f=bz.length;
f>d;
d++){e=bz[d],ab(e.element,e.name,e.listener)
}bz=[]
},by=function(e,d,f){ae.keyframe&&ae.keyframe.call(bj,e,d,f)
},bL=function(){var b=bj.getScrollTop();
aT=0,bM&&!ac&&(aP.style.height=""),a1(),bM&&!ac&&(aP.style.height=aT+aQ.clientHeight+"px"),ac?bj.setScrollTop(aK.min(bj.getScrollTop(),aT)):bj.setScrollTop(b,!0),bG=!0
},bC=function(){var f,e,h=aQ.clientHeight,g={};
for(f in bD){e=bD[f],"function"==typeof e?e=e.call(bj):/p$/.test(e)&&(e=e.slice(0,-1)/100*h),g[f]=e
}return g
},bk=function(){var d,c=0;
return al&&(c=aK.max(al.offsetHeight,al.scrollHeight)),d=aK.max(c,aP.scrollHeight,aP.offsetHeight,aQ.scrollHeight,aQ.offsetHeight,aQ.clientHeight),d-aQ.clientHeight
},aM=function(a){var d="className";
return aW.SVGElement&&a instanceof aW.SVGElement&&(a=a[d],d="baseVal"),a[d]
},am=function(r,q,p){var o="className";
if(aW.SVGElement&&r instanceof aW.SVGElement&&(r=r[o],o="baseVal"),p===aU){return void (r[o]=q)
}for(var n=r[o],m=0,l=p.length;
l>m;
m++){n=bN(n).replace(bN(p[m])," ")
}n=af(n);
for(var c=0,a=q.length;
a>c;
c++){-1===bN(n).indexOf(bN(q[c]))&&(n+=" "+q[c])
}r[o]=af(n)
},af=function(b){return b.replace(bm,"")
},bN=function(b){return" "+b+" "
},bE=Date.now||function(){return +new Date
},br=function(d,c){return d.frame-c.frame
},aT=0,ao=1,ah="down",bP=-1,bH=bE(),bx=0,aZ=0,aq=!1,aj=0,ac=!1,bJ=0,bz=[];
"function"==typeof define&&define.amd?define([],function(){return aO
}):"undefined"!=typeof module&&module.exports?module.exports=aO:aW.skrollr=aO
}(window,document);
this.fitie=function(c){var m=c.currentStyle["object-fit"];
if(!m||!/^(contain|cover|fill)$/.test(m)){return
}var o=c.clientWidth;
var n=c.clientHeight;
var h=o/n;
var a=c.nodeName.toLowerCase();
var d=c.runtimeStyle;
var k=c.currentStyle;
var f=c.addEventListener||c.attachEvent;
var b=c.removeEventListener||c.detachEvent;
var j=c.addEventListener?"":"on";
var g=a==="img";
var l=g?"load":"loadedmetadata";
f.call(c,j+l,e);
if(c.complete){e()
}function e(){b.call(c,j+l,e);
var r={boxSizing:"content-box",display:"inline-block",overflow:"hidden"};
"backgroundColor backgroundImage borderColor borderStyle borderWidth bottom fontSize lineHeight height left opacity margin position right top visibility width".replace(/\w+/g,function(y){r[y]=k[y]
});
d.border=d.margin=d.padding=0;
d.display="block";
d.height=d.width="auto";
d.opacity=1;
var q=c.videoWidth||c.width;
var x=c.videoHeight||c.height;
var p=q/x;
var w=document.createElement("object-fit");
w.appendChild(c.parentNode.replaceChild(w,c));
for(var v in r){w.runtimeStyle[v]=r[v]
}var u;
if(m==="fill"){if(g){d.width=o;
d.height=n
}else{d["-ms-transform-origin"]="0% 0%";
d["-ms-transform"]="scale("+o/q+","+n/x+")"
}}else{if(p<h?m==="contain":m==="cover"){u=n*p;
d.width=Math.round(u)+"px";
d.height=n+"px";
d.marginLeft=Math.round((o-u)/2)+"px"
}else{u=o/p;
d.width=o+"px";
d.height=Math.round(u)+"px";
d.marginTop=Math.round((n-u)/2)+"px"
}}}};
this.fitie.init=function(){if(document.body){var b=document.querySelectorAll("img,video");
var a=-1;
while(b[++a]){fitie(b[a])
}}else{setTimeout(fitie.init)
}};
if(/MSIE|Trident/.test(navigator.userAgent)){this.fitie.init()
}
/*! lazysizes - v2.0.2 */
;
!function(e,d){var f=d(e,e.document);
e.lazySizes=f,"object"==typeof module&&module.exports&&(module.exports=f)
}(window,function(aj,ai){if(ai.getElementsByClassName){var ah,ag=ai.documentElement,af=aj.Date,ae=aj.HTMLPictureElement,ad="addEventListener",ac="getAttribute",ab=aj[ad],aa=aj.setTimeout,Z=aj.requestAnimationFrame||aa,Y=aj.requestIdleCallback,X=/^picture$/i,W=["load","error","lazyincluded","_lazyloaded"],V={},U=Array.prototype.forEach,S=function(d,c){return V[c]||(V[c]=new RegExp("(\\s|^)"+c+"(\\s|$)")),V[c].test(d[ac]("class")||"")&&V[c]
},Q=function(d,c){S(d,c)||d.setAttribute("class",(d[ac]("class")||"").trim()+" "+c)
},O=function(e,d){var f;
(f=S(e,d))&&e.setAttribute("class",(e[ac]("class")||"").replace(f," "))
},M=function(f,e,h){var g=h?ad:"removeEventListener";
h&&M(f,e),W.forEach(function(a){f[g](a,e)
})
},K=function(b,m,l,k,j){var h=ai.createEvent("CustomEvent");
return h.initCustomEvent(m,!k,!j,l||{}),b.dispatchEvent(h),h
},J=function(a,f){var c;
!ae&&(c=aj.picturefill||ah.pf)?c({reevaluate:!0,elements:[a]}):f&&f.src&&(a.src=f.src)
},I=function(d,c){return(getComputedStyle(d,null)||{})[c]
},H=function(e,c,f){for(f=f||e.offsetWidth;
f<ah.minSize&&c&&!e._lazysizesWidth;
){f=c.offsetWidth,c=c.parentNode
}return f
},G=function(){var b,h,g=[],f=function(){var a;
for(b=!0,h=!1;
g.length;
){a=g.shift(),a[0].apply(a[1],a[2])
}b=!1
};
return function(a){b?a.apply(this,arguments):(g.push([a,this,arguments]),h||(h=!0,(ai.hidden?aa:Z)(f)))
}
}(),F=function(d,c){return c?function(){G(d)
}:function(){var a=this,e=arguments;
G(function(){d.apply(a,e)
})
}
},T=function(j){var e,p=0,o=125,n=999,m=n,l=function(){e=!1,p=af.now(),j()
},k=Y?function(){Y(l,{timeout:m}),m!==n&&(m=n)
}:F(function(){aa(l)
},!0);
return function(b){var c;
(b=b===!0)&&(m=66),e||(e=!0,c=o-(af.now()-p),0>c&&(c=0),b||9>c&&Y?k():aa(k,c))
}
},R=function(h){var e,m,l=99,k=function(){e=null,h()
},j=function(){var b=af.now()-m;
l>b?aa(j,l-b):(Y||k)(k)
};
return function(){m=af.now(),e||(e=aa(j,l))
}
},P=function(){var aw,av,au,at,ar,ak,ap,ao,an,am,al,D,B,A,z,y=/^img$/i,w=/^iframe$/i,v="onscroll" in aj&&!/glebot/.test(navigator.userAgent),u=0,q=0,p=0,m=-1,h=function(f){p--,f&&f.target&&M(f.target,h),(!f||0>p||!f.target)&&(p=0)
},g=function(k,x){var o,n=k,l="hidden"==I(ai.body,"visibility")||"hidden"!=I(k,"visibility");
for(an-=x,D+=x,am-=x,al+=x;
l&&(n=n.offsetParent)&&n!=ai.body&&n!=ag;
){l=(I(n,"opacity")||1)>0,l&&"visible"!=I(n,"overflow")&&(o=n.getBoundingClientRect(),l=al>o.left&&am<o.right&&D>o.top-1&&an<o.bottom+1)
}return l
},e=function(){var aA,az,E,C,x,o,l,k,f;
if((ar=ah.loadMode)&&8>p&&(aA=aw.length)){az=0,m++,null==A&&("expand" in ah||(ah.expand=ag.clientHeight>500?500:400),B=ah.expand,A=B*ah.expFactor),A>q&&1>p&&m>2&&ar>2&&!ai.hidden?(q=A,m=0):q=ar>1&&m>1&&6>p?B:u;
for(;
aA>az;
az++){if(aw[az]&&!aw[az]._lazyRace){if(v){if((k=aw[az][ac]("data-expand"))&&(o=1*k)||(o=q),f!==o&&(ap=innerWidth+o*z,ao=innerHeight+o,l=-1*o,f=o),E=aw[az].getBoundingClientRect(),(D=E.bottom)>=l&&(an=E.top)<=ao&&(al=E.right)>=l*z&&(am=E.left)<=ap&&(D||al||am||an)&&(au&&3>p&&!k&&(3>ar||4>m)||g(aw[az],o))){if(r(aw[az]),x=!0,p>9){break
}}else{!x&&au&&!C&&4>p&&4>m&&ar>2&&(av[0]||ah.preloadAfterLoad)&&(av[0]||!k&&(D||al||am||an||"auto"!=aw[az][ac](ah.sizesAttr)))&&(C=av[0]||aw[az])
}}else{r(aw[az])
}}}C&&!x&&r(C)
}},d=T(e),c=function(f){Q(f.target,ah.loadedClass),O(f.target,ah.loadingClass),M(f.target,a)
},b=F(c),a=function(f){b({target:f.target})
},j=function(k,f){try{k.contentWindow.location.replace(f)
}catch(l){k.src=f
}},ay=function(k){var f,n,l=k[ac](ah.srcsetAttr);
(f=ah.customMedia[k[ac]("data-media")||k[ac]("media")])&&k.setAttribute("media",f),l&&k.setAttribute("srcset",l),f&&(n=k.parentNode,n.insertBefore(k.cloneNode(),k),n.removeChild(k))
},ax=F(function(aF,aE,aD,aC,aB){var aA,az,E,C,x,n;
(x=K(aF,"lazybeforeunveil",aE)).defaultPrevented||(aC&&(aD?Q(aF,ah.autosizesClass):aF.setAttribute("sizes",aC)),az=aF[ac](ah.srcsetAttr),aA=aF[ac](ah.srcAttr),aB&&(E=aF.parentNode,C=E&&X.test(E.nodeName||"")),n=aE.firesLoad||"src" in aF&&(az||aA||C),x={target:aF},n&&(M(aF,h,!0),clearTimeout(at),at=aa(h,2500),Q(aF,ah.loadingClass),M(aF,a,!0)),C&&U.call(E.getElementsByTagName("source"),ay),az?aF.setAttribute("srcset",az):aA&&!C&&(w.test(aF.nodeName)?j(aF,aA):aF.src=aA),(az||C)&&J(aF,{src:aA})),G(function(){aF._lazyRace&&delete aF._lazyRace,O(aF,ah.lazyClass),(!n||aF.complete)&&(n?h(x):p--,c(x))
})
}),r=function(l){var k,x=y.test(l.nodeName),o=x&&(l[ac](ah.sizesAttr)||l[ac]("sizes")),n="auto"==o;
(!n&&au||!x||!l.src&&!l.srcset||l.complete||S(l,ah.errorClass))&&(k=K(l,"lazyunveilread").detail,n&&N.updateElem(l,!0,l.offsetWidth),l._lazyRace=!0,p++,ax(l,k,n,o,x))
},aq=function(){if(!au){if(af.now()-ak<999){return void aa(aq,999)
}var f=R(function(){ah.loadMode=3,d()
});
au=!0,ah.loadMode=3,d(),ab("scroll",function(){3==ah.loadMode&&(ah.loadMode=2),f()
},!0)
}};
return{_:function(){ak=af.now(),aw=ai.getElementsByClassName(ah.lazyClass),av=ai.getElementsByClassName(ah.lazyClass+" "+ah.preloadClass),z=ah.hFac,ab("scroll",d,!0),ab("resize",d,!0),aj.MutationObserver?new MutationObserver(d).observe(ag,{childList:!0,subtree:!0,attributes:!0}):(ag[ad]("DOMNodeInserted",d,!0),ag[ad]("DOMAttrModified",d,!0),setInterval(d,999)),ab("hashchange",d,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(f){ai[ad](f,d,!0)
}),/d$|^c/.test(ai.readyState)?aq():(ab("load",aq),ai[ad]("DOMContentLoaded",d),aa(aq,20000)),d(aw.length>0)
},checkElems:d,unveil:r}
}(),N=function(){var b,k=F(function(m,l,r,q){var p,o,n;
if(m._lazysizesWidth=q,q+="px",m.setAttribute("sizes",q),X.test(l.nodeName||"")){for(p=l.getElementsByTagName("source"),o=0,n=p.length;
n>o;
o++){p[o].setAttribute("sizes",q)
}}r.detail.dataAttr||J(m,r.detail)
}),j=function(g,d,n){var m,l=g.parentNode;
l&&(n=H(g,l,n),m=K(g,"lazybeforesizes",{width:n,dataAttr:!!d}),m.defaultPrevented||(n=m.detail.width,n&&n!==g._lazysizesWidth&&k(g,l,m,n)))
},h=function(){var a,d=b.length;
if(d){for(a=0;
d>a;
a++){j(b[a])
}}},c=R(h);
return{_:function(){b=ai.getElementsByClassName(ah.autosizesClass),ab("resize",c)
},checkElems:c,updateElem:j}
}(),L=function(){L.i||(L.i=!0,N._(),P._())
};
return function(){var a,c={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:0.8,loadMode:2};
ah=aj.lazySizesConfig||aj.lazysizesConfig||{};
for(a in c){a in ah||(ah[a]=c[a])
}aj.lazySizesConfig=ah,aa(function(){ah.init&&L()
})
}(),{cfg:ah,autoSizer:N,loader:P,init:L,uP:J,aC:Q,rC:O,hC:S,fire:K,gW:H,rAF:G}
}});
(function(){})();
(function(){(function(b){var c=b({});
var a={};
b.subscribe=function(){c.on.apply(c,arguments)
};
b.unsubscribe=function(){c.off.apply(c,arguments)
};
b.publish=function(){c.trigger.apply(c,arguments)
};
b.request=function(e){var d=a[e];
if(!d){return
}return d()
};
b.responder=function(e,d){a[e]=d
}
}(jQuery))
})();
(function(){function a(){this._activeComponents=[];
this._componentRegistry=[];
this._componentNameRegistry={};
this.initComponent=_.bind(this.initComponent,this)
}a.prototype={namespace:function(b){var e=b.split(".");
var d=this;
var c;
for(c=0;
c<e.length;
c++){if(typeof d[e[c]]==="undefined"){d[e[c]]={}
}d=d[e[c]]
}return d
},initComponent:function(b){b(jQuery,Backbone,this)
},registerComponent:function(e,c){var b="."+e;
var d={name:e,selector:b,view:c};
this._componentRegistry.push(d);
this._componentNameRegistry[e]=d;
setTimeout(_.bind(this.bindComponent,this,d),0)
},reregisterComponent:function(c){var b=this._componentNameRegistry[c];
setTimeout(_.bind(this.bindComponent,this,b),0)
},bindAllComponents:function(){_.each(this._componentRegistry,_.bind(this.bindComponent,this))
},bindComponent:function(b){var c=this._activeComponents;
if(typeof b==="string"){b=this._componentNameRegistry[b]
}$(b.selector).each(function(g,f){var e=$(f);
if(e.data("view-id")){return
}var d=new b.view({el:f});
d._id=c.push(d);
e.data("view-id",d._id)
})
},getComponent:function(d){var b=d.data("view-id");
if(!b){return null
}var f=this._activeComponents;
for(var e=0;
e<f.length;
e++){var c=f[e];
if(c._id===b){return c
}}return null
}};
window.App=new a()
})();
(function(){(function(h,d){var j=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile/;
var k=j.test(navigator.userAgent);
var c=/iP(hone|od|ad)/.test(navigator.userAgent);
var a=/Trident\/7.0/.test(navigator.userAgent)&&/NT 6.1/.test(navigator.userAgent);
var f=/firefox/i.test(navigator.userAgent);
var l=/WebKit/i.test(window.navigator.userAgent)&&!(/(CriOS|FxiOS|OPiOS|mercury)/i.test(window.navigator.userAgent));
var g=h("body");
var e=h("html");
var b=h(window);
var m={devices:{mobile:h('<div class="mobile-breakpoint"></div>'),tablet:h('<div class="tablet-breakpoint"></div>'),desktop:h('<div class="desktop-breakpoint"></div>')},devicesUA:{mobile:k,tablet:k,desktop:!k},is:function(n){return m.devices[n]?m.devices[n].is(":visible"):false
},isUserAgent:function(n){return m.devicesUA[n]
},detectMSbrowser:function(){var n=false||!!document.documentMode;
var o=!n&&!!window.StyleMedia;
if(n||o){e.addClass("ms-browser")
}if(a){e.addClass("w7-ie11")
}},detectAppleTouchSafari:function(){if(c&&l){e.addClass("apple-touch-safari")
}},detectMozillabrowser:function(){if(f){e.addClass("mozilla-firefox")
}},run:function(){h.each(m.devices,function(o,n){g.append(n)
});
this.detectMSbrowser();
this.detectMozillabrowser();
this.detectAppleTouchSafari()
}};
m.run();
d.$body=g;
d.$html=e;
d.$window=b;
d.Devices=m
})(jQuery,App);
(function(f){var e=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile/.test(navigator.userAgent);
var c=(e&&matchMedia("(orientation: portrait) and (max-width: 504px), (orientation: landscape) and (max-width: 768px)").matches);
var b=e&&!c;
var d=!e;
var a={};
a.type=function(){if(c){return"mobile"
}else{if(b){return"tablet"
}}return"desktop"
};
a.is=function(g){switch(g){case"mobile":return c;
case"tablet":return b;
case"desktop":return d
}};
f.Devices2=a
})(window.App)
})();
(function(){(function(c){var f=c(window);
var e=c(document);
var a=c("html");
var d=f.width();
var b={visible:true,scrollTop:f.scrollTop(),orientation:0};
f.on("scroll mousewheel",function(g){b.scrollTop=f.scrollTop();
c.publish("scroll",b.scrollTop)
});
c.responder("scroll:top",function(){return b.scrollTop
});
f.on("resize",_.debounce(function(g){if(d!=f.width()){d=f.width();
c.publish("resize")
}},50));
f.on("resize",_.debounce(function(g){if(d!=f.width()){d=f.width();
c.publish("width:resize")
}},50));
e.on("show",function(){b.visible=true;
c.publish("visibility",b.visible)
});
e.on("hide",function(){b.visible=false;
c.publish("visibility",b.visible)
});
e.on("click",function(g){c.publish("window:click",g)
});
c.responder("visibility",function(){return b.visible
});
if(/iP(hone|od|ad)/.test(navigator.userAgent)){setInterval(function(){if(b.orientation!==window.orientation){b.orientation=window.orientation;
c.publish("resize");
c.publish("apple-orientationchange")
}},100)
}}(jQuery))
})();
(function(){(function(a){var b={mode:"horizontal",slideSelector:"",infiniteLoop:true,hideControlOnEnd:false,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:false,captions:false,ticker:false,tickerHover:false,adaptiveHeight:false,adaptiveHeightSpeed:500,video:false,useCSS:true,preloadImages:"visible",responsive:true,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:true,swipeThreshold:50,oneToOneTouch:true,preventDefaultSwipeX:true,preventDefaultSwipeY:false,ariaLive:true,ariaHidden:true,keyboardEnabled:false,pager:true,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:true,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:false,startText:"Start",stopText:"Stop",autoControlsCombine:false,autoControlsSelector:null,auto:false,pause:4000,autoStart:true,autoDirection:"next",stopAutoOnClick:false,autoHover:false,autoDelay:0,autoSlideForOnePage:false,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:false,onSliderLoad:function(){return true
},onSlideBefore:function(){return true
},onSlideAfter:function(){return true
},onSlideNext:function(){return true
},onSlidePrev:function(){return true
},onSliderResize:function(){return true
},onSlideEnd:function(){return true
}};
a.fn.bxSlider=function(r){if(this.length===0){return this
}if(this.length>1){this.each(function(){a(this).bxSlider(r)
});
return this
}var h={},L=this,N=a(window).width(),Q=a(window).height();
if(a(L).data("bxSlider")){return
}var F=function(){if(a(L).data("bxSlider")){return
}h.settings=a.extend({},b,r);
h.settings.slideWidth=parseInt(h.settings.slideWidth);
h.children=L.children(h.settings.slideSelector);
if(h.children.length<h.settings.minSlides){h.settings.minSlides=h.children.length
}if(h.children.length<h.settings.maxSlides){h.settings.maxSlides=h.children.length
}if(h.settings.randomStart){h.settings.startSlide=Math.floor(Math.random()*h.children.length)
}h.active={index:h.settings.startSlide};
h.carousel=h.settings.minSlides>1||h.settings.maxSlides>1?true:false;
if(h.carousel){h.settings.preloadImages="all"
}h.minThreshold=(h.settings.minSlides*h.settings.slideWidth)+((h.settings.minSlides-1)*h.settings.slideMargin);
h.maxThreshold=(h.settings.maxSlides*h.settings.slideWidth)+((h.settings.maxSlides-1)*h.settings.slideMargin);
h.working=false;
h.controls={};
h.interval=null;
h.animProp=h.settings.mode==="vertical"?"top":"left";
h.usingCSS=h.settings.useCSS&&h.settings.mode!=="fade"&&(function(){var Z=document.createElement("div"),Y=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];
for(var X=0;
X<Y.length;
X++){if(Z.style[Y[X]]!==undefined){h.cssPrefix=Y[X].replace("Perspective","").toLowerCase();
h.animProp="-"+h.cssPrefix+"-transform";
return true
}}return false
}());
if(h.settings.mode==="vertical"){h.settings.maxSlides=h.settings.minSlides
}L.data("origStyle",L.attr("style"));
L.children(h.settings.slideSelector).each(function(){a(this).data("origStyle",a(this).attr("style"))
});
l()
};
var l=function(){var X=h.children.eq(h.settings.startSlide);
L.wrap('<div class="'+h.settings.wrapperClass+'"><div class="bx-viewport"></div></div>');
h.viewport=L.parent();
if(h.settings.ariaLive&&!h.settings.ticker){h.viewport.attr("aria-live","polite")
}h.loader=a('<div class="bx-loading" />');
h.viewport.prepend(h.loader);
L.css({width:h.settings.mode==="horizontal"?(h.children.length*1000+215)+"%":"auto",position:"relative"});
if(h.usingCSS&&h.settings.easing){L.css("-"+h.cssPrefix+"-transition-timing-function",h.settings.easing)
}else{if(!h.settings.easing){h.settings.easing="swing"
}}h.viewport.css({width:"100%",overflow:"hidden",position:"relative"});
h.viewport.parent().css({maxWidth:P()});
if(!h.settings.pager&&!h.settings.controls){h.viewport.parent().css({margin:"0 auto 0px"})
}h.children.css({"float":h.settings.mode==="horizontal"?"left":"none",listStyle:"none",position:"relative"});
h.children.css("width",G());
if(h.settings.mode==="horizontal"&&h.settings.slideMargin>0){h.children.css("marginRight",h.settings.slideMargin)
}if(h.settings.mode==="vertical"&&h.settings.slideMargin>0){h.children.css("marginBottom",h.settings.slideMargin)
}if(h.settings.mode==="fade"){h.children.css({position:"absolute",zIndex:0,display:"none"});
h.children.eq(h.settings.startSlide).css({zIndex:h.settings.slideZIndex,display:"block"})
}h.controls.el=a('<div class="bx-controls" />');
if(h.settings.captions){C()
}h.active.last=h.settings.startSlide===y()-1;
if(h.settings.video){L.fitVids()
}if(h.settings.preloadImages==="all"||h.settings.ticker){X=h.children
}if(!h.settings.ticker){if(h.settings.controls){j()
}if(h.settings.auto&&h.settings.autoControls){O()
}if(h.settings.pager){T()
}if(h.settings.controls||h.settings.autoControls||h.settings.pager){h.viewport.after(h.controls.el)
}}else{h.settings.pager=false
}c(X,u)
};
var c=function(X,aa){var Z=X.find('img:not([src=""]), iframe').length,Y=0;
if(Z===0){aa();
return
}X.find('img:not([src=""]), iframe').each(function(){a(this).one("load error",function(){if(++Y===Z){aa()
}}).each(function(){if(this.complete){a(this).load()
}})
})
};
var u=function(){if(h.settings.infiniteLoop&&h.settings.mode!=="fade"&&!h.settings.ticker){var Z=h.settings.mode==="vertical"?h.settings.minSlides:h.settings.maxSlides,Y=h.children.slice(0,Z).clone(true).addClass("bx-clone"),X=h.children.slice(-Z).clone(true).addClass("bx-clone");
if(h.settings.ariaHidden){Y.attr("aria-hidden",true);
X.attr("aria-hidden",true)
}L.append(Y).prepend(X)
}h.loader.remove();
g();
if(h.settings.mode==="vertical"){h.settings.adaptiveHeight=true
}h.viewport.height(n());
L.redrawSlider();
h.settings.onSliderLoad.call(L,h.active.index);
h.initialized=true;
if(h.settings.responsive){a(window).bind("resize",m)
}if(h.settings.auto&&h.settings.autoStart&&(y()>1||h.settings.autoSlideForOnePage)){d()
}if(h.settings.ticker){J()
}if(h.settings.pager){W(h.settings.startSlide)
}if(h.settings.controls){k()
}if(h.settings.touchEnabled&&!h.settings.ticker){e()
}if(h.settings.keyboardEnabled&&!h.settings.ticker){a(document).keydown(w)
}};
var n=function(){var X=0;
var Z=a();
if(h.settings.mode!=="vertical"&&!h.settings.adaptiveHeight){Z=h.children
}else{if(!h.carousel){Z=h.children.eq(h.active.index)
}else{var Y=h.settings.moveSlides===1?h.active.index:h.active.index*p();
Z=h.children.eq(Y);
for(i=1;
i<=h.settings.maxSlides-1;
i++){if(Y+i>=h.children.length){Z=Z.add(h.children.eq(i-1))
}else{Z=Z.add(h.children.eq(Y+i))
}}}}if(h.settings.mode==="vertical"){Z.each(function(aa){X+=a(this).outerHeight()
});
if(h.settings.slideMargin>0){X+=h.settings.slideMargin*(h.settings.minSlides-1)
}}else{X=Math.max.apply(Math,Z.map(function(){return a(this).outerHeight(false)
}).get())
}if(h.viewport.css("box-sizing")==="border-box"){X+=parseFloat(h.viewport.css("padding-top"))+parseFloat(h.viewport.css("padding-bottom"))+parseFloat(h.viewport.css("border-top-width"))+parseFloat(h.viewport.css("border-bottom-width"))
}else{if(h.viewport.css("box-sizing")==="padding-box"){X+=parseFloat(h.viewport.css("padding-top"))+parseFloat(h.viewport.css("padding-bottom"))
}}return X
};
var P=function(){var X="100%";
if(h.settings.slideWidth>0){if(h.settings.mode==="horizontal"){X=(h.settings.maxSlides*h.settings.slideWidth)+((h.settings.maxSlides-1)*h.settings.slideMargin)
}else{X=h.settings.slideWidth
}}return X
};
var G=function(){var Y=h.settings.slideWidth,X=h.viewport.width();
if(h.settings.slideWidth===0||(h.settings.slideWidth>X&&!h.carousel)||h.settings.mode==="vertical"){Y=X
}else{if(h.settings.maxSlides>1&&h.settings.mode==="horizontal"){if(X>h.maxThreshold){return Y
}else{if(X<h.minThreshold){Y=(X-(h.settings.slideMargin*(h.settings.minSlides-1)))/h.settings.minSlides
}else{if(h.settings.shrinkItems){Y=Math.floor((X+h.settings.slideMargin)/(Math.ceil((X+h.settings.slideMargin)/(Y+h.settings.slideMargin)))-h.settings.slideMargin)
}}}}}return Y
};
var D=function(){var Y=1,X=null;
if(h.settings.mode==="horizontal"&&h.settings.slideWidth>0){if(h.viewport.width()<h.minThreshold){Y=h.settings.minSlides
}else{if(h.viewport.width()>h.maxThreshold){Y=h.settings.maxSlides
}else{X=h.children.first().width()+h.settings.slideMargin;
Y=Math.floor((h.viewport.width()+h.settings.slideMargin)/X)
}}}else{if(h.settings.mode==="vertical"){Y=h.settings.minSlides
}}return Y
};
var y=function(){var Y=0,Z=0,X=0;
if(h.settings.moveSlides>0){if(h.settings.infiniteLoop){Y=Math.ceil(h.children.length/p())
}else{while(Z<h.children.length){++Y;
Z=X+D();
X+=h.settings.moveSlides<=D()?h.settings.moveSlides:D()
}}}else{Y=Math.ceil(h.children.length/D())
}return Y
};
var p=function(){if(h.settings.moveSlides>0&&h.settings.moveSlides<=D()){return h.settings.moveSlides
}return D()
};
var g=function(){var X,Z,Y;
if(h.children.length>h.settings.maxSlides&&h.active.last&&!h.settings.infiniteLoop){if(h.settings.mode==="horizontal"){Z=h.children.last();
X=Z.position();
E(-(X.left-(h.viewport.width()-Z.outerWidth())),"reset",0)
}else{if(h.settings.mode==="vertical"){Y=h.children.length-h.settings.minSlides;
X=h.children.eq(Y).position();
E(-X.top,"reset",0)
}}}else{X=h.children.eq(h.active.index*p()).position();
if(h.active.index===y()-1){h.active.last=true
}if(X!==undefined){if(h.settings.mode==="horizontal"){E(-X.left,"reset",0)
}else{if(h.settings.mode==="vertical"){E(-X.top,"reset",0)
}}}}};
var E=function(Z,Y,aa,ac){var X,ab;
if(h.usingCSS){ab=h.settings.mode==="vertical"?"translate3d(0, "+Z+"px, 0)":"translate3d("+Z+"px, 0, 0)";
L.css("-"+h.cssPrefix+"-transition-duration",aa/1000+"s");
if(Y==="slide"){L.css(h.animProp,ab);
if(aa!==0){L.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(ad){if(!a(ad.target).is(L)){return
}L.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");
o()
})
}else{o()
}}else{if(Y==="reset"){L.css(h.animProp,ab)
}else{if(Y==="ticker"){L.css("-"+h.cssPrefix+"-transition-timing-function","linear");
L.css(h.animProp,ab);
if(aa!==0){L.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(ad){if(!a(ad.target).is(L)){return
}L.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");
E(ac.resetValue,"reset",0);
x()
})
}else{E(ac.resetValue,"reset",0);
x()
}}}}}else{X={};
X[h.animProp]=Z;
if(Y==="slide"){L.animate(X,aa,h.settings.easing,function(){o()
})
}else{if(Y==="reset"){L.css(h.animProp,Z)
}else{if(Y==="ticker"){L.animate(X,aa,"linear",function(){E(ac.resetValue,"reset",0);
x()
})
}}}}};
var q=function(){var aa="",X="",Z=y();
for(var Y=0;
Y<Z;
Y++){X="";
if(h.settings.buildPager&&a.isFunction(h.settings.buildPager)||h.settings.pagerCustom){X=h.settings.buildPager(Y);
h.pagerEl.addClass("bx-custom-pager")
}else{X=Y+1;
h.pagerEl.addClass("bx-default-pager")
}aa+='<div class="bx-pager-item"><a href="" data-slide-index="'+Y+'" class="bx-pager-link">'+X+"</a></div>"
}h.pagerEl.html(aa)
};
var T=function(){if(!h.settings.pagerCustom){h.pagerEl=a('<div class="bx-pager" />');
if(h.settings.pagerSelector){a(h.settings.pagerSelector).html(h.pagerEl)
}else{h.controls.el.addClass("bx-has-pager").append(h.pagerEl)
}q()
}else{h.pagerEl=a(h.settings.pagerCustom)
}h.pagerEl.on("click touchend","a",A)
};
var j=function(){h.controls.next=a('<a class="bx-next" href="">'+h.settings.nextText+"</a>");
h.controls.prev=a('<a class="bx-prev" href="">'+h.settings.prevText+"</a>");
h.controls.next.bind("click touchend",f);
h.controls.prev.bind("click touchend",S);
if(h.settings.nextSelector){a(h.settings.nextSelector).append(h.controls.next)
}if(h.settings.prevSelector){a(h.settings.prevSelector).append(h.controls.prev)
}if(!h.settings.nextSelector&&!h.settings.prevSelector){h.controls.directionEl=a('<div class="bx-controls-direction" />');
h.controls.directionEl.append(h.controls.prev).append(h.controls.next);
h.controls.el.addClass("bx-has-controls-direction").append(h.controls.directionEl)
}};
var O=function(){h.controls.start=a('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+h.settings.startText+"</a></div>");
h.controls.stop=a('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+h.settings.stopText+"</a></div>");
h.controls.autoEl=a('<div class="bx-controls-auto" />');
h.controls.autoEl.on("click",".bx-start",z);
h.controls.autoEl.on("click",".bx-stop",U);
if(h.settings.autoControlsCombine){h.controls.autoEl.append(h.controls.start)
}else{h.controls.autoEl.append(h.controls.start).append(h.controls.stop)
}if(h.settings.autoControlsSelector){a(h.settings.autoControlsSelector).html(h.controls.autoEl)
}else{h.controls.el.addClass("bx-has-controls-auto").append(h.controls.autoEl)
}K(h.settings.autoStart?"stop":"start")
};
var C=function(){h.children.each(function(X){var Y=a(this).find("img:first").attr("title");
if(Y!==undefined&&(""+Y).length){a(this).append('<div class="bx-caption"><span>'+Y+"</span></div>")
}})
};
var f=function(X){X.preventDefault();
if(h.controls.el.hasClass("disabled")){return
}if(h.settings.auto&&h.settings.stopAutoOnClick){L.stopAuto()
}L.goToNextSlide()
};
var S=function(X){X.preventDefault();
if(h.controls.el.hasClass("disabled")){return
}if(h.settings.auto&&h.settings.stopAutoOnClick){L.stopAuto()
}L.goToPrevSlide()
};
var z=function(X){L.startAuto();
X.preventDefault()
};
var U=function(X){L.stopAuto();
X.preventDefault()
};
var A=function(Z){var Y,X;
Z.preventDefault();
if(h.controls.el.hasClass("disabled")){return
}if(h.settings.auto&&h.settings.stopAutoOnClick){L.stopAuto()
}Y=a(Z.currentTarget);
if(Y.attr("data-slide-index")!==undefined){X=parseInt(Y.attr("data-slide-index"));
if(X!==h.active.index){L.goToSlide(X)
}}};
var W=function(Y){var X=h.children.length;
if(h.settings.pagerType==="short"){if(h.settings.maxSlides>1){X=Math.ceil(h.children.length/h.settings.maxSlides)
}h.pagerEl.html((Y+1)+h.settings.pagerShortSeparator+X);
return
}h.pagerEl.find("a").removeClass("active");
h.pagerEl.each(function(Z,aa){a(aa).find("a").eq(Y).addClass("active")
})
};
var o=function(){if(h.settings.infiniteLoop){var X="";
if(h.active.index===0){X=h.children.eq(0).position()
}else{if(h.active.index===y()-1&&h.carousel){X=h.children.eq((y()-1)*p()).position()
}else{if(h.active.index===h.children.length-1){X=h.children.eq(h.children.length-1).position()
}}}if(X){if(h.settings.mode==="horizontal"){E(-X.left,"reset",0)
}else{if(h.settings.mode==="vertical"){E(-X.top,"reset",0)
}}}}h.working=false;
h.settings.onSlideAfter.call(L,h.children.eq(h.active.index),h.oldIndex,h.active.index)
};
var K=function(X){if(h.settings.autoControlsCombine){h.controls.autoEl.html(h.controls[X])
}else{h.controls.autoEl.find("a").removeClass("active");
h.controls.autoEl.find("a:not(.bx-"+X+")").addClass("active")
}};
var k=function(){if(y()===1){h.controls.prev.addClass("disabled");
h.controls.next.addClass("disabled")
}else{if(!h.settings.infiniteLoop&&h.settings.hideControlOnEnd){if(h.active.index===0){h.controls.prev.addClass("disabled");
h.controls.next.removeClass("disabled")
}else{if(h.active.index===y()-1){h.controls.next.addClass("disabled");
h.controls.prev.removeClass("disabled")
}else{h.controls.prev.removeClass("disabled");
h.controls.next.removeClass("disabled")
}}}}};
var d=function(){if(h.settings.autoDelay>0){var X=setTimeout(L.startAuto,h.settings.autoDelay)
}else{L.startAuto();
a(window).focus(function(){L.startAuto()
}).blur(function(){L.stopAuto()
})
}if(h.settings.autoHover){L.hover(function(){if(h.interval){L.stopAuto(true);
h.autoPaused=true
}},function(){if(h.autoPaused){L.startAuto(true);
h.autoPaused=null
}})
}};
var J=function(){var Y=0,Z,X,ad,ae,ac,af,ab,aa;
if(h.settings.autoDirection==="next"){L.append(h.children.clone().addClass("bx-clone"))
}else{L.prepend(h.children.clone().addClass("bx-clone"));
Z=h.children.first().position();
Y=h.settings.mode==="horizontal"?-Z.left:-Z.top
}E(Y,"reset",0);
h.settings.pager=false;
h.settings.controls=false;
h.settings.autoControls=false;
if(h.settings.tickerHover){if(h.usingCSS){ae=h.settings.mode==="horizontal"?4:5;
h.viewport.hover(function(){X=L.css("-"+h.cssPrefix+"-transform");
ad=parseFloat(X.split(",")[ae]);
E(ad,"reset",0)
},function(){aa=0;
h.children.each(function(ag){aa+=h.settings.mode==="horizontal"?a(this).outerWidth(true):a(this).outerHeight(true)
});
ac=h.settings.speed/aa;
af=h.settings.mode==="horizontal"?"left":"top";
ab=ac*(aa-(Math.abs(parseInt(ad))));
x(ab)
})
}else{h.viewport.hover(function(){L.stop()
},function(){aa=0;
h.children.each(function(ag){aa+=h.settings.mode==="horizontal"?a(this).outerWidth(true):a(this).outerHeight(true)
});
ac=h.settings.speed/aa;
af=h.settings.mode==="horizontal"?"left":"top";
ab=ac*(aa-(Math.abs(parseInt(L.css(af)))));
x(ab)
})
}}x()
};
var x=function(ad){var ab=ad?ad:h.settings.speed,X={left:0,top:0},aa={left:0,top:0},Z,Y,ac;
if(h.settings.autoDirection==="next"){X=L.find(".bx-clone").first().position()
}else{aa=h.children.first().position()
}Z=h.settings.mode==="horizontal"?-X.left:-X.top;
Y=h.settings.mode==="horizontal"?-aa.left:-aa.top;
ac={resetValue:Y};
E(Z,"ticker",ab,ac)
};
var V=function(Y){var aa=a(window),X={top:aa.scrollTop(),left:aa.scrollLeft()},Z=Y.offset();
X.right=X.left+aa.width();
X.bottom=X.top+aa.height();
Z.right=Z.left+Y.outerWidth();
Z.bottom=Z.top+Y.outerHeight();
return(!(X.right<Z.left||X.left>Z.right||X.bottom<Z.top||X.top>Z.bottom))
};
var w=function(ab){var Z=document.activeElement.tagName.toLowerCase(),Y="input|textarea",aa=new RegExp(Z,["i"]),X=aa.exec(Y);
if(X==null&&V(L)){if(ab.keyCode===39){f(ab);
return false
}else{if(ab.keyCode===37){S(ab);
return false
}}}};
var e=function(){h.touch={start:{x:0,y:0},end:{x:0,y:0},direction:0};
h.viewport.bind("touchstart MSPointerDown pointerdown",I);
h.viewport.on("click",".bxslider a",function(X){if(h.viewport.hasClass("click-disabled")){X.preventDefault();
h.viewport.removeClass("click-disabled")
}})
};
var I=function(Y){h.controls.el.addClass("disabled");
if(h.working){Y.preventDefault();
h.controls.el.removeClass("disabled")
}else{h.touch.originalPos=L.position();
var Z=Y.originalEvent,X=(typeof Z.changedTouches!=="undefined")?Z.changedTouches:[Z];
h.touch.start.x=X[0].pageX;
h.touch.start.y=X[0].pageY;
if(h.viewport.get(0).setPointerCapture){h.pointerId=Z.pointerId;
h.viewport.get(0).setPointerCapture(h.pointerId)
}h.viewport.bind("touchmove MSPointerMove pointermove",M);
h.viewport.bind("touchend MSPointerUp pointerup",B);
h.viewport.bind("MSPointerCancel pointercancel",R)
}};
var R=function(X){E(h.touch.originalPos.left,"reset",0);
h.controls.el.removeClass("disabled");
h.viewport.unbind("MSPointerCancel pointercancel",R);
h.viewport.unbind("touchmove MSPointerMove pointermove",M);
h.viewport.unbind("touchend MSPointerUp pointerup",B);
if(h.viewport.get(0).releasePointerCapture){h.viewport.get(0).releasePointerCapture(h.pointerId)
}};
var M=function(aa){var ae=aa.originalEvent,Z=(typeof ae.changedTouches!=="undefined")?ae.changedTouches:[ae],ab=Math.abs(Z[0].pageX-h.touch.start.x),ad=Math.abs(Z[0].pageY-h.touch.start.y),Y=0,ac=0;
if((ab*3)>ad&&h.settings.preventDefaultSwipeX){aa.preventDefault()
}else{if((ad*3)>ab&&h.settings.preventDefaultSwipeY){aa.preventDefault()
}}if(h.settings.mode!=="fade"&&h.settings.oneToOneTouch){if(h.settings.mode==="horizontal"){ac=Z[0].pageX-h.touch.start.x;
var X=Z[0].pageY-h.touch.start.y;
if((Math.abs(ac)<Math.abs(X))&&Math.abs(X)>10){if(h.touch.direction===0){h.touch.direction=2
}}else{if((Math.abs(ac)>Math.abs(X))&&Math.abs(ac)>10){if(h.touch.direction===0){h.touch.direction=1
}}}if(h.touch.direction===2){E(h.touch.originalPos.left,"reset",0)
}else{if(h.touch.direction===1){aa.preventDefault();
ac=Z[0].pageX-h.touch.start.x;
Y=h.touch.originalPos.left+ac;
E(Y,"reset",0)
}}}else{ac=Z[0].pageY-h.touch.start.y;
Y=h.touch.originalPos.top+ac
}}};
var B=function(Z){h.viewport.unbind("touchmove MSPointerMove pointermove",M);
h.controls.el.removeClass("disabled");
var ab=Z.originalEvent,Y=(typeof ab.changedTouches!=="undefined")?ab.changedTouches:[ab],X=0,aa=0;
h.touch.end.x=Y[0].pageX;
h.touch.end.y=Y[0].pageY;
h.touch.direction=0;
if(h.settings.mode==="fade"){aa=Math.abs(h.touch.start.x-h.touch.end.x);
if(aa>=h.settings.swipeThreshold){if(h.touch.start.x>h.touch.end.x){L.goToNextSlide()
}else{L.goToPrevSlide()
}L.stopAuto()
}}else{if(h.settings.mode==="horizontal"){aa=h.touch.end.x-h.touch.start.x;
X=h.touch.originalPos.left
}else{aa=h.touch.end.y-h.touch.start.y;
X=h.touch.originalPos.top
}if(!h.settings.infiniteLoop&&(((h.active.index===0&&aa>0)||(h.active.last&&aa<0))||h.touch.direction===2)){if(h.settings.fireEndStartEvents){if(Math.abs(aa)>=h.settings.swipeThreshold){if(aa<0){h.settings.onSlideEnd.call(L,h.children.eq(h.active.index),true);
E("-"+(a(window).width()*(L.find("li").length)),"reset",200)
}else{h.settings.onSlideEnd.call(L,h.children.eq(h.active.index),false);
E("+"+a(window).width(),"reset",200)
}L.stopAuto()
}else{E(X,"reset",200)
}}else{E(X,"reset",200);
a.publish("gallery:extraswipe")
}}else{if(Math.abs(aa)>=h.settings.swipeThreshold){if(aa<0){a.publish("gallery:properswipe");
L.goToNextSlide()
}else{a.publish("gallery:properswipe");
L.goToPrevSlide()
}L.stopAuto()
}else{E(X,"reset",200)
}}}h.viewport.unbind("touchend MSPointerUp pointerup",B);
if(h.viewport.get(0).releasePointerCapture){h.viewport.get(0).releasePointerCapture(h.pointerId)
}};
var m=function(Y){if(!h.initialized){return
}if(h.working){window.setTimeout(m,10)
}else{var X=a(window).width(),Z=a(window).height();
if(N!==X||Q!==Z){N=X;
Q=Z;
L.redrawSlider();
h.settings.onSliderResize.call(L,h.active.index)
}}};
var v=function(Y){var X=D();
if(h.settings.ariaHidden&&!h.settings.ticker){h.children.attr("aria-hidden","true");
h.children.slice(Y,Y+X).attr("aria-hidden","false")
}};
var H=function(X){if(X<0){if(h.settings.infiniteLoop){return y()-1
}else{return h.active.index
}}else{if(X>=y()){if(h.settings.infiniteLoop){return 0
}else{return h.active.index
}}else{return X
}}};
L.goToSlide=function(ab,ae){var ad=true,ac=0,aa={left:0,top:0},X=null,Z,ag,af,Y;
h.oldIndex=h.active.index;
h.active.index=H(ab);
if(h.working||h.active.index===h.oldIndex){return
}h.working=true;
ad=h.settings.onSlideBefore.call(L,h.children.eq(h.active.index),h.oldIndex,h.active.index);
if(typeof(ad)!=="undefined"&&!ad){h.active.index=h.oldIndex;
h.working=false;
return
}if(ae==="next"){if(!h.settings.onSlideNext.call(L,h.children.eq(h.active.index),h.oldIndex,h.active.index)){ad=false
}}else{if(ae==="prev"){if(!h.settings.onSlidePrev.call(L,h.children.eq(h.active.index),h.oldIndex,h.active.index)){ad=false
}}}h.active.last=h.active.index>=y()-1;
if(h.settings.pager||h.settings.pagerCustom){W(h.active.index)
}if(h.settings.controls){k()
}if(h.settings.mode==="fade"){if(h.settings.adaptiveHeight&&h.viewport.height()!==n()){h.viewport.animate({height:n()},h.settings.adaptiveHeightSpeed)
}h.children.filter(":visible").fadeOut(h.settings.speed).css({zIndex:0});
h.children.eq(h.active.index).css("zIndex",h.settings.slideZIndex+1).fadeIn(h.settings.speed,function(){a(this).css("zIndex",h.settings.slideZIndex);
o()
})
}else{if(h.settings.adaptiveHeight&&h.viewport.height()!==n()){h.viewport.animate({height:n()},h.settings.adaptiveHeightSpeed)
}if(!h.settings.infiniteLoop&&h.carousel&&h.active.last){if(h.settings.mode==="horizontal"){X=h.children.eq(h.children.length-1);
aa=X.position();
ac=h.viewport.width()-X.outerWidth()
}else{Z=h.children.length-h.settings.minSlides;
aa=h.children.eq(Z).position()
}}else{if(h.carousel&&h.active.last&&ae==="prev"){ag=h.settings.moveSlides===1?h.settings.maxSlides-p():((y()-1)*p())-(h.children.length-h.settings.maxSlides);
X=L.children(".bx-clone").eq(ag);
aa=X.position()
}else{if(ae==="next"&&h.active.index===0){aa=L.find("> .bx-clone").eq(h.settings.maxSlides).position();
h.active.last=false
}else{if(ab>=0){Y=ab*parseInt(p());
aa=h.children.eq(Y).position()
}}}}if(typeof(aa)!=="undefined"){af=h.settings.mode==="horizontal"?-(aa.left-ac):-aa.top;
E(af,"slide",h.settings.speed)
}else{h.working=false
}}if(h.settings.ariaHidden){v(h.active.index*p())
}};
L.goToNextSlide=function(){if(!h.settings.infiniteLoop&&h.active.last){return
}var X=parseInt(h.active.index)+1;
L.goToSlide(X,"next")
};
L.goToPrevSlide=function(){if(!h.settings.infiniteLoop&&h.active.index===0){return
}var X=parseInt(h.active.index)-1;
L.goToSlide(X,"prev")
};
L.startAuto=function(X,Y){if(h.interval){return
}h.interval=setInterval(function(){if(h.settings.autoDirection==="next"){L.goToNextSlide()
}else{L.goToPrevSlide()
}},Y||h.settings.pause);
if(h.settings.autoControls&&X!==true){K("stop")
}};
L.stopAuto=function(X){if(!h.interval){return
}clearInterval(h.interval);
h.interval=null;
if(h.settings.autoControls&&X!==true){K("start")
}};
L.getCurrentSlide=function(){return h.active.index
};
L.getCurrentSlideElement=function(){return h.children.eq(h.active.index)
};
L.getSlideElement=function(X){return h.children.eq(X)
};
L.getSlideCount=function(){return h.children.length
};
L.isWorking=function(){return h.working
};
L.redrawSlider=function(){h.children.add(L.find(".bx-clone")).outerWidth(G());
h.viewport.css("height",n());
if(!h.settings.ticker){g()
}if(h.active.last){h.active.index=y()-1
}if(h.active.index>=y()){h.active.last=true
}if(h.settings.pager&&!h.settings.pagerCustom){q();
W(h.active.index)
}if(h.settings.ariaHidden){v(h.active.index*p())
}};
L.destroySlider=function(){if(!h.initialized){return
}h.initialized=false;
a(".bx-clone",this).remove();
h.children.each(function(){if(a(this).data("origStyle")!==undefined){a(this).attr("style",a(this).data("origStyle"))
}else{a(this).removeAttr("style")
}});
if(a(this).data("origStyle")!==undefined){this.attr("style",a(this).data("origStyle"))
}else{a(this).removeAttr("style")
}a(this).unwrap().unwrap();
if(h.controls.el){h.controls.el.remove()
}if(h.controls.next){h.controls.next.remove()
}if(h.controls.prev){h.controls.prev.remove()
}if(h.pagerEl&&h.settings.controls&&!h.settings.pagerCustom){h.pagerEl.remove()
}a(".bx-caption",this).remove();
if(h.controls.autoEl){h.controls.autoEl.remove()
}clearInterval(h.interval);
if(h.settings.responsive){a(window).unbind("resize",m)
}if(h.settings.keyboardEnabled){a(document).unbind("keydown",w)
}a(this).removeData("bxSlider")
};
L.reloadSlider=function(X){if(X!==undefined){r=X
}L.destroySlider();
F();
a(L).data("bxSlider",this)
};
L.resizeSlider=function(){m()
};
F();
a(L).data("bxSlider",this);
return this
}
})(jQuery)
})();
(function(){(function(a){$.subscribe("resize",_.debounce(function(){a.lazyAdHelpers.refreshBanners()
},1000))
})(App)
})();
(function(){(function(e){var a=e.Devices;
var d=$(window);
var c={};
var f=Modernizr.prefixed("transform");
var b=(function(){var h=Modernizr.csstransforms3d;
return function g(j){return h?"translate3d(0px,"+j+"px,0px)":"translateY("+j+"px)"
}
}());
c.updateOffset=function(g,h){g.style[f]=b(h)
};
c.resetOffset=function(g,h){g.style[f]=""
};
c.ModuleMixin={initializeParallax:function(g){g=g||{};
this.$inner=g.innerElement||this.$(":first-child");
this.$wrap=g.wrapElement||this.$(":first-child");
this.windowOrigin=g.windowOrigin||0;
this.innerOrigin=g.innerOrigin||0;
this.parallaxSpeed=g.speed!=null?g.speed:0.2;
this.shouldWrap=g.shouldWrap||false;
$.subscribe("scroll",_.bind(this.onScroll,this));
$.subscribe("resize",_.bind(this.onResize,this));
this.onResize(null);
this.onScroll(null,d.scrollTop())
},parallaxScroll:function(g,h){if(this.parallaxIsActive||(this.parallaxSpeed==0&&this.shouldWrap)){if(this.$el.css("position").indexOf("fixed")==-1){this.parallaxUpdateTransform(h)
}else{}}else{this.parallaxUpdateTransform(null)
}},parallaxResize:function(){var g=this.$wrap;
var h=this.$inner;
this.wrapOffset=g.offset();
this.wrapHeight=g.height();
this.innerOffset=h.offset();
this.innerHeight=h.outerHeight();
this.windowHeight=d.height();
this.parallaxIsActive=a.is("desktop")&&a.isUserAgent("desktop")
},parallaxUpdateTransform:function(j){var u=this.windowHeight;
var x=this.windowOrigin;
var v=this.innerHeight;
var k=this.innerOrigin;
var m=j+u*x;
var n=this.wrapOffset.top+this.wrapHeight*k;
var q=(v-this.wrapHeight)*k;
var z=m-n-q;
var o=(m-n)*(1-this.parallaxSpeed);
var g=z-o;
var l=this.$inner[0];
var w=0;
if(this.shouldWrap){if(this.parallaxSpeed==0){var h=0;
var p=u*0.5;
h=n+v;
var A=false;
while(!A){if(w==0){if(j+u-p<(h+p)){A=true
}else{w++;
g+=h+p
}}else{if(j+u-p<(h+p+g)){A=true
}else{w++;
g+=h+p
}}}}else{var y=n+v+g;
var w=Math.floor(m/y);
var r=n+q+v+u*0.5;
g+=w*r
}}if(j!==this._scrollTop){this._scrollTop=j;
if(j==null){c.resetOffset(l)
}else{c.updateOffset(l,g)
}}},onScroll:function(g,h){this.parallaxScroll(g,h)
},onResize:function(g){this.parallaxResize(g)
}};
e.Parallax=c
}(App))
})();
(function(){(function(c,b,d){var a={};
a.ModuleMixin={moreClassName:null,moreListClassName:null,initializeList:function(){this.$list=this.$el;
this.$more=this.$("."+this.moreClassName);
this.$moreList=this.$("."+this.moreListClassName);
this.$listElements=this.$list.children().not("."+this.moreClassName)
},formatList:function(){var j=this.$el;
var h=this.$listElements;
var k=c(h);
var l=this.$more;
var g=this.$moreList;
h.detach();
j.prepend(k);
g.children().detach();
var n=j.width()-l.outerWidth();
var m=0;
var f=false;
var e=false;
h.each(function(o,p){m+=c(p).outerWidth();
if(m>n){g.append(p);
f=true
}if(!f){e=p
}});
if(f){if(g.size()===1){g.prepend(e)
}l.show()
}else{l.hide()
}},resetList:function(){var e=this.$el;
var f=this.$listElements;
var g=c(f);
f.detach();
e.prepend(g)
}};
d.ResponsiveList=a
})(jQuery,Backbone,App)
})();
(function(){(function(c,d){var b=function(r,u,k,m,v,j){var q=u===undefined?document.title:u;
var f=k===undefined?location.href:k;
var p=f.replace(/(\.html)(\/.+\.html)/,".html");
var h=(/iP(hone|od|ad)/.test(navigator.userAgent));
var e,o,l,g,n;
c.each(r,function(w,x){e=null;
o=true;
l=true;
g=false;
n=f;
switch(c(x).data("share")){case"facebook":e="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(n)+"&amp;title="+encodeURIComponent(q);
break;
case"twitter":if(!j){n=p
}e="https://twitter.com/intent/tweet?text="+encodeURIComponent(q+" "+n);
break;
case"tumblr":e="//tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl="+encodeURIComponent(n)+"&posttype=photo&content="+encodeURIComponent(v)+"&caption="+encodeURIComponent(q);
break;
case"gplus":e="https://plus.google.com/share?url="+encodeURIComponent(n);
break;
case"pinterest":if(!j){n=p
}g=true;
e="//pinterest.com/pin/create/button/?url="+encodeURIComponent(n)+"&media="+encodeURIComponent(v)+"&description="+encodeURIComponent(q);
break;
case"email":if(!j){n=p
}e="mailto:?subject="+q+"&body="+n;
o=false;
l=false;
break;
case"whatsapp":if(!j){n=p
}e="whatsapp://send?text="+q+" : "+n;
o=false;
l=false;
break;
case"embedVideo":e="javascript: window.App.EmbedModal.show();";
o=false;
l=false;
break;
default:break
}a({elem:x,cb:m,isPinterest:g,isAppleTouchUA:h,openPopup:l,title:q,href:e,insertBlankTarget:o,url:n})
})
};
function a(j){var h=j.isPinterest?770:650,g=450,l=(c(window).width()-h)/2,f=(c(window).height()-g)/2,k="width="+h+",height="+g+",top="+f+",left="+l;
if(!j.isAppleTouchUA&&j.openPopup){var m=c(j.elem);
var e=m.find("a");
e.off("click");
e.click(function(q){q.preventDefault();
q.stopPropagation();
var n=c(q.currentTarget);
if(j.cb){j.cb(n.parent().data("share"))
}var o=c(this).attr("href");
if(m.data("share")=="twitter"){var u,p;
if(j.url.lastIndexOf("#!")!=-1){p=j.url.substring(j.url.lastIndexOf("#!"))
}else{var r=j.url.lastIndexOf("#");
if(r!=-1&&r+1<j.url.length){p=j.url.substring(r)
}}if(p){u=j.url.substring(0,j.url.lastIndexOf("#"));
u=u+"?cid=twitter"+p
}else{u=j.url+"?cid=twitter"
}o="https://twitter.com/intent/tweet?text="+encodeURIComponent(j.title+" "+u);
window.open(o,j.title,k)
}else{window.open(o,j.title,k)
}})
}if(j.href!=null){c(j.elem).find("a").attr("href",j.href);
c(j.elem).find("a").attr("target",j.insertBlankTarget?"_blank":"_parent")
}}d.InitSocialLinks=b
})(jQuery,App)
})();
(function(){(function(b){var a=b.Transition={};
a.createClassToggle=function(c,e){var d=c+"_before";
var f;
return function(g){if(f){clearTimeout(f)
}if(g.hasClass(c)){g.removeClass(c);
f=setTimeout(function(){g.removeClass(d)
},e)
}else{g.addClass(d);
f=setTimeout(function(){g.addClass(c)
},20)
}}
}
}(App))
})();
(function(){})();
(function(){(function(b,a,c){var d=a.View.extend({requestorID:"BET",channelID:"BET",isCustomCss:false,_TVEAuth:null,actionLogin:false,html:"html",initialize:function(){this.hasUserRequestedAction=false;
b.subscribe("subscription:login",_.bind(this.login,this));
b.subscribe("subscription:logout",_.bind(this.logout,this));
b.subscribe("subscription:getMvpdPicker",_.bind(this.getMvpdPicker,this));
b.subscribe("tve:check:status:completed",_.bind(this.isLogin,this));
b.subscribe("tve:logout:done",_.bind(this.isLogout,this));
this._initTVEAuth()
},events:{},isLogin:function(g,f){if(f&&f.isLoggedIn){b(this.html).addClass("logged")
}else{b(this.html).removeClass("logged")
}},isLogout:function(){b(this.html).removeClass("logged")
},loaded:function(){if(b(".hero__video").length==0){window.TVEAuth.API.checkStatus(true)
}},logout:function(){this._sendEvent("cable-subscribe-logout-screen");
this._TVEAuth.API.getLogoutScreen()
},login:function(){this._sendEvent("cable-subscribe-login-screen");
s.linkTrackVars="events";
s.linkTrackEvents="event35";
s.events="event35";
window.s.tl(this,"o","event35");
this.hasUserRequestedAction=true;
this._TVEAuth.API.login()
},getMvpdPicker:function(f,e){this._TVEAuth.API.getMvpdPicker(e.containerId,e.callback)
},_initTVEAuth:function(){this._TVEAuth=window.TVEAuth;
this._registerTVECallbacks();
this._TVEAuth.API.init({requestor:this.requestorID,resource:this.channelID,customCSS:false});
this._overrideSetting()
},_registerTVECallbacks:function(){var e=this;
var f={};
f.componentLoaded=function(){e.loaded();
b.publish("tve:loaded")
};
f.errorHappened=function(g){window.s.linkTrackVars="events";
window.s.linkTrackEvents="event38";
window.s.events="event38";
window.s.tl(this,"o","event38");
if(g==="TVEErrorLocalStorage"){alert("Sorry. There is an issue preventing you from logging in with your TV provider. Please try non-incognito mode if you are browsing incognito.");
return
}if(!e.hasUserRequestedAction){return
}if(g=="TVEErrorUserNotAuthorized"){setTimeout(function(){alert("Sorry. It appears BET is not included in your subscription package. Please contact your TV provider to add it. In the meantime, enjoy select full episodes & clips.")
},1)
}else{setTimeout(function(){alert("Sorry. An unknown error occurred preventing your action from being fulfilled. Please try reloading the page.")
},0)
}};
f.specialPreviewExpiredWithProvider=function(g){e._TVEAuth.show("error",'"'+g.id+'" special preview has expired for specified account.')
};
f.specialPreviewLockedWithProvider=function(g){e._TVEAuth.show("error",'"'+g.id+'" special preview has been locked with provider.')
};
f.freePreviewExpired=function(){setTimeout(function(){e._TVEAuth.show("error","24HR free preview has expired for specified account.")
},0)
};
f.checkStatusCompleted=function(g){b.publish("tve:check:status:completed",g);
if(g.isLoggedIn){b.publish("tve:check:status:loggedIn",new e.constructor.Status(g))
}};
f.loginCompleted=function(h,g){e.hasUserRequestedAction=false;
b.publish("tve:login:done");
window.s.linkTrackVars="events";
window.s.linkTrackEvents="event37";
window.s.events="event37";
window.s.tl(this,"o","event37")
};
f.logoutCompleted=function(){b.publish("tve:logout:done")
};
f.providerSelected=function(g){e.hasUserRequestedAction=true;
window.s.linkTrackVars="events,prop41,eVar41";
window.s.linkTrackEvents="event36";
window.s.eVar41=window.s.prop41=g;
window.s.events="event36";
window.s.tl(this,"o",g)
};
f.providerNotListedButtonSelected=function(){};
f.startWatchingNowButtonClicked=function(){};
f.learnMoreButtonClicked=function(){};
f.specialPreviewPickedMethod=function(h,g){};
f.specialPreviewSucceedLoginForMethod=function(h,g){};
f.specialPreviewExpiredWithProvider=function(g){};
f.specialPreviewLockedWithProvider=function(g){};
this._TVEAuth.Callback=f
},_overrideSetting:function(){var e='<ul class=\'custom-header-label\'><li class=\'custom-header-label__item custom-header-label__item--active\'>1. SELECT PROVIDER</li><li class=\'custom-header-label__item\'>2. SIGN IN</li><li class=\'custom-header-label__item\'>3. WATCH</li></ul><p><strong>Get access to more full episodes by signing in with your TV provider</strong></p><div id="tveapp_searchBox" class="tveapp_searchBox"><span class="tveapp_wrapSearch"><label class="placeholder" for="tveapp_search">Type in provider name</label><input name="search" type="text" id="tveapp_search" class="tveapp_search" autocomplete="off" value=""></span><a class="tveapp_searchButton">GO</a></div>';
this._TVEAuth.settings.layout.selectProvider.content=e
},_sendEvent:function(f){var e=window.s.getPreviousValue(window.s.pageName,"s_pv");
window.s.pageName=f;
window.s.linkTrackVars="events,server,prop17,eVar17";
window.s.linkTrackEvents="event3";
window.s.eVar17=window.s.prop17=e;
window.s.events="event3";
window.s.t();
window.s.pageName=e
}});
d.Status=function(e){this.status=b.extend(true,{},e)
};
d.Status.prototype.getToken=function(){var f=this.status;
var j=f.isLoggedIn;
var h;
var g;
var e;
if(!j){return""
}h=(f.provider.id==="sfps");
g=f.token;
if(h&&(e=g.match(/(^|#)UUID:([^#]*)(#|$)/))){return e[2]
}else{if(h){return""
}}e=b(b.parseHTML(g)).find("sessionGUID").text();
return e
};
c.registerComponent("hero__sign-in",d)
})(jQuery,Backbone,App)
})();
(function(){})();
(function(){(function(c,b,d){var a=b.View.extend({$modal:null,$body:null,oldPageName:"",events:{click:"onModalLinkClick"},initialize:function(){var e=this.$el.data("modal-target");
this.pageName=this.$el.data("page-name");
this.$body=c("body");
this.$modal=this.$body.find(e);
this.$modal.on("click",_.bind(this.onModalClick,this))
},onModalLinkClick:function(f){this.openModal();
this.sendEvent();
f.preventDefault()
},onModalClick:function(g){var f=c(g.target);
if(f.hasClass("modal")||f.hasClass("modal__wrapper")||f.hasClass("modal__close")){this.closeModal()
}},openModal:function(){this.oldPageName=window.s.pageName;
this.$modal.addClass("modal--open");
this.$body.addClass("disable-scroll")
},closeModal:function(){this.$modal.removeClass("modal--open");
this.$body.removeClass("disable-scroll")
},sendEvent:function(){window.s.linkTrackVars="events,server,prop17,eVar17";
window.s.linkTrackEvents="event3";
window.s.eVar17=window.s.prop17=window.s.getPreviousValue(window.s.pageName,"s_pv");
window.s.events="event3";
window.s.pageName=this.pageName;
window.s.t();
window.s.pageName=this.oldPageName
}});
c(function(){d.registerComponent("modal-link",a)
})
})(jQuery,Backbone,App)
})();
(function(){(function(c,b,d){var a=b.View.extend({topPosition:0,containerHeight:0,$window:null,$mainContainer:null,$navigation:null,$stickyShare:null,$replacement:null,siblingsPositions:[],initialize:function(){if(d.Devices.is("desktop")&&!this.$el.data("disabled")){var f=this.$el.closest(".page__aside, .feed-container__aside, .page__aside__flex-box");
if(f.length){var e=f.find(".sticky-box:last");
if(e.is(this.$el)){this.$window=c(window);
this.$mainContainer=f.hasClass("page__aside__flex-box")?f:f.parent();
this.$navigation=c(".header__nav");
this.$stickyShare=c(".sticky-share");
this.generateSiblingsPositions();
this.containerHeight=this.$mainContainer.height();
this.$window.on("scroll",_.bind(this.onScroll,this));
c.subscribe("resize",_.bind(this.onResize,this))
}}}},onScroll:function(){if(d.Devices.is("desktop")&&this.$mainContainer.height()>this.$el.height()){this.toggleSticky();
this.toggleStickyBottom();
this.toggleVisibility()
}else{this.$el.removeAttr("style");
if(this.$el.hasClass("sticky-box--sticky")){this.$el.removeClass("sticky-box--sticky");
this.$el.css("top","");
this.$replacement.remove();
this.$replacement=null;
this.topPosition=0
}if(this.$el.hasClass("sticky-box--sticky-bottom")){this.$el.removeClass("sticky-box--sticky-bottom")
}if(this.$el.hasClass("sticky-box--hide")){this.$el.removeClass("sticky-box--hide");
this.$el.show()
}}},onResize:function(){if(this.$replacement!==null){this.topPosition=0;
this.$el.css("width",this.$replacement.css("width"));
this.$window.trigger("scroll")
}},toggleSticky:function(){if(this.getScrollPosition()+this.getTopOffset()>this.getElementPosition()){if(!this.$el.hasClass("sticky-box--sticky")){this.$replacement=c("<div/>").css({height:this.$el.css("height"),padding:this.$el.css("padding"),margin:this.$el.css("margin")});
this.topPosition=0;
this.$el.addClass("sticky-box--sticky");
this.$el.css("top",this.getTopOffset());
this.$el.css("width",this.$el.parent().width());
this.$replacement.insertAfter(this.$el)
}}else{if(this.$el.hasClass("sticky-box--sticky")){this.topPosition=0;
this.$el.removeClass("sticky-box--sticky");
this.$el.css("top","");
this.$el.css("width","");
this.$replacement.remove();
this.$replacement=null
}}},toggleStickyBottom:function(){if(this.$el.outerHeight()+this.getScrollPosition()+this.getTopOffset()>=this.$mainContainer.offset().top+this.$mainContainer.height()){if(!this.$el.hasClass("sticky-box--sticky-bottom")){this.$el.addClass("sticky-box--sticky-bottom");
this.$el.css("top","")
}}else{if(this.$el.hasClass("sticky-box--sticky-bottom")){this.$el.removeClass("sticky-box--sticky-bottom");
this.$el.css("top",this.getTopOffset())
}}},toggleVisibility:function(){var l=this.getScrollPosition()+this.getTopOffset();
var f=l+this.$el.outerHeight();
var k=false;
for(var h=0;
h<this.siblingsPositions.length;
h++){var e=this.siblingsPositions[h];
var g=e.top;
var j=g+e.height;
if(f>g&&l<j){k=true;
break
}}if(k&&!this.$el.hasClass("sticky-box--hide")){this.$el.addClass("sticky-box--hide");
this.$el.stop(true,true).fadeOut()
}else{if(!k&&this.$el.hasClass("sticky-box--hide")){this.$el.removeClass("sticky-box--hide");
this.$el.stop(true,true).fadeIn()
}}},getScrollPosition:function(){return this.$window.scrollTop()
},getElementHeight:function(){return this.$el.height()
},getElementPosition:function(){if(this.$replacement===null){this.topPosition=this.$el.offset().top
}else{this.topPosition=this.$replacement.offset().top
}return this.topPosition
},getTopOffset:function(){var f=this.$navigation.height();
var e=this.$stickyShare.length?this.$stickyShare.height():0;
return window.Math.max(f,e)
},generateSiblingsPositions:function(){var e=this;
this.siblingsPositions=[];
this.$el.nextAll().each(function(){var f=c(this);
e.siblingsPositions.push({top:f.offset().top,height:f.outerHeight()})
})
}});
d.registerComponent("sticky-box",a)
})(jQuery,Backbone,App)
})();
(function(){(function(c,b,d){var a=b.View.extend({listItemClassName:"isNowViwed",$item:c(".listicle-module__list-item"),$window:c(window),$pageBody:c(".page__body"),events:{},initialize:function(){this.$window.on("scroll",_.bind(this.onScroll,this));
if(!this.hasLeadText()&&!this.hasCommonSocialShare()&&!this.hasTimestamp()){this.$pageBody.addClass("page__body--noLead page__body--noSocialShare page__body--noTimestamp")
}else{if(!this.hasLeadText()&&!this.hasCommonSocialShare()){this.$pageBody.addClass("page__body--noLead page__body--noSocialShare")
}else{if(!this.hasLeadText()){this.$pageBody.addClass("page__body--noLead")
}}}},hasLeadText:function(){var e=!!this.$pageBody.find(".bodycopy").text().replace(/\s/g,"");
return e
},hasTimestamp:function(){var e=!!this.$pageBody.children(".page__main__timestamp").length;
return e
},hasCommonSocialShare:function(){var e=!!this.$pageBody.children(".social-share").length;
return e
},onScroll:function(){var e=this;
_.each(this.$item,function(h,f){var g=c(h);
if(e.getItemOffset(g)<=e.getWindowOffset()&&!g.hasClass(e.listItemClassName)){g.addClass(e.listItemClassName);
e.sendEvent(f,e.$item.length)
}})
},getWindowOffset:function(){var e=this.$window.scrollTop()+this.$window.height();
return e
},getItemOffset:function(e){return e.offset().top
},sendEvent:function(e,g){var f=false;
if(e===g-1){f=true
}window.s.linkTrackVars="events,server,eVar42,prop42,eVar43,prop26";
window.s.linkTrackEvents="event3"+(f?",event10":"");
window.s.events="event3"+(f?",event10":"");
window.s.eVar42=window.s.prop42=e+1;
window.s.eVar43=window.s.prop26=g;
window.s.t()
}});
c(function(){d.registerComponent("listicle-module__list",a)
})
})(jQuery,Backbone,App)
})();
(function(){(function(a,b){b.DynamicAdDelegator={};
b.DynamicAdDelegator.selector="dyamic-advert-slot-";
b.DynamicAdDelegator.enumerator=0;
b.DynamicAdDelegator.currentSelector=function(){var c=b.DynamicAdDelegator.selector+b.DynamicAdDelegator.enumerator;
b.DynamicAdDelegator.enumerator++;
return c
};
b.DynamicAdDelegator.buildContainerMarkup=function(c,e){var d="";
d+='<div class="ads ads--square"><div class="dynamic-built-ad" id="'+e+'"></div></div>';
if(a(c).hasClass("ad-placeholder")){a(c).append(d)
}else{a(c).after(d)
}};
b.DynamicAdDelegator.buildRefillableContainerMarkup=function(c,f,e){var d="";
d+='<div class="ads ads--square refillableBucket"><div class="dynamic-built-ad" id="'+f+'"></div></div>';
a(c).data("targeting",e);
if(a(c).hasClass("ad-placeholder")){a(c).append(d)
}else{a(c).after(d)
}};
b.DynamicAdDelegator.removeSlot=function(c){googletag.destroySlots([LazyAdManager[c].slot]);
a("#"+LazyAdManager[c].id).empty();
LazyAdManager.splice(c,1)
};
b.DynamicAdDelegator.removeSlotForId=function(d){var c=-1;
LazyAdManager.forEach(function(f,e){if(f.slot.getSlotElementId()===d){c=e
}});
if(c!==-1){b.DynamicAdDelegator.removeSlot(c)
}};
b.DynamicAdDelegator.refillableAdBucket=function(g,p,h,k,j){var d=b.DynamicAdDelegator.currentSelector();
var o=5000;
var c=null;
b.DynamicAdDelegator.buildRefillableContainerMarkup(g,d,DAD.pageTargeting);
var n=a(g).data("targeting");
function m(r,q,u){googletag.cmd.push(function(){var w=googletag.sizeMapping().build();
var v=googletag.defineSlot(r.pageInfo,p,d,h).addService(googletag.pubads()).setTargeting("n",r.n).setTargeting("tag",r.tag).setTargeting("sub",r.sub).setTargeting("prod",r.prod).setTargeting("show",r.show).setTargeting("tile",q).setTargeting("loc",u).setTargeting("ct",r.ct).setTargeting("betts",r.betts).setTargeting("ord",r.ord).setTargeting("cat",r.cat).setTargeting("testmode",r.testmode).setTargeting("ppvalue",r.ppvalue);
if(typeof AamGpt.getCookie("betgpt")!="undefined"){v.setTargeting(AamGpt.getKey("betgpt"),AamGpt.getValues("betgpt"))
}if(typeof AamGpt.getCookie("aam_uuid")!="undefined"){v.setTargeting("aamId",AamGpt.getCookie("aam_uuid"))
}if(pxDataPhase&&pxDataTarget){v.setTargeting("px_phase",pxDataPhase).setTargeting("px_target",pxDataTarget)
}googletag.pubads().addEventListener("slotVisibilityChanged",function(x){if(x.inViewPercentage===0){if(x.slot===v){f(x.slot)
}}else{if(c!=null){l()
}}});
googletag.display(d);
LazyAdManager.push({id:d,yPos:-1,display:false,slot:v,refillable:true});
b.lazyAdHelpers.viewabilityCheck()
})
}function f(u){if(c==null){var r=0;
var q=0;
while(r<LazyAdManager.length){if(LazyAdManager[r].slot==u){q=r
}r++
}c=setTimeout(function(){e(q)
},o)
}}function l(){clearTimeout(c);
c=null
}function e(q){b.DynamicAdDelegator.removeSlot(q);
m(n,k,j)
}m(n,k,j)
};
b.DynamicAdDelegator.drive=function(c,f,d){var h=b.DynamicAdDelegator.currentSelector();
b.DynamicAdDelegator.buildContainerMarkup(c,h);
var e=parseInt(DAD.pageTargeting.tile);
var g=DAD.pageTargeting.repeat;
if(e==3){d-=4
}if(DAD.pageTargeting.ct=="imagegallerypage"&&e==2){e=7
}if(e==3&&DAD.pageTargeting.ct=="listiclepage"){var j=a(".listicle-module__list-item").length/3>>0;
d-=j
}if(!g){DAD.pageTargeting.repeat=1
}else{if(g==3||(g==2&&e>8)){d-=3
}DAD.pageTargeting.repeat=g+1
}b.DynamicAdDelegator.driveHelper(h,f,d,e-d,e-d);
return h
};
b.DynamicAdDelegator.hardRefreshByIds=function(f){b.lazyAdHelpers.pageChange=true;
var d=[];
function e(k){if(f.indexOf(k.id)!=-1){return true
}else{return false
}}function h(k){if(f.indexOf(k.id)!=-1){return false
}else{return true
}}d=LazyAdManager.filter(e);
keep_targets=LazyAdManager.filter(h);
var g=[];
function j(k){g.push(k.slot)
}d.forEach(j);
googletag.destroySlots(g);
LazyAdManager=keep_targets;
var c=0;
while(c<f.length){if(a("#"+f[c]).data("sizes").length>0){b.DynamicAdDelegator.driveHelper(f[c],a("#"+f[c]).data("sizes"),c,a("#"+f[c]).data("tile"),a("#"+f[c]).data("tile"))
}c++
}};
b.DynamicAdDelegator.driveHelper=function(g,e,c,d,f){googletag.cmd.push(function(){var j=googletag.sizeMapping().build();
var h=googletag.defineSlot(DAD.pageTargeting.pageInfo,e,g).addService(googletag.pubads()).setTargeting("n",DAD.pageTargeting.n).setTargeting("sub",DAD.pageTargeting.sub).setTargeting("prod",DAD.pageTargeting.prod).setTargeting("show",DAD.pageTargeting.show).setTargeting("tile",d).setTargeting("loc",f).setTargeting("ct",DAD.pageTargeting.ct).setTargeting("betts",DAD.pageTargeting.betts).setTargeting("ord",DAD.pageTargeting.ord).setTargeting("cat",DAD.pageTargeting.cat).setTargeting("testmode",DAD.pageTargeting.testmode).setTargeting("ppvalue",DAD.pageTargeting.ppvalue);
if(typeof AamGpt.getCookie("betgpt")!="undefined"){h.setTargeting(AamGpt.getKey("betgpt"),AamGpt.getValues("betgpt"))
}if(typeof AamGpt.getCookie("aam_uuid")!="undefined"){h.setTargeting("aamId",AamGpt.getCookie("aam_uuid"))
}if(pxDataPhase&&pxDataTarget){h.setTargeting("px_phase",pxDataPhase).setTargeting("px_target",pxDataTarget)
}googletag.display(g);
LazyAdManager.push({id:g,yPos:-1,display:false,slot:h});
b.lazyAdHelpers.viewabilityCheck()
})
};
b.DynamicAdDelegator.driveSpecific=function(c,f,d,e,h){var g=b.DynamicAdDelegator.currentSelector();
b.DynamicAdDelegator.buildContainerMarkup(c,g);
b.DynamicAdDelegator.driveHelper(g,f,d,e,h)
};
b.DynamicAdDelegator.additionalAds=function(){var e=".page__body .body-copy__text .comments-component";
if(a(".comments-component").next().find("div.moreOpinion").length>0){e=".page__body .body-copy__text .subscribe.moreOpinion"
}var c=[{selector:e,size:[300,250]}];
var d=0;
while(d<c.length){if(a(c[d].selector).length>0){if(a(window).width()<996){b.DynamicAdDelegator.drive(c[d].selector,c[d].size,3)
}}d++
}};
b.DynamicAdDelegator.additionalAds()
})(jQuery,App)
})();
(function(a,b){a.fn.lazyAdDistributer=function(){return this.each(function(){var c=this;
this.init=function(){this.headway=1000;
this.buffer=250;
this.desktopHeadway=50;
if(b.Devices.isUserAgent("desktop")){this.headway=this.desktopHeadway
}this.throttleRate=50;
this.lastScroll=0;
this.delay=null;
this.initialWidth=a(window).width();
this.delay=null;
this.cancelledIds=[];
this.firstCall();
this.addEvents()
};
this.viewChecker=function(){var g=false;
var f=0;
var e=a(window).scrollTop();
var h=true;
var d=false;
if(e<this.lastScroll){h=false
}this.lastScroll=e;
while(f<LazyAdManager.length){d=false;
if(!LazyAdManager[f].display){this.updateYPos(f);
if(LazyAdManager[f].yPos>=0){if(LazyAdManager[f].refillable==null){if(LazyAdManager[f].yPos-this.headway<=(e+a(window).height())){d=true
}}else{if(h){if((LazyAdManager[f].yPos-this.headway<=(e+a(window).height()))&&(LazyAdManager[f].yPos+this.buffer>(e+a(window).height()))){d=true
}}else{if((LazyAdManager[f].yPos+this.buffer>=e)&&e>LazyAdManager[f].yPos){d=true
}}}}if(d){if(this.cancelledIds.indexOf(LazyAdManager[f].id)==-1){this.loadAd(f)
}else{this.setIndexToSeen(f)
}}}f++
}};
this.scrollHandler=function(d){if(c.viewChecker()){}};
this.addEvents=function(d){a(window).on("scroll",c.scrollHandler)
};
this.setIndexToSeen=function(d){LazyAdManager[d].display=true
};
this.setAllCurrentToSeen=function(){var d=0;
while(d<LazyAdManager.length){LazyAdManager[d].display=true;
d++
}};
this.updateYPos=function(d){if(a("#"+LazyAdManager[d].id).length>0){LazyAdManager[d].yPos=a("#"+LazyAdManager[d].id).offset().top;
if(a("#"+LazyAdManager[d].id).closest(".footer").hasClass("hidden")){LazyAdManager[d].yPos=-1
}}};
this.checkIfCancelled=function(e){var d=false;
if(b.lazyAdHelpers.cancelledIds.length>0){if(b.lazyAdHelpers.cancelledIds.indexOf(e)!=-1){d=true
}}return d
};
this.firstCall=function(){if(!(typeof window.googletag==="undefined"||window.googletag===null)){if(window.googletag.pubadsReady){this.viewChecker()
}else{window.googletag.cmd.push(function(){a("body")[0].viewChecker()
})
}}else{this.delay=setTimeout(function(){c.viewChecker()
},1000)
}};
this.loadAd=function(d){if(!(typeof window.googletag==="undefined"||window.googletag===null)){if(window.googletag.pubadsReady){window.googletag.pubads().refresh([LazyAdManager[d].slot],{changeCorrelator:false});
LazyAdManager[d].display=true
}else{window.googletag.cmd.push(function(){window.googletag.pubads().refresh([LazyAdManager[d].slot],{changeCorrelator:false});
LazyAdManager[d].display=true
})
}}};
this.refreshAllAds=function(){var d=0;
while(d<LazyAdManager.length){if(b.lazyAdHelpers.cancelledIds.length>0){if(b.lazyAdHelpers.cancelledIds.indexOf(LazyAdManager[d].id)==-1){this.loadAd(d)
}}else{this.loadAd(d)
}d++
}};
this.refreshBanners=function(){var d=0;
while(d<LazyAdManager.length){if(b.lazyAdHelpers.cancelledIds.length>0){if(b.lazyAdHelpers.cancelledIds.indexOf(LazyAdManager[d].id)==-1){if(LazyAdManager[d].multipleSizes!=null&&LazyAdManager[d].multipleSizes==true){this.loadAd(d)
}}}else{if(LazyAdManager[d].multipleSizes!=null&&LazyAdManager[d].multipleSizes==true){this.loadAd(d)
}}d++
}};
this.loadAdById=function(f){var d=0;
var e=false;
while(d<LazyAdManager.length&&!e){if(LazyAdManager[d].id.indexOf(f)!=-1){this.loadAd(d);
e=true
}d++
}};
this.init()
})
};
a(document).ready(function(){a("body").lazyAdDistributer()
});
b.lazyAdHelpers={};
b.lazyAdHelpers.cancelledIds=[];
b.lazyAdHelpers.isCancelled=function(c){return a("body")[0].checkIfCancelled(c)
};
b.lazyAdHelpers.refreshAll=function(){a("body")[0].refreshAllAds()
};
b.lazyAdHelpers.refreshBanners=function(){a("body")[0].refreshBanners()
};
b.lazyAdHelpers.preventAd=function(c){this.cancelledIds.push(c)
};
b.lazyAdHelpers.viewabilityCheck=function(){a("body")[0].firstCall()
}
})(jQuery,App);
(function(a){a.CQmode={};
a.CQmode.edit=false;
a.CQmode.preview=false;
a.CQmode.production=false;
if("CQ" in window){if(CQ.WCM.isPreviewMode()){a.CQmode.preview=true
}else{a.CQmode.edit=true
}}else{a.CQmode.production=true
}})(App);
(function(a){a.fn.embedThirdPartyVideoHandler=function(){return this.each(function(){var b=this;
this.init=function(){this.expectedAspectRatio=16/9;
this.actual_width=parseInt(a(this).find("iframe").attr("width"));
this.actual_height=parseInt(a(this).find("iframe").attr("height"));
this.expected_height=this.actual_width*9/16;
this.height_offset=this.actual_height-this.expected_height;
if(this.height_offset>0){a(this).css({"padding-bottom":"calc(56.25% + "+this.height_offset+"px)"})
}};
this.init()
})
};
a(document).ready(function(){a(".embed-video-wrapper").embedThirdPartyVideoHandler()
})
})(jQuery);
(function(a,b){googletag.cmd.push(function(){googletag.pubads().addEventListener("slotOnload",function(c){if(c.slot.getSlotElementId()==a(".ads--header > div").attr("id")&&a(".header").find(".ads.ads--header").text()!=""){if(c.slot.getServices().length!=0&&b.Devices.is("mobile")){if(a(".header").hasClass("slim")){setTimeout(function(){a(".showAds .header__ads").slideUp(500,function(){a("header.header").removeClass("showAds");
a(".header__ads").show()
})
},3000)
}else{a("header.header").removeClass("showAds")
}}}})
})
})(jQuery,App);
(function(e,k,c){var g=c.Devices;
var f=c.Transition;
var b=c.ResponsiveList;
var d=e("body");
var a=e(".header__nav__menu__toggle");
var j=k.View.extend({moreClassName:"header__nav_sub__link__more",moreListClassName:"header__nav_sub__link__more__list",initialize:function(){this.initializeList();
this.onResize(null);
e.subscribe("resize",_.bind(this.onResize,this))
},onResize:function(){if(g.is("desktop")){this.formatList();
if(e(".header_mobile").length>0){e(".subscribe__app__button").addClass("icon-bet-now-app-promo").removeClass("icon-download-app")
}else{e(".subscribe__app__button").removeClass("icon-bet-now-app-promo").addClass("icon-download-app")
}}else{this.resetList();
e(".subscribe__app__button").addClass("icon-bet-now-app-promo").removeClass("icon-download-app")
}}});
_.defaults(j.prototype,b.ModuleMixin);
var h=k.View.extend({OPEN_NAV_EVENT:"open",CLOSE_NAV_EVENT:"close",isFixed:false,isMobileOffsetFixed:false,isScrollingDown:false,scrollThreshold:400,scrollTimeout:0,navigationHovered:false,openDropdownTimeoutId:0,closeDropdownTimeoutId:0,delayTimeLong:200,delayTimeShort:0,openDelayTime:-1,closeDelayTime:-1,navClassName:"header__nav",navWrapHeight:0,navWrapHeightOffset:10,navInnerClassName:"header__nav__menu__inner",navFixedClassName:"header__nav_fixed",navMobileOffsetFixedClassName:"header__nav_fixed--offset-mobile",navActiveClassName:"header__nav_active",navNoAnimationClassName:"hard__close",navActiveGlobalClassName:"header__nav_active_global",navActiveGlobalNoShiftClassName:"header__nav_active_global_no_shift",navScrollingDownClassName:"header__nav_scroll_down",navScrollingUpClassName:"header__nav_scroll_up",navChildrenCase:"header__nav__item_has_many",articleTitle:"header__article__title",navSubClassName:"header__nav_sub",navSubActiveClassName:"header__nav_sub_active",navSubSubActiveClassName:"active",navSubSubClassName:"header__nav_sub__link--dropdown",navSubTitleClassName:"header__nav_sub__title",navSubListClassName:"header__nav_sub__link__list",progressBarClassName:"progress_bar",dropdownClassName:"header__dropdown",dropdownActiveClassName:"header__dropdown_active",menuLinkClassName:"header__nav__item",searchActiveClassName:"header__search_active",searchInputClassName:"header__search__input",searchLoaderClassName:"header__search__spinner",searchSuggestionClassName:"header__search__suggestions",resetSearchFromButtonClassName:"header__search__reset",headerSearchClassName:"header__search",headerSearchToggleClassName:"header__search__toggle",subscribeClassName:"subscribe",$resetSearchFormButton:null,$searchInput:null,$suggestions:null,$loader:null,$searchRequest:null,$mobileHeader:false,mobileHeaderClassName:"header_mobile",bbPlusClassName:"header_promo_plus",bbPlus:false,toggleIconSelector:"header__nav_sub__menu__toggle__icon",titleFullSelector:"header__nav_sub__title_full",loaderClassName:"header__cable-subscription__wrapper__loader",headerLoginClassName:"header__login",headerLogoutClassName:"header__logout",initialCompactSubNavTitleFontSize:null,initializeSubMenuTitleFlag:false,events:{"click .header__nav__item > a":"openDropdownOnClick","click .header__nav__item > .arrow_mask":"closeDropdownOnClickOfArrow","mouseenter .header__nav__item":"openDropdownOnEnter","mouseleave .header__nav__item":"closeDropdownOnLeave","mouseenter .header__nav__item__list":"detectMenuHover","mouseleave .header__nav__item__list":"detectMenuHover","click .header__nav__menu__toggle":"onNavToggle","click .header__nav__menu__cover":"onNavToggle","click .header__nav_sub__menu__toggle":"onNavSubToggle","click .header__nav_sub__link--dropdown > a":"onNavSubSubToggle","mouseenter .header__nav_sub__link--dropdown":"onNavSubSubToggle","mouseleave .header__nav_sub__link--dropdown":"onNavSubSubToggle","click .slimVersion .header__nav_sub__link--dropdown .subSubNav":"onNavSubSubToggleTentpole","click .header__search__toggle":"onSearchToggle","click .header__nav__item_show_mobile > a":"onDropdownToggle","keyup .header__search__input":"onSearchKeyUp","submit .header__search__form":"onSearchFormSubmit","onsubmit .header__search__form":"onSearchFormSubmit","click .header__search__reset":"onFormReset","click .header__logo":"sendNavEvent","click .header__nav__aux__link > a":"sendNavEvent","click .header__shortcut":"sendNavEvent","click .header__article__inner":"sendNavEvent","click .header__dropdown__footer > a":"sendNavEvent","click .header__dropdown__link > a":"sendNavEvent","click .header__dropdown__link_all > a":"sendNavEvent","click .subscribe__app__button":"sendNavEvent","click .subscribe__action__form__button":"sendNewsletterEvent","click .header__nav_sub__link__a":"sendNavSubEvent","click .header__nav_sub__link--dropdown__list__item":"sendNavSubEvent","click .header__nav_sub__social > a":"sendNavSubEvent","click .header__nav_sub .title__cta":"sendNavSubEvent","click .subscribe__action__social__item":"sendSocialEvent"},initialize:function(){this.$nav=this.$("."+this.navClassName);
this.$innerNav=this.$("."+this.navInnerClassName);
this.$navSub=this.$("."+this.navSubClassName);
this.$navWrap=this.$nav.parent();
this.$navItems=this.$("."+this.menuLinkClassName);
this.$progressBar=this.$("."+this.progressBarClassName);
this.$toggleIconSelector=this.$("."+this.toggleIconSelector);
this.$titleFullSelector=this.$("."+this.titleFullSelector);
this.$subscribe=this.$("."+this.subscribeClassName);
this.$headerArticleTitle=this.$("."+this.articleTitle);
this.toggleNavClass=f.createClassToggle(this.navActiveClassName,300);
this.toggleNavSubClass=f.createClassToggle(this.navSubActiveClassName,300);
this.toggleNavFixedMobileOffsetClass=f.createClassToggle(this.navMobileOffsetFixedClassName,300);
this.initializeArrowMask();
this.initializeAttachment();
this.initializeSubMenuTitle();
this.initializeSubMenuList();
if(e(".header").find(".header__nav_sub").length>0){this.initTentpoleSlimVersion()
}this.$loader=this.$("."+this.searchLoaderClassName);
this.$suggestions=this.$("."+this.searchSuggestionClassName);
this.$resetSearchFormButton=this.$("."+this.resetSearchFromButtonClassName);
this.$searchInput=this.$("."+this.searchInputClassName);
this.$mobileHeader=this.$el.hasClass(this.mobileHeaderClassName);
this.bbPlus=this.$el.hasClass(this.bbPlusClassName);
this.openDelayTime=this.delayTimeLong;
this.closeDelayTime=this.delayTimeShort;
this.initializeMobileWorkAround();
this.navWrapHeight=this.$navWrap.height()-this.$nav.height()-this.navWrapHeightOffset;
e.subscribe("window:click",_.bind(this.onWindowClick,this));
this.truncate();
if(c.Devices.is("mobile")&&e(".header").find(".ads.ads--header").text()!=""){e("header.header").addClass("showAds");
var l=e("header .header__nav__wrap").offset().top+80;
if(e(".header").hasClass("header_promo_plus")||e(".header").find(".header__nav_sub").text()!=""){e(".header__ads").before("<div class='ads_blank'></div>");
if(e("body").find(".smartbanner").text()!==""&&e("body").find(".smartbanner").css("display")!=="none"){e(".ads_blank").css("height",0)
}else{e(".ads_blank").css("height",l-50)
}e(".header__ads").addClass(this.navFixedClassName);
e(".header__ads").css("z-index","20");
if(e(".ads--header").closest(".background-graphic__mask--dark").length==0){e(".ads--header").css("background","rgba(255,255,255,1)")
}}else{e(".header").before("<div class='ads_blank'></div>");
if(e("body").find(".smartbanner").text()!==""&&e("body").find(".smartbanner").css("display")!=="none"){e(".ads_blank").css("height",e("header .header__ads").height()-10)
}else{e(".ads_blank").css("height",l)
}e(".header").addClass(this.navFixedClassName)
}}},truncate:function(){this.$headerArticleTitle.dotdotdot({ellipsis:"...",height:50})
},initializeArrowMask:function(){this.$("."+this.navChildrenCase+" > a").after('<span class="arrow_mask">')
},initializeAttachment:function(){e.subscribe("resize",_.bind(this.onResize,this));
e.subscribe("scroll",_.bind(this.onScroll,this));
this.scrollTopPrev=0;
this.scrollDelta=0;
this.windowScrollTopPrev=0;
this.onResize(null)
},initializeSubMenuTitle:function(){var l=this.navSubTitleClassName;
var m=this.$("."+l+"_full");
var n=this.$("."+l+"_compact");
if(m&&n){m.clone().children().appendTo(n)
}},initializeSubMenuList:function(){var l=this.$("."+this.navSubListClassName);
if(l){this.subNavList=new j({el:l[0]})
}},initializeMobileWorkAround:function(){if(!g.is("desktop")){if(this.bbPlus){try{var m=this.$titleFullSelector;
var o=m[0].getBoundingClientRect();
var n=m.find(".title")[0].getBoundingClientRect();
this.$toggleIconSelector.css("top",(n.top-o.top-4+(n.bottom-n.top)/2))
}catch(l){}}}},repositionTheCollapseButton:function(){try{var m=this.$titleFullSelector;
var o=m[0].getBoundingClientRect();
var n=m.find(".title")[0].getBoundingClientRect();
this.$toggleIconSelector.css("top",(n.top-o.top-4+(n.bottom-n.top)/2))
}catch(l){}},onResize:function(){var l=e.request("scroll:top");
this.navOffset=this.$navWrap.offset();
this.onScroll(null,l);
this.closeMenu(a,this.navActiveGlobalClassName);
if(g.is("desktop")){this.$navSub.removeClass("header__nav_sub_active_before header__nav_sub_active");
if(d.hasClass(this.navActiveGlobalNoShiftClassName)){this.toggleNavFixedMobileOffsetClass(this.$nav);
d.removeClass(this.navActiveGlobalNoShiftClassName)
}}else{this.initializeMobileWorkAround()
}this.navWrapHeight=this.$navWrap.height()-this.$nav.height()-this.navWrapHeightOffset;
this.truncate();
this.progressCustomScrollBar(l);
if(this.initializeSubMenuTitleFlag){this.updateSubMenuTitle()
}},onScroll:function(m,o){var n=e("header").height();
var l=e(window).scrollTop();
if(l>n){e("nav.header__nav").addClass("header__nav_fixed");
e("header.header").addClass("slim");
e("header.header").toggleClass("up",l<this.windowScrollTopPrev);
this.windowScrollTopPrev=l
}else{e("nav.header__nav").removeClass("header__nav_fixed");
e("header.header").removeClass("slim")
}this.closeOnScroll();
this.progressCustomScrollBar(o)
},progressCustomScrollBar:function(n){if(!!e("nav")&&e("nav").hasClass("header__nav_fixed")){var o=Math.max(document.documentElement.clientHeight,window.innerHeight||0);
var m=d.height()-o;
var l=n*100/m
}else{var l=0
}this.$progressBar.css("width",l+"%")
},triggerResize:function(){var l=this.subNavList;
if(l){setTimeout(function(){l.onResize()
},0)
}},onNavToggle:function(){if(window.Modernizr.touch){if(d.hasClass(this.navActiveGlobalClassName)||d.hasClass(this.navActiveGlobalNoShiftClassName)){setTimeout(_.bind(this.restoreScrollPosition,this),0)
}else{this.saveScrollPosition()
}}if(!e(".header__ads").hasClass("innerNav_open")){e(".header__ads").css("z-index",2);
e(".header__ads").addClass("innerNav_open")
}else{e(".header__ads").css("z-index",20);
e(".header__ads").removeClass("innerNav_open")
}this.toggleNavClass(this.$nav);
this.$nav.removeClass(this.navNoAnimationClassName);
this.$innerNav.scrollTop(0);
d.toggleClass(this.navActiveGlobalClassName);
this.trackEvents()
},onNavSubToggle:function(){if(window.Modernizr.touch){if(d.hasClass(this.navActiveGlobalClassName)||d.hasClass(this.navActiveGlobalNoShiftClassName)){setTimeout(_.bind(this.restoreScrollPosition,this),0);
this.$nav.addClass(this.navScrollingDownClassName);
this.$nav.addClass(this.navScrollingUpClassName);
this.$toggleIconSelector.addClass("important-override")
}else{this.saveScrollPosition();
this.$nav.removeClass(this.navScrollingDownClassName);
this.$nav.removeClass(this.navScrollingUpClassName);
this.$toggleIconSelector.removeClass("important-override");
var l=this;
setTimeout(function(){l.initializeMobileWorkAround()
},300)
}}if(!this.$toggleIconSelector.hasClass("subNav_open")){e(".header__ads").css("z-index",2);
this.$toggleIconSelector.addClass("subNav_open")
}else{e(".header__ads").css("z-index",20);
this.$toggleIconSelector.removeClass("subNav_open")
}this.toggleNavSubClass(this.$navSub);
this.toggleNavFixedMobileOffsetClass(this.$nav);
d.toggleClass(this.navActiveGlobalNoShiftClassName)
},onNavSubSubToggle:function(m){var l=e(m.currentTarget);
var n=window.Modernizr;
if(m.type==="mouseenter"&&c.Devices.is("desktop")){l.addClass(this.navSubSubActiveClassName)
}else{if(m.type==="mouseleave"&&c.Devices.is("desktop")){l.removeClass(this.navSubSubActiveClassName)
}else{if(m.type==="click"&&!c.Devices.is("desktop")){if(l.attr("href")==null||l.attr("href")==""){l.closest("li").toggleClass(this.navSubSubActiveClassName)
}else{if(l.closest("li").hasClass(this.navSubSubActiveClassName)){}else{l.closest("li").toggleClass(this.navSubSubActiveClassName);
m.preventDefault()
}}}}}m.stopPropagation()
},onNavSubSubToggleTentpole:function(m){var l=e(m.currentTarget);
if(m.type==="click"){l.closest("li").toggleClass(this.navSubSubActiveClassName)
}m.stopPropagation();
m.preventDefault();
return false
},onSearchToggle:function(){this.$nav.toggleClass(this.searchActiveClassName);
this._clearForm()
},onSearchFormSubmit:function(l){if(this.$searchInput.val().trim()==""){l.preventDefault()
}},onSearchKeyUp:function(m){var n=e(m.currentTarget).val();
if(n.length){this.$resetSearchFormButton.show()
}else{this.$resetSearchFormButton.hide()
}if(n.length<2){this.$suggestions.empty();
return
}this.$loader.show();
if(this.$searchRequest!=null){this.$searchRequest.abort();
this.$searchRequest=null
}var l=this;
l.$searchRequest=e.ajax({method:"GET",url:l.$suggestions.data("endpoint"),data:{q:n,siteName:"bet",format:"json",rows:20},dataType:"json"}).done(e.proxy(l._insertSuggestions,l))
},_insertSuggestions:function(p){var l=this;
l.$suggestions.empty();
if(p){var n=p.response.docs;
var o="";
var m=l.$suggestions.data("search-page");
e(n).each(function(){o+="<a class='header__search__suggestions__item' href='"+m+"?q="+this.Term+"'>"+l._decode(this.Term)+"</a>"
});
l.$suggestions.append(o)
}l.$loader.hide()
},_decode:function(l){return decodeURIComponent(l.replace(/\\x([0-9A-Fa-f]{2})/g,function(){return String.fromCharCode(parseInt(arguments[1],16))
}))
},onFormReset:function(){this._clearForm()
},_clearForm:function(){this.$suggestions.empty();
this.$resetSearchFormButton.hide();
this.$searchInput.val("")
},onDropdownToggle:function(l){e(l.currentTarget).parent().toggleClass(this.dropdownActiveClassName);
l.preventDefault()
},closeMenu:function(m,l){if((d.hasClass(l))&&(!m.is(":visible"))){e("."+this.navClassName).addClass(this.navNoAnimationClassName);
m.trigger("click")
}},onWindowClick:function(r,q){var o=this.$("."+this.menuLinkClassName);
var n=e(q.target);
var p=this.$("."+this.headerSearchClassName);
var m=this.$("."+this.headerSearchToggleClassName);
var l=false;
if((o.is(n)||n.closest(o).length>0)){l=true
}else{o.removeClass("closed")
}if(!m.is(n)){if(this.$nav.hasClass(this.searchActiveClassName)){if((p.is(n)||n.closest(p).length>0)){l=true
}else{this.$nav.removeClass(this.searchActiveClassName);
this._clearForm()
}}}if(l){return
}},closeOnScroll:function(){if(this.isFullMenu()&&c.Devices.is("desktop")){this.$navItems.removeClass("clicked");
if(this.$nav.hasClass(this.searchActiveClassName)){this.onSearchToggle()
}}},openDropdownOnClick:function(o){var m=e(o.currentTarget);
var n=m.closest("li");
this.sendNavEvent(o);
o.preventDefault();
if(n.hasClass("clicked")||!n.hasClass("header__nav__item_show_mobile")){var l=m.attr("href");
if((l!==undefined)&&(l!=="")&&(l.slice(0,1)!=="#")){window.location.href=l
}else{this.$navItems.removeClass("clicked")
}}else{this.$navItems.removeClass("clicked");
n.addClass("clicked")
}},closeDropdownOnClickOfArrow:function(n){var l=e(n.currentTarget);
var m=l.closest("li");
this.$navItems.removeClass("clicked");
m.removeClass("clicked");
n.stopPropagation();
n.preventDefault()
},openDropdownOnEnter:function(n){if(this.headerHoverCondition()){var m=e(n.currentTarget);
var l=this;
this.openDropdownTimeoutId=setTimeout(function(){l.$navItems.removeClass("clicked");
m.addClass("clicked");
l.openDelayTime=l.delayTimeShort
},this.openDelayTime)
}clearTimeout(this.closeDropdownTimeoutId)
},closeDropdownOnLeave:function(n){if(this.navigationHovered){if(this.headerHoverCondition()){var m=e(n.currentTarget);
m.parent().removeClass("clicked")
}}else{if(this.headerHoverCondition()){var l=this;
this.closeDropdownTimeoutId=setTimeout(function(){l.$navItems.filter(".clicked").children("a").addClass("fade_caret");
l.$navItems.filter(".clicked").children(".header__dropdown").fadeOut(300,function(){l.openDelayTime=l.delayTimeLong;
l.$navItems.filter(".clicked").children("a").removeClass("fade_caret");
l.$navItems.filter(".clicked").children(".header__dropdown").removeAttr("style");
l.$navItems.removeClass("clicked")
})
},this.delayTimeLong)
}}clearTimeout(this.openDropdownTimeoutId)
},detectMenuHover:function(l){this.navigationHovered=l.type==="mouseover"
},headerHoverCondition:function(){return !this.$el.hasClass(this.mobileHeaderClassName)&&g.is("desktop")
},isFullMenu:function(){return this.$el.hasClass("header_full")
},saveScrollPosition:function(){this.scrollPosition=d.scrollTop();
d.css("top",this.scrollPosition*-1)
},restoreScrollPosition:function(){d.scrollTop(this.scrollPosition);
d.css("top","");
this.navOffset=this.$navWrap.offset()
},trackEvents:function(){if(d.hasClass(this.navActiveGlobalClassName)){this.sendEvent(this.OPEN_NAV_EVENT)
}else{this.sendEvent(this.CLOSE_NAV_EVENT)
}},sendEvent:function(l){var m=window.s.prop4+":navigation:side nav:"+l;
this.runEvent(m,window.s.pageName,l)
},sendNavEvent:function(q){var r=this.$nav.hasClass(this.navActiveClassName);
var o=e(q.currentTarget);
var p=o.text().trim();
if(o.hasClass("header__article__inner")){p=o.find(".header__article__title").text().trim()
}var l=o.data("side-event");
var m=o.data("top-event");
if(o.is("a")){var n=r?l:m;
this.runEvent(n,window.s.pageName,p)
}},sendNavSubEvent:function(q){var r=c.Devices.is("mobile")||c.Devices.is("tablet");
var o=e(q.currentTarget);
var p=o.text().trim();
var l=o.data("expanded-event");
var m=o.data("top-event");
var n=r?l:m;
this.runEvent(n,window.s.pageName,p)
},sendSocialEvent:function(v){var w=this.$nav.hasClass(this.navActiveClassName);
var n=e(v.currentTarget);
var p=n.text().trim();
var r=this.$subscribe.data("header-event-side-id");
var m=this.$subscribe.data("header-event-top-id");
var o="social follow:"+p;
var q=r+o;
var u=m+o;
var l=w?q:u;
this.runEvent(l,window.s.pageName,p)
},sendNewsletterEvent:function(u){var w=this.$nav.hasClass(this.navActiveClassName);
var n=e(u.currentTarget);
var v=n.text().trim();
var p=this.$subscribe.data("header-event-side-id");
var m=this.$subscribe.data("header-event-top-id");
var q="newsletter";
var o=p+q;
var r=m+q;
var l=w?o:r;
this.runEvent(l,window.s.pageName,v);
this.runNewsleterFollowEvent(q)
},runEvent:function(m,l,n){window.s.linkTrackVars="events,prop57,eVar57,prop58,eVar58,prop59,eVar59";
window.s.linkTrackEvents="event4";
window.s.prop57=window.s.eVar57=m;
window.s.prop58=window.s.eVar58=window.s.prop7;
window.s.prop59=window.s.eVar59=n;
window.s.events="event4";
window.s.tl(this,"o",n)
},runNewsleterFollowEvent:function(l){window.s.linkTrackVars="events,prop21,eVar21";
window.s.linkTrackEvents="event29";
window.s.prop21=window.s.eVar21=l;
window.s.events="event29";
window.s.tl(this,"o","social follow")
},initTentpoleSlimVersion:function(){var o=e(".header__nav_sub__social__list");
var u="";
if(o.length!==0){u='<li class="header__nav_sub__link header__nav_sub__link--dropdown"><a class="header__nav_sub__link__a">FOLLOW</a><ul class="header__nav_sub__link--dropdown__list">'+o.clone().html()+"</ul></li>"
}var m=e(".header__nav_sub__menu").clone().html();
var r=e(".header__nav_sub__title_full ").find(".title");
var v=(r.length>0)?r.text():"";
var x="<li class='header__nav_sub__link sectionTitle'>"+v+"</li>"+m;
e(".header__nav__item__list").prepend(x);
e(".header__nav__item__list").addClass("slimVersion");
e(".slimVersion .header__nav_sub__link__list").append(u);
e(".slimVersion .header__nav_sub__link--dropdown .header__nav_sub__link__a").append("<span class='subSubNav'> </span>");
var p=e(".title__sub");
var l=e(".sub_title");
var n="";
if(p.length>0){n=n+p[0].outerHTML
}if(l.length>0){n=n+l[0].outerHTML
}e(".header__nav_sub__head .title").append(n);
e(".header__nav__item__list").find(".header__nav__item:first").children().text("BET.COM");
var w=window.location.href.trim();
var q=w.substr(w.lastIndexOf("/"));
if(q.indexOf("?")>=0){q=q.substr(0,q.indexOf("?"))
}e("li.header__nav_sub__link>a").each(function(z,A){var B="";
B=e(A).attr("href");
if(!!B){var y=B.substr(B.lastIndexOf("/"));
if(q==y){e(A).addClass("currentPage");
e(A).parent().addClass("header__nav_sub__link--currentPage")
}}})
}});
c.registerComponent("header",h)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({OPEN_STATE:"countdown--open",$countdown:null,$countdownClock:null,COUNTDOWN_DATE_CLASS:"countdown-date",COUNTDOWN_INTERVAL:"1000",events:{"click  .countdown__content":"bannerRedirect","click  .countdown__close__icon":"closeCountdown","click  .countdown__logo":"disableRedirect"},initialize:function(){this.$countdown=c(".countdownClock");
this.$countdownClock=c(".countdown .countdown__clock");
var e=this.getCountdownDate();
var f;
var g;
if(!!sessionStorage&&!!sessionStorage.closeCountdown&&sessionStorage.closeCountdown){g=true
}f=this.checkDistance(e);
if(!f&&!g){this.initCountdownClock(e);
this.showCountdownClock();
this.checkNoSponsorship()
}else{this.hideCountdownClock()
}},initCountdownClock:function(e){var f=c(".countdownClock");
addZero=function(h,j){while(h.toString().length<j){h="0"+h
}return h
};
var g=setInterval(function(){var j=new Date().getTime();
var n=e-j;
var m=Math.floor(n/(1000*60*60*24));
var h=Math.floor((n%(1000*60*60*24))/(1000*60*60));
var k=Math.floor((n%(1000*60*60))/(1000*60));
var l=Math.floor((n%(1000*60))/1000);
c(".days").text(m);
c(".hours").text(this.addZero(h,2));
c(".minutes").text(this.addZero(k,2));
c(".seconds").text(this.addZero(l,2));
if(n<0){clearInterval(g);
f.hide()
}},this.COUNTDOWN_INTERVAL)
},getCountdownDate:function(){var e=this.$countdown.data(this.COUNTDOWN_DATE_CLASS);
return e
},bannerRedirect:function(g){console.log("test");
var f=c(g.currentTarget).closest("section.countdownClock").data("banner-url");
if(typeof g.target.href==="undefined"){if((f!=="")&&(f.slice(0,1)!=="#")){window.location.href=f
}}},closeCountdown:function(f){try{if(!!sessionStorage){sessionStorage.closeCountdown=true
}}catch(f){console.log(f)
}this.hideCountdownClock();
f.preventDefault();
f.stopPropagation()
},checkDistance:function(e){var g=false;
var f=new Date().getTime();
var h=e-f;
if(h<=0){g=true
}return g
},showCountdownClock:function(){this.$countdown.addClass("countdown--open")
},hideCountdownClock:function(){this.$countdown.removeClass("countdown--open")
},checkNoSponsorship:function(){var e=c(".countdownClock .countdown__logo");
var f=c(".countdownClock .countdown__logo picture source");
if(e.length>0&&(!f.attr("srcset")||f.attr("srcset").length<=0)){this.$countdown.addClass("noSponsor")
}},disableRedirect:function(e){e.preventDefault();
e.stopPropagation()
}});
d.registerComponent("countdownClock",a)
})(jQuery,Backbone,App);
(function(b){var c=[];
var a=[];
function d(f){var e=a.indexOf(f);
if(e!==-1){return c[e]
}c.push(this);
a.push(f);
this._player=f;
this._callbacks={};
this._isPlaylist=null;
this._isLive=null;
this._hasStarted=false;
this._requiredProgress=null;
this._passed=0;
this._playhead=null;
this._isNewPlayhead=true;
this._timeout=null;
this._bound_handlePlaying=this._handlePlaying.bind(this);
this._bound_handleSeeking=this._handleSeeking.bind(this);
this._bound_clearTimeout=this._clearTimeout.bind(this);
this._handleEvents()
}d.types={VIDEO_STARTED:"videoStarted",AD_STARTED:"adStarted",VIDEO_FINISHED:"videoFinished",VIDEO_PROGRESS:"videoProgress"};
d.prototype._handleEvents=function(){this._player.on("ready",this._handlePlayerReady.bind(this));
this._player.on("adStarted",this._handleAdStart.bind(this));
this._player.on("mediaStart",this._handleSegmentStart.bind(this));
this._player.on("mediaEnd",this._handleSegmentEnd.bind(this));
this._player.on("playlistComplete",this._handlePlaylistEnd.bind(this));
this._player.on("stateChange:playing",this._bound_handlePlaying);
this._player.on("stateChange:seeking",this._bound_handleSeeking);
b.addEventListener("onbeforeunload",this._bound_clearTimeout)
};
d.prototype._handlePlayerReady=function(){this._isPlaylist=(this._player.config.contentType==="playlist");
this._isLive=this._player.isLive()
};
d.prototype._handleSegmentStart=function(f){var e={};
if(this._hasStarted&&!this._isPlaylist){return
}if(this._isLive){this._player.one("playheadUpdate:2400",this._fireVideoFinished.bind(this))
}this._isNewPlayhead=true;
this._hasStarted=true;
this._defineRequiredProgress(f);
e.autoplay=!!f.target.config.autoPlay;
this._triggerAndDisregard(this.constructor.types.VIDEO_STARTED,e)
};
d.prototype._handleSegmentEnd=function(e){if(!this._isPlaylist){return
}this._clearTimeout();
this._fireVideoFinished(e)
};
d.prototype._handleAdStart=function(){this._fireAdStarted()
};
d.prototype._handlePlaylistEnd=function(e){if(this._isPlaylist){return
}this._fireVideoFinished(e)
};
d.prototype._fireAdStarted=function(){this._trigger(this.constructor.types.AD_STARTED,{})
};
d.prototype._fireVideoFinished=function(f){var e={};
e.autoplay=!!f.target.config.autoPlay;
this._triggerAndDisregard(this.constructor.types.VIDEO_FINISHED,e)
};
d.prototype._handlePlaying=function(e){if(!this._isNewPlayhead){return
}this._playhead=e.target.absolutePlayhead;
this._isNewPlayhead=false;
this._setTimeout()
};
d.prototype._handleSeeking=function(e){this._isNewPlayhead=true;
this._clearTimeout();
this._incrementPassed(e.target.absolutePlayhead)
};
d.prototype._defineRequiredProgress=function(g){var f;
var e;
var h=0;
if(this._isLive){this._requiredProgress=1200;
return
}else{if(this._isPlaylist){this._requiredProgress=g.data.duration/2;
return
}}e=this._player.playlistMetadata.items;
for(f=0;
f<e.length;
f++){h+=e[f].duration
}this._requiredProgress=h/2
};
d.prototype._setTimeout=function(){this._clearTimeout();
this._timeout=b.setTimeout(this._tryToFireProgress.bind(this),this._getRemaining())
};
d.prototype._clearTimeout=function(){if(this._timeout===null){return
}b.clearTimeout(this._timeout);
this._timeout=null
};
d.prototype._tryToFireProgress=function(){if(!this._isEnough()){this._setTimeout();
return
}this._fireProgress()
};
d.prototype._fireProgress=function(){var e={};
this._player.off("stateChange:playing",this._bound_handlePlaying);
this._player.off("stateChange:seeking",this._bound_handleSeeking);
b.removeEventListener("onbeforeunload",this._bound_clearTimeout);
e.autoplay=!!this._player.config.autoPlay;
e.progressPercent=50;
this._triggerAndDisregard(this.constructor.types.VIDEO_PROGRESS,e)
};
d.prototype._isEnough=function(){var f=this._getPassed();
var e=(f>=this._requiredProgress);
return e
};
d.prototype._getPassed=function(){var f=this._getPlayhead();
var e=(this._passed+f-this._playhead);
return e
};
d.prototype._getRemaining=function(){var f=this._getPassed();
var e=this._requiredProgress-f;
return e
};
d.prototype._getPlayhead=function(){var e=this._player.absolutePlayhead;
return e
};
d.prototype._incrementPassed=function(e){this._passed+=(e-this._playhead);
this._playhead=null
};
d.prototype._trigger=function(g,h){var e=this._callbacks[g];
var f=0;
var j;
if(!e){return
}while(j=e[f]){j(h);
f++
}};
d.prototype._disregard=function(e){this._callbacks[e]=null
};
d.prototype._triggerAndDisregard=function(e,f){this._trigger(e,f);
this._disregard(e)
};
d.prototype.onVideoStarted=function(e){this.on("videoStarted",e)
};
d.prototype.onVideoProgress=function(e){this.on("videoProgress",e)
};
d.prototype.onVideoFinished=function(e){this.on("videoFinished",e)
};
d.prototype.onAdStarted=function(e){this.on("adStarted",e)
};
d.prototype.on=function(f,g){var e=this._callbacks[f];
if(!e){this._callbacks[f]=[];
e=this._callbacks[f]
}e.push(g)
};
d.prototype.off=function(g,h){var e=this._callbacks[g];
var f;
if(!e){return
}f=e.indexOf(h);
if(f===-1){return
}e.splice(f,1)
};
b.NormalizedPlayerEvents=d
})(window);
(function(c,d){var b=c.DYTracker={DYAPI:null};
var a=b._interface={};
b._bindInterface=function(){var e;
for(e in this._interface){if(!this._interface.hasOwnProperty(e)){continue
}this[e]=this._track.bind(this,e)
}};
b._bindEvents=function(){var e=this;
d.subscribe("tve:check:status:loggedIn",function(h,f){var g=f.getToken();
e.trackTVELogin(g)
})
};
b._track=function(h){var f=this;
var e=(c.DY||(c.parent&&c.parent.DY));
var g=Array.prototype.slice.call(arguments);
if(!e||typeof e.API!=="function"){g=d.extend(true,[],g);
c.setTimeout(function(){f._track.apply(f,g)
},1000);
return
}this.DYAPI=e.API;
g.shift();
this._interface[h].apply(this,g)
};
a.trackTVELogin=function(e){var f={name:"Login",properties:{dyType:"login-v1",cuid:e,cuidType:"tveUserToken"}};
this.DYAPI("event",f)
};
b._bindInterface();
b._bindEvents()
})(window,window.jQuery);
(function(c,e,b,g){var f=e(c);
var d=e(b.body);
var a=0;
disableScroll=function(){a=f.scrollTop();
d.css("top",-a);
d.addClass("disable-scroll")
};
enableScroll=function(){d.removeClass("disable-scroll");
c.scrollTo(0,a)
};
g.util=(g.util||{});
g.util.disableScroll=disableScroll;
g.util.enableScroll=enableScroll
})(window,window.jQuery,window.document,window.App);
(function(d){if(d._min&&d._min.events){a()
}else{d.addEventListener("minuteReady",a)
}function a(){d.removeEventListener("minuteReady",a);
d._min.events.addEventListener("apvUser",b);
d._min.events.addEventListener("minuteVideoView",c)
}function b(f){var e=d.s;
e.linkTrackVars="events";
if(f.data.isMinuteActive){e.linkTrackEvents="event151,event152";
e.events="event151,event152"
}else{e.linkTrackEvents="event151";
e.events="event151"
}e.tl(true,"o","Minutely: Apv user")
}function c(f){var e=d.s;
e.linkTrackVars="events";
if(f.data.isMinuteActive){e.linkTrackEvents="event153,event154";
e.events="event153,event154"
}else{e.linkTrackEvents="event153";
e.events="event153"
}e.tl(true,"o","Minutely: Video view")
}})(window);
(function(d,f,e,h,c){var j=d.Deferred();
var b;
c.dyApiReady=j.promise();
if(g()){j.resolve();
return
}b=e(a,200);
function g(){return(f.DY&&(typeof f.DY.API==="function"))
}function a(){if(!g()){return
}h(b);
j.resolve()
}})(window.jQuery,window,window.setInterval,window.clearInterval,window.App);
(function(b){var h=b.personalization=(b.personalization||{});
var f=b.Devices2;
function a(n){var m=n.wId;
var k=n.fId;
var l=n.slots[0]["item"]["url"];
return('<div class="asset_recommendationsPopup asset_recommendationsPopup--'+f.type()+'" data-dy-widget-id="'+m+'" data-dy-feed-id="'+k+'"><section class="asset_recommendationsPopup-content"><div class="asset_recommendationsPopup-logo"></div><h1 class="asset_recommendationsPopup-title">DON\'T MISS THIS...</h1>'+g(n)+'<div class="asset_recommendationsPopup-buttons clearfix"><a href="'+l+'"><button class="asset_recommendationsPopup-button asset_recommendationsPopup-button--accept">ACCEPT</button></a><button class="asset_recommendationsPopup-button asset_recommendationsPopup-button--close">CLOSE</button></div></section></div>')
}function g(n){var l;
var m=n.slots;
var k='<div class="asset_recommendationsPopup-thumbnails">';
for(l=0;
l<m.length;
l++){k+=j(m[l])
}k+="</div>";
return k
}function j(m){var l=m.item;
var k=l.id;
return('<a href="'+l.url+'" class="asset_recommendationsPopup-thumbnail asset_recommendationsPopup-thumbnail--'+l.post_type+'" data-dy-product-id="'+k+'"><figure>'+c(l.image_url,l.title)+"<figcaption>"+l.title+"</figcaption></figure></a>")
}function c(k,m){var n=new e(k);
var l="<picture>";
k=n.getUrl();
if(f.is("mobile")||f.is("desktop")){l+=("<source "+n.getFor(290,"square")+'><img src="'+k.getFor(290*1.5,"square")+'" alt="'+m+'">')
}else{if(f.is("tablet")){l+=("<source "+n.getFor(432)+'><img src="'+k.getFor(432*1.5)+'" alt="'+m+'">')
}}l+="</picture>";
return l
}function e(k){this.url=new d(k)
}e.prototype.getFor=function(n,m){var k=this.url;
var l=('srcset="'+k.getFor(n,m)+", "+k.getFor(n*1.5,m)+" 1.5x , "+k.getFor(n*2,m)+' 2x"');
return l
};
e.prototype.getUrl=function(){return this.url
};
function d(k){this.url=this.normalize(k)
}d.wantonRenditionConfigRegexp=/\/_jcr_content\/[^/]+\.dimg\//;
d.defaultImageRegexp=/\/icon_default_asset\.jpg/;
d.prototype.normalize=function(k){k=k.replace(d.wantonRenditionConfigRegexp,"/_jcr_content/image.custom0x0.dimg/");
k=k.replace(d.defaultImageRegexp,"/_jcr_content/image.custom0x0.dimg/icon_default_asset.jpg");
return k
};
d.prototype.getFor=function(m,l){var k=this.url;
if(l==="square"){k=k.replace("_jcr_content/image","_jcr_content/squareImage");
k=k.replace("custom0x0","custom"+m+"x"+m);
return k
}if(m%2!==0){m+=1
}k.replace("custom0x0","custom"+m+"x"+(m/2));
return k
};
h.exitIntentReccomendationsPopupTemplate=a
})(window.App);
(function(h,m,f,b,q,g){var r=b.namespace("personalization.experiences.recommendationsPopup");
var d=function(){return h.DYO
};
var c={widgetId:null,hasAcceptButton:false,hasSubscriptionForm:false};
var o=false;
var l=f.Deferred();
var e=f.Deferred();
var a;
r.init=function(u){if("CQ" in h&&!h.CQ.WCM["isPreviewMode"](true)){return
}else{if(o){return
}else{if(typeof u!=="object"||u===null){return
}else{if(typeof u.widgetId!=="number"){return
}}}}f.extend(true,c,u);
l.done(j);
k();
o=true
};
r.show=function(){e.done(n)
};
function k(){d()["recommendationWidgetData"](c.widgetId,{},l.resolve)
}function j(u,v){if(u!==null){return
}a=new p(v);
e.resolve()
}function n(){if(!a){return
}a.show();
try{d()["recommendations"]["registerElements"](a.getElement())
}catch(u){}}function p(u){this.$element=null;
this.data=f.extend(true,{},u||{});
this.loaded=f.Deferred();
this._bindMethods();
this._render();
this._bindEvents()
}p.prototype._bindMethods=function(){this._handleOverlayClick=this._handleOverlayClick.bind(this);
this._show=this._show.bind(this);
this.show=this.show.bind(this);
this.hide=this.hide.bind(this)
};
p.prototype._render=function(){var u=q.exitIntentReccomendationsPopupTemplate(this.data);
this.$element=f(u);
f(m.body).append(this.$element)
};
p.prototype._bindEvents=function(){this.$element.find(".asset_recommendationsPopup-thumbnail").last().find("img").on("load",this.loaded.resolve);
this.$element.on("click",".asset_recommendationsPopup-button--close",this.hide);
this.$element.on("click",this._handleOverlayClick)
};
p.prototype._handleOverlayClick=function(u){if(u.target!==this.$element[0]){return
}this.hide()
};
p.prototype.getElement=function(){return this.$element[0]
};
p.prototype._show=function(){g.disableScroll();
this.$element.addClass("asset_recommendationsPopup--open")
};
p.prototype.show=function(){this.loaded.done(this._show)
};
p.prototype.hide=function(){this.$element.removeClass("asset_recommendationsPopup--open");
g.enableScroll()
}
})(window,window.document,window.jQuery,window.App,window.App.personalization,window.App.util);
(function(c,b,e){var d=e.Parallax;
var a=e.Devices;
var f=b.View.extend({staticClassName:"background-graphic__static",wrapClassName:"background-graphic__wrap",innerClassName:"background-graphic__inner",scrollTimer:null,scrollTiming:250,initialize:function(){var g=this.$el.parent().hasClass(this.staticClassName);
if(g){if(c(".background-graphic__inner").attr("style")!=""){this.$el.find("."+this.innerClassName).attr("style",c(".background-graphic__inner").attr("style"))
}return
}var j=this.$el.data("speed")||0;
var h=e.$html.hasClass("ms-browser")&&this.$el.hasClass("enhanced");
if(h){j=0
}if(this.$el.hasClass("enhanced")&&!a.is("desktop")&&e.$html.hasClass("touch")){this.$("."+this.wrapClassName).css("top",e.$window.height())
}if(this.$el.data("should-wrap")=="undefined"||this.$el.data("should-wrap")==null){this.$el.data("should-wrap",true)
}this.initializeParallax({wrapElement:this.$("."+this.wrapClassName),innerElement:this.$("."+this.innerClassName),speed:j,shouldWrap:!!this.$el.data("should-wrap")});
if(c("html").hasClass("touch")){}},attachAdditionalScrollEvents:function(){this._noteScrollingBody()
},_noteScrollingBody:function(){var g=this;
c(window).bind("scroll",function(){clearTimeout(g.scrollTimer);
if(!c("."+g.wrapClassName).hasClass("scrolling-body")){c("."+g.wrapClassName).addClass("scrolling-body")
}g.scrollTimer=setTimeout(function(){c("."+g.wrapClassName).removeClass("scrolling-body")
},g.scrollTiming)
})
},aspectResize:function(j){if(!this.$el.data("speed")){var h=this.$wrap.width();
var g=a.is("mobile")?"":h*1.55
}},onResize:function(g){if(a.is("desktop")){this.aspectResize(g)
}this.parallaxResize(g)
}});
_.defaults(f.prototype,d.ModuleMixin);
e.registerComponent("background-graphic",f)
})(jQuery,Backbone,App);
(function(b,a,c){var d=a.View.extend({CLOSE_EVENT_NAME:"event17",OPEN_EVENT_NAME:"event16",_fb:{countEndPoint:"https://graph.facebook.com/v2.4/?fields=share{comment_count}&id=",defaultData:{numposts:5,href:document.location.href},inited:false},commentsExpandedClassName:"comments--expanded",commentsCountSelector:".comments__header__count",commentsContClassName:"comments__cont",commentsClassName:"comments__cont__comments",events:{"click .comments__header":"toggleCont"},initialize:function(){this.$comments=this.$("."+this.commentsClassName);
this._checkCommentsParamsAndLoadNumOfComments()
},_checkCommentsParamsAndLoadNumOfComments:function(){var f=this.$("."+this.commentsClassName);
if(!f.data("href")){f.data("href",this._fb.defaultData.href)
}if(!f.data("numposts")){f.data("numposts",this._fb.defaultData.numposts)
}var e=this;
b.get(this._fb.countEndPoint+f.data("href"),function(h){try{e.$(e.commentsCountSelector).text("("+h.share.comment_count+")")
}catch(g){}})
},toggleCont:function(f){var e=this;
this.$("."+this.commentsContClassName).slideToggle(function(){e.$el.toggleClass(e.commentsExpandedClassName);
if(e.$el.hasClass(e.commentsExpandedClassName)){if(!e._fb.inited){e.$comments.addClass("fb-comments");
window.FB.XFBML.parse(e.$el[0]);
e.initCommentTracking();
e._fb.inited=true
}e.sendEvent(e.OPEN_EVENT_NAME)
}else{e.sendEvent(e.CLOSE_EVENT_NAME)
}})
},initCommentTracking:function(){var e=this;
window.FB.Event.subscribe("comment.create",function(f){e.sendCommentEvent()
})
},sendEvent:function(e){var g=this.$el.data("page");
var f=e==="event16"?"open comments":"close comments";
window.s.linkTrackVars="events,prop7,eVar7";
window.s.linkTrackEvents=e;
window.s.prop7=g;
window.s.eVar7=g;
window.s.events=e;
window.s.tl(this,"o",f)
},sendCommentEvent:function(){var f=this.$el.data("page");
var e="event13";
window.s.linkTrackVars="events,prop21,eVar21,prop7,eVar7";
window.s.linkTrackEvents=e;
window.s.prop7=f;
window.s.eVar7=f;
window.s.prop21="comments";
window.s.eVar21="comments";
window.s.events=e;
window.s.tl(this,"o","comments")
}});
c.registerComponent("comments",d)
})(jQuery,Backbone,App);
(function(b,c){function a(d){this._events=new c(d);
this._shouldTrack=false;
this.DY=null;
this._checkContext();
this._handleEvents()
}a.prototype._checkContext=function(){try{this.DY=(b.DY||b.parent.DY);
this.DY.recommendationContext.data[0]
}catch(d){return
}if(this.DY.recommendationContext.type==="CATEGORY"||this.DY.recommendationContext.data.length===0||this.DY.recommendationContext.data[0]==="none"){return
}this._shouldTrack=true
};
a.prototype._handleEvents=function(){if(!this._shouldTrack){return
}this._events.onVideoStarted(this._track.bind(this,this._setVideoStartedData));
this._events.onVideoProgress(this._track.bind(this,this._setVideoProgressData));
this._events.onVideoFinished(this._track.bind(this,this._setVideoFinishedData))
};
a.prototype._track=function(f,d){var e;
e={name:"Video Watch",properties:{dyType:"video-watch-v1",itemId:this.DY.recommendationContext.data[0],autoplay:d.autoplay}};
f.call(this,d,e);
this.DY.API("event",e)
};
a.prototype._setVideoStartedData=function(d,e){e.properties.progress="VIDEO_STARTED"
};
a.prototype._setVideoProgressData=function(d,e){e.properties.progress="VIDEO_PROGRESS";
e.properties.progressPercent=d.progressPercent
};
a.prototype._setVideoFinishedData=function(d,e){e.properties.progress="VIDEO_FINISHED"
};
b.DYVideoTracker=a
})(window,window.NormalizedPlayerEvents);
(function(c,b,d){var a=b.View.extend({signatureSel:"embedded-video__signature",hiddenClassSel:"hidden",player:"",$videoWrapper:null,$curve:null,$placeholder:null,events:{"click .edge-placeholder-button":"onPlayerStartClicked","click .embedded-video__placeholder":"onPlaceholderClicked"},initialize:function(){this.$videoWrapper=this.$(".embedded-video__data");
this.$curve=this.$(".embedded-video__curve");
this.$placeholder=this.$(".embedded-video__placeholder");
if(!this.hasPlaceholder()){this.initPlayer()
}else{if(this.isMobile()&&this.hasPlaceholder()){if(c("html").hasClass("apple-touch")){this.placeholderImage=this.$placeholder.find("source").attr("srcset")
}else{this.placeholderImage=this.$placeholder.find("img").attr("srcset")
}if(this.isMobile()){var e=this;
this.$videoWrapper.addClass("hero__video--hidden");
this.onPlayerReady(function(){e.$videoWrapper.removeClass("hero__video--hidden");
e.$(".edge-placeholder-image").css("background-image","url("+e.placeholderImage+")")
})
}this.initPlayer()
}}},initPlayer:function(){if(!window.Modernizr.touch){this.$curve.hide()
}this.createVideoPlayer()
},createVideoPlayer:function(){var g;
var h=this.$videoWrapper.data("uri"),e=this.$videoWrapper.data("adparams"),k=this.$videoWrapper.data("locationpath"),f={};
if(e){e=e.replace("&lt;parameters.betord&gt;",timestampDart).replace("&lt;parameters.domainname&gt;",domainName).replace("[timestamp]",timestampDart)
}var j={videoURI:h,locationPath:k,adParams:e};
g=MTVN.EdgePlayerAPI.playBetVideo(this.$videoWrapper.get(0),j,f);
new DYVideoTracker(g);
new KeyweeVideoTracker(g)
},displaySignature:function(){c("."+this.signatureSel).removeClass(this.hiddenClassSel)
},onPlayerReady:function(j){var f=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;
var e=new f(function(k){var l=false;
c.each(k,function(){if(this.type==="childList"){l=true;
return false
}});
if(l){e.disconnect();
setTimeout(j,500)
}});
var h={attributes:false,childList:true,characterData:false};
var g=this.$videoWrapper.get(0);
e.observe(g,h)
},onPlaceholderClicked:function(f){this.$placeholder.hide();
this.initPlayer()
},onPlayerStartClicked:function(f){this.$curve.hide();
this.$placeholder.hide()
},hasPlaceholder:function(){return this.$placeholder.length>0
},isMobile:function(){return/ip(hone|od|ad)|android|webos|blackberry|iemobile|opera mini|bb1\d.*mobile/i.test(navigator.userAgent)
}});
d.registerComponent("embedded-video",a)
})(jQuery,Backbone,App);
(function(d,c,e){var a=e.Devices;
var b=c.View.extend({EnhancedAdSolidSelector:"enhanced-ad__solid",EnhancedAdOverlaySelector:"enhanced-ad-mobile-overlay",EnhancedAdBackgroundSelector:"enhanced-ad__bckg-img",EnhancedAdBackgroundBaseSelector:"enhanced-ad__bckg",EnhancedAdBackgroundRelativeWrapperSelector:"enhanced-ad__bckg__relative-wrapper",EnhancedAdBackgroundFixedWrapperSelector:"enhanced-ad__bckg__fixed-wrapper",BackgroundMaskPrimarySelector:"background-graphic__mask.primary",BackgroundMaskSecondarySelector:"background-graphic__mask.secondary",ViewTheVideoButtonSelector:"enhanced-ad__button-wrapper__button",FixedMobileClass:"fixed-mobile",events:{"mouseenter .enhanced-ad__button-wrapper__button":"CTAbuttonHover","mouseleave .enhanced-ad__button-wrapper__button":"CTAbuttonHover","click a.enhanced-ad__link-wrapper":"onViewTheVideo"},initialize:function(){this.$EnhancedAdOverlayDom=this.$("."+this.EnhancedAdOverlaySelector);
this.$EnhancedAdBackgroundRelativeWrapperDom=this.$("."+this.EnhancedAdBackgroundRelativeWrapperSelector);
this.$EnhancedAdBackgroundDom=this.$("."+this.EnhancedAdBackgroundSelector);
this.$EnhancedAdBackgroundBaseDom=this.$("."+this.EnhancedAdBackgroundBaseSelector);
this.$EnhancedAdBackgroundFixedWrapperDom=this.$("."+this.EnhancedAdBackgroundFixedWrapperSelector);
this.$ViewTheVideoButton=this.$("."+this.ViewTheVideoButtonSelector);
this.$EnhancedAdOverlayDom.height(500);
this.msBrowser=e.$html.hasClass("ms-browser");
this.isLongerVersion=this.$el.hasClass("longer-version");
this.steps=15;
if(this.isLongerVersion){this.$EnhancedAdOverlayDom.height(1200);
this.steps=34
}this.background=this.$el.data("background");
this.$EnhancedAdOverlayDom.background=this.background;
if(this.$EnhancedAdOverlayDom.background){this.$EnhancedAdOverlayDom.css("background-image",'url("'+this.$EnhancedAdOverlayDom.background+'")')
}this.CTAbuttonInit();
this.updateParallaxHeight(_.bind(function(){if(a.is("desktop")){var f=Math.floor(e.$window.height()/this.steps)*this.steps;
this.$EnhancedAdOverlayDom.height(f)
}this.animationStartBreakpoint=e.$window.height();
this.animationEndBreakpoint=this.$el.offset().top+e.$window.height();
if(this.isLongerVersion){this.animationEndBreakpoint=this.$el.offset().top+e.$window.height()*1.5
}this.shiftCoeficient=(this.$EnhancedAdOverlayDom.height()/this.steps);
this.imageScrollCoeficient=(e.$window.height()-this.$EnhancedAdBackgroundBaseDom.height())/e.$window.height();
if(a.is("mobile")){this.animationStartBreakpoint=this.animationStartBreakpoint;
d.subscribe("apple-orientationchange",_.bind(this.onOrientationChange,this));
e.$window.on("orientationchange",_.bind(this.onOrientationChange,this))
}else{this.animationStartBreakpoint-=200;
this.animationEndBreakpoint+=550
}d.subscribe("scroll",_.bind(this.onScroll,this));
this.updateEffectPosition();
d.subscribe("resize",_.bind(this.onResize,this))
},this))
},onResize:function(){if(a.is("desktop")){this.updateParallaxHeight()
}},onOrientationChange:function(f){this.updateParallaxHeight()
},onScroll:function(j,k){var l=k+this.animationStartBreakpoint;
var h=this.$el.offset().top<=l&&this.animationEndBreakpoint>=k;
if(h){var f=this.$el.offset().top-l;
var g=f-f%this.shiftCoeficient;
if(a.is("desktop")){if(this.msBrowser){this.$EnhancedAdBackgroundDom.css("bottom",Math.abs(f*this.imageScrollCoeficient)/2)
}else{this.$EnhancedAdBackgroundDom.css("bottom",f*this.imageScrollCoeficient)
}if(this.isLongerVersion){this.$EnhancedAdOverlayDom.css("top",g)
}else{this.$EnhancedAdOverlayDom.css("top",g*2)
}this.$EnhancedAdOverlayDom.css("background-image",'url("'+this.$EnhancedAdOverlayDom.background+'")')
}else{this.$EnhancedAdOverlayDom.css("top",g)
}}},CTAbuttonInit:function(h){var f=d("."+this.ViewTheVideoButtonSelector);
var g=f.data("basic-bgcolor");
f.css({"background-color":g})
},CTAbuttonHover:function(h){var f=d(h.currentTarget);
var g=f.data("basic-bgcolor");
if(!window.Modernizr.touch){if(h.type==="mouseenter"){f.css("background-color","")
}else{f.css({"background-color":g})
}}},updateParallaxHeight:function(f){window.setTimeout(_.bind(function(){if(!a.is("desktop")){var g=e.$window.height();
var h=550;
this.$el.height(h);
this.$EnhancedAdBackgroundRelativeWrapperDom.height(h);
this.$EnhancedAdBackgroundFixedWrapperDom.height(h);
if(a.is("mobile")){this.$el.height(g+100);
this.$EnhancedAdBackgroundRelativeWrapperDom.height(g+100);
if(this.isLongerVersion){this.$el.height(g*1.5+100);
this.$EnhancedAdBackgroundRelativeWrapperDom.height(g*1.5+100)
}this.$EnhancedAdBackgroundFixedWrapperDom.height(g+100)
}else{if(a.is("tablet")){this.$EnhancedAdBackgroundFixedWrapperDom.height(g)
}}this.updateEffectPosition()
}if(f){f()
}},this),500)
},updateEffectPosition:function(){var h=e.$window.scrollTop();
var j=h+e.$window.height()/2;
if(a.is("desktop")&&this.isLongerVersion){j=h-e.$window.height()/2
}var f=this.$el.offset().top-j;
var g=f-f%this.shiftCoeficient;
if(g>0){g=0
}else{if(g<this.$el.height()*-1){g=this.$el.height()*-1
}}this.$EnhancedAdOverlayDom.css("top",g*2);
if(a.is("desktop")){this.$EnhancedAdBackgroundDom.css("bottom",f*this.imageScrollCoeficient);
this.$EnhancedAdOverlayDom.css("top",g*2)
}else{this.$EnhancedAdOverlayDom.css("top",g)
}},onViewTheVideo:function(j){var h=this.$el.data("content-title");
var k=this.$el.data("content-external");
var f="main area";
if(this.$ViewTheVideoButton.is(j.target)){f="button"
}var g=window.s.prop4+":enhanced promo:"+f;
window.s.linkTrackVars="events,prop57,eVar57,prop58,eVar58,prop59,eVar59";
window.s.linkTrackEvents="event4";
window.s.prop57=g;
window.s.eVar57=g;
window.s.prop58=window.s.prop7;
window.s.eVar58=window.s.eVar7;
window.s.prop59=h;
window.s.eVar59=h;
window.s.events="event4";
window.s.tl(this,"o",h);
if(k){this.sendExitLink(h)
}},sendExitLink:function(f){window.s.linkTrackVars="prop19,eVar19,events";
window.s.linkTrackEvents="event14";
window.s.eVar19=f;
window.s.prop19=f;
window.s.events="event14";
window.s.tl(this,"e","exit to "+f)
}});
e.registerComponent("enhanced-ad",b)
})(jQuery,Backbone,App);
(function(d,c,e){var a=e.Devices;
var b=c.View.extend({ParallaxWrapperClass:"enhanced--hero__parallax__wrapper",ParallaxlayerClass:"enhanced--hero__parallax__layer",TransparentLayerClass:"enhanced--hero__parallax__layer__image.base.transparent",ImageLayerClass:"enhanced--hero__parallax__layer__image",ParallaxSceneId:"hero_parallax",TitleSpanClass:"enhanced--hero__title-span",events:{"click .scroll-snap":"onScrollSnapClicked"},initialize:function(){this.$parrallaxWrapperDom=this.$("."+this.ParallaxWrapperClass);
this.$ParallaxlayerDom=this.$("."+this.ParallaxlayerClass);
this.$TitleSpanDom=this.$("."+this.TitleSpanClass);
this.$ImageLayerDom=this.$("."+this.ImageLayerClass);
this.initialWidth=e.$window.width();
this.parallaxDisableBreakpoint=e.$window.height()*1.5;
this.parallaxDisabled=false;
this.disableOnMobile=this.$el.hasClass("no-mobile");
if(!e.$html.hasClass("ms-browser")){this.$ImageLayerDom.css("object-fit","cover");
this.$ImageLayerDom.css("object-position","top")
}this.$("."+this.TransparentLayerClass).css("opacity",0);
this.updateParallaxHeight();
if(!(this.disableOnMobile&&a.is("mobile"))){var f=document.getElementById(this.ParallaxSceneId);
this.parallaxInstance=new window.Parallax(f,{scalarY:0});
window.testParallaxInstance=this.parallaxInstance;
this.opacityHandler(this.TransparentLayerClass)
}if(e.$window.offset()){this.prevScrollTop=e.$window.offset().top
}this.updateScrollTarget();
this.truncate();
d.subscribe("scroll",_.bind(this.onScroll,this));
d.subscribe("resize",_.bind(this.onResize,this));
d.subscribe("apple-orientationchange",_.bind(this.updateParallaxHeight,this));
e.$window.on("orientationchange",_.bind(this.updateParallaxHeight,this))
},onScrollSnapClicked:function(f){this.updateScrollTarget();
d("body,html").animate({scrollTop:this.scrollTarget},"1000","swing");
this.scrolled=true
},opacityHandler:function(h){if(this.parallaxInstance){var f=0;
var g=+this.$("."+h).css("opacity");
window.addEventListener("deviceorientation",_.bind(function(l){if(!this.parallaxDisabled){var k=e.$window.width();
var j=e.$window.height();
if(k<j){f=window.Math.abs(this.parallaxInstance.iy+2)-window.Math.abs(this.parallaxInstance.cy+2)
}else{f=window.Math.abs(this.parallaxInstance.ix+1)-window.Math.abs(this.parallaxInstance.cx+1)
}if(f>0.5){f=0.5
}else{if(f<-0.5){f=-0.5
}}var m=this.$("."+h);
m.each(function(n){if(d(this).hasClass("negative")){d(this).css("opacity",g-f*2)
}else{d(this).css("opacity",g+f*2)
}})
}},this));
window.addEventListener("mousemove",_.bind(function(j){f=this.parallaxInstance.ix-this.parallaxInstance.cx;
var k=this.$("."+h);
k.each(function(l){var m=g;
if(d(this).hasClass("negative")){m=g-f
}else{m=g+f
}if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1){if(m>0.95){m=0.98;
d(this).closest("ul.enhanced--hero__parallax").find("li:first-child img").css("opacity",0)
}else{d(this).closest("ul.enhanced--hero__parallax").find("li:first-child img").css("opacity","")
}d(this).css("opacity",m)
}else{if(m>0.95){m=1
}d(this).css("opacity",m)
}})
},this))
}},truncate:function(){var f=300;
if(a.is("tablet")){f=250
}if(a.is("mobile")){f=200
}this.$TitleSpanDom.dotdotdot({height:f,ellipsis:"",after:d('<span class="enhanced--hero__title-caret scroll-snap icon-downcaret"></span>'),wrap:"letter",callback:_.bind(function(g,h){if(g){this.$TitleSpanDom.css("display","block");
setTimeout(_.bind(function(){this.$TitleSpanDom.css("display","inline")
},this),50)
}else{this.$TitleSpanDom.append(d('<span class="enhanced--hero__title-caret no-truncation scroll-snap icon-downcaret"></span>'));
this.$TitleSpanDom.css("display","block");
setTimeout(_.bind(function(){this.$TitleSpanDom.css("display","inline")
},this),50)
}},this)})
},onResize:function(){if(this.parallaxInstance){this.parallaxInstance.calibrate(true,true)
}if(this.initialWidth!==e.$window.width()){this.truncate();
this.initialWidth=e.$window.width()
}if(a.is("desktop")){this.updateParallaxHeight()
}},onScroll:function(g,j){var h=j>this.parallaxDisableBreakpoint;
var f=!this.disableOnMobile;
if(j>this.scrollTarget){this.scrolled=true
}else{if(j===0){this.scrolled=false
}}if(f&&h){this.parallaxInstance.disable();
this.parallaxDisabled=true
}else{this.parallaxInstance.enable();
this.parallaxDisabled=false
}if(h){this.$el.css("visibility","hidden")
}else{this.$el.css("visibility","")
}},snapScroll:function(f){var g=0;
if(!f){this.updateScrollTarget();
g=this.scrollTarget
}d("body,html").animate({scrollTop:g},"1000","swing");
this.scrolled=!f
},updateScrollTarget:function(){this.scrollTarget=this.$el.height()+this.$el.offset().top-50
},updateParallaxHeight:function(){window.setTimeout(_.bind(function(){this.initialParallaxHeight=e.$window.height();
this.$el.height(this.initialParallaxHeight);
this.$ParallaxlayerDom.height(this.initialParallaxHeight+90);
this.$parrallaxWrapperDom.parent().css("height",e.$window.height());
this.$parrallaxWrapperDom.css("height",e.$window.height()+90)
},this),500)
}});
e.registerComponent("enhanced--hero-full",b)
})(jQuery,Backbone,App);
(function(d,c,e){var a=e.Devices;
var b=c.View.extend({ParallaxWrapperClass:"enhanced--hero__parallax__wrapper",ParallaxClass:"enhanced--hero__parallax",ParallaxlayerClass:"enhanced--hero__parallax__layer",TransparentLayerClass:"enhanced--hero__parallax__layer__image.base.transparent",ImageLayerClass:"enhanced--hero__parallax__layer__image",ParallaxSceneId:"hero_parallax_lite",TitleSpanClass:"enhanced--hero__title-span",events:{"click .scroll-snap":"onScrollSnapClicked"},initialize:function(){this.$parrallaxWrapperDom=this.$("."+this.ParallaxWrapperClass);
this.$parrallaxDom=this.$("."+this.ParallaxClass);
this.$ParallaxlayerDom=this.$("."+this.ParallaxlayerClass);
this.$TitleSpanDom=this.$("."+this.TitleSpanClass);
this.$ImageLayerDom=this.$("."+this.ImageLayerClass);
this.disableOnMobile=this.$el.hasClass("no-mobile");
if(!e.$html.hasClass("ms-browser")){this.$ImageLayerDom.css("object-fit","cover");
this.$ImageLayerDom.css("object-position","top")
}if(!(this.disableOnMobile&&a.is("mobile"))){var f=document.getElementById(this.ParallaxSceneId);
this.parallaxInstance=new window.Parallax(f,{scalarY:0});
this.opacityHandler(this.TransparentLayerClass)
}this.initialWidth=e.$window.width();
this.updateParallaxHeight();
this.truncate();
this.skrollrInstance=window.skrollr.init({mobileCheck:function(){return false
},forceHeight:false});
if(e.$window.offset()){this.prevScrollTop=e.$window.offset().top
}this.updateScrollTarget();
d.subscribe("apple-orientationchange",_.bind(this.updateParallaxHeight,this));
d.subscribe("resize",_.bind(this.onResize,this));
e.$window.on("orientationchange",_.bind(this.updateParallaxHeight,this))
},onResize:function(){if(this.initialWidth!==e.$window.width()){this.truncate();
this.initialWidth=e.$window.width()
}if(a.is("desktop")){this.updateParallaxHeight();
this.skrollrInstance.refresh()
}},truncate:function(){var f=300;
if(a.is("tablet")){f=250
}if(a.is("mobile")){f=200
}this.$TitleSpanDom.dotdotdot({height:f,ellipsis:"",after:d('<span class="enhanced--hero__title-caret scroll-snap icon-downcaret"></span>'),wrap:"word",callback:_.bind(function(g,h){if(g){this.$TitleSpanDom.css("display","block");
setTimeout(_.bind(function(){this.$TitleSpanDom.css("display","inline")
},this),100)
}else{this.$TitleSpanDom.append(d('<span class="enhanced--hero__title-caret scroll-snap icon-downcaret"></span>'));
this.$TitleSpanDom.css("display","block");
setTimeout(_.bind(function(){this.$TitleSpanDom.css("display","inline")
},this),100)
}},this)})
},onScrollSnapClicked:function(f){this.updateScrollTarget();
d("body,html").animate({scrollTop:this.scrollTarget},"1000","swing")
},opacityHandler:function(h){if(this.parallaxInstance){var f=0;
var g=+this.$("."+h).css("opacity");
window.addEventListener("deviceorientation",_.bind(function(l){if(!this.parallaxDisabled){var k=e.$window.width();
var j=e.$window.height();
if(k<j){f=window.Math.abs(this.parallaxInstance.iy+2)-window.Math.abs(this.parallaxInstance.cy+2)
}else{f=window.Math.abs(this.parallaxInstance.ix+1)-window.Math.abs(this.parallaxInstance.cx+1)
}if(f>0.5){f=0.5
}else{if(f<-0.5){f=-0.5
}}var m=this.$("."+h);
m.each(function(n){if(d(this).hasClass("negative")){d(this).css("opacity",g-f*2)
}else{d(this).css("opacity",g+f*2)
}})
}},this));
window.addEventListener("mousemove",_.bind(function(j){f=this.parallaxInstance.ix-this.parallaxInstance.cx;
var k=this.$("."+h);
k.each(function(l){var m=g;
if(d(this).hasClass("negative")){m=g-f
}else{m=g+f
}if(m>0.9){m=0.9
}d(this).css("opacity",m)
})
},this))
}},snapScroll:function(f){var g=0;
if(!f){this.updateScrollTarget();
g=this.scrollTarget
}d("body,html").animate({scrollTop:g},"1000","swing");
this.scrolled=!f
},updateScrollTarget:function(){this.scrollTarget=this.$el.height()+this.$el.offset().top-50
},updateParallaxHeight:function(){window.setTimeout(_.bind(function(){var f=120;
if(a.is("mobile")){this.initialParallaxHeight=e.$window.height()-f;
this.$el.height(this.initialParallaxHeight);
this.$ParallaxlayerDom.height(this.initialParallaxHeight);
this.$parrallaxWrapperDom.parent().css("height",this.initialParallaxHeight);
this.$parrallaxWrapperDom.css("height",this.initialParallaxHeight)
}else{this.initialParallaxHeight=e.$window.height()-f;
this.$el.height(this.initialParallaxHeight-50);
this.$ParallaxlayerDom.height(this.initialParallaxHeight+50);
this.$parrallaxWrapperDom.parent().css("height",this.initialParallaxHeight+50);
this.$parrallaxWrapperDom.css("height",this.initialParallaxHeight+50)
}},this),500)
}});
e.registerComponent("enhanced--hero-lite",b)
})(jQuery,Backbone,App);
(function(c,b,d){var a=d.Devices;
var e=b.View.extend({TitleSpanClass:"enhanced--hero__title-span",events:{"click .scroll-snap":"onScrollSnapClicked"},initialize:function(){var g=/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile/.test(navigator.userAgent);
var f=(g&&matchMedia("(orientation: portrait) and (max-width: 504px), (orientation: landscape) and (max-width: 768px)").matches);
var h=(f?"mobile":"nonMobile");
if(g){this.$el.addClass("asset_loopingVideo--nonDesktop")
}this.$el.addClass("asset_loopingVideo--"+h);
this.$TitleSpanDom=this.$("."+this.TitleSpanClass);
this.disableOnMobile=this.$el.hasClass("no-mobile");
this.initialWidth=d.$window.width();
this.truncate();
c.subscribe("resize",_.bind(this.onResize,this))
},onScrollSnapClicked:function(){var g=this.el.getBoundingClientRect().bottom;
var f=document.body.scrollTop;
c("body,html").animate({scrollTop:f+g-50},"1000","swing")
},onResize:function(){if(this.initialWidth===d.$window.width()){return
}this.truncate();
this.initialWidth=d.$window.width()
},truncate:function(){var f=300;
if(a.is("tablet")){f=250
}if(a.is("mobile")){f=200
}this.$TitleSpanDom.dotdotdot({height:f,ellipsis:"",after:c('<span class="enhanced--hero__title-caret scroll-snap icon-downcaret"></span>'),wrap:"word",callback:_.bind(function(g){if(g){this.$TitleSpanDom.css("display","block");
setTimeout(_.bind(function(){this.$TitleSpanDom.css("display","inline")
},this),100)
}else{this.$TitleSpanDom.append(c('<span class="enhanced--hero__title-caret scroll-snap icon-downcaret"></span>'));
this.$TitleSpanDom.css("display","block");
setTimeout(_.bind(function(){this.$TitleSpanDom.css("display","inline")
},this),100)
}},this)})
}});
d.registerComponent("asset_loopingVideo",e)
})(jQuery,Backbone,App);
(function(d,c,e){var a=e.Devices2;
var b=c.View.extend({EnhancedLayeredCTABackgroundRelativeSelector:"enhanced-layered-cta__bckg__relative-wrapper",EnhancedLayeredCTABackgroundFixedSelector:"enhanced-layered-cta__bckg__fixed-wrapper",EnhancedLayeredCTALiteClass:"enhanced-layered-cta--lite",ElementHeightTablet:550,FixedMobileClass:"fixed-mobile",events:{"click a.enhanced-parallax__link-wrapper":"onImageClick"},initialize:function(){var f=this;
this.$EnhancedLayeredCTABackgroundRelativeDom=this.$("."+this.EnhancedLayeredCTABackgroundRelativeSelector);
this.$EnhancedLayeredCTABackgroundFixedDom=this.$("."+this.EnhancedLayeredCTABackgroundFixedSelector);
this.initialScreenHeight=e.$window.height();
this.$el=d(".enhanced-layered-cta");
try{var g=d(this.$el.parents(1,".page__full-width")[1].nextElementSibling.firstElementChild);
if(g.outerHeight()!=0&&g.hasClass("enhanced-dark-content")){var k=g.css("background-color");
this.$el.css("background-color",k)
}}catch(j){}this.updateParallaxHeight();
d.subscribe("enhancedLoader:complete",_.bind(function(){this.updateParallaxHeight()
},this));
d.subscribe("resize",_.bind(this.onResize,this));
document.onreadystatechange=function(){if(!document.readyState||document.readyState!=="complete"){return
}f.initializeParallax()
};
if(e.$html.hasClass("apple-touch")&&this.$el.hasClass(this.EnhancedLayeredCTALiteClass)){this.$EnhancedLayeredCTABackgroundFixedDom.addClass("non-fixed");
d.subscribe("scroll",_.bind(this.onAppleScroll,this))
}if(a.is("mobile")||a.is("tablet")){d.subscribe("apple-orientationchange",_.bind(this.onOrientationChange,this));
e.$window.on("orientationchange",_.bind(this.onOrientationChange,this))
}if(e.$html.hasClass("ms-browser")){var h=this.$el.height();
this.$el.height(h-20)
}},onAppleScroll:function(f,g){if(g>this.initialScreenHeight){this.$EnhancedLayeredCTABackgroundFixedDom.removeClass("non-fixed")
}else{this.$EnhancedLayeredCTABackgroundFixedDom.addClass("non-fixed")
}},initializeParallax:function(){this.skrollrInstance=window.skrollr.init({mobileCheck:function(){return false
},forceHeight:false});
this.skrollrInstance.refresh()
},onResize:function(){this.updateParallaxHeight()
},onOrientationChange:function(){this.updateParallaxHeight()
},updateParallaxHeight:function(){window.setTimeout(_.bind(function(){var f=e.$window.height()+100;
var j=this.ElementHeightTablet;
var g=this.$el.find(".enhanced-layered-cta__bckg"),k=this.$el.find(".enhanced-layered-cta__bckg > source"),h=k.eq(0).attr("srcset");
if(!a.is("desktop")){this.$el.height(j);
this.$EnhancedLayeredCTABackgroundRelativeDom.height(j);
this.$EnhancedLayeredCTABackgroundFixedDom.height(f)
}if(a.is("mobile")){this.$el.height(f);
this.$EnhancedLayeredCTABackgroundRelativeDom.height(f);
this.$EnhancedLayeredCTABackgroundFixedDom.height(f);
if(e.$html.hasClass("ms-browser")){g.css({"background-image":"url("+h+")"}).addClass("hide-img")
}}else{if(e.$html.hasClass("ms-browser")){g.css({"background-image":""}).removeClass("hide-img")
}}this.initializeParallax()
},this),500)
},onImageClick:function(h){var g=this.$el.data("content-title");
var j=this.$el.data("content-external");
var f=window.s.prop4+":enhanced parallax promo";
window.s.linkTrackVars="events,prop57,eVar57,prop58,eVar58,prop59,eVar59";
window.s.linkTrackEvents="event4";
window.s.prop57=f;
window.s.eVar57=f;
window.s.prop58=window.s.prop7;
window.s.eVar58=window.s.eVar7;
window.s.prop59=g;
window.s.eVar59=g;
window.s.events="event4";
window.s.tl(this,"o",g);
if(j){this.sendExitLink(g)
}},sendExitLink:function(f){window.s.linkTrackVars="prop19,eVar19,events";
window.s.linkTrackEvents="event14";
window.s.eVar19=f;
window.s.prop19=f;
window.s.events="event14";
window.s.tl(this,"e","exit to "+f)
}});
e.registerComponent("enhanced-layered-cta",b)
})(jQuery,Backbone,App);
function showClipsContainerIfEpisodeContainersIsEmpty(){var a=$(".automate-episode-list").map(function(b,c){return !$(c).html().trim()
});
if($.inArray(false,a)==-1){$.get(window.location.pathname.replace(".html","/jcr:content/mainColUp/listcontainer.clipSearch.html")).success(function(b){$(".automate-episode-list").first().prepend($(b))
})
}}(function(b,a,c){var d=a.View.extend({initialize:function(){this.$title=this.$(".featured__title");
this.truncate();
b.subscribe("resize",_.bind(this.truncate,this))
},truncate:function(){this.$title.dotdotdot({ellipsis:"..."})
}});
c.registerComponent("featured",d)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({contentClassName:"feed__cnt",linkClassName:"feed__link",titleClassName:"feed__title",imgClassName:"feed__thumb img",gradientStateClassName:"feed_show_gradient",socialShareClassName:"feed__social",socialShareActiveClassName:"active",socialListClassName:"feed__social__list",socialLinkClassName:"feed__social__item",bottomClassName:"feed__bottom",$socialShare:null,cantFollowNetworks:["whatsapp","email"],cantShareOnNetworks:["instagram","youtube"],isVideoList:false,initialize:function(){this.$content=this.$("."+this.contentClassName);
this.$link=this.$("."+this.linkClassName);
this.$title=this.$("."+this.titleClassName);
this.$img=this.$("."+this.imgClassName);
this.$bottom=this.$("."+this.bottomClassName);
this.isVideoList=this.$el.closest(".grid-container--video-list").length>0;
this.$socialShare=this.$("."+this.socialShareClassName);
c.subscribe("resize",_.bind(this.onResize,this));
c.subscribe("window:click",_.bind(this.onWindowClick,this));
this.onResize(null);
this.initializeSocialLinks()
},initializeSocialLinks:function(f){var e=this;
if(this.$("."+this.socialListClassName).data("follow")){c.each(e.cantFollowNetworks,function(g,h){e.$(".icon-"+h).remove()
})
}else{c.each(e.cantShareOnNetworks,function(g,h){e.$(".icon-"+h).remove()
});
d.InitSocialLinks(e.$("."+this.socialLinkClassName),e.$title.text(),e.$link.attr("href"),f,this.$img.attr("srcset"))
}},updateGradient:function(){var f=this.$content.outerHeight(true);
var e=this.$link.outerHeight(true);
if(f>e/2){this.$el.addClass(this.gradientStateClassName)
}else{this.$el.removeClass(this.gradientStateClassName)
}},truncateText:function(){this.$content.trigger("destroy.dot");
if(!d.Devices.is("mobile")){var f=this.$content.outerHeight(true);
var e=this.$link.outerHeight(true);
var g=this.$bottom.outerHeight(true);
var h=e-g;
if(h<f){this.$content.dotdotdot({height:h})
}}else{this.updateGradient()
}},onWindowClick:function(h,g){var f=c(g.target);
if((this.$socialShare.is(f)||f.closest(this.$socialShare).length>0)){if(this.$socialShare.hasClass(this.socialShareActiveClassName)){this.closeShare()
}else{this.$socialShare.addClass(this.socialShareActiveClassName)
}}else{this.closeShare()
}},closeShare:function(){this.$socialShare.removeClass(this.socialShareActiveClassName)
},onResize:function(){if(this.isVideoList){this.truncateText()
}else{this.updateGradient()
}}});
d.registerComponent("feed",a)
})(jQuery,Backbone,App);
(function(b,a,d){var c=a.View.extend({OPEN_BUTTON_CLASS:"feed-container__button--open",OPEN_LOADER_CLASS:"feed-container__loader--open",FOOTER_CLASS:"footer",FEED_LOAD_STOP:6,$loader:null,_currentPage:0,_endpoint:null,_pageSize:10,_loadMoreItems:false,_inProgress:false,_isVisible:false,_stopLoading:false,events:{"click .feed-container__feed":"onItemClicked","click .feed-container__button":"_loadMore"},initialize:function(){this._endpoint=this.$el.data("endpoint")||this._endpoint;
this._pageSize=this.$el.data("pagesSize")||this._pageSize;
this._loadMoreItems=this.$el.data("load-more")!==undefined;
var e=this.$el.data("startPage");
this._currentPage=e?e-1:this._currentPage;
this.FEED_LOAD_STOP=this.$el.data("feedLoadRepeat")||this.FEED_LOAD_STOP;
this.$loader=this.$(".feed-container__loader");
this.$container=this.$(".feed-container__blocks");
this.$loadMoreButton=this.$(".feed-container__button");
this.$window=b(window);
this._initLoadMore();
this._initFooter(false)
},_isOneColumn:function(){var e=false;
if(b(window).width()<672){e=true
}return e
},_addMoreAds:function(e){if(this._isOneColumn()){if(this.$(".feed-container__blocks").length>0){d.DynamicAdDelegator.drive(this.$(".feed-container__blocks:eq("+e+") .feed-container__feed:eq(2)"),[300,250],2);
d.DynamicAdDelegator.drive(this.$(".feed-container__blocks:eq("+e+") .feed-container__feed:eq(5)"),[300,250],1)
}}},_initFooter:function(g){var f="hidden";
var e=b(this.FOOTER_CLASS);
if(g){if(e.hasClass(f)){e.removeClass(f)
}}else{if(!e.hasClass(f)){e.addClass("hidden")
}}},_initLoadMore:function(){var e=this;
e.$loader.addClass(e.OPEN_LOADER_CLASS);
e.$loadMoreButton.removeClass(e.OPEN_BUTTON_CLASS);
e.$loader.waypoint(function(g){var f=e._currentPage;
e._isVisible=g==="down";
if(f==0&&e._isVisible){e._loadMore()
}else{if(e._isVisible&&(f!==0&&(f%e.FEED_LOAD_STOP>0&&e._loadMoreItems))){e._loadMore()
}else{if(f%e.FEED_LOAD_STOP==0){e.$loader.removeClass(e.OPEN_LOADER_CLASS);
if(e._loadMoreItems){e.$loadMoreButton.addClass(e.OPEN_BUTTON_CLASS)
}}}}},{offset:"100%"})
},_loadMore:function(){if(!this._inProgress&&!this._stopLoading){this._inProgress=true;
var e=this,g=++e._currentPage,f=e._pageSize,k=this._getRequestParameter("q"),j={};
if(k){j.q=k
}e._initFooter(false);
e.$loader.addClass(e.OPEN_LOADER_CLASS);
e.$loadMoreButton.removeClass(e.OPEN_BUTTON_CLASS);
var h="?testmode="+b("#testmodeParam").val();
b.ajax({method:"GET",url:e._endpoint+".pageNumber-"+g+".pageSize-"+f+".html"+h,data:j,dataType:"html"}).done(b.proxy(e._insertFeeds,e))
}},_getRequestParameter:function(e){if(e=(new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)")).exec(location.search)){return decodeURIComponent(e[1])
}},_insertFeeds:function(h){var f=this;
if(h&&h.trim()&&this._isValidResponse(h)){if(this._currentPage>1){this.sendEvent(this._currentPage,"event8")
}var g=new RegExp("{{position}}","g");
h=h.replace(g,window.Date.now());
var e=b(h).find(".feed-container__blocks");
this._loadMoreItems=e.data("load-more")!==undefined;
e.hide();
e.insertBefore(this.$loader);
window.picturefill();
this._addMoreAds(this._currentPage-1);
e.fadeIn(400,"swing",function(){d.bindComponent("feed");
d.bindComponent("sticky-box");
d.bindComponent("subscribe");
window.Waypoint.refreshAll();
f._inProgress=false;
if(f.isOnScreen(f.$loader)&&(f._currentPage%f.FEED_LOAD_STOP)>0){f._loadMore()
}else{if(f._currentPage%f.FEED_LOAD_STOP==0&&f._loadMoreItems){f._initFooter(true);
f.$loader.removeClass(f.OPEN_LOADER_CLASS);
f.$loadMoreButton.addClass(f.OPEN_BUTTON_CLASS)
}}if(f._loadMoreItems==false){f.$loadMoreButton.remove();
f.$loader.remove();
f._initFooter(true)
}});
d.lazyAdHelpers.viewabilityCheck()
}else{this._inProgress=false;
this._stopLoading=true;
f.$loader.removeClass(f.OPEN_LOADER_CLASS);
f.$loader.remove();
f.$loadMoreButton.removeClass(f.OPEN_BUTTON_CLASS);
f.$loadMoreButton.remove();
f._initFooter(true)
}},_isValidResponse:function(f){var e=".searchresults-container",g=b(f).find(e).andSelf().filter(e);
if(g.length){return g.find(".feed-container__feed").length>0
}return true
},sendEvent:function(f,e){window.s.linkTrackVars="events,prop52,eVar52";
window.s.linkTrackEvents=e;
window.s.prop52=f;
window.s.eVar52=f;
window.s.events=e;
window.s.tl(this,"o",f)
},getRequestParameterWithReplacedPlus:function(e){if(e=(new RegExp("[?&]"+encodeURIComponent(e)+"=([^&]*)")).exec(location.search)){return decodeURIComponent(e[1].replace(/\+/g," "))
}},sendSearchEvent:function(){var e=decodeURIComponent(this.getRequestParameterWithReplacedPlus("q"));
window.s.linkTrackVars="events,prop15,eVar15";
window.s.linkTrackEvents="event21";
window.s.prop15=e;
window.s.eVar15=e;
window.s.events="event21";
window.s.tl(this,"o",e)
},onItemClicked:function(h){var f=b(h.target);
var j=(!f.hasClass("feed__social")&&f.closest(".feed__social").length===0);
var g=(f.closest("article").length===1&&f.closest("article").data("ignore-page-omniture"));
if(j&&!g){this.sendEvent(this._currentPage,"event9")
}else{if(j&&g){this.sendSearchEvent()
}}},isOnScreen:function(f){var e={};
e.top=this.$window.scrollTop();
e.bottom=e.top+this.$window.height();
var g={};
g.top=f.offset().top;
g.bottom=g.top+f.outerHeight();
return((g.top<=e.bottom)&&(g.bottom>=e.top))
}});
d.registerComponent("feed-container",c)
})(jQuery,Backbone,App);
(function(c,b){b.FeedContainerHelper={};
b.FeedContainerHelper.shareThrough={};
b.FeedContainerHelper.shareThrough.handleEmpty=function(d){var a=c(d);
a.addClass("empty");
a.closest(".feed-container__main").find(".sharethrough-ad").each(function(){if(!(c(this).hasClass("hide"))){c(this).addClass("hide")
}})
};
b.FeedContainerHelper.shareThrough.doubleCheckEmptiness=function(a){if(a.style.display.indexOf("none")!=-1){b.FeedContainerHelper.shareThrough.handleEmpty(a.parentNode)
}}
})(jQuery,App);
(function(d,c,e){var a=c.Router.extend({routes:{"!:image":"loadGallery","":"exitGallery","!":"exitGallery","!/":"exitGallery"}});
var b=c.View.extend({PAUSE_TIME:8000,REFRESH_ADS:5000,EXIT_TIMEOUT:0,SLIDE_SPEED:300,CAPTION_CLASS:"caption-opened",OMNITURE:{CLOSE:"event34",PAUSE:"event32",PLAY:"event33"},isTouch:false,startSlide:0,$aside:null,$slider:null,$sliderWrapper:null,$infoSlider:null,$infoSliderWrapper:null,$readMore:null,$listItem:null,$currentSlide:null,$playPause:null,$gallery:null,$nextButton:null,$previousButton:null,$header:null,$progress:null,$progressRunner:null,$image:null,$info:null,$infoListItem:null,$infoListItemWrapper:null,$infoAds:null,$body:null,$html:null,$socialModule:null,$heroContent:null,$galleryThumbnails:null,$galleryTitle:null,isWorking:false,isFullScreen:false,sliderStopped:false,sliderCaptionStopped:false,buttonClicked:false,nextGalleryRequestLock:false,slideStartTime:0,slideRemainingTime:0,originalCaptionHeight:0,scrollbarWidth:0,navigationMap:{},isRightDirection:true,isImageLoadTriggered:false,events:{"click .gallery-detail__previous":"onPreviousClick","click .gallery-detail__next":"onNextClick","click .gallery-detail__play-pause":"onPlayPauseClick","click .gallery-detail__info":"onCaptionClick","click .gallery-detail__exit":"onExitClick","click .gallery-detail__sponsored":"onSponsorClicked","social:sharing .social-share__item__link":"onShareClicked"},initialize:function(){var f=this;
this.isTouch=window.Modernizr.touch;
this.$sliderWrapper=this.$(".gallery-detail__slider");
this.$listItem=this.$(".gallery-detail__list-item");
this.$infoSliderWrapper=this.$(".gallery-detail__info__list");
this.$readMore=this.$(".gallery-detail__read-more");
this.$nextButton=this.$(".gallery-detail__next");
this.$previousButton=this.$(".gallery-detail__previous");
this.$playPause=this.$(".gallery-detail__play-pause");
this.$gallery=this.$(".gallery-detail__gallery");
this.$aside=this.$(".gallery-detail__aside");
this.$header=this.$(".gallery-detail__header");
this.$progress=this.$(".gallery-detail__progress");
this.$progressRunner=this.$(".gallery-detail__progress__runner");
this.$info=this.$(".gallery-detail__info");
this.$infoListItem=this.$(".gallery-detail__info__list-item");
this.$closeButton=this.$(".gallery-detail__exit");
this.$infoListItemWrapper=this.$(".gallery-detail__info__list-item__wrapper");
this.$infoAds=this.$(".gallery-detail__content__ads");
this.$galleryTitle=this.$(".gallery-detail__title");
this.$body=d("body");
this.$html=d("html");
this.$socialModule=this.$header.find(".social-share");
this.startSlide=0;
if(typeof ad_slots==="undefined"||ad_slots===null){this.pageAds=[]
}else{this.pageAds=ad_slots
}this.nextGalleryAjaxLoader;
this.throttleAds=false;
this.throttleTimer=null;
this.initAdTestTimer=null;
this.scrollbarWidth=this.measureScrollbar();
this.nextGalleryLink=this.$el.data("next-gallery");
this.previousGalleryLink=this.$el.data("previous-gallery");
this.createNavigationMap();
this.initRouter();
this.adThrottler();
this.initAdRequests();
this.addFinalSwipeHandling();
this.addTreatSwipeLikeClick();
d.subscribe("visibility",_.bind(this.onVisibilityToggle,this));
d(window).resize(function(){f.onResize()
})
},addTreatSwipeLikeClick:function(){var f=this;
d.subscribe("gallery:properswipe",function(){f.buttonClicked=true
})
},addFinalSwipeHandling:function(){var f=this;
d.subscribe("gallery:extraswipe",function(){var g=f.$('.gallery-detail__info__list-item[aria-hidden="false"] .gallery-detail__counter').html().split("/");
if(parseInt(g[0])==parseInt(g[1])){f.$(".gallery-detail__next").trigger("click")
}})
},initAdRequests:function(){var f=this;
this.initAdTestTimer=setTimeout(function(){if(f.$(".gallery-detail__top-ads").find(".ads > div").children().length==1){clearTimeout(f.throttleTimer);
f.throttleAds=false;
f.refreshAds()
}},500)
},onResize:function(){this.reloadDots();
var f=this.$galleryTitle;
if(!e.Devices.is("desktop")){this.$readMore.removeAttr("style")
}if(window.innerWidth<=995){this.galleryTitleDots(f)
}else{f.trigger("destroy")
}if(this.$slider!==null&&!this.isFullScreen){this.$infoSlider.resizeSlider()
}},sliderConfiguration:function(){return{pager:false,controls:false,auto:false,infiniteLoop:false,fireEndStartEvents:true,pause:this.PAUSE_TIME,startSlide:this.startSlide,speed:this.SLIDE_SPEED,onSliderLoad:_.bind(this.onSliderLoad,this),onSlideBefore:_.bind(this.onSlideBefore,this),onSlideAfter:_.bind(this.onSlideAfter,this),onSlideEnd:_.bind(this.onSlideEnd,this)}
},adThrottler:function(){var f=this;
if(!this.throttleAds){this.throttleAds=true;
this.throttleTimer=setTimeout(function(){f.throttleAds=false
},this.REFRESH_ADS)
}},infoConfiguration:function(){return{pager:false,controls:false,auto:false,infiniteLoop:false,adaptiveHeight:true,touchEnabled:false,responsive:false,startSlide:this.startSlide,onSlideBefore:_.bind(this.onInfoSlideBefore,this),onSlideAfter:_.bind(this.onInfoSlideAfter,this)}
},initSlider:function(){var f=this;
var g=f.$galleryTitle;
setTimeout(function(){if(e.Devices.is("desktop")){f.initReadMore()
}if(e.Devices.is("mobile")||window.innerWidth<=995){f.galleryTitleDots(g)
}f.$slider=f.$sliderWrapper.bxSlider(f.sliderConfiguration());
f.$infoSlider=f.$infoSliderWrapper.bxSlider(f.infoConfiguration());
f.$slider.on("slider:next",_.bind(f.onNextClick,f));
f.$slider.on("slider:previous",_.bind(f.onPreviousClick,f));
f.updateControls();
f.sendPageEvent(false);
f.updateShare()
},600)
},initReadMore:function(){var j=this.$aside.height();
var h=this.$header.height();
var g=350;
this.$infoListItemWrapper.css("max-height",j-h-g);
var f=this;
this.$readMore.off("click");
this.$readMore.on("click",_.bind(this.onReadMoreClick,this));
setTimeout(function(){f.initDots(f.$infoListItemWrapper)
},0)
},reloadDots:function(){this.destroyDots(this.$infoListItemWrapper);
this.$infoListItemWrapper.css("max-height","");
this.$infoListItemWrapper.removeClass("is-truncated");
if(e.Devices.is("desktop")){this.initReadMore()
}},destroyDots:function(f){f.trigger("destroy")
},initDots:function(g){var f=this;
g.dotdotdot({watch:"window",callback:function(h,k){var j=d(this).siblings(".gallery-detail__read-more");
if(h){j.show()
}else{j.hide()
}f.$info.addClass("gallery-detail__info--visible-desc")
}});
this.$infoAds.fadeIn()
},galleryTitleDots:function(g){var f=this;
g.dotdotdot({watch:"window",ellipsis:"...",wrap:"word",height:60,fallbackToLetter:true,callback:function(h,k){var j=d(this).siblings(".gallery-detail__read-more");
if(h){j.show()
}else{j.hide()
}f.$info.addClass("gallery-detail__info--visible-desc")
}});
this.$infoAds.fadeIn()
},refreshAds:function(){if(!this.throttleAds){var g=[];
d(".gallery-detail").find(".ads").each(function(){g.push(d(this).children("div").attr("id"))
});
if(d(window).width()<996){g=g.slice(0,1)
}else{}var f=0;
while(f<g.length){d("body").lazyAdDistributer().each(function(){this.loadAdById(g[f])
});
f++
}this.adThrottler()
}else{}},createNavigationMap:function(){var f=this;
f.navigationMap={};
this.$listItem.each(function(g){var h=d(this);
f.navigationMap[h.attr("data-image-id")]=g
})
},onReadMoreClick:function(f){f.preventDefault();
var g=d(f.currentTarget);
this.destroyDots(g.siblings(".gallery-detail__info__list-item__wrapper"));
g.hide();
this.$infoAds.hide()
},onSliderLoad:function(f){this.$gallery.animate({opacity:1},400);
if(!this.$el.hasClass("manually-paused")){this.startProgress()
}else{this.stopProgress()
}},onSlideBefore:function(k,j,g){this.isWorking=true;
if(!this.sliderStopped){this.resetProgress();
this.startProgress()
}if(this.$el.hasClass(this.CAPTION_CLASS)){this.$info.trigger("click")
}if(this.isFullScreen){var f=this.$listItem.eq(j);
var h=f.find(".gallery-detail__image");
h.trigger("click")
}this.refreshAds()
},onSlideEnd:function(g,f){if(f){this.$slider.triggerHandler("slider:next")
}else{this.$slider.triggerHandler("slider:previous")
}},onInfoSlideBefore:function(l,k,g){if(e.Devices.is("desktop")){var f=this.$infoListItem.eq(k);
var j=f.find(".gallery-detail__info__list-item__wrapper");
var h=f.find(".gallery-detail__read-more");
if(j.hasClass("is-truncated")&&!h.is(":visible")){j.removeClass("is-truncated");
this.initDots(j)
}}},onInfoSlideAfter:function(h,g,f){},onSlideAfter:function(k,j,f){this.sendPageEvent(!this.buttonClicked);
var g=this.$slider.getCurrentSlideElement();
var h=g.data("image-id");
window.location.hash="!"+h;
this.startSlide=this.navigationMap[h];
this.loadAsyncImages();
this.isImageLoadTriggered=true;
this.updateControls();
this.$infoSlider.goToSlide(f);
this.isWorking=false;
this.updateShare();
this.buttonClicked=false
},onPreviousClick:function(g){if(!!g){g.preventDefault();
if(g.type==="click"){this.buttonClicked=true
}}if(!this.isWorking){var f=this.getSlideImageId("previous");
if(f!==null){window.location.hash="!"+f
}else{if(this.previousGalleryLink){this.isRightDirection=false;
this.loadContentForNextGalleryPage(this.previousGalleryLink)
}}}},onNextClick:function(g){if(!!g){g.preventDefault();
if(g.type==="click"){this.buttonClicked=true
}}if(!this.isWorking){var f=this.getSlideImageId("next");
if(f!==null){window.location.hash="!"+f
}else{if(this.nextGalleryLink){this.isRightDirection=true;
this.loadContentForNextGalleryPage(this.nextGalleryLink)
}}}},loadContentForNextGalleryPage:function(g){var f=this;
if(!this.nextGalleryRequestLock){this.$closeButton.addClass("init-loader");
this.nextGalleryRequestLock=true;
this.nextGalleryAjaxLoader=d.ajax({method:"GET",url:g,dataType:"html"}).done(d.proxy(f.bindGalleryPageContent,f))
}},bindGalleryPageContent:function(m){var j=m.indexOf("<title>")+7;
var h=m.indexOf("</title>");
var n=m.substring(j,h);
this.$heroContent=d(m).find(".hero");
this.$galleryThumbnails=d(m).find(".page__body");
var g=d(m).find(".gallery-list");
var l="?testmode="+d("#testmodeParam").val();
var k=g.attr("data-gallery-url")+l;
var f=this;
document.title=n;
d.ajax({method:"GET",url:k,dataType:"html"}).done(d.proxy(f.insertGalleryModule,f))
},insertGalleryModule:function(l){this.exitGallery(true);
var h=this.nextGalleryLink;
if(this.isRightDirection===false){h=this.previousGalleryLink
}history.pushState("data","",h);
var j=new RegExp("{{position}}","g");
l=l.replace(j,window.Date.now());
var g=d(l);
var k=g.find(".gallery-detail");
d("body").append(k);
setTimeout(function(){e.bindComponent("gallery-detail");
e.bindComponent("social-share")
},0);
var f=this;
setTimeout(function(){d(".hero").replaceWith(f.$heroContent);
d(".page__body").replaceWith(f.$galleryThumbnails);
e.bindComponent("comments");
f.$closeButton.removeClass("init-loader");
f.nextGalleryRequestLock=false
},500)
},onImageClick:function(f){if(e.Devices.is("mobile")||e.Devices.is("tablet")){if(this.isFullScreen){this.isFullScreen=false;
this.$aside.fadeIn();
this.$nextButton.fadeIn();
this.$previousButton.fadeIn()
}else{this.isFullScreen=true;
this.$aside.fadeOut();
this.$nextButton.fadeOut();
this.$previousButton.fadeOut()
}}},onCaptionClick:function(k){if(e.Devices.is("mobile")||e.Devices.is("tablet")){var l=this.$info.outerHeight()-this.$info.height();
if(!this.$info.data("height")){this.$info.data("height",this.$info.height()+l)
}var f=this.$info.data("height");
var j=this.$gallery.height()-this.$header.height();
if(!this.$el.hasClass(this.CAPTION_CLASS)){if(!this.sliderStopped){this.stopProgress();
this.sliderCaptionStopped=true
}var h=this.$info.find(".bx-wrapper");
var g=h.height()+l+20;
f=window.Math.min(g,j);
this.$el.addClass(this.CAPTION_CLASS);
this.$info.addClass("gallery-detail__info--show")
}else{if(this.sliderCaptionStopped){this.resumeProgress()
}this.sliderCaptionStopped=false;
this.$el.removeClass(this.CAPTION_CLASS);
this.$info.removeClass("gallery-detail__info--show")
}this.$info.stop(true,true).animate({height:f})
}},onExitClick:function(f){if(d(".gallery-detail__exit").hasClass("init-loader")){this.nextGalleryAjaxLoader.abort();
d(".gallery-detail__exit").removeClass("init-loader")
}if(f){f.preventDefault()
}this.nextGalleryRequestLock=false;
window.location.hash="!/"
},onSponsorClicked:function(g){var h=g.target.className;
if(h&&h==="gallery-detail__sponsored"&&!e.Devices.is("desktop")&&this.$slider!==null){var f=this.$slider.getCurrentSlideElement();
f.find(".gallery-detail__image").trigger("click");
g.stopPropagation()
}},onVisibilityToggle:function(g,f){if(!this.$el.hasClass("manually-paused")){if(f){this.resumeProgress()
}else{this.stopProgress()
}}},updateControls:function(){var f=this.$slider.getSlideCount();
var g=this.$slider.getCurrentSlide()+1;
if(g===1){if(this.previousGalleryLink){this.$previousButton.fadeIn(100)
}else{this.$previousButton.fadeOut(100)
}this.$nextButton.fadeIn(100)
}else{if(g===f){this.$previousButton.fadeIn(100);
if(this.nextGalleryLink){this.$nextButton.fadeIn(100)
}else{this.$nextButton.fadeOut(100)
}}else{this.$previousButton.fadeIn(100);
this.$nextButton.fadeIn(100)
}}},initRouter:function(){var f=new a();
f.on("route:loadGallery",_.bind(this.loadGallery,this));
f.on("route:exitGallery",_.bind(this.exitGallery,this,300));
if(c.History.started===true){c.history.stop()
}c.history.start()
},loadGallery:function(f){this.startSlide=this.navigationMap[f];
if(this.isImageLoadTriggered===false){this.loadAsyncImages()
}if(this.startSlide!==undefined){if(!this.$el.hasClass("opened")){this.$el.addClass("opened");
this.scrollTop=d(window).scrollTop();
this.$body.css("width",this.$body.width());
if(window.Modernizr.touch){this.$body.add(this.$html).addClass("no-height")
}else{this.$body.add(this.$html).addClass("disable-scroll")
}e.$body.addClass("gallery-opened");
this.initSlider()
}else{this.$slider.goToSlide(this.startSlide)
}}else{}},loadAsyncImages:function(){var f=2;
var l=this.$listItem.length;
var j=[];
var m=[];
var k=this.startSlide-f;
if(k<0){k=0;
j=this.$listItem.slice(l-f)
}var h=this.startSlide+f+1;
if(h>l){h=l;
m=this.$listItem.slice(0,f+1)
}var g=this.$listItem.slice(k,h);
if(j.length>0){g=d.merge(j,g)
}if(m.length>0){g=d.merge(m,g)
}g.each(function(q){var u=d(this).data("image-url");
var n=d(this).data("mobileimage-url");
var p=d(this).find("source").eq(0);
var o=d(this).find("source").eq(1);
var r=d(this).find(".gallery-detail__image");
if(p.attr("srcset")===""){p.attr("srcset",u)
}if(o.attr("srcset")===""){o.attr("srcset",u)
}if(r.attr("src")===""){r.attr("src",n)
}})
},exitGallery:function(g){var f=this;
this.stopProgress();
if(f.$el.hasClass("opened")){if(g!==true){f.$el.removeClass("opened")
}this.sendEvent(this.OMNITURE.CLOSE);
c.history.stop();
setTimeout(function(){f.$el.remove();
if(d(".gallery-detail").length===0){window.scrollTo(0,f.scrollTop);
f.$body.css("width","");
f.$body.add(f.$html).removeClass("disable-scroll");
f.$body.add(f.$html).removeClass("no-height");
f.$body.add(f.$html).removeClass("gallery-opened")
}},500)
}},resetProgress:function(){this.sliderStopped=false;
this.slideRemainingTime=0;
this.$playPause.removeClass("icon-play-gallery").addClass("icon-pause-gallery");
this.$el.removeClass("manually-paused");
this.$progressRunner.stop(true).css({right:"100%"})
},startProgress:function(g){var f=this;
if(!g){this.slideStartTime=Date.now()
}else{this.slideStartTime=Date.now()-(this.PAUSE_TIME-g)
}this.$progressRunner.animate({right:"0%"},g||this.PAUSE_TIME,"linear",function(){f.$slider.triggerHandler("slider:next")
})
},onPlayPauseClick:function(){if(this.sliderStopped){this.$el.removeClass("manually-paused");
this.resumeProgress();
this.sendEvent(this.OMNITURE.PLAY)
}else{this.stopProgress();
this.$el.addClass("manually-paused");
this.sendEvent(this.OMNITURE.PAUSE)
}},stopProgress:function(){this.$playPause.removeClass("icon-pause-gallery").addClass("icon-play-gallery");
var f=Date.now()-this.slideStartTime;
this.slideRemainingTime=this.PAUSE_TIME-f;
this.$progressRunner.stop();
this.sliderStopped=true
},resumeProgress:function(){this.$playPause.removeClass("icon-play-gallery").addClass("icon-pause-gallery");
this.startProgress(this.slideRemainingTime);
this.sliderStopped=false
},getSlideImageId:function(h){var g=this.$slider.getSlideCount();
var k=this.$slider.getCurrentSlide();
var f=k+1;
if(h==="previous"){f=k-1
}if(f<g&&f>-1){for(var j in this.navigationMap){if(this.navigationMap[j]===f){return j
}}}return null
},measureScrollbar:function(){var g=document.createElement("div");
g.className="scrollbar-measure";
this.$body.append(g);
var f=g.offsetWidth-g.clientWidth;
this.$body[0].removeChild(g);
return f
},sendPageEvent:function(h){var f=this.$slider.getCurrentSlideElement();
var g=f.data("image-id");
window.s.linkTrackVars="events,prop7,eVar7,prop61,eVar61,prop62,eVar62";
if(h){window.s.linkTrackEvents="event3,event22"
}else{window.s.linkTrackEvents="event3,event23"
}window.s.eVar7=window.s.pageName;
window.s.prop7=window.s.pageName;
window.s.prop11=unescape(window.location.href);
window.s.eVar11=unescape(window.location.href);
if(h){window.s.prop61="Image Gallery - Auto";
window.s.eVar61="Image Gallery - Auto"
}else{window.s.prop61="Image Gallery - Manual";
window.s.eVar61="Image Gallery - Manual"
}window.s.prop62=g;
window.s.eVar62=g;
if(h){window.s.events="event3,event22"
}else{window.s.events="event3,event23"
}window.s.t()
},updateShare:function(){var l=this.$slider;
var j=e.getComponent(this.$socialModule);
var k=l.getCurrentSlideElement();
var g=k.data("share-title");
var h=k.data("share-url");
var f=k.data("share-image");
if(g&&h&&f){this.$socialModule.attr("data-share-title",g);
this.$socialModule.attr("data-share-url",h);
this.$socialModule.attr("data-share-image",f);
j.initializeSocialLinks(_.bind(this.onShareClicked,this))
}},sendEvent:function(g){var f=this.$slider.getCurrentSlideElement();
var h=f.data("image-id");
window.s.linkTrackVars="events,prop7,eVar7,prop62,eVar62";
window.s.linkTrackEvents="event3,"+g;
window.s.eVar7=window.s.pageName;
window.s.prop7=window.s.pageName;
window.s.prop62=h;
window.s.eVar62=h;
window.s.events="event3,"+g;
window.s.tl(this,"o",h)
},onShareClicked:function(f){var h=this.$slider.getCurrentSlideElement();
var g=h.data("image-id");
window.s.linkTrackVars="events,prop7,eVar7,prop21,eVar21,prop62,eVar62";
window.s.linkTrackEvents="event6";
window.s.eVar7=window.s.pageName;
window.s.prop7=window.s.pageName;
window.s.eVar21=f;
window.s.prop21=f;
window.s.prop62=g;
window.s.eVar62=g;
window.s.events="event6";
window.s.tl(this,"o",f)
}});
e.GalleryDetail=b;
e.registerComponent("gallery-detail",b)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({currentImageUrl:"",$galleryModule:null,$heroSelector:".hero a",$thumbnails:".gallery-list__main__url",initialize:function(){c(".redux-toggle-off").attr("inactive","true");
this.preventHiddenAds()
},preventHiddenAds:function(){c(".redux-toggle-off .advert .ads > div").each(function(){d.lazyAdHelpers.preventAd(c(this).attr("id"))
})
},onHashChange:function(){if(window.location.hash.indexOf("!")!==-1&&window.location.hash.length>1&&c(".gallery-detail").length===0){this.initializeGallery()
}},updateHrefs:function(){this.updateHrefHelper(this.$heroSelector);
this.updateHrefHelper(this.$thumbnails)
},updateHrefHelper:function(e){var f="";
c(e).each(function(){f=c(this).attr("href");
f=f.replace("#!","#!gallery/");
c(this).attr("href",f)
})
},initializeGallery:function(){var g="?testmode="+c("#testmodeParam").val();
var f=c(".gallery-list").attr("data-gallery-url")+g;
var e=this;
c.ajax({method:"GET",url:f,dataType:"html"}).done(c.proxy(e.insertModule,e))
},getGalleryModule:function(e){return c(e).find(".gallery-detail")
},insertModule:function(g){var f=new RegExp("{{position}}","g");
g=g.replace(f,window.Date.now());
var e=c(g);
this.$galleryModule=this.getGalleryModule(e);
c("body").append(this.$galleryModule);
setTimeout(function(){d.bindComponent("gallery-detail");
d.bindComponent("social-share")
},0)
}});
d.registerComponent("gallery-list",a)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({$loader:null,$thirdEl:null,$button:null,$buttonIcon:null,$loadedItems:null,_endpoint:null,_totalItemsCount:0,_gridContainerBlockSelector:".grid-container__blocks",_gridActiveClass:"grid-container--active",_gridContainerFeedSelector:".grid-container__feed",_isSingleRow:false,initialize:function(){this._endpoint=this.$el.data("endpoint");
this._totalItemsCount=this.$el.data("total-items-count");
this.$loader=this.$(".grid-container__loader");
this.$thirdEl=this.$(".grid-container__feed:nth-child(3)");
this.$button=this.$(".grid-container__cta-button__cta");
this.$buttonIcon=this.$(".grid-container__cta-button__icon");
this._isSingleRow=this.$el.hasClass("grid-container--one-row");
c.subscribe("resize",_.bind(this._onResize,this));
this.hideCtaButtonIfItemsAreFullyLoaded()
},events:{"click .grid-container__cta-button":"_onCtaClick"},hideCtaButtonIfItemsAreFullyLoaded:function(){if(this.$(this._gridContainerFeedSelector).size()>=this._totalItemsCount){this.$button.remove();
if(this.$el.hasClass("grid-container--ongoing-story")){this.$el.addClass("loaded-all")
}}else{c(".grid-container__blocks").removeAttr("style")
}},_onResize:function(){if(!d.Devices.is("tablet")){this.$thirdEl.removeAttr("style")
}},_onCtaClick:function(f){var e=c(f.currentTarget);
if(e.hasClass("dont-prevent-default")){return
}f.preventDefault();
this._fetchData()
},_fetchData:function(){if(!this.$loader.is(":hidden")){return
}this.$loader.show();
this.$button.hide();
var e=this,f=e.$(this._gridContainerFeedSelector).size();
c.ajax({method:"GET",url:e._endpoint+".offset-"+f+".html",dataType:"html"}).done(c.proxy(e._insertData,e))
},_insertData:function(h){if(h){this.$loadedItems=c(h);
this.$loadedItems.hide();
var e=window.Date.now();
var g=new RegExp("{{position}}","g");
c.each(this.$loadedItems.find(".grid-page__ads"),function(j,k){k.innerHTML=k.innerHTML.replace(g,e++)
});
var f=this.$(this._gridContainerBlockSelector);
f.append(this.$loadedItems);
this._loadComplete(function(){try{window.picturefill();
d.bindComponent("feed")
}catch(j){}})
}else{}this.$loader.hide();
this.$button.show();
this.hideCtaButtonIfItemsAreFullyLoaded()
},_loadComplete:function(e){this._getElements().slideDown().promise().done(function(){e()
})
},_getElements:function(){if((this._isSingleRow&&d.Devices.is("tablet"))){return this.$thirdEl.add(this.$loadedItems)
}return this.$loadedItems
}});
d.registerComponent("grid-container",a)
})(jQuery,Backbone,App);
(function(c,b){function a(d){if(typeof b.fbq!=="function"){return
}this._events=new c(d);
this._handleEvents()
}a.KEYWEE_PIXEL_ID="1178406992170491";
a.prototype._handleEvents=function(){this._events.onVideoStarted(this._track.bind(this,this._setVideoStartedData));
this._events.onAdStarted(this._track.bind(this,this._setAdStartedData));
this._events.onVideoFinished(this._track.bind(this,this._setVideoFinishedData))
};
a.prototype._track=function(f,d){var e={};
f.call(this,d,e);
b.fbq("trackCustom","video",e)
};
a.prototype._setVideoStartedData=function(d,e){e.status="VideoStart"
};
a.prototype._setAdStartedData=function(d,e){e.status="AdStart"
};
a.prototype._setVideoFinishedData=function(d,e){e.status="VideoCompleted"
};
b.KeyweeVideoTracker=a
})(window.NormalizedPlayerEvents,window);
(function(f,e,c,g,j){var d=e(f.document.body);
var b=f.Math;
var a=c.types;
function h(l,k){if(!this._isApplicable()){return
}this.$element=e(l);
this.$header=this.$element.find(".layer_foldingMeta-header");
this.$content=this.$element.find(".layer_foldingMeta-content");
this.$nextUp=this._findNextUp();
this.$inBetween=this._findInBetweens();
this.$staticallyTransitioned=this.$element.add(this.$inBetween).add(this.$header);
this.playerEvents=new c(k);
this.id=b.floor(b.random()*999999)+1;
this._markUp();
this._bindMethods();
this._bindEvents()
}h.prototype._isApplicable=function(){var k=g.is("mobile")&&(this._getPageTemplate()==="videopage");
return k
};
h.prototype._getPageTemplate=function(){var k=s.prop4;
return k
};
h.prototype._markUp=function(){this._index();
d.addClass("has_foldingMeta")
};
h.prototype._index=function(){this.$element.attr("data-folding-metadata-id",this.id)
};
h.prototype._bindMethods=function(){this._fold=this._fold.bind(this);
this._unfold=this._unfold.bind(this)
};
h.prototype._bindEvents=function(){this.playerEvents.on(a.VIDEO_PROGRESS,this._fold);
d.on("click",'[data-folding-metadata-id="'+this.id+'"] .layer_foldingMeta-switch',this._unfold)
};
h.prototype._unbindEvents=function(){this.playerEvents.off(a.VIDEO_PROGRESS,this._fold);
d.off("click",this._unfold)
};
h.prototype._fold=function(){var k=this._calculateMetaToNextUpDistance();
this.$content.css("overflow","hidden");
this.$staticallyTransitioned.addClass("layer_foldingMeta-staticallyTransitioned--folded");
this.$nextUp.css("margin-top",-k)
};
h.prototype._calculateMetaToNextUpDistance=function(){var k=this.$nextUp.get(0).getBoundingClientRect().top-this.$element.get(0).getBoundingClientRect().bottom-15;
return k
};
h.prototype._findNextUp=function(){var k=this.$element.closest(".page__one-column").nextAll(".nextup.section").eq(0).addClass("layer_foldingMeta-nextUp");
return k
};
h.prototype._findInBetweens=function(){var k=this.$element.closest(".page__one-column").nextUntil(".nextup.section").addClass("layer_foldingMeta-inBetween");
return k
};
h.prototype._unfold=function(){var k=this;
f.setTimeout(function(){k.$content.css("overflow","")
},300);
this.$staticallyTransitioned.removeClass("layer_foldingMeta-staticallyTransitioned--folded");
this.$nextUp.css("margin-top","")
};
h.prototype.destroy=function(){if(!this._isApplicable()){return
}this._unbindEvents();
this.$element=this.$header=this.$nextUp=this.$inBetween=this.$staticallyTransitioned=this.playerEvents=null
};
j.FoldingVideoMetadata=h
})(window,window.jQuery,window.NormalizedPlayerEvents,window.App.Devices2,window.App);
(function(e,d,f,g){var c="asset_tveSignedInWith";
var a="SIGNED IN WITH";
var b=d.View.extend({player:"",$videoWrapper:null,$curve:null,$placeholder:null,$clone:null,initialized:false,isSimulcast:false,autoplay:false,metadataFoldingHandler:null,events:{"click .pjs-placeholder-button":"onPlayerStartClicked","click .hero__video__placeholder":"onPlaceholderClicked","click .hero__video":"onTouchplayClicked","click .hero__sign-in__cta":"login","click .hero__sidebar__show-more":"onShowMoreClicked"},initialize:function(){if(this.$el.closest(".simulcast-container").length>0){this.isSimulcast=true
}if(this.$el.hasClass("hero--autoplay")){this.autoplay=true
}this.$videoWrapper=this.$(".hero__video");
this.$curve=this.$(".hero__curve");
this.$placeholder=this.$(".hero__video__placeholder");
this.$signIn=this.$(".hero__sign-in");
this.$clone=this.$(".hero__video").html();
this.$metaClone=this.$(".videometadata").html();
this.$heroFeatured=this.$(".hero__video-wrapper__featured__cnt");
this.$largeHeroVideoSelector=this.$(".hero__video-wrapper");
this.$desktopSignedInWithContainer=e(".hero__video__meta").add(".hero__sidebar__content__wrapper").first();
this.$mobileSignedInWithContainer=e(".hero__title").add(".hero__subtitle").last();
this.$sidebar=this.$(".hero__sidebar");
this.$html=e("html");
this.$isAuthReq=!!(this.$videoWrapper.length&&this.$signIn.length);
this.signedInAttachCode=0;
this.$window=e(window);
this.$body=e(window.document.body);
this.$socialIcons=e(".hero__video__social");
this.$pickerSwitch=this.$el.find(".has_mvpdPicker");
if(!this.$mobileSignedInWithContainer.length){this.$mobileSignedInWithContainer=this.$desktopSignedInWithContainer
}if(!this.initialized){this.$signedInWith=e();
this.$clearer=e('<div class="clear"></div>');
e.subscribe("tve:loaded",_.bind(this.run,this));
e.subscribe("tve:logout:done",_.bind(this.logout,this));
e.subscribe("tve:check:status:completed",_.bind(this.statusCheck,this));
this.$window.on("resize",this.attachSignedInLogo.bind(this));
this.$body.on("click","."+c,this.requestLogout.bind(this));
this._switchPickerOn=this._switchPickerOn.bind(this)
}if(e(".hero__sign-in").length===0){this.run()
}if(this.$el.closest(".enhanced-graphic-cta").length!=0){var h=this;
e(window).resize(function(){h.handleResize()
})
}if(this.isMobile()){e(".hero__video__placeholder").css("display","none")
}if(g.Devices.is("mobile")&&this.$el.hasClass("large-version")){this.onOrientationChange();
g.$window.on("orientationchange",_.bind(this.onOrientationChange,this))
}else{this.$largeHeroVideoSelector.css("height","")
}this.initialized=true;
if(!e("html").hasClass("touch")){this.startVideoOnLoad()
}},isShows2:function(){if(e(".hero__sidebar__content__wrapper").length){this.isShows2=(function(){return true
})
}else{this.isShows2=(function(){return false
})
}return this.isShows2()
},startVideoOnLoad:function(){if(this.autoplay){this.$placeholder[0].click()
}},handleResize:function(){var h=Math.max(320,Math.min((this.$el.closest(".enhanced-graphic-cta").width()-e(window).width()/10),(jQuery(window).height()-50)*16/9));
this.$el.width(h)
},onOrientationChange:function(h){this.$largeHeroVideoSelector.height(g.$window.height())
},hasPlaceholder:function(){return this.$placeholder.length>0
},run:function(){if(this.$videoWrapper.length!==0){if(this.$signIn.length===0){if(!this.hasPlaceholder()){this.initPlayer()
}else{if(this.isMobile()&&this.hasPlaceholder()){if(e("html").hasClass("apple-touch")){this.placeholderImage=this.$placeholder.find("source").attr("srcset")
}else{this.placeholderImage=this.$placeholder.find("img").attr("srcset")
}if(this.isMobile()){var h=this;
this.$videoWrapper.addClass("hero__video--hidden");
this.onPlayerReady(function(){h.$videoWrapper.removeClass("hero__video--hidden");
h.$(".pjs-placeholder-image").css("background-image","url("+h.placeholderImage+")")
})
}this.initPlayer()
}}}else{window.TVEAuth.API.checkStatus(true)
}}},statusCheck:function(j,h){if(h&&h.isLoggedIn){if(this.isSimulcast){this.createSimulcastPlayer(h)
}else{this.initPlayer()
}this.$signIn.fadeOut();
this.showSignedInLogo(h.provider["logoutLogoUrl"],h.provider["displayName"])
}else{this.$signIn.find(".hero__sign-in__wrapper").hide().end().fadeIn();
this.hideSignedInLogo();
e.publish("subscription:getMvpdPicker",{containerId:"mvpd-picker",callback:this._switchPickerOn})
}},_switchPickerOn:function(){this.$pickerSwitch.addClass("has_mvpdPicker--loaded")
},showSignedInLogo:function(k,j){var h="";
this.hideSignedInLogo();
if(this.isSimulcast&&!!k){if(k.indexOf("_black.png")!=0){k=k.replace("_black.png","_white.png")
}}if(j==="SFPS"&&!k){h="<span>A PREVIEW PASS</span>"
}else{h='<span><img src="'+k+'" alt="'+j+'"></span>'
}if(this.isShows2()&&!!k){if(k.indexOf("_black.png")!=0){k=k.replace("_black.png","_white.png")
}}if(j==="SFPS"&&!k){h="<span>A PREVIEW PASS</span>"
}else{h='<span><img src="'+k+'" alt="'+j+'"></span>'
}this.$signedInWith=e('<a class="'+c+'" href="javascript: void(0);"><span>'+a+"</span>"+h+"</a>");
this.attachSignedInLogo()
},attachSignedInLogo:function(){if(this.isSimulcast){this.$desktopSignedInWithContainer.prepend(this.$signedInWith);
this.$socialIcons.after(this.$clearer);
this.markSignedInAttachedToDesktop()
}else{if(this.$signedInWith.length===0){return
}else{if(this.isDesktopViewport()&&this.isSignedInAttachedToDesktop()){return
}else{if(this.isMobileViewport()&&this.isSignedInAttachedToMobile()){return
}else{if(this.isDesktopViewport()&&!this.isSignedInAttachedToDesktop()){if(this.isShows2()){this.$desktopSignedInWithContainer.append(this.$signedInWith)
}else{this.$desktopSignedInWithContainer.prepend(this.$signedInWith)
}this.$socialIcons.after(this.$clearer);
this.markSignedInAttachedToDesktop()
}else{if(this.isMobileViewport()&&!this.isSignedInAttachedToMobile()){if(this.isShows2()){this.$mobileSignedInWithContainer.append(this.$signedInWith)
}else{this.$mobileSignedInWithContainer.after(this.$signedInWith)
}this.$clearer.remove();
this.markSignedInAttachedToMobile()
}}}}}}},isDesktopViewport:function(){return window.matchMedia("(min-width: 996px)").matches
},isMobileViewport:function(){return !this.isDesktopViewport()
},hideSignedInLogo:function(){this.markSignedInDetached();
this.$signedInWith.remove();
this.$clearer.remove();
this.$signedInWith=e()
},isSignedInAttachedToMobile:function(){return 1===this.signedInAttachCode
},isSignedInAttachedToDesktop:function(){return 2===this.signedInAttachCode
},markSignedInAttachedToMobile:function(){this.signedInAttachCode=1
},markSignedInAttachedToDesktop:function(){this.signedInAttachCode=2
},markSignedInDetached:function(){this.signedInAttachCode=0
},login:function(){e.publish("subscription:login")
},requestLogout:function(){e.publish("subscription:logout")
},logout:function(){this.$(".hero__video").html(this.$clone);
this.$(".videometadata").html(this.$metaClone);
this.initialize(true);
e.publish("tve:loaded")
},initPlayer:function(){if(!this.isMobile()){this.$curve.hide()
}this.createVideoPlayer()
},createSimulcastPlayer:function(l){if(!this.isMobile()){this.$curve.hide()
}var h={uri:e(".simulcast-player").data("videoid"),mediaGenAuthCheck:true,mediaGen:"https://media-utils-live.mtvnservices.com/services/MediaGenerator/{uri}?format=json&ssid={ssid}&euid={dai.euid}&eudi.ssus={dai.ssus}&acceptMethods=hls",useMediaGenFromFeed:false,scoundrelMode:true,width:"100%",height:"100%"};
var k=document.querySelector("#mainPlayer");
new window.EdgePlayer.Player(k,h);
var j=EdgePlayer.getPlayer();
j.on(EdgePlayer.Events.WAITING_ON_MEDIAGEN_AUTH_CHECK,function(m){var n=m.data.mgid;
var o=m.data.callback;
o(l.token,l.provider.id)
});
new DYVideoTracker(j);
new KeyweeVideoTracker(j)
},createVideoPlayer:function(){var k;
if(this.isSimulcast){}else{var l=this.$videoWrapper.data("uri"),h=this.$videoWrapper.data("adparams"),n=this.$videoWrapper.data("locationpath"),j={playlistComplete:function(o){window.bq_onVideoEnd&&window.bq_onVideoEnd()
},metadata:function(o){},playheadUpdate:function(o){}};
if(h){h=h.replace("&lt;parameters.betord&gt;",timestampDart).replace("&lt;parameters.domainname&gt;",domainName).replace("[timestamp]",timestampDart)
}var m={videoURI:l,locationPath:n,adParams:h,authReq:this.$isAuthReq};
k=MTVN.EdgePlayerAPI.playBetVideo(this.$videoWrapper.get(0),m,j);
this.handleMetadataFolding(this.$(".videometadata.section").get(0),k);
new DYVideoTracker(k);
new KeyweeVideoTracker(k)
}},handleMetadataFolding:function(j,h){if(this.metadataFoldingHandler){this.metadataFoldingHandler.destroy()
}this.metadataFoldingHandler=new f(j,h)
},onPlaceholderClicked:function(h){this.$heroFeatured.hide();
this.$placeholder.hide();
this.initPlayer();
this.sendOmniture()
},onTouchplayClicked:function(h){if(this.isMobile()){this.$curve.hide()
}this.$heroFeatured.hide()
},onPlayerReady:function(m){var j=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;
var h=new j(function(n){var o=false;
e.each(n,function(){if(this.type==="childList"){o=true;
return false
}});
if(o){h.disconnect();
setTimeout(m,500)
}});
var l={attributes:false,childList:true,characterData:false};
var k=this.$videoWrapper.get(0);
h.observe(k,l)
},onPlayerStartClicked:function(h){this.$curve.hide();
this.$heroFeatured.hide()
},onShowMoreClicked:function(){this.$sidebar.toggleClass("hero__sidebar--opened")
},isMobile:function(){return/ip(hone|od|ad)|android|webos|blackberry|iemobile|opera mini|bb1\d.*mobile/i.test(navigator.userAgent)
},sendOmniture:function(){window.s.linkTrackVars="events,server,prop17,eVar17";
window.s.linkTrackEvents="event3";
window.s.eVar17=window.s.prop17;
window.s.events="event3";
window.s.t();
window.s.pageName
}});
g.registerComponent("hero--video",b)
})(jQuery,Backbone,window.App.FoldingVideoMetadata,App);
(function(c,b,d){var a=b.View.extend({initialize:function(){this.$text=this.$(".list-module__list-item-sub");
this.truncate();
c.subscribe("resize",_.bind(this.truncate,this))
},truncate:function(){this.$text.dotdotdot()
}});
d.registerComponent("list-module",a)
})(jQuery,Backbone,App);
(function(c,b,f){var e=f.Parallax;
var a=f.Devices;
var d=b.View.extend({backgroundClassName:"promo__background",visibilityClassName:"promo_visible",promoButtonClassName:"promo__content__button",smallPromoButtonClassName:"promo__static__content__button",promoInnerClass:"promo__inner",promoVisibleTrack:true,events:{"mouseenter .promo__content__button":"CTAbuttonHover","mouseleave .promo__content__button":"CTAbuttonHover"},initialize:function(){this.browserDetection();
this.CTAbuttonInit();
if(!this.$el.hasClass("promo--static")){this.initializeParallax({innerElement:this.$("."+this.backgroundClassName),innerOrigin:0.5,windowOrigin:0.5})
}this.updatePromoHeight()
},onScroll:function(g,h){this.parallaxScroll(g,h);
this.visibilityScroll(g,h)
},onResize:function(g){this.parallaxResize(g);
this.visibilityResize(g);
this.browserDetection();
this.updatePromoHeight()
},CTAbuttonInit:function(h){var g=c("."+this.promoButtonClassName).add("."+this.smallPromoButtonClassName);
g.each(function(){var k=c(this),l=k.data("basic-bgcolor"),j=k.data("basic-color");
k.css({"background-color":l,color:j})
})
},CTAbuttonHover:function(l){var j=c(l.currentTarget);
var k=j.data("basic-bgcolor");
var m=j.data("hover-bgcolor");
var g=j.data("basic-color");
var h=j.data("hover-color");
if(!window.Modernizr.touch){if(l.type==="mouseenter"){j.css({"background-color":m,color:h})
}else{j.css({"background-color":k,color:g})
}}},updatePromoHeight:function(){window.setTimeout(function(){var h=c("."+this.promoInnerClass);
if(a.is("mobile")){var g=screen.height;
if(/iP(hone|od|ad)/.test(navigator.userAgent)){if(window.orientation===90||window.orientation===-90){g=screen.width
}}h.height(g-55)
}else{h.css("height","")
}},1000)
},visibilityScroll:function(l,m){var k=a.is("desktop");
var n=this.elOffset.top;
var h=this.elHeight;
var j=k?this.windowHeight:h;
var g=m+j>n&&m<n+h;
this.updateVisibility(g)
},browserDetection:function(){var g=c("html");
var h="promo-safe-mode";
if(f.Devices.is("mobile")&&(this.problematicBrowsers())){g.addClass(h)
}else{g.removeClass(h)
}},problematicBrowsers:function(){var j=typeof InstallTrigger!=="undefined";
var g=false||!!document.documentMode;
var h=!g&&!!window.StyleMedia;
if(g||j||h){return true
}else{return false
}},visibilityResize:function(h){var g=this.$el;
this.elOffset=g.offset();
this.elHeight=g.height()
},updateVisibility:function(g){if(g===this._isVisible){return
}this._isVisible=g;
if(a.is("mobile")){this.$el.addClass(this.visibilityClassName)
}else{this.visibilityResize();
this.parallaxResize();
if(g){this.$el.addClass(this.visibilityClassName);
this.trackingPixel()
}else{this.$el.removeClass(this.visibilityClassName)
}}},trackingPixel:function(){if(this.promoVisibleTrack&&(c(".promo-component noscript").length>0)){var j=c(".promo-component noscript").text(),h=/src="([^"]+)"/gi,k=Date.parse(Date()),g=h.exec(j)[1].toLowerCase().replace("[timestamp]",k);
this.promoVisibleTrack=false;
this.sendPromoViewed(g)
}},sendPromoViewed:function(g){c.get(g,function(h){}).error(function(h){console.error("Cannot obtain moments data from the server: ",h.message)
})
}});
_.defaults(d.prototype,e.ModuleMixin);
f.registerComponent("promo",d)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({initialize:function(){this.$title=this.$(".related-inline__list_item h4");
this.truncate();
c.subscribe("resize",_.bind(this.truncate,this))
},truncate:function(){this.$title.dotdotdot()
}});
d.registerComponent("related-inline",a)
})(jQuery,Backbone,App);
(function(b,a,c){var d=a.View.extend({listClassName:"social-share__list",moreClassName:"social-share__more",moreListClassName:"social-share__more__list",iconMoreClassName:"icon-more",embedSelector:".social-share__embed",embedIconClassName:"icon-embed",embedButtonClassName:"social-share__embed__button",activeClassName:"active",initialize:function(){this.initializeList();
this.initializeSocialLinks();
this.initCopyToClipboard();
b.subscribe("resize",_.bind(this.onResize,this));
b.subscribe("window:click",_.bind(this.onWindowClick,this));
this.onResize(null)
},initializeList:function(){this.$list=this.$("."+this.listClassName);
this.$more=this.$("."+this.moreClassName);
this.$moreList=this.$("."+this.moreListClassName);
this.$listElements=this.$list.children().not("."+this.moreClassName)
},initializeSocialLinks:function(e){var j=this.$el.attr("data-share-title")||undefined;
var g=this.$el.attr("data-share-url")||undefined;
var h=this.$el.attr("data-share-image")||undefined;
var f=this.$el.attr("data-share-deeplinking")||undefined;
c.InitSocialLinks(this.$listElements,j,g,e,h,f)
},initCopyToClipboard:function(){new window.Clipboard("."+this.embedButtonClassName)
},formatList:function(){var k=this.$list;
var g=this.$listElements;
var l=b(g);
var m=this.$more;
var f=this.$moreList;
g.detach();
k.prepend(l);
f.children().detach();
var h=0;
if(b(window).width()>=768){k.find("li.icon-whatsapp").detach();
h=b(".page__main__timestamp").width()-25
}var j=0;
var n=this.$el.closest(".hero__sidebar__social").length?30:83;
var o;
while(true){var e=k.find("> li").not(m);
if(h==-25){h=0
}if(this.$el.parent().width()-h<=e.size()*n&&j<10){j++;
f.prepend(e.last().detach());
continue
}o=this.$(this.embedSelector).detach();
if(f.find("li").size()){f.prepend(e.last().detach());
m.addClass("visible");
o.css("max-width",e.size()*n-3);
f.parent().prepend(o)
}else{m.removeClass("visible");
o.css("max-width","none");
k.find("li.icon-embed").prepend(o)
}break
}if(j<10){k.show()
}},onWindowClick:function(j,g){var f=b(g.target);
var h=this.$(this.embedSelector);
if(this._eventInside(h,f)){if(this._eventInside(this.$("."+this.embedButtonClassName),f)){h.removeClass(this.activeClassName)
}return
}else{if(h.hasClass(this.activeClassName)){h.removeClass(this.activeClassName);
return
}}if(this._eventInside(this.$("."+this.embedIconClassName),f)){this.$(this.embedSelector).toggleClass(this.activeClassName);
this.$more.removeClass(this.activeClassName);
return
}if(this._eventInside(this.$("."+this.iconMoreClassName),f)){this.$more.toggleClass(this.activeClassName);
this.$(this.embedSelector).removeClass(this.activeClassName)
}else{this.$more.removeClass(this.activeClassName)
}},_eventInside:function(f,e){if((f.is(e)||e.closest(f).length>0)){return true
}return false
},onResize:function(e){if(!this.$el.hasClass("noIconMore")){this.formatList()
}}});
c.registerComponent("social-share",d)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({$container:null,$trigger:null,containerSelector:".sticky-share__wrap",triggerSelector:".social-share__list",ellipsisSelector:".sticky-share__title",stickyEndClassSelector:".body-copy .comments__header",socialListClassName:"sticky-share__social__list",socialLinkClassName:"sticky-share__social__item",socialShareClassName:"sticky-share__social",socialShareActiveClassName:"active",headerSelector:"header.header",$socialShare:null,initialize:function(){this.$container=this.$el.closest(this.containerSelector);
this.$title=this.$(this.ellipsisSelector);
this.$trigger=this.$container.find(this.triggerSelector+":visible").not(this.$el.find(this.triggerSelector)).first();
var e=this.$el.attr("data-share-image")||undefined,f=this.$el.attr("data-share-title")||undefined;
this.$trigger.waypoint(_.bind(this.onWaypoint,this),{offset:"-40px"});
c(this.stickyEndClassSelector).waypoint(_.bind(this.WaypointEnds,this),{offset:"0"});
this.runTruncation();
d.InitSocialLinks(this.$("."+this.socialLinkClassName),f,undefined,undefined,e);
this.$socialShare=this.$("."+this.socialShareClassName);
this.isHideSticky=this.hideStickyShare();
c.subscribe("window:click",_.bind(this.onWindowClick,this));
c.subscribe("resize",_.bind(this.onResize,this))
},onResize:function(){this.runTruncation()
},onWaypoint:function(e){if(e==="down"&&!this.isHideSticky){this.$el.addClass("sticky-share--visible");
c(this.headerSelector).addClass("sticky-share--alert")
}else{this.$el.removeClass("sticky-share--visible");
c(this.headerSelector).removeClass("sticky-share--alert");
this.$socialShare.removeClass(this.socialShareActiveClassName)
}},WaypointEnds:function(e){if(e==="up"&&!this.isHideSticky){this.$el.addClass("sticky-share--visible");
c(this.headerSelector).addClass("sticky-share--alert")
}else{this.$el.removeClass("sticky-share--visible");
c(this.headerSelector).removeClass("sticky-share--alert");
this.$socialShare.removeClass(this.socialShareActiveClassName)
}},onWindowClick:function(h,g){var f=c(g.target);
if((this.$socialShare.is(f)||f.closest(this.$socialShare).length>0)){this.$socialShare.toggleClass(this.socialShareActiveClassName)
}else{this.$socialShare.removeClass(this.socialShareActiveClassName)
}},runTruncation:function(){if(d.Devices.is("mobile")){this.$title.dotdotdot()
}else{this.$title.trigger("destroy")
}},hideStickyShare:function(){if(c(".sticky-share").css("display")=="none"){return true
}else{return false
}}});
d.registerComponent("sticky-share",a)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({_TIMEOUT:10000,_regex:/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,$submit:null,$input:null,className:"subscribe",initialize:function(){this.$submit=this.$(".subscribe__action__form__button");
this.$input=this.$(".subscribe__action__form__input")
},events:{"keyup .subscribe__action__form__input":"validateEmail","input .subscribe__action__form__input":"validateEmail","submit .subscribe__action__form":"submitForm"},validateEmail:function(e){if(this._regex.test(e.currentTarget.value)){this.$submit.prop("disabled",false)
}else{this.$submit.prop("disabled",true)
}},submitForm:function(j){j.preventDefault();
this.$input.prop("disabled",true);
this.$submit.prop("disabled",true);
var e=this;
var f={useremail:this.$input.val(),subscribed:this.$input.data("subscribe-group"),subscribefrequency:this.$input.data("subscribe-frequency"),source:this.$input.data("source")};
var g=this.$input.data("paid-hosts");
if(g){if(document.referrer){var h=document.createElement("a");
h.href=document.referrer;
var k=h.host.split(":")[0];
if(c.inArray(k,g)>-1||c.inArray(k.replace(/^www./,""),g)>-1){f.paidhost=k
}}}c.ajax({method:j.currentTarget.method,url:j.currentTarget.action,data:f,dataType:"json"}).done(c.proxy(e._responseReceived,e))
},_responseReceived:function(f){var e=this;
if(f&&f.success===1){e.$submit.html("Got It!");
e.$submit.addClass("button--white");
setTimeout(function(){e.$input.val("");
e.$input.prop("disabled",false);
e.$submit.html("Submit");
e.$submit.removeClass("button--white")
},e._TIMEOUT)
}else{e.$input.prop("disabled",false);
e.$submit.prop("disabled",false)
}}});
d.registerComponent("subscribe",a)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({initialize:function(){if(c(".textbanner").prev().hasClass("sponsorship-module")){c(".textbanner").prev().hide();
var e=c(".textbanner").prev();
c(".textbanner").append(e[0].outerHTML);
c(".textbanner .sponsorship-module").show()
}}});
d.registerComponent("sponsorship-module",a)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({initialize:function(){}});
d.registerComponent("trend",a)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({TRIPLE_PROMO_COOKIE:"triple-promo",initialize:function(){var e=window.Cookies.get(this.TRIPLE_PROMO_COOKIE);
if(e){this.$el.remove()
}else{this.$el.addClass("triple-promo--open");
window.Cookies.set(this.TRIPLE_PROMO_COOKIE,"hidden")
}}});
d.registerComponent("triple-promo",a)
})(jQuery,Backbone,App);
(function(b,a,d){var c=a.View.extend({_endpoint:null,_selectedDay:null,_selectedTimeZone:null,$openedShow:null,refreshTimer:300000,refreshTimeout:null,$loader:null,$programContainer:null,programContainerSelector:".tv-schedule__content",$dropDown:null,$dropDownLabel:null,headerSelector:".tv-schedule__header",dropDownListSelector:".tv-schedule__header__dropdown__list",$slider:null,bottomTriggerPoint:50,sliderTouchBottom:false,$sliderNext:null,$sliderPrev:null,$sliderList:null,dayWidth:null,daySelector:".tv-schedule__slider__list__item",events:{"click .tv-schedule__header__dropdown__list__item":"changeTimeZoneEvent","click .tv-schedule__slider__list__item":"changeDayEvent","click .tv-schedule__slider__previous":"listAnimationEvent","click .tv-schedule__slider__next":"listAnimationEvent","click .tv-schedule__content__item__header":"toggleContentEvent"},initialize:function(){this.$loader=this.$(".tv-schedule__loader");
this.$dropDown=this.$(".tv-schedule__header__dropdown");
this.$dropDownLabel=this.$(".tv-schedule__header__dropdown__select p");
this.$slider=this.$(".tv-schedule__slider");
this.bottomTriggerPoint+=this.$slider.height();
this.$sliderNext=this.$(".tv-schedule__slider__next");
this.$sliderPrev=this.$(".tv-schedule__slider__previous");
this.$sliderList=this.$(".tv-schedule__slider__list");
this._endpoint=this.$el.data("endpoint");
if(this.$(this.daySelector+".current").size()===0){this.$(this.daySelector).first().addClass("current")
}this._selectedDay=this.$(this.daySelector+".current").data("dayindex");
this.dayWidth=this.$(this.daySelector).width();
this.$sliderList.width(this.dayWidth*this.$(this.daySelector).size());
this.$sliderList.addClass("tv-schedule__slider__list--visible");
this.$el.waypoint(_.bind(this._onWaypoint,this),{offset:"-6px"});
this._initTimeZone();
this.refreshCurrentView();
b.subscribe("resize",_.bind(this.onResize,this));
b.subscribe("window:click",_.bind(this.onWindowClick,this));
b.subscribe("scroll",_.bind(this._onScroll,this))
},onWindowClick:function(h,g){var f=b(g.target);
if((this.$dropDown.is(f)||f.closest(this.$dropDown).length>0)){this.$dropDown.toggleClass("opened")
}else{this.$dropDown.removeClass("opened")
}},changeTimeZoneEvent:function(e){this._selectedTimeZone=e.currentTarget.innerHTML;
this.$dropDownLabel.text(this._selectedTimeZone);
this.refreshCurrentView();
e.preventDefault()
},changeDayEvent:function(g){var f=b(g.currentTarget);
if(f.hasClass("current")){return
}this.$(this.daySelector).removeClass("current");
f.addClass("current");
this._selectedDay=f.data("dayindex");
var e=f.data("day");
this.refreshCurrentView();
this._sendDayEvent(e)
},refreshCurrentView:function(){var e=this;
clearTimeout(this.refreshTimeout);
this.refreshTimeout=setTimeout(function(){e.refreshCurrentView()
},e.refreshTimer);
this._fetchPrograms()
},listAnimationEvent:function(k){k.preventDefault();
var f=b(k.currentTarget);
if(f.hasClass("disabled")){return
}var j=this.$sliderList;
var g=this.$sliderNext;
var l=true;
var h=this.dayWidth;
var e=Math.floor(j.parent().width()/this.dayWidth)-2;
if(f.hasClass("icon-next")){g=this.$sliderPrev;
l=false;
h=j.parent().width()-this.dayWidth-j.width()
}f.addClass("disabled");
j.animate({left:(l?"+=":"-=")+(this.dayWidth*e)},500,function(){var m=parseInt(j.css("left"));
if((l&&m<h)||(!l&&m>h)){f.removeClass("disabled")
}});
g.removeClass("disabled")
},toggleContentEvent:function(f){var e=b(f.currentTarget).parent();
if(!e.hasClass("tv-schedule__content__item__header--schedule")){if(e.hasClass("opened")){e.removeClass("opened");
this.$openedShow=null
}else{e.addClass("opened");
if(this.$openedShow!=null){this.$openedShow.removeClass("opened")
}this.$openedShow=e;
this.$openedShow.addClass("opened");
this._sendEvent(e)
}}},_fetchPrograms:function(){this.$programContainer=this.$(this.programContainerSelector);
this.$loader.show();
this.$programContainer.addClass("tv-schedule__content--fadeout");
var e=this,f=e._endpoint;
if(e._selectedDay){f=f+"."+e._selectedDay
}if(e.$dropDownLabel.text()){f=f+"."+e.$dropDownLabel.text()
}var g="?testmode="+b("#testmodeParam").val();
b.ajax({method:"GET",url:f+".html"+g,dataType:"html"}).done(b.proxy(e._insertPrograms,e))
},_insertPrograms:function(h){if(h){var e=b(h);
e.hide();
var f=window.Date.now();
var g=new RegExp("{{position}}","g");
b.each(e.find(".tv-schedule__content__ads"),function(j,k){k.innerHTML=k.innerHTML.replace(g,f++)
});
this.$programContainer.remove();
e.insertBefore(this.$loader);
e.fadeIn(400,"swing",function(){})
}else{this.$programContainer.remove()
}this.$loader.hide()
},_onWaypoint:function(e){if(e==="down"){this.$el.addClass("tv-schedule--fixed");
this.$slider.width(this.$el.width())
}else{this.$el.removeClass("tv-schedule--fixed")
}},_onScroll:function(f){var e=this.$el[0].getBoundingClientRect().bottom;
if(e<this.bottomTriggerPoint){this.sliderTouchBottom=true;
this.$el.removeClass("tv-schedule--fixed")
}else{if(this.sliderTouchBottom){this.$el.addClass("tv-schedule--fixed");
this.sliderTouchBottom=false
}}},onResize:function(e){if(this.$el.hasClass("tv-schedule--fixed")){this.$slider.width(this.$el.width())
}else{this.$slider.width("")
}},_initTimeZone:function(){var h=["ET","CT","MT","PT"];
var f=0;
var e=new Date();
var k=parseInt(-e.getTimezoneOffset()/60);
switch(k){case -5:f=0;
break;
case -6:f=1;
break;
case -7:f=2;
break;
case -8:f=3;
break
}var g="";
for(var j=0;
j<h.length;
j++){g+="<li class='tv-schedule__header__dropdown__list__item'>"+h[j]+"</li>"
}this.$(this.dropDownListSelector).html(g);
this.$dropDownLabel.text(h[f])
},_sendEvent:function(e){var f=e.find(".tv-schedule__content__item__header__title");
var g=f.text();
window.s.linkTrackVars="events,prop68,eVar68";
window.s.linkTrackEvents="event31";
window.s.prop68=g;
window.s.eVar68=g;
window.s.events="event31";
window.s.tl(this,"o",g)
},_sendDayEvent:function(e){window.s.linkTrackVars="prop67,eVar67";
window.s.prop67=e;
window.s.eVar67=e;
window.s.tl(this,"o",e)
}});
d.registerComponent("tv-schedule",c)
})(jQuery,Backbone,App);
(function(b,a,d){var c=a.View.extend({_TIMEOUT:10000,_regex:/^[0-9]{5}?$/,$submit:null,$input:null,initialize:function(){this.$submit=this.$(".chanel__finder-submit");
this.$input=this.$(".chanel__finder-zip");
this.$results=this.$(".chanel__finder-results");
this.$resultsList=this.$(".chanel__finder-list");
this.$noResults=this.$(".chanel__finder-no-results");
this.$errorZip=this.$(".chanel__finder-error-zip")
},events:{"focus .chanel__finder-zip":"clearValue","blur .chanel__finder-zip":"revertValue","keyup .chanel__finder-zip":"validateZip","click .chanel__finder-submit":"validateZip"},clearValue:function(e){var f=this.$input.val();
this.$input.data("placeholder",this.$input.attr("placeholder")).attr("placeholder","")
},revertValue:function(e){this.$input.attr("placeholder",this.$input.data("placeholder"))
},validateZip:function(e){this.$code=e.keyCode||e.which;
if(this.$code==13||e.type=="click"){if(this._regex.test(this.$input.val())){this.hideZipError();
this.submitForm()
}else{this.showZipError()
}this.hideResults();
this.hideNoResults()
}},submitForm:function(h){var f=document.location.href.substring(0,document.location.href.indexOf(".html"));
var g=this.$input.val();
var e=this;
b.ajax({url:f+".betchannelfinder.zipcode"+g+".json",success:function(l){if(l.length>0){var k="";
for(var j=0;
j<l.length;
j++){k+="<li><h4>"+l[j].providerName+"</h4><p>Channel "+l[j].channelNumber+"</p></li>"
}e.$resultsList.html("");
e.$resultsList.append(k);
e.showResults()
}else{e.showNoResults()
}}})
},showZipError:function(e){this.$errorZip.css({display:"block"})
},hideZipError:function(e){this.$errorZip.css({display:"none"})
},showResults:function(e){this.$results.css({display:"block"})
},hideResults:function(e){this.$results.css({display:"none"})
},showNoResults:function(e){this.$noResults.css({display:"block"})
},hideNoResults:function(e){this.$noResults.css({display:"none"})
}});
d.registerComponent("chanel__finder",c)
})(jQuery,Backbone,App);
(function(){(function(c,b,d){var a=b.View.extend({openClass:"open__sticky",events:{"click #moments__sticky__icon":"toggleSticky","click .sticky__item":"toggleSticky","click a.sticky__item__link":"onLinkClicked","click a.moments__sticky__item":"onLinkClicked"},initialize:function(){this.$sticky__wrapper=c(this.el);
this.$icon=this.$("#moments__sticky__icon");
this.$itemsContainer=this.$(".moments");
this.$items=this.$(".moments__sticky__items");
this.$all__items=this.$(".moments__sticky__all a");
this.$all__items__link=this.$all__items.attr("href");
this.createMomentsView();
c.subscribe("window:click",_.bind(this.onWindowClick,this))
},onWindowClick:function(h,g){var f=c(g.target);
if(f.closest(this.$sticky__wrapper).length==0&&this.$sticky__wrapper.hasClass(this.openClass)){this.toggleSticky()
}},toggleSticky:function(){if(this.$sticky__wrapper.hasClass(this.openClass)){this.$sticky__wrapper.removeClass(this.openClass);
window.s.linkTrackVars="events";
window.s.linkTrackEvents="event20";
window.s.events="event20";
window.s.tl(this,"o","event20")
}else{this.$sticky__wrapper.addClass(this.openClass);
window.s.linkTrackVars="events";
window.s.linkTrackEvents="event19";
window.s.events="event19";
window.s.tl(this,"o","event19")
}this.$itemsContainer.animate({height:"toggle"},"slow",function(){})
},getMomentsData:function(){var e=this.$icon.data("icon-json-service");
return c.ajax({url:e,dataType:"json",cache:true,async:true})
},createMomentsView:function(){var e=this;
e.$items.html("");
this.getMomentsData().done(function(f){var g=f.items.length;
if(g==5){e.$sticky__wrapper.show()
}_.each(f.items,function(l,k){var j=k+1,h=g-j;
var m=_.template('<div class="sticky__item sticky__item-'+h+'"><a data-position='+j+' data-content-title="<%=pageName%>" href="<%=link%>" class="sticky__item__link"><span class="sticky__item__image moments__sticky__item"><img src="<%=imageUrl%>"/></span><div class="sticky__item__info"><h3 class="sticky__item__title"><%=title%></h3></div></span></a></div>');
e.$items.append(m(l))
});
e.$items.addClass("moments-"+g)
}).error(function(f){console.error("Cannot obtain moments data from the server: ",f.message)
})
},onLinkClicked:function(l){var g=c(l.currentTarget),j=g.data("content-title"),f=g.data("position"),k=window.s.pageName,h=window.s.prop4+":moments banner:"+f;
window.s.linkTrackVars="events,prop57,eVar57,prop58,eVar58,prop59,eVar59";
window.s.linkTrackEvents="event4";
window.s.prop57=h;
window.s.eVar57=h;
window.s.prop58=k;
window.s.eVar58=k;
window.s.prop59=j;
window.s.eVar59=j;
window.s.events="event4";
window.s.tl(this,"o",j);
location.reload()
}});
d.registerComponent("moments__sticky__main",a)
})(jQuery,Backbone,App)
})();
(function(){(function(c,b,d){var a=b.View.extend({itemsCount:0,itemsStep:8,OPEN_LOADER_CLASS:"feed-container__loader--open",socialShareClassName:"feed__social",shareElClassName:"moments__share__comment",socialListClassName:"feed__social__list",socialLinkClassName:"feed__social__item",shareLinkClassName:"moments__share__comment__link",linkClassName:"moments__body a",titleClassName:"moments__title",imgClassName:"feed__thumb img",socialShareActiveClassName:"active",isScrolled:false,cantFollowNetworks:["whatsapp","email"],cantShareOnNetworks:["instagram","youtube"],events:{"click .moments__load__more":"loadMoreItems","click .moments__share__comment":"toggleShare"},initialize:function(){this.$moments_data=this.$("#momentscontainer").data("html-moments");
this.$moments_container=this.$(".moments__list__all");
this.url=this.$moments_data;
this.$link=this.$("."+this.linkClassName);
this.$title=this.$("."+this.titleClassName);
this.$img=this.$("."+this.imgClassName);
this.$loader=this.$(".feed-container__loader");
this.$window=c(window);
this.initLoadMore();
this.windowClick()
},initializeSocialLinks:function(f){var e=this;
if(this.$("."+this.socialListClassName).data("follow")){c.each(e.cantFollowNetworks,function(g,h){e.$(".icon-"+h).remove()
})
}else{c.each(e.cantShareOnNetworks,function(g,h){e.$(".icon-"+h).remove()
});
d.InitSocialLinks(e.$("."+this.socialLinkClassName),e.$title.text(),e.$link.attr("href"),f,this.$img.attr("srcset"))
}},videoThumbs:function(){if(d.Devices.is("desktop")){var e=c(".moments__video-wrapper"),f=c(".moments__video-iframe");
c.each(e,function(h,j){var g=c(j);
if(g.data("expired-video")==undefined){f[h].remove()
}});
e.on("click",function(){var k=c(this),j=k.find(".moments__video-placeholder");
var g={src:c(this).data("video-src")};
var h=_.template('<iframe webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true" src="<%=src%>" frameborder="0" class="moments__video-iframe"></iframe>');
k.append(h(g));
j.hide()
})
}},windowClick:function(f){var g=this;
this.$window.on("click",function(h){$target=c(h.target);
g.resetStates($target)
})
},resetStates:function(e){if(!e.hasClass(this.shareLinkClassName)){c("."+this.socialShareClassName).removeClass(this.socialShareActiveClassName)
}},toggleShare:function(h){var j=c(h.currentTarget),f=j.find(".moments__share__comment__link"),g=j.find(".feed__social");
if(c(h.target).hasClass(this.shareLinkClassName)){if(!g.hasClass(this.socialShareActiveClassName)){c("."+this.socialShareClassName).removeClass(this.socialShareActiveClassName);
g.addClass(this.socialShareActiveClassName)
}else{g.removeClass(this.socialShareActiveClassName)
}}return false
},updateShare:function(){var k=this,j=c(".moments__share__comment"),h,g,e,f;
_.each(j,function(n,u){var v=c(n),x=v.find(".feed__social"),o=x.data("share-url"),z=x.data("share-title"),q=x.data("share-image"),p=v.find(".moments__share__comment__link"),r=x.find(".feed__social__list"),y=r.find(".feed__social__item"),w=z===undefined?document.title:z,l=o===undefined?location.href:o,A=q===undefined?location.href:q,m=(/iP(hone|od|ad)/.test(navigator.userAgent));
_.each(y,function(C,B){var D=c(C);
h=null;
g=true;
e=true;
f=false;
switch(c(C).data("share")){case"facebook":h="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(l)+"&amp;title="+encodeURIComponent(w);
break;
case"twitter":h="https://twitter.com/intent/tweet?text="+encodeURIComponent(w+" "+l);
break;
case"tumblr":h="//tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl="+encodeURIComponent(l)+"&posttype=photo&content="+encodeURIComponent(A)+"&caption="+encodeURIComponent(w);
break;
case"gplus":h="https://plus.google.com/share?url="+encodeURIComponent(l);
break;
case"pinterest":f=true;
h="//pinterest.com/pin/create/button/?url="+encodeURIComponent(l)+"&media="+encodeURIComponent(A)+"&description="+encodeURIComponent(w);
break;
case"email":h="mailto:?subject="+w+"&body="+l;
g=false;
e=false;
break;
case"whatsapp":h="whatsapp://send?text="+w+" : "+l;
g=false;
e=false;
break;
default:break
}k.attachShareActions({elem:C,isPinterest:f,isAppleTouchUA:m,openPopup:e,title:w,href:h,insertBlankTarget:g,url:l})
})
})
},attachShareActions:function(j){var h=j.isPinterest?770:650,g=450,l=(c(window).width()-h)/2,f=(c(window).height()-g)/2,k="width="+h+",height="+g+",top="+f+",left="+l;
var m=c(j.elem);
var e=m.find("a");
e.off("click");
e.click(function(q){q.preventDefault();
q.stopPropagation();
var n=c(q.currentTarget);
if(j.cb){j.cb(n.parent().data("share"))
}var o=c(this).attr("href");
if(m.data("share")=="twitter"){var u,p;
if(j.url.lastIndexOf("#!")!=-1){p=j.url.substring(j.url.lastIndexOf("#!"))
}else{var r=j.url.lastIndexOf("#");
if(r!=-1&&r+1<j.url.length){p=j.url.substring(r)
}}if(p){u=j.url.substring(0,j.url.lastIndexOf("#"));
u=u+"?cid=twitter"+p
}else{u=j.url+"?cid=twitter"
}o="https://twitter.com/intent/tweet?text="+encodeURIComponent(j.title+" "+u);
window.open(o,j.title,k)
}else{if(!j.openPopup){window.location.href=o
}else{window.open(o,j.title,k)
}}});
if(j.href!=null){c(j.elem).find("a").attr("href",j.href);
c(j.elem).find("a").attr("target",j.insertBlankTarget?"_blank":"_parent")
}},loadMoreItems:function(f){f.preventDefault()
},totalItems:function(){var e=this.url.match("more.(.*).start")[1];
return e
},getMomentsData:function(){this.url=this.url.replace("start-"+(this.itemsCount-this.itemsStep),"start-"+this.itemsCount);
return c.ajax({url:this.url,method:"GET",cache:true,async:true})
},createMomentsView:function(){var e=this;
this.getMomentsData().done(function(f){var g=_.template(f,{});
e.$moments_container.append(g);
window.Waypoint.refreshAll();
e.$loader.addClass(e.OPEN_LOADER_CLASS);
e.updateShare();
e.videoThumbs();
if(!e.isScrolled){e.hasHash();
e.isScrolled=true
}}).error(function(f){console.error("Cannot obtain moments data from the server: ",f.message)
})
},initLoadMore:function(){var e=this;
e.$loader.waypoint(function(g){e.isVisible=g==="down";
if(e.isVisible&&e.isOnScreen(e.$loader)&&e.totalItems()>e.itemsCount){e.createMomentsView();
var f=Math.ceil(e.itemsCount/e.itemsStep);
if(f>0){e.sendEvent(f+1,"event8")
}e.itemsCount+=e.itemsStep
}else{if(e.totalItems()<=e.itemsCount){e.$loader.removeClass(e.OPEN_LOADER_CLASS)
}}},{offset:"100%"})
},sendEvent:function(f,e){window.s.linkTrackVars="events,prop52,eVar52";
window.s.linkTrackEvents=e;
window.s.prop52=f;
window.s.eVar52=f;
window.s.events=e;
window.s.tl(this,"o",f)
},isOnScreen:function(f){var e={};
e.top=this.$window.scrollTop();
e.bottom=e.top+this.$window.height();
var g={};
g.top=f.offset().top;
g.bottom=g.top+f.outerHeight();
return((g.top<=e.bottom)&&(g.bottom>=e.top))
},hasHash:function(){if(window.location.hash&&this.$el.length>0){var f=c(window.location.hash);
if(f.length>0){var e=180;
c("html, body").animate({scrollTop:f.offset().top-e},1000)
}}}});
d.registerComponent("momentscontainer",a)
})(jQuery,Backbone,App)
})();
(function(b,a,d){var c=a.View.extend({events:{},initialize:function(){this.$(".enhanced-carousel__gallery").slick({dots:true,infinite:true,speed:300,arrows:true,slidesToShow:1,centerMode:true,variableWidth:true,focusOnSelect:true,asNavFor:".enhanced-carousel__description",prevArrow:'<button type="button" class="slick-prev icon-previous">Previous</button>',nextArrow:'<button type="button" class="slick-next icon-next">Next</button>'});
this.$(".enhanced-carousel__description").slick({slidesToShow:1,slidesToScroll:1,speed:300,arrows:false,asNavFor:".enhanced-carousel__gallery"});
this.$(".enhanced-carousel__gallery__no-desc").slick({dots:true,infinite:true,speed:300,arrows:true,slidesToShow:1,centerMode:true,variableWidth:true,focusOnSelect:true,prevArrow:'<button type="button" class="slick-prev icon-previous">Previous</button>',nextArrow:'<button type="button" class="slick-next icon-next">Next</button>'})
}});
d.registerComponent("enhanced-carousel",c)
})(jQuery,Backbone,App);
(function(d,c,e){var a=e.Devices;
var b=c.View.extend({EnhancedGraphicCTASelector:"enhanced-graphic-cta__parallax",EnhancedGraphicCTABackgroundSelector:"enhanced-graphic-cta__bckg-img",EnhancedGraphicCTABackgroundRelativeSelector:"enhanced-graphic-cta__bckg__relative-wrapper",EnhancedGraphicCTABackgroundFixedSelector:"enhanced-graphic-cta__bckg__fixed-wrapper",FixedMobileClass:"fixed-mobile",$wrapper:null,$video:null,$heroTemplate:null,$heroPlace:null,$body:null,heroStarted:false,windowAspectRatio:false,defaultVideoHeight:535,events:{"click .enhanced-graphic-cta__wrapper":"onPlayerStartClicked","click .enhanced-graphic-cta__hero-wrapper":"removeHero"},initialize:function(){this.$EnhancedGraphicCTADom=d("."+this.EnhancedGraphicCTASelector);
this.$EnhancedGraphicCTABackgroundDom=d("."+this.EnhancedGraphicCTABackgroundSelector);
this.$EnhancedGraphicCTABackgroundRelativeDom=d("."+this.EnhancedGraphicCTABackgroundRelativeSelector);
this.$EnhancedGraphicCTABackgroundFixedDom=d("."+this.EnhancedGraphicCTABackgroundFixedSelector);
this.updateParallaxHeight();
this.isLite=this.$el.hasClass("enhanced-graphic-cta--lite");
this.$wrapper=this.$(".enhanced-graphic-cta__wrapper");
this.$heroTemplate=this.$(".hero-template").html();
if(a.is("mobile")){d("span#enhanced_video_close").css("font-size","15px")
}d.subscribe("enhancedLoader:complete",_.bind(function(){this.onResize()
},this));
d.subscribe("resize",_.bind(this.onResize,this));
if(e.$html.hasClass("apple-touch")&&this.$el.hasClass(this.EnhancedLayeredCTALiteClass)){this.$EnhancedLayeredCTABackgroundFixedDom.addClass("non-fixed");
d.subscribe("scroll",_.bind(this.onAppleScroll,this))
}if(a.is("mobile")||a.is("tablet")){d.subscribe("apple-orientationchange",_.bind(this.updateParallaxHeight,this))
}},onAppleScroll:function(f,g){if(g>this.initialScreenHeight){this.$EnhancedLayeredCTABackgroundFixedDom.removeClass("non-fixed")
}else{this.$EnhancedLayeredCTABackgroundFixedDom.addClass("non-fixed")
}},initializeParallax:function(){this.skrollrInstance=window.skrollr.init({mobileCheck:function(){return false
},forceHeight:false})
},onResize:function(){if(a.is("desktop")){this.updateParallaxHeight();
this.skrollrInstance.refresh()
}this.handleResize()
},updateParallaxHeight:function(){window.setTimeout(_.bind(function(){var f=e.$window.height()+100;
var g=d(".page__one-column");
if(!a.is("desktop")){if(this.$el.closest(g).length>0){this.$el.height(f/2);
this.$EnhancedGraphicCTABackgroundRelativeDom.height(f/2);
this.$EnhancedGraphicCTABackgroundDom.height(f);
this.$EnhancedGraphicCTABackgroundFixedDom.height(f)
}else{this.$el.height(f);
this.$el.find(this.$EnhancedGraphicCTABackgroundRelativeDom).height(f);
this.$el.find(this.$EnhancedGraphicCTABackgroundDom).height(f);
this.$el.find(this.$EnhancedGraphicCTABackgroundFixedDom).height(f)
}}this.initializeParallax();
this.skrollrInstance.refresh()
},this),500)
},onPlayerStartClicked:function(f){if(!this.heroStarted){this.$el.prepend(this.$heroTemplate);
this.checkWindowSize(jQuery(window).height(),jQuery(window).width());
this.setVideoSize();
this.$heroPlace=this.$(".enhanced-graphic-cta__hero-wrapper");
this.heroStarted=true;
this.$wrapper.css("pointer-events","none");
this.sendEvent()
}},checkWindowSize:function(g,f){if(g<f){this.windowAspectRatio=true
}else{this.windowAspectRatio=false
}return this.windowAspectRatio
},setVideoSize:function(){this.$video=this.$(".enhanced-graphic-cta__player-container");
var f,g;
if(jQuery(window).width()>Math.min(this.defaultVideoHeight*16/9)){f=this.defaultVideoHeight;
g=Math.min(f*16/9)
}else{g=Math.min(jQuery(window).width()-50);
f=Math.min(g*9/16)
}this.$video.height(f).width(g)
},handleResize:function(){if(this.$(".enhanced-graphic-cta__player-container").length!=0){this.checkWindowSize(jQuery(window).height(),jQuery(window).width());
this.setVideoSize()
}},removeHero:function(g){var f=d(g.target);
if(!this.$video.is(g.target)&&this.$video.has(g.target).length===0||f.hasClass("enhanced_video_close")){this.$heroPlace.remove();
this.heroStarted=false;
this.$wrapper.css("pointer-events","auto")
}},sendEvent:function(){var g=this.$el.data("content-title");
var f=window.s.prop4+":enhanced graphic";
window.s.linkTrackVars="events,prop57,eVar57,prop58,eVar58,prop59,eVar59";
window.s.linkTrackEvents="event4";
window.s.prop57=f;
window.s.eVar57=f;
window.s.prop58=window.s.prop7;
window.s.eVar58=window.s.eVar7;
window.s.prop59=g;
window.s.eVar59=g;
window.s.events="event4";
window.s.tl(this,"o",g)
}});
e.registerComponent("enhanced-graphic-cta",b)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({initialize:function(){window.addEventListener("load",_.bind(function(){if(this.$el.hasClass("optimize")){var e=false;
if(window.testParallaxInstance){if(window.testParallaxInstance.iy===0||window.testParallaxInstance.ix===0){c("html").addClass("no-gyro")
}else{c("html").addClass("has-gyro");
e=true
}}else{if(window.DeviceMotionEvent!=undefined){c("html").addClass("has-gyro");
e=true
}else{c("html").addClass("no-gyro")
}}var f=500;
if(e){f=2000
}setTimeout(function(){c(".loading").removeClass("loading");
window.removeEventListener("touchstart",window.blockTouch);
c.publish("enhancedLoader:complete")
},f)
}else{setTimeout(function(){c(".loading").removeClass("loading");
window.removeEventListener("touchstart",window.blockTouch);
c.publish("enhancedLoader:complete")
},500)
}},this))
}});
d.registerComponent("enhanced-loader",a)
})(jQuery,Backbone,App);
(function(b,a,c){var d=a.View.extend({initialize:function(){this.$title=this.$(".feed__title");
this.truncate();
b.subscribe("resize",_.bind(this.truncate,this))
},truncate:function(){this.$title.dotdotdot({ellipsis:"..."})
}});
c.registerComponent("ongoing-landing",d)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({truncateClass:"truncate",events:{},initialize:function(){this.$truncate=this.$("."+this.truncateClass);
this.truncate();
c.subscribe("resize",_.bind(this.onResize,this))
},truncate:function(){this.$truncate.dotdotdot()
},onResize:function(e){this.truncate()
}});
d.registerComponent("ongoing-inline",a)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({truncateClass:"truncate",events:{},initialize:function(){this.$truncate=this.$("."+this.truncateClass);
this.truncate();
c.subscribe("resize",_.bind(this.onResize,this))
},truncate:function(){this.$truncate.dotdotdot()
},onResize:function(e){this.truncate()
}});
d.registerComponent("ongoing-list",a)
})(jQuery,Backbone,App);
(function(){(function(c,b,d){var a=b.View.extend({_startIndex:0,events:{"click a.feed__link":"onLinkClicked"},onLinkClicked:function(l){var g=c(l.currentTarget);
var j=g.data("content-title");
var f=this.getItemPosition(g);
var k=window.s.pageName;
var h=window.s.prop4+":nextup:"+f;
window.s.linkTrackVars="events,prop57,eVar57,prop58,eVar58,prop59,eVar59";
window.s.linkTrackEvents="event4";
window.s.prop57=h;
window.s.eVar57=h;
window.s.prop58=k;
window.s.eVar58=k;
window.s.prop59=j;
window.s.eVar59=j;
window.s.events="event4";
window.s.tl(this,"o",j)
},getItemPosition:function(f){var l=f.data("position");
var j=".grid-container__feed";
var k=f.data("start-position")||this._startIndex;
var g;
var h;
var e;
if(l!=="DY"){return k+l
}j;
g=f.closest(j);
h=g.siblings(j).addBack();
e="DY:"+(k+h.index(g)+1);
return e
}});
d.registerComponent("nextup",a)
})(jQuery,Backbone,App)
})();
/*! KineticJS v5.0.1 2014-01-21 http://www.kineticjs.com by Eric Rowell @ericdrowell - MIT License https://github.com/ericdrowell/KineticJS/wiki/License*/
;
var Kinetic={};
!function(){Kinetic={version:"5.0.1",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,UA:function(){var d=navigator.userAgent.toLowerCase(),c=/(chrome)[ \/]([\w.]+)/.exec(d)||/(webkit)[ \/]([\w.]+)/.exec(d)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(d)||/(msie) ([\w.]+)/.exec(d)||d.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(d)||[];
return{browser:c[1]||"",version:c[2]||"0"}
}(),Filters:{},Node:function(b){this._init(b)
},Shape:function(b){this.__init(b)
},Container:function(b){this.__init(b)
},Stage:function(b){this.___init(b)
},Layer:function(b){this.___init(b)
},Group:function(b){this.___init(b)
},isDragging:function(){var b=Kinetic.DD;
return b?b.isDragging:!1
},isDragReady:function(){var b=Kinetic.DD;
return b?!!b.node:!1
},_addId:function(d,c){void 0!==c&&(this.ids[c]=d)
},_removeId:function(b){void 0!==b&&delete this.ids[b]
},_addName:function(d,c){void 0!==c&&(void 0===this.names[c]&&(this.names[c]=[]),this.names[c].push(d))
},_removeName:function(g,f){if(void 0!==g){var k=this.names[g];
if(void 0!==k){for(var j=0;
j<k.length;
j++){var h=k[j];
h._id===f&&k.splice(j,1)
}0===k.length&&delete this.names[g]
}}}}
}(),function(d,c){"object"==typeof exports?module.exports=c():"function"==typeof define&&define.amd?define(c):d.returnExports=c()
}(this,function(){return Kinetic
}),function(){Kinetic.Collection=function(){var e=[].slice.call(arguments),d=e.length,f=0;
for(this.length=d;
d>f;
f++){this[f]=e[f]
}return this
},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(d){for(var c=0;
c<this.length;
c++){d(this[c],c)
}},Kinetic.Collection.prototype.toArray=function(){var e,d=[],f=this.length;
for(e=0;
f>e;
e++){d.push(this[e])
}return d
},Kinetic.Collection.toCollection=function(f){var e,h=new Kinetic.Collection,g=f.length;
for(e=0;
g>e;
e++){h.push(f[e])
}return h
},Kinetic.Collection.mapMethods=function(e){var d,f=e.prototype;
for(d in f){!function(b){Kinetic.Collection.prototype[b]=function(){var a,g=this.length;
for(args=[].slice.call(arguments),a=0;
g>a;
a++){this[a][b].apply(this[a],args)
}return this
}
}(d)
}},Kinetic.Transform=function(){this.m=[1,0,0,1,0,0]
},Kinetic.Transform.prototype={translate:function(d,c){this.m[4]+=this.m[0]*d+this.m[2]*c,this.m[5]+=this.m[1]*d+this.m[3]*c
},scale:function(d,c){this.m[0]*=d,this.m[1]*=d,this.m[2]*=c,this.m[3]*=c
},rotate:function(j){var h=Math.cos(j),o=Math.sin(j),n=this.m[0]*h+this.m[2]*o,m=this.m[1]*h+this.m[3]*o,l=this.m[0]*-o+this.m[2]*h,k=this.m[1]*-o+this.m[3]*h;
this.m[0]=n,this.m[1]=m,this.m[2]=l,this.m[3]=k
},getTranslation:function(){return{x:this.m[4],y:this.m[5]}
},skew:function(h,g){var m=this.m[0]+this.m[2]*g,l=this.m[1]+this.m[3]*g,k=this.m[2]+this.m[0]*h,j=this.m[3]+this.m[1]*h;
this.m[0]=m,this.m[1]=l,this.m[2]=k,this.m[3]=j
},multiply:function(j){var h=this.m[0]*j.m[0]+this.m[2]*j.m[1],o=this.m[1]*j.m[0]+this.m[3]*j.m[1],n=this.m[0]*j.m[2]+this.m[2]*j.m[3],m=this.m[1]*j.m[2]+this.m[3]*j.m[3],l=this.m[0]*j.m[4]+this.m[2]*j.m[5]+this.m[4],k=this.m[1]*j.m[4]+this.m[3]*j.m[5]+this.m[5];
this.m[0]=h,this.m[1]=o,this.m[2]=n,this.m[3]=m,this.m[4]=l,this.m[5]=k
},invert:function(){var j=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),h=this.m[3]*j,o=-this.m[1]*j,n=-this.m[2]*j,m=this.m[0]*j,l=j*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),k=j*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);
this.m[0]=h,this.m[1]=o,this.m[2]=n,this.m[3]=m,this.m[4]=l,this.m[5]=k
},getMatrix:function(){return this.m
},setAbsolutePosition:function(K,J){var I=this.m[0],H=this.m[1],G=this.m[2],o=this.m[3],n=this.m[4],m=this.m[5],l=(I*(J-m)-H*(K-n))/(I*o-H*G),k=(K-n-G*l)/I;
this.translate(k,l)
}};
var F="canvas",E="2d",D="[object Array]",C="[object Number]",B="[object String]",A=Math.PI/180,z=180/Math.PI,y="#",x="",w="0",v="Kinetic warning: ",u="Kinetic error: ",r="rgb(",q={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},p=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;
Kinetic.Util={_isElement:function(b){return !(!b||1!=b.nodeType)
},_isFunction:function(b){return !!(b&&b.constructor&&b.call&&b.apply)
},_isObject:function(b){return !!b&&b.constructor==Object
},_isArray:function(b){return Object.prototype.toString.call(b)==D
},_isNumber:function(b){return Object.prototype.toString.call(b)==C
},_isString:function(b){return Object.prototype.toString.call(b)==B
},_hasMethods:function(e){var d,f=[];
for(d in e){this._isFunction(e[d])&&f.push(d)
}return f.length>0
},_isInDocument:function(b){for(;
b=b.parentNode;
){if(b==document){return !0
}}return !1
},_simplifyArray:function(h){var g,m,l=[],k=h.length,j=Kinetic.Util;
for(g=0;
k>g;
g++){m=h[g],j._isNumber(m)?m=Math.round(1000*m)/1000:j._isString(m)||(m=m.toString()),l.push(m)
}return l
},_getImage:function(h,g){var b,a;
h?this._isElement(h)?g(h):this._isString(h)?(b=new Image,b.onload=function(){g(b)
},b.src=h):h.data?(a=document.createElement(F),a.width=h.width,a.height=h.height,_context=a.getContext(E),_context.putImageData(h,0,0),this._getImage(a.toDataURL(),g)):g(null):g(null)
},_getRGBAString:function(g){var f=g.red||0,k=g.green||0,j=g.blue||0,h=g.alpha||1;
return["rgba(",f,",",k,",",j,",",h,")"].join(x)
},_rgbToHex:function(e,d,f){return((1<<24)+(e<<16)+(d<<8)+f).toString(16).slice(1)
},_hexToRgb:function(d){d=d.replace(y,x);
var c=parseInt(d,16);
return{r:255&c>>16,g:255&c>>8,b:255&c}
},getRandomColor:function(){for(var b=(16777215*Math.random()<<0).toString(16);
b.length<6;
){b=w+b
}return y+b
},get:function(d,c){return void 0===d?c:d
},getRGB:function(d){var c;
return d in q?(c=q[d],{r:c[0],g:c[1],b:c[2]}):d[0]===y?this._hexToRgb(d.substring(1)):d.substr(0,4)===r?(c=p.exec(d.replace(/ /g,"")),{r:parseInt(c[1],10),g:parseInt(c[2],10),b:parseInt(c[3],10)}):{r:0,g:0,b:0}
},_merge:function(f,e){var h=this._clone(e);
for(var g in f){h[g]=this._isObject(f[g])?this._merge(f[g],h[g]):f[g]
}return h
},cloneObject:function(e){var d={};
for(var f in e){d[f]=this._isObject(e[f])?this._clone(e[f]):e[f]
}return d
},cloneArray:function(b){return b.slice(0)
},_degToRad:function(b){return b*A
},_radToDeg:function(b){return b*z
},_capitalize:function(b){return b.charAt(0).toUpperCase()+b.slice(1)
},error:function(b){throw new Error(u+b)
},warn:function(b){window.console&&console.warn&&console.warn(v+b)
},extend:function(e,d){for(var f in d.prototype){f in e.prototype||(e.prototype[f]=d.prototype[f])
}},addMethods:function(e,d){var f;
for(f in d){e.prototype[f]=d[f]
}},_getControlPoints:function(U,T,S,R,Q,P,O){var N=Math.sqrt(Math.pow(S-U,2)+Math.pow(R-T,2)),M=Math.sqrt(Math.pow(Q-S,2)+Math.pow(P-R,2)),L=O*N/(N+M),K=O*M/(N+M),J=S-L*(Q-U),I=R-L*(P-T),H=S+K*(Q-U),G=R+K*(P-T);
return[J,I,H,G]
},_expandPoints:function(h,g){var m,l,k=h.length,j=[];
for(m=2;
k-2>m;
m+=2){l=Kinetic.Util._getControlPoints(h[m-2],h[m-1],h[m],h[m+1],h[m+2],h[m+3],g),j.push(l[0]),j.push(l[1]),j.push(h[m]),j.push(h[m+1]),j.push(l[2]),j.push(l[3])
}return j
},_removeLastLetter:function(b){return b.substring(0,b.length-1)
}}
}(),function(){var g=document.createElement("canvas"),f=g.getContext("2d"),k=window.devicePixelRatio||1,j=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1,h=k/j;
Kinetic.Canvas=function(b){this.init(b)
},Kinetic.Canvas.prototype={init:function(d){d=d||{};
var c=d.pixelRatio||Kinetic.pixelRatio||h;
this.pixelRatio=c,this._canvas=document.createElement("canvas"),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0
},getContext:function(){return this.context
},getPixelRatio:function(){return this.pixelRatio
},setPixelRatio:function(b){this.pixelRatio=b,this.setSize(this.getWidth(),this.getHeight())
},setWidth:function(b){this.width=this._canvas.width=b*this.pixelRatio,this._canvas.style.width=b+"px"
},setHeight:function(b){this.height=this._canvas.height=b*this.pixelRatio,this._canvas.style.height=b+"px"
},getWidth:function(){return this.width
},getHeight:function(){return this.height
},setSize:function(d,c){this.setWidth(d),this.setHeight(c)
},toDataURL:function(l,e){try{return this._canvas.toDataURL(l,e)
}catch(n){try{return this._canvas.toDataURL()
}catch(m){return Kinetic.Util.warn("Unable to get data URL. "+m.message),""
}}}},Kinetic.SceneCanvas=function(e){e=e||{};
var d=e.width||0,l=e.height||0;
Kinetic.Canvas.call(this,e),this.context=new Kinetic.SceneContext(this),this.setSize(d,l)
},Kinetic.SceneCanvas.prototype={setWidth:function(e){var d=this.pixelRatio,l=this.getContext()._context;
Kinetic.Canvas.prototype.setWidth.call(this,e),l.scale(d,d)
},setHeight:function(e){var d=this.pixelRatio,l=this.getContext()._context;
Kinetic.Canvas.prototype.setHeight.call(this,e),l.scale(d,d)
}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(e){e=e||{};
var d=e.width||0,l=e.height||0;
Kinetic.Canvas.call(this,e),this.context=new Kinetic.HitContext(this),this.setSize(d,l)
},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)
}(),function(){var r=",",q="(",p=")",o="([",n="])",m=";",l="()",k="=",j=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];
Kinetic.Context=function(b){this.init(b)
},Kinetic.Context.prototype={init:function(b){this.canvas=b,this._context=b._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())
},fillShape:function(b){b.getFillEnabled()&&this._fill(b)
},strokeShape:function(b){b.getStrokeEnabled()&&this._stroke(b)
},fillStrokeShape:function(d){var c=d.getFillEnabled();
c&&this._fill(d),d.getStrokeEnabled()&&this._stroke(d)
},getTrace:function(e){var d,c,b,a,h=this.traceArr,g=h.length,f="";
for(d=0;
g>d;
d++){c=h[d],b=c.method,b?(a=c.args,f+=b,f+=e?l:Kinetic.Util._isArray(a[0])?o+a.join(r)+n:q+a.join(r)+p):(f+=c.property,e||(f+=k+c.val)),f+=m
}return f
},clearTrace:function(){this.traceArr=[]
},_trace:function(e){var d,f=this.traceArr;
f.push(e),d=f.length,d>=Kinetic.traceArrMax&&f.shift()
},reset:function(){var b=this.getCanvas().getPixelRatio();
this.setTransform(1*b,0,0,1*b,0,0)
},getCanvas:function(){return this.canvas
},clear:function(d){var c=this.getCanvas();
d?this.clearRect(d.x||0,d.y||0,d.width||0,d.height||0):this.clearRect(0,0,c.getWidth(),c.getHeight())
},_applyLineCap:function(d){var c=d.getLineCap();
c&&this.setAttr("lineCap",c)
},_applyOpacity:function(d){var c=d.getAbsoluteOpacity();
1!==c&&this.setAttr("globalAlpha",c)
},_applyLineJoin:function(d){var c=d.getLineJoin();
c&&this.setAttr("lineJoin",c)
},_applyTransform:function(e){var d,f=e.getTransformsEnabled();
"all"===f?(d=e.getAbsoluteTransform().getMatrix(),this.transform(d[0],d[1],d[2],d[3],d[4],d[5])):"position"===f&&this.translate(e.getX(),e.getY())
},setAttr:function(d,c){this._context[d]=c
},arc:function(){var b=arguments;
this._context.arc(b[0],b[1],b[2],b[3],b[4],b[5])
},beginPath:function(){this._context.beginPath()
},bezierCurveTo:function(){var b=arguments;
this._context.bezierCurveTo(b[0],b[1],b[2],b[3],b[4],b[5])
},clearRect:function(){var b=arguments;
this._context.clearRect(b[0],b[1],b[2],b[3])
},clip:function(){this._context.clip()
},closePath:function(){this._context.closePath()
},createImageData:function(){var b=arguments;
return 2===b.length?this._context.createImageData(b[0],b[1]):1===b.length?this._context.createImageData(b[0]):void 0
},createLinearGradient:function(){var b=arguments;
return this._context.createLinearGradient(b[0],b[1],b[2],b[3])
},createPattern:function(){var b=arguments;
return this._context.createPattern(b[0],b[1])
},createRadialGradient:function(){var b=arguments;
return this._context.createRadialGradient(b[0],b[1],b[2],b[3],b[4],b[5])
},drawImage:function(){var d=arguments,c=this._context;
3===d.length?c.drawImage(d[0],d[1],d[2]):5===d.length?c.drawImage(d[0],d[1],d[2],d[3],d[4]):9===d.length&&c.drawImage(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8])
},fill:function(){this._context.fill()
},fillText:function(){var b=arguments;
this._context.fillText(b[0],b[1],b[2])
},getImageData:function(){var b=arguments;
return this._context.getImageData(b[0],b[1],b[2],b[3])
},lineTo:function(){var b=arguments;
this._context.lineTo(b[0],b[1])
},moveTo:function(){var b=arguments;
this._context.moveTo(b[0],b[1])
},rect:function(){var b=arguments;
this._context.rect(b[0],b[1],b[2],b[3])
},putImageData:function(){var b=arguments;
this._context.putImageData(b[0],b[1],b[2])
},quadraticCurveTo:function(){var b=arguments;
this._context.quadraticCurveTo(b[0],b[1],b[2],b[3])
},restore:function(){this._context.restore()
},rotate:function(){var b=arguments;
this._context.rotate(b[0])
},save:function(){this._context.save()
},scale:function(){var b=arguments;
this._context.scale(b[0],b[1])
},setLineDash:function(){var d=arguments,c=this._context;
this._context.setLineDash?c.setLineDash(d[0]):"mozDash" in c?c.mozDash=d[0]:"webkitLineDash" in c&&(c.webkitLineDash=d[0])
},setTransform:function(){var b=arguments;
this._context.setTransform(b[0],b[1],b[2],b[3],b[4],b[5])
},stroke:function(){this._context.stroke()
},strokeText:function(){var b=arguments;
this._context.strokeText(b[0],b[1],b[2])
},transform:function(){var b=arguments;
this._context.transform(b[0],b[1],b[2],b[3],b[4],b[5])
},translate:function(){var b=arguments;
this._context.translate(b[0],b[1])
},_enableTrace:function(){var h,g,x=this,w=j.length,v=Kinetic.Util._simplifyArray,u=this.setAttr;
for(h=0;
w>h;
h++){!function(b){var e,c=x[b];
x[b]=function(){return g=v(Array.prototype.slice.call(arguments,0)),e=c.apply(x,arguments),x._trace({method:b,args:g}),e
}
}(j[h])
}x.setAttr=function(){u.apply(x,arguments),x._trace({property:arguments[0],val:arguments[1]})
}
}},Kinetic.SceneContext=function(b){Kinetic.Context.call(this,b)
},Kinetic.SceneContext.prototype={_fillColor:function(d){var c=d.fill()||Kinetic.Util._getRGBAString({red:d.fillRed(),green:d.fillGreen(),blue:d.fillBlue(),alpha:d.fillAlpha()});
this.setAttr("fillStyle",c),d._fillFunc(this)
},_fillPattern:function(v){var u=v.getFillPatternImage(),B=v.getFillPatternX(),A=v.getFillPatternY(),z=v.getFillPatternScale(),y=v.getFillPatternRotation(),x=v.getFillPatternOffset(),w=v.getFillPatternRepeat();
(B||A)&&this.translate(B||0,A||0),y&&this.rotate(y),z&&this.scale(z.x,z.y),x&&this.translate(-1*x.x,-1*x.y),this.setAttr("fillStyle",this.createPattern(u,w||"repeat")),this.fill()
},_fillLinearGradient:function(h){var g=h.getFillLinearGradientStartPoint(),x=h.getFillLinearGradientEndPoint(),w=h.getFillLinearGradientColorStops(),v=this.createLinearGradient(g.x,g.y,x.x,x.y);
if(w){for(var u=0;
u<w.length;
u+=2){v.addColorStop(w[u],w[u+1])
}this.setAttr("fillStyle",v),this.fill()
}},_fillRadialGradient:function(v){for(var u=v.getFillRadialGradientStartPoint(),B=v.getFillRadialGradientEndPoint(),A=v.getFillRadialGradientStartRadius(),z=v.getFillRadialGradientEndRadius(),y=v.getFillRadialGradientColorStops(),x=this.createRadialGradient(u.x,u.y,A,B.x,B.y,z),w=0;
w<y.length;
w+=2){x.addColorStop(y[w],y[w+1])
}this.setAttr("fillStyle",x),this.fill()
},_fill:function(h){var g=h.fill()||h.fillRed()||h.fillGreen()||h.fillBlue(),x=h.getFillPatternImage(),w=h.getFillLinearGradientColorStops(),v=h.getFillRadialGradientColorStops(),u=h.getFillPriority();
g&&"color"===u?this._fillColor(h):x&&"pattern"===u?this._fillPattern(h):w&&"linear-gradient"===u?this._fillLinearGradient(h):v&&"radial-gradient"===u?this._fillRadialGradient(h):g?this._fillColor(h):x?this._fillPattern(h):w?this._fillLinearGradient(h):v&&this._fillRadialGradient(h)
},_stroke:function(e){var d=e.dash(),f=e.getStrokeScaleEnabled();
e.hasStroke()&&(f||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(e),d&&e.dashEnabled()&&this.setLineDash(d),this.setAttr("lineWidth",e.strokeWidth()),this.setAttr("strokeStyle",e.stroke()||Kinetic.Util._getRGBAString({red:e.strokeRed(),green:e.strokeGreen(),blue:e.strokeBlue(),alpha:e.strokeAlpha()})),e._strokeFunc(this),f||this.restore())
},_applyShadow:function(u){var h=Kinetic.Util,z=u.getAbsoluteOpacity(),y=h.get(u.getShadowColor(),"black"),x=h.get(u.getShadowBlur(),5),w=h.get(u.getShadowOpacity(),0),v=h.get(u.getShadowOffset(),{x:0,y:0});
w&&this.setAttr("globalAlpha",w*z),this.setAttr("shadowColor",y),this.setAttr("shadowBlur",x),this.setAttr("shadowOffsetX",v.x),this.setAttr("shadowOffsetY",v.y)
}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(b){Kinetic.Context.call(this,b)
},Kinetic.HitContext.prototype={_fill:function(b){this.save(),this.setAttr("fillStyle",b.colorKey),b._fillFuncHit(this),this.restore()
},_stroke:function(b){b.hasStroke()&&(this._applyLineCap(b),this.setAttr("lineWidth",b.strokeWidth()),this.setAttr("strokeStyle",b.colorKey),b._strokeFuncHit(this))
}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)
}(),function(){var d="get",c="set";
Kinetic.Factory={addGetterSetter:function(g,f,k,j,h){this.addGetter(g,f,k),this.addSetter(g,f,j,h),this.addOverloadedGetterSetter(g,f)
},addGetter:function(a,h,g){var f=d+Kinetic.Util._capitalize(h);
a.prototype[f]=function(){var b=this.attrs[h];
return void 0===b?g:b
}
},addSetter:function(b,k,j,h){var g=c+Kinetic.Util._capitalize(k);
b.prototype[g]=function(e){return j&&(e=j.call(this,e)),this._setAttr(k,e),h&&h.call(this),this
}
},addComponentsGetterSetter:function(x,w,v,u,r){var q,p,o=v.length,n=Kinetic.Util._capitalize,b=d+n(w),a=c+n(w);
x.prototype[b]=function(){var e={};
for(q=0;
o>q;
q++){p=v[q],e[p]=this.getAttr(w+n(p))
}return e
},x.prototype[a]=function(f){var e,g=this.attrs[w];
u&&(f=u.call(this,f));
for(e in f){this._setAttr(w+n(e),f[e])
}return this._fireChangeEvent(w,g,f),r&&r.call(this),this
},this.addOverloadedGetterSetter(x,w)
},addOverloadedGetterSetter:function(k,j){var h=Kinetic.Util._capitalize(j),b=c+h,a=d+h;
k.prototype[j]=function(){return arguments.length?(this[b](arguments[0]),this):this[a]()
}
},backCompat:function(f,e){var g;
for(g in e){f.prototype[g]=f.prototype[e[g]]
}},afterSetFilter:function(){this._filterUpToDate=!1
}},Kinetic.Validators={RGBComponent:function(b){return b>255?255:0>b?0:Math.round(b)
},alphaComponent:function(b){return b>1?1:0.0001>b?0.0001:b
}}
}(),function(){var R="absoluteOpacity",Q="absoluteTransform",P="before",O="Change",N="children",M=".",L="",K="get",J="id",I="kinetic",H="listening",G="mouseenter",F="mouseleave",E="name",D="set",C="Shape",B=" ",A="stage",z="transform",y="Stage",x="visible",w=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(B);
Kinetic.Util.addMethods(Kinetic.Node,{_init:function(b){var a=this;
this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(b),this.on(w,function(){this._clearCache(z),a._clearSelfAndDescendantCache(Q)
}),this.on("visibleChange.kinetic",function(){a._clearSelfAndDescendantCache(x)
}),this.on("listeningChange.kinetic",function(){a._clearSelfAndDescendantCache(H)
}),this.on("opacityChange.kinetic",function(){a._clearSelfAndDescendantCache(R)
})
},_clearCache:function(b){b?delete this._cache[b]:this._cache={}
},_getCache:function(e,d){var f=this._cache[e];
return void 0===f&&(this._cache[e]=d.call(this)),this._cache[e]
},_clearSelfAndDescendantCache:function(b){this._clearCache(b),this.children&&this.getChildren().each(function(a){a._clearSelfAndDescendantCache(b)
})
},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this
},cache:function(Z){var Y,X=Z||{},W=X.x||0,V=X.y||0,U=X.width||this.width(),T=X.height||this.height(),S=X.drawBorder||!1,v=new Kinetic.SceneCanvas({pixelRatio:1,width:U,height:T}),u=new Kinetic.SceneCanvas({pixelRatio:1,width:U,height:T}),r=new Kinetic.HitCanvas({width:U,height:T}),q=this.transformsEnabled(),p=this.x(),o=this.y();
return this.clearCache(),this.transformsEnabled("position"),this.x(-1*W),this.y(-1*V),this.drawScene(v),this.drawHit(r),S&&(Y=v.getContext(),Y.save(),Y.beginPath(),Y.rect(0,0,U,T),Y.closePath(),Y.setAttr("strokeStyle","red"),Y.setAttr("lineWidth",5),Y.stroke(),Y.restore()),this.x(p),this.y(o),this.transformsEnabled(q),this._cache.canvas={scene:v,filter:u,hit:r},this
},_drawCachedSceneCanvas:function(b){b.save(),b._applyTransform(this),b.drawImage(this._getCachedSceneCanvas()._canvas,0,0),b.restore()
},_getCachedSceneCanvas:function(){var v,u,r,q,p=this.filters(),o=this._cache.canvas,n=o.scene,m=o.filter,l=m.getContext();
if(p){if(!this._filterUpToDate){try{for(v=p.length,l.clear(),l.drawImage(n._canvas,0,0),u=l.getImageData(0,0,m.getWidth(),m.getHeight()),r=0;
v>r;
r++){q=p[r],q.call(this,u),l.putImageData(u,0,0)
}}catch(k){Kinetic.Util.warn("Unable to apply filter. "+k.message)
}this._filterUpToDate=!0
}return m
}return n
},_drawCachedHitCanvas:function(e){var d=this._cache.canvas,f=d.hit;
e.save(),e._applyTransform(this),e.drawImage(f._canvas,0,0),e.restore()
},on:function(r,q){var p,o,n,m,l,g=r.split(B),f=g.length;
for(p=0;
f>p;
p++){o=g[p],n=o.split(M),m=n[0],l=n[1]||L,this.eventListeners[m]||(this.eventListeners[m]=[]),this.eventListeners[m].push({name:l,handler:q})
}return this
},off:function(r){var q,p,o,n,m,l,k=r.split(B),f=k.length;
for(q=0;
f>q;
q++){if(o=k[q],n=o.split(M),m=n[0],l=n[1],m){this.eventListeners[m]&&this._off(m,l)
}else{for(p in this.eventListeners){this._off(p,l)
}}}return this
},remove:function(){var a=this.getParent();
return a&&a.children&&(a.children.splice(this.index,1),a._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(A),this._clearSelfAndDescendantCache(Q),this._clearSelfAndDescendantCache(x),this._clearSelfAndDescendantCache(H),this._clearSelfAndDescendantCache(R),this
},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()
},getAttr:function(d){var c=K+Kinetic.Util._capitalize(d);
return Kinetic.Util._isFunction(this[c])?this[c]():this.attrs[d]
},getAncestors:function(){for(var d=this.getParent(),c=new Kinetic.Collection;
d;
){c.push(d),d=d.getParent()
}return c
},getAttrs:function(){return this.attrs||{}
},setAttrs:function(e){var d,f;
if(e){for(d in e){d===N||(f=D+Kinetic.Util._capitalize(d),Kinetic.Util._isFunction(this[f])?this[f](e[d]):this._setAttr(d,e[d]))
}}return this
},isListening:function(){return this._getCache(H,this._isListening)
},_isListening:function(){var d=this.getListening(),c=this.getParent();
return"inherit"===d?c?c.isListening():!0:d
},isVisible:function(){return this._getCache(x,this._isVisible)
},_isVisible:function(){var d=this.getVisible(),c=this.getParent();
return"inherit"===d?c?c.isVisible():!0:d
},shouldDrawHit:function(){var b=this.getLayer();
return b&&b.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()
},show:function(){return this.setVisible(!0),this
},hide:function(){return this.setVisible(!1),this
},getZIndex:function(){return this.index||0
},getAbsoluteZIndex:function(){function k(a){for(j=[],q=a.length,p=0;
q>p;
p++){o=a[p],l++,o.nodeType!==C&&(j=j.concat(o.getChildren().toArray())),o._id===m._id&&(p=q)
}j.length>0&&j[0].getDepth()<=n&&k(j)
}var j,q,p,o,n=this.getDepth(),m=this,l=0;
return m.nodeType!==y&&k(m.getStage().getChildren()),l
},getDepth:function(){for(var d=0,c=this.parent;
c;
){d++,c=c.parent
}return d
},setPosition:function(b){return this.setX(b.x),this.setY(b.y),this
},getPosition:function(){return{x:this.getX(),y:this.getY()}
},getAbsolutePosition:function(){var e=this.getAbsoluteTransform().getMatrix(),d=new Kinetic.Transform,f=this.offset();
return d.m=e.slice(),d.translate(f.x,f.y),d.getTranslation()
},setAbsolutePosition:function(e){var d,f=this._clearTransform();
return this.attrs.x=f.x,this.attrs.y=f.y,delete f.x,delete f.y,d=this.getAbsoluteTransform(),d.invert(),d.translate(e.x,e.y),e={x:this.attrs.x+d.getTranslation().x,y:this.attrs.y+d.getTranslation().y},this.setPosition({x:e.x,y:e.y}),this._setTransform(f),this
},_setTransform:function(b){var d;
for(d in b){this.attrs[d]=b[d]
}this._clearCache(z),this._clearSelfAndDescendantCache(Q)
},_clearTransform:function(){var b={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};
return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(z),this._clearSelfAndDescendantCache(Q),b
},move:function(g){var f=g.x,k=g.y,j=this.getX(),h=this.getY();
return void 0!==f&&(j+=f),void 0!==k&&(h+=k),this.setPosition({x:j,y:h}),this
},_eachAncestorReverse:function(h,g){var m,l,k=[],j=this.getParent();
for(g&&k.unshift(this);
j;
){k.unshift(j),j=j.parent
}for(m=k.length,l=0;
m>l;
l++){h(k[l])
}},rotate:function(b){return this.setRotation(this.getRotation()+b),this
},moveToTop:function(){var b=this.index;
return this.parent.children.splice(b,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0
},moveUp:function(){var d=this.index,c=this.parent.getChildren().length;
return c-1>d?(this.parent.children.splice(d,1),this.parent.children.splice(d+1,0,this),this.parent._setChildrenIndices(),!0):!1
},moveDown:function(){var b=this.index;
return b>0?(this.parent.children.splice(b,1),this.parent.children.splice(b-1,0,this),this.parent._setChildrenIndices(),!0):!1
},moveToBottom:function(){var b=this.index;
return b>0?(this.parent.children.splice(b,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1
},setZIndex:function(d){var c=this.index;
return this.parent.children.splice(c,1),this.parent.children.splice(d,0,this),this.parent._setChildrenIndices(),this
},getAbsoluteOpacity:function(){return this._getCache(R,this._getAbsoluteOpacity)
},_getAbsoluteOpacity:function(){var b=this.getOpacity();
return this.getParent()&&(b*=this.getParent().getAbsoluteOpacity()),b
},moveTo:function(b){return Kinetic.Node.prototype.remove.call(this),b.add(this),this
},toObject:function(){var j,h,o,n,m=Kinetic.Util,l={},k=this.getAttrs();
l.attrs={};
for(j in k){h=k[j],m._isFunction(h)||m._isElement(h)||m._isObject(h)&&m._hasMethods(h)||(o=this[j],delete k[j],n=o?o.call(this):null,k[j]=h,n!==h&&(l.attrs[j]=h))
}return l.className=this.getClassName(),l
},toJSON:function(){return JSON.stringify(this.toObject())
},getParent:function(){return this.parent
},getLayer:function(){var b=this.getParent();
return b?b.getLayer():null
},getStage:function(){return this._getCache(A,this._getStage)
},_getStage:function(){var b=this.getParent();
return b?b.getStage():void 0
},fire:function(e,d,f){return f?this._fireAndBubble(e,d||{}):this._fire(e,d||{}),this
},getAbsoluteTransform:function(){return this._getCache(Q,this._getAbsoluteTransform)
},_getAbsoluteTransform:function(){var e,d,f=new Kinetic.Transform;
return this._eachAncestorReverse(function(a){e=a.transformsEnabled(),d=a.getTransform(),"all"===e?f.multiply(d):"position"===e&&f.translate(a.x(),a.y())
},!0),f
},getTransform:function(){return this._getCache(z,this._getTransform)
},_getTransform:function(){var v=new Kinetic.Transform,u=this.getX(),r=this.getY(),q=this.getRotation()*Math.PI/180,p=this.getScaleX(),o=this.getScaleY(),n=this.getSkewX(),m=this.getSkewY(),l=this.getOffsetX(),k=this.getOffsetY();
return(0!==u||0!==r)&&v.translate(u,r),0!==q&&v.rotate(q),(0!==n||0!==m)&&v.skew(n,m),(1!==p||1!==o)&&v.scale(p,o),(0!==l||0!==k)&&v.translate(-1*l,-1*k),v
},clone:function(k){var j,q,p,o,n,m=this.getClassName(),l=new Kinetic[m](this.attrs);
for(j in this.eventListeners){for(q=this.eventListeners[j],p=q.length,o=0;
p>o;
o++){n=q[o],n.name.indexOf(I)<0&&(l.eventListeners[j]||(l.eventListeners[j]=[]),l.eventListeners[j].push(n))
}}return l.setAttrs(k),l
},toDataURL:function(k){k=k||{};
var j=k.mimeType||null,q=k.quality||null,p=this.getStage(),o=k.x||0,n=k.y||0,m=new Kinetic.SceneCanvas({width:k.width||this.getWidth()||(p?p.getWidth():0),height:k.height||this.getHeight()||(p?p.getHeight():0),pixelRatio:1}),l=m.getContext();
return l.save(),(o||n)&&l.translate(-1*o,-1*n),this.drawScene(m),l.restore(),m.toDataURL(j,q)
},toImage:function(b){Kinetic.Util._getImage(this.toDataURL(b),function(a){b.callback(a)
})
},setSize:function(b){return this.setWidth(b.width),this.setHeight(b.height),this
},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}
},getWidth:function(){return this.attrs.width||0
},getHeight:function(){return this.attrs.height||0
},getClassName:function(){return this.className||this.nodeType
},getType:function(){return this.nodeType
},_get:function(b){return this.nodeType===b?[this]:[]
},_off:function(g,f){var k,j,h=this.eventListeners[g];
for(k=0;
k<h.length;
k++){if(j=h[k].name,!("kinetic"===j&&"kinetic"!==f||f&&j!==f)){if(h.splice(k,1),0===h.length){delete this.eventListeners[g];
break
}k--
}}},_fireBeforeChangeEvent:function(d,c,f){this._fire([P,Kinetic.Util._capitalize(d),O].join(L),{oldVal:c,newVal:f})
},_fireChangeEvent:function(e,d,f){this._fire(e+O,{oldVal:d,newVal:f})
},setId:function(d){var c=this.getId();
return Kinetic._removeId(c),Kinetic._addId(this,d),this._setAttr(J,d),this
},setName:function(d){var c=this.getName();
return Kinetic._removeName(c,this._id),Kinetic._addName(this,d),this._setAttr(E,d),this
},setAttr:function(){var g=Array.prototype.slice.call(arguments),f=g[0],k=g[1],j=D+Kinetic.Util._capitalize(f),h=this[j];
return Kinetic.Util._isFunction(h)?h.call(this,k):this._setAttr(f,k),this
},_setAttr:function(e,d){var f;
void 0!==d&&(f=this.attrs[e],this.attrs[e]=d,this._fireChangeEvent(e,f,d))
},_setComponentAttr:function(f,e,h){var g;
void 0!==h&&(g=this.attrs[f],g||(this.attrs[f]=this.getAttr(f)),this.attrs[f][e]=h,this._fireChangeEvent(f,g,h))
},_fireAndBubble:function(f,e,h){var g=!0;
e&&this.nodeType===C&&(e.targetNode=this),f===G&&h&&this._id===h._id?g=!1:f===F&&h&&this._id===h._id&&(g=!1),g&&(this._fire(f,e),e&&!e.cancelBubble&&this.parent&&(h&&h.parent?this._fireAndBubble.call(this.parent,f,e,h.parent):this._fireAndBubble.call(this.parent,f,e)))
},_fire:function(f,e){var h,g=this.eventListeners[f];
if(g){for(h=0;
h<g.length;
h++){g[h].handler.call(this,e)
}}},draw:function(){return this.drawScene(),this.drawHit(),this
}}),Kinetic.Node.create=function(d,c){return this._createNode(JSON.parse(d),c)
},Kinetic.Node._createNode=function(j,h){var o,n,m,l=Kinetic.Node.prototype.getClassName.call(j),k=j.children;
if(h&&(j.attrs.container=h),o=new Kinetic[l](j.attrs),k){for(n=k.length,m=0;
n>m;
m++){o.add(this._createNode(k[m]))
}}return o
},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(b){return this._filterUpToDate=!1,b
}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)
}(),function(){Kinetic.Filters.Grayscale=function(g){var f,k,j=g.data,h=j.length;
for(f=0;
h>f;
f+=4){k=0.34*j[f]+0.5*j[f+1]+0.16*j[f+2],j[f]=k,j[f+1]=k,j[f+2]=k
}}
}(),function(){Kinetic.Filters.Brighten=function(g){var f,k=255*this.brightness(),j=g.data,h=j.length;
for(f=0;
h>f;
f+=4){j[f]+=k,j[f+1]+=k,j[f+2]+=k
}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)
}(),function(){Kinetic.Filters.Invert=function(f){var e,h=f.data,g=h.length;
for(e=0;
g>e;
e+=4){h[e]=255-h[e],h[e+1]=255-h[e+1],h[e+2]=255-h[e+2]
}}
}(),function(){function f(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null
}function e(aE,aD){var aC,aB,aA,az,ay,ax,aw,av,au,at,ar,aq,ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ae,ad=aE.data,ac=aE.width,ab=aE.height,aa=aD+aD+1,Z=ac-1,Y=ab-1,X=aD+1,W=X*(X+1)/2,V=new f,U=null,T=V,S=null,d=null,c=h[aD],a=g[aD];
for(aA=1;
aa>aA;
aA++){T=T.next=new f,aA==X&&(U=T)
}for(T.next=V,aw=ax=0,aB=0;
ab>aB;
aB++){for(am=al=ak=aj=av=au=at=ar=0,aq=X*(ai=ad[ax]),ap=X*(ah=ad[ax+1]),ao=X*(ag=ad[ax+2]),an=X*(af=ad[ax+3]),av+=W*ai,au+=W*ah,at+=W*ag,ar+=W*af,T=V,aA=0;
X>aA;
aA++){T.r=ai,T.g=ah,T.b=ag,T.a=af,T=T.next
}for(aA=1;
X>aA;
aA++){az=ax+((aA>Z?Z:aA)<<2),av+=(T.r=ai=ad[az])*(ae=X-aA),au+=(T.g=ah=ad[az+1])*ae,at+=(T.b=ag=ad[az+2])*ae,ar+=(T.a=af=ad[az+3])*ae,am+=ai,al+=ah,ak+=ag,aj+=af,T=T.next
}for(S=V,d=U,aC=0;
ac>aC;
aC++){ad[ax+3]=af=ar*c>>a,0!==af?(af=255/af,ad[ax]=(av*c>>a)*af,ad[ax+1]=(au*c>>a)*af,ad[ax+2]=(at*c>>a)*af):ad[ax]=ad[ax+1]=ad[ax+2]=0,av-=aq,au-=ap,at-=ao,ar-=an,aq-=S.r,ap-=S.g,ao-=S.b,an-=S.a,az=aw+((az=aC+aD+1)<Z?az:Z)<<2,am+=S.r=ad[az],al+=S.g=ad[az+1],ak+=S.b=ad[az+2],aj+=S.a=ad[az+3],av+=am,au+=al,at+=ak,ar+=aj,S=S.next,aq+=ai=d.r,ap+=ah=d.g,ao+=ag=d.b,an+=af=d.a,am-=ai,al-=ah,ak-=ag,aj-=af,d=d.next,ax+=4
}aw+=ac
}for(aC=0;
ac>aC;
aC++){for(al=ak=aj=am=au=at=ar=av=0,ax=aC<<2,aq=X*(ai=ad[ax]),ap=X*(ah=ad[ax+1]),ao=X*(ag=ad[ax+2]),an=X*(af=ad[ax+3]),av+=W*ai,au+=W*ah,at+=W*ag,ar+=W*af,T=V,aA=0;
X>aA;
aA++){T.r=ai,T.g=ah,T.b=ag,T.a=af,T=T.next
}for(ay=ac,aA=1;
aD>=aA;
aA++){ax=ay+aC<<2,av+=(T.r=ai=ad[ax])*(ae=X-aA),au+=(T.g=ah=ad[ax+1])*ae,at+=(T.b=ag=ad[ax+2])*ae,ar+=(T.a=af=ad[ax+3])*ae,am+=ai,al+=ah,ak+=ag,aj+=af,T=T.next,Y>aA&&(ay+=ac)
}for(ax=aC,S=V,d=U,aB=0;
ab>aB;
aB++){az=ax<<2,ad[az+3]=af=ar*c>>a,af>0?(af=255/af,ad[az]=(av*c>>a)*af,ad[az+1]=(au*c>>a)*af,ad[az+2]=(at*c>>a)*af):ad[az]=ad[az+1]=ad[az+2]=0,av-=aq,au-=ap,at-=ao,ar-=an,aq-=S.r,ap-=S.g,ao-=S.b,an-=S.a,az=aC+((az=aB+X)<Y?az:Y)*ac<<2,av+=am+=S.r=ad[az],au+=al+=S.g=ad[az+1],at+=ak+=S.b=ad[az+2],ar+=aj+=S.a=ad[az+3],S=S.next,aq+=ai=d.r,ap+=ah=d.g,ao+=ag=d.b,an+=af=d.a,am-=ai,al-=ah,ak-=ag,aj-=af,d=d.next,ax+=ac
}}}var h=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],g=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];
Kinetic.Filters.Blur=function(b){var d=0|this.blurRadius();
d>0&&e(b,d)
},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)
}(),function(){function k(g,f,u){var r=4*(u*g.width+f),h=[];
return h.push(g.data[r++],g.data[r++],g.data[r++],g.data[r++]),h
}function j(d,c){return Math.sqrt(Math.pow(d[0]-c[0],2)+Math.pow(d[1]-c[1],2)+Math.pow(d[2]-c[2],2))
}function q(e){for(var d=[0,0,0],f=0;
f<e.length;
f++){d[0]+=e[f][0],d[1]+=e[f][1],d[2]+=e[f][2]
}return d[0]/=e.length,d[1]/=e.length,d[2]/=e.length,d
}function p(A,z){var y=k(A,0,0),x=k(A,A.width-1,0),w=k(A,0,A.height-1),v=k(A,A.width-1,A.height-1),u=z||10;
if(j(y,x)<u&&j(x,v)<u&&j(v,w)<u&&j(w,y)<u){for(var r=q([x,y,v,w]),c=[],b=0;
b<A.width*A.height;
b++){var a=j(r,[A.data[4*b],A.data[4*b+1],A.data[4*b+2]]);
c[b]=u>a?0:255
}return c
}}function o(e,d){for(var f=0;
f<e.width*e.height;
f++){e.data[4*f+3]=d[f]
}}function n(J,I,H){for(var G=[1,1,1,1,0,1,1,1,1],F=Math.round(Math.sqrt(G.length)),E=Math.floor(F/2),D=[],C=0;
H>C;
C++){for(var B=0;
I>B;
B++){for(var A=C*I+B,z=0,y=0;
F>y;
y++){for(var x=0;
F>x;
x++){var w=C+y-E,v=B+x-E;
if(w>=0&&H>w&&v>=0&&I>v){var u=w*I+v,r=G[y*F+x];
z+=J[u]*r
}}}D[A]=2040===z?255:0
}}return D
}function m(J,I,H){for(var G=[1,1,1,1,1,1,1,1,1],F=Math.round(Math.sqrt(G.length)),E=Math.floor(F/2),D=[],C=0;
H>C;
C++){for(var B=0;
I>B;
B++){for(var A=C*I+B,z=0,y=0;
F>y;
y++){for(var x=0;
F>x;
x++){var w=C+y-E,v=B+x-E;
if(w>=0&&H>w&&v>=0&&I>v){var u=w*I+v,r=G[y*F+x];
z+=J[u]*r
}}}D[A]=z>=1020?255:0
}}return D
}function l(J,I,H){for(var G=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],F=Math.round(Math.sqrt(G.length)),E=Math.floor(F/2),D=[],C=0;
H>C;
C++){for(var B=0;
I>B;
B++){for(var A=C*I+B,z=0,y=0;
F>y;
y++){for(var x=0;
F>x;
x++){var w=C+y-E,v=B+x-E;
if(w>=0&&H>w&&v>=0&&I>v){var u=w*I+v,r=G[y*F+x];
z+=J[u]*r
}}}D[A]=z
}}return D
}Kinetic.Filters.Mask=function(e){var d=this.threshold(),f=p(e,d);
return f&&(f=n(f,e.width,e.height),f=m(f,e.width,e.height),f=l(f,e.width,e.height),o(e,f)),e
},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)
}(),function(){Kinetic.Filters.RGB=function(k){var j,q,p=k.data,o=p.length,n=this.red(),m=this.green(),l=this.blue();
for(j=0;
o>j;
j+=4){q=(0.34*p[j]+0.5*p[j+1]+0.16*p[j+2])/255,p[j]=q*n,p[j+1]=q*m,p[j+2]=q*l,p[j+3]=p[j+3]
}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(b){return this._filterUpToDate=!1,b>255?255:0>b?0:Math.round(b)
}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(b){return this._filterUpToDate=!1,b>255?255:0>b?0:Math.round(b)
}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)
}(),function(){Kinetic.Filters.HSV=function(R){var Q,P,O,N,M,L=R.data,K=L.length,J=this.value(),I=this.saturation(),H=Math.abs(this.hue()+360)%360,G=J*I*Math.cos(H*Math.PI/180),F=J*I*Math.sin(H*Math.PI/180),E=0.299*J+0.701*G+0.167*F,D=0.587*J-0.587*G+0.33*F,C=0.114*J-0.114*G-0.497*F,B=0.299*J-0.299*G-0.328*F,A=0.587*J+0.413*G+0.035*F,z=0.114*J-0.114*G+0.293*F,y=0.299*J-0.3*G+1.25*F,x=0.587*J-0.586*G-1.05*F,w=0.114*J+0.886*G-0.2*F;
for(Q=0;
K>Q;
Q+=4){P=L[Q+0],O=L[Q+1],N=L[Q+2],M=L[Q+3],L[Q+0]=E*P+D*O+C*N,L[Q+1]=B*P+A*O+z*N,L[Q+2]=y*P+x*O+w*N,L[Q+3]=M
}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",1,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",1,null,Kinetic.Factory.afterSetFilter)
}(),function(){Kinetic.Filters.Emboss=function(ah){var ag=10*this.embossStrength(),af=255*this.embossWhiteLevel(),ae=this.embossDirection(),ad=this.embossBlend(),ac=0,ab=0,aa=ah.data,Z=ah.width,Y=ah.height,X=4*Z,W=Y;
switch(ae){case"top-left":ac=-1,ab=-1;
break;
case"top":ac=-1,ab=0;
break;
case"top-right":ac=-1,ab=1;
break;
case"right":ac=0,ab=1;
break;
case"bottom-right":ac=1,ab=1;
break;
case"bottom":ac=1,ab=0;
break;
case"bottom-left":ac=1,ab=-1;
break;
case"left":ac=0,ab=-1
}do{var V=(W-1)*X,U=ac;
1>W+U&&(U=0),W+U>Y&&(U=0);
var T=4*(W-1+U)*Z,S=Z;
do{var Q=V+4*(S-1),O=ab;
1>S+O&&(O=0),S+O>Z&&(O=0);
var M=T+4*(S-1+O),K=aa[Q]-aa[M],J=aa[Q+1]-aa[M+1],I=aa[Q+2]-aa[M+2],H=K,G=H>0?H:-H,F=J>0?J:-J,E=I>0?I:-I;
if(F>G&&(H=J),E>G&&(H=I),H*=ag,ad){var R=aa[Q]+H,P=aa[Q+1]+H,N=aa[Q+2]+H;
aa[Q]=R>255?255:0>R?0:R,aa[Q+1]=P>255?255:0>P?0:P,aa[Q+2]=N>255?255:0>N?0:N
}else{var L=af-H;
0>L?L=0:L>255&&(L=255),aa[Q]=aa[Q+1]=aa[Q+2]=L
}}while(--S)
}while(--W)
},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",0.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",0.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)
}(),function(){function b(k,j,q,p,o){var n,m=q-j,l=o-p;
return 0===m?p+l/2:0===l?p:(n=(k-j)/m,n=l*n+p)
}Kinetic.Filters.Enhance=function(ad){var ac,ab,aa,Z,Y=ad.data,X=Y.length,W=Y[0],V=W,U=Y[1],T=U,S=Y[2],R=S,Q=Y[3],P=Q,N=this.enhance();
if(0!==N){for(Z=0;
X>Z;
Z+=4){ac=Y[Z+0],W>ac?W=ac:ac>V&&(V=ac),ab=Y[Z+1],U>ab?U=ab:ab>T&&(T=ab),aa=Y[Z+2],S>aa?S=aa:aa>R&&(R=aa)
}V===W&&(V=255,W=0),T===U&&(T=255,U=0),R===S&&(R=255,S=0),P===Q&&(P=255,Q=0);
var L,J,I,H,G,F,E,D,a,O,M,K;
for(N>0?(J=V+N*(255-V),I=W-N*(W-0),G=T+N*(255-T),F=U-N*(U-0),D=R+N*(255-R),K=S-N*(S-0),M=P+N*(255-P),a=Q-N*(Q-0)):(L=0.5*(V+W),J=V+N*(V-L),I=W+N*(W-L),H=0.5*(T+U),G=T+N*(T-H),F=U+N*(U-H),E=0.5*(R+S),D=R+N*(R-E),K=S+N*(S-E),O=0.5*(P+Q),M=P+N*(P-O),a=Q+N*(Q-O)),Z=0;
X>Z;
Z+=4){Y[Z+0]=b(Y[Z+0],W,V,I,J),Y[Z+1]=b(Y[Z+1],U,T,F,G),Y[Z+2]=b(Y[Z+2],S,R,K,D)
}}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)
}(),function(){Kinetic.Filters.Posterize=function(h){var g,m=Math.round(254*this.levels())+1,l=h.data,k=l.length,j=255/m;
for(g=0;
k>g;
g+=1){l[g]=Math.floor(l[g]/j)*j
}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",0.5,null,Kinetic.Factory.afterSetFilter)
}(),function(){Kinetic.Filters.Noise=function(h){var g,m=255*this.noise(),l=h.data,k=l.length,j=m/2;
for(g=0;
k>g;
g+=4){l[g+0]+=j-2*j*Math.random(),l[g+1]+=j-2*j*Math.random(),l[g+2]+=j-2*j*Math.random()
}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",0.2,null,Kinetic.Factory.afterSetFilter)
}(),function(){Kinetic.Filters.Pixelate=function(N){var M,L,K,J,I,H,G,F,E,D,C,B,A,z,y=Math.ceil(this.pixelSize()),x=N.width,w=N.height,N=N.data,v=Math.ceil(x/y),u=Math.ceil(w/y);
for(B=0;
v>B;
B+=1){for(A=0;
u>A;
A+=1){for(J=0,I=0,H=0,G=0,F=B*y,E=F+y,D=A*y,C=D+y,z=0,M=F;
E>M;
M+=1){if(!(M>=x)){for(L=D;
C>L;
L+=1){L>=w||(K=4*(x*L+M),J+=N[K+0],I+=N[K+1],H+=N[K+2],G+=N[K+3],z+=1)
}}}for(J/=z,I/=z,H/=z,alphas=G/z,M=F;
E>M;
M+=1){if(!(M>=x)){for(L=D;
C>L;
L+=1){L>=w||(K=4*(x*L+M),N[K+0]=J,N[K+1]=I,N[K+2]=H,N[K+3]=G)
}}}}}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)
}(),function(){Kinetic.Filters.Threshold=function(g){var f,k=255*this.threshold(),j=g.data,h=j.length;
for(f=0;
h>f;
f+=1){j[f]=j[f]<k?0:255
}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0.5,null,Kinetic.Factory.afterSetFilter)
}(),function(){Kinetic.Filters.Sepia=function(D){var C,B,A,z,y,x,w,v,u,r=D.data,q=D.width,p=D.height,o=4*q;
do{C=(p-1)*o,B=q;
do{A=C+4*(B-1),z=r[A],y=r[A+1],x=r[A+2],w=0.393*z+0.769*y+0.189*x,v=0.349*z+0.686*y+0.168*x,u=0.272*z+0.534*y+0.131*x,r[A]=w>255?255:w,r[A+1]=v>255?255:v,r[A+2]=u>255?255:u,r[A+3]=r[A+3]
}while(--B)
}while(--p)
}
}(),function(){Kinetic.Filters.Solarize=function(z){var y=z.data,x=z.width,w=z.height,v=4*x,u=w;
do{var r=(u-1)*v,q=x;
do{var p=r+4*(q-1),o=y[p],n=y[p+1],m=y[p+2];
o>127&&(o=255-o),n>127&&(n=255-n),m>127&&(m=255-m),y[p]=o,y[p+1]=n,y[p+2]=m
}while(--q)
}while(--u)
}
}(),function(){var e=function(ap,ao,an){var am,al,ak,aj,ai=ap.data,ah=ao.data,ag=ap.width,af=ap.height,ae=an.polarCenterX||ag/2,ad=an.polarCenterY||af/2,ac=0,ab=0,aa=0,Y=0,W=Math.sqrt(ae*ae+ad*ad);
al=ag-ae,ak=af-ad,aj=Math.sqrt(al*al+ak*ak),W=aj>W?aj:W;
var U,S,Q,O,M,K,J,I,Z,X,V,T,R,P=af,N=ag,L=360/N*Math.PI/180;
for(S=0;
N>S;
S+=1){for(Q=Math.sin(S*L),O=Math.cos(S*L),U=0;
P>U;
U+=1){al=ae+W*U/P*O,ak=ad+W*U/P*Q,1>=al&&(al=1),al>=ag-0.5&&(al=ag-1),1>=ak&&(ak=1),ak>=af-0.5&&(ak=af-1),M=al-0.5,K=al+0.5,J=Math.floor(M),I=Math.floor(K),Z=ak-0.5,X=ak+0.5,V=Math.floor(Z),T=Math.floor(X),R=(1-(M-J))*(1-(Z-V)),am=4*(V*ag+J),ac=ai[am+0]*R,ab=ai[am+1]*R,aa=ai[am+2]*R,Y=ai[am+3]*R,R=(1-(M-J))*(X-T),am=4*(T*ag+J),ac+=ai[am+0]*R,ab+=ai[am+1]*R,aa+=ai[am+2]*R,Y+=ai[am+3]*R,R=(K-I)*(X-T),am=4*(T*ag+I),ac+=ai[am+0]*R,ab+=ai[am+1]*R,aa+=ai[am+2]*R,Y+=ai[am+3]*R,R=(K-I)*(1-(Z-V)),am=4*(V*ag+I),ac+=ai[am+0]*R,ab+=ai[am+1]*R,aa+=ai[am+2]*R,Y+=ai[am+3]*R,am=4*(S+U*ag),ah[am+0]=ac,ah[am+1]=ab,ah[am+2]=aa,ah[am+3]=Y
}}},d=function(ap,ao,an){var am,al,ak,aj,ai,ah,ag=ap.data,af=ao.data,ae=ap.width,ad=ap.height,ac=an.polarCenterX||ae/2,ab=an.polarCenterY||ad/2,aa=0,Y=0,W=0,U=0,S=Math.sqrt(ac*ac+ab*ab);
al=ae-ac,ak=ad-ab,ah=Math.sqrt(al*al+ak*ak),S=ah>S?ah:S;
var Q,O,M=ad,K=ae,J=an.polarRotation||0;
180*(K/360)/Math.PI;
var I,Z,X,V,T,R,P,N,L;
for(al=0;
ae>al;
al+=1){for(ak=0;
ad>ak;
ak+=1){aj=al-ac,ai=ak-ab,Q=Math.sqrt(aj*aj+ai*ai)*M/S,O=(180*Math.atan2(ai,aj)/Math.PI+360+J)%360,O=O*K/360,I=O-0.5,Z=O+0.5,X=Math.floor(I),V=Math.floor(Z),T=Q-0.5,R=Q+0.5,P=Math.floor(T),N=Math.floor(R),L=(1-(I-X))*(1-(T-P)),am=4*(P*ae+X),aa=ag[am+0]*L,Y=ag[am+1]*L,W=ag[am+2]*L,U=ag[am+3]*L,L=(1-(I-X))*(R-N),am=4*(N*ae+X),aa+=ag[am+0]*L,Y+=ag[am+1]*L,W+=ag[am+2]*L,U+=ag[am+3]*L,L=(Z-V)*(R-N),am=4*(N*ae+V),aa+=ag[am+0]*L,Y+=ag[am+1]*L,W+=ag[am+2]*L,U+=ag[am+3]*L,L=(Z-V)*(1-(T-P)),am=4*(P*ae+V),aa+=ag[am+0]*L,Y+=ag[am+1]*L,W+=ag[am+2]*L,U+=ag[am+3]*L,am=4*(ak*ae+al),af[am+0]=aa,af[am+1]=Y,af[am+2]=W,af[am+3]=U
}}},f=document.createElement("canvas");
Kinetic.Filters.Kaleidoscope=function(R){var Q=R.width,P=R.height,O=Math.round(this.kaleidoscopePower()),N=Math.round(this.kaleidoscopeAngle()),M=Math.floor(Q*(N%360)/360);
if(!(1>O)){f.width=Q,f.height=P;
var L=f.getContext("2d").getImageData(0,0,Q,P);
e(R,L,{polarCenterX:Q/2,polarCenterY:P/2});
for(var K=Q/Math.pow(2,O);
8>=K;
){K=2*K,O-=1
}K=Math.ceil(K);
var J=K,I=0,H=J,G=1;
for(M+K>Q&&(I=J,H=0,G=-1),E=0;
P>E;
E+=1){for(F=I;
F!==H;
F+=G){D=Math.round(F+M)%Q,b=4*(Q*E+D),B=L.data[b+0],A=L.data[b+1],z=L.data[b+2],c=L.data[b+3],a=4*(Q*E+F),L.data[a+0]=B,L.data[a+1]=A,L.data[a+2]=z,L.data[a+3]=c
}}var F,E,D,C,B,A,z,c,b,a;
for(E=0;
P>E;
E+=1){for(J=Math.floor(K),C=0;
O>C;
C+=1){for(F=0;
J+1>F;
F+=1){b=4*(Q*E+F),B=L.data[b+0],A=L.data[b+1],z=L.data[b+2],c=L.data[b+3],a=4*(Q*E+2*J-F-1),L.data[a+0]=B,L.data[a+1]=A,L.data[a+2]=z,L.data[a+3]=c
}J*=2
}}d(L,R,{polarRotation:0})
}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)
}(),function(){function f(b){window.setTimeout(b,1000/60)
}var e=500;
Kinetic.Animation=function(d,c){this.func=d,this.setLayers(c),this.id=Kinetic.Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:(new Date).getTime()}
},Kinetic.Animation.prototype={setLayers:function(d){var c=[];
c=d?d.length>0?d:[d]:[],this.layers=c
},getLayers:function(){return this.layers
},addLayer:function(k){var j,m,l=this.layers;
if(l){for(j=l.length,m=0;
j>m;
m++){if(l[m]._id===k._id){return !1
}}}else{this.layers=[]
}return this.layers.push(k),!0
},isRunning:function(){for(var j=Kinetic.Animation,d=j.animations,k=0;
k<d.length;
k++){if(d[k].id===this.id){return !0
}}return !1
},start:function(){this.stop(),this.frame.timeDiff=0,this.frame.lastTime=(new Date).getTime(),Kinetic.Animation._addAnimation(this)
},stop:function(){Kinetic.Animation._removeAnimation(this)
},_updateFrameObject:function(b){this.frame.timeDiff=b-this.frame.lastTime,this.frame.lastTime=b,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1000/this.frame.timeDiff
}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(b){this.animations.push(b),this._handleAnimation()
},Kinetic.Animation._removeAnimation=function(k){for(var j=k.id,n=this.animations,m=n.length,l=0;
m>l;
l++){if(n[l].id===j){this.animations.splice(l,1);
break
}}},Kinetic.Animation._runFrames=function(){var v,u,r,q,p,o,n,m,l={},k=this.animations;
for(q=0;
q<k.length;
q++){for(v=k[q],u=v.layers,r=v.func,v._updateFrameObject((new Date).getTime()),o=u.length,p=0;
o>p;
p++){n=u[p],void 0!==n._id&&(l[n._id]=n)
}r&&r.call(v,v.frame)
}for(m in l){l[m].draw()
}},Kinetic.Animation._animationLoop=function(){var b=this;
this.animations.length>0?(this._runFrames(),Kinetic.Animation.requestAnimFrame(function(){b._animationLoop()
})):this.animRunning=!1
},Kinetic.Animation._handleAnimation=function(){var b=this;
this.animRunning||(this.animRunning=!0,b._animationLoop())
};
var h=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||f
}();
Kinetic.Animation.requestAnimFrame=function(a){var c=Kinetic.isDragging?f:h;
c(a)
};
var g=Kinetic.Node.prototype.moveTo;
Kinetic.Node.prototype.moveTo=function(b){g.call(this,b)
},Kinetic.Layer.prototype.batchDraw=function(){var b=this;
this.batchAnim||(this.batchAnim=new Kinetic.Animation(function(){b.lastBatchDrawTime&&(new Date).getTime()-b.lastBatchDrawTime>e&&b.batchAnim.stop()
},this)),this.lastBatchDrawTime=(new Date).getTime(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())
},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(b){b.batchDraw()
})
}
}(),function(){var h={node:1,duration:1,easing:1,onFinish:1,yoyo:1},g=1,m=2,l=3,k=0;
Kinetic.Tween=function(a){var r,q=this,p=a.node,o=p._id,n=a.duration||1,f=a.easing||Kinetic.Easings.Linear,e=!!a.yoyo;
this.node=p,this._id=k++,this.anim=new Kinetic.Animation(function(){q.tween.onEnterFrame()
},p.getLayer()||p.getLayers()),this.tween=new j(r,function(b){q._tweenFunc(b)
},f,0,1,1000*n,e),this._addListeners(),Kinetic.Tween.attrs[o]||(Kinetic.Tween.attrs[o]={}),Kinetic.Tween.attrs[o][this._id]||(Kinetic.Tween.attrs[o][this._id]={}),Kinetic.Tween.tweens[o]||(Kinetic.Tween.tweens[o]={});
for(r in a){void 0===h[r]&&this._addAttr(r,a[r])
}this.reset(),this.onFinish=a.onFinish,this.onReset=a.onReset
},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(x,w){var v,u,r,q,p,o=this.node,n=o._id;
if(r=Kinetic.Tween.tweens[n][x],r&&delete Kinetic.Tween.attrs[n][r][x],v=o.getAttr(x),Kinetic.Util._isArray(w)){for(u=[],p=w.length,q=0;
p>q;
q++){u.push(w[q]-v[q])
}}else{u=w-v
}Kinetic.Tween.attrs[n][this._id][x]={start:v,diff:u},Kinetic.Tween.tweens[n][x]=this._id
},_tweenFunc:function(y){var x,w,v,u,r,q,p,o=this.node,n=Kinetic.Tween.attrs[o._id][this._id];
for(x in n){if(w=n[x],v=w.start,u=w.diff,Kinetic.Util._isArray(v)){for(r=[],p=v.length,q=0;
p>q;
q++){r.push(v[q]+u[q]*y)
}}else{r=v+u*y
}o.setAttr(x,r)
}},_addListeners:function(){var b=this;
this.tween.onPlay=function(){b.anim.start()
},this.tween.onReverse=function(){b.anim.start()
},this.tween.onPause=function(){b.anim.stop()
},this.tween.onFinish=function(){b.onFinish&&b.onFinish()
},this.tween.onReset=function(){b.onReset&&b.onReset()
}
},play:function(){return this.tween.play(),this
},reverse:function(){return this.tween.reverse(),this
},reset:function(){var b=this.node;
return this.tween.reset(),(b.getLayer()||b.getLayers()).draw(),this
},seek:function(d){var c=this.node;
return this.tween.seek(1000*d),(c.getLayer()||c.getLayers()).draw(),this
},pause:function(){return this.tween.pause(),this
},finish:function(){var b=this.node;
return this.tween.finish(),(b.getLayer()||b.getLayers()).draw(),this
},destroy:function(){var f,e=this.node._id,o=this._id,n=Kinetic.Tween.tweens[e];
this.pause();
for(f in n){delete Kinetic.Tween.tweens[e][f]
}delete Kinetic.Tween.attrs[e][o]
}};
var j=function(o,n,v,u,r,q,p){this.prop=o,this.propFunc=n,this.begin=u,this._pos=u,this.duration=q,this._change=0,this.prevPos=0,this.yoyo=p,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=v,this._change=r-this.begin,this.pause()
};
j.prototype={fire:function(d){var c=this[d];
c&&c()
},setTime:function(b){b>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>b?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=b,this.update())
},getTime:function(){return this._time
},setPosition:function(b){this.prevPos=this._pos,this.propFunc(b),this._pos=b
},getPosition:function(b){return void 0===b&&(b=this._time),this.func(b,this.begin,this._change,this.duration)
},play:function(){this.state=m,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")
},reverse:function(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")
},seek:function(b){this.pause(),this._time=b,this.update(),this.fire("onSeek")
},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")
},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")
},update:function(){this.setPosition(this.getPosition(this._time))
},onEnterFrame:function(){var b=this.getTimer()-this._startTime;
this.state===m?this.setTime(b):this.state===l&&this.setTime(this.duration-b)
},pause:function(){this.state=g,this.fire("onPause")
},getTimer:function(){return(new Date).getTime()
}},Kinetic.Easings={BackEaseIn:function(n,f,q,p){var o=1.70158;
return q*(n/=p)*n*((o+1)*n-o)+f
},BackEaseOut:function(n,f,q,p){var o=1.70158;
return q*((n=n/p-1)*n*((o+1)*n+o)+1)+f
},BackEaseInOut:function(n,f,q,p){var o=1.70158;
return(n/=p/2)<1?q/2*n*n*(((o*=1.525)+1)*n-o)+f:q/2*((n-=2)*n*(((o*=1.525)+1)*n+o)+2)+f
},ElasticEaseIn:function(o,n,v,u,r,q){var p=0;
return 0===o?n:1==(o/=u)?n+v:(q||(q=0.3*u),!r||r<Math.abs(v)?(r=v,p=q/4):p=q/(2*Math.PI)*Math.asin(v/r),-(r*Math.pow(2,10*(o-=1))*Math.sin((o*u-p)*2*Math.PI/q))+n)
},ElasticEaseOut:function(o,n,v,u,r,q){var p=0;
return 0===o?n:1==(o/=u)?n+v:(q||(q=0.3*u),!r||r<Math.abs(v)?(r=v,p=q/4):p=q/(2*Math.PI)*Math.asin(v/r),r*Math.pow(2,-10*o)*Math.sin((o*u-p)*2*Math.PI/q)+v+n)
},ElasticEaseInOut:function(o,n,v,u,r,q){var p=0;
return 0===o?n:2==(o/=u/2)?n+v:(q||(q=u*0.3*1.5),!r||r<Math.abs(v)?(r=v,p=q/4):p=q/(2*Math.PI)*Math.asin(v/r),1>o?-0.5*r*Math.pow(2,10*(o-=1))*Math.sin((o*u-p)*2*Math.PI/q)+n:0.5*r*Math.pow(2,-10*(o-=1))*Math.sin((o*u-p)*2*Math.PI/q)+v+n)
},BounceEaseOut:function(f,e,o,n){return(f/=n)<1/2.75?o*7.5625*f*f+e:2/2.75>f?o*(7.5625*(f-=1.5/2.75)*f+0.75)+e:2.5/2.75>f?o*(7.5625*(f-=2.25/2.75)*f+0.9375)+e:o*(7.5625*(f-=2.625/2.75)*f+0.984375)+e
},BounceEaseIn:function(f,e,o,n){return o-Kinetic.Easings.BounceEaseOut(n-f,0,o,n)+e
},BounceEaseInOut:function(f,e,o,n){return n/2>f?0.5*Kinetic.Easings.BounceEaseIn(2*f,0,o,n)+e:0.5*Kinetic.Easings.BounceEaseOut(2*f-n,0,o,n)+0.5*o+e
},EaseIn:function(f,e,o,n){return o*(f/=n)*f+e
},EaseOut:function(f,e,o,n){return -o*(f/=n)*(f-2)+e
},EaseInOut:function(f,e,o,n){return(f/=n/2)<1?o/2*f*f+e:-o/2*(--f*(f-2)-1)+e
},StrongEaseIn:function(f,e,o,n){return o*(f/=n)*f*f*f*f+e
},StrongEaseOut:function(f,e,o,n){return o*((f=f/n-1)*f*f*f*f+1)+e
},StrongEaseInOut:function(f,e,o,n){return(f/=n/2)<1?o/2*f*f*f*f*f+e:o/2*((f-=2)*f*f*f*f+2)+e
},Linear:function(f,e,o,n){return o*f/n+e
}}
}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(f){var e=Kinetic.DD,g=e.node;
g&&(g._setDragPosition(f),e.isDragging||(e.isDragging=!0,g.fire("dragstart",f,!0)),g.fire("dragmove",f,!0))
},_endDragBefore:function(g){var f,k,j=Kinetic.DD,h=j.node;
h&&(f=h.nodeType,k=h.getLayer(),j.anim.stop(),j.isDragging&&(j.isDragging=!1,Kinetic.listenClickTap=!1,g&&(g.dragEndNode=h)),delete j.node,(k||h).draw())
},_endDragAfter:function(f){f=f||{};
var e=f.dragEndNode;
f&&e&&e.fire("dragend",f,!0)
}},Kinetic.Node.prototype.startDrag=function(){var g=Kinetic.DD,f=this.getStage(),k=this.getLayer(),j=f.getPointerPosition(),h=this.getAbsolutePosition();
j&&(g.node&&g.node.stopDrag(),g.node=this,g.offset.x=j.x-h.x,g.offset.y=j.y-h.y,g.anim.setLayers(k||this.getLayers()),g.anim.start(),this._setDragPosition())
},Kinetic.Node.prototype._setDragPosition=function(g){var f=Kinetic.DD,k=this.getStage().getPointerPosition(),j=this.getDragBoundFunc(),h={x:k.x-f.offset.x,y:k.y-f.offset.y};
void 0!==j&&(h=j.call(this,h,g)),this.setAbsolutePosition(h)
},Kinetic.Node.prototype.stopDrag=function(){var f=Kinetic.DD,e={};
f._endDragBefore(e),f._endDragAfter(e)
},Kinetic.Node.prototype.setDraggable=function(b){this._setAttr("draggable",b),this._dragChange()
};
var d=Kinetic.Node.prototype.destroy;
Kinetic.Node.prototype.destroy=function(){var a=Kinetic.DD;
a.node&&a.node._id===this._id&&this.stopDrag(),d.call(this)
},Kinetic.Node.prototype.isDragging=function(){var b=Kinetic.DD;
return b.node&&b.node._id===this._id&&b.isDragging
},Kinetic.Node.prototype._listenDrag=function(){var b=this;
this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(a){Kinetic.DD.node||b.startDrag(a)
}):this.on("mousedown.kinetic touchstart.kinetic",function(a){Kinetic.DD.node||b.startDrag(a)
})
},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable){this._listenDrag()
}else{this._dragCleanup();
var f=this.getStage(),e=Kinetic.DD;
f&&e.node&&e.node._id===this._id&&e.node.stopDrag()
}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))
},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");
var c=document.documentElement;
c.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),c.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),c.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),c.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)
}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(b){this.children=new Kinetic.Collection,Kinetic.Node.call(this,b)
},getChildren:function(){return this.children
},hasChildren:function(){return this.getChildren().length>0
},removeChildren:function(){for(var d,c=this.children;
c.length>0;
){d=c[0],d.hasChildren()&&d.removeChildren(),d.remove()
}return this
},destroyChildren:function(){for(var b=this.children;
b.length>0;
){b[0].destroy()
}return this
},add:function(d){var c=this.children;
return this._validateAdd(d),d.index=c.length,d.parent=this,c.push(d),this._fire("add",{child:d}),this
},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)
},find:function(x){var w,v,u,r,q,p,o,n=[],m=x.replace(/ /g,"").split(","),l=m.length;
for(w=0;
l>w;
w++){if(u=m[w],"#"===u.charAt(0)){q=this._getNodeById(u.slice(1)),q&&n.push(q)
}else{if("."===u.charAt(0)){r=this._getNodesByName(u.slice(1)),n=n.concat(r)
}else{for(p=this.getChildren(),o=p.length,v=0;
o>v;
v++){n=n.concat(p[v]._get(u))
}}}}return Kinetic.Collection.toCollection(n)
},_getNodeById:function(d){var c=Kinetic.ids[d];
return void 0!==c&&this.isAncestorOf(c)?c:null
},_getNodesByName:function(d){var c=Kinetic.names[d]||[];
return this._getDescendants(c)
},_get:function(g){for(var f=Kinetic.Node.prototype._get.call(this,g),k=this.getChildren(),j=k.length,h=0;
j>h;
h++){f=f.concat(k[h]._get(g))
}return f
},toObject:function(){var g=Kinetic.Node.prototype.toObject.call(this);
g.children=[];
for(var f=this.getChildren(),k=f.length,j=0;
k>j;
j++){var h=f[j];
g.children.push(h.toObject())
}return g
},_getDescendants:function(g){for(var f=[],k=g.length,j=0;
k>j;
j++){var h=g[j];
this.isAncestorOf(h)&&f.push(h)
}return f
},isAncestorOf:function(d){for(var c=d.getParent();
c;
){if(c._id===this._id){return !0
}c=c.getParent()
}return !1
},clone:function(d){var c=Kinetic.Node.prototype.clone.call(this,d);
return this.getChildren().each(function(b){c.add(b.clone())
}),c
},getAllIntersections:function(d){var c=[];
return this.find("Shape").each(function(a){a.isVisible()&&a.intersects(d)&&c.push(a)
}),c
},_setChildrenIndices:function(){this.children.each(function(d,c){d.index=c
})
},drawScene:function(h){var g=this.getLayer(),m=h||g&&g.getCanvas(),l=m&&m.getContext(),k=this._cache.canvas,j=k&&k.scene;
return this.isVisible()&&(j?this._drawCachedSceneCanvas(l):this._drawChildren(m,"drawScene")),this
},drawHit:function(h){var g=this.getLayer(),m=h||g&&g.hitCanvas,l=m&&m.getContext(),k=this._cache.canvas,j=k&&k.hit;
return this.shouldDrawHit()&&(j?this._drawCachedHitCanvas(l):this._drawChildren(m,"drawHit")),this
},_drawChildren:function(k,j){var q,p,o=k&&k.getContext(),n=this.getClipWidth(),m=this.getClipHeight(),l=n&&m;
l&&(q=this.getClipX(),p=this.getClipY(),o.save(),o._applyTransform(this),o.beginPath(),o.rect(q,p,n,m),o.clip(),o.reset()),this.children.each(function(a){a[j](k)
}),l&&o.restore()
}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)
}(),function(){function h(b){b.fill()
}function g(b){b.stroke()
}function m(b){b.fill()
}function l(b){b.stroke()
}function k(){this._clearCache(j)
}var j="hasShadow";
Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(c){this.nodeType="Shape",this._fillFunc=h,this._strokeFunc=g,this._fillFuncHit=m,this._strokeFuncHit=l;
for(var b,a=Kinetic.shapes;
;
){if(b=Kinetic.Util.getRandomColor(),b&&!(b in a)){break
}}this.colorKey=b,a[b]=this,Kinetic.Node.call(this,c),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChanged.kinetic",k)
},hasChildren:function(){return !1
},getChildren:function(){return[]
},getContext:function(){return this.getLayer().getContext()
},getCanvas:function(){return this.getLayer().getCanvas()
},hasShadow:function(){return this._getCache(j,this._hasShadow)
},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())
},hasFill:function(){return !!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())
},hasStroke:function(){return !!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())
},_get:function(b){return this.className===b||this.nodeType===b?[this]:[]
},intersects:function(f){var e,o=this.getStage(),n=o.bufferHitCanvas;
return n.getContext().clear(),this.drawScene(n),e=n.context.getImageData(0|f.x,0|f.y,1,1).data,e[3]>0
},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]
},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()
},drawScene:function(x){var w,v,u,r=x||this.getLayer().getCanvas(),q=r.getContext(),p=this._cache.canvas,o=this.sceneFunc(),n=this.hasShadow();
return this.isVisible()&&(p?this._drawCachedSceneCanvas(q):o&&(q.save(),this._useBufferCanvas()?(w=this.getStage(),v=w.bufferCanvas,u=v.getContext(),u.clear(),u.save(),u._applyLineJoin(this),u._applyTransform(this),o.call(this,u),u.restore(),n&&(q.save(),q._applyShadow(this),q.drawImage(v._canvas,0,0),q.restore()),q._applyOpacity(this),q.drawImage(v._canvas,0,0)):(q._applyLineJoin(this),q._applyTransform(this),n&&(q.save(),q._applyShadow(this),o.call(this,q),q.restore()),q._applyOpacity(this),o.call(this,q)),q.restore())),this
},drawHit:function(o){var n=o||this.getLayer().hitCanvas,u=n.getContext(),r=this.hitFunc()||this.sceneFunc(),q=this._cache.canvas,p=q&&q.hit;
return this.shouldDrawHit()&&(p?this._drawCachedHitCanvas(u):r&&(u.save(),u._applyLineJoin(this),u._applyTransform(this),r.call(this,u),u.restore())),this
},drawHitFromCache:function(L){var K,J,I,H,G,F,E,D,C=L||0,B=this._cache.canvas,A=this._getCachedSceneCanvas(),z=A.getContext(),y=B.hit,x=y.getContext(),w=A.getWidth(),v=A.getHeight();
x.clear();
try{for(K=z.getImageData(0,0,w,v),J=K.data,I=x.getImageData(0,0,w,v),H=I.data,G=J.length,F=Kinetic.Util._hexToRgb(this.colorKey),E=0;
G>E;
E+=4){D=J[E+3],D>C&&(H[E]=F.r,H[E+1]=F.g,H[E+2]=F.b,H[E+3]=255)
}x.putImageData(I,0,0)
}catch(u){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+u.message)
}return this
}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)
}(),function(){function aA(d,c){d.content.addEventListener(c,function(a){d[R+c](a)
},!1)
}var az="Stage",ay="string",ax="px",aw="mouseout",av="mouseleave",au="mouseover",at="mouseenter",ar="mousemove",aq="mousedown",ap="mouseup",ao="click",an="dblclick",am="touchstart",al="touchend",ak="tap",aj="dbltap",ai="touchmove",ah="contentMouseout",ag="contentMouseover",af="contentMousemove",ae="contentMousedown",ad="contentMouseup",ac="contentClick",ab="contentDblclick",aa="contentTouchstart",Z="contentTouchend",Y="contentDbltap",X="contentTouchmove",W="div",V="relative",U="inline-block",T="kineticjs-content",S=" ",R="_",Q="container",P="",O=[aq,ar,ap,aw,am,ai,al,au],N=O.length;
Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(b){this.nodeType=az,Kinetic.Container.call(this,b),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)
},_validateAdd:function(b){"Layer"!==b.getType()&&Kinetic.Util.error("You may only add layers to the stage.")
},setContainer:function(b){return typeof b===ay&&(b=document.getElementById(b)),this._setAttr(Q,b),this
},shouldDrawHit:function(){return !0
},draw:function(){return Kinetic.Node.prototype.draw.call(this),this
},setHeight:function(b){return Kinetic.Node.prototype.setHeight.call(this,b),this._resizeDOM(),this
},setWidth:function(b){return Kinetic.Node.prototype.setWidth.call(this,b),this._resizeDOM(),this
},clear:function(){var e,d=this.children,f=d.length;
for(e=0;
f>e;
e++){d[e].clear()
}return this
},destroy:function(){var b=this.content;
Kinetic.Container.prototype.destroy.call(this),b&&Kinetic.Util._isInDocument(b)&&this.getContainer().removeChild(b)
},getPointerPosition:function(){return this.pointerPos
},getStage:function(){return this
},getContent:function(){return this.content
},toDataURL:function(r){function q(d){var c=j[d],b=c.toDataURL(),a=new Image;
a.onload=function(){k.drawImage(a,0,0),d<j.length-1?q(d+1):r.callback(l.toDataURL(p,o))
},a.src=b
}r=r||{};
var p=r.mimeType||null,o=r.quality||null,n=r.x||0,m=r.y||0,l=new Kinetic.SceneCanvas({width:r.width||this.getWidth(),height:r.height||this.getHeight(),pixelRatio:1}),k=l.getContext()._context,j=this.children;
(n||m)&&k.translate(-1*n,-1*m),q(0)
},toImage:function(d){var c=d.callback;
d.callback=function(b){Kinetic.Util._getImage(b,function(e){c(e)
})
},this.toDataURL(d)
},getIntersection:function(h){var g,m,l=this.getChildren(),k=l.length,j=k-1;
for(g=j;
g>=0;
g--){if(m=l[g].getIntersection(h)){return m
}}return null
},_resizeDOM:function(){if(this.content){var h,d,m=this.getWidth(),l=this.getHeight(),k=this.getChildren(),j=k.length;
for(this.content.style.width=m+ax,this.content.style.height=l+ax,this.bufferCanvas.setSize(m,l),this.bufferHitCanvas.setSize(m,l),h=0;
j>h;
h++){d=k[h],d.getCanvas().setSize(m,l),d.hitCanvas.setSize(m,l),d.draw()
}}},add:function(b){return Kinetic.Container.prototype.add.call(this,b),b.canvas.setSize(this.attrs.width,this.attrs.height),b.hitCanvas.setSize(this.attrs.width,this.attrs.height),b.draw(),this.content.appendChild(b.canvas._canvas),this
},getParent:function(){return null
},getLayer:function(){return null
},getLayers:function(){return this.getChildren()
},_bindContentEvents:function(){var a;
for(a=0;
N>a;
a++){aA(this,O[a])
}},_mouseover:function(b){this._fire(ag,b)
},_mouseout:function(d){this._setPointerPosition(d);
var c=this.targetShape;
c&&!Kinetic.isDragging()&&(c._fireAndBubble(aw,d),c._fireAndBubble(av,d),this.targetShape=null),this.pointerPos=void 0,this._fire(ah,d)
},_mousemove:function(e){this._setPointerPosition(e);
var d=Kinetic.DD,f=this.getIntersection(this.getPointerPosition());
f&&f.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===f._id?f._fireAndBubble(ar,e):(this.targetShape&&(this.targetShape._fireAndBubble(aw,e,f),this.targetShape._fireAndBubble(av,e,f)),f._fireAndBubble(au,e,this.targetShape),f._fireAndBubble(at,e,this.targetShape),this.targetShape=f):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(aw,e),this.targetShape._fireAndBubble(av,e),this.targetShape=null),this._fire(af,e),d&&d._drag(e),e.preventDefault&&e.preventDefault()
},_mousedown:function(d){this._setPointerPosition(d);
var c=this.getIntersection(this.getPointerPosition());
Kinetic.listenClickTap=!0,c&&c.isListening()&&(this.clickStartShape=c,c._fireAndBubble(aq,d)),this._fire(ae,d),d.preventDefault&&d.preventDefault()
},_mouseup:function(f){this._setPointerPosition(f);
var e=this.getIntersection(this.getPointerPosition()),h=this.clickStartShape,g=!1;
Kinetic.inDblClickWindow?(g=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1
},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(ap,f),Kinetic.listenClickTap&&h&&h._id===e._id&&(e._fireAndBubble(ao,f),g&&e._fireAndBubble(an,f))),this._fire(ad,f),Kinetic.listenClickTap&&(this._fire(ac,f),g&&this._fire(ab,f)),Kinetic.listenClickTap=!1,f.preventDefault&&f.preventDefault()
},_touchstart:function(d){this._setPointerPosition(d);
var c=this.getIntersection(this.getPointerPosition());
Kinetic.listenClickTap=!0,c&&c.isListening()&&(this.tapStartShape=c,c._fireAndBubble(am,d),c.isListening()&&d.preventDefault&&d.preventDefault()),this._fire(aa,d)
},_touchend:function(d){this._setPointerPosition(d);
var c=this.getIntersection(this.getPointerPosition());
fireDblClick=!1,Kinetic.inDblClickWindow?(fireDblClick=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1
},Kinetic.dblClickWindow),c&&c.isListening()&&(c._fireAndBubble(al,d),Kinetic.listenClickTap&&c._id===this.tapStartShape._id&&(c._fireAndBubble(ak,d),fireDblClick&&c._fireAndBubble(aj,d)),c.isListening()&&d.preventDefault&&d.preventDefault()),Kinetic.listenClickTap&&(this._fire(Z,d),fireDblClick&&this._fire(Y,d)),Kinetic.listenClickTap=!1
},_touchmove:function(e){this._setPointerPosition(e);
var d=Kinetic.DD,f=this.getIntersection(this.getPointerPosition());
f&&f.isListening()&&(f._fireAndBubble(ai,e),f.isListening()&&e.preventDefault&&e.preventDefault()),this._fire(X,e),d&&d._drag(e)
},_setPointerPosition:function(j){var h,j=j?j:window.event,o=this._getContentPosition(),n=j.offsetX,m=j.clientX,l=null,k=null;
void 0!==j.touches?1===j.touches.length&&(h=j.touches[0],l=h.clientX-o.left,k=h.clientY-o.top):void 0!==n?(l=n,k=j.offsetY):"mozilla"===Kinetic.UA.browser?(l=j.layerX,k=j.layerY):void 0!==m&&o&&(l=m-o.left,k=j.clientY-o.top),null!==l&&null!==k&&(this.pointerPos={x:l,y:k})
},_getContentPosition:function(){var b=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};
return{top:b.top,left:b.left}
},_buildDOM:function(){var b=this.getContainer();
b.innerHTML=P,this.content=document.createElement(W),this.content.style.position=V,this.content.style.display=U,this.content.className=T,this.content.setAttribute("role","presentation"),b.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()
},_onContent:function(h,g){var m,l,k=h.split(S),j=k.length;
for(m=0;
j>m;
m++){l=k[m],this.content.addEventListener(l,g,!1)
}}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")
}(),function(){var g="#",f="beforeDraw",k="draw",j=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],h=j.length;
Kinetic.Util.addMethods(Kinetic.Layer,{___init:function(b){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.Container.call(this,b)
},_validateAdd:function(d){var c=d.getType();
"Group"!==c&&"Shape"!==c&&Kinetic.Util.error("You may only add groups and shapes to a layer.")
},getIntersection:function(e){var d,n,m,l;
if(!this.isVisible()){return null
}for(n=0;
h>n;
n++){if(m=j[n],d=this._getIntersection({x:e.x+m.x,y:e.y+m.y}),l=d.shape){return l
}if(!d.antialiased){return null
}}},_getIntersection:function(a){var o,n,m=this.hitCanvas.context._context.getImageData(a.x,a.y,1,1).data,l=m[3];
return 255===l?(o=Kinetic.Util._rgbToHex(m[0],m[1],m[2]),n=Kinetic.shapes[g+o],{shape:n}):l>0?{antialiased:!0}:{}
},drawScene:function(b){var l=this.getLayer(),c=b||l&&l.getCanvas();
return this._fire(f,{node:this}),this.getClearBeforeDraw()&&c.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,c),this._fire(k,{node:this}),this
},drawHit:function(e){var d=this.getLayer(),l=e||d&&d.hitCanvas;
return d&&d.getClearBeforeDraw()&&d.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,l),this
},getCanvas:function(){return this.canvas
},getHitCanvas:function(){return this.hitCanvas
},getContext:function(){return this.getCanvas().getContext()
},clear:function(e){var d=this.getContext(),l=this.getHitCanvas().getContext();
return d.clear(e),l.clear(e),this
},setVisible:function(b){return Kinetic.Node.prototype.setVisible.call(this,b),b?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this
},setZIndex:function(d){Kinetic.Node.prototype.setZIndex.call(this,d);
var c=this.getStage();
return c&&(c.content.removeChild(this.getCanvas()._canvas),d<c.getChildren().length-1?c.content.insertBefore(this.getCanvas()._canvas,c.getChildren()[d+1].getCanvas()._canvas):c.content.appendChild(this.getCanvas()._canvas)),this
},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);
var b=this.getStage();
b&&(b.content.removeChild(this.getCanvas()._canvas),b.content.appendChild(this.getCanvas()._canvas))
},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var b=this.getStage();
b&&(b.content.removeChild(this.getCanvas()._canvas),this.index<b.getChildren().length-1?b.content.insertBefore(this.getCanvas()._canvas,b.getChildren()[this.index+1].getCanvas()._canvas):b.content.appendChild(this.getCanvas()._canvas))
}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var d=this.getStage();
if(d){var c=d.getChildren();
d.content.removeChild(this.getCanvas()._canvas),d.content.insertBefore(this.getCanvas()._canvas,c[this.index+1].getCanvas()._canvas)
}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var d=this.getStage();
if(d){var c=d.getChildren();
d.content.removeChild(this.getCanvas()._canvas),d.content.insertBefore(this.getCanvas()._canvas,c[1].getCanvas()._canvas)
}}},getLayer:function(){return this
},remove:function(){var e=this.getStage(),d=this.getCanvas(),l=d._canvas;
return Kinetic.Node.prototype.remove.call(this),e&&l&&Kinetic.Util._isInDocument(l)&&e.content.removeChild(l),this
},getStage:function(){return this.parent
},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this
},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this
}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"clearBeforeDraw",!0),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)
}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(b){this.nodeType="Group",Kinetic.Container.call(this,b)
},_validateAdd:function(d){var c=d.getType();
"Group"!==c&&"Shape"!==c&&Kinetic.Util.error("You may only add groups and shapes to groups.")
}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)
}(),function(){Kinetic.Rect=function(b){this.___init(b)
},Kinetic.Rect.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className="Rect",this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(f){var e=this.getCornerRadius(),h=this.getWidth(),g=this.getHeight();
f.beginPath(),e?(f.moveTo(e,0),f.lineTo(h-e,0),f.arc(h-e,e,e,3*Math.PI/2,0,!1),f.lineTo(h,g-e),f.arc(h-e,g-e,e,0,Math.PI/2,!1),f.lineTo(e,g),f.arc(e,g-e,e,Math.PI/2,Math.PI,!1),f.lineTo(0,e),f.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):f.rect(0,0,h,g),f.closePath(),f.fillStrokeShape(this)
}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)
}(),function(){var d=2*Math.PI-0.0001,c="Circle";
Kinetic.Circle=function(b){this.___init(b)
},Kinetic.Circle.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className=c,this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(a){a.beginPath(),a.arc(0,0,this.getRadius(),0,d,!1),a.closePath(),a.fillStrokeShape(this)
},getWidth:function(){return 2*this.getRadius()
},getHeight:function(){return 2*this.getRadius()
},setWidth:function(b){Kinetic.Node.prototype.setWidth.call(this,b),this.setRadius(b/2)
},setHeight:function(b){Kinetic.Node.prototype.setHeight.call(this,b),this.setRadius(b/2)
}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)
}(),function(){var d=2*Math.PI-0.0001,c="Ellipse";
Kinetic.Ellipse=function(b){this.___init(b)
},Kinetic.Ellipse.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className=c,this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(a){var h=this.getRadius(),g=h.x,f=h.y;
a.beginPath(),a.save(),g!==f&&a.scale(1,f/g),a.arc(0,0,g,0,d,!1),a.restore(),a.closePath(),a.fillStrokeShape(this)
},getWidth:function(){return 2*this.getRadius().x
},getHeight:function(){return 2*this.getRadius().y
},setWidth:function(b){Kinetic.Node.prototype.setWidth.call(this,b),this.setRadius({x:b/2})
},setHeight:function(b){Kinetic.Node.prototype.setHeight.call(this,b),this.setRadius({y:b/2})
}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)
}(),function(){var b=2*Math.PI-0.0001;
Kinetic.Ring=function(c){this.___init(c)
},Kinetic.Ring.prototype={___init:function(c){Kinetic.Shape.call(this,c),this.className="Ring",this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(a){a.beginPath(),a.arc(0,0,this.getInnerRadius(),0,b,!1),a.moveTo(this.getOuterRadius(),0),a.arc(0,0,this.getOuterRadius(),b,0,!0),a.closePath(),a.fillStrokeShape(this)
},getWidth:function(){return 2*this.getOuterRadius()
},getHeight:function(){return 2*this.getOuterRadius()
},setWidth:function(c){Kinetic.Node.prototype.setWidth.call(this,c),this.setOuterRadius(c/2)
},setHeight:function(c){Kinetic.Node.prototype.setHeight.call(this,c),this.setOuterRadius(c/2)
}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)
}(),function(){Kinetic.Wedge=function(b){this.___init(b)
},Kinetic.Wedge.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className="Wedge",this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(b){b.beginPath(),b.arc(0,0,this.getRadius(),0,this.getAngle()*Math.PI/180,this.getClockwise()),b.lineTo(0,0),b.closePath(),b.fillStrokeShape(this)
}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)
}(),function(){Kinetic.Arc=function(b){this.___init(b)
},Kinetic.Arc.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className="Arc",this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(e){var d=this.angle()*Math.PI/180,f=this.clockwise();
e.beginPath(),e.arc(0,0,this.getOuterRadius(),0,d,f),e.arc(0,0,this.getInnerRadius(),d,0,!f),e.closePath(),e.fillStrokeShape(this)
}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)
}(),function(){var b="Image";
Kinetic.Image=function(c){this.___init(c)
},Kinetic.Image.prototype={___init:function(a){Kinetic.Shape.call(this,a),this.className=b,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)
},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()
},_sceneFunc:function(k){var j,q,p,o,n=this.getWidth(),m=this.getHeight(),l=this.getImage();
l&&(j=this.getCrop(),q=j.width,p=j.height,o=q&&p?[l,j.x,j.y,q,p,0,0,n,m]:[l,0,0,n,m]),k.beginPath(),k.rect(0,0,n,m),k.closePath(),k.fillStrokeShape(this),l&&k.drawImage.apply(k,o)
},_hitFunc:function(e){var d=this.getWidth(),f=this.getHeight();
e.beginPath(),e.rect(0,0,d,f),e.closePath(),e.fillStrokeShape(this)
},getWidth:function(){var c=this.getImage();
return this.attrs.width||(c?c.width:0)
},getHeight:function(){var c=this.getImage();
return this.attrs.height||(c?c.height:0)
}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)
}(),function(){function T(b){b.fillText(this.partialText,0,0)
}function S(b){b.strokeText(this.partialText,0,0)
}var R="auto",Q="canvas",P="center",O="Change.kinetic",N="2d",M="-",L="",K="left",J="text",I="Text",H="middle",G="normal",F="px ",E=" ",D="right",C="word",B="char",A="none",z=["fontFamily","fontSize","fontStyle","padding","align","lineHeight","text","width","height","wrap"],y=z.length,x=document.createElement(Q).getContext(N);
Kinetic.Text=function(b){this.___init(b)
},Kinetic.Text.prototype={___init:function(c){var b=this;
void 0===c.width&&(c.width=R),void 0===c.height&&(c.height=R),Kinetic.Shape.call(this,c),this._fillFunc=T,this._strokeFunc=S,this.className=I;
for(var a=0;
y>a;
a++){this.on(z[a]+O,b._setTextData)
}this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)
},_sceneFunc:function(U){var w,v=this.getPadding(),u=this.getTextHeight(),r=this.getLineHeight()*u,q=this.textArr,p=q.length,o=this.getWidth();
for(U.setAttr("font",this._getContextFont()),U.setAttr("textBaseline",H),U.setAttr("textAlign",K),U.save(),U.translate(v,0),U.translate(0,v+u/2),w=0;
p>w;
w++){var m=q[w],j=m.text,e=m.width;
U.save(),this.getAlign()===D?U.translate(o-e-2*v,0):this.getAlign()===P&&U.translate((o-e-2*v)/2,0),this.partialText=j,U.fillStrokeShape(this),U.restore(),U.translate(0,r)
}U.restore()
},_hitFunc:function(e){var d=this.getWidth(),f=this.getHeight();
e.beginPath(),e.rect(0,0,d,f),e.closePath(),e.fillStrokeShape(this)
},setText:function(d){var c=Kinetic.Util._isString(d)?d:d.toString();
return this._setAttr(J,c),this
},getWidth:function(){return this.attrs.width===R?this.getTextWidth()+2*this.getPadding():this.attrs.width
},getHeight:function(){return this.attrs.height===R?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height
},getTextWidth:function(){return this.textWidth
},getTextHeight:function(){return this.textHeight
},_getTextSize:function(f){var e,h=x,g=this.getFontSize();
return h.save(),h.font=this._getContextFont(),e=h.measureText(f),h.restore(),{width:e.width,height:parseInt(g,10)}
},_getContextFont:function(){return this.getFontStyle()+E+this.getFontSize()+F+this.getFontFamily()
},_addTextLine:function(d,c){return this.textArr.push({text:d,width:c})
},_getTextWidth:function(b){return x.measureText(b).width
},_setTextData:function(){var ap=this.getText().split("\n"),ao=+this.getFontSize(),an=0,am=this.getLineHeight()*ao,al=this.attrs.width,ak=this.attrs.height,aj=al!==R,ai=ak!==R,ah=this.getPadding(),ag=al-2*ah,af=ak-2*ah,ae=0,ac=this.getWrap(),aa=ac!==A,W=ac!==B&&aa;
this.textArr=[],x.save(),x.font=this.getFontStyle()+E+ao+F+this.getFontFamily();
for(var U=0,o=ap.length;
o>U;
++U){var h=ap[U],c=this._getTextWidth(h);
if(aj&&c>ag){for(;
h.length>0;
){for(var ad=0,ab=h.length,Z="",Y=0;
ab>ad;
){var X=ad+ab>>>1,V=h.slice(0,X+1),w=this._getTextWidth(V);
ag>=w?(ad=X+1,Z=V,Y=w):ab=X
}if(!Z){break
}if(W){var p=Math.max(Z.lastIndexOf(E),Z.lastIndexOf(M))+1;
p>0&&(ad=p,Z=Z.slice(0,ad),Y=this._getTextWidth(Z))
}if(this._addTextLine(Z,Y),ae+=am,!aa||ai&&ae+am>af){break
}if(h=h.slice(ad),h.length>0&&(c=this._getTextWidth(h),ag>=c)){this._addTextLine(h,c),ae+=am;
break
}}}else{this._addTextLine(h,c),ae+=am,an=Math.max(an,c)
}if(ai&&ae+am>af){break
}}x.restore(),this.textHeight=ao,this.textWidth=an
}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",G),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",K),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",C),Kinetic.Factory.addGetter(Kinetic.Text,"text",L),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)
}(),function(){Kinetic.Line=function(b){this.___init(b)
},Kinetic.Line.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")
}),this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(k){var j,q,p,o=this.getPoints(),n=o.length,m=this.getTension(),l=this.getClosed();
if(k.beginPath(),k.moveTo(o[0],o[1]),0!==m&&n>4){for(j=this.getTensionPoints(),q=j.length,p=l?0:4,l||k.quadraticCurveTo(j[0],j[1],j[2],j[3]);
q-2>p;
){k.bezierCurveTo(j[p++],j[p++],j[p++],j[p++],j[p++],j[p++])
}l||k.quadraticCurveTo(j[q-2],j[q-1],o[n-2],o[n-1])
}else{for(p=2;
n>p;
p+=2){k.lineTo(o[p],o[p+1])
}}l?(k.closePath(),k.fillStrokeShape(this)):k.strokeShape(this)
},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)
},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())
},_getTensionPointsClosed:function(){var k=this.getPoints(),j=k.length,q=this.getTension(),p=Kinetic.Util,o=p._getControlPoints(k[j-2],k[j-1],k[0],k[1],k[2],k[3],q),n=p._getControlPoints(k[j-4],k[j-3],k[j-2],k[j-1],k[0],k[1],q),m=Kinetic.Util._expandPoints(k,q),l=[o[2],o[3]].concat(m).concat([n[0],n[1],k[j-2],k[j-1],n[2],n[3],o[0],o[1],k[0],k[1]]);
return l
}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)
}(),function(){Kinetic.Sprite=function(b){this.___init(b)
},Kinetic.Sprite.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)
}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)
},_sceneFunc:function(v){var u=this.getAnimation(),r=this.frameIndex(),q=4*r,p=this.getAnimations()[u],o=p[q+0],n=p[q+1],m=p[q+2],l=p[q+3],k=this.getImage();
k&&v.drawImage(k,o,n,m,l,0,0,m,l)
},_hitFunc:function(j){var h=this.getAnimation(),o=this.frameIndex(),n=4*o,m=this.getAnimations()[h],l=m[n+2],k=m[n+3];
j.beginPath(),j.rect(0,0,l,k),j.closePath(),j.fillShape(this)
},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()
},start:function(){var d=this,c=this.getLayer();
this.anim.setLayers(c),this.interval=setInterval(function(){d._updateIndex()
},1000/this.getFrameRate()),this.anim.start()
},stop:function(){this.anim.stop(),clearInterval(this.interval)
},_updateIndex:function(){var g=this.frameIndex(),f=this.getAnimation(),k=this.getAnimations(),j=k[f],h=j.length/4;
h-1>g?this.frameIndex(g+1):this.frameIndex(0)
}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)
}(),function(){Kinetic.Path=function(b){this.___init(b)
},Kinetic.Path.prototype={___init:function(d){this.dataArray=[];
var c=this;
Kinetic.Shape.call(this,d),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){c.dataArray=Kinetic.Path.parsePathData(this.getData())
}),this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(J){var I=this.dataArray,H=!1;
J.beginPath();
for(var G=0;
G<I.length;
G++){var F=I[G].command,E=I[G].points;
switch(F){case"L":J.lineTo(E[0],E[1]);
break;
case"M":J.moveTo(E[0],E[1]);
break;
case"C":J.bezierCurveTo(E[0],E[1],E[2],E[3],E[4],E[5]);
break;
case"Q":J.quadraticCurveTo(E[0],E[1],E[2],E[3]);
break;
case"A":var D=E[0],C=E[1],B=E[2],A=E[3],z=E[4],y=E[5],x=E[6],w=E[7],v=B>A?B:A,u=B>A?1:B/A,r=B>A?A/B:1;
J.translate(D,C),J.rotate(x),J.scale(u,r),J.arc(0,0,v,z,z+y,1-w),J.scale(1/u,1/r),J.rotate(-x),J.translate(-D,-C);
break;
case"z":J.closePath(),H=!0
}}H?J.fillStrokeShape(this):J.strokeShape(this)
}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(f,e,h,g){return Math.sqrt((h-f)*(h-f)+(g-e)*(g-e))
},Kinetic.Path.getPointOnLine=function(J,I,H,G,F,E,D){void 0===E&&(E=I),void 0===D&&(D=H);
var C=(F-H)/(G-I+1e-8),B=Math.sqrt(J*J/(1+C*C));
I>G&&(B*=-1);
var A,z=C*B;
if(G===I){A={x:E,y:D+z}
}else{if((D-H)/(E-I+1e-8)===C){A={x:E+B,y:D+z}
}else{var y,x,w=this.getLineLength(I,H,G,F);
if(1e-8>w){return void 0
}var v=(E-I)*(G-I)+(D-H)*(F-H);
v/=w*w,y=I+v*(G-I),x=H+v*(F-H);
var u=this.getLineLength(E,D,y,x),r=Math.sqrt(J*J-u*u);
B=Math.sqrt(r*r/(1+C*C)),I>G&&(B*=-1),z=C*B,A={x:y+B,y:x+z}
}}return A
},Kinetic.Path.getPointOnCubicBezier=function(F,E,D,C,B,A,z,y,x){function w(b){return b*b*b
}function v(b){return 3*b*b*(1-b)
}function u(b){return 3*b*(1-b)*(1-b)
}function r(b){return(1-b)*(1-b)*(1-b)
}var q=y*w(F)+A*v(F)+C*u(F)+E*r(F),p=x*w(F)+z*v(F)+B*u(F)+D*r(F);
return{x:q,y:p}
},Kinetic.Path.getPointOnQuadraticBezier=function(z,y,x,w,v,u,r){function q(b){return b*b
}function p(b){return 2*b*(1-b)
}function o(b){return(1-b)*(1-b)
}var n=u*q(z)+w*p(z)+y*o(z),m=r*q(z)+v*p(z)+x*o(z);
return{x:n,y:m}
},Kinetic.Path.getPointOnEllipticalArc=function(r,q,p,o,n,m){var l=Math.cos(m),k=Math.sin(m),j={x:p*Math.cos(n),y:o*Math.sin(n)};
return{x:r+(j.x*l-j.y*k),y:q+(j.x*k+j.y*l)}
},Kinetic.Path.parsePathData=function(af){if(!af){return[]
}var ae=af,ad=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];
ae=ae.replace(new RegExp(" ","g"),",");
for(var ac=0;
ac<ad.length;
ac++){ae=ae.replace(new RegExp(ad[ac],"g"),"|"+ad[ac])
}var ab=ae.split("|"),aa=[],Z=0,Y=0;
for(ac=1;
ac<ab.length;
ac++){var X=ab[ac],W=X.charAt(0);
X=X.slice(1),X=X.replace(new RegExp(",-","g"),"-"),X=X.replace(new RegExp("-","g"),",-"),X=X.replace(new RegExp("e,-","g"),"e-");
var V=X.split(",");
V.length>0&&""===V[0]&&V.shift();
for(var U=0;
U<V.length;
U++){V[U]=parseFloat(V[U])
}for(;
V.length>0&&!isNaN(V[0]);
){var T,S,R,Q,O,M,K,J,I,H,G=null,F=[],E=Z,D=Y;
switch(W){case"l":Z+=V.shift(),Y+=V.shift(),G="L",F.push(Z,Y);
break;
case"L":Z=V.shift(),Y=V.shift(),F.push(Z,Y);
break;
case"m":var P=V.shift(),N=V.shift();
if(Z+=P,Y+=N,G="M",aa.length>2&&"z"===aa[aa.length-1].command){for(var L=aa.length-2;
L>=0;
L--){if("M"===aa[L].command){Z=aa[L].points[0]+P,Y=aa[L].points[1]+N;
break
}}}F.push(Z,Y),W="l";
break;
case"M":Z=V.shift(),Y=V.shift(),G="M",F.push(Z,Y),W="L";
break;
case"h":Z+=V.shift(),G="L",F.push(Z,Y);
break;
case"H":Z=V.shift(),G="L",F.push(Z,Y);
break;
case"v":Y+=V.shift(),G="L",F.push(Z,Y);
break;
case"V":Y=V.shift(),G="L",F.push(Z,Y);
break;
case"C":F.push(V.shift(),V.shift(),V.shift(),V.shift()),Z=V.shift(),Y=V.shift(),F.push(Z,Y);
break;
case"c":F.push(Z+V.shift(),Y+V.shift(),Z+V.shift(),Y+V.shift()),Z+=V.shift(),Y+=V.shift(),G="C",F.push(Z,Y);
break;
case"S":S=Z,R=Y,T=aa[aa.length-1],"C"===T.command&&(S=Z+(Z-T.points[2]),R=Y+(Y-T.points[3])),F.push(S,R,V.shift(),V.shift()),Z=V.shift(),Y=V.shift(),G="C",F.push(Z,Y);
break;
case"s":S=Z,R=Y,T=aa[aa.length-1],"C"===T.command&&(S=Z+(Z-T.points[2]),R=Y+(Y-T.points[3])),F.push(S,R,Z+V.shift(),Y+V.shift()),Z+=V.shift(),Y+=V.shift(),G="C",F.push(Z,Y);
break;
case"Q":F.push(V.shift(),V.shift()),Z=V.shift(),Y=V.shift(),F.push(Z,Y);
break;
case"q":F.push(Z+V.shift(),Y+V.shift()),Z+=V.shift(),Y+=V.shift(),G="Q",F.push(Z,Y);
break;
case"T":S=Z,R=Y,T=aa[aa.length-1],"Q"===T.command&&(S=Z+(Z-T.points[0]),R=Y+(Y-T.points[1])),Z=V.shift(),Y=V.shift(),G="Q",F.push(S,R,Z,Y);
break;
case"t":S=Z,R=Y,T=aa[aa.length-1],"Q"===T.command&&(S=Z+(Z-T.points[0]),R=Y+(Y-T.points[1])),Z+=V.shift(),Y+=V.shift(),G="Q",F.push(S,R,Z,Y);
break;
case"A":Q=V.shift(),O=V.shift(),M=V.shift(),K=V.shift(),J=V.shift(),I=Z,H=Y,Z=V.shift(),Y=V.shift(),G="A",F=this.convertEndpointToCenterParameterization(I,H,Z,Y,K,J,Q,O,M);
break;
case"a":Q=V.shift(),O=V.shift(),M=V.shift(),K=V.shift(),J=V.shift(),I=Z,H=Y,Z+=V.shift(),Y+=V.shift(),G="A",F=this.convertEndpointToCenterParameterization(I,H,Z,Y,K,J,Q,O,M)
}aa.push({command:G||W,points:F,start:{x:E,y:D},pathLength:this.calcLength(E,D,G||W,F)})
}("z"===W||"Z"===W)&&aa.push({command:"z",points:[],start:void 0,pathLength:0})
}return aa
},Kinetic.Path.calcLength=function(z,y,x,w){var v,u,r,q=Kinetic.Path;
switch(x){case"L":return q.getLineLength(z,y,w[0],w[1]);
case"C":for(v=0,u=q.getPointOnCubicBezier(0,z,y,w[0],w[1],w[2],w[3],w[4],w[5]),t=0.01;
1>=t;
t+=0.01){r=q.getPointOnCubicBezier(t,z,y,w[0],w[1],w[2],w[3],w[4],w[5]),v+=q.getLineLength(u.x,u.y,r.x,r.y),u=r
}return v;
case"Q":for(v=0,u=q.getPointOnQuadraticBezier(0,z,y,w[0],w[1],w[2],w[3]),t=0.01;
1>=t;
t+=0.01){r=q.getPointOnQuadraticBezier(t,z,y,w[0],w[1],w[2],w[3]),v+=q.getLineLength(u.x,u.y,r.x,r.y),u=r
}return v;
case"A":v=0;
var p=w[4],o=w[5],n=w[4]+o,m=Math.PI/180;
if(Math.abs(p-n)<m&&(m=Math.abs(p-n)),u=q.getPointOnEllipticalArc(w[0],w[1],w[2],w[3],p,0),0>o){for(t=p-m;
t>n;
t-=m){r=q.getPointOnEllipticalArc(w[0],w[1],w[2],w[3],t,0),v+=q.getLineLength(u.x,u.y,r.x,r.y),u=r
}}else{for(t=p+m;
n>t;
t+=m){r=q.getPointOnEllipticalArc(w[0],w[1],w[2],w[3],t,0),v+=q.getLineLength(u.x,u.y,r.x,r.y),u=r
}}return r=q.getPointOnEllipticalArc(w[0],w[1],w[2],w[3],n,0),v+=q.getLineLength(u.x,u.y,r.x,r.y)
}return 0
},Kinetic.Path.convertEndpointToCenterParameterization=function(X,W,V,U,T,S,R,Q,P){var O=P*(Math.PI/180),N=Math.cos(O)*(X-V)/2+Math.sin(O)*(W-U)/2,M=-1*Math.sin(O)*(X-V)/2+Math.cos(O)*(W-U)/2,L=N*N/(R*R)+M*M/(Q*Q);
L>1&&(R*=Math.sqrt(L),Q*=Math.sqrt(L));
var K=Math.sqrt((R*R*Q*Q-R*R*M*M-Q*Q*N*N)/(R*R*M*M+Q*Q*N*N));
T==S&&(K*=-1),isNaN(K)&&(K=0);
var J=K*R*M/Q,I=K*-Q*N/R,H=(X+V)/2+Math.cos(O)*J-Math.sin(O)*I,G=(W+U)/2+Math.sin(O)*J+Math.cos(O)*I,F=function(b){return Math.sqrt(b[0]*b[0]+b[1]*b[1])
},E=function(d,c){return(d[0]*c[0]+d[1]*c[1])/(F(d)*F(c))
},D=function(d,c){return(d[0]*c[1]<d[1]*c[0]?-1:1)*Math.acos(E(d,c))
},C=D([1,0],[(N-J)/R,(M-I)/Q]),B=[(N-J)/R,(M-I)/Q],A=[(-1*N-J)/R,(-1*M-I)/Q],z=D(B,A);
return E(B,A)<=-1&&(z=Math.PI),E(B,A)>=1&&(z=0),0===S&&z>0&&(z-=2*Math.PI),1==S&&0>z&&(z+=2*Math.PI),[H,G,R,Q,C,z,O,S]
},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)
}(),function(){function f(b){b.fillText(this.partialText,0,0)
}function e(b){b.strokeText(this.partialText,0,0)
}var h="",g="normal";
Kinetic.TextPath=function(b){this.___init(b)
},Kinetic.TextPath.prototype={___init:function(b){var a=this;
this.dummyCanvas=document.createElement("canvas"),this.dataArray=[],Kinetic.Shape.call(this,b),this._fillFunc=f,this._strokeFunc=e,this._fillFuncHit=f,this._strokeFuncHit=e,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){a.dataArray=Kinetic.Path.parsePathData(this.attrs.data)
}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",a._setTextData),a._setTextData(),this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(k){k.setAttr("font",this._getContextFont()),k.setAttr("textBaseline","middle"),k.setAttr("textAlign","left"),k.save();
for(var j=this.glyphInfo,m=0;
m<j.length;
m++){k.save();
var l=j[m].p0;
k.translate(l.x,l.y),k.rotate(j[m].rotation),this.partialText=j[m].text,k.fillStrokeShape(this),k.restore()
}k.restore()
},getTextWidth:function(){return this.textWidth
},getTextHeight:function(){return this.textHeight
},setText:function(b){Kinetic.Text.prototype.setText.call(this,b)
},_getTextSize:function(k){var j=this.dummyCanvas,m=j.getContext("2d");
m.save(),m.font=this._getContextFont();
var l=m.measureText(k);
return m.restore(),{width:l.width,height:parseInt(this.attrs.fontSize,10)}
},_setTextData:function(){var F=this,E=this._getTextSize(this.attrs.text);
this.textWidth=E.width,this.textHeight=E.height,this.glyphInfo=[];
for(var D,C,B,A=this.attrs.text.split(""),z=-1,y=0,x=function(){y=0;
for(var a=F.dataArray,c=z+1;
c<a.length;
c++){if(a[c].pathLength>0){return z=c,a[c]
}"M"==a[c].command&&(D={x:a[c].points[0],y:a[c].points[1]})
}return{}
},w=function(L){var K=F._getTextSize(L).width,J=0,I=0;
for(C=void 0;
Math.abs(K-J)/K>0.01&&25>I;
){I++;
for(var H=J;
void 0===B;
){B=x(),B&&H+B.pathLength<K&&(H+=B.pathLength,B=void 0)
}if(B==={}||void 0===D){return void 0
}var G=!1;
switch(B.command){case"L":Kinetic.Path.getLineLength(D.x,D.y,B.points[0],B.points[1])>K?C=Kinetic.Path.getPointOnLine(K,D.x,D.y,B.points[0],B.points[1],D.x,D.y):B=void 0;
break;
case"A":var d=B.points[4],c=B.points[5],a=B.points[4]+c;
0===y?y=d+1e-8:K>J?y+=Math.PI/180*c/Math.abs(c):y-=Math.PI/360*c/Math.abs(c),(0>c&&a>y||c>=0&&y>a)&&(y=a,G=!0),C=Kinetic.Path.getPointOnEllipticalArc(B.points[0],B.points[1],B.points[2],B.points[3],y,B.points[6]);
break;
case"C":0===y?y=K>B.pathLength?1e-8:K/B.pathLength:K>J?y+=(K-J)/B.pathLength:y-=(J-K)/B.pathLength,y>1&&(y=1,G=!0),C=Kinetic.Path.getPointOnCubicBezier(y,B.start.x,B.start.y,B.points[0],B.points[1],B.points[2],B.points[3],B.points[4],B.points[5]);
break;
case"Q":0===y?y=K/B.pathLength:K>J?y+=(K-J)/B.pathLength:y-=(J-K)/B.pathLength,y>1&&(y=1,G=!0),C=Kinetic.Path.getPointOnQuadraticBezier(y,B.start.x,B.start.y,B.points[0],B.points[1],B.points[2],B.points[3])
}void 0!==C&&(J=Kinetic.Path.getLineLength(D.x,D.y,C.x,C.y)),G&&(G=!1,B=void 0)
}},v=0;
v<A.length&&(w(A[v]),void 0!==D&&void 0!==C);
v++){var u=Kinetic.Path.getLineLength(D.x,D.y,C.x,C.y),r=0,q=Kinetic.Path.getPointOnLine(r+u/2,D.x,D.y,C.x,C.y),p=Math.atan2(C.y-D.y,C.x-D.x);
this.glyphInfo.push({transposeX:q.x,transposeY:q.y,text:A[v],rotation:p,p0:D,p1:C}),D=C
}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",g),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",h),Kinetic.Collection.mapMethods(Kinetic.TextPath)
}(),function(){Kinetic.RegularPolygon=function(b){this.___init(b)
},Kinetic.RegularPolygon.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(h){var g,m,l,k=this.attrs.sides,j=this.attrs.radius;
for(h.beginPath(),h.moveTo(0,0-j),g=1;
k>g;
g++){m=j*Math.sin(2*g*Math.PI/k),l=-1*j*Math.cos(2*g*Math.PI/k),h.lineTo(m,l)
}h.closePath(),h.fillStrokeShape(this)
}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)
}(),function(){Kinetic.Star=function(b){this.___init(b)
},Kinetic.Star.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className="Star",this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(k){var j=this.innerRadius(),q=this.outerRadius(),p=this.numPoints();
k.beginPath(),k.moveTo(0,0-q);
for(var o=1;
2*p>o;
o++){var n=0===o%2?q:j,m=n*Math.sin(o*Math.PI/p),l=-1*n*Math.cos(o*Math.PI/p);
k.lineTo(m,l)
}k.closePath(),k.fillStrokeShape(this)
}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)
}(),function(){var r=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],q="Change.kinetic",p="none",o="up",n="right",m="down",l="left",k="Label",j=r.length;
Kinetic.Label=function(b){this.____init(b)
},Kinetic.Label.prototype={____init:function(d){var c=this;
this.className=k,Kinetic.Group.call(this,d),this.on("add.kinetic",function(b){c._addListeners(b.child),c._sync()
})
},getText:function(){return this.find("Text")[0]
},getTag:function(){return this.find("Tag")[0]
},_addListeners:function(h){var g,b=this,a=function(){b._sync()
};
for(g=0;
j>g;
g++){h.on(r[g]+q,a)
}},getWidth:function(){return this.getText().getWidth()
},getHeight:function(){return this.getText().getHeight()
},_sync:function(){var f,d,x,w,v,u,g=this.getText(),e=this.getTag();
if(g&&e){switch(f=g.getWidth(),d=g.getHeight(),x=e.getPointerDirection(),w=e.getPointerWidth(),pointerHeight=e.getPointerHeight(),v=0,u=0,x){case o:v=f/2,u=-1*pointerHeight;
break;
case n:v=f+w,u=d/2;
break;
case m:v=f/2,u=d+pointerHeight;
break;
case l:v=-1*w,u=d/2
}e.setAttrs({x:-1*v,y:-1*u,width:f,height:d}),g.setAttrs({x:-1*v,y:-1*u})
}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(b){this.___init(b)
},Kinetic.Tag.prototype={___init:function(b){Kinetic.Shape.call(this,b),this.className="Tag",this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(e){var d=this.getWidth(),v=this.getHeight(),u=this.getPointerDirection(),g=this.getPointerWidth(),f=this.getPointerHeight();
this.getCornerRadius(),e.beginPath(),e.moveTo(0,0),u===o&&(e.lineTo((d-g)/2,0),e.lineTo(d/2,-1*f),e.lineTo((d+g)/2,0)),e.lineTo(d,0),u===n&&(e.lineTo(d,(v-f)/2),e.lineTo(d+g,v/2),e.lineTo(d,(v+f)/2)),e.lineTo(d,v),u===m&&(e.lineTo((d+g)/2,v),e.lineTo(d/2,v+f),e.lineTo((d-g)/2,v)),e.lineTo(0,v),u===l&&(e.lineTo(0,(v+f)/2),e.lineTo(-1*g,v/2),e.lineTo(0,(v-f)/2)),e.closePath(),e.fillStrokeShape(this)
}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",p),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)
}();
/*!
 * jQuery Final Countdown
 *
 * @author Pragmatic Mates, http://pragmaticmates.com
 * @license GPL 2
 * @link https://github.com/PragmaticMates/jquery-final-countdown
 */
(function(g){var u;
var l;
var j;
var e;
var p;
var d;
var r;
var b;
var q;
var h;
var c;
var n;
g.fn.final_countdown=function(K,J){c=g(this);
var F=g(".promo__countdown__clock");
var I=F.data("seconds-bordercolor"),E=F.data("seconds-borderwidth");
var A=F.data("minutes-bordercolor"),x=F.data("minutes-borderwidth");
var B=F.data("hours-bordercolor"),y=F.data("hours-borderwidth");
var w=F.data("days-bordercolor"),G=F.data("days-borderwidth");
var z=F.data("start"),D=F.data("end"),H=Date.now();
var C=g.extend({start:Math.round(z/1000),end:Math.round(D/1000),now:Math.round(H/1000),selectors:{value_seconds:".clock-seconds .val",canvas_seconds:"canvas_seconds",value_minutes:".clock-minutes .val",canvas_minutes:"canvas_minutes",value_hours:".clock-hours .val",canvas_hours:"canvas_hours",value_days:".clock-days .val",canvas_days:"canvas_days"},seconds:{borderColor:I,borderWidth:E},minutes:{borderColor:A,borderWidth:x},hours:{borderColor:B,borderWidth:y},days:{borderColor:w,borderWidth:G}},K);
if(C.end>C.now){F.show()
}u=g.extend({},C,K);
if(typeof J=="function"){n=J
}f();
o();
v();
a()
};
function f(){g(window).load(k);
g(window).on("redraw",function(){if(g(".promo__countdown__clock").length>0){switched=false;
k()
}});
g(window).on("resize",function(){if(g(".promo__countdown__clock").length>0){k()
}})
}function k(){r.draw();
b.draw();
q.draw();
h.draw()
}function m(w){return(Math.PI/180)*w-(Math.PI/180)*90
}function o(){l={total:Math.floor((u.end-u.start)/86400),days:Math.floor((u.end-u.now)/86400),hours:24-Math.floor(((u.end-u.now)%86400)/3600),minutes:60-Math.floor((((u.end-u.now)%86400)%3600)/60),seconds:60-Math.floor((((u.end-u.now)%86400)%3600)%60)}
}function v(){var z=g("#"+u.selectors.canvas_seconds).width();
var B=new Kinetic.Stage({container:u.selectors.canvas_seconds,width:z,height:z});
j=new Kinetic.Shape({drawFunc:function(G){var H=g("#"+u.selectors.canvas_seconds).width();
var F=H/2-u.seconds.borderWidth/2;
var E=H/2;
var I=H/2;
G.beginPath();
G.arc(E,I,F,m(0),m(l.seconds*6));
G.fillStrokeShape(this);
g(u.selectors.value_seconds).html(60-l.seconds)
},stroke:u.seconds.borderColor,strokeWidth:u.seconds.borderWidth});
r=new Kinetic.Layer();
r.add(j);
B.add(r);
var C=g("#"+u.selectors.canvas_minutes).width();
var x=new Kinetic.Stage({container:u.selectors.canvas_minutes,width:C,height:C});
e=new Kinetic.Shape({drawFunc:function(G){var H=g("#"+u.selectors.canvas_minutes).width();
var F=H/2-u.minutes.borderWidth/2;
var E=H/2;
var I=H/2;
G.beginPath();
G.arc(E,I,F,m(0),m(l.minutes*6));
G.fillStrokeShape(this);
g(u.selectors.value_minutes).html(60-l.minutes)
},stroke:u.minutes.borderColor,strokeWidth:u.minutes.borderWidth});
b=new Kinetic.Layer();
b.add(e);
x.add(b);
var w=g("#"+u.selectors.canvas_hours).width();
var A=new Kinetic.Stage({container:u.selectors.canvas_hours,width:w,height:w});
p=new Kinetic.Shape({drawFunc:function(H){var G=g("#"+u.selectors.canvas_hours).width();
var F=G/2-u.hours.borderWidth/2;
var E=G/2;
var I=G/2;
H.beginPath();
H.arc(E,I,F,m(0),m(l.hours*360/24));
H.fillStrokeShape(this);
g(u.selectors.value_hours).html(24-l.hours)
},stroke:u.hours.borderColor,strokeWidth:u.hours.borderWidth});
q=new Kinetic.Layer();
q.add(p);
A.add(q);
var D=g("#"+u.selectors.canvas_days).width();
var y=new Kinetic.Stage({container:u.selectors.canvas_days,width:D,height:D});
d=new Kinetic.Shape({drawFunc:function(H){var I=g("#"+u.selectors.canvas_days).width();
var F=I/2-u.days.borderWidth/2;
var E=I/2;
var J=I/2;
var G=g(".type-days.type-time");
if(l.days===1){G.html("DAY")
}else{G.html("DAYS")
}H.beginPath();
if(l.total==0){H.arc(E,J,F,m(0),m(360))
}else{H.arc(E,J,F,m(0),m((360/l.total)*(l.total-l.days)))
}H.fillStrokeShape(this);
g(u.selectors.value_days).html(l.days)
},stroke:u.days.borderColor,strokeWidth:u.days.borderWidth});
h=new Kinetic.Layer();
h.add(d);
y.add(h)
}function a(){var w=g(".promo__countdown__clock");
var x=setInterval(function(){if(l.seconds>59){if(60-l.minutes==0&&24-l.hours==0&&l.days==0){clearInterval(x);
w.remove();
return
}l.seconds=1;
if(l.minutes>59){l.minutes=1;
b.draw();
if(l.hours>23){l.hours=1;
if(l.days>0){l.days--;
h.draw()
}}else{l.hours++
}q.draw()
}else{l.minutes++
}b.draw()
}else{l.seconds++
}r.draw()
},1000)
}})(jQuery);
var countdownEl=$(".promo__countdown__clock");
if(countdownEl.length>0){countdownEl.final_countdown({})
}(function(b,a,c){var d=a.View.extend({jsonUrl:"//"+window.location.host+"/content/dam/betcom/jsons/bala-notification/bala-notification-bet.json",json:null,dateRegexp:/(\d{2})\.(\d{2})\.(\d{4})/,CLOSED_KEY:"lastClosedBalaNotificationMessage",SHOWN_KEY:"lastShownBalaNotificationMessage",moments_gif:"",text:null,events:{},initialize:function(){if(!("CQ" in window)){var e;
var f=this;
e=this.getJson();
e.done(function(g){f.json=g;
if(!f.isActive()){return
}f.text=f.getTextFromJson();
f.render();
b(".asset_balaNotificationOverlay").on("click",function(){f.hideRibbon()
});
b(".asset_balaNotification-closeIcon").on("click",function(){f.closeRibbon()
})
}).error(function(g){console.error("Cannot obtain BALA data from the server: ",g.message)
})
}},createHtml:function(){var e;
e=_.template('<div class="asset_balaNotificationOverlay"></div><div class="asset_balaNotification"><span class="asset_balaNotification-closeIcon icon"></span><div class="asset_balaNotification-textContainer">'+this.text+"</div></div>")();
return e
},render:function(){var f=b("body");
var e=b(this.createHtml());
if(this.shouldRibbonShow()){e.addClass("asset_balaNotification--open");
b("body").addClass("current_asset_balaNotification--open");
if(b("#moments__sticky__icon .window").length>0){this.moments_gif=b("#moments__sticky__icon .window").css("background-image");
b("#moments__sticky__icon .window").css({"background-image":""})
}this.setLastShownMessage(this.text);
this.clearLastClosedMessage()
}f.append(e);
this.setElement(f[0])
},getJson:function(){var e="";
var f;
f=b.get(this.jsonUrl,{dataType:"json",cache:true,async:true});
return f
},getTextFromJson:function(){var f;
var e=this.json.date;
if(this.isDateFuture(e)){f=this.json.defMsg
}else{f=this.json.msg
}return f
},isDateFuture:function(f){f=new Date(f.replace(this.dateRegexp,"$3-$1-$2"));
var e=new Date();
if(f.getTime()>=e.getTime()){return true
}return false
},hideRibbon:function(){this.$(".asset_balaNotification").removeClass("asset_balaNotification--open");
this.$(".asset_balaNotificationOverlay").removeClass("asset_balaNotification--open");
b("body").removeClass("current_asset_balaNotification--open");
if(b("#moments__sticky__icon .window").length>0){b("#moments__sticky__icon .window").css({"background-image":this.moments_gif})
}},closeRibbon:function(){this.hideRibbon();
this.setLastClosedMessage(this.text)
},stopPropagation:function(e){e.stopPropagation()
},shouldRibbonShow:function(){if(this.hasJSONGotNewMessage()){return true
}else{if(this.hasEverBeenClosed()){return false
}else{if(this.hasBeenShownDuringSession()){return false
}}}return true
},hasJSONGotNewMessage:function(){if(this.hasEverBeenClosed()){return this.getLastClosedMessage()!==this.text
}else{if(this.hasBeenShownDuringSession()){return this.getLastShownMessage()!==this.text
}}return true
},hasEverBeenClosed:function(){return localStorage.getItem(this.CLOSED_KEY)!==null
},hasBeenShownDuringSession:function(){return sessionStorage.getItem(this.SHOWN_KEY)!==null
},getLastClosedMessage:function(){return localStorage.getItem(this.CLOSED_KEY)
},setLastClosedMessage:function(e){localStorage.setItem(this.CLOSED_KEY,e)
},clearLastClosedMessage:function(){localStorage.removeItem(this.CLOSED_KEY)
},getLastShownMessage:function(){return sessionStorage.getItem(this.SHOWN_KEY)
},setLastShownMessage:function(e){return sessionStorage.setItem(this.SHOWN_KEY,e)
},isActive:function(){var e=this.json.isActive;
return e
}});
c.registerComponent("page",d)
})(jQuery,Backbone,App);
(function(b,a,c){b.fn.splashVideo=function(){return this.each(function(){var d=this;
var f=b(window).width();
var e=/Android|webOS|iPhone|iPod|iPad|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
this.init=function(){this.splashHeight=0;
this.mobile_layout=e;
this.sticky_support=false;
if(e){b(this).addClass("mobile");
b(this).parent().addClass("sticky-support");
this.sticky_support=true
}else{if(b(this).find(".video-option").length==0){b(this).addClass("mobile");
this.mobile_layout=true
}}if(!e&&navigator.userAgent.toLowerCase().indexOf("windows")!=-1){b(this).addClass("windows")
}this.secondaryContent=false;
if(b("#secondary-content").length>0){this.secondaryContent=true
}this.has_footer=false;
if(b(this).closest(".splashTemplate").find(".splashpage-footer-bar").length>0){this.has_footer=true;
b(this).addClass("has_footer")
}this.footerSelector=b(this).closest(".splashTemplate").find(".splashpage-footer-bar");
this.buildMarkup();
this.updateButtons();
this.setAspectRatio();
this.setStickyFooter();
this.attachEvents()
};
this.reserveSpaceForZones=function(){var h=0;
var g=b(window).height()-50;
if(this.has_footer){g=g-72
}b(this).find(".wrapper > .zone").each(function(){h+=b(this).outerHeight(true)
});
if(h<g){if(!b(this).hasClass("default_sizing")){b(this).addClass("default_sizing")
}h=g
}else{b(this).removeClass("default_sizing")
}this.splashHeight=h;
b(this).css({"min-height":h+"px",height:h+"px"});
b(this).find(".container, .background-element").css({"min-height":h+"px",height:h+"px"});
this.splashHeight=b(this).height()
};
this.updateButtons=function(){b(this).find(".clickable span").addClass("text");
var g='<span class="featured__cta-href__icon icon-arrow"></span>';
b(this).find(".clickable").prepend(g)
};
this.sizeButtons=function(){b(this).find(".clickable").each(function(){var g=b(this).find(".text").outerHeight();
b(this).find(".featured__cta-href__icon").css({height:g})
})
};
this.setStickyFooter=function(){if(this.footerSelector.length>0){if(!c.CQmode.edit){var g=b(window).scrollTop()+b(window).height()-this.footerSelector.height();
if(this.sticky_support){g=b(window).scrollTop()+window.innerHeight-(this.footerSelector.height()+50);
var h=0;
if(g<=b(this).offset().top+this.splashHeight){h=g
}else{h=this.splashHeight+this.footerSelector.height()
}this.footerSelector.css({top:h})
}else{if(g<=b(this).offset().top+this.splashHeight){if(this.footerSelector.hasClass("fixed")==false){this.footerSelector.removeClass("static").addClass("fixed")
}}else{if(this.footerSelector.hasClass("static")==false){this.footerSelector.removeClass("fixed").addClass("static")
}}if(!this.secondaryContent){b(this).closest(".splashTemplate").addClass("no-secondary-content")
}}}else{this.footerSelector.removeClass("fixed").addClass("static")
}}};
this.buildMarkup=function(){var h="";
if(b(this).find(".video-option").length>0){var g=b(this).find(".video-option");
if(e){h+='<div class="image-option" data-width="4" data-height="3">';
h+='<img src="'+g.attr("data-fallback")+'" />';
h+="</div>";
g.after(h)
}else{h+="<video autoplay muted loop";
if(g.attr("data-poster-url")!=null&&g.attr("data-poster-url")!=""){}h+='><source src="'+g.attr("data-src")+'" type="'+g.attr("data-type")+'">';
h+='<img data-src="'+g.attr("data-fallback")+'" class="lazyload" />';
h+="</video>";
g.append(h)
}}};
this.attachEvents=function(){b(window).resize(function(){if(e){if(b(window).width()!=f){d.setAspectRatio();
f=b(window).width()
}if(d.has_footer){d.setStickyFooter()
}}else{d.setAspectRatio();
if(d.has_footer){d.setStickyFooter()
}}});
b(this).find("video").on("ended",function(){this.load();
this.play()
});
b(this).find(".image-option img").one("load",function(){b(this).parent().attr("data-width",this.naturalWidth);
b(this).parent().attr("data-height",this.naturalHeight);
d.setAspectRatio()
}).each(function(){if(this.complete){b(this).load()
}});
if(this.has_footer){b(window).scroll(function(g){d.setStickyFooter()
});
this.footerSelector.find(".subscribe button").attr("onClick","").click(function(){var g="splashpage:email sign up";
var h="email sign up";
d.trackButtonClick(g,h)
})
}b(this).find(".clickable").click(function(){var h="";
var j="";
if(b(this).parent().hasClass("primary_button")){h="splashpage:primary button"
}else{h="splashpage:secondary button"
}j=b(this).find("span").text();
d.trackButtonClick(h,j);
if(b(this).hasClass("in-page")){var g=b("#secondary-content").offset().top;
g=g-50;
if(d.footerSelector.hasClass("fixed")){g+=72
}if(b("#secondary-content").children(":first").find(".heading").length>0){g-=parseInt(b("#secondary-content").children(":first").find(".heading").css("margin-top"))
}b("html, body").animate({scrollTop:g});
return false
}}).addClass("trackingReady");
b(this).find(".social_buttons a").attr("onClick","").click(function(){var g="splashpage:socialfollow:";
var h=b(this).find("span").text();
g+=h;
h+="-icon";
d.trackButtonClick(g,h)
}).addClass("trackingReady")
};
this.trackButtonClick=function(g,h){s.linkTrackVars="events,prop57,eVar57,prop58,eVar58,prop59,eVar59";
s.linkTrackEvents="event4";
s.prop57=g;
s.eVar57=g;
s.prop58=s.pageName;
s.eVar58=s.pageName;
s.prop59=h;
s.eVar59=h;
s.events="event4";
s.tl(this,"o",h)
};
this.setAspectRatio=function(){this.reserveSpaceForZones();
var g,j,k;
if(!this.mobile_layout){k=b(this).find(".video-option")
}else{k=b(this).find(".image-option")
}g=parseInt(k.attr("data-width"));
j=parseInt(k.attr("data-height"));
if((g/j)>(b(this).width()/b(this).height())){b(this).removeClass("wide").addClass("narrow")
}else{b(this).removeClass("narrow").addClass("wide")
}d.sizeButtons()
};
this.init()
})
};
b(document).ready(function(){b(".splashVideo").splashVideo();
b(".splashTemplate .splashpage-footer-bar .footer-bar").css({visibility:"visible"})
})
})(jQuery,Backbone,App);
(function(c,b,d){var a=d.Devices;
var e=b.View.extend({PAUSE_TIME:8000,REFRESH_ADS:5000,EXIT_TIMEOUT:0,SLIDE_SPEED:300,CAPTION_CLASS:"caption-opened",OMNITURE:{THUMB_OVERLAY:"event30",CLOSE:"event34",PAUSE:"event32",PLAY:"event33",NEXT:"event4",FINAL:"event10"},isTouch:false,startSlide:0,$aside:null,$slider:null,$sliderWrapper:null,$infoSlider:null,$infoSliderWrapper:null,$readMore:null,$listItem:null,$currentSlide:null,$playPause:null,$gallery:null,$nextButton:null,$previousButton:null,$header:null,$progress:null,$progressRunner:null,$image:null,$info:null,$infoListItem:null,$infoListItemWrapper:null,$infoAds:null,$body:null,$html:null,$socialModule:null,$heroContent:null,$galleryThumbnails:null,$galleryTitle:null,$slides:this.$(".slides"),$galleryAreaDesktop:this.$(".gallery-viewer"),$galleryTitleArea:this.$(".gallery-meta-area .title"),$galleryDescriptionArea:this.$(".gallery-meta-area .description"),$thumbsPopup:this.$(".gallery-thumbnail-viewer"),$thumbs:this.$(".gallery-thumbnail-viewer .thumbs"),$thumbnailViewerButton:this.$(".additional-controls .thumbnail-viewer-button"),$thumbnailViewerOverlay:this.$(".gallery-thumbnail-viewer .overlay"),$nextGalleryArea:this.$(".next-gallery"),$sponsoredArea:this.$(".rail-viewer .sponsored-area"),$adPlaceholder:this.$(".ad-placeholder"),$rail:this.$(".rail-viewer"),$picContainer:this.$(".pic-container"),galleryPlayClassName:"gallery-play",jsonFeed:"",jsonFeedNext:"",currentFeed:null,mobileFeed:[],mobileIndex:0,currentGalleryIndex:0,advanceGalleryQueue:false,landscape_width_max:626,isDesktop:a.isUserAgent("desktop"),isVertical:false,isWorking:false,isFullScreen:false,sliderStopped:false,sliderCaptionStopped:false,buttonClicked:false,nextGalleryRequestLock:false,slideStartTime:0,slideRemainingTime:0,originalCaptionHeight:0,scrollbarWidth:0,navigationMap:{},isRightDirection:true,isImageLoadTriggered:false,thresholds:{},fullGalleryMarkup:c(".imageGalleryRedux").html(),startingTile:2,autoplayDuration:8000,autoplayInterval:null,index:0,count:-1,hasHash:"",isAutoPlay:true,pauseAutoPlay:false,manualPause:false,controlsPresent:false,firstTime:true,travelMethods:["Manual","Auto","Thumbnail"],travelType:0,galleryItemslength:0,events:{"click .thmb-slide-img":"thumbImageClicked","click .autoplay-toggler":"pausePlayHandler","click .additional-controls .thumbnail-viewer-button":"openOverlay","click .gallery-thumbnail-viewer .overlay":"directOverlayClose","click .gallery-thumbnail-viewer .close-thumbs":"directOverlayClose","click .slide-control.next.slick-disabled":"goToNextGallery","click .next-gallery_item a":"nextGalleryClickHandler"},initialize:function(){if(!this.isDesktop){this.isVertical=true;
this.verticalPageEdits()
}else{c(".gallery-meta-area.mobile").remove()
}c(".redux-toggle-on").addClass("show");
c(".image-gallery-redux-page .sponsorship-module").addClass("hide");
if(!d.CQmode.edit){c(".redux-toggle-off").addClass("hide")
}else{c(".redux-toggle-off").addClass("show")
}var f=this;
this.throttleAds=false;
this.throttleTimer=null;
this.initAdTestTimer=null;
this.getCurrentHash();
this.prepControls();
this.jsonFeed=this.$el.data("feed-url");
this.populateGallery(this.jsonFeed);
c(window).on("hashchange",_.bind(this.onHashChange,this));
this.populateOutbrainArea();
var f=this;
window.addEventListener("orientationchange",function(){f.onRotation()
},false)
},populateOutbrainArea:function(){if(!d.CQmode.edit){var h="AR_10";
if(this.isVertical){h="MB_10";
if(window.screen.width>=750){h="AR_12"
}}function l(){var q={};
var p=function(u){return decodeURIComponent(u.replace(/\+/g," "))
};
var r=location.search.substring(1);
var m=r.split("&");
for(var o in m){var n=m[o].split("=");
if(n.length>1){q[p(n[0])]=p(n[1])
}}return q
}var g=l();
var k=g.outbrain_widget;
if(k!=null){h=k
}var j="";
if(this.isVertical){var f=null;
if(this.mobileFeed.length==0){j+='<div class="OUTBRAIN" data-src="'+location.pathname+'" data-widget-id="'+h+'" data-ob-template="BET_1"></div><script type="text/javascript" async="async" src="//widgets.outbrain.com/outbrain.js"><\/script>';
f=this.$sponsoredArea;
f.html(j)
}else{j+='<div class="OUTBRAIN" data-src="'+this.mobileFeed[this.mobileFeed.length-1].canonicalURL+'" data-widget-id="'+h+'" data-ob-template="BET_1"></div>';
f=c('.imageGalleryRedux .gallery-viewer[galleryindex="'+(this.mobileFeed.length-1)+'"] .rail-viewer .sponsored-area');
f.html(j);
if("OBR" in window){OBR.extern.researchWidget()
}}}else{this.$sponsoredArea.empty();
j+='<div class="OUTBRAIN" data-src="'+location.pathname+'" data-widget-id="'+h+'" data-ob-template="BET_1"></div><script type="text/javascript" async="async" src="//widgets.outbrain.com/outbrain.js"><\/script>';
this.$sponsoredArea.html(j)
}}},populateAdPlaceholder:function(){var f=this;
var k=this.startingTile;
if(!this.isVertical){this.adThrottler();
d.DynamicAdDelegator.driveSpecific(".imageGalleryRedux .ad-placeholder",[300,250],k,k,k)
}else{var j=0;
var g=c('.gallery-viewer[galleryindex="'+this.currentGalleryIndex+'"] .full-slide');
var h="";
if(c('.gallery-viewer[galleryindex="'+this.currentGalleryIndex+'"] .mobile-ad-placeholder').length==0){if(g.length<5){g.last().after('<div class="mobile-ad-placeholder ad-placeholder"></div>');
d.DynamicAdDelegator.refillableAdBucket('.gallery-viewer[galleryindex="'+this.currentGalleryIndex+'"] .mobile-ad-placeholder',[300,250],k,k,k)
}g=g.filter(function(l){return l%5===4
});
while(j<g.length){h='<div class="mobile-ad-placeholder ad-placeholder" tile="'+k+'"></div>';
c(g[j]).after(h);
d.DynamicAdDelegator.refillableAdBucket('.gallery-viewer[galleryindex="'+this.currentGalleryIndex+'"] .mobile-ad-placeholder[tile="'+k+'"]',[300,250],k,k,k);
k++;
j++
}}}},updateActiveState:function(h,g){if(h==0&&this.isVertical){this.index=-1
}else{this.index=h
}var k=c(".gallery-thumbnail-viewer .thmb-slide-img"),j=k.eq(h),f=this.$(".full-slide"),m=f.eq(h),l=m.find(".image-wrapper img").data("hash");
k.removeClass("active");
j.addClass("active");
f.removeClass("active");
m.addClass("active");
if(g){this.setCurrentHash(l)
}},getHashActiveState:function(){var f=c(".full-slide").find("img"),g=this;
g.index=0;
f.each(function(){var h=c(this);
if(h.data("hash")===g.hasHash){var j=h.closest(".full-slide").attr("index");
g.index=j
}});
g.updateActiveState(g.index,true)
},thumbImageClicked:function(h){var g=c(h.target),f=g.attr("index");
this.travelType=2;
this.$slides.slick("slickGoTo",f,false);
this.updateActiveState(f,true);
this.closeOverlay();
this.scrollToTopOfGallery()
},scrollToTopOfGallery:function(){var f=c(".imageGalleryRedux .gallery-viewer").offset().top;
f=f-60;
c("html, body").animate({scrollTop:f+"px"})
},metaAreaHeightAdjuster:function(f){if(!c(f).hasClass("loaded")){c(f).addClass("loaded")
}if(c(f).hasClass("gallery-meta-area")){App.getComponent(c(".social-share")).onResize()
}},triggerListAnimation:function(){},showThumbPopup:function(){var f=this.$thumbsPopup;
f.removeClass("off-stage")
},startAutoplayGallery:function(){if(!this.isVertical){var f=this;
this.isAutoPlay=true;
this.updateAutoplayControls();
this.resetAutoplayTimer()
}},resetAutoplayTimer:function(){var f=this;
if(this.autoplayInterval!=null){clearInterval(this.autoplayInterval)
}this.autoplayInterval=setInterval(function(){f.goToNextImage(false);
f.updateAutoplayControls()
},f.autoplayDuration)
},stopAutoplayGallery:function(){this.isAutoPlay=false;
this.updateAutoplayControls();
if(this.autoplayInterval){clearInterval(this.autoplayInterval)
}},openOverlay:function(){this.sendEvent(this.OMNITURE.THUMB_OVERLAY);
if(this.isAutoPlay){this.toggleAutoPlayGallery();
this.pauseAutoPlay=true
}this.toggleThumbnailOverlay()
},directOverlayClose:function(){this.sendEvent(this.OMNITURE.CLOSE);
this.closeOverlay()
},closeOverlay:function(){this.toggleThumbnailOverlay();
if(this.pauseAutoPlay){this.toggleAutoPlayGallery();
this.pauseAutoPlay=false
}},pausePlayHandler:function(){if(!this.isAutoPlay){this.sendEvent(this.OMNITURE.PLAY)
}else{this.sendEvent(this.OMNITURE.PAUSE)
}this.toggleAutoPlayGallery()
},toggleAutoPlayGallery:function(){if(!this.isAutoPlay){this.startAutoplayGallery()
}else{this.stopAutoplayGallery()
}},toggleThumbnailOverlay:function(){this.$thumbsPopup.toggleClass("off-stage")
},nextGalleryClickHandler:function(f){this.sendNextEvent(this.OMNITURE.NEXT,f.target.href)
},goToNextImage:function(f){if(f){this.$slides.slick("slickNext")
}else{if(this.isAutoPlay){this.travelType=1;
if(this.ifLastItem()){this.loadNewGallery()
}else{this.$slides.slick("slickNext")
}}}},goToPrevImage:function(g){var f=c(".thmb-slide-img");
if(this.index>0){this.index--;
this.updateActiveState(this.index,true)
}},loadNextGallery:function(){window.history.pushState(null,null,this.nextGalleryUrl);
this.hasHash="";
this.index=0;
this.firstTime=false;
this.populateGallery(this.jsonFeedNext)
},changePageInfo:function(f){window.history.pushState(null,null,this.mobileFeed[f].canonicalURL);
this.updatePageTitle(this.mobileFeed[f].browserTitle);
this.updateOmniture(this.mobileFeed[f].omniture)
},queueAdvanceToNextGallery:function(){this.advanceGalleryQueue=true
},advanceToNextGallery:function(){if(this.currentGalleryIndex+1<this.mobileFeed.length){this.currentGalleryIndex++;
this.index=0;
this.revealNextGallery('.next-impending-gallery[galleryindex="'+this.currentGalleryIndex+'"]');
this.changePageInfo(this.currentGalleryIndex);
this.hasHash="";
this.index=-1;
this.firstTime=false;
this.metaAreaHeightAdjuster('.next-impending-gallery[galleryindex="'+this.currentGalleryIndex+'"] .gallery-meta-area.mobile');
this.metaAreaHeightAdjuster('.gallery-viewer[galleryindex="'+this.currentGalleryIndex+'"]');
if(this.currentGalleryIndex==this.mobileFeed.length-1){this.populateAdPlaceholder();
this.populateOutbrainArea();
this.queueNextGallery()
}this.advanceGalleryQueue=false
}else{this.queueAdvanceToNextGallery()
}},revealNextGallery:function(f){var g="revealed";
if(!c(f).hasClass(g)){c(f).addClass(g).removeClass("ready")
}},returnToPrevGallery:function(){this.currentGalleryIndex--;
this.index=this.mobileFeed[this.currentGalleryIndex].images.length-1;
this.changePageInfo(this.currentGalleryIndex);
this.hasHash="";
this.index=this.mobileFeed[this.currentGalleryIndex].images.length;
this.firstTime=false
},prepControls:function(){if(!this.isVertical){this.$(".additional-controls").css({visibility:"visible"})
}if(d.CQmode.edit){this.isAutoPlay=false
}this.updateAutoplayControls()
},updateAutoplayControls:function(){if(this.isAutoPlay){this.$(".additional-controls .autoplay-toggler").removeClass("play");
this.$(".additional-controls .autoplay-toggler").addClass("pause")
}else{this.$(".additional-controls .autoplay-toggler").removeClass("pause");
this.$(".additional-controls .autoplay-toggler").addClass("play")
}},populateGallery:function(g){var f=this;
c.ajax({dataType:"json",mimeType:"application/json;charset=utf-8",url:g,success:function(h){if(f.isVertical){f.mobileFeed.push(h);
c(".gallery-viewer:eq("+f.mobileIndex+")").attr("galleryindex",f.mobileIndex).addClass("threshold");
f.buildGallery(f.mobileFeed[f.mobileIndex],f.mobileIndex);
f.mobileIndex++;
f.populateAdPlaceholder()
}else{f.currentFeed=h;
f.buildGallery(f.currentFeed,f.mobileIndex);
if(!f.firstTime){f.updateOmniture(h.omniture);
f.updateAdParams(h.advertTargeting);
f.updatePageTitle(h.browserTitle);
f.sendPageEvent()
}else{f.populateAdPlaceholder()
}}f.nextGalleryUrl=h.nextGallery.url;
f.jsonFeedNext=h.nextGallery.feedURL;
f.galleryItemslength=h.images.length
}})
},buildGallery:function(q,l){var o=this;
var u="";
if(q.description!=null){u=q.description
}if(l==0){this.$galleryTitleArea.html("<h1>"+q.title+"</h1>");
this.$galleryDescriptionArea.html('<div class="gallery-description-inner">'+u+"</div>")
}else{this.$el.find('.next-impending-gallery[galleryindex="'+l+'"]').removeClass("hidden").find(".gallery-meta-area.mobile .description").html('<div class="gallery-description-inner">'+u+"</div>")
}if(this.isVertical){if(l==0){this.insertPageSponsorship(this.$el.find(".gallery-meta-area.mobile:first"),q.pageSponsorship)
}this.metaAreaHeightAdjuster(".gallery-meta-area.mobile");
c.publish("resize")
}var j=0;
var f="";
var n="";
var h="";
var r,m,g="";
var k="";
var v=false;
if(q.sponsorship!=null){v=q.sponsorship
}this.count=q.images.length;
while(j<q.images.length){h=q.images[j].hash;
g=h;
h="!"+h;
if(q.images[j].share!=null){r=q.images[j].share.title;
m=q.images[j].share.img;
g=q.images[j].share.url
}this.removeNulls(q.images[j]);
f+=this.slideBuild(q.images[j].title,q.images[j].description,q.images[j].url,q.images[j].height,q.images[j].width,q.images[j].alt,j,q.images.length,h,r,m,g,v);
n+=this.thumbnailBuild(this.amendThumbnail(q.images[j].url),j);
j++
}if(!this.isVertical){var p="";
if(q.nextGallery.image2x1URL!=null){p=q.nextGallery.image2x1URL
}k+=this.nextGalleryBuild(q.nextGallery.title,q.nextGallery.url,q.nextGallery.image2x1URL,q.nextGallery.image2x1URL);
this.$nextGalleryArea.html(k);
this.$thumbs.html('<span class="close-thumbs icon-close"></span><div class="inner">'+n+"</div>");
this.$slides.html(f)
}else{this.$el.find('.gallery-viewer[galleryindex="'+l+'"] .slides').html(f);
this.$el.append('<div class="next-impending-gallery threshold hidden" galleryindex="'+(l+1)+'"></div>');
k=this.$el.find('.next-impending-gallery[galleryindex="'+(l+1)+'"]');
k.append(this.fullGalleryMarkup);
this.insertPageSponsorship(k,q.nextGallery.pageSponsorship);
k.find(".gallery-meta-area.mobile").append(this.addSpinner);
k.find(".gallery-meta-area .title").html("<h1>"+q.nextGallery.title+"</h1>");
this.updateGalleryShare('.next-impending-gallery[galleryindex="'+(l+1)+'"] .social-share',(location.origin+q.nextGallery.url),(location.origin+q.nextGallery.image2x1URL),q.nextGallery.title);
this.$el.find('.next-impending-gallery[galleryindex="'+l+'"]').addClass("ready")
}if(this.hasHash.length<1){this.updateActiveState(0,false)
}else{this.getHashActiveState()
}this.$socialModule=this.$slides.find(".social-share");
this.updateShare();
if(l==this.currentGalleryIndex){this.initCarousel(this.index)
}},insertPageSponsorship:function(l,h){if(h!=""&&h!=null){var k="";
var g=true;
var j=new Date();
if(h!=false){k='<div class="sponsor-badge sponsorship-module"><div class="promo-text"><span class="sponsorship-module__txt">'+h.headlineText+'</span></div><div class="sponsor-badge-logo"><img class="sponsorship-module__img__src" src="'+h.logoURL+'" /></div></div>';
if(h.startDate!=null){var m=new Date(h.startDate);
if(j<m){g=false
}}if((h.endDate!=null)&&g){var f=new Date(h.endDate);
if(j>f){g=false
}}}if(g){l.addClass("sponsored");
l.prepend(k)
}}},removeNulls:function(f){if(f.title==null){f.title=""
}if(f.description==null){f.description=""
}},positionRail:function(){var j=0;
var f=c(".imageGalleryRedux .pic-container-wrapper").position().top;
var h=c(".imageGalleryRedux .pic-container").height();
var g=c(".imageGalleryRedux .rail-viewer");
if(g.height()<(h+f)){j=h+f-g.height()
}g.css({top:j+"px"})
},thumbnailBuild:function(h,f){var g=_.template('<div class="thmb-slide"><img data-src="'+h+'" class="thmb-slide-img lazyload" index="'+f+'"></div>');
return g()
},addSpinner:function(){var f=_.template('<div class="spinner"><div class="spinner__item1"></div><div class="spinner__item2"></div><div class="spinner__item3"></div><div class="spinner__item4"></div></div>');
return f()
},goToNextGallery:function(){if(this.ifLastItem()){this.loadNewGallery()
}},loadNewGallery:function(){var f=false;
try{f=CQ.WCM.isPreviewMode()
}catch(g){}if(!d.CQmode.edit&&!f){this.destroyCarousel();
this.cleanGallery();
this.loadNextGallery()
}},ifLastItem:function(){if(this.galleryItemslength-1==this.index){return true
}else{return false
}},destroyCarousel:function(){this.$slides.slick("unslick")
},cleanGallery:function(){this.$slides.empty();
this.$thumbs.empty();
this.$nextGalleryArea.empty()
},verticalPageEdits:function(){c(".redux-toggle-on").addClass("vertical");
c(".feedcontainer").remove();
if(!d.CQmode.edit){c(".background-graphic__mask.background-graphic__static, .redux-toggle-off").remove()
}},nextGalleryBuild:function(l,m,g,h){if(h==null){h=""
}var j=h.replace("image.custom0x0.dimg","image.custom376x188.dimg"),f=h.replace("image.custom0x0.dimg","image.custom136x68.dimg");
var k=_.template('<div id="next-gallery_wrapper"><h3>NEXT GALLERY</h3><div class="next-gallery_item"><div class="next-gallery_img"><a href="'+m+'" title="'+l+'" class="icon-gallery">'+this.nextGalleryThumbBuild(h,j,f,l)+'</a></div><div class="next-gallery_text"><h4><a href="'+m+'" title="'+l+'">'+l+"</a></h4></div></div></div>");
return k()
},nextGalleryThumbBuild:function(g,h,f,k){var j="";
if(g!=""){j+='<picture><source data-srcset="'+h+'" media="(min-width:1700px)"><source data-srcset="'+f+'" media="(min-width:700px)"><img class="lazyload" data-src="'+h+'" alt="'+k+'" /></picture>'
}return j
},initCarousel:function(g){var f=this;
if(!this.isVertical){this.$slides.slick({respondTo:"window",prevArrow:'<button type="button" class="slide-control prev icon-previous"></button>',nextArrow:'<button type="button" class="slide-control next icon-next"></button>',infinite:false,fade:true,adaptiveHeight:true,responsive:[{breakpoint:2030,settings:{slidesToShow:1,infinite:false,slidesToScroll:1}},{breakpoint:1699,settings:{slidesToShow:1,infinite:false,slidesToScroll:1}},{breakpoint:1229,settings:{slidesToShow:1,infinite:false,slidesToScroll:1}},{breakpoint:996,settings:{slidesToShow:1,infinite:false,slidesToScroll:1}}]});
if(g!=0){this.$slides.slick("slickGoTo",g,true)
}if(this.firstTime){this.$slides.on("swipe",function(j,h,k){f.goToNextGallery()
});
this.$slides.on("afterChange",function(j,h,k){f.updateActiveState(k,true);
f.resetAutoplayTimer();
f.refreshAds();
f.sendPageEvent();
f.travelType=0
})
}this.$slides.find('.full-slide[index="'+g+'"] img').load(function(){if(f.isAutoPlay){f.startAutoplayGallery()
}})
}else{this.index=g;
this.metaAreaHeightAdjuster('.gallery-viewer[galleryindex="'+this.mobileIndex+'"]');
if(this.firstTime){this.initScrollPatrol()
}this.queueNextGallery()
}},queueNextGallery:function(){var g=this.mobileFeed[this.mobileFeed.length-1].nextGallery.feedURL;
var f=this;
c.ajax({dataType:"json",mimeType:"application/json;charset=utf-8",url:g,success:function(h){if(f.isVertical){f.firstTime=false;
f.mobileFeed.push(h);
c(".gallery-viewer:eq("+f.mobileIndex+")").attr("galleryindex",f.mobileIndex);
f.buildGallery(f.mobileFeed[f.mobileIndex],f.mobileIndex);
f.mobileIndex++;
if(f.advanceGalleryQueue){f.revealNextGallery('.next-impending-gallery[galleryindex="'+(self.mobileFeed.length-1)+'"]');
f.advanceGalleryQueue=false
}}}})
},initScrollPatrol:function(){var f=this;
this.index=-1;
function g(){f.thresholds=[];
c(".imageGalleryRedux .threshold").each(function(){if((f.thresholds.length==0||c(this).offset().top>f.thresholds[f.thresholds.length-1].scrollPos)){var j={};
j.scrollPos=c(this).offset().top;
if(c(this).hasClass("full-slide")){j.index=parseInt(c(this).attr("index"));
j.galleryindex=c(this).closest(".gallery-viewer").attr("galleryindex")
}else{j.index=-1;
j.galleryindex=c(this).attr("galleryindex")
}f.thresholds.push(j)
}})
}function h(m){g();
var k=c(window).scrollTop();
var j=screen.height*0.6;
var l=f.thresholds.length-1;
f.thresholds;
var n=-1;
while(l>=0&&n<0){if(f.thresholds[l].scrollPos<=(k+j)){n=l
}l--
}if(n==-1){}else{if(parseInt(f.currentGalleryIndex)!=parseInt(f.thresholds[n].galleryindex)){if(f.currentGalleryIndex+1==parseInt(f.thresholds[n].galleryindex)){f.advanceToNextGallery()
}else{if(f.currentGalleryIndex-1==parseInt(f.thresholds[n].galleryindex)){f.returnToPrevGallery()
}}}else{if((parseInt(f.thresholds[n].index)!=parseInt(f.index))&&(f.thresholds[n].index!=-1)){f.index=parseInt(f.thresholds[n].index);
f.sendPageEvent()
}}}}g();
c.subscribe("resize",_.bind(function(){g()
}));
c.subscribe("scroll",_.bind(h,this))
},addNextGalleryThreshold:function(){},onHashChange:function(){this.getCurrentHash();
this.getHashActiveState();
if(!this.isVertical){this.$slides.slick("slickGoTo",this.index,false)
}},onRotation:function(){if(this.isVertical){if(screen.width>=750){this.$el.find(".image-wrapper").attr("style","")
}}},slideBuild:function(E,u,g,n,o,B,l,j,D,k,v,C,h){var m="";
var w={hires_desktop:"",lowres_desktop:"",handheld:""};
w=this.amendImages(g,w);
if(this.isVertical){w=this.amendImagesNatural(g,w,o,n)
}var f="wide";
var r=100;
var y=screen.width;
var q=screen.height;
var x="";
if(screen.width>screen.height){q=screen.width;
y=screen.height;
if(screen.width>=750){q=screen.height;
y=this.landscape_width_max
}}if(this.isVertical){x=" style=";
if(o/n<=(y*0.6666)/(q-r)){f="wide";
x+='"width:100%;height:'+(n*(y)/o)+'px;"'
}else{if(o/n<y/(q-r)){f="narrow";
x+='"width:'+(o*(q-r)/n)+"px;height:"+(q-r)+'px;"'
}else{if(o/n>=y/(q-r)){f="wide";
x+='"width:100%;height:'+(n*(y)/o)+'px;"'
}}}}else{if(o/n<16/9){f="narrow"
}}var p="";
if(B!=null&&B!=undefined){p=B
}else{if(E!=null){p=k
}}var z=this.splitOutPhotoCred(u);
var A=_.template('<div class="full-slide threshold" index="'+l+'"><div class="slide-header"><div class="slide-header-inner"><div class="slide-progress"><span class="count">'+(l+1)+'</span><span class="full-count">/'+j+'</span></div><div class="slide-title"><span>'+E+'</span></div></div></div><div class="slide-count"><span>'+(l+1)+" of "+j+'</span></div><div class="pic-container-wrapper"><div class="pic-container"><div class="frame '+f+'" data-orig-height="'+n+'" data-orig-width="'+o+'"><div class="image-wrapper"'+x+'><picture><source data-srcset="'+w.hires_desktop+'" data-hash="'+D+'" media="(min-width:1230px)"><source data-srcset="'+w.lowres_desktop+'" data-hash="'+D+'" media="(min-width:996px)"><source data-srcset="'+w.handheld+'" data-hash="'+D+'" media="(min-width:700px)"><img class="lazyload" data-src="'+w.hires_desktop+'" data-hash="'+D+'" alt="'+p+'"/></picture></div></div></div><div class="gallery-detail__social"><div class="social-share clearfix" data-share-url="'+C+'" data-share-title="'+k+'" data-share-image="'+v+'"><ul class="social-share__list"><li data-share="facebook" class="icon-facebook social-share__item"><a class="social-share__item__link"></a></li><li data-share="twitter" class="icon-twitter social-share__item"><a class="social-share__item__link"></a></li><li data-share="pinterest" class="icon-pinterest social-share__item"><a class="social-share__item__link"></a></li><li class="icon-more social-share__item social-share__more"><ul class="social-share__more__list"></ul></li></ul></div></div>'+this.buildSponsorBadge(h)+'</div><div class="slide-photoCred"><div class="inner">'+z[0]+'</div></div><div class="slide-description"><div class="inner">'+z[1]+"</div></div></div>");
return A()
},buildSponsorBadge:function(h){var k="";
var g=true;
var j=new Date();
if(h!=false){k='<div class="sponsor-badge"><div class="promo-text"><span>'+h.headlineText+'</span></div><div class="sponsor-badge-logo"><img src="'+h.logoURL+'" /></div></div>';
if(h.startDate!=null){var l=new Date(h.startDate);
if(j<l){g=false
}}if((h.endDate!=null)&&g){var f=new Date(h.endDate);
if(j>f){g=false
}}}if(!g){k=""
}return k
},amendThumbnail:function(f){var g=/.custom0x0./i;
f=f.replace(g,".gallerygrid.");
return f
},amendImages:function(f,g){var h=/.custom0x0./i;
g.hires_desktop=f.replace(h,".custom1540fx865fx0xcrop.");
g.lowres_desktop=f.replace(h,".custom662fx372fx0xcrop.");
g.handheld=f.replace(h,".custom700x0.");
return g
},amendImagesNatural:function(j,m,l,f){var n=/.custom0x0./i;
var g=this.$el.find(".gallery-viewer").width();
if(screen.width>=750&&screen.width>screen.height){g=this.landscape_width_max
}g=Math.ceil(g/100)*100;
var k=g*2;
var h=g*1.5;
m.hires_desktop=j.replace(n,".custom"+h+"x0.");
m.lowres_desktop=j.replace(n,".custom"+h+"x0.");
m.handheld=j.replace(n,".custom"+g+"x0.");
return m
},splitOutPhotoCred:function(h){var f=[];
var j=[/[(]\s*photo.*[)]/i];
var g=-1;
var k=0;
while(k<j.length&&g==-1){g=h.search(j[k]);
if(g!=-1){f[0]=h.match(j[k])[0];
f[1]=h.replace(j[k],"")
}k++
}if(g==-1){f[0]="";
f[1]=h
}f[1]=this.removeEmptyMarkup(f[1]);
return f
},removeEmptyMarkup:function(f){var h=[/(<p><i>)(&nbsp;)*\s*(<\/i><\/p>)/i,/(<i>(&nbsp;)*\s*<\/i>)/i,/(<p>(&nbsp;)*\s*<\/p>)/i];
var j=0;
var g=-1;
while(j<h.length){f=f.replace(h[j],"");
j++
}return f
},addFinalSwipeHandling:function(){var f=this;
c.subscribe("gallery:extraswipe",function(){var g=f.$('.gallery-detail__info__list-item[aria-hidden="false"] .gallery-detail__counter').html().split("/");
if(parseInt(g[0])==parseInt(g[1])){f.$(".gallery-detail__next").trigger("click")
}})
},initAdRequests:function(){var f=this;
this.initAdTestTimer=setTimeout(function(){if(f.$(".ad-placeholder").find(".ads > div").children().length==1){clearTimeout(f.throttleTimer);
f.throttleAds=false
}},500)
},initRoute:function(){},getCurrentHash:function(){var f=window.location.hash.replace("#","");
if(f.length>0){this.hasHash=f
}},setCurrentHash:function(f){window.location.hash=f
},onResize:function(){},updateGalleryShare:function(f,h,g,j){c(f).attr("data-share-url",h).attr("data-share-img",g).attr("data-share-title",j)
},buildNextGalleryArea:function(){},adThrottler:function(){var f=this;
if(!this.throttleAds){this.throttleAds=true;
this.throttleTimer=setTimeout(function(){f.throttleAds=false
},this.REFRESH_ADS)
}},infoConfiguration:function(){return{pager:false,controls:false,auto:false,infiniteLoop:false,adaptiveHeight:true,touchEnabled:false,responsive:false,startSlide:this.startSlide,onSlideBefore:_.bind(this.onInfoSlideBefore,this),onSlideAfter:_.bind(this.onInfoSlideAfter,this)}
},initSlider:function(){},initReadMore:function(){var j=this.$aside.height();
var h=this.$header.height();
var g=350;
this.$infoListItemWrapper.css("max-height",j-h-g);
var f=this;
this.$readMore.off("click");
this.$readMore.on("click",_.bind(this.onReadMoreClick,this));
setTimeout(function(){f.initDots(f.$infoListItemWrapper)
},0)
},reloadDots:function(){this.destroyDots(this.$infoListItemWrapper);
this.$infoListItemWrapper.css("max-height","");
this.$infoListItemWrapper.removeClass("is-truncated");
if(d.Devices.is("desktop")){this.initReadMore()
}},destroyDots:function(f){f.trigger("destroy")
},initDots:function(g){var f=this;
g.dotdotdot({watch:"window",callback:function(h,k){var j=c(this).siblings(".gallery-detail__read-more");
if(h){j.show()
}else{j.hide()
}f.$info.addClass("gallery-detail__info--visible-desc")
}});
this.$infoAds.fadeIn()
},galleryTitleDots:function(g){var f=this;
g.dotdotdot({watch:"window",ellipsis:"...",wrap:"word",height:60,fallbackToLetter:true,callback:function(h,k){var j=c(this).siblings(".gallery-detail__read-more");
if(h){j.show()
}else{j.hide()
}f.$info.addClass("gallery-detail__info--visible-desc")
}});
this.$infoAds.fadeIn()
},refreshAds:function(){if(!this.throttleAds){var g=[];
c(".imageGalleryRedux .ad-placeholder").find(".ads").each(function(){g.push(c(this).children("div").attr("id"))
});
c(".header__ads .ads--header").each(function(){g.push(c(this).children("div").attr("id"))
});
var f=0;
while(f<g.length){c("body").lazyAdDistributer().each(function(){this.loadAdById(g[f])
});
f++
}this.adThrottler()
}else{}},createNavigationMap:function(){var f=this;
f.navigationMap={};
this.$listItem.each(function(g){var h=c(this);
f.navigationMap[h.attr("data-image-id")]=g
})
},onReadMoreClick:function(f){f.preventDefault();
var g=c(f.currentTarget);
this.destroyDots(g.siblings(".gallery-detail__info__list-item__wrapper"));
g.hide();
this.$infoAds.hide()
},onSliderLoad:function(f){this.$gallery.animate({opacity:1},400);
if(!this.$el.hasClass("manually-paused")){this.startProgress()
}else{this.stopProgress()
}},onSlideBefore:function(k,j,g){this.isWorking=true;
if(!this.sliderStopped){this.resetProgress();
this.startProgress()
}if(this.$el.hasClass(this.CAPTION_CLASS)){this.$info.trigger("click")
}if(this.isFullScreen){var f=this.$listItem.eq(j);
var h=f.find(".gallery-detail__image");
h.trigger("click")
}this.refreshAds()
},onSlideEnd:function(g,f){if(f){this.$slider.triggerHandler("slider:next")
}else{this.$slider.triggerHandler("slider:previous")
}},onInfoSlideBefore:function(l,k,g){if(d.Devices.is("desktop")){var f=this.$infoListItem.eq(k);
var j=f.find(".gallery-detail__info__list-item__wrapper");
var h=f.find(".gallery-detail__read-more");
if(j.hasClass("is-truncated")&&!h.is(":visible")){j.removeClass("is-truncated");
this.initDots(j)
}}},onInfoSlideAfter:function(h,g,f){},onSlideAfter:function(k,j,f){this.sendPageEvent(!this.buttonClicked);
var g=this.$slider.getCurrentSlideElement();
var h=g.data("image-id");
window.location.hash="!"+h;
this.startSlide=this.navigationMap[h];
this.loadAsyncImages();
this.isImageLoadTriggered=true;
this.updateControls();
this.$infoSlider.goToSlide(f);
this.isWorking=false;
this.updateShare();
this.buttonClicked=false
},onPreviousClick:function(g){if(!!g){g.preventDefault();
if(g.type==="click"){this.buttonClicked=true
}}if(!this.isWorking){var f=this.getSlideImageId("previous");
if(f!==null){window.location.hash="!"+f
}else{if(this.previousGalleryLink){this.isRightDirection=false;
this.loadContentForNextGalleryPage(this.previousGalleryLink)
}}}},onNextClick:function(g){if(!!g){g.preventDefault();
if(g.type==="click"){this.buttonClicked=true
}}if(!this.isWorking){var f=this.getSlideImageId("next");
if(f!==null){window.location.hash="!"+f
}else{if(this.nextGalleryLink){this.isRightDirection=true;
this.loadContentForNextGalleryPage(this.nextGalleryLink)
}}}},loadContentForNextGalleryPage:function(g){var f=this;
if(!this.nextGalleryRequestLock){this.$closeButton.addClass("init-loader");
this.nextGalleryRequestLock=true;
this.nextGalleryAjaxLoader=c.ajax({method:"GET",url:g,dataType:"html"}).done(c.proxy(f.bindGalleryPageContent,f))
}},bindGalleryPageContent:function(m){var j=m.indexOf("<title>")+7;
var h=m.indexOf("</title>");
var n=m.substring(j,h);
this.$heroContent=c(m).find(".hero");
this.$galleryThumbnails=c(m).find(".page__body");
var g=c(m).find(".gallery-list");
var l="?testmode="+c("#testmodeParam").val();
var k=g.attr("data-gallery-url")+l;
var f=this;
document.title=n;
c.ajax({method:"GET",url:k,dataType:"html"}).done(c.proxy(f.insertGalleryModule,f))
},insertGalleryModule:function(l){this.exitGallery(true);
var h=this.nextGalleryLink;
if(this.isRightDirection===false){h=this.previousGalleryLink
}history.pushState("data","",h);
var j=new RegExp("{{position}}","g");
l=l.replace(j,window.Date.now());
var g=c(l);
var k=g.find(".gallery-detail");
c("body").append(k);
setTimeout(function(){d.bindComponent("gallery-detail");
d.bindComponent("social-share")
},0);
var f=this;
setTimeout(function(){c(".hero").replaceWith(f.$heroContent);
c(".page__body").replaceWith(f.$galleryThumbnails);
d.bindComponent("comments");
f.$closeButton.removeClass("init-loader");
f.nextGalleryRequestLock=false
},500)
},onImageClick:function(f){if(d.Devices.is("mobile")||d.Devices.is("tablet")){if(this.isFullScreen){this.isFullScreen=false;
this.$aside.fadeIn();
this.$nextButton.fadeIn();
this.$previousButton.fadeIn()
}else{this.isFullScreen=true;
this.$aside.fadeOut();
this.$nextButton.fadeOut();
this.$previousButton.fadeOut()
}}},onCaptionClick:function(k){if(d.Devices.is("mobile")||d.Devices.is("tablet")){var l=this.$info.outerHeight()-this.$info.height();
if(!this.$info.data("height")){this.$info.data("height",this.$info.height()+l)
}var f=this.$info.data("height");
var j=this.$gallery.height()-this.$header.height();
if(!this.$el.hasClass(this.CAPTION_CLASS)){if(!this.sliderStopped){this.stopProgress();
this.sliderCaptionStopped=true
}var h=this.$info.find(".bx-wrapper");
var g=h.height()+l+20;
f=window.Math.min(g,j);
this.$el.addClass(this.CAPTION_CLASS);
this.$info.addClass("gallery-detail__info--show")
}else{if(this.sliderCaptionStopped){this.resumeProgress()
}this.sliderCaptionStopped=false;
this.$el.removeClass(this.CAPTION_CLASS);
this.$info.removeClass("gallery-detail__info--show")
}this.$info.stop(true,true).animate({height:f})
}},onExitClick:function(f){if(c(".gallery-detail__exit").hasClass("init-loader")){this.nextGalleryAjaxLoader.abort();
c(".gallery-detail__exit").removeClass("init-loader")
}if(f){f.preventDefault()
}this.nextGalleryRequestLock=false;
window.location.hash="!/"
},onSponsorClicked:function(g){var h=g.target.className;
if(h&&h==="gallery-detail__sponsored"&&!d.Devices.is("desktop")&&this.$slider!==null){var f=this.$slider.getCurrentSlideElement();
f.find(".gallery-detail__image").trigger("click");
g.stopPropagation()
}},onVisibilityToggle:function(g,f){if(!this.$el.hasClass("manually-paused")){if(f){this.resumeProgress()
}else{this.stopProgress()
}}},updateControls:function(){var f=this.$slider.getSlideCount();
var g=this.$slider.getCurrentSlide()+1;
if(g===1){if(this.previousGalleryLink){this.$previousButton.fadeIn(100)
}else{this.$previousButton.fadeOut(100)
}this.$nextButton.fadeIn(100)
}else{if(g===f){this.$previousButton.fadeIn(100);
if(this.nextGalleryLink){this.$nextButton.fadeIn(100)
}else{this.$nextButton.fadeOut(100)
}}else{this.$previousButton.fadeIn(100);
this.$nextButton.fadeIn(100)
}}},initRouter:function(){var f=new GalleryRouter();
f.on("route:loadGallery",_.bind(this.loadGallery,this));
f.on("route:exitGallery",_.bind(this.exitGallery,this,300));
if(b.History.started===true){b.history.stop()
}b.history.start()
},updateGallery:function(f){},loadGallery:function(f){this.startSlide=this.navigationMap[f];
if(this.isImageLoadTriggered===false){this.loadAsyncImages()
}if(this.startSlide!==undefined){if(!this.$el.hasClass("opened")){this.$el.addClass("opened");
this.scrollTop=c(window).scrollTop();
this.$body.css("width",this.$body.width());
if(window.Modernizr.touch){this.$body.add(this.$html).addClass("no-height")
}else{this.$body.add(this.$html).addClass("disable-scroll")
}d.$body.addClass("gallery-opened");
this.initSlider()
}else{this.$slider.goToSlide(this.startSlide)
}}else{}},loadAsyncImages:function(){var f=2;
var l=this.$listItem.length;
var j=[];
var m=[];
var k=this.startSlide-f;
if(k<0){k=0;
j=this.$listItem.slice(l-f)
}var h=this.startSlide+f+1;
if(h>l){h=l;
m=this.$listItem.slice(0,f+1)
}var g=this.$listItem.slice(k,h);
if(j.length>0){g=c.merge(j,g)
}if(m.length>0){g=c.merge(m,g)
}g.each(function(q){var u=c(this).data("image-url");
var n=c(this).data("mobileimage-url");
var p=c(this).find("source").eq(0);
var o=c(this).find("source").eq(1);
var r=c(this).find(".gallery-detail__image");
if(p.attr("srcset")===""){p.attr("srcset",u)
}if(o.attr("srcset")===""){o.attr("srcset",u)
}if(r.attr("src")===""){r.attr("src",n)
}})
},exitGallery:function(g){var f=this;
this.stopProgress();
if(f.$el.hasClass("opened")){if(g!==true){f.$el.removeClass("opened")
}this.sendEvent(this.OMNITURE.CLOSE);
b.history.stop();
setTimeout(function(){f.$el.remove();
if(c(".gallery-detail").length===0){window.scrollTo(0,f.scrollTop);
f.$body.css("width","");
f.$body.add(f.$html).removeClass("disable-scroll");
f.$body.add(f.$html).removeClass("no-height");
f.$body.add(f.$html).removeClass("gallery-opened")
}},500)
}},resetProgress:function(){this.sliderStopped=false;
this.slideRemainingTime=0;
this.$playPause.removeClass("icon-play-gallery").addClass("icon-pause-gallery");
this.$el.removeClass("manually-paused");
this.$progressRunner.stop(true).css({right:"100%"})
},startProgress:function(g){var f=this;
if(!g){this.slideStartTime=Date.now()
}else{this.slideStartTime=Date.now()-(this.PAUSE_TIME-g)
}this.$progressRunner.animate({right:"0%"},g||this.PAUSE_TIME,"linear",function(){f.$slider.triggerHandler("slider:next")
})
},stopProgress:function(){this.$playPause.removeClass("icon-pause-gallery").addClass("icon-play-gallery");
var f=Date.now()-this.slideStartTime;
this.slideRemainingTime=this.PAUSE_TIME-f;
this.$progressRunner.stop();
this.sliderStopped=true
},resumeProgress:function(){this.$playPause.removeClass("icon-play-gallery").addClass("icon-pause-gallery");
this.startProgress(this.slideRemainingTime);
this.sliderStopped=false
},getSlideImageId:function(h){var g=this.$slider.getSlideCount();
var k=this.$slider.getCurrentSlide();
var f=k+1;
if(h==="previous"){f=k-1
}if(f<g&&f>-1){for(var j in this.navigationMap){if(this.navigationMap[j]===f){return j
}}}return null
},measureScrollbar:function(){var g=document.createElement("div");
g.className="scrollbar-measure";
this.$body.append(g);
var f=g.offsetWidth-g.clientWidth;
this.$body[0].removeChild(g);
return f
},sendPageEvent:function(){var g=this.getCurrentImage();
var f=false;
if(this.isVertical){this.count=this.mobileFeed[this.currentGalleryIndex].images.length
}if(document!=null){f=document.hasFocus()
}window.s.linkTrackVars="events,prop7,eVar7,prop61,eVar61,prop62,eVar62";
window.s.linkTrackEvents="event3";
if((parseInt(this.index)+1)==parseInt(this.count)){window.s.linkTrackEvents+=","+this.OMNITURE.FINAL
}if(this.travelType==1){window.s.linkTrackEvents+=",event22"
}else{window.s.linkTrackEvents+=",event23"
}window.s.eVar7=window.s.pageName;
window.s.prop7=window.s.pageName;
window.s.prop11=unescape(window.location.href);
window.s.eVar11=unescape(window.location.href);
window.s.prop42=parseInt(this.index)+1;
window.s.eVar42=parseInt(this.index)+1;
window.s.prop26=this.count;
window.s.eVar43=this.count;
if(f){window.s.prop44="Image Gallery - In Focus";
window.s.eVar44="Image Gallery - In Focus"
}else{window.s.prop44="Image Gallery - Not In Focus";
window.s.eVar44="Image Gallery - Not In Focus"
}window.s.prop61="Image Gallery - "+this.travelMethods[this.travelType];
window.s.eVar61="Image Gallery - "+this.travelMethods[this.travelType];
window.s.prop62=g;
window.s.eVar62=g;
window.s.events="event3";
if((parseInt(this.index)+1)==parseInt(this.count)){window.s.events+=","+this.OMNITURE.FINAL
}if(this.travelType==1){window.s.events+=",event22"
}else{if(this.travelType==0){window.s.events+=",event23"
}else{window.s.events+=",event39"
}}window.s.t()
},updateShare:function(){var f=this;
d.bindComponent("social-share");
this.$socialModule.each(function(){var g=d.getComponent(c(this));
g.initializeSocialLinks(_.bind(f.onShareClicked,f))
})
},sendEvent:function(f){var g=this.getCurrentImage();
window.s.linkTrackVars="events,prop7,eVar7,prop62,eVar62,prop42,eVar42,prop26,eVar43";
window.s.linkTrackEvents=f;
window.s.eVar7=window.s.pageName;
window.s.prop7=window.s.pageName;
window.s.prop62=g;
window.s.eVar62=g;
window.s.prop42=parseInt(this.index)+1;
window.s.eVar42=parseInt(this.index)+1;
window.s.prop26=this.count;
window.s.eVar43=this.count;
window.s.events=f;
window.s.tl(this,"o",g)
},sendNextEvent:function(g,f){var h=this.getCurrentImage();
window.s.linkTrackVars="events,prop7,eVar7,prop62,eVar62,prop57,eVar57,prop58,eVar58,prop59,eVar59";
window.s.linkTrackEvents=g;
window.s.eVar7=window.s.pageName;
window.s.prop7=window.s.pageName;
window.s.prop62=h;
window.s.eVar62=h;
window.s.prop57="gallerypage:nextgallery";
window.s.eVar57="gallerypage:nextgallery";
window.s.prop58=window.s.pageName;
window.s.eVar58=window.s.pageName;
window.s.prop59=this.convertDestinationLinkToOmnitureFormat(f);
window.s.eVar59=this.convertDestinationLinkToOmnitureFormat(f);
window.s.events=g;
window.s.tl(this,"o",h)
},convertDestinationLinkToOmnitureFormat:function(f){var g=0;
f=f.replace("https://","");
f=f.replace("https://","");
f=f.replace("//","");
f=f.replace("/content/bet","");
var h=[];
g=f.indexOf(".html");
if(g!=-1){f=f.substr(0,g)
}h=f.split("/");
h.shift();
f=h.join(":");
return f
},updateOmniture:function(f){c.map(f,function(h,g){window.s[g]=h
});
window.s.prop11=unescape(unescape(window.location.href));
if(window.s.channel){window.s.eVar2=window.s.channel
}if(window.s.prop3){window.s.eVar3=window.s.prop3
}if(window.s.prop4){window.s.eVar4=window.s.prop4
}if(window.s.prop5){window.s.eVar5=window.s.prop5
}if(window.s.prop6){window.s.eVar6=window.s.prop6
}if(window.s.pageName){window.s.eVar7=window.s.pageName
}if(window.s.prop8){window.s.eVar8=window.s.prop8
}if(window.s.prop9){window.s.eVar9=window.s.prop9
}if(window.s.prop10){window.s.eVar10=window.s.prop10
}if(window.s.prop11){window.s.eVar11=window.s.prop11
}if(window.s.prop12){window.s.eVar12=window.s.prop12
}},updateAdParams:function(f){c.map(f,function(n,m){DAD.pageTargeting[m]=n;
if(m.indexOf("ord")!=-1){DAD.pageTargeting[m]=timestampDart
}});
var l=[];
var j=[];
var h=0;
var g=2;
c(".header__ads .ads--header").each(function(){l[h]=c(this).children("div").attr("id");
c("#"+l[h]).data("tile",1);
c("#"+l[h]).data("sizes",[[728,90],[970,90],[970,250]]);
h++
});
c(".header__ads .no-gap:first").each(function(){l[h]=c(this).children("div").attr("id");
c("#"+l[h]).data("tile",1);
c("#"+l[h]).data("sizes",[1,1]);
h++
});
c(".ads--square").each(function(){var m=c(this).children("div").attr("id");
if(!d.lazyAdHelpers.isCancelled(m)){l[h]=m;
c("#"+l[h]).data("tile",g);
c("#"+l[h]).data("sizes",[300,250]);
h++;
g++
}else{}});
function k(m){if(l.indexOf(m.id)!=-1){return true
}else{return false
}}d.DynamicAdDelegator.hardRefreshByIds(l)
},updatePageTitle:function(f){if(f!=null){document.title=f
}},getCurrentImage:function(){var f="";
if(!this.isVertical){f=this.currentFeed.images[this.index].url
}else{f=this.mobileFeed[this.currentGalleryIndex].images[this.index].url
}return f
},onShareClicked:function(f){var g=this.getCurrentImage();
window.s.linkTrackVars="events,prop7,eVar7,prop21,eVar21,prop62,eVar62";
window.s.linkTrackEvents="event6";
window.s.eVar7=window.s.pageName;
window.s.prop7=window.s.pageName;
window.s.eVar21=f;
window.s.prop21=f;
window.s.prop62=g;
window.s.eVar62=g;
window.s.events="event6";
window.s.tl(this,"o",f)
}});
d.ImageGalleryRedux=e;
d.registerComponent("imageGalleryRedux",e)
})(jQuery,Backbone,App);
(function(b,a,c){b.fn.ModalLauncher=function(){return this.each(function(){var d=this;
this.init=function(){if(b(this).attr("href").indexOf("#")!=-1){var e=b(this).attr("href");
e=e.split("#");
e=e[e.length-1];
if(e.indexOf("modal-")!=-1){b(this).attr("data-modalLauncher","true");
this.attachEvents()
}}};
this.attachEvents=function(){b(this).click(function(g){var h=g.currentTarget.pathname;
var f=location.pathname;
if(h=="/"){h="/home.html"
}if(f=="/"){f="/home.html"
}if(g.currentTarget.host==location.host&&h==f){g.preventDefault();
c.ModalLauncherHelper(b(this).attr("href"))
}})
};
this.init()
})
};
b.fn.Modal=function(){return this.each(function(){var d=this;
this.init=function(){this.startingWidth=b(window).width();
this.active="";
this.confirmation=false;
this.modal_id=b(this).attr("modal_id");
this.heights=[];
this.progressIndex=0;
this.oldPageName="";
this.attachEvents()
};
this.attachEvents=function(){b(window).resize(function(){if(b(window).width()!=d.startingWidth){d.startingWidth=b(window).width();
d.calculateInnerHeights()
}});
if(b(this).find("img").length>0){b(this).find("img").load(function(){d.calculateInnerHeights();
d.openModal()
})
}else{this.calculateInnerHeights();
this.openModal()
}b(this).find(".subscribe button").attr("onClick","").click(function(){var e="subscribe";
var f=b(this).closest(".subscribe").find("input").attr("placeholder");
d.fireLinkEvent(e,f);
d.progressModal()
});
b(this).find("a").click(function(g){var h="empty";
if(g.currentTarget.text.trim()!=""){h=g.currentTarget.text.trim()
}var f="cta-button";
if(d.confirmation){f="confirmation-cta"
}d.fireLinkEvent(f,h)
});
b(this).find(".modal__close").click(function(){d.closeModal()
});
b(this).parent().children(".screen").click(function(){d.closeModal()
});
b(this).find(".modal__container").click(function(f){f.stopPropagation()
});
b(this).click(function(){d.closeModal()
});
if(b(this).find(".subscribe").length>0){c.bindComponent("subscribe")
}};
this.calculateInnerHeights=function(){this.heights=[];
if(b(this).find(".heightCheck")>1){b(this).find(".heightCheck").each(function(){var e=b(this).height();
d.heights.push(e)
});
this.updateCurrentHeight()
}};
this.updateCurrentHeight=function(){b(this).find(".modal__content").css({height:this.heights[this.progressIndex]})
};
this.openModal=function(){b(this).parent().addClass("loaded");
b(this).toggleClass("open");
this.calculateInnerHeights();
this.firePageViewEvent()
};
this.firePageViewEvent=function(){this.oldPageName=window.s.pageName;
window.s.linkTrackVars="events,server,prop7,eVar7,prop17,eVar17";
window.s.linkTrackEvents="event3";
window.s.eVar17=window.s.prop17=window.s.getPreviousValue(window.s.pageName,"s_pv");
window.s.events="event3";
window.s.pageName="pop-up-page:"+this.modal_id;
window.s.prop7=window.s.pageName;
window.s.eVar7=window.s.pageName;
window.s.eVar57="";
window.s.prop57="";
window.s.eVar58="";
window.s.prop58="";
window.s.eVar59="";
window.s.prop59="";
window.s.t()
};
this.fireLinkEvent=function(e,f){s.linkTrackVars="events,prop57,eVar57,prop58,eVar58,prop59,eVar59";
s.linkTrackEvents="event4";
s.prop57="pop-up-page:"+e;
s.eVar57="pop-up-page:"+e;
s.prop58="pop-up-page:"+this.modal_id;
s.eVar58="pop-up-page:"+this.modal_id;
s.prop59=f;
s.eVar59=f;
s.events="event4";
s.tl(this,"o",f)
};
this.closeModal=function(){if(b(this).parent().hasClass("loaded")){this.resetProgress();
b(this).toggleClass("open");
b("body").removeClass("disable-scroll").removeClass("modal--open");
b("body").css({top:""});
b(this).parent().toggleClass("open").toggleClass("loaded");
b(this).remove();
b("html,body").scrollTop(parseInt(b(this).attr("scroll")))
}};
this.progressModal=function(){this.progressIndex++;
this.calculateInnerHeights();
this.confirmation=true;
b(this).addClass("show-confirmation")
};
this.resetProgress=function(){window.s.pageName=this.oldPageName;
this.progressIndex=0;
this.confirmation=false;
b(this).removeClass("show-confirmation")
};
this.init()
})
};
c.ModalLauncherHelper=function(e){if(e.indexOf("#"!=-1)){var h=e.split("#")[1];
var g=h.indexOf("modal-");
if(g!=-1){h=h.split("?")[0];
h=h.substr(g);
if(h.indexOf(".")!=-1){h=h.slice(0,h.indexOf("."))
}h=h.substr(6);
var d=b(".modal_launcher");
var j="/popups/"+h+".modal.html";
if(d.length==0){var f='<div class="modal_launcher"><div class="screen"></div>';
f+='<div class="spinner"><div class="spinner__item1"></div>';
f+='<div class="spinner__item2"></div><div class="spinner__item3"></div>';
f+='<div class="spinner__item4"></div></div></div>';
b("body").append(f);
d=b(".modal_launcher")
}d.toggleClass("open");
var k=b("body").scrollTop();
b("body").css({top:(-1*k)});
b("body").addClass("disable-scroll");
b("body").addClass("modal--open");
if(b("#modal-"+h).length>0){d.toggleClass("loaded");
b("#modal-"+h)[0].openModal()
}else{b.ajax({method:"GET",url:j,dataType:"html",success:function(n){var m='<div class="reusable_modal" id="modal-'+h+'" modal_id="'+h+'" scroll="'+k+'">';
var l;
m+=n+"</div>";
l=b(m);
l.find(".confirmation-content").appendTo(l.find(".modal__content"));
d.append(l);
b("#modal-"+h).Modal()
},error:function(){b("body").removeClass("disable-scroll");
b("body").css({top:""});
b("body").removeClass("modal--open");
d.toggleClass("open")
}})
}return false
}}};
b(document).ready(function(){b("a[href*=#]").ModalLauncher();
if(location.hash.indexOf("modal-")!=-1){c.ModalLauncherHelper(location.href)
}})
})(jQuery,Backbone,App);
window.NOMINEES_2017_CATEGORY_LIST_PATH=(window.NOMINEES_2017_CATEGORY_LIST_PATH||"/etc/bet/menus/nominees/beta17-nominees.3.json");
window.NOMINEES_2017_IS_LANDING_PAGE=(window.NOMINEES_2017_IS_LANDING_PAGE||false);
(function(e,d){var f=e(".asset_nomineesDropdown");
var b={};
b.trackCategoryClick=function(n){var p=d.s;
var j=n.element;
var o=p.prop4;
var h="nominees navigation";
var k=n.position;
var m=p.prop7;
var l="event4";
var g=j.pathname;
g=g.match(/^\/(.*)$/)[1];
g=g.replace(/\.html$/,"");
g=g.replace(/\//g,":");
p.linkTrackVars="events,prop57,eVar57,prop58,eVar58,prop59,eVar59";
p.linkTrackEvents=l;
p.prop57=p.eVar57=o+":"+h+":"+k;
p.prop58=p.eVar58=m;
p.prop59=p.eVar59=g;
p.events=l;
p.tl(j,"o",g)
};
function a(g){this.$window=e(d);
this.$dropdown=e(g);
this.config=null;
this.delayedAnimation=null;
this.isExpanded=false;
this._fetchConfig().done(this._utilizeConfig.bind(this))
}a.prototype._fetchConfig=function(){var g;
g=e.get(this.constructor.CONFIG_URL);
return g
};
a.prototype._utilizeConfig=function(g){this.config=g;
this._render();
this._bindEvents();
this._setupTracking();
if(this._isLandingPage()){this.expand()
}};
a.prototype._setupTracking=function(){this.$dropdown.on("click",".asset_nomineesDropdown-item a",this._trackCategoryClick.bind(this))
};
a.prototype._trackCategoryClick=function(h){var j=h.originalEvent.target;
var g={element:j,position:e(j).data("categoryIndex")+1};
b.trackCategoryClick(g)
};
a.prototype.queueExpandingAnimation=function(){this.delayedAnimation=new c(this._checkListVisibility.bind(this),300,this._animateExpanding.bind(this))
};
a.prototype.discardExpandingAnimation=function(){if(!this.delayedAnimation){return
}this.delayedAnimation.release();
this.delayedAnimation=null
};
a.prototype._render=function(){var l=this.config["jcr:content"]["subnav"]["subnavitem"];
var h;
var p;
var j;
var m;
var k=this._getPage();
var n;
var o;
var q;
var g;
h=0;
n="";
while(h<l.dropdownlist.length){p=e.parseJSON(l.dropdownlist[h]);
m=this._trimLink(p.paths);
g=m.match(this.constructor.PAGE_REGEXP);
if(g&&(g[1]===k)){q=p;
n+='<li class="asset_nomineesDropdown-item selected" style="transition: transform 0.3s ease-in '+(h*0.2)+'s;"><a href="'+m+'" title="'+p.titles+'" data-category-index="'+h+'">'+p.titles+"</a></li>"
}else{n+='<li class="asset_nomineesDropdown-item" style="transition: transform 0.3s ease-in '+(h*0.2)+'s;"><a href="'+m+'" title="'+p.titles+'" data-category-index="'+h+'">'+p.titles+"</a></li>"
}h++
}if(this._isLandingPage()){o=""
}else{o=q.titles;
this.$dropdown.addClass("asset_nomineesDropdown--hasChoice")
}j='<a class="asset_nomineesDropdown-choice" href="javascript: void(0);"><span class="asset_nomineesDropdown-choiceDefaultText">'+this.constructor.CHOICE_TEXT+'</span><span class="asset_nomineesDropdown-chosenText" title="'+o+'">'+o+'</span></a><ul class="asset_nomineesDropdown-list">'+n+'</ul><ul class="asset_nomineesDropdown-list asset_nomineesDropdown-list--placeholder">'+n+"</ul>";
this.$dropdown.html(j)
};
a.prototype._bindEvents=function(){this.$dropdown.on("click",this.constructor.CHOICE_SELECTOR,this.toggle.bind(this));
this.$dropdown.one("mouseenter",".asset_nomineesDropdown-list",this._animateExpanding.bind(this))
};
a.prototype._trimLink=function(g){var h=document.createElement("a");
g=g.trim();
h.href=g;
g=h.pathname+h.search+h.hash;
if(g.substr(0,1)!=="/"){g="/"+g
}return g
};
a.prototype._getPage=function(){var g=document.location.pathname.match(this.constructor.PAGE_REGEXP)[1];
return g
};
a.prototype._isLandingPage=function(){var g=!!this.constructor.IS_LANDING_PAGE;
return g
};
a.prototype._checkListVisibility=function(){var g=this.$dropdown.find(".asset_nomineesDropdown-list").not(".asset_nomineesDropdown-list--placeholder").find(".asset_nomineesDropdown-item")[1].getBoundingClientRect();
if(document.documentElement.clientHeight+document.body.scrollTop>g.top+70){return true
}return false
};
a.prototype._makeChoiceWindowVisuallyNonclickable=function(){this.$dropdown.addClass("asset_nomineesDropdown--nonCollapsible")
};
a.prototype.toggle=function(){if(this.isExpanded&&this._isLandingPage()){return
}else{if(!this.isExpanded){this.expand()
}else{this.collapse()
}}};
a.prototype.expand=function(){this.$dropdown.addClass("asset_nomineesDropdown--open");
if(this._isLandingPage()){this.queueExpandingAnimation();
this._makeChoiceWindowVisuallyNonclickable()
}else{this._animateExpanding()
}this.isExpanded=true
};
a.prototype.collapse=function(){this.$dropdown.removeClass("asset_nomineesDropdown--open");
this.isExpanded=false
};
a.prototype._animateExpanding=function(){this.discardExpandingAnimation();
this.$dropdown.addClass("asset_nomineesDropdown--transformed")
};
a.prototype._animateCollapsing=function(){this.$dropdown.removeClass("asset_nomineesDropdown--transformed")
};
a.ITEM_SELECTOR=".asset_nomineesDropdown-item";
a.ADD_ITEM_SELECTOR=".asset_nomineesDropdown-item--ad";
a.CHOICE_SELECTOR=".asset_nomineesDropdown-choice";
a.CONFIG_URL=d.NOMINEES_2017_CATEGORY_LIST_PATH;
a.IS_LANDING_PAGE=d.NOMINEES_2017_IS_LANDING_PAGE;
a.CHOICE_TEXT="SELECT A CATEGORY";
a.PAGE_REGEXP=/\/([^/?#]*)\.html/;
function c(g,j,h){this.fineToRunPredicate=g;
this.throttleInterval=j;
this.animation=h;
this.timeoutHandler=null;
this.$window=e(d);
this._startPolling()
}c.prototype._startPolling=function(){this._bindEvents();
this._checkToRun()
};
c.prototype._bindEvents=function(){this.$window.on("scroll.delayedAnimation resize.delayedAnimation orientationchange.delayedAnimation",this._handleScroll.bind(this))
};
c.prototype._releaseEvents=function(){this.$window.off(".delayedAnimation")
};
c.prototype._handleScroll=function(){this._clearTimeout();
this._setTimeout()
};
c.prototype._checkToRun=function(){if(!this.fineToRunPredicate()){return
}this._run()
};
c.prototype._run=function(){this.animation();
this.release()
};
c.prototype._clearTimeout=function(){if(this.timeoutHandler===null){return
}d.clearTimeout(this.timeoutHandler);
this.timeoutHandler=null
};
c.prototype._setTimeout=function(){this.timeoutHandler=d.setTimeout(this._checkToRun.bind(this),this.throttleInterval)
};
c.prototype.release=function(){this._releaseEvents();
this._clearTimeout()
};
if(f.length){new a(f[0])
}})(jQuery,window);
window.NOMINEES_2017_CATEGORY_LIST_PATH=(window.NOMINEES_2017_CATEGORY_LIST_PATH||"/etc/bet/menus/nominees/beta17-nominees.3.json");
(function(d,b){var c=d(".asset_nominees17-nextButton");
function a(e){this.$button=d(e);
this.config=null;
this.nextUrl=null;
this._fetchConfig().done(this._utilizeConfig.bind(this))
}a.prototype._fetchConfig=function(){var e;
e=d.get(this.constructor.CONFIG_URL);
return e
};
a.prototype._utilizeConfig=function(e){this.config=e["jcr:content"]["subnav"]["subnavitem"]["dropdownlist"];
this._defineNextUrl();
this._bindEvents()
};
a.prototype._defineNextUrl=function(){var g;
var f=0;
var h=this.config.length;
var e;
while(f<h){g=this._getUrl(f);
e=this._isUrlCurrent(g);
if(e&&(f+1<h)){this.nextUrl=this._getUrl(f+1);
return
}else{if(e){this.nextUrl=this._getUrl(0);
return
}}f++
}this.nextUrl=""
};
a.prototype._isUrlCurrent=function(g){var h=this._getPage();
var f=g.match(this.constructor.PAGE_REGEXP);
var e=!!(f&&(f[1]===h));
return e
};
a.prototype._getUrl=function(g){var f="";
try{f=this._trimLink(d.parseJSON(this.config[g])["paths"]);
return f
}catch(h){}return f
};
a.prototype._getPage=function(){var e=document.location.pathname.match(this.constructor.PAGE_REGEXP)[1];
return e
};
a.prototype._trimLink=function(e){var f=document.createElement("a");
e=e.trim();
f.href=e;
e=f.pathname+f.search+f.hash;
if(e.substr(0,1)!=="/"){e="/"+e
}return e
};
a.prototype._convertDestinationLinkToOmnitureFormat=function(e){var f=0;
e=e.replace("https://","");
e=e.replace("http://","");
e=e.replace("//","");
e=e.replace("/content/bet","");
var g=[];
f=e.indexOf(".html");
if(f!=-1){e=e.substr(0,f)
}g=e.split("/");
g.shift();
e=g.join(":");
return e
};
a.prototype._bindEvents=function(){this.$button.on("click",this._handleClick.bind(this))
};
a.prototype._handleClick=function(){var g=b.s.pageName,f=b.s.prop4+":nominees list:next",e=this._convertDestinationLinkToOmnitureFormat(this.nextUrl);
b.s.linkTrackVars="events,prop57,eVar57,prop58,eVar58,prop59,eVar59";
b.s.linkTrackEvents="event4";
b.s.prop57=f;
b.s.eVar57=f;
b.s.prop58=g;
b.s.eVar58=g;
b.s.prop59=e;
b.s.eVar59=e;
b.s.events="event4";
b.s.tl(this,"o",e);
b.location=this.nextUrl
};
a.PAGE_REGEXP=/\/([^/?#]*)\.html/;
a.CONFIG_URL=b.NOMINEES_2017_CATEGORY_LIST_PATH;
if(c.length){new a(c[0])
}})(jQuery,window);
(function(g,f,h){function d(k){var m=Math.floor(Math.random()*100000);
var j="";
var l=null;
l=g('<li class="asset_feed-item asset_feed-item--advertisement" data-advertisement-id="'+m+'"><div class="asset_feed-advertisementContainer ad-placeholder"></div></li>');
k.before(l);
f.setTimeout(function(){j=h.DynamicAdDelegator.drive('[data-advertisement-id="'+m+'"] .ad-placeholder',[300,250],2);
l.data("googletagId",j)
},0)
}function c(j){j.find("[data-advertisement-id]").each(function(k,l){var m=g(l).data("googletagId");
h.DynamicAdDelegator.removeSlotForId(m)
})
}function b(j){this._feed=j;
this._$feed=g(this._feed);
this._initSocialShare();
this._initLoading();
this._initFirstChunk()
}b.ROOT_ELEMENT_SELECTOR=".asset_feed";
b.ITEM_SELECTOR=".asset_feed-item";
b.markInitialized=function(k,j){g(k).data("asset-feed-is-initialized",j)
};
b.isInitialized=function(k){var j=!!g(k).data("asset-feed-is-initialized");
return j
};
b.prototype._initSocialShare=function(){a.initSwitching();
this._$feed.find(b.ITEM_SELECTOR).each(function(j,k){new a(k)
})
};
b.prototype._initLoading=function(){new e(this._feed)
};
b.prototype._initFirstChunk=function(){d(this._$feed.find(".asset_feed-item").eq(2))
};
function a(j){this._$root=g(j);
if(a.isInitialized(j)){return
}this._$title=this._$root.find(a.TITLE_SELECTOR);
this._$link=this._$root.find(a.LINK_SELECTOR);
this._$img=this._$root.find(a.IMG_SELECTOR);
this._delegateFunctional();
a.markInitialized(j,this)
}a.SOCIAL_ROOT_SELECTOR=".asset_feed .feed__social";
a.SOCIAL_LIST_SELECTOR=".feed__social__list";
a.CANT_FOLLOW_NETWORKS=["whatsapp","email"];
a.CANT_SHARE_ON_NETWORKS=["instagram","youtube","tumblr","pinterest"];
a.SOCIAL_LINK_SELECTOR=".feed__social__item";
a.TITLE_SELECTOR=".asset_feed-title";
a.LINK_SELECTOR=".asset_feed-link";
a.IMG_SELECTOR=".asset_feed-image";
a.markInitialized=function(k,j){g(k).data("sharing-is-initialized",j)
};
a.isInitialized=function(k){var j=!!g(k).data("sharing-is-initialized");
return j
};
a.initSwitching=function(){f.document.body.addEventListener("click",a._handleClick.bind(a))
};
a._handleClick=function(l){var j=g(l.target);
var k;
if(j.is(a.SOCIAL_ROOT_SELECTOR)){k=j
}else{k=j.closest(a.SOCIAL_ROOT_SELECTOR)
}if(k.length){a._toggleSocialShare(k);
return
}a._hideAllSocialShare()
};
a._toggleSocialShare=function(j){var k=j.hasClass("active");
a._hideAllSocialShare();
j.toggleClass("active",!k)
};
a._hideAllSocialShare=function(){g(a.SOCIAL_ROOT_SELECTOR).removeClass("active")
};
a.prototype._delegateFunctional=function(k){var j=this;
if(this._$root.find(a.SOCIAL_LIST_SELECTOR).data("follow")){g.each(a.CANT_FOLLOW_NETWORKS,function(l,m){j._$root.find(".icon-"+m).remove()
})
}else{g.each(a.CANT_SHARE_ON_NETWORKS,function(l,m){j._$root.find(".icon-"+m).remove()
});
h.InitSocialLinks(j._$root.find(a.SOCIAL_LINK_SELECTOR),j._$title.text(),j._$link.attr("href"),k,j._$img.attr("srcset"))
}};
function e(j){this._$root=g(j);
this._$chunksContainer=this._$root.find(".asset_feed-chunksContainer");
this._$icon=this._$root.find(".feed-container__loader");
this._$button=this._$root.find(".feed-container__button");
this._$categories=this._$root.find(".asset_feed-categories");
this._$category=this._$root.find(".asset_feed-category");
this._loadWithButtonInterval=this._$root.data("feedLoadRepeat")||e.LOAD_WITH_BUTTON_INTERVAL;
this._isPending=false;
this._waypoint=null;
this._currentPage=1;
this._baseUrl=this._$root.find('.asset_feed-list link[rel="next"]').attr("href");
this._endpoint=this._$root.find("[data-endpoint]").data("endpoint");
this._isFeedOver=false;
this._updateControl();
this._markDefaultCategoryActive();
this._bindEvents()
}e.OPEN_LOADER_CLASS="feed-container__loader--open";
e.OPEN_BUTTON_CLASS="feed-container__button--open";
e.LOAD_WITH_BUTTON_INTERVAL=6;
e.prototype._markDefaultCategoryActive=function(){this._$category.each(function(k,l){var j=g(l);
if(!j.data("category-id")){j.addClass("asset_feed-category--active")
}})
};
e.prototype._updateControl=function(){var l=this._shouldLoadWithButton();
var k=this._shouldLoadMore();
var j=this._getFeedIsOverState();
this._isPending=false;
if(j){this._hideLoadingControls()
}else{if(k&&l){this._showLoadMoreButton()
}else{if(k){this._showLoadingIcon()
}else{this._hideLoadingControls()
}}}f.Waypoint.refreshAll()
};
e.prototype._showLoadingIcon=function(){this._$icon.addClass(e.OPEN_LOADER_CLASS);
this._$button.removeClass(e.OPEN_BUTTON_CLASS)
};
e.prototype._showLoadMoreButton=function(){this._$icon.removeClass(e.OPEN_LOADER_CLASS);
this._$button.addClass(e.OPEN_BUTTON_CLASS)
};
e.prototype._hideLoadingControls=function(){this._$icon.removeClass(e.OPEN_LOADER_CLASS);
this._$button.removeClass(e.OPEN_BUTTON_CLASS)
};
e.prototype._bindEvents=function(){this._$button.click(this._loadMore.bind(this));
this._waypoint=this._$icon.waypoint(this._handleScroll.bind(this),{offset:"100%"})[0];
this._$root.find(".asset_feed-categories").on("click",".asset_feed-category",this._handleCategoryClick.bind(this))
};
e.prototype._handleCategoryClick=function(k){var j;
if(this._isCategoryActive(k.target)){this._toggleCategoriesList();
return
}if(this._isPending){return
}this._isPending=true;
this._markActiveCategory(k.target);
j=this._getCategoryUrl(k);
g.get(j).done(this._switchCategoryView.bind(this))
};
e.prototype._toggleCategoriesList=function(){this._$categories.toggleClass("asset_feed-categories--expanded")
};
e.prototype._switchCategoryView=function(j){this._resetChunksContainer();
this._initNewChunk(j)
};
e.prototype._isCategoryActive=function(l){var j;
var k=g(l);
if(this._$category.filter(".asset_feed-category--active").length===0&&!k.data("category-id")){return true
}j=k.hasClass("asset_feed-category--active");
return j
};
e.prototype._markActiveCategory=function(j){this._$category.removeClass("asset_feed-category--active");
g(j).addClass("asset_feed-category--active");
this._toggleCategoriesList()
};
e.prototype._getCategoryUrl=function(l){var k=g(l.target).data("category-id");
var j;
if(k){j=this._endpoint+".pageNumber-1.pageSize-5."+k+".html"
}else{j=this._endpoint+".pageNumber-1.pageSize-5.html"
}return j
};
e.prototype._resetChunksContainer=function(){c(this._$chunksContainer);
this._$chunksContainer.empty();
this._resetFeedIsOverState();
this._resetPageNumber()
};
e.prototype._releaseEvents=function(){this._waypoint.disable()
};
e.prototype._resetPageNumber=function(){this._currentPage=0
};
e.prototype._getCurrentPageNumber=function(){return this._currentPage
};
e.prototype._incrementCurrentPageNumber=function(){this._currentPage++
};
e.prototype._shouldLoadWithButton=function(){var l=this._getCurrentPageNumber();
var k=this._loadWithButtonInterval;
var j=(l%k===0&&(l!==0));
return j
};
e.prototype._shouldLoadMore=function(){var j=!!this._$root.find(".asset_feed-list").length;
j=!j||this._$root.find(".asset_feed-list").last().data("load-more")!==(void 0);
return j
};
e.prototype._handleScroll=function(m){var l=this._shouldLoadMore();
var k=this._shouldLoadWithButton();
var j=(m==="down");
if(j&&!k&&l){this._loadMore()
}};
e.prototype._loadMore=function(){var j;
if(this._isPending){return
}this._isPending=true;
j=this._getNextUrl();
g.get(j).done(this._initNewChunk.bind(this)).fail(this._setFeedIsOverState.bind(this))
};
e.prototype._setFeedIsOverState=function(){this._isFeedOver=true;
this._updateControl()
};
e.prototype._resetFeedIsOverState=function(){this._isFeedOver=false
};
e.prototype._getFeedIsOverState=function(){var j=this._isFeedOver;
return j
};
e.prototype._getNextUrl=function(){var j=this._baseUrl.replace(/pageNumber-[^.]*\./,"pageNumber-"+(this._getCurrentPageNumber()+1)+".");
var k=this._$category.filter(".asset_feed-category--active").data("category-id");
if(k){j=j.replace(/\.html/,"."+k+".html")
}return j
};
e.prototype._initNewChunk=function(m){var k=g(m);
var l=k.find(".asset_feed-item");
var j=(this._getCurrentPageNumber()%2===0)?2:0;
l.each(function(n,o){new a(o)
});
d(l.eq(j));
this._$chunksContainer.append(k);
this._incrementCurrentPageNumber();
f.setTimeout(this._updateControl.bind(this),0)
};
g(b.ROOT_ELEMENT_SELECTOR).each(function(k,l){var j;
if(b.isInitialized(l)){return
}j=new b(l);
b.markInitialized(l,j)
})
})(jQuery,window,App);
(function(b,a,d){var c=a.View.extend({events:{"click .tag-banner__title":"activeSearch"},initialize:function(){this.searchInput=b("h1.tag-banner__title span").first().text()
},activeSearch:function(e){if(!d.Devices.is("desktop")){b(".header__nav__menu__toggle").click();
b("input.header__search__input").focus()
}else{b(".header__search__toggle").click();
setTimeout(function(){b("input.header__search__input").focus()
},20)
}b(".header__search__input").val(this.searchInput);
e.preventDefault();
e.stopPropagation()
}});
d.registerComponent("tag-banner",c)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({initialize:function(){this.$videoIframe=c(".asset_nominees17-winnerContainer .asset_nominees17-iframe");
this.$speachBtn=c(".viewSpeachBtn");
if(this.$videoIframe.length>0){this.showIframeVideoSection()
}else{this.showPictureSection()
}},showIframeVideoSection:function(){var e=this.$videoIframe.attr("src");
var f=this.$videoIframe[0].contentDocument||this.$videoIframe[0].contentWindow.document;
if(e.length<=0){this.showPictureSection()
}var h=_.bind(function(){this.registerIframeEvent()
},this);
var g=setInterval(function(){var j=this.$videoIframe.contents();
var k=j.find(".edge-placeholder");
if(k.length>0){this.registerIframeEvent(k);
clearInterval(g)
}}.bind(this),100);
setTimeout(function(){clearInterval(g)
},10000)
},showPictureSection:function(){c(".asset_nominees17-winnerContainer .asset_nominees17-picture").show();
this.$speachBtn.hide();
this.$videoIframe.hide()
},registerIframeEvent:function(e){this.$speachBtn.on("click",function(){e.click()
});
e.on("click",_.bind(function(){this.$speachBtn.hide()
},this))
}});
d.registerComponent("asset_nominees17-winnerContainer",a)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({loadMoreBtn:"js-loadMoreButton",filterItem:"js-item",filters:"select",featuredElement:"related--featured-elements",filteredForceDisplayClass:"force-display",filteredClass:"filtered",dropdownContainerClass:"filter__dropdown-container__item",clickedFilter:"",spinnerClass:"spinner",filterSeason:"select[name=seasonFilter]",filterSort:"select[name=seasonSort]",defaultSeason:"",defaultSort:"",folderPrefix:"../",windowHref:document.querySelector('link[rel="canonical"]').href,optionWrapper:"filter__dropdown-container__optionsWrapper",option:"filter__dropdown-container__option.default",link:"filter__dropdown-container__option",loadMore:false,loadMoreURLupdate:false,filterURLupdate:false,moreEpisodesContainer:"more-episodes-container",moreExtrasContainer:"extras-episodes-container",initialize:function(){var e=this.$el.data("initial-page");
if(e){this.page=e
}else{this.page=1
}this.targetEl=this.$el.data("target_class");
this.synopsisElement=c("body").find(".video-thumbs__item__inner");
this.$filterContainer=this.$el;
this.$filteredContainer=c("."+this.targetEl+"."+this.filteredClass);
this.$loadMoreBtn=this.$filteredContainer.find("."+this.loadMoreBtn);
this.loadMoreHref="#";
this.filterHref="#";
this.url=c.trim(window.location.pathname);
this.filterShowClass="open";
this.filterLoadingClass="loading";
this.filterLoadingDisplayClass="loading-more";
this.$filters=this.$filterContainer.find(this.filters);
this.$filterSeason=this.$filterContainer.find(this.filterSeason);
this.$filterSort=this.$filterContainer.find(this.filterSort);
this.endpoint=this.$el.data("endpoint");
this.pageLimit=this.$filteredContainer.data("page");
this.totalCount=this.$filteredContainer.data("item_count");
this.initialSelected();
this.initializeChange();
this.ctaClick();
c.subscribe("resize",_.bind(this.onResize,this));
this.onResize(null);
this.linkClick();
this.backButtonDetection();
this.selectClick();
this.selectOptionClick();
this.setFilterStorageItems();
this.isFullEpisodesContainer=this.$filteredContainer[0].classList.contains(this.moreEpisodesContainer);
this.isExtrasContainer=this.$filteredContainer[0].classList.contains(this.moreExtrasContainer);
this.$showsGrid=this.$el.closest(".showsgrid");
this.$showsGridFeaturedSection=this.$showsGrid.find(".two-in-a-row");
this._updateSeeMoreButtonUrl();
this.defaultView=[];
this.currentView=[];
this.scrubFilters();
this.saveFilterView(this.defaultView);
this.insertAds();
if(this.suffixDetection()){this.filterByUrl(true)
}else{this.smartToggleFeaturedThumbs()
}},scrubFilters:function(){c(this.$filters).find("option").each(function(){var e=c(this).text().toLowerCase().trim();
e=e.replace(/ /g,"");
c(this).attr("data-suffix-sub",e)
})
},duplicateView:function(g,e){var f=0;
while(f<g.length){e[f]={name:"",key:"",val:""};
e[f].name=g[f].name;
e[f].key=g[f].key;
e[f].val=g[f].val;
f++
}},saveFilterView:function(e){var h=0;
var f,j,g="";
while(h<this.$filters.length){f=c(this.$filters[h]).attr("name");
g=c(this.$filters[h]).find('option[selected="selected"]').val();
j=c(this.$filters[h]).find('option[selected="selected"]').attr("data-suffix-sub");
e[h]={name:f,key:g,val:j};
h++
}},suffixDetection:function(){var e=this.windowHref.replace(/https?:\/\/[^\/]+/i,"");
if(location.pathname.replace(e,"").length==0){return false
}else{return true
}},deconstructUrlSuffix:function(){this.duplicateView(this.defaultView,this.currentView);
if(this.suffixDetection()){var f=this.windowHref.replace(/https?:\/\/[^\/]+/i,"");
f=location.pathname.replace(f,"");
f=f.substr(1);
f=f.split("/");
var e=0;
while(e<this.currentView.length){this.currentView[e].val=f[e];
this.currentView[e].key=this.reverseLookUpFilter(f[e],this.$filters[e]);
if(this.currentView[e].key==-1){this.currentView[e].key=this.defaultView[e].key;
this.currentView[e].val=this.defaultView[e].val
}e++
}}},reverseLookUpFilter:function(h,f){var e=-1;
var g=c(f).find('option[data-suffix-sub="'+h+'"]');
if(g.length!=0){e=g.val()
}return e
},updateFilterView:function(h,f,g){var e=this;
c.ajax({cache:true,method:"GET",url:(h+f+g+".html").replace("#",""),dataType:"html"}).done(c.proxy(e._insertFeeds,e))
},constructUrlSuffix:function(){var e=0;
var f="";
while(e<this.currentView.length){f+="/"+this.currentView[e].val;
e++
}return f
},insertAds:function(){if(d.Devices.is("mobile")){var g='<div class="ad-placeholder mobile-only clearfix js-item"></div>';
var e=".four-in-a-row .v2-related__item";
var j;
var f=7;
var h=8;
while(f<c(e).length){j=c(e+":eq("+f+")");
if(!j.hasClass("ad-adjacent")){j.after(g);
j.addClass("ad-adjacent")
}f=f+h
}var k=".four-in-a-row .ad-placeholder:empty";
var m=c(k);
if(m.length>0){var l=0;
while(l<m.length){c(k+":eq("+0+")").addClass("filled");
d.DynamicAdDelegator.drive(k+":eq("+0+")",[300,250],2);
l++
}}}},backButtonDetection:function(){var e=this;
window.onpopstate=function(f){e.handleUrlChange(f)
}
},initialSelected:function(){this.loadMore=false;
this.filterResults(false)
},handleUrlChange:function(k){var j=k.state?k.state.url:c.trim(window.location.pathname);
var g=this.$filterSeason.val();
var l=this.$filterSort.val();
var m="",f="";
this.$filteredContainer.addClass(this.filterLoadingClass);
if(this.localStorageAvailable()){var p=localStorage.getItem(c.trim(j)+"__FILTERPAGE_"+this.targetEl+"_"+this.filteredClass);
var n=localStorage.getItem(c.trim(j)+"__FILTERHTML_"+this.targetEl+"_"+this.filteredClass);
var o=localStorage.getItem(c.trim(j)+"__FILTERSTATE_"+this.targetEl+"_"+this.filteredClass);
var h=localStorage.getItem(c.trim(j)+"__FILTERSORTSTATE_"+this.targetEl+"_"+this.filteredClass);
this.filterByUrl(false);
c("."+this.targetEl+"."+this.filteredClass).html(n);
this.$filteredContainer.removeClass(this.filterLoadingClass+" "+this.filterLoadingDisplayClass)
}else{this.filterByUrl(true)
}},setFilterStorageItems:function(){var e=c.trim(window.location.pathname);
if(this.localStorageAvailable()){localStorage.setItem(e+"__FILTERPAGE_"+this.targetEl+"_"+this.filteredClass,this.page);
localStorage.setItem(e+"__FILTERHTML_"+this.targetEl+"_"+this.filteredClass,this.$filteredContainer.html());
localStorage.setItem(e+"__FILTERSTATE_"+this.targetEl+"_"+this.filteredClass,this.$filterSeason.val());
localStorage.setItem(e+"__FILTERSORTSTATE_"+this.targetEl+"_"+this.filteredClass,this.$filterSort.val())
}},initializeChange:function(){var e=this;
if(this.$filterSeason.find("option").length>0){this.defaultSeason=this.$filterSeason.find("option:first").val()
}if(this.$filterSort.find("option").length>0){this.defaultSort=this.$filterSort.find("option:first").val()
}this.$filters.on("change",function(f){e.loadMore=false;
e.filterResults(true);
e.removeFeaturedThumbs();
e.smartToggleFeaturedThumbs()
})
},smartToggleFeaturedThumbs:function(){if(this.$showsGrid.length>0){var e,f="";
if(this.$filterSeason.find("option").length>0){e=this.$filterSeason.val()
}if(this.$filterSort.find("option").length>0){f=this.$filterSort.val()
}if(this.defaultSeason==e&&this.defaultSort==f){this.$showsGridFeaturedSection.removeClass("hidden")
}else{this.$showsGridFeaturedSection.addClass("hidden")
}if(this.$showsGrid.css("visibility")=="hidden"){this.$showsGrid.css("visibility","visible")
}}},linkClick:function(){var f=c("a."+this.link);
var e=this;
f.on("click",function(g){g.preventDefault();
e.filterHref=c(this).attr("href");
if(c(this).closest("."+e.dropdownContainerClass).find(e.filterSort).length>0){e.clickedFilter="sort"
}else{e.clickedFilter="filter"
}})
},removeFeaturedThumbs:function(){if(this.$el.next("section.related."+this.featuredElement).length>0){this.$el.next("section.related."+this.featuredElement).remove()
}},onResize:function(){if(this.synopsisElement.length>0){if(c(window).outerWidth()>=768){c(".video-thumbs__item__inner").trigger("destroy.dot")
}else{c(".video-thumbs__item__inner").dotdotdot()
}}},multilineSynopsis:function(){if(c(window).outerWidth()<768){if(this.synopsisElement.length>0){c("body").find(".video-thumbs__item__inner").dotdotdot()
}}},ctaClick:function(){var e=this;
c("body").on("click","."+this.targetEl+"."+this.filteredClass+" ."+this.loadMoreBtn,function(f){f.preventDefault();
e.loadMoreHref=c(this).attr("href");
e.loadMore=true;
e.filterResults(true)
})
},selectClick:function(){var f=this;
var e=c("."+this.optionWrapper).find(".selected");
e.on("click",function(){c(this).siblings("a").toggleClass(f.filterShowClass)
});
e.mouseleave(function(){var g=c(this).siblings("a");
c("html").click(function(){g.removeClass(f.filterShowClass);
c("html").unbind("click")
})
})
},selectOptionClick:function(){var e=this;
c("."+this.option).on("click",function(){var g=c('option[value="'+c(this).data("name")+'"]');
var j=c(this).data("name");
if(c(this).parent().parent().find(g).length>0){var f=c(this).parent().parent().find("select");
f.val(j);
f.find('option[selected="selected"]').removeAttr("selected");
f.find(g).attr("selected","selected");
f.val(j);
f.trigger("change");
var h=c(this).text();
c(this).siblings(".selected").text(h);
c(this).siblings(".selected").nextAll().removeClass(e.filterShowClass)
}})
},filterByUrl:function(f){this.deconstructUrlSuffix();
this.resetFilterSelections();
this.smartToggleFeaturedThumbs();
this.filterURLupdate=true;
if(f){var e="."+this.currentView[0].key+".sort-"+this.currentView[1].key;
this.updateFilterView(this.endpoint,e,"")
}},resetFilterSelections:function(){var e=this.$filterSeason.find("option[value='"+this.currentView[0].key+"']").text();
this.$filterSeason.val(this.currentView[0].key);
this.$filterSeason.find('option[selected="selected"]').removeAttr("selected");
this.$filterSeason.find("option[value='"+this.currentView[0].key+"']").attr("selected","selected");
this.$filterSeason.closest("."+this.dropdownContainerClass).find("."+this.optionWrapper+" .selected").text(e);
this.$filterSeason.closest("."+this.dropdownContainerClass).find("."+this.optionWrapper+" a").not(".selected").removeClass(this.filterShowClass);
e=this.$filterSort.find("option[value='"+this.currentView[1].key+"']").text();
this.$filterSort.val(this.currentView[1].key);
this.$filterSort.find('option[selected="selected"]').removeAttr("selected");
this.$filterSort.find("option[value='"+this.currentView[1].key+"']").attr("selected","selected");
this.$filterSort.closest("."+this.dropdownContainerClass).find("."+this.optionWrapper+" .selected").text(e);
this.$filterSort.closest("."+this.dropdownContainerClass).find("."+this.optionWrapper+" a").not(".selected").removeClass(this.filterShowClass)
},filterResults:function(e,o){if(e){var g=".";
var n=this;
var f="";
var m="";
var h="../";
var k="../";
var l="../../";
var j="";
if(typeof String.prototype.endsWith!=="function"){String.prototype.endsWith=function(q){return this.indexOf(q,this.length-q.length)!==-1
}
}if((this.$filterSeason.length>0)&&(this.$filterSort.length>0)){this.saveFilterView(this.currentView);
m="."+this.currentView[0].key+".sort-"+this.currentView[1].key
}if(this.currentView.length>0){j=this.constructUrlSuffix()
}var p=this.endpoint;
if(n.loadMore){n.page++;
if(this.isExtrasContainer||this.isFullEpisodesContainer){f=g+"page-"+n.page+".load_more-1.page_limit-"+this.pageLimit+".fullEpisode-"+this.isFullEpisodesContainer
}else{f=g+"page-"+n.page+".load_more-1.page_limit-"+this.pageLimit
}h=l;
this.$filteredContainer.addClass(this.filterLoadingDisplayClass);
this.loadMoreURLupdate=true;
if(this.filterURLupdate){h=k;
this.filterURLupdate=false
}}else{this.$filteredContainer.addClass(this.filterLoadingClass);
this.filterURLupdate=true;
if(this.loadMoreURLupdate){h=l;
this.loadMoreURLupdate=false
}if(this.windowHref.indexOf(window.location.origin)!=-1){j=(window.location.href.endsWith("/")?h:this.windowHref)+j
}else{j=window.location.origin+this.windowHref.replace(/https?:\/\/[^\/]+/i,"")+j
}if(!(this.isExtrasContainer||this.isFullEpisodesContainer)){window.history.pushState({url:j.replace(window.location.origin,"")},"",j)
}}if((n.url!="")&&(n.url!="#")&&(n.clickedFilter!="sort")){}this.updateFilterView(p,m,f)
}},_isValidResponse:function(f){var e=c(c.parseHTML("<div>"+f+"</div>"));
if(e.find("."+this.targetEl+"."+this.filteredClass+" ."+this.filterItem).length>0){return true
}return false
},_updateSeeMoreButtonUrl:function(){},_insertFeeds:function(j){if(j&&j.trim()&&this._isValidResponse(j)){var h=true;
var m=c("<html/>").html(j);
var f="";
m=c("<div/>").html(m.find("."+this.targetEl+"."+this.filteredClass).html());
this.$filteredContainer.addClass(this.filteredForceDisplayClass);
m.find("."+this.spinnerClass).remove();
if(m.find("."+this.loadMoreBtn).length===0){h=false
}if(m.find("."+this.loadMoreBtn).length>0){this.loadMoreHref=m.find("."+this.loadMoreBtn).attr("href");
f=m.find("."+this.loadMoreBtn)[0].outerHTML
}m.find("."+this.loadMoreBtn).remove();
j=m.find("."+this.filterItem).parent().html();
if(this.loadMore){if(this.$el.next().hasClass("three-in-a-row")){var e=m.children().parent().html();
m.find("."+this.filterItem).wrapAll('<div class="v2-related__item_wrapping clearfix"/>');
var g=this.$filteredContainer.find("."+this.loadMoreBtn);
if(this.$filteredContainer.find("."+this.spinnerClass+" + ."+this.loadMoreBtn).length>0){g=this.$filteredContainer.find("."+this.spinnerClass)
}g.before(e).next().delay(50).queue(function(){c(this).addClass("open").dequeue()
})
}else{m.find("."+this.filterItem).wrapAll('<div class="v2-related__item_wrapping clearfix"/>');
j=m.find("."+this.filterItem).parent().parent().html();
this.$filteredContainer.find("."+this.filterItem+":last").after(j).next().delay(50).queue(function(){c(this).addClass("open").dequeue()
});
var l=this;
var n=setTimeout(function(){l.$filteredContainer.find("."+l.filterItem+":last").unwrap();
clearTimeout(n)
},300)
}}else{this.page=1;
this.$filteredContainer.find("."+this.filterItem+" , input + .ads--square,  input").remove();
this.$filteredContainer.find("."+this.spinnerClass).parent().prepend(j)
}this.$filteredContainer.removeClass(this.filterLoadingClass+" "+this.filterLoadingDisplayClass);
this.multilineSynopsis();
if((m.find("."+this.filterItem).length==0)||(!h)){this.$filteredContainer.find("."+this.loadMoreBtn).remove()
}else{if((this.$filteredContainer.find("."+this.loadMoreBtn).length==0)&&(f!="")&&(h)){this.$filteredContainer.find("."+this.loadMoreBtn);
this.$filteredContainer.append(f)
}}if((this.$filteredContainer.find("."+this.loadMoreBtn).length>0)&&(this.loadMoreHref!="#")){this.$filteredContainer.find("."+this.loadMoreBtn).attr("href",this.loadMoreHref)
}if(c("html").hasClass("ms-browser")){window.picturefill()
}var k=this;
if(this.loadMore){setTimeout(function(){k.setFilterStorageItems()
},400)
}else{k.setFilterStorageItems()
}}else{this.$filteredContainer.find("."+this.loadMoreBtn).remove();
this.$filteredContainer.removeClass(this.filterLoadingClass+" "+this.filterLoadingDisplayClass)
}this.insertAds()
},setNewURL:function(){},localStorageAvailable:function(){var g="test";
try{localStorage.setItem(g,g);
localStorage.removeItem(g);
return true
}catch(f){return false
}},_handlePushState:function(){},updateCanonical:function(e){},updatePageTitle:function(){},updateHeadline:function(){},updateResults:function(e){},restoreResults:function(){}});
d.registerComponent("filter",a)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({initialize:function(){this.$video=this.$("video");
if(this.$video.length){if(window.Modernizr.touch){this.$video.remove()
}else{this.$video.one("timeupdate",_.bind(this.playVideo,this))
}}},playVideo:function(){this.$video.removeClass("hero-full-width__video--hidden")
}});
d.registerComponent("hero-full-width",a)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({toggleClass:"active",events:{"click a.on-tonight__click":"onTonightClicked"},initialize:function(g){var h=c(".on-tonight").data("url");
c.get(h,function(j){c(".on-tonight").html(j);
var e=c("li.on-tonight__list-item").map(function(){return c(this).data("start-time")
}).get();
f(e);
setInterval(function(){f(e)
},50000)
});
function f(e){var j=new Date();
var l=j.getTime();
var o=e.length;
var n=l;
var m=e.findIndex(function(r,q){return r>n
});
var k=c("li.on-tonight__list-item").last().data("end-time");
if(m<0&&n>e[o-1]&&n<k){m=o
}else{if(n>k){c("li.on-tonight__list-item:nth-of-type("+o+")").addClass("finished").removeClass("active live")
}}var p=m-1;
c("li.on-tonight__list-item:nth-of-type("+p+")").addClass("finished").removeClass("active live");
c("li.on-tonight__list-item:nth-of-type("+m+")").addClass("active live");
c("li.on-tonight__list-item a.on-tonight__list-item__live").hide();
c(".on-tonight__list-item:nth-of-type("+m+")").find("a.on-tonight__list-item__live").css("display","inline-block")
}},onTonightClicked:function(f){f.preventDefault();
if(this.$el.hasClass(this.toggleClass)){this.$el.removeClass(this.toggleClass)
}else{this.$el.addClass(this.toggleClass)
}}});
d.registerComponent("on-tonight",a)
})(jQuery,Backbone,App);
(function(d,c,e){var a=e.Devices;
var b=c.View.extend({initialize:function(){this.synopsisElement=this.$el.find(".video-thumbs__item__inner");
this.synopsisElementDESC=this.synopsisElement.find(".video-thumbs__item__copy");
this.multilineSynopsis();
d.subscribe("resize",_.bind(this.onResize,this));
this.onResize(null)
},multilineSynopsis:function(){if(d(window).outerWidth()<768){this.synopsisElement.dotdotdot()
}},onResize:function(){if(d(window).outerWidth()>=768){this.synopsisElement.trigger("destroy.dot")
}else{this.synopsisElement.dotdotdot()
}}});
e.registerComponent("video-thumbs__container",b)
})(jQuery,Backbone,App);
(function(c,b,d){var a=b.View.extend({filterContainer:"filter-video",filterVideoContainer:"filter-video__container",filterLoadingClass:"filter-video__container--loading",filterVideoItem:"filter-video__item",filters:"select",spinnerClass:"spinner-v2",filterSeason:"select[name=seasonFilter]",filterSort:"select[name=seasonSort]",initialize:function(){this.$filterContainer=this.$el;
this.$filterVideoContainer=c("."+this.filterVideoContainer);
this.filterLoadingClass=this.filterLoadingClass;
this.$filters=this.$filterContainer.find(this.filters);
this.$filterSeason=this.$filterContainer.find(this.filterSeason);
this.$filterSort=this.$filterContainer.find(this.filterSort);
this.endpoint=this.$el.data("endpoint");
this.initialSelected();
this.initializeChange()
},initialSelected:function(){this.filterResults(false)
},initializeChange:function(){var e=this;
this.$filters.on("change",function(f){e.filterResults(true)
})
},filterResults:function(g){if(g){var f=this;
var e=this.$filterSeason.val();
var h=this.$filterSort.val();
var j=this.endpoint;
this.$filterVideoContainer.addClass(this.filterLoadingClass);
c.ajax({cache:false,method:"GET",url:j+"?season="+e+"&sort="+h,dataType:"html"}).done(c.proxy(f._insertFeeds,f))
}},_isValidResponse:function(f){var e=c("<div/>").html(f).contents();
if(e.find(".filter-video__item").length>0){return true
}return false
},_insertFeeds:function(f){if(f&&f.trim()&&this._isValidResponse(f)){var e=c("<div/>").html(f);
e.find("."+this.spinnerClass).remove();
f=e.find("."+this.filterVideoContainer).html();
this.$filterVideoContainer.find("."+this.filterVideoItem).remove();
this.$filterVideoContainer.prepend(f);
this.$filterVideoContainer.removeClass(this.filterLoadingClass)
}else{console.log("Something went wrong...")
}}});
d.registerComponent("filter-video",a)
})(jQuery,Backbone,App);
(function(f,c){var g={};
var a={"show video player":{".hero--with-sidebar .hero__up-next":"up next"},"up next videos":{".extras-episodes-container .video-thumbs__link":"@closest: .video-thumbs__item; @prefix: extras; @mutable",".more-episodes-container .video-thumbs__link":"@closest: .video-thumbs__item; @prefix: episodes; @mutable",".extras-episodes-container .js-loadMoreButton":"cta; @prefix: extras",".more-episodes-container .js-loadMoreButton":"cta; @prefix: episodes"},"extras grid":{".extrasgrid .video-thumbs__link":"@closest: .video-thumbs__item; @mutable"},"featured shows":{".v2-related--shows .v2-related__item":"@self; @prefix: shows; @mutable",".v2-related--originals .v2-related__item":"@self; @prefix: digital; @mutable",".v2-related--shows .js-loadMoreButton":"cta; @prefix: shows",".v2-related--originals .js-loadMoreButton":"cta; @prefix: digital"},"show hero":{".hero-full-width__link":"main area; @exclude: .hero-full-width__thumbs",".hero-full-width__inner .hero-full-width__thumbs__link":"@closest: .hero-full-width__thumbs__item; @prefix: extra",".hero-full-width__cta":"main area"},"episode list":{".showlandingvideos .filter-video__link":"@closest: .filter-video__item; @mutable"},"all shows grid":{".showsgrid .v2-related__item":"@self; @mutable",".showsgrid .js-loadMoreButton":"cta"},"":{".on-tonight .on-tonight__schedule":"full schedule; @mutable",".on-tonight .on-tonight__list-item__live":"live now; @mutable"}};
function b(){var l;
for(l in a){if(!a.hasOwnProperty(l)){continue
}j(a[l],l)
}}function j(m,l){var n;
for(n in m){if(!m.hasOwnProperty(n)){continue
}h(l,n)
}}function h(m,o){var l=e(a[m][o]);
var p=l.mutable;
var n;
if(p){n=o.match(/^(\S+)(\s+.+\s+|\s+)(\S+)$/);
c(n[1]).on("click",n[3],d.bind(f,m,o,l))
}else{c(o).click(d.bind(f,m,o,l))
}}function d(n,p,m,q){var o=q.currentTarget;
var l=c(q.target);
if(m.exclude&&(l.is(m.exclude)||l.closest(m.exclude).length)){return
}k(o,n,p,m)
}function k(p,l,n,q){var u=c(p);
var v;
var m;
var o=c(n.match(/^\S+/)[0]);
var r={element:p,module:l};
if(q.self){v=n.match(/\S+$/)[0];
r.position=o.find(v).filter(":visible").index(u)+1
}else{if(q.closest){v=q.closest;
m=u.closest(v);
r.position=o.find(v).filter(":visible").index(m)+1
}else{r.position=q["static"]
}}if(q.prefix){r.position=q.prefix+":"+r.position
}g.trackClick(r)
}function e(l){var n;
var p=l.split("; ");
var m;
var o={exclude:null,closest:null,self:null,"static":null,prefix:null,mutable:null};
for(n=0;
n<p.length;
n++){if(p[n].charAt(0)!=="@"){o["static"]=p[n]
}else{if(p[n]==="@mutable"){o.mutable=true
}else{if(m=p[n].match(/^@(closest|self$|exclude|prefix)(: (.*))?$/)){o[m[1]]=m[3]||true
}}}}return o
}g.trackClick=function(u){var w=f.s;
var o=u.element;
var v=w.prop4;
var m=u.module;
var p=u.position;
var r=w.prop7;
var q="event4";
var l=o.pathname;
var n=[];
if(g.isExternal(o)){l=o.href
}else{if(l==="/"){l="home"
}else{if(l=l.match(/^\/(.*)$/)){l=l[1];
l=l.replace(/\.html$/,"");
l=l.replace(/\//g,":")
}}}v&&n.push(v);
m&&n.push(m);
p&&n.push(p);
w.linkTrackVars="events,prop57,eVar57,prop58,eVar58,prop59,eVar59";
w.linkTrackEvents=q;
w.prop57=w.eVar57=n.join(":");
w.prop58=w.eVar58=r;
w.prop59=w.eVar59=l;
w.events=q;
w.tl(o.href?o:true,"o",l||"");
if(g.isExternal(o)){g.trackExit(o)
}};
g.isExternal=function(m){var l=!!(m.hostname&&(m.hostname!==location.hostname));
return l
};
g.trackExit=function(l){var m=f.s;
m.linkTrackVars="prop19,eVar19,events";
m.linkTrackEvents="event14";
m.prop19=m.eVar19=l.href;
m.events="event14";
m.tl(l,"e","exit to "+l.href)
};
b()
})(window,jQuery);
(function(d,b,c){var a={_$body:d("body"),_$popup:null,_embedCode:"",_isMounted:false};
a._getCode=function(){var f=this._getIframeSrc();
var e="&lt;div data-freeform-responsive=&quot;true&quot;&gt;&lt;iframe webkitallowfullscreen=&quot;true&quot; mozallowfullscreen=&quot;true&quot; allowfullscreen=&quot;true&quot; share=&quot;BET&quot; src=&quot;"+f+"&quot; width=&quot;100%&quot; height=&quot;535&quot; frameborder=&quot;0&quot;&gt;&lt;/iframe&gt;&lt;script type=&quot;text/javascript&quot; src=&quot;//www.bet.com/etc/designs/betcom/js/share.js&quot;&gt;&lt;/script&gt;&lt;/div&gt;";
return e
};
a._getIframeSrc=function(){var e=document.location.protocol+"//"+document.location.host+document.location.pathname;
e=e.replace(/\.html$/,"");
e+=".share.responsive-true.html";
return e
};
a.show=function(){this._$body.addClass("disable-scroll");
if(!this._isMounted){this._getPopup().appendTo(this._$body);
this._isMounted=true;
return
}this._getPopup().show()
};
a._hide=(function(){this._$body.removeClass("disable-scroll");
this._getPopup().hide()
}).bind(a);
a._bindEvents=function(){new c(".layer_embedModal-button");
this._$popup.find(".modal__close").click(this._hide);
this._$popup.click(this._handleOverlayClick)
};
a._handleOverlayClick=(function(e){if(!d(e.target).find(".modal__container").length){return
}this._hide()
}).bind(a);
a._getPopup=function(){if(this._$popup){return this._$popup
}this._$popup=d('<div class="modal_launcher open loaded layer_embedModal"><div class="reusable_modal open"><div class="modal_box modal__wrapper"><div class="modal__container"><button class="modal__close icon-close"></button><div class="modal__content"><section class="initial-content heightCheck"><h1 class="layer_embedModal-title">Copy and paste the embed code below:</h1><div class="layer_embedModal-code" id="layer-embed-modal-code-1">'+this._getCode()+'</div><button class="layer_embedModal-button" data-clipboard-action="copy" data-clipboard-target="#layer-embed-modal-code-1">Copy Embed Code</button></section></div></div></div></div></div>');
this._bindEvents();
return this._$popup
};
b.EmbedModal=a
})(jQuery,window.App,window.Clipboard);
(function(f,k,e){if(!window.doesPageContainInfluencer){return
}var d=window.influencerConfig||{};
d.pageContentJson=d.pageContentJson||"/content/dam/betcom/jsons/influencer/influencer-grid-page-content.json";
d.nodeSettingsJson=d.nodeSettingsJson||"/content/dam/betcom/jsons/influencer/influencer-grid-node-setting.json";
d.backgroundTile=d.backgroundTile||"/content/dam/betcom/music/tupac-hub/background_tile.jpg";
d.exploreArrow=d.exploreArrow||"/content/dam/betcom/music/tupac-hub/arrow_down.png";
var h=e.Devices;
var c=0;
var l=false;
var j=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(m){window.setTimeout(m,1000/60)
}
})();
function g(m,n){this.x=m||0;
this.y=n||0
}g.prototype={add:function(m){this.x+=m.x;
this.y+=m.y;
return this
},subtract:function(m){this.x-=m.x;
this.y-=m.y;
return this
},multiply:function(m){if(m instanceof g){this.x*=m.x;
this.y*=m.y
}else{this.x*=m;
this.y*=m
}return this
},divide:function(m){if(m instanceof g){if(m.x!==0){this.x/=m.x
}if(m.y!==0){this.y/=m.y
}}else{if(m!==0){this.x/=m;
this.y/=m
}}return this
},equals:function(m){return this.x===m.x&&this.y===m.y
},length:function(){return Math.sqrt(this.dot(this))
},clone:function(){return new g(this.x,this.y)
},set:function(m,n){this.x=m;
this.y=n;
return this
},dist:function(n){var m=this.x-n.x;
var o=this.y-n.y;
return Math.sqrt(m*m+o*o)
}};
g.add=function(n,m){return new g(n.x+m.x,n.y+m.y)
};
g.subtract=function(n,m){return new g(n.x-m.x,n.y-m.y)
};
var a=function(m){var o=this;
var n=m.ctx;
o.pixelScale=m.pixelScale;
o.id=m.id;
o.selectedSize=m.selectedSize;
o.ambientCount=0;
o.ambMovement=new g(0,0);
o.rippleScale=1;
o.rippleCount=0;
o.gradientDir=(Math.random()>0.5)?1:-1;
o.backgroundRenderOffset=2;
o.init=function(){for(var q in m){if(m.hasOwnProperty(q)){o[q]=m[q]
}}for(var p in m.setting){if(m.setting.hasOwnProperty(p)){o[p]=m.setting[p]
}}if(!o.prerenderOnly){if(o.goalSize){o.size=o.goalSize
}if(o.goalPos){o.originalPos=o.goalPos
}o.size/=o.pixelScale;
o.originalPos.divide(o.pixelScale);
o.ambientRadius.divide(o.pixelScale);
o.goalSize=o.goalSize||o.size;
o.drawSize=o.size*o.scale;
o.displayPos=o.originalPos.clone();
o.drawPos=o.originalPos.clone();
o.goalPos=o.goalPos||o.originalPos.clone()
}o.cachedHeadshot=o.createCroppedHeadshot(o.size);
o.cachedGrayHeadshot=o.createGrayHeadshot(o.size);
o.cachedNodeBg=o.createNodeBackground(o.size-o.backgroundRenderOffset*2);
o.cachedFullNode=o.createFullNode(o.fullNodeSize*o.ringScale,o.fullNodeSize)
};
o.createSquareCanvas=function(p){var q={};
q.canvas=document.createElement("canvas");
q.ctx=q.canvas.getContext("2d");
q.canvas.width=p;
q.canvas.height=p;
return q
};
o.createNodeBackground=function(r){var q=o.createSquareCanvas(r);
var u=q.ctx.createLinearGradient(0,r,r,0);
u.addColorStop(0.3,o.bgGradientColor1,0);
u.addColorStop(0.7,o.bgGradientColor2,1);
var p=r*0.5;
q.ctx.beginPath();
q.ctx.fillStyle=u;
q.ctx.arc(p,p,p,0,Math.PI*2);
q.ctx.fill();
q.ctx.closePath();
if(o.selectedSize!=="small"){q.ctx.globalCompositeOperation="multiply";
q.ctx.drawImage(o.cachedGrayHeadshot,p-r*0.7,p-r*0.55,r,r)
}q.ctx.globalCompositeOperation="destination-in";
q.ctx.beginPath();
q.ctx.fillStyle="black";
q.ctx.arc(p,p,p,0,Math.PI*2);
q.ctx.fill();
q.ctx.closePath();
return q.canvas
};
o.createCroppedHeadshot=function(q){var r=o.createSquareCanvas(q);
var p=q*0.5;
r.ctx.drawImage(o.image,0,0,q,q);
r.ctx.globalCompositeOperation="destination-in";
r.ctx.beginPath();
r.ctx.fillStyle="rgba( 0, 0, 0, 1 )";
r.ctx.arc(p,p,p,0,Math.PI*2);
r.ctx.fill();
r.ctx.closePath();
return r.canvas
};
o.createGrayHeadshot=function(r){var p=o.createSquareCanvas(r);
p.ctx.globalAlpha=0.7;
p.ctx.drawImage(o.cachedHeadshot,0,0,r,r);
var v=p.ctx.getImageData(0,0,r,r);
var x=v.data;
for(var q=0,w=x.length;
q<w;
q+=4){var u=x[q]*0.3+x[q+1]*0.59+x[q+2]*0.11;
x[q]=u;
x[q+1]=u;
x[q+2]=u
}p.ctx.putImageData(v,0,0);
return p.canvas
};
o.createFullNode=function(r,A){var p=o.createSquareCanvas(r);
var C=r*0.5;
var B=C;
var w=new g(C-A*0.5,B-A*0.5);
var D=p.ctx.createLinearGradient(0,r,r,0);
D.addColorStop(0.3,o.gradientColor1,0);
D.addColorStop(0.7,o.gradientColor2,1);
p.ctx.drawImage(o.cachedNodeBg,w.x,w.y,A,A);
var v=A*0.5;
var z=v*0.2;
p.ctx.beginPath();
p.ctx.lineWidth=z;
p.ctx.strokeStyle=D;
p.ctx.arc(C,B,v-z*0.5,0,Math.PI*2);
p.ctx.stroke();
p.ctx.closePath();
p.ctx.drawImage(o.cachedHeadshot,w.x,w.y,A,A);
var u=v*o.ringWidthScale;
var q=v*o.ringScale-u;
p.ctx.beginPath();
p.ctx.lineWidth=u;
p.ctx.strokeStyle=D;
p.ctx.arc(C,B,q,0,Math.PI*2);
p.ctx.stroke();
p.ctx.closePath();
return p.canvas
};
o.update=function(){if(o.ambientMovementOn){var p=Math.sin(o.ambientCount*o.ambientSpeed[0]+o.ambientAngle[0])*o.ambientRadius.x;
var q=Math.cos(o.ambientCount*o.ambientSpeed[1]+o.ambientAngle[1])*o.ambientRadius.y;
o.ambMovement.set(p,q);
o.ambientCount++
}if(o.scale<1&&c>o.scaleInDelay){o.scale=o.easeIn({val:o.scale,goal:1,amt:0.12})
}if(!o.displayPos.equals(o.goalPos)&&!l){o.displayPos=o.easeIn({val:o.displayPos,goal:o.goalPos,amt:0.1,cb:o.goalPosCb})
}if(o.size!==o.goalSize){o.size=o.easeIn({val:o.size,goal:o.goalSize,amt:0.1})
}if(o.rolloverState){if(o.rolloverAnimVal<1){o.rolloverAnimVal=o.easeIn({val:o.rolloverAnimVal,goal:1,amt:0.1})
}}else{if(o.rolloverAnimVal>0){o.rolloverAnimVal=o.easeIn({val:o.rolloverAnimVal,goal:0,amt:0.1})
}}o.drawSize=o.size*o.scale;
o.drawPos=g.add(o.displayPos,o.ambMovement)
};
o.draw=function(q){if(o.drawSize===0){return
}var G=q||n;
var F=o.drawSize;
var D=o.drawPos.x;
var C=o.drawPos.y;
var v=F*0.5;
var r=o.ambientCount*0.008*o.gradientDir;
var K=v*Math.sin(r);
var J=v*Math.cos(r);
var z=D+K;
var u=C-J;
var M=D-K;
var L=C+J;
var p=new g(D-F*0.5,C-F*0.5);
var A=G.createLinearGradient(z,u,M,L);
A.addColorStop(0.3,o.gradientColor1,0);
A.addColorStop(0.7,o.gradientColor2,1);
var B=F-o.backgroundRenderOffset*2;
G.drawImage(o.cachedNodeBg,p.x+o.backgroundRenderOffset,p.y+o.backgroundRenderOffset*2,B,B);
var I=v*0.2;
G.beginPath();
G.lineWidth=I;
G.strokeStyle=A;
G.arc(D,C,v-I*0.5,0,Math.PI*2);
G.stroke();
G.closePath();
G.drawImage(o.cachedHeadshot,p.x,p.y,F,F);
var H=v*o.ringWidthScale;
var E=v*o.ringScale-H;
G.beginPath();
G.lineWidth=H;
G.strokeStyle=A;
G.arc(D,C,E,0,Math.PI*2);
G.stroke();
G.closePath();
if(o.rolloverState){o.scale=1+Math.sin(o.rippleCount*0.04)*0.05;
if(o.rippleScale<1.5){o.rippleScale+=0.008
}else{o.rippleScale=1
}var N=v*o.ringScale*o.rippleScale-H;
var w=Math.max(1.45-o.rippleScale,0)*2;
G.save();
G.globalAlpha=w*w;
G.beginPath();
G.lineWidth=H;
G.strokeStyle=A;
G.arc(D,C,N,0,Math.PI*2);
G.stroke();
G.closePath();
G.restore();
o.rippleCount++
}};
o.resizeUpdate=function(q,p){o.goalSize=q/o.pixelScale;
o.goalPos=p.clone();
o.goalPos.divide(o.pixelScale)
};
o.inRange=function(q,p,r){var u;
if(q instanceof g){u=q.dist(p)
}else{u=Math.abs(q-p)
}return(u<=r)
};
o.rollover=function(){o.rolloverState=true;
o.ambientMovementOn=false
};
o.rollout=function(){o.rolloverState=false;
o.ambientMovementOn=true;
o.rippleCount=0
};
o.easeIn=function(q){var p;
if(q.val instanceof g){var r=g.subtract(q.goal,q.val);
p=q.val.add(r.multiply(q.amt))
}else{p=q.val+(q.goal-q.val)*q.amt
}if(o.inRange(q.val,q.goal,0.001)){if(q.cb){q.cb()
}p=q.goal
}return p
}
};
var b=k.View.extend({$canvas:null,ambientMovementOn:true,pixelScale:(window.devicePixelRatio>=2)?0.5:1,nodes:[],schduledFramecount:-100,scheduledNodes:[],focusedNode:null,fullNodeSize:106,canvasWidth:800,canvasHeight:700,canvasOffset:{x:0,y:0},headshotImagePath:"",tooltipLeft:0,scrollTop:0,ringScale:1.1,ringWidthScale:0.03,breakpointSizes:["small","medium","large","xlarge"],breakpoints:{},currentBreakpointSetting:{},currentBreakpointSize:"",focusedStatePosition:new g(400,300),nodeSetting:{},dragAndDropMode:false,lastHoveredNode:null,canvasScale:1,events:{"click .influencer-grid-main__explore":"scrollDown","mousemove .influencer-grid-main__node-canvas":"onCanvasMouseMove","click .influencer-grid-main__node-canvas":"onCanvasMouseClick","click .influencer-grid-main__dark-layer":"exitFocusState"},initialize:function(){var q=this;
this.$win=f(window);
this.$body=f("body");
this.$el=f(this.el);
this.$side=f(".influencer-grid-side");
this.$connectionWrapper=f(".influencer-grid-side__connection-wrapper");
this.$nodeList=this.$(".influencer-grid-main__list");
this.$canvasGroup=this.$(".node-canvas");
this.$nodeCanvas=this.$(".influencer-grid-main__node-canvas");
this.$focusedCanvas=this.$(".influencer-grid-main__focus-node-canvas");
this.$tooltip=this.$(".influencer-grid-main__tooltip");
this.$tooltipContent=this.$(".tooltip-content");
this.$socialList=this.$(".influencer-grid-main__social-list");
this.$explore=this.$(".influencer-grid-main__explore");
this.$socialLinks=this.$socialList.find("li");
this.ctx=this.$nodeCanvas[0].getContext("2d");
this.focusedCtx=this.$focusedCanvas[0].getContext("2d");
this.$ads=f(".header__ads");
this.$headerTop=f(".header__nav");
this.$headerTopFull=f(".header__nav__wrap");
this.hasBrandedBanner=f(".header").hasClass("header_has_sub");
this.tempScrollTop=0;
this.$background=f(".background-graphic__mask").add(".page");
this.fetchSetting(this.fetchData);
this.setCanvasSmoothing(true);
this.$el.on("touchmove",function(r){q.preventTouchScroll(r)
});
f(".header__nav__menu__toggle").on("click",function(){q.exitFocusState()
});
this.isSafari=this.detectSafari();
if(this.isSafari){var p=f('<div class="influencer-dark-layer-safari-fix" />');
f("footer.footer").append(p);
var o=f(".enhanced-container-90.section");
if(o){var n=f('<div class="influencer-dark-layer-safari-fix" />');
n.insertAfter(o)
}}if(l){var m=this;
f(document).keydown(function(r){if(r.keyCode===68){m.dragAndDropMode=true
}});
f(document).keyup(function(r){m.dragAndDropMode=false
})
}},preventTouchScroll:function(m){if(this.focusedNode){m.preventDefault()
}},detectSafari:function(){var m=navigator.userAgent.toLowerCase();
if(m.indexOf("safari")>-1&&m.indexOf("chrome")<0){return true
}return false
},setDynamicContent:function(){var o=this.data;
var q="influencer-grid-main";
this.$(".desktop-bg").css({"background-image":"url("+o.heroImageDesktop+")"});
this.$(".mobile-bg").css({"background-image":"url("+o.heroImageMobile+")"});
var n=this.$("h1");
n.text(o.pageTitle);
n.append('<img src="'+o.pageTitleImage+'" />');
var p=this.$("."+q+"__sponsor");
if(o.sponsor.display){p.find(" img").attr("src",o.sponsor.image);
p.find(" a").attr("href",o.sponsor.url)
}else{p.empty()
}var m=this.$("."+q+"__desc");
m.html(o.pageDescription);
m.append('<span class="'+q+'__credit"> '+o.authorCredit+"</span>");
this.$socialList.attr("data-social-title",o.socialShare.title);
this.$socialList.attr("data-social-url",o.socialShare.url);
this.initSocial();
this.$explore.children("span").first().css("backgroundImage",'url("'+d.exploreArrow+'")');
this.$background.attr("style",function(u,r){var w='background-image: url("'+d.backgroundTile+'") !important';
var v;
if(r){v=r+"; "+w
}else{v=w
}return v
})
},fetchSetting:function(m){var n=this;
f.ajax({url:b.settingAPI,method:"GET"}).done(function(o){n.setting=o;
m.apply(n)
})
},fetchData:function(){var m=this;
f.ajax({url:b.API,method:"GET"}).done(function(n){m.data=n;
m.afterDataFetched()
})
},afterDataFetched:function(){f.subscribe("resize",_.bind(this.onResizeDefer,this));
f.subscribe("scroll",_.bind(this.onScroll,this));
this.setDynamicContent();
this.$el.addClass("animate-in");
this.headshotImagePath=this.data.headshotImagePath;
this.onScroll();
this.onResize(null);
this.preloadNodeImages(this.data.artistList,this.imagesOnloaded);
this.preloadFeaturedArtistImage(this.data.featuredArtist,this.createFeaturedArtistNode)
},setCanvasSmoothing:function(m){this.ctx.mozImageSmoothingEnabled=m;
this.ctx.webkitImageSmoothingEnabled=m;
this.ctx.msImageSmoothingEnabled=m;
this.ctx.imageSmoothingEnabled=m
},getSidebarInstance:function(){return e.getComponent(this.$side)
},preloadFeaturedArtistImage:function(p,m){var n=this;
var q=this.headshotImagePath+p.headshotImageName;
var o=new Image();
o.crossOrigin="Anonymous";
o.onload=function(){p.image=o;
m.apply(n)
};
o.src=q
},preloadNodeImages:function(q,m){var n=this;
var p=this.headshotImagePath;
var o=0;
q.forEach(function(u){var v=p+u.headshotImageName;
var r=new Image();
u.image=r;
r.crossOrigin="Anonymous";
r.onload=function(){o++;
if(o===q.length){m.apply(n)
}};
r.src=v
})
},imagesOnloaded:function(){this.createNodes();
this.startRendering()
},createFeaturedArtistNode:function(){var m={size:216,fullNodeSize:216,image:this.data.featuredArtist.image,ringScale:this.ringScale,ringWidthScale:this.ringWidthScale,pixelScale:this.pixelScale,gradientColor1:"#d1be2a",gradientColor2:"#ca976e",bgGradientColor1:"#6b2163",bgGradientColor2:"#7e4da6",prerenderOnly:true};
this.featuredNode=new a(m);
this.featuredNode.init();
this.getSidebarInstance().updateFeaturedNode(this.featuredNode.cachedFullNode)
},createNodes:function(){var y=this;
var p=this.data.artistList;
var z=this.data.connectionLines;
var v=this.getAmbientBaseSpeed();
var r=this.currentBreakpointSetting.ambientRadius;
var q=0;
while(q<p.length){var x=p[q];
var o=z[x.connectionLineName];
var m=x.name;
var u=this.currentBreakpointSetting.positions[x.id];
if(!u){u=new g(200,200)
}var w={ctx:y.ctx,id:x.id,artist:x,name:m.toUpperCase(),connectionLine:o,selectedSize:x.size,setting:y.setting.nodeColor[x.size],size:y.currentBreakpointSetting.nodeSize[x.size],originalPos:new g(u.x,u.y),scale:0,fullNodeSize:y.fullNodeSize,scaleInDelay:5,image:x.image,ambientMovementOn:y.ambientMovementOn,ambientRadius:new g(r.x,r.y),ambientAngle:[0,Math.random()*2],ambientSpeed:[Math.random()*0.005+v,Math.random()*0.005+v],ringScale:y.ringScale,ringWidthScale:y.ringWidthScale,pixelScale:y.pixelScale,prerenderOnly:false};
var n=new a(w);
n.sortVal=u.y;
y.scheduledNodes.push(n);
q++
}y.scheduledNodes.sort(function(B,A){return B.sortVal-A.sortVal
});
y.schduledFramecount=c+10
},startRendering:function(){var n=this;
(function m(){j(m);
n.render()
})()
},setAllAmbientMovement:function(n){var m=0;
while(m<this.nodes.length){this.nodes[m].ambientMovementOn=n;
m++
}},render:function(){if(this.scheduledNodes.length>0){var n=c-this.schduledFramecount;
if(n%20===0&&n>0){var m=this.scheduledNodes[0];
m.init();
if(!m.prerenderOnly){this.nodes.push(m)
}this.scheduledNodes.splice(0,1)
}}var o=180;
if(c<1500){o=60
}if(c%o===0){this.updateForNodeAction()
}if(this.focusedNode){this.renderFocusedNode()
}else{this.renderNodes()
}c++
},renderNodes:function(){this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight);
var m=0;
while(m<this.nodes.length){var n=this.nodes[m];
n.update();
n.draw();
m++
}},renderFocusedNode:function(){this.focusedCtx.clearRect(0,0,this.canvasWidth,this.canvasHeight);
if(this.focusedNode){this.focusedNode.update();
this.focusedNode.draw(this.focusedCtx)
}},initSocial:function(m){var o=this.$socialList.attr("data-social-title");
var n=this.$socialList.attr("data-social-url");
e.InitSocialLinks(this.$socialLinks,o,n,m)
},updateTooltipText:function(m){this.$tooltipContent.text(m)
},updateTooltipPos:function(m){this.$tooltip.css({top:m.y,left:m.x})
},onCanvasMouseMove:function(u){if(this.focusedNode||window.Modernizr.touch){return
}var x=this;
var w=x.getRelativeCanvasPos(u.clientX,u.clientY);
var p=w.clone();
p.x+=this.tooltipLeft;
x.updateTooltipPos(p);
if(x.dragAndDropMode&&x.lastHoveredNode){x.lastHoveredNode.originalPos=w.clone();
x.lastHoveredNode.displayPos=w.clone();
x.lastHoveredNode.drawPos=w.clone();
return
}var q=0;
var m=false;
while(q<x.nodes.length){var n=x.nodes[q];
var r=n.size*0.5*x.pixelScale;
var o=n.drawPos.clone();
o.multiply(x.pixelScale);
var v=w.dist(o);
if(v<r){n.rollover();
x.lastHoveredNode=n;
x.nodes.splice(q,1);
x.nodes.push(x.lastHoveredNode);
x.updateTooltipText(n.name);
m=true
}else{n.rollout()
}q++
}if(m){x.$el.addClass("node-hovered")
}else{x.$el.removeClass("node-hovered")
}},onCanvasMouseClick:function(p){if(l){this.outputDebugPositions();
return
}var m=this;
if(m.focusedNode){return
}var u=m.getRelativeCanvasPos(p.clientX,p.clientY);
var n=0;
while(n<m.nodes.length){var o=m.nodes[n];
var r=o.drawPos.clone();
r.multiply(m.pixelScale);
var q=u.dist(r);
if(q<o.size*0.5*m.pixelScale){o.rollout();
m.updateTooltipText(o.name);
m.enterFocusState(o,n);
break
}n++
}},setSidebarPosition:function(){var q=this;
var o=this.$ads.outerHeight();
var n=65;
var m=0;
this.tempScrollTop=this.$win.scrollTop();
var p=setTimeout(function(){var x=q.$headerTop.offset().top;
var r=q.$headerTop.height();
if(r==0){r==50
}var v=q.$win.scrollTop();
var w=0;
if(q.hasBrandedBanner){x=q.$headerTopFull.offset().top;
w=x-v+q.$headerTopFull.height()
}else{w=x-v+n
}if(window.innerWidth<=1024){q.$ads.css("display","none");
if(o!==0){w=w-o-15
}}if(q.$headerTop.hasClass("header__nav_fixed")){if(q.hasBrandedBanner){var y=0;
if(!h.isUserAgent("desktop")){f("body").addClass("suppress-branded-banner")
}if(h.is("mobile")){y=f(".header__nav").height()
}else{if(h.is("tablet")){y=f(".header__nav").height()+f(".header__nav__wrap").offset().top
}else{y=f(".header__nav_sub").height();
if(!h.isUserAgent("desktop")){y=f(".header__nav").height()+f(".header__nav__wrap").offset().top
}else{if(q.$headerTop.hasClass("header__nav_scroll_up")){y+=f(".header__nav_sub").position().top
}}}}q.$side.css("top",y)
}else{q.$side.css("top",q.$headerTop.height())
}m=r+30;
if(h.is("mobile")){m=r
}if(h.is("tablet")){if(window.innerWidth>window.innerHeight){m=r+30
}else{m=r+40
}}}else{if(q.hasBrandedBanner){w=f(".influencer-grid-page").offset().top-f(window).scrollTop();
q.$side.css("top",w);
m=w+f(".influencer-grid-side__connection-wrapper").position().top+parseInt(f(".influencer-grid-side__connection-wrapper").css("padding-top"));
if(q.$headerTop.hasClass("header__nav_fixed--offset-mobile")){w=f(".header__nav").height()+f(".header__nav_sub").height();
q.$side.css("top",w);
m=w+parseInt(f(".influencer-grid-side__connection-wrapper").css("padding-top"))+parseInt(f(".influencer-grid-side__connection-wrapper").css("padding-bottom"))
}if(!h.isUserAgent("desktop")){if(f(window).scrollTop()!=0){var y=f(".header__nav").height();
if(h.is("mobile")){f("body").addClass("suppress-branded-banner");
q.$side.css("top",y);
m=r
}else{if(h.is("tablet")){q.$side.css("top",w+20);
m=w
}else{f("body").addClass("suppress-branded-banner");
y=f(".header__nav").height();
q.$side.css("top",y)
}}}else{m=w+40
}}else{}}else{w=(w<r)?r:w;
q.$side.css("top",w);
var u=f(".influencer-grid-page").offset().top-f(window).scrollTop();
m=u+f(".influencer-grid-side__connection-wrapper").position().top+parseInt(f(".influencer-grid-side__connection-wrapper").css("padding-top"));
if(h.is("mobile")){m=r
}if(h.is("tablet")){m=r+40
}}}q.$connectionWrapper.css("height","calc(100% - "+m+"px)")
},0)
},onResizeDefer:function(){this.wait(5,this.onResize,this);
this.wait(10,this.updateOffset,this)
},onResize:function(){var o=this.$el.width();
var r=this.setting.breakpoints;
var n=this.breakpointSizes;
var x=n[n.length-1];
var p=0;
while(p<r.length){if(o<r[p]){x=n[p];
break
}p++
}if(this.currentBreakpointSize===x){return
}this.currentBreakpointSize=x;
this.currentBreakpointSetting=this.setting.breakpointSetting[x];
this.onScroll();
if(!this.currentBreakpointSetting.positions){var q=this.setting.breakpointSetting.xlarge;
var u=this.currentBreakpointSetting.canvasWidth/q.canvasWidth;
this.currentBreakpointSetting.positions={};
for(var m in q.positions){if(q.positions.hasOwnProperty(m)){var w=q.positions[m];
var v={x:w.x*u,y:w.y*u};
this.currentBreakpointSetting.positions[m]=v
}}}this.resizeNodes(this.nodes);
this.resizeNodes(this.scheduledNodes);
this.resizeNodes(this.focusedNode);
this.scaleCanvas(o);
this.wait(1000,this.updateOffset,this)
},resizeNodes:function(n){if(!n){return
}if(Object.prototype.toString.call(n)!=="[object Array]"){n=[n]
}var o=0;
while(o<n.length){var p=n[o];
var q=this.currentBreakpointSetting.positions[p.id];
var m=this.currentBreakpointSetting.nodeSize[p.selectedSize];
q=new g(q.x,q.y);
p.resizeUpdate(m,q);
o++
}},scaleCanvas:function(n){var p=n/this.setting.breakpointSetting.small.canvasWidth;
this.canvasScale=(p>1)?1:p;
var m=this.canvasWidth=this.currentBreakpointSetting.canvasWidth/this.pixelScale;
var o=this.canvasHeight=this.currentBreakpointSetting.canvasHeight/this.pixelScale;
this.$canvasGroup.attr({width:m,height:o}).css({width:m*this.pixelScale*this.canvasScale,height:o*this.pixelScale*this.canvasScale})
},onScroll:function(m,n){this.scrollTop=this.$win.scrollTop()
},enterFocusState:function(o,n){var p;
if(window.ga&&window.ga.loaded){p=window.ga.getAll()[0].get("name");
window.ga(p+".send","event","Influencer Click",o.name,window.location.pathname)
}this.$el.removeClass("node-hovered");
this.setAllAmbientMovement(false);
this.focusedNode=o;
this.nodes.splice(n,1);
this.placeFocusedCanvas();
this.renderNodes();
this.$el.addClass("node-focused");
f("html, body").css({overflow:"hidden"});
var m={connectionLine:o.connectionLine,artist:o.artist,artistList:this.data.artistList,imagePath:this.headshotImagePath,nodeImg:o.cachedFullNode,data:this.data};
this.getSidebarInstance().openSidebar(m);
this.setSidebarPosition();
this.wait(1,this.disableTouchScroll,this)
},exitFocusState:function(){if(this.focusedNode){this.exitCanvasFocusState();
this.getSidebarInstance().closeSidebar();
this.wait(100,this.updateForNodeAction,this);
this.enableTouchScroll();
this.$win.scrollTop(this.tempScrollTop);
f("html, body").css({overflow:""})
}},exitCanvasFocusState:function(){this.setAllAmbientMovement(true);
this.focusedNode.rollout();
this.nodes.push(this.focusedNode);
this.focusedNode=null;
this.renderFocusedNode();
this.$el.removeClass("node-focused")
},updateOffset:function(){this.canvasOffset=this.$nodeCanvas.offset();
this.tooltipLeft=this.$nodeCanvas[0].offsetLeft;
this.placeFocusedCanvas()
},scrollDown:function(){var m=this.$explore.offset().top+80;
f("html, body").animate({scrollTop:m},"slow")
},updateForNodeAction:function(){this.updateOffset();
this.onScroll()
},placeFocusedCanvas:function(){var m=(this.canvasOffset.left>225)?225:this.canvasOffset.left;
this.$focusedCanvas.css({top:this.canvasOffset.top-this.$el.offset().top,left:m})
},disableTouchScroll:function(){if(!this.isSafari){return
}if(window.Modernizr.touch){this.$body.css({position:"fixed",width:"100%",height:"100%"});
this.$el.css({position:"relative",marginTop:-this.scrollTop})
}this.$body.addClass("show-dark-layer-safari-fix")
},enableTouchScroll:function(){if(!this.isSafari){return
}if(window.Modernizr.touch){this.$body.css({position:"",width:"auto",height:"auto"});
this.$el.css({position:"relative",marginTop:0})
}this.$body.removeClass("show-dark-layer-safari-fix")
},getAmbientBaseSpeed:function(){var m=0.02;
if(h.is("mobile")){m=0.05
}if(f("html").hasClass("apple-touch-safari")){if(h.is("mobile")){m=0.05
}else{m=0.12
}}return m
},getRelativeCanvasPos:function(o,n){var m=o-this.canvasOffset.left;
var q=n-this.canvasOffset.top+this.scrollTop;
var p=new g(m,q);
p.divide(this.canvasScale);
return p
},outputDebugPositions:function(){var m=0;
var o={};
while(m<this.nodes.length){var n=this.nodes[m];
o[n.id]={x:n.originalPos.x,y:n.originalPos.y};
m++
}window.console.log(JSON.stringify(o,null,4))
},wait:function(o,n,m){setTimeout(function(){n.apply(m)
},o)
}});
b.API=d.pageContentJson;
b.settingAPI=d.nodeSettingsJson;
e.registerComponent("influencer-grid-main",b)
})(jQuery,Backbone,App);
(function(c,b,d){if(!window.doesPageContainInfluencer){return
}var a=b.View.extend({dynamicContentUpdated:false,initialize:function(){this.mainGridcomponent=d.getComponent(c(".influencer-grid-main"));
this.$body=c("body");
this.$socialLinks=this.$(".social-share__item");
this.$close=this.$(".influencer-grid-side__hide");
this.$title=this.$(".influencer-grid-side__title span");
this.$ads=c(".header__ads");
this.$video=this.$(".influencer-grid-side__video iframe");
this.$connectionWrapper=this.$(".influencer-grid-side__connection-wrapper");
this.$videoWrapper=this.$(".influencer-grid-side__video");
this.$titleText=this.$(".influencer-grid-side__title");
this.$titleArt=this.$(".influencer-grid-side__title-art");
this.$titleArtConnectionDetail=this.$titleArt.find(".connection-detail");
this.$titleArtSelectedNode=this.$titleArt.find(".selected-node");
this.$connectionList=this.$(".influencer-grid-side__connection-list ul");
this.$close.on("click",_.bind(this.onTitleClick,this));
this.$socialList=this.$(".influencer-grid-side__social-list");
this.$socialLinks=this.$socialList.find("li");
this.isSafari=this.detectSafari();
if(this.isSafari){this.$el.insertAfter(c("footer.footer")[0]);
this.touchScrollReassured=false;
this.$preventTouch=c(".prevent-scroll");
this.$preventTouch.on("touchstart",function(f){f.preventDefault()
});
this.$connectionWrapper.on("touchstart",function(f){})
}},detectSafari:function(){var e=navigator.userAgent.toLowerCase();
if(e.indexOf("safari")>-1&&e.indexOf("chrome")<0){return true
}return false
},updateDynamicContent:function(f){if(this.dynamicContentUpdated){return
}this.$(".influencer-grid-side__title").append(f.featuredArtist.shortName);
var e=this.$(".influencer-grid-side__featured-artist");
var g=f.headshotImagePath+f.featuredArtist.headshotImageName;
e.find(".headshot").css({"background-image":"url("+g+")"});
e.find("strong").html(f.featuredArtist.fullName);
this.$socialList.attr("data-social-title",f.socialShare.title);
this.$socialList.attr("data-social-url",f.socialShare.url);
this.initSocial();
this.dynamicContentUpdated=true
},onTitleClick:function(){this.closeSidebar()
},openSidebar:function(e){this.$connectionWrapper.scrollTop(0);
this.updateDynamicContent(e.data);
this.updateSidebar(e);
this.$el.addClass("show")
},closeSidebar:function(){if(!d.Devices.isUserAgent("desktop")){c("body").removeClass("suppress-branded-banner")
}this.$el.removeClass("show");
this.$video.attr("src","");
this.$ads.css("display","block");
this.mainGridcomponent.exitFocusState();
this.$body.removeClass("ig-sidebar-open")
},updateSidebar:function(r){var q=this;
var j=r.connectionLine;
var k=r.artist;
var n=r.imagePath;
var f=r.nodeImg;
q.updateTitle(k.name+"'s");
q.updateVideo(k.videoSrc);
var h=[j.id];
function m(u,v){if(!u){return
}var w=v.slice();
u.forEach(function(z,x){var y=w.slice();
y.push(z.id);
if(z.id===k.id){h=y;
return
}if(z.connections){m(z.connections,y)
}z.connectionList=y
})
}m(j.connections,h);
var e=[];
h.forEach(function(v){var u=r.artistList.filter(function(w){return w.id===v
});
e.push(u[0])
});
var o=h.length-1;
if(o>0){var p=o>1?"s":"";
var l=o+" artist"+p;
this.$titleArtConnectionDetail.text(l);
this.$titleArt.removeClass("direct-connection")
}else{this.$titleArt.addClass("direct-connection")
}this.$titleArtSelectedNode.empty().append(f);
q.$connectionList.empty();
var g=null;
e.forEach(function(F,y){var B=c("<li />");
var D=c('<div class="connection-list-left connection-list-col" />');
var w=c('<div class="gradient-bg circle" />');
var E=c('<div class="headshot circle" />');
var C=c('<div class="connection-list-right connection-list-col" />');
var v=c("<strong />");
var A=c("<p />");
var G=c('<span class="text-content" />');
var z=c('<span class="connection-list-more connection-list-btn">More</span>');
var u=c('<span class="connection-list-less connection-list-btn">Less</span>');
B.append('<div class="connection-line"></div>');
B.append(D);
D.append(w);
w.append(E);
E.css({"background-image":'url( "'+n+F.headshotImageName+'")'});
v.html(F.name);
var x=q.checkWordCount(F.description,17);
A.append(G);
if(x["short"]){G.html(x["short"]);
A.append(z);
A.append(u);
z.attr("name",F.name);
z.click(function(){G.html(x.full);
B.addClass("full-desc-mode")
});
u.click(function(){G.html(x["short"]);
B.removeClass("full-desc-mode")
})
}else{G.html(F.description)
}C.append(v);
C.append(A);
B.append(C);
B.css({zIndex:y});
if(!g){q.$connectionList.append(B)
}else{B.insertBefore(g)
}g=B
})
},initSocial:function(e){var g=this.$socialList.attr("data-social-title");
var f=this.$socialList.attr("data-social-url");
d.InitSocialLinks(this.$socialLinks,g,f,e)
},updateTitle:function(e){this.$title.text(e)
},updateVideo:function(e){this.resolveVideo(e);
this.$video.attr("src",e)
},resolveVideo:function(e){return(!e)?this.$videoWrapper.addClass("influencer-grid-side__video--no-video"):this.$videoWrapper.removeClass("influencer-grid-side__video--no-video")
},updateFeaturedNode:function(e){var f=this.$(".featured-node");
f.append(e)
},checkWordCount:function(h,e){var g=h.split(" ");
var f=null;
if(g.length>e){g=g.slice(0,e);
f=g.join("  ")+"..."
}return{"short":f,full:h}
}});
d.registerComponent("influencer-grid-side",a)
})(jQuery,Backbone,App);