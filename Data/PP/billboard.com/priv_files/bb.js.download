/*! bbfe - v0.0.1 */

!function(a,b,c,d){a(d).ready(function(){var e=c.PGM.touch?"touchend":"click";a("body").on(e,'a[rel="popup"]',function(a){a.preventDefault(),c.open(this.href,this.title,"location=1,status=1,scrollbars=0,height="+this.getAttribute("data-height")+",width="+this.getAttribute("data-width"))});var f=function(){var e=null,f=0;return function(g){var h=a(this);if("touchstart"!==g.type||h.hasClass("is-lasttouch")||(e=a(this),f=d.body.scrollTop),"touchend"===g.type){var i=d.body.scrollTop;h.is(e)&&f>0&&Math.abs(i-f)<50&&(h.siblings().removeClass("is-lasttouch"),b.defer(function(){c.PGM.debug("spotify","adding lasttouch"),h.addClass("is-lasttouch")}),e=null,f=0)}}}(),g=a(".chart-data");c.PGM.touch&&g.on("click",".chart-row__secondary-toggle .chart-row__link, .chart-row__player-toggle, .js-chart-row-vevo",function(a){a.preventDefault()}),g.on(e,".chart-row__link--toggle",function(b){b.preventDefault(),a(this).parents(".chart-row").toggleClass("secondary-row-is-visible")}).on(e,".js-chart-row-vevo",function(b){b.preventDefault(),a.magnificPopup.open({items:{src:a(this).attr("data-href")},type:"iframe"})}).find(".chart-row").each(function(){var b=a(this);b.waypoint(function(){var a=b.find(".chart-row__image"),c=a[0].getAttribute("data-imagesrc");c&&a.css("background-image","url("+c+")")},{offset:"125%",triggerOnce:!0})}).on("touchstart",f).on("touchend",f)})}(this.jQuery,this._,this,this.document),function(a,b,c,d){a(d).ready(function(){var d=a("#twi-module");if(d.length){var e=a("#twi-form"),f=e.find("select"),g=a("#twi-target"),h=c.PGM.JST["chart/twi"],i=c._.after(2,function(){c.PGM.events.trigger("trackEvent",{action:d.attr("data-trackaction"),label:"Go"})});e.on("submit",function(c){var d=f.val();c.preventDefault(),g.html("<p>Loading&hellip;</p>"),i(),a.ajax(this.target+d,{success:function(a){if(b.isEmpty(a.row1))return void g.html("<p>We can't find data for "+d+". Try another year?</p>");var c={row1:a.row1,featured_content:a.response?a.response.featured_content:null};g.html(h(c))},error:function(a,b,c){g.html("<p>We're having trouble finding data for "+d+". Try another year?</p>"),console.error(c)}})}).trigger("submit"),f.on("click",function(){c.PGM.events.trigger("trackEvent",{action:d.attr("data-trackaction"),label:"Year Dropdown"})}).on("change",function(){e.trigger("submit")})}})}(this.jQuery,this._,this,this.document),function(a,b,c,d,e){var f={patterns:{illegal_chars:/[^0-9\/]/g,regex_three_digits:/^[0-9]{3}/g,regex_seg_three_digits:/^[0|1]{1}[0-9]{1}\/[0-3]{1}[0-9]{2}/g,regex_seg_1:/^[0|1]{1}[0-9]{1}/g,regex_seg_1_slash:/^[0|1]{1}[0-9]{1}\//g,regex_one_digit_zero:/^[0]\//g,regex_one_digit:/[1-9]\//g,regex_seg_2:/^[0|1]{1}[0-9]{1}\/[0-3]{1}[0-9]{1}/g,regex_two_digit:/\/[1-9]{1}\//g,regex_seg_3:/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/g,regex_no_slashes:/[0-9]{2}\/[0-9]{2}[\/]{1,4}/g},setAllTimers:function(a,b,c,d,e){"use strict";f.setIllegalCharsTimer(a,b),f.setSegOneTimer(a,c),f.setSegTwoTimer(a,d),f.setSegThreeTimer(a,e)},clearAllTimers:function(a,b,c,d){"use strict";clearInterval(a),clearInterval(b),clearInterval(c),clearInterval(d),a=0,b=0,c=0,d=0},evaluateState:function(a,b,c){"use strict";1===a.value.length&&0===b&&f.setSegOneTimer(a,b),4===a.value.length&&0===c&&f.setSegTwoTimer(a,c)},setIllegalCharsTimer:function(a,b){"use strict";setInterval(function(){f.removeIllegalChars(a)},50)},setSegOneTimer:function(a,b){"use strict";b=setInterval(function(){f.cleanSegmentOne(a,b)},50)},setSegTwoTimer:function(a,b){"use strict";b=setInterval(function(){f.cleanSegmentTwo(a,b)},50)},setSegThreeTimer:function(a,b){"use strict";setInterval(function(){f.cleanSegmentThree(a)},50)},removeIllegalChars:function(a){"use strict";f.patterns.illegal_chars.test(a.value)&&(a.value=a.value.replace(f.patterns.illegal_chars,""))},cleanSegmentOne:function(a,b){"use strict";var c,d=a.value,e=a.value.length;1===e&&"/"===d&&(a.value=""),2===e&&f.patterns.regex_one_digit.test(d)&&(a.value="0"+d,clearInterval(b),b=0),2===e&&f.patterns.regex_one_digit_zero.test(d)&&(a.value=""),2===e&&"00"===d&&(a.value=""),2===e&&(c=d)>12&&(a.value=d.replace(c,"")),2===e&&f.patterns.regex_seg_1.test(d)&&(a.value=a.value+"/",clearInterval(b),b=0),3===e&&f.patterns.regex_seg_1_slash.test(d)&&(clearInterval(b),b=0)},cleanSegmentTwo:function(a,b){"use strict";var c,d,e=a.value.substring(0,3);4===a.value.length&&a.value===e+"/"&&(a.value=e),5===a.value.length&&(c=a.value.substring(3))>31&&(a.value=a.value.replace(c,"")),5===a.value.length&&a.value===e+"0/"&&(a.value=e),5===a.value.length&&"00"===c&&(a.value=a.value.replace(c,"")),5===a.value.length&&f.patterns.regex_two_digit.test(a.value)&&(d=a.value.substring(3,4),a.value=e+"0"+d),5===a.value.length&&f.patterns.regex_seg_2.test(a.value)&&(a.value=a.value+"/",clearInterval(b),b=0),6===a.value.length&&f.patterns.regex_seg_2.test(a.value)&&(clearInterval(b),b=0)},cleanSegmentThree:function(a){"use strict";"/"!==a.value.substring(6,7)&&"/"!==a.value.substring(7,8)&&"/"!==a.value.substring(8,9)&&"/"!==a.value.substring(9,10)||(a.value=a.value.substring(0,a.value.length-1)),10===a.value.length&&f.patterns.regex_seg_3.test(a.value)&&a.value,a.value.length>10&&(a.value=a.value.substring(0,a.value.length-1))},registerInputId:function(b){"use strict";return{formatDate:function(){var c,e=d.getElementById(b),g=0;c=a(e),c.on("focus",function(){f.setAllTimers(this,0,0,0,0)}),c.on("keypress",function(a){g>1&&a.preventDefault(),g++}),c.on("keyup keydown",function(){var a=this.value.substring(2,3),b=this.value.substring(5,6);g=0,3===this.value.length&&f.patterns.regex_three_digits.test(this.value)&&(this.value=this.value.substring(0,this.value.length-1)+"/"+a),6===this.value.length&&f.patterns.regex_seg_three_digits.test(this.value)&&(this.value=this.value.substring(0,this.value.length-1)+"/"+b),f.evaluateState(this,0,0)}),c.on("blur",function(){f.clearAllTimers(0,0,0,0)})}}}};a(d).ready(function(){var e=a("#twi-module");if(e.length){f.registerInputId("twi-birthday-date").formatDate();var g=a("#twi-birthday-date"),h=a("#twi-module-birthday-target"),i=c.PGM.JST["chart/twi_birthday"],j=new Date("1954-01-01"),k=new Date("1900-01-01");a("#twi-birthday-form").on("submit",function(c){c.preventDefault(),h.html("<p>Loading&hellip;</p>");var f=g.val().split("/"),l=[f[2],f[0],f[1]].join("-"),m=new Date(l),n=null;if(m.valueOf()<k.valueOf()?n="There was music back then?":m.valueOf()<j.valueOf()?n="Sorry, we don't have data before 1954.":m.valueOf()>Date.now()?n="Nice try.":m.valueOf()?f[0]&&f[1]&&f[2]?4!==f[2].length&&(n="Please use four digits for the year."):n="Please enter a full date.":n="Please enter a date.",n)return void h.html("<p>"+n+"</p>");a.ajax(this.target+"&date="+l,{success:function(c){var f,g=e.data("canonical")||d.location.origin+d.location.pathname,j=/\/\d{4}-\d{2}-\d{2}/;if(b.isEmpty(c.rows))return void h.html("<p>We're having trouble loading the chart for that date. Try another one?</p>");f=j.test(g)?g.replace(j,"/"+l):g+"/"+l,h.html(i(a.extend(c,{canonical:f})))},error:function(a,b,c){h.html("<p>We're having trouble loading the chart for that date. Try another one?</p>"),console.error(c)}})})}})}(this.jQuery,this._,this,this.document),function(a,b,c){a(c).ready(function(){a(".content-dropdown").each(function(){var b=this;a(".content-dropdown-trigger",b).on("click touchend",function(c){c.preventDefault(),a(".content-dropdown-target",b).slideToggle()})})})}(this.jQuery,0,this.document),function(a,b,c,d){a(d).ready(function(){c.enquire.register("(min-width: 1024px)",{match:function(){a.railSliders.recalculate(!0)},unmatch:function(){a.railSliders.disable()},deferSetup:!0,setup:function(){a(".bb-sliding > div:first-child").railSlider({headerOffset:10})}});var b,d=a(".chart-data"),e=a(".js-chart-rail-float");d.length>0&&e.length>0&&(b=e.find(".chart-rail__header"),c.enquire.register("(min-width: 1024px)",{match:function(){d.waypoint({offset:-250,handler:function(a){"down"===a?(d.addClass("is-scrolled-past"),e.css("position","fixed"),b.prepend('<div class="chart-sidebar-unit__close fa fa-close js-floater-close"></div>'),b.one("click.chartFloater",".js-floater-close",function(){var a=e.find(".video-js").attr("id");d.addClass("chart-data--slippery"),e.addClass("chart-sidebar-unit--slippery"),e.find(".chart-sidebar-unit__close").remove(),c.videojs(a).pause()})):(d.removeClass("is-scrolled-past"),e.css("position","static"),e.find(".chart-sidebar-unit__close").remove(),b.off(".chart-floater"))}})},unmatch:function(){d.removeClass("is-scrolled-past"),e.css("position","static"),b.off(".chart-floater")}}))})}(this.jQuery,this._,this,this.document),function(a,b,c){a(c).ready(function(){a(".newsletter-form-ajax").submit(function(b){b.preventDefault(),a(".loading",this).show(),a(".newsletter-form .messages").empty();var c="/fe-ajax/newsletter_signup/"+a('[name="email"]',this).val()+"/"+a('[name="list"]',this).val();a(".newsletter-form").data("bb-submitted-email",a('[name="email"]',this).val()),a.ajax({url:c,error:function(){a(".newsletter-form .messages").append('<div class="error">Encountered an unexpected error. Please try again.</div>')},success:function(b){switch(b){case 0:a(".newsletter-form").find(".description, form").hide();var c=a(".newsletter-form").data("bb-submitted-email");a(".newsletter-form .messages").append('<div class="success"><h3>Thank you!</h3><p>You will start seeing emails from us soon at '+c+'. Please be sure to <a target="_blank" href="http://link.billboard.com/manage/38q/bb-preferences?email='+c+'">check out all of our newsletters!</a></p></div>');break;case 6:default:a(".newsletter-form .messages").append('<div class="error">Please enter a valid email address.</div>')}},complete:function(){a(".newsletter-form .loading").hide()}})})})}(this.jQuery,0,this.document),function(a,b,c){a(c).ready(function(){a(".yim-swiper-container, .yim-swiper-carousel").each(function(){var c={calculateHeight:!0,createPagination:!1,mode:"horizontal",speed:300,preloadImages:!0,setWrapperSize:!0,updateOnImagesReady:!0,onSwiperCreated:function(a){setTimeout(function(){a.reInit(!0)},250)}};a(this).is(".yim-swiper-carousel")?a.extend(c,{slidesPerView:"auto"}):a.extend(c,{autoplay:3e3,loop:!0}),a.extend(c,a(this).data("swiper-params")||{}),a(this).data("swiper-original-params",a.extend({},c)),new b.Swiper(this,c)}),a(".yim-swiper-container .previous, .yim-swiper-carousel .previous").on("click touchend",function(b){b.preventDefault(),a(this).closest(".yim-swiper-container, .yim-swiper-carousel").data("swiper").slidePrev()}),a(".yim-swiper-container .next, .yim-swiper-carousel .next").on("click touchend",function(b){b.preventDefault(),a(this).closest(".yim-swiper-container, .yim-swiper-carousel").data("swiper").slideNext()}),b.enquire.register("screen and (max-width: 768px)",{match:function(){a(".yim-swiper-carousel, .yim-swiper-container").each(function(){a.extend(a(this).data("swiper").params,a(this).data("swiper-original-params"))})}}),b.enquire.register("screen and (min-width: 768px) and (max-width: 1023px)",{match:function(){a(".yim-swiper-carousel, .yim-swiper-container").each(function(){a.extend(a(this).data("swiper").params,a(this).data("swiper-original-params"),a(this).data("swiper-params-small")||{})})}}),b.enquire.register("screen and (min-width: 1023px)",{match:function(){a(".yim-swiper-carousel, .yim-swiper-container").each(function(){a.extend(a(this).data("swiper").params,a(this).data("swiper-original-params"),a(this).data("swiper-params-small")||{},a(this).data("swiper-params-medium")||{})})}})})}(this.jQuery,this,this.document),function(a,b,c){a(c).ready(function(){a(".compare-charts .column").each(function(){var c=this;a(".chart-selector-trigger",c).on("click touchend",function(b){b.preventDefault(),a(".chart-selector-target",c).slideToggle()}),a(".chart-select",c).on("click touchend",function(d){var e=a(this),f=e.text(),g=e.attr("href"),h=e.data("chart-type");d.preventDefault(),a(".chart-selector-target",c).slideUp(),a.getJSON(e.data("chart-endpoint"),function(d){d.chart_type=h,a("#chart-compare-template").html()&&(a(".chart-content",c).html(b.PGM.JST["yim/chart_compare"](d)),a(".chart-title",c).html(f),a(".see-the-rest",c).attr("href",g))})})})})}(this.jQuery,this,this.document),function(a,b,c){a(c).ready(function(){b.enquire.register("screen and (min-width: 768px) and (max-width: 1023px)",{match:function(){a(".chart-list").each(function(){var b=a(this).data("childHeight");b||(b=0,a("article",this).each(function(){a(this).height()>b&&(b=a(this).height())}),a(this).data("childHeight",b)),a(".read-more",this).css({height:b+"px",lineHeight:b+"px"})})},unmatch:function(){a(".chart-list .read-more").css({height:"auto",lineHeight:"inherit"})}})})}(this.jQuery,this,this.document),function(a,b,c){a(c).ready(function(){var c=a(".chart-row");c.one("mouseenter",function(){var c=a(this);b.PGM.events.trigger("trackEvent",{action:c.parents("[data-trackaction]")[0].getAttribute("data-trackaction"),label:c.attr("data-hovertracklabel")})}),c.length<=20||c.filter(":nth-of-type(10n+11)").each(function(c){a(this).waypoint(function(){b.PGM.events.trigger("trackPageview",{path:b.location.pathname+"?page="+(c+1)})},{offset:"100%"})})})}(this.jQuery,this,this.document),function(a,b){b.onTemplateLoaded=function(c){a(function(){var d=b.brightcove.api.getExperience(c),e=d.getModule(b.brightcove.api.modules.APIModules.VIDEO_PLAYER);a("#"+c).closest(".video-container").data("brightcove-player",e),b.brightcovePlayWhenReady&&b.brightcovePlayWhenReady.trigger("click")})},b.onTemplateReady=function(c){a(function(){var d=c.target.experience.id,e=b.brightcove.api.getExperience(d),f=e.getModule(b.brightcove.api.modules.APIModules.VIDEO_PLAYER);f.mediaEventAdded||(f.addEventListener(b.brightcove.api.events.MediaEvent.COMPLETE,function(){a("#"+d).closest(".video-container").trigger("MediaEvent.COMPLETE",c)}),f.mediaEventAdded=!0)})},a(function(){a('article:not(".clone") .play-video, .image-container .play-video').on("click",function(c){c.preventDefault(),a(this).closest(".video-container").addClass("video-active");var d=a(this).data("video-id"),e=a(this).closest(".video-container").data("brightcove-player");if(!e)return void(b.brightcovePlayWhenReady=a(this));e.loadVideoByID(d),a(this).closest(".video-playlist").find("article").removeClass("active");var f=a(this).closest("article").addClass("active");a(this).closest(".video-container").find(".video-info").html(f.clone().addClass("clone"))}),a(".video-playlist .read-more").on("click",function(b){b.preventDefault(),a(this).closest(".video-playlist").find(".more-group-active").each(function(){a(this).next(".more-group").length>0?a(this).next(".more-group").addClass("more-group-active"):a(this).parent().find(".more-group:first").addClass("more-group-active"),a(this).removeClass("more-group-active")})}),a(".video-container").on("MediaEvent.COMPLETE",function(){a(this).find("article.active").next("article").find(".play-video").trigger("click")})})}(this.jQuery,this),function(a,b){a(function(){a("#breaking-news").each(function(){var c=this.textContent.replace(/[^a-zA-Z0-9]/g,"");return(a.cookie("bb_news_close")!==c||window.PGM.debug.isEnabled("breaking"))&&a("body").addClass("breaking-news--is-showing").on("click",".breaking-news__close",function(){b.body.className=b.body.className.replace("breaking-news--is-showing",""),a.cookie("bb_news_close",c,{expires:1})}),!1})})}(this.jQuery,this.document),function(a,b,c){a(c).ready(function(){var d=a(".nav-items");a(".nav-toggle").toggler({toggleTarget:d,toggleClass:"open"});var e=a(".search-wrap");a(".search-toggle").on("click",function(){e.toggleClass("open")}),b.enquire.register("screen and (max-width: 1024px)",{match:function(){d.on("click.mobile",".dropdown i",function(b){b.preventDefault(),a(this).parent().siblings("ul").toggleClass("open")})},unmatch:function(){d.off(".mobile"),a(".site-header-old").find(".open").removeClass("open")}}),/iPhone|iPod|Android|iPad/.test(b.navigator.platform)&&a(c).on("focus","textarea,input,select",function(){a(".navbar.navbar-fixed-top").css("position","absolute")}).on("blur","textarea,input,select",function(){a(".navbar.navbar-fixed-top").css("position","")})})}(this.jQuery,this,this.document),function(a,b,c){a(c).ready(function(){var c=a("#how-it-works");a(".js-how-it-works-open, .js-how-it-works-close").toggler({toggleTarget:c,toggleClass:"is-showing-how-it-works"}).one("click",function(){b.PGM.events.trigger("trackEvent",{action:"Chart Header",lable:"How It Works"})}),a(".js-how-it-works-show-details").on("click",function(){c.addClass("is-showing-narrative")});var d=a(".swiper-wrapper"),e=null,f=null;b.enquire.register("screen and (max-width: 1023px)",{match:function(){e=[],f=d.wrap('<div class="swiper-container">').parent().append('<div class="pagination">'),f.each(function(){e.push(new b.Swiper(this,{calculateHeight:!0,createPagination:!0,pagination:this.lastChild,paginationClickable:!0}))})},unmatch:function(){f&&(f.each(function(b){e[b].destroy();var c=a(this);c.find(".swiper-wrapper").insertBefore(c).removeAttr("style").find(".swiper-slide").removeAttr("style")}).remove(),f=e=null)}})})}(this.jQuery,this,this.document),function(a,b,c){var d=a.FormatDateInput={};c.extend(d,{patterns:{illegal_chars:/[^0-9\/]/g,regex_three_digits:/^[0-9]{3}/g,regex_seg_three_digits:/^[0|1]{1}[0-9]{1}\/[0-3]{1}[0-9]{2}/g,regex_seg_1:/^[0|1]{1}[0-9]{1}/g,regex_seg_1_slash:/^[0|1]{1}[0-9]{1}\//g,regex_one_digit_zero:/^[0]\//g,regex_one_digit:/[1-9]\//g,regex_seg_2:/^[0|1]{1}[0-9]{1}\/[0-3]{1}[0-9]{1}/g,regex_two_digit:/\/[1-9]{1}\//g,regex_seg_3:/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/g,regex_no_slashes:/[0-9]{2}\/[0-9]{2}[\/]{1,4}/g},setAllTimers:function(a,b,c,e,f){"use strict";d.setIllegalCharsTimer(a,b),d.setSegOneTimer(a,c),d.setSegTwoTimer(a,e),d.setSegThreeTimer(a,f)},clearAllTimers:function(a,b,c,d){"use strict";clearInterval(a),clearInterval(b),clearInterval(c),clearInterval(d),a=0,b=0,c=0,d=0},evaluateState:function(a,b,c){"use strict";1===a.value.length&&0===b&&d.setSegOneTimer(a,b),4===a.value.length&&0===c&&d.setSegTwoTimer(a,c)},setIllegalCharsTimer:function(a,b){"use strict";setInterval(function(){d.removeIllegalChars(a)},50)},setSegOneTimer:function(a,b){"use strict";b=setInterval(function(){d.cleanSegmentOne(a,b)},50)},setSegTwoTimer:function(a,b){"use strict";b=setInterval(function(){d.cleanSegmentTwo(a,b)},50)},setSegThreeTimer:function(a,b){"use strict";setInterval(function(){d.cleanSegmentThree(a)},50)},removeIllegalChars:function(a){"use strict";d.patterns.illegal_chars.test(a.value)&&(a.value=a.value.replace(d.patterns.illegal_chars,""))},cleanSegmentOne:function(a,b){"use strict";var c,e=a.value,f=a.value.length;1===f&&"/"===e&&(a.value=""),2===f&&d.patterns.regex_one_digit.test(e)&&(a.value="0"+e,clearInterval(b),b=0),2===f&&d.patterns.regex_one_digit_zero.test(e)&&(a.value=""),2===f&&"00"===e&&(a.value=""),2===f&&(c=e)>12&&(a.value=e.replace(c,"")),2===f&&d.patterns.regex_seg_1.test(e)&&(a.value=a.value+"/",clearInterval(b),b=0),3===f&&d.patterns.regex_seg_1_slash.test(e)&&(clearInterval(b),b=0)},cleanSegmentTwo:function(a,b){"use strict";var c,e,f=a.value.substring(0,3);4===a.value.length&&a.value===f+"/"&&(a.value=f),5===a.value.length&&(c=a.value.substring(3))>31&&(a.value=a.value.replace(c,"")),5===a.value.length&&a.value===f+"0/"&&(a.value=f),5===a.value.length&&"00"===c&&(a.value=a.value.replace(c,"")),5===a.value.length&&d.patterns.regex_two_digit.test(a.value)&&(e=a.value.substring(3,4),a.value=f+"0"+e),5===a.value.length&&d.patterns.regex_seg_2.test(a.value)&&(a.value=a.value+"/",clearInterval(b),b=0),6===a.value.length&&d.patterns.regex_seg_2.test(a.value)&&(clearInterval(b),b=0)},cleanSegmentThree:function(a){"use strict";"/"!==a.value.substring(6,7)&&"/"!==a.value.substring(7,8)&&"/"!==a.value.substring(8,9)&&"/"!==a.value.substring(9,10)||(a.value=a.value.substring(0,a.value.length-1)),10===a.value.length&&d.patterns.regex_seg_3.test(a.value)&&a.value,a.value.length>10&&(a.value=a.value.substring(0,a.value.length-1))},registerInputClass:function(a){"use strict";return{formatDate:function(){var e,f=b.getElementsByClassName(a),g=0;e=c(f),e.on("focus",function(){d.setAllTimers(this,0,0,0,0)}),e.on("keypress",function(a){g>1&&a.preventDefault(),g++}),e.on("keyup keydown",function(){var a=this.value.substring(2,3),b=this.value.substring(5,6);g=0,3===this.value.length&&d.patterns.regex_three_digits.test(this.value)&&(this.value=this.value.substring(0,this.value.length-1)+"/"+a),6===this.value.length&&d.patterns.regex_seg_three_digits.test(this.value)&&(this.value=this.value.substring(0,this.value.length-1)+"/"+b),d.evaluateState(this,0,0)}),e.on("blur",function(){d.clearAllTimers(0,0,0,0)})}}}})}(this,this.document,this.jQuery),function(a,b,c,d){a.fn.archiveSearch=function(){c.FormatDateInput.registerInputClass("archive-search__input").formatDate();var d=new Date("1954-01-01");return this.each(function(){var e=a(this),f=e.find(".archive-search__form"),g=f.attr("data-message-template"),h=f.attr("data-archive-template"),i=c.PGM.JST[g],j=c.PGM.JST[h],k=e.find(".search-results");e.find(".archive-search__close").on("click",function(){e.find(".archive-search__input").val(""),e.removeClass("is-returning-result")}),f.on("submit",function(c){c.preventDefault(),k.html(i({message:"Loading&hellip;"})),e.addClass("is-returning-result");var g=e.find(".archive-search__input").val(),h=g.split("/"),l=[h[2],h[0],h[1]].join("-"),m=new Date(l),n=null;if(m.valueOf()<d.valueOf()?n="We don't have data for that year. Try searching for a date after 1953.":m.valueOf()>Date.now()?n="We're still working on predicting the future. Try searching for a date in the past.":10!==g.length&&(n="Check the date you entered. You might have missed some digits."),n)return void k.html(i({message:n}));a.ajax(f.data("ajaxUrlPrefix")+"?date="+l+"&chart_slug="+f.data("chartSlug"),{success:function(c){if(b.isEmpty(c.rows))return void k.html(i({message:"We can't find data for "+g+". Try another date?"}));var d=c.date;d=d.substring(5,7)+"/"+d.substring(8,10)+"/"+d.substring(0,4),k.html(j(a.extend(c,{archiveURL:k.data("baseUrl"),imageBaseURL:k.data("imageBaseUrl")},{convertedDate:d})))},error:function(a,b,c){k.html(i({message:"We're having trouble finding data for that date. Try another date?"})),console.error(c)}})})})},a(d).ready(function(){a(".archive-search").archiveSearch()})}(this.jQuery,this._,this,this.document),function(a){var b={positionCentered:"is-centered"};a.fn.pgmTooltip=function(c){var d=a.extend({},b,c);return this.each(function(){var b=a(this);if(b.addClass("pgm-tooltip"),b.hasClass("is-visible")){var c=b.parent().outerHeight()+5,e=b.parent().outerWidth(),f=c+"px",g=e+"px";b.addClass(d.positionCentered).css({bottom:f,width:g})}})}}(this.jQuery),function(a,b,c){c(b).ready(function(){c(".archive-search__input").on("focus",function(){c.cookie("archiveSearchTooltip","seen"),c(".archive-search__form").find(".pgm-tooltip").removeClass("is-visible")}),c.cookie("archiveSearchTooltip")||c(".archive-search__tooltip").addClass("is-visible"),c(".archive-search__tooltip").pgmTooltip({positionCentered:"is-aligned-left"})})}(0,this.document,this.jQuery),function(a,b,c,d){a(c).ready(function(){if(!(a(".featured-video-promo-wrapper").length<1))try{b.PGM.touch||(a(".featured-video-promo-wrapper").css("display","block"),a(".video-promo").append('<script src="//players.brightcove.net/1125911414/028db90d-2f01-4434-ac5f-8fb691bc970a_default/index.min.js"><\/script><script type="text/javascript">var options = {"overlayText": "This data is supplied at initialization"}<\/script>'));var c=a(".video-js");if(0===c.length||void 0===c[0].player)return;var d=a(".featured-video-promo");d.waypoint({handler:function(c){"down"===c?a(b).width()>1024&&(d.addClass("video-sidebar-unit"),d.animate({right:"50%",top:"0",width:"300px",marginLeft:"985px"},200)):"up"===c&&a(b).width()>1024&&(d.removeClass("video-sidebar-unit"),d.css("padding-top","495px"),d.animate({paddingTop:0,top:"-200px",width:"985px",height:"495px",marginLeft:"0",background:"transparent"},200))},offset:"-45%"})}catch(a){console.log(a.message)}})}(this.jQuery,this,this.document),function(a,b,c,d,e){b.videoPlayer={},b.videoPlayer.Model=e.Model.extend({constructor:function(){this.playlist=new e.Collection,e.Model.apply(this,arguments)},initialize:function(){this.on("change:currentIndex",this.setCurrentVideo),this.set({brightcovePlayer:"b53f7820-22f7-4155-a1e0-1b6eb197280d",brightcoveAccount:"1125911414"})},toJSON:function(){var a=this.get("currentVideo").toJSON(),b=this.get("currentIndex")+1,c=this.playlist.at(b<this.playlist.length?b:0).toJSON();return d.extend(d.clone(this.attributes),{currentVideo:a,nextVideo:c})},setCurrentVideo:function(){this.set("currentVideo",this.playlist.at(this.get("currentIndex")))},nextVideo:function(){var a=this.get("currentIndex")+1;a===this.playlist.length&&(a=0),this.set("currentIndex",a)},previousVideo:function(){var a=this.get("currentIndex");0===a&&(a=this.playlist.length),this.set("currentIndex",a-1)},parse:function(a){return this.playlist.reset(a.playlist),{currentIndex:0,currentVideo:this.playlist.at(0)}}}),b.videoPlayer.VideoPlayerView=e.View.extend({initialize:function(){this.listenTo(this.model,"change",this.render)},events:{"click .large-video__button--previous":"previousVideo","click .large-video__button--next":"nextVideo"},template:b.JST["homepage/videoPlayer"],render:function(){return this.$el.html(this.template(this.model.toJSON())),this},nextVideo:function(){this.model.nextVideo()},previousVideo:function(){this.model.previousVideo()}})}(0,this.PGM,this.jQuery,this._,this.Backbone),function(a,b,c){c(b).ready(function(){if(void 0===a.PGM.videoPlayer)throw{name:"Unmet Dependency",message:"Cannot initialize Homepage Video without PGM.videoPlayer and $.fn.setupVideoPlayer."};c(".large-video").each(function(){var b=JSON.parse(c(this).find("script").text());new a.PGM.videoPlayer.VideoPlayerView({el:this,model:new a.PGM.videoPlayer.Model({playlist:b},{parse:!0})}).render()})})}(this,this.document,this.jQuery),function(a,b,c){c(b).ready(function(){c(".js-toggle-disqus-comments").toggler({toggleTarget:"body",toggleClass:"is-showing-disqus-comments"})})}(0,this.document,this.jQuery),function(a,b){a.PGM.events.on("urlChange:post",function(c,d){var e;"video"===c&&(e=d.find(".video-main__title").text(),a.PGM.Header.setTitle(e),b('meta[name="twitter:title"]').attr("content",e))})}(this,this.jQuery);