/*! ATT eDM Data Manager API
    Version 20180207.0 prod
    ATT Proprietary and Confidential
*/
function isIE(e,t){var n,c="IE",d=document.createElement("B"),i=document.documentElement;return e&&(c+=" "+e,t&&(c=t+" "+c)),d.innerHTML="<!--[if "+c+']><b id="iecctest"></b><![endif]-->',i.appendChild(d),n=!!document.getElementById("iecctest"),i.removeChild(d),n}function edmDataManager(ini){function isEmpty(obj){for(var prop in obj)if(obj.hasOwnProperty(prop))return!1;return!0}var $apiVersion="20180207.0 prod",$me=this,$config=ini;"undefined"==typeof $config.passThroughDefinitions&&($config.passThroughDefinitions=[]),"undefined"==typeof $config.settings&&($config.settings={});var $ddo={},_eventsToBeProcessed=[],_TouchCommerceQueue=[],_MaxTouchCommerceQueueMembers=100,_eventHandlers={},_oImpressions={},_consoleLog={dataLayer:{},dmLogs:{},dtmLogs:{}},_eventOrder=0,_tcObj=null;window.addEventListener("INQ-DETM-READY",function(e){"undefined"!=typeof e&&"undefined"!=typeof e.detail&&"undefined"!=typeof e.detail["inq-object"]&&(_tcObj=e.detail["inq-object"])});var _allowedInPrototype=["_default","loadAt","dataType","passThrough","rules","dynamicDefault"],_requiredInPrototype=["dataType"],cacheNamespace="$ddo",cacheDebugMode=cacheNamespace+".settings.debugMode",cacheDebug2Mode=cacheNamespace+".settings.debug2Mode",cacheTestingEnabled=cacheNamespace+".settings.testingEnabled",cacheDataLocation=cacheNamespace+".data",debugDisabled="0",debugStandardExternal="1",debugStandardInternal="2",debugEnhancedExternal="3",debugEnhancedInternal="4",colorSetVar="blue",colorAutoPageLoadEvent="purple",colorPushEvent="green",colorInternal="gray",colorDefault="black",consoleDown=Array(11).join(String.fromCharCode("9660")),consoleUp=Array(11).join(String.fromCharCode("9650")),locEvents="events",noConsole="undefined"==typeof console||"undefined"==typeof console.log||"undefined"==typeof console.warn||navigator.appName.indexOf("Internet Explorer")!=-1&&navigator.appVersion.indexOf("MSIE 1")==-1,advancedConsole="undefined"!=typeof console&&"function"==typeof console.table&&"function"==typeof console.group&&"function"==typeof console.groupCollapsed&&"function"==typeof console.groupEnd&&(window.navigator.userAgent.indexOf("Chrome/")!==-1||window.navigator.userAgent.indexOf("Firefox/")!==-1),edmEventApi=function(analytics_event){this.analytics_event=analytics_event,this.isModal=function(){var isModal=!1;return"pageLoad"===this.analytics_event.eventAction&&(isModal=this.analytics_event._evtPageName.indexOf("mdl")!==-1||this.analytics_event._evtPageName.indexOf("Mdl")!==-1||this.analytics_event._evtPageName.indexOf("Modal Pg")!==-1),isModal},this.getCustomEventName=function(){for(var customEventName="",i=0;i<edmEventApi.messageMap.length;i++){var mapping=edmEventApi.messageMap[i];if(mapping.eventAction==this.analytics_event.eventAction){customEventName=mapping.customEventName;break}}return customEventName}};edmEventApi.messageMap=[{eventAction:"pageLoad",customEventName:"DM_EVENT_PAGELOAD"}];var makeSafe=function(fn){return function(){try{return fn.apply(this,arguments)}catch(e){return warn(e),!1}}},doSessionStorage=makeSafe(function(fn){return function(){if("undefined"!=typeof sessionStorage)return fn.apply(this,arguments);throw"doSessionStorage: sessionStorage not supported on this browser."}});this.ext={},this.ext.strSplit=makeSafe(function(list,delim){return list.split(delim)}),this.ext.strListAppend=makeSafe(function(list,val,delim){return arrItems=list.split(delim),arrItems.push(val),arrItems.join(delim)}),this.ext.arrJoin=makeSafe(function(list,delim){return list.join(delim)}),this.ext.strReplace=makeSafe(function(orig,searchValue,newValue){return orig.replace(new RegExp(searchValue,"g"),newValue)}),this.ext.getParameterByName=makeSafe(function(name,url){url||(url=window.location.href),name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null}),this.ext.getCookie=makeSafe(function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(c.indexOf(name)!=-1)return c.substring(name.length,c.length)}return""}),this.ext.setCookie=makeSafe(function(cname,cvalue,exdays){var d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires});var findChar=makeSafe(function(x,str,start){"undefined"==typeof start&&(start=0);for(var i=start;i<=str.length;i++)if(str[i]===x[0]){for(var matched=!0,n=0;n<x.length;n++)str[i+n]===x[n]||(matched=!1);if(matched===!0)return i}return-1});Array.prototype.indexOf||(Array.prototype.indexOf=function(needle){for(var i=0;i<this.length;i++)if(this[i]===needle)return i;return-1}),Object.size=function(obj){var key,size=0;for(key in obj)obj.hasOwnProperty(key)&&size++;return size},emptyObject=makeSafe(function(obj){if(obj instanceof Array)obj=[];else if("object"==typeof obj)for(var member in obj)delete obj[member];return obj}),this.log=makeSafe(function(){if(!noConsole){for(var args=[],i=0;i<arguments.length;i++)args.push(arguments[i]);console.log.apply(console,args)}}),this.setConsoleLog=makeSafe(function(msg,source){var size=0;"undefined"==typeof source&&(source="dataLayer"),"undefined"==typeof msg&&(msg="no msg provided"),source=source.toLowerCase(),"dm"==source?(size=Object.size(_consoleLog.dmLogs),_consoleLog.dmLogs[size]=msg):"dtm"==source?(size=Object.size(_consoleLog.dtmLogs),_consoleLog.dtmLogs[size]=msg):(size=Object.size(_consoleLog.dataLayer),_consoleLog.dataLayer[size]=msg)}),this.getConsoleLog=makeSafe(function(logType){var returnObj={};return"undefined"==typeof logType&&(logType=""),logType=logType.toLowerCase(),_consoleLog.dataLayer=getFlatDataLayer(),returnObj="datalayer"==logType?_consoleLog.dataLayer:"dmlogs"==logType?_consoleLog.dmLogs:"dtmlogs"==logType?_consoleLog.dtmLogs:_consoleLog});var $clearConsoleLog=makeSafe(function(logType){var returnObj={};return"undefined"==typeof logType&&(logType=""),logType=logType.toLowerCase(),_consoleLog.dataLayer=getFlatDataLayer(),"datalayer"==logType?_consoleLog.dataLayer=emptyObject(_consoleLog.dataLayer):"dmlogs"==logType?_consoleLog.dmLogs=emptyObject(_consoleLog.dmLogs):"dtmlogs"==logType?_consoleLog.dtmLogs=emptyObject(_consoleLog.dtmLogs):(_consoleLog.dataLayer=emptyObject(_consoleLog.dataLayer),_consoleLog.dmLogs=emptyObject(_consoleLog.dmLogs),_consoleLog.dmLogs=emptyObject(_consoleLog.dtmLogs)),returnObj});this.debug=doSessionStorage(function(opt){var debugMode=$me.checkDebug2();return"_all"===opt?window.sessionStorage.setItem(cacheDebug2Mode,advancedConsole?debugEnhancedInternal:debugStandardInternal):null===debugMode||debugMode===debugDisabled?window.sessionStorage.setItem(cacheDebug2Mode,advancedConsole?debugEnhancedExternal:debugStandardExternal):window.sessionStorage.setItem(cacheDebug2Mode,debugDisabled),$me.checkDebug2()}),this.debug2=this.debug,this.enableTest=doSessionStorage(function(enabled){return"undefined"!=typeof enabled&&"private"===enabled?(sessionStorage.setItem(cacheTestingEnabled,"private"),createDebugFunctions(),$me.squawk("Hidden testing functions enabled.",1),!0):(null!==sessionStorage.getItem(cacheTestingEnabled)&&sessionStorage.removeItem(cacheTestingEnabled),destroyDebugFunctions(),!1)}),this.checkDebug=doSessionStorage(function(){return window.sessionStorage.getItem(cacheDebugMode)}),this.checkDebug2=doSessionStorage(function(){var debugMode=window.sessionStorage.getItem(cacheDebug2Mode);return null==debugMode&&(debugMode=debugDisabled),debugMode}),this.setCacheVar=doSessionStorage(function(p,v){var loc=0===findChar(cacheDataLocation,p)?p:cacheDataLocation+"."+p;functionStart("setCacheVar",{p:loc,v:v},1,"e");var result=$setCacheVar(p,v);return functionEnd("setCacheVar",result,1,"e"),result});var _setCacheVar=doSessionStorage(function(p,v){var loc=0===findChar(cacheDataLocation,p)?p:cacheDataLocation+"."+p;functionStart("_setCacheVar",{p:loc,v:v},2,"i");var result=$setCacheVar(p,v);return functionEnd("_setCacheVar",result,2,"i"),result}),$stringify=function(value){return"undefined"!=typeof Object.toJSON?Object.toJSON(value):JSON.stringify(value)},$recursiveParse=function(value){var tmp="";return tmp=JSON.parse(value).value,"string"==typeof tmp?recursiveParse(tmp):tmp};$setCacheVar=doSessionStorage(function(p,v){var loc=cacheDataLocation+"."+p,vJSON="";return vJSON=$stringify({value:v}),window.sessionStorage.setItem(loc,vJSON),window.sessionStorage.getItem(loc)}),this.getCacheVar=doSessionStorage(function(p){var loc=0===findChar(cacheDataLocation,p)?p:cacheDataLocation+"."+p;return val=window.sessionStorage.getItem(loc),null!==val?$recursiveParse(val):null}),this.removeCacheVar=doSessionStorage(function(p){var loc=0===findChar(cacheDataLocation,p)?p:cacheDataLocation+"."+p;$me.squawk("removeCacheVar: removing variable "+loc+" from sessionStorage",1,"e");var result=$removeCacheVar(p);return result});var _removeCacheVar=doSessionStorage(function(p){var loc=0===findChar(cacheDataLocation,p)?p:cacheDataLocation+"."+p;$me.squawk("_removeCacheVar: removing variable "+loc+" from sessionStorage",2,"i");var result=$removeCacheVar(p);return result}),$removeCacheVar=doSessionStorage(function(p){var loc=0===findChar(cacheDataLocation,p)?p:cacheDataLocation+"."+p;return window.sessionStorage.removeItem(loc),null===window.sessionStorage.getItem(loc)});this.removeAllCacheVar=doSessionStorage(function(){$me.squawk("removeAllCacheVar: removing all cached data variables (stored settings will remain)",1,"e");for(var k in sessionStorage)0===findChar(cacheDataLocation,k)&&_removeCacheVar(k);return!0});var warn=function(m){noConsole||(m.stack?console.warn("DEDM: "+timeStampMS()+" -> "+m.stack):console.warn("DEDM: "+timeStampMS()+" -> "+m))},addZero=makeSafe(function(i){return i<10&&(i="0"+i),i}),addZero100=makeSafe(function(i){return i<10?i="00"+i:i<100&&(i="0"+i),i}),timeStampMS=makeSafe(function(){var d=new Date;return[addZero(d.getHours()),addZero(d.getMinutes()),addZero(d.getSeconds())].join(":")+"."+addZero100(d.getMilliseconds())}),getPassThroughDefinitions=makeSafe(function(){for(var definitions=[],max=$config.passThroughDefinitions.length,i=0;i<max;i++){var definition=$config.passThroughDefinitions[i];definitions.push(definition)}for(var config=getFlatConfig(),max=config.length,i=0;i<max;i++){var item=config[i],property=item["config attribute"];if(0!=property.indexOf("version.")&&0!=property.indexOf("passThroughDefinitions.")&&0!=property.indexOf("settings.")){var cfg=$me.getConfig(property);"undefined"!=typeof cfg&&"undefined"!=typeof cfg.passThrough&&cfg.passThrough&&definitions.push(property)}}return definitions});this.squawk=makeSafe(function(msg,lvl,opt){var debugMode=$me.checkDebug2();if(debugMode!==debugDisabled)$me.squawk2(msg,opt),$me.setConsoleLog("DEDM: "+timeStampMS()+" -> "+msg,"DM");else{if(noConsole)return;"undefined"==typeof lvl&&(lvl=99),this.checkDebug()>=lvl&&console.log("DEDM: L"+lvl+" "+timeStampMS()+" -> "+msg),$me.setConsoleLog("DEDM: "+timeStampMS()+" -> "+msg,"DM")}}),this.squawk2=makeSafe(function(msg,opt){var debugMode=$me.checkDebug2();"e"===opt&&debugMode!==debugDisabled?console.log("DEDM: "+timeStampMS()+" -> "+msg):debugMode===debugStandardInternal||debugMode===debugEnhancedInternal?(debugMode===debugEnhancedInternal?console.log("%cDEDM: "+timeStampMS()+" -> "+msg+" (internal call)","color: "+colorInternal):console.log("DEDM: "+timeStampMS()+" -> "+msg+" (internal call)"),$me.setConsoleLog("DEDM: "+timeStampMS()+" -> "+msg,"DM")):debugMode===debugEnhancedExternal&&(msg.indexOf("have a value of")>=0||msg.indexOf("is not set")>=0)&&(console.groupEnd(),console.log("%cDEDM: "+timeStampMS()+" -> "+msg,"background: #222; color: orange"))}),this.disableAutoPageLoad=makeSafe(function(){return functionStart("disableAutoPageLoad",void 0,1,"e"),$config.settings.disableAutoPageLoad=!0,functionEnd("disableAutoPageLoad",!0,1,"e"),!0}),this.checkPassThroughDefinitions=makeSafe(function(){return getPassThroughDefinitions()}),this.checkSettings=makeSafe(function(){return $config.settings}),this.checkInstallation=makeSafe(function(){for(var installation={header:{found:!1,parent:null,position:null,desired:"top"},footer:{found:!1,parent:null,position:null,desired:"bottom"},satellite:{found:!1,environment:null},"version:":ddo.version()},headerOrdinal=0,footerOrdinal=0,scripts=document.getElementsByTagName("script"),max=scripts.length,i=0;i<max;i++){var script=scripts[i],parentTagName=script.parentElement.tagName.toLowerCase();switch(parentTagName){case"head":++headerOrdinal;break;case"body":++footerOrdinal}if("undefined"!=typeof script.src&&script.src.length>0){var url=edmDataManager.getURLParts(script.src);"detm-container-hdr.js"==url.file.toLowerCase()?(installation.header.found=!0,installation.header.parent=parentTagName,installation.header.position=headerOrdinal):"detm-container-ftr.js"==url.file.toLowerCase()?(installation.footer.found=!0,installation.footer.parent=parentTagName,installation.footer.position=footerOrdinal):url.file.toLowerCase().indexOf("satellitelib")>-1&&(installation.satellite.found=!0,installation.satellite.environment="prod",url.file.toLowerCase().indexOf("-staging")>-1&&(installation.satellite.environment="stage"))}}return++headerOrdinal,++footerOrdinal,installation.header.position=installation.header.position+" of "+headerOrdinal,installation.footer.position=installation.footer.position+" of "+footerOrdinal,flattenObject(installation)}),this.getConfig=makeSafe(function(p){if("undefined"==typeof p)return $config;if("string"==typeof p){if(0===findChar("edm.",p)||0===findChar("chat.",p)||findChar(".attributes.",p)>-1||0===findChar("_",p))return!1;for(var cfg=$config,bits=p.split("."),i=0;i<bits.length;i++){if("undefined"==typeof cfg[bits[i]])throw'getConfig: configuration path "'+p+'" is not found.';cfg=cfg[bits[i]]}if(validateConfig(cfg))return cfg;throw"getConfig: variable configuration for "+p+" did not validate."}throw"getConfig requires either no parameter or a string indicating the data manager location."}),this.isValidConfig=makeSafe(function(p){for(var cfg=$config,bits=p.split("."),i=0;i<bits.length;i++){if("undefined"==typeof cfg[bits[i]])return!1;cfg=cfg[bits[i]]}return!!validateConfig(cfg)});var validateConfig=makeSafe(function(cfg){for(var cfgKey in cfg){var cfgKeyFound=!1;if(cfg.hasOwnProperty(cfgKey)){for(var allowedKey in _allowedInPrototype)cfgKey===_allowedInPrototype[allowedKey]&&(cfgKeyFound=!0);for(var i=0;i<_allowedInPrototype.length;i++)cfgKey===_allowedInPrototype[i]&&(cfgKeyFound=!0);if(cfgKeyFound===!1)return $me.squawk("validateConfig: variable configuration does not validate. Configuration contains a disallowed value."),!1}}for(var k=0;k<_requiredInPrototype.length;k++){var reqKeyFound=!1;reqKey=_requiredInPrototype[k];for(var cfgKey in cfg)cfg.hasOwnProperty(cfgKey)&&cfgKey===reqKey&&(reqKeyFound=!0);if(reqKeyFound===!1)return $me.squawk("validateConfig: variable configuration does not validate. A required key was not found."),!1}return!0});this.dump=makeSafe(function(opt){if("undefined"!=typeof opt&&"old"==opt){for(var $myddo=JSON.parse(JSON.stringify($ddo)),evt=0;evt<$myddo.events.length;evt++)$myddo.events[evt]._evtCached=0;var cachedEvents=$me.getCacheVar("events");for(var cevt in cachedEvents)cachedEvents[cevt]._evtCached=1;return null!==cachedEvents&&($myddo.events=$myddo.events.concat(cachedEvents)),$myddo}this.dumpList()});var getFlatDataLayer=makeSafe(function(opt){var $myddo=JSON.parse($stringify($ddo));for(var evt in $myddo.events)$myddo.events[evt]._evtCached=0;var cachedEvents=$me.getCacheVar("events");for(var cevt in cachedEvents)cachedEvents[cevt]._evtCached=1;null!==cachedEvents&&($myddo.events=$myddo.events.concat(cachedEvents));var flatDDO=flattenObject($myddo),arrDDO=[];for(var ob in flatDDO){var curVal="";curVal=ob.indexOf("events.")===-1?$me.getVar(ob):flatDDO[ob],"_all"!==opt&&"Default"===curVal||arrDDO.push({"data layer attribute":ob,value:curVal})}return arrDDO=arrDDO.sort(function(a,b){return a["data layer attribute"]>b["data layer attribute"]?1:a["data layer attribute"]<b["data layer attribute"]?-1:0})}),getFlatConfig=makeSafe(function(){var $myconfig=JSON.parse(JSON.stringify($config)),flatConfig=flattenObject($myconfig),arrConfig=[],removeFromConfigAttr=/\.dataType|\.loadAt|\.passThrough|\._default/,prevOb="";for(var ob in flatConfig)ob=ob.replace(removeFromConfigAttr,""),""!=prevOb&&prevOb.indexOf(ob)!=-1||0==ob.indexOf("_")||(arrConfig.push({"config attribute":ob}),prevOb=ob);return arrConfig=arrConfig.sort(function(a,b){return a["config attribute"]>b["config attribute"]?1:a["config attribute"]<b["config attribute"]?-1:0})});this.broadcastCustomEvent=makeSafe(function(eventName,eventData){$me.squawk2("edmDataManager:: starting custom event broadcast");var customDMEvent=new CustomEvent(eventName,{detail:{data:eventData},bubbles:!0,cancelable:!0});document.getElementsByTagName("head")[0].dispatchEvent(customDMEvent)}),this.dumpList=makeSafe(function(opt){var arrDDO=getFlatDataLayer(opt);if(advancedConsole)console.table(arrDDO);else if(!noConsole)for(var i=0;i<arrDDO.length;i++)console.log(arrDDO[i]["data layer attribute"]+": "+arrDDO[i].value)}),this.dl=this.dumpList,this.dumpFile=makeSafe(function(opt){var linkID="ddo-download-link",elem=document.getElementById(linkID);null!==elem&&elem.parentNode.removeChild(elem);for(var pom=document.createElement("a"),arrDDO=getFlatDataLayer(opt),text="",i=0;i<arrDDO.length;i++)text=text+'"'+arrDDO[i]["data layer attribute"]+'","'+arrDDO[i].value+'"\n';var d=new Date,filename="dataLayer_"+[d.getFullYear(),addZero(d.getMonth()),addZero(d.getDate())].join("-")+"_"+[addZero(d.getHours()),addZero(d.getMinutes()),addZero(d.getSeconds())].join("-")+".csv";pom.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(text)),pom.setAttribute("download",filename),pom.setAttribute("id",linkID),document.body.insertBefore(pom,null),pom.click()});var flattenObject=function(ob){var toReturn={};for(var i in ob)if(ob.hasOwnProperty(i))if("object"==typeof ob[i]){var flatObject=flattenObject(ob[i]);for(var x in flatObject)flatObject.hasOwnProperty(x)&&(toReturn[i+"."+x]=flatObject[x])}else toReturn[i]=ob[i];return toReturn},arrayLast=makeSafe(function(arr){return arr[arr.length-1]}),writeData=makeSafe(function(p,v){for(var nodes=p.split("."),cursor=$ddo,i=0;i<nodes.length-1;i++)cursor[nodes[i]]||(cursor[nodes[i]]={}),cursor=cursor[nodes[i]];return cursor[arrayLast(nodes)]=v,cursor[arrayLast(nodes)]}),deleteData=makeSafe(function(p){$me.squawk("deleteData: deleting "+p,"2","i");for(var nodes=p.split("."),cursor=$ddo,i=0;i<nodes.length-1;i++)cursor[nodes[i]]||(cursor[nodes[i]]={}),cursor=cursor[nodes[i]];return delete cursor[arrayLast(nodes)],!0});this.setVar=makeSafe(function(p,v){functionStart("setVar( "+p+", "+v+" )",{p:p,v:v},1,"e");var result=$setVar(p,v);return functionEnd("setVar "+p,result,1,"e"),result});var _setVar=makeSafe(function(p,v){functionStart("_setVar "+p,{p:p,v:v},2,"i");var result=$setVar(p,v);return functionEnd("_setVar "+p,result,2,"i"),result}),$setVar=makeSafe(function(p,v){if(0===findChar("chat.",p)||0===findChar("edm.",p)||findChar(".attributes.",p)>-1)$me.squawk("$setVar: setting ungoverned variable: "+p+"."),writeData(p,v);else{if(!$me.getConfig(p))throw"$setVar: cannot set "+p+': variable does not have valid configuration and is neither an "edm", "chat" or ".attributes." (ungoverned) variable.';$me.squawk("$setVar: setting governed variable: "+p+".");var cfg=$me.getConfig(p);if(!cfg)throw"$setVar: cannot set "+p+". invalid configuration.";if(typeof v!==cfg.dataType)throw"$setVar: data type for "+p+" does not match configuration.";"function"==typeof cfg.rules?writeData(p,cfg.rules(v)):writeData(p,v)}var result=$me.getVar(p);return result});this.setVars=makeSafe(function(obj){if(functionStart("setVars",obj,1,"e"),"object"==typeof obj){for(var p in obj){var v=obj[p];_setVar(p,v)}return functionEnd("setVars",obj,1,"e"),obj}throw"setVars requires an object literal. Usage: setVars( {object literal} )"}),this.getVar=makeSafe(function(p){for(var cursor=$ddo,bits=p&&"$ddo"!==p?p.split("."):"",i=0;i<bits.length;i++){if("undefined"==typeof cursor[bits[i]]){cursor=void 0;break}cursor=cursor[bits[i]]}return"undefined"!=typeof cursor&&"Default"!==cursor&&"UNKNOWN"!==cursor||"dynamicDefault"===$me.getConfig(p).loadAt&&(cursor=$me.getConfig(p).dynamicDefault.call()),cursor}),this.getImpressions=makeSafe(function(){return _oImpressions});var setPageLocation=makeSafe(function(){$ddo._pageLocation=new Object;var loc=$ddo._pageLocation;loc.windowURL=window.location.href;var urlParts=edmDataManager.getURLParts(loc.windowURL);loc.source=urlParts.source,loc.protocol=urlParts.protocol,loc.authority=urlParts.authority,loc.userInfo=urlParts.userInfo,loc.user=urlParts.user,loc.password=urlParts.password,loc.host=urlParts.host,loc.port=urlParts.port,loc.relative=urlParts.relative,loc.path=urlParts.path,loc.directory=urlParts.directory,loc.file=urlParts.file,loc.query=urlParts.query,loc.anchor=urlParts.anchor;var domainBits=loc.host.split(".");return domainBits.length<3?(loc.host="www."+loc.host,loc.subdomain="www"):loc.subdomain=domainBits.slice(0,domainBits.length-2).join("."),"undefined"==typeof loc.query&&loc.windowURL.indexOf("?")>-1&&(loc.query=loc.windowURL.substr(loc.windowURL.indexOf("?")+1)),loc});this.getDCSextTags=makeSafe(function(){$me.squawk("getWTMetaTags: Reading Webtrends meta tags from page",1,"e");for(var dcsTags={},metas=document.getElementsByTagName("meta"),i=0;i<metas.length;i++)try{0===findChar("dcsext.",metas[i].getAttribute("name").toLowerCase())&&(dcsTags[metas[i].getAttribute("name").replace(/^dcsext\./i,"")]=metas[i].getAttribute("content"))}catch(e){}return $me.squawk("getWTMetaTags: Finished reading Webtrends meta tags from page",1,"e"),dcsTags}),this.setEDMFromDCSext=makeSafe(function(){functionStart("setEDMFromDCSext: Setting edm variables from Webtrends tags.",void 0,1,"e");var dcsTags=this.getDCSextTags();for(tag in dcsTags)"undefined"==typeof this.getVar("edm."+tag)&&_setVar("edm."+tag,dcsTags[tag]);return functionEnd("setEDMFromDCSext: Finished setting edm variables from Webtrends tags.",void 0,1,"e"),!0}),this.concatEDM=makeSafe(function(){var eDMString=new Array;for(var i in $ddo.edm)eDMString.push(i+"="+("object"==typeof $ddo.edm[i]?JSON.stringify($ddo.edm[i]):$ddo.edm[i]));return eDMString.join("&")});var setDefaultHandlers=makeSafe(function(o,n){o||(o=$config);for(var k in o)"object"==typeof o[k]&&null!==o[k]?n?setDefaultHandlers(o[k],n+"."+k):setDefaultHandlers(o[k],k):"_default"===k&&(loadOn=o.loadAt?o.loadAt:"pageLoad",_eventHandlers[loadOn]||(_eventHandlers[loadOn]=[]),_eventHandlers[loadOn].push({p:n,f:o._default}))});this.getDefaultHandlers=makeSafe(function(){return _eventHandlers});var doDefaultHandlers=makeSafe(function(ev){if(functionStart("doDefaultHandlers: "+ev,void 0,2,"i"),_eventHandlers[ev])for(var i=0;i<_eventHandlers[ev].length;i++)$me.squawk("doDefaultHandlers calling getVar for "+_eventHandlers[ev][i].p+": "+$me.getVar(_eventHandlers[ev][i].p,3)),"undefined"!=typeof $me.getVar(_eventHandlers[ev][i].p)&&"dynamicDefault"!==$me.getConfig(_eventHandlers[ev][i].p).loadAt||_setVar(_eventHandlers[ev][i].p,"function"==typeof _eventHandlers[ev][i].f?_eventHandlers[ev][i].f():_eventHandlers[ev][i].f);return functionEnd("doDefaultHandlers: "+ev,!0,2,"i"),!0});this.loadDefaultsDynamic=makeSafe(function(){functionStart("loadDefaultsDynamic",void 0,1,"e"),doDefaultHandlers("dynamicDefault"),functionEnd("loadDefaultsDynamic",void 0,1,"e")});var _loadDefaultsDynamic=makeSafe(function(){functionStart("_loadDefaultsDynamic",void 0,2,"i"),doDefaultHandlers("dynamicDefault"),functionEnd("loadDefaultsDynamic",void 0,2,"i")});this.loadDefaultsInit=makeSafe(function(){functionStart("loadDefaultsInit",void 0,1,"e"),doDefaultHandlers("init"),functionEnd("loadDefaultsInit",void 0,1,"e")});var _loadDefaultsInit=makeSafe(function(){functionStart("_loadDefaultsInit",void 0,2,"i"),doDefaultHandlers("init"),functionEnd("_loadDefaultsInit",void 0,2,"i")});this.loadDefaultsPostInit=makeSafe(function(){functionStart("loadDefaultsPostInit",void 0,1,"e"),doDefaultHandlers("postInit"),functionEnd("loadDefaultsPostInit",void 0,1,"e")}),this._loadDefaultsPostInit=makeSafe(function(){functionStart("_loadDefaultsPostInit",void 0,2,"i"),doDefaultHandlers("postInit"),functionEnd("_loadDefaultsPostInit",void 0,2,"i")}),this.loadDefaultsPageLastLine=makeSafe(function(){functionStart("loadDefaultsPageLastLine",void 0,1,"e"),doDefaultHandlers("pageLastLine"),functionEnd("loadDefaultsPageLastLine",void 0,1,"e")});var _loadDefaultsPageLastLine=makeSafe(function(){functionStart("_loadDefaultsPageLastLine",void 0,2,"i"),doDefaultHandlers("pageLastLine"),functionEnd("_loadDefaultsPageLastLine",void 0,2,"i")});this.loadDefaultsDocReady=makeSafe(function(){functionStart("loadDefaultsDocReady",void 0,1,"e"),doDefaultHandlers("docReady"),functionEnd("loadDefaultsDocReady",void 0,1,"e")});var _loadDefaultsDocReady=makeSafe(function(){functionStart("_loadDefaultsDocReady",void 0,2,"i"),doDefaultHandlers("docReady"),functionEnd("_loadDefaultsDocReady",void 0,2,"i")});this.loadDefaultsPageLoad=makeSafe(function(){functionStart("loadDefaultsPageLoad",void 0,1,"e"),doDefaultHandlers("pageLoad"),functionEnd("loadDefaultsPageLoad",void 0,1,"e")});var _loadDefaultsPageLoad=makeSafe(function(){functionStart("_loadDefaultsPageLoad",void 0,2,"i"),doDefaultHandlers("pageLoad"),functionEnd("_loadDefaultsPageLoad",void 0,2,"i")});this.pageLastLine=makeSafe(function(){functionStart("pageLastLine",void 0,1,"e"),_loadDefaultsPageLastLine(),docReady(function(){_loadDefaultsDocReady()},void 0,!1),window.addEventListener?(window.addEventListener("load",function(){_loadDefaultsPageLoad()},!1),window.addEventListener("load",function(){autoPageLoadEvent()},!1)):window.attachEvent&&(window.attachEvent("onload",function(){_loadDefaultsPageLoad()}),window.attachEvent("onload",function(){autoPageLoadEvent()})),functionEnd("pageLastLine",void 0,1,"e")});var autoPageLoadEvent=makeSafe(function(){if($config.settings.disableAutoPageLoad===!0)return $me.squawk("automatic pageLoad event suppressed with disableAutoPageLoad()",2,"i"),!1;functionStart("autoPageLoadEvent",void 0,2,"e");var result=_pushEvent("pageLoad","page loaded");return functionEnd("autoPageLoadEvent",result,2,"e"),result}),processEventActions=makeSafe(function(evt,evtInstructions){var instructions=evtInstructions,advancedInstruction="";for(var instructionAction in instructions)if(instructionAction===evt.eventAction){if(isEventInstruction(instructions[instructionAction])===!0)return instructions[instructionAction];if("object"==typeof instructions[instructionAction]){for(var instructionName in instructions[instructionAction])if(instructionName===evt.eventCode){if(isEventInstruction(instructions[instructionAction][instructionName])===!0)return instructions[instructionAction][instructionName];if("function"==typeof instructions[instructionAction][instructionName]&&(advancedInstruction=instructions[instructionAction][instructionName](evt),isEventInstruction(advancedInstruction)===!0))return advancedInstruction}else if("defaultInstruction"===instructionName)var instructionDefault=instructions[instructionAction][instructionName];else if("object"==typeof instructions[instructionAction][instructionName]&&(advancedInstruction=instructions[instructionAction][instructionName],matchesEventAttributes(evt,advancedInstruction)===!0))return advancedInstruction;return isEventInstruction(instructionDefault)===!0?instructionDefault:getEventInstructionDefault()}}return"undefined"!=typeof instructions.defaultInstruction&&instructions.defaultInstruction}),matchesEventAttributes=makeSafe(function(evt,instructions){var matchFlag=!1;for(var attrib in instructions)if(instructions.hasOwnProperty(attrib)&&"undefined"!=typeof instructions[attrib]&&"undefined"!=typeof evt[attrib]&&"sendHitNow"!=attrib&&"clearDataLayer"!=attrib&&"isPageView"!=attrib){if(!wildcardMatch(instructions[attrib],evt[attrib])){matchFlag=!1;break}matchFlag=!0}return matchFlag}),isEventInstruction=makeSafe(function(o){return"object"==typeof o&&("boolean"==typeof o.sendHitNow||"boolean"==typeof o.clearDataLayer||"boolean"==typeof o.isPageView)}),getEventInstructionDefault=makeSafe(function(){return{sendHitNow:!1,clearDataLayer:!1}}),getType=makeSafe(function(o){var result={}.toString.call(o).match(/\s([a-zA-Z]+)/)[1].toLowerCase();return result}),pushCacheEvent=doSessionStorage(function(evt){functionStart("pushCacheEvent",evt,2,"i");var arrEvents=$me.getCacheVar(locEvents);return null===arrEvents&&(arrEvents=[]),arrEvents.push(evt),_setCacheVar(locEvents,arrEvents),functionEnd("pushCacheEvent",$me.getCacheVar(locEvents),2,"i"),evt});this.flushEventCache=doSessionStorage(function(type){$me.squawk("flushEventCache: flushing event cache.",1,"e"),"undefined"==typeof type&&(type=null);var result=$flushEventCache();return result});var _flushEventCache=doSessionStorage(function(type){$me.squawk("_flushEventCache: flushing event cache.",2,"i");var result=$flushEventCache(type);return result}),$flushEventCache=doSessionStorage(function(type){"undefined"==typeof type&&(type=null);var evtCache=$me.getCacheVar(locEvents);if(null!==evtCache)for(var evt=0;evt<evtCache.length;evt++)null!==evtCache[evt]&&(evtCache[evt]._evtOrder=++_eventOrder,$ddo[locEvents].push(evtCache[evt]),"pageLoad"==type&&("impression"==evtCache[evt].eventAction?("undefined"==typeof _oImpressions[evtCache[evt]._evtPageName]&&(_oImpressions[evtCache[evt]._evtPageName]=[]),_oImpressions[evtCache[evt]._evtPageName].push(evtCache[evt])):_eventsToBeProcessed.push(evtCache[evt])));return _removeCacheVar(locEvents),$me.getVar(locEvents)}),_flushImpressions=doSessionStorage(function(){functionStart("_flushImpressions",1,"i"),$me.squawk("_flushImpressions: flushing impressions from cache to the impression array.",2,"i"),$flushImpressions(),functionEnd("_flushImpressions",1,"i")}),$flushImpressions=doSessionStorage(function(){_oImpressions={};var evtCache=null,currPageName="";if(null!=$me.getCacheVar(locEvents)&&(evtCache=sortByTimestampASC($me.getCacheVar(locEvents)),_removeCacheVar("events")),null!==evtCache)for(var evt=0;evt<evtCache.length;evt++)null!==evtCache[evt]&&"impression"==evtCache[evt].eventAction?(evtCache[evt]._evtOrder=++_eventOrder,"undefined"==typeof _oImpressions[evtCache[evt]._evtPageName]&&(_oImpressions[evtCache[evt]._evtPageName]=[]),evtCache[evt]._evtPageName!=currPageName?(_oImpressions[evtCache[evt]._evtPageName].push(evtCache[evt]),currPageName=evtCache[evt]._evtPageName):_oImpressions[evtCache[evt]._evtPageName].push(evtCache[evt]),$ddo[locEvents].push(evtCache[evt])):pushCacheEvent(evtCache[evt])});this.processedByDTM=makeSafe(function(evtOrder,evtType){for(var evtArray=[$ddo[locEvents],_oImpressions,_eventsToBeProcessed],j=0;j<evtArray.length;j++){if(aAllEvents=evtArray[j],"WT"==evtType)for(var i=0;i<aAllEvents.length;i++)aAllEvents[i]._evtOrder==evtOrder&&(aAllEvents[i]._processedByWT=1,ddo.squawk2("DEDM: DTM has updated _processedByWT for event action: "+aAllEvents[i].eventAction+" with an _evtOrder of: "+aAllEvents[i]._evtOrder));if("Adobe"==evtType)for(var i=0;i<aAllEvents.length;i++)aAllEvents[i]._evtOrder==evtOrder&&(aAllEvents[i]._processedByAdobe=1,ddo.squawk2("DEDM: DTM has updated _processedByAdobe for event action: "+aAllEvents[i].eventAction+" with an _evtOrder of: "+aAllEvents[i]._evtOrder))}}),this.getUnprocessedEvents=makeSafe(function(evtType){var aAllEvents=sortByEventOrderASC($ddo[locEvents]),aTmp=[];if("WT"==evtType)for(var i=0;i<aAllEvents.length;i++)"undefined"!=typeof aAllEvents[i]._processedByWT&&0==aAllEvents[i]._processedByWT&&aTmp.push(aAllEvents[i]);if("Adobe"==evtType)for(var i=0;i<aAllEvents.length;i++)"undefined"!=typeof aAllEvents[i]._processedByAdobe&&0==aAllEvents[i]._processedByAdobe&&aTmp.push(aAllEvents[i]);return aTmp;
}),this.getEvents=makeSafe(function(evtAction,evtCode){if("undefined"!=typeof evtAction&&null!==evtAction||"undefined"!=typeof evtCode&&null!==evtCode){if("_all"===evtAction)return sortByEventOrderASC($ddo[locEvents]);if("processedByWT"===evtAction)return this.getUnprocessedEvents("WT");if("processedByAdobe"===evtAction)return this.getUnprocessedEvents("Adobe");var results=[],events=getLatestEvents();for(var evt in events)evtAction&&events[evt].eventAction!==evtAction||evtCode&&events[evt].eventCode!==evtCode||results.push(events[evt]);return sortByEventOrderASC(results)}return getLatestEvents()}),this.getEventByNum=makeSafe(function(arr,evtNum){if("undefined"!=typeof evtNum){for(var aAllEvents=sortByEventOrderASC(arr),i=0;i<aAllEvents.length;i++)if(aAllEvents[i]._evtOrder==evtNum)return aAllEvents[i];ddo.squawk2("DEDM: No event with an _evtOrder of: "+evtNum+" was found.")}return!1}),this.getEventByNumTC=makeSafe(function(evtNum){if("undefined"!=typeof evtNum){for(var aAllEvents=sortByEventOrderASC($ddo[locEvents]),i=0;i<aAllEvents.length;i++)if(aAllEvents[i]._evtOrder==evtNum){for(var aAllEventsTC=aAllEvents[i],tcDDO=getFlatDataLayer(),max=tcDDO.length,i=0;i<max;i++){var arrayElem=tcDDO[i];if(attributeCheck=arrayElem["data layer attribute"],attributeCheck.indexOf("events")<0){attributeSplit=attributeCheck.split(".");for(var cursor=aAllEventsTC,i=0;i<attributeSplit.length-1;i++)cursor[attributeSplit[i]]||(cursor[attributeSplit[i]]={}),cursor=cursor[attributeSplit[i]];cursor[arrayLast(attributeSplit)]=arrayElem.value}}return aAllEventsTC}ddo.squawk2("DEDM: No event with an _evtOrder of: "+evtNum+" was found.")}return!1}),this.getLastPageView=makeSafe(function(){for(var events=this.getEvents("_all"),pageViews=[],i=0;i<events.length;i++)events[i]._evtInstructions.isPageView===!0&&pageViews.push(events[i]);return arrayLast(sortByEventOrderASC(pageViews))}),this.stringArrayEvents=makeSafe(function(){for(var chunkSize=100,chunks=10,cursor=0,arrStrEvents=[],str="",strJsonEvents=$stringify(this.getEvents()),i=0;i<chunks;i++){if(strJsonEvents.length<chunkSize){$me.squawk("stringArrayEvents: chunk: "+i+" (final) pos: "+cursor+" str: "+strJsonEvents,1,"e"),arrStrEvents.push(strJsonEvents);break}str=strJsonEvents.substr(cursor,chunkSize),$me.squawk("stringArrayEvents: chunk: "+i+" pos: "+cursor+" str: "+str,1,"e"),arrStrEvents.push(str),cursor+=chunkSize}return arrStrEvents});var sendEvents=makeSafe(function(){return"object"==typeof _satellite?($me.squawk("calling DTM",1,"e"),_satellite.track("handleEvent"),!0):($me.squawk("DTM not found",1,"e"),!1)});this.broadcastQueuedEvents=makeSafe(function(type){if(("undefined"==typeof type||"TC"!=type)&&null!=_tcObj&&"undefined"!=typeof _TouchCommerceQueue&&_TouchCommerceQueue.length>0){for(var i=0;i<_TouchCommerceQueue.length;i++){var evt=_TouchCommerceQueue[i],payload={eventAction:evt.eventAction,eventCode:evt.eventCode,eventOrder:evt._evtOrder,data:evt};_tcObj.fireCustomEvent("dataReadyInDL",payload)}_TouchCommerceQueue=[]}}),this.sendLog=makeSafe(function(evtCode,evtAction,where){functionStart("_sendLog",1,"e"),$me.squawk("_sendLog: sending log files",2,"i"),$sendLog(evtCode,evtAction,where),functionEnd("_sendLog",1,"e")});var _sendLog=makeSafe(function(evtCode,evtAction,where){functionStart("_sendLog",1,"e"),$me.squawk("_sendLog: sending log files",2,"i"),$sendLog(evtCode,evtAction,where),functionEnd("_sendLog",1,"e")}),$sendLog=makeSafe(function(evtCode,evtAction,where){if("undefined"==typeof where)var aLogMessage="['"+ddo.getVar("page.location.domain")+"','"+ddo.getVar("page.location.url")+"','"+evtAction+"','"+evtCode+"','"+ddo.getVar("page.pageInfo.friendlyPageName")+"','"+ddo.getVar("page.pageInfo.flowCode")+"']";else var aLogMessage=[_consoleLog.dtmLogs];var xmlhttp,logItems={logType:"info",logMessage:aLogMessage,userID:ddo.getVar("user.account.appVisitorCookie")};xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){4===xmlhttp.readyState&&(200===xmlhttp.status?null!==logItems&&void 0!==logItems&&console.log("info","Log persisting to server completed successfully"):400===xmlhttp.status?console.log("Event Configuration file load error with status code = 400"):console.log("Event Configuration file load error with status code = "+xmlhttp.status))},xmlhttp.open("POST","http://135.163.160.196/DMS/service.svc/Log",!1),xmlhttp.setRequestHeader("Content-Type","application/json"),xmlhttp.send(JSON.stringify(logItems)),$clearConsoleLog()}),$redirect=makeSafe(function(url,target){"undefined"!=typeof target?window.open(url,target):window.location=url}),$delayNavigationForBeacons=makeSafe(function(url,target,delay){delay=1e3*delay,adobeBeaconSent=new Promise(function(resolve){_satellite.notify("Adobe promise initiated!"),document.addEventListener("adobeBeaconSent",function(e){resolve()})}),wtBeaconSent=new Promise(function(resolve){_satellite.notify("WT promise initiated!"),document.addEventListener("wtBeaconSent",function(e){resolve()})}),window.setTimeout(function(){$redirect(url,target)},delay),Promise.all([wtBeaconSent,adobeBeaconSent]).then(function(){$redirect(url,target)})["catch"](function(){$redirect(url,target)})});this.pushEvent=makeSafe(function(evtAction,evtName,evtDetails,forceSend){functionStart("pushEvent( "+evtAction+", "+evtName+" )",{evtAction:evtAction,evtName:evtName,evtDetails:evtDetails},1,"e");var evt=$pushEvent(evtAction,evtName,evtDetails,forceSend);return functionEnd("pushEvent( "+evtAction+", "+evtName+" )",evt,1,"e"),evt});var _pushEvent=makeSafe(function(evtAction,evtName,evtDetails,forceSend){functionStart("_pushEvent( "+evtAction+", "+evtName+" )",{evtAction:evtAction,evtName:evtName,evtDetails:evtDetails},1,"i");var evt=$pushEvent(evtAction,evtName,evtDetails,forceSend);return functionEnd("_pushEvent( "+evtAction+", "+evtName+" )",evt,1,"i"),evt}),$isValidEventAction=makeSafe(function(evtAction){var valid=!1,validEventActions=$config._globalEventActions;for(var instructionAction in validEventActions)if(instructionAction===evtAction){valid=!0;break}return valid}),$pushEvent=makeSafe(function(evtAction,evtName,evtDetails,forceSend){try{if($isValidEventAction(evtAction)){$ddo.page.location._addressBarFullURL=$config.page.location._addressBarFullURL._default();var evt={eventAction:evtAction,eventCode:evtName};for(var item in evtDetails)$me.isValidConfig(item)||0===findChar("edm.",item)||findChar(".attributes.",item)>-1?_setVar(item,evtDetails[item]):evt[item]=evtDetails[item];evt._evtAddressBarFullURL=$me.getVar("page.location._addressBarFullURL"),evt._evtDomain=$me.getVar("page.location.domain"),evt._evtTitle=$me.getVar("page.pageInfo.pageTitle"),evt._evtPageName=$me.getVar("page.pageInfo.pageName")?$me.getVar("page.pageInfo.pageName"):"pageName not available",evt._evtChatState=$me.getVar("page.pageInfo.chatState"),evt._evtFriendlyPageName=$me.getVar("page.pageInfo.friendlyPageName")?$me.getVar("page.pageInfo.friendlyPageName"):"Default",evt._evtFsrCookie=$me.getVar("page.pageInfo.fsrMicroCookie")||$me.getVar("page.pageInfo.fsrCookie"),evt._evtQuerystring=$me.getVar("page.location.queryString"),evt._evtFlowCode=$me.getVar("page.pageInfo.flowCode"),evt._evtLanguage=$me.getVar("page.pageInfo.language"),evt._evtLineOfBusiness=$me.getVar("page.pageInfo.lineOfBusiness"),evt._evtViewedUIExperience=$me.getVar("page.pageInfo.viewedUIExperience"),evt._evtResponsiveWebDesignFlag=$me.getVar("page.pageInfo.responsiveWebDesignFlag"),evt._evtZipCode=$me.getVar("page.pageInfo.zipCode"),evt._evtPageGroup=$me.getVar("page.category.pageGroup"),evt._evtPageFunction=$me.getVar("page.category.pageFunction"),evt._evtPageOwnership=$me.getVar("page.category.pageOwnership"),evt._evtApplicationName=$me.getVar("page.category.applicationName"),evt._evtAcctInFocusProductTenureGroup=$me.getVar("user.account.acctInFocusProductTenureGroup"),evt._evtLockerPlan=$me.getVar("user.account.lockerPlan"),evt._evtToggleFlag=$me.getVar("user.account.toggleFlag"),evt._evtWirelineSubscriberDomain=$me.getVar("user.account.wirelineSubscriberDomain"),evt._evtSdgFlag=$me.getVar("user.account.sdgFlag"),evt._evtSdgId=$me.getVar("user.account.sdgId"),evt._evtAcctInFocusTenureGroup=$me.getVar("user.account.acctInFocusTenureGroup"),evt._evtAccountInFocusType=$me.getVar("user.account.accountInFocusType"),evt._evtAccountInFocusIdentifier=$me.getVar("user.account.accountInFocusIdentifier"),evt._evtAccountInFocusSlidRole=$me.getVar("user.account.accountInFocusSlidRole"),evt._evtAccountInFocusStatus=$me.getVar("user.account.accountInFocusStatus"),evt._evtCombinedBill=$me.getVar("user.account.combinedBill"),evt._evtConnectedVehicle=$me.getVar("user.account.connectedVehicle"),evt._evtMemberId=$me.getVar("user.account.memberId"),evt._evtMemberStatus=$me.getVar("user.account.memberStatus"),evt._evtMemberType=$me.getVar("user.account.memberType"),evt._evtWirelineAccountType=$me.getVar("user.account.wirelineAccountType"),evt._evtWirelineBtn=$me.getVar("user.account.wirelineBtn"),evt._evtWirelineRegion=$me.getVar("user.account.wirelineRegion"),evt._evtWirelineUserId=$me.getVar("user.account.wirelineUserId"),evt._evtWirelineUserStatus=$me.getVar("user.account.wirelineUserStatus"),evt._evtWirelineUserType=$me.getVar("user.account.wirelineUserType"),evt._evtServiceType=$me.getVar("user.account.serviceType"),evt._evtBillingSystem=$me.getVar("user.account.billingSystem"),evt._evtLiabilityType=$me.getVar("user.account.liabilityType"),evt._evtAppVisitorCookie=$me.getVar("user.appVisitorCookie"),evt._evtTechLanguage=$me.getVar("user.tech.language"),evt._evtTechUserAgent=$me.getVar("user.tech.userAgent"),evt._evtPageURL=$me.getVar("page.location.url"),evt._processedByWT=0,evt._processedByAdobe=0,evt._processedDueToTime=0;var evtInstructions=getEventInstructions(evt,evtDetails);evt._evtInstructions={};for(var key in evtInstructions)evtInstructions.hasOwnProperty(key)&&(evt._evtInstructions[key]=evtInstructions[key]);var siteSettings=getSiteSettings();if("undefined"!=typeof evtDetails&&"boolean"==typeof evtDetails.clearDataLayer?evtDetails.clearDataLayer===!0?(delete evtDetails.clearDataLayer,evt._clearDataLayer=2,_clearVar("_all")):evt._clearDataLayer=0:"boolean"==typeof evtInstructions.clearDataLayer?evtInstructions.clearDataLayer===!0?(evt._clearDataLayer=1,$me.clearVar("_all")):evt._clearDataLayer=0:getEventInstructionDefault().clearDataLayer===!0?(evt._clearDataLayer=1,_clearVar("_all")):evt._clearDataLayer=0,"undefined"!=typeof evtDetails&&"undefined"!=typeof evtDetails.linkTargetURL&&"undefined"!=typeof evtInstructions&&"undefined"!=typeof evtInstructions.linkDestinationURL)wildcardMatch(evtInstructions.linkDestinationURL,evtDetails.linkTargetURL)?evt._sendHitNow=4:evt._sendHitNow=-4;else if("undefined"!=typeof evtDetails&&"undefined"!=typeof evtDetails.sendHitNow){if("boolean"!=typeof evtDetails.sendHitNow)throw"pushEvent error: sendHitNow must be a boolean. The value passed <"+evtDetails.sendHitNow+"> is type "+typeof evtDetails.sendHitNow;evtDetails.sendHitNow===!0?(delete evtDetails.sendHitNow,evt._sendHitNow=2):evt._sendHitNow=-2}else if("boolean"==typeof evtInstructions.sendHitNow){if(evtInstructions.sendHitNow===!0?evt._sendHitNow=1:evt._sendHitNow=-1,"undefined"!=typeof evtDetails&&("undefined"!=typeof evtDetails.linkDestinationURL||"undefined"!=typeof evtDetails.linkDestinationUrl)){var currentDomain=location.protocol+"//"+location.hostname,ldu=evtDetails.linkDestinationURL||evtDetails.linkDestinationUrl,aLDU=edmDataManager.getURLParts(ldu);if("undefined"!=typeof aLDU.protocol||"undefined"!=typeof aLDU.host&&""!=aLDU.host){var newDomain=aLDU.protocol+"://"+aLDU.host;currentDomain.indexOf(newDomain)==-1&&(evt._sendHitNow=1)}else evt._sendHitNow=-1}}else getEventInstructionDefault().sendHitNow===!0?evt._sendHitNow=1:evt._sendHitNow=0;if(evt._evtTimestampJS=makeTimestamp(),evt._evtInstructions.isPageView===!0?evt._evtPageTimestampJS=evt._evtTimestampJS:"undefined"!=typeof $me.getLastPageView()?evt._evtPageTimestampJS=$me.getLastPageView()._evtTimestampJS:evt._evtPageTimestampJS=null,evt._evtDMInitTimestampJS=$initTimestamp,evt._evtIsBound=0,findChar("Response",evt.eventAction)>-1&&("string"!=evt._doNotBind&&1==evt._doNotBind||(evt=bindEvent(evt))),evt._sendHitNow>0){if($me.squawk("pushEvent: sending event now.",2),evt._evtInstructions.isPageView===!0?_flushEventCache("pageLoad"):_flushImpressions(),evt._evt_DTM_InEventHandler=0,evt._wtConditionProcessed=0,evt._evtOrder=++_eventOrder,$ddo[locEvents].push(evt),_eventsToBeProcessed.push(evt),"flushEvents"==evtAction&&($me.processedByDTM(evt._evtOrder,"WT"),$me.processedByDTM(evt._evtOrder,"Adobe")),sendEvents(evtAction,evtName),"undefined"!=typeof evtDetails&&"undefined"!=typeof evtDetails.linkDestinationURL&&("undefined"!=typeof evtInstructions&&"undefined"!=typeof evtInstructions.delayNavigation||"undefined"!=typeof siteSettings&&"undefined"!=typeof siteSettings.delayNavigation)){var evtDelay="undefined"!=typeof evtInstructions&&"undefined"!=typeof evtInstructions.delayNavigation?evtInstructions.delayNavigation:0,siteDelay="undefined"!=typeof siteSettings&&"undefined"!=typeof siteSettings.delayNavigation?siteSettings.delayNavigation:0,tmpDelay=0;evtDelay>0?tmpDelay=evtDelay:siteDelay>0&&(tmpDelay=siteDelay);var maxDelay="undefined"==typeof $config.settings.maxNavigationDelay?0:$config.settings.maxNavigationDelay,theDelay=tmpDelay<maxDelay?tmpDelay:maxDelay;isIE(8)?window.location.href=evtDetails.linkDestinationURL:$delayNavigationForBeacons(evtDetails.linkDestinationURL,evtDetails.target,theDelay)}}else $me.squawk("pushEvent: adding event to cache.",2),pushCacheEvent(evt);if("undefined"!=typeof siteSettings&&"undefined"!=typeof siteSettings.logConsole&&1==siteSettings.logConsole&&_sendLog(evt.eventCode,evt.eventAction),"flushEvents"!==evtAction&&("undefined"!=typeof _tcObj&&null!=_tcObj&&"function"==typeof _tcObj.fireCustomEvent?_tcObj.fireCustomEvent("dataReadyInDL",{eventAction:evt.eventAction,eventCode:evt.eventCode,eventOrder:evt._evtOrder,data:evt}):"undefined"!=typeof _TouchCommerceQueue&&_TouchCommerceQueue.length<=_MaxTouchCommerceQueueMembers&&_TouchCommerceQueue.push(evt)),"pageLoad"==evt.eventAction){var broadcastParam=new edmEventApi(evt);if(0==broadcastParam.isModal()){var customEventName=broadcastParam.getCustomEventName();$me.broadcastCustomEvent(customEventName,broadcastParam),$me.squawk("####edmDataManager:pushEvent broadcastCustomEvent: "+customEventName)}}return $me.broadcastCustomEvent("DM_Event",evt),evt}$me.squawk2("Error: pushEvent() failed: invalid eventAction ","e")}catch(e){try{var evt={eventAction:evtAction,eventCode:evtName,_errorMsg:e.name+": "+e.message,_sendHitNow:5,_evtIsBound:0,_evtTimestampJS:makeTimestamp(),_evtDMInitTimestampJS:$initTimestamp,_evtAddressBarFullURL:window.location.href,_evtDomain:window.location.host,_evtPageURL:window.location.href};return $ddo[locEvents].push(evt),sendEvents(evtAction,evtName),evt}catch(e){sendEvents(evtAction,evtName)}}}),bindEvent=makeSafe(function(evt){var flagAutoBind="_auto",matchKeyword=evt.eventAction.slice(0,findChar("Response",evt.eventAction));$me.squawk("bindEvent: attempting to bind event "+evt.eventAction+", "+evt.eventCode+". Keyword: "+matchKeyword,2,"i");var events=null!==$me.getCacheVar("events")?sortByTimestampDESC($me.getCacheVar("events")):[];if(0===events.length)return $me.squawk("bindEvent: no events in cache to merge",2,"i"),evt;for(n in events)if("object"==typeof events[n]&&findChar(matchKeyword,events[n].eventAction)>-1&&(findChar("Response",events[n].eventAction)>-1||findChar("Submit",events[n].eventAction)>-1)){if($me.squawk("bindEvent: submit eventAction found. looking at eventCode",2,"i"),evt.eventCode===events[n].eventCode||evt.eventCode===flagAutoBind){for(var item in events[n])0!==findChar("event",item)&&"undefined"==typeof evt[item]&&(evt[item]=events[n][item]);evt._bevtAddressBarFullURL=events[n]._evtAddressBarFullURL,evt._bevtChatState=events[n]._evtChatState,evt._bevtDMInitTimestampJS=events[n]._evtDMInitTimestampJS,evt._bevtDomain=events[n]._evtDomain,evt._bevtFriendlyPageName=events[n]._evtFriendlyPageName,evt._bevtPageGroup=events[n]._evtPageGroup,evt._bevtPageName=events[n]._evtPageName,evt._bevtPageTimestampJS=events[n]._evtPageTimestampJS,evt._bevtPageURL=events[n]._evtPageURL,evt._bevtTimestampJS=events[n]._evtTimestampJS,evt._bevtViewedUIExperience=events[n]._evtViewedUIExperience,evt._evtIsBound=evt.eventCode===events[n].eventCode?1:2,evt.eventCode=evt.eventCode===flagAutoBind?events[n].eventCode:evt.eventCode,events.splice(n,1);break}$me.squawk("bindEvent: eventCode does not match. moving on.",2,"i")}return $me.squawk("bindEvent: pushing events array back to cache",2,"i"),events.length>0?($me.squawk("bindEvent: pushing "+events.length+" events.",2,"i"),_setCacheVar("events",events)):($me.squawk("bindEvent: no events to push back. removing the session cache.",2,"i"),_removeCacheVar("events")),evt});this.getEventToBind=makeSafe(function(evtAction){functionStart("getEventToBind: "+evtAction,evtAction,1,"e");var matchKeyword=evtAction.slice(0,findChar("Response",evtAction)),events=null!==$me.getCacheVar("events")?sortByTimestampDESC($me.getCacheVar("events")):[];if(0===events.length)return $me.squawk("getEventToBind: no events in cache.",1,"e"),functionEnd("getEventToBind: "+evtAction,!1,1,"e"),!1;for(n in events)if(findChar(matchKeyword,events[n].eventAction)>-1&&findChar("Submit",events[n].eventAction)>-1)return functionEnd("getEventToBind: "+evtAction,events[n],1,"e"),events[n];return $me.squawk("getEventToBind: event to bind not found. returning false.",1,"e"),functionEnd("getEventToBind: "+evtAction,!1,1,"e"),!1});var getLatestEvents=makeSafe(function(snapshotID){for(var arrAllEvents=sortByEventOrderASC($ddo[locEvents]),i=arrAllEvents.length-1;i>=0;i--)if(arrAllEvents[i]._sendHitNow>0&&i!==arrAllEvents.length-1)return arrAllEvents.slice(i+1);return arrAllEvents}),makeTimestamp=makeSafe(function(){return"number"==typeof Date.now()?Date.now():+new Date}),functionStart=makeSafe(function(func,args,messageLevel,opt){var debugMode=$me.checkDebug(),debug2Mode=$me.checkDebug2();debug2Mode!==debugDisabled?functionStart2(func,args,opt):debugMode!==debugDisabled&&(noConsole||("undefined"==typeof messageLevel&&(messageLevel=2),debugMode>=messageLevel&&($me.squawk(func+": function start.",messageLevel),"undefined"!=typeof args&&""!==args&&console.log(args))))}),functionStart2=makeSafe(function(func,args,opt){var debugMode=$me.checkDebug2();if(debugMode!==debugDisabled&&"e"===opt){if(debugMode===debugEnhancedInternal||debugMode===debugEnhancedExternal){var msg=timeStampMS()+" -> "+func+": function start.";window.navigator.userAgent.indexOf("Chrome/")!==-1?wildcardMatch("setVar*",func)?console.groupCollapsed("%cDEDM: "+msg,"color: "+colorSetVar):wildcardMatch("pushEvent*",func)?console.groupCollapsed("%cDEDM: "+msg,"color: "+colorPushEvent):wildcardMatch("autoPageLoadEvent*",func)?console.groupCollapsed("%cDEDM: "+msg,"color: "+colorAutoPageLoadEvent):console.groupCollapsed("%cDEDM: "+msg,"color: "+colorDefault):(console.group(),wildcardMatch("setVar*",func)?console.log("%cDEDM: "+msg,"color: "+colorSetVar+"; font-weight: bold"):wildcardMatch("pushEvent*",func)?console.log("%cDEDM: "+msg,"color: "+colorPushEvent+"; font-weight: bold;"):wildcardMatch("autoPageLoadEvent*",func)?console.log("%cDEDM: "+msg,"color: "+colorAutoPageLoadEvent+"; font-weight: bold;"):console.log("%cDEDM: "+msg,"color: "+colorDefault))}else $me.squawk2(msg,"e");if("undefined"!=typeof args&&""!==args)if(wildcardMatch("setVar*",func)){if(console.log("%c"+consoleDown+" ARGUMENTS "+consoleDown,"color: "+colorSetVar),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: "+colorSetVar)}else console.log("%c"+args,"color: "+colorSetVar);console.log("%c"+consoleUp+" ARGUMENTS "+consoleUp,"color: "+colorSetVar)}else if(wildcardMatch("pushEvent*",func)){if(console.log("%c"+consoleDown+" ARGUMENTS "+consoleDown,"color: "+colorPushEvent),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: "+colorPushEvent)}else console.log("%c"+args,"color: "+colorPushEvent);console.log("%c"+consoleUp+" ARGUMENTS "+consoleUp,"color: "+colorPushEvent)}else if(wildcardMatch("autoPageLoadEvent*",func)){if(console.log("%c"+consoleDown+" ARGUMENTS "+consoleDown,"color: "+colorAutoPageLoadEvent),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: "+colorAutoPageLoadEvent)}else console.log("%c"+args,"color: "+colorPushEvent);console.log("%c"+consoleUp+" ARGUMENTS "+consoleUp,"color: "+colorAutoPageLoadEvent)}else{if(console.log("%c"+consoleDown+" ARGUMENTS "+consoleDown,"color: "+colorDefault),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: "+colorDefault)}else console.log("%c"+args,"color: "+colorDefault);console.log("%c"+consoleUp+" ARGUMENTS "+consoleUp,"color: "+colorDefault)}}else if(debugMode===debugStandardInternal||debugMode===debugEnhancedInternal){if(debugMode===debugEnhancedInternal||debugMode===debugEnhancedExternal){var msg=timeStampMS()+" -> "+func+": function start. (internal call)";if(window.navigator.userAgent.indexOf("Chrome/")!==-1?console.groupCollapsed("%cDEDM: "+msg,"color: "+colorInternal):console.groupCollapsed("DEDM: "+msg),console.log("%c"+consoleDown+" ARGUMENTS "+consoleDown,"color: "+colorInternal),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: "+colorInternal)}else console.log("%c"+args,"color: "+colorInternal);console.log("%c"+consoleUp+" ARGUMENTS "+consoleUp,"color: "+colorInternal)}else $me.squawk2(func+": function start.");"undefined"!=typeof args&&""!==args&&console.log(args)}}),functionEnd=makeSafe(function(func,args,messageLevel,opt){var debugMode=$me.checkDebug(),debug2Mode=$me.checkDebug2();debug2Mode!==debugDisabled?functionEnd2(func,args,opt):debugMode!==debugDisabled&&(noConsole||("undefined"==typeof messageLevel&&(messageLevel=2),debugMode>=messageLevel&&("undefined"!=typeof args&&""!==args&&null!==args?console.log(args):"undefined"==typeof args?console.log("[function returned undefined]"):""===args?console.log("[function returned blank string]"):null===args&&console.log("[function returned null]"),$me.squawk(func+": function end.",messageLevel))))}),functionEnd2=makeSafe(function(func,args,opt){var debugMode=$me.checkDebug2();if(debugMode!==debugDisabled&&"e"===opt){var msg="DEDM: "+timeStampMS()+" -> "+func+": function end.";if("undefined"!=typeof args&&""!==args)if(wildcardMatch("setVar*",func)){if(console.log("%c"+consoleDown+" RETURN "+consoleDown,"color: "+colorSetVar),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: "+colorSetVar)}else console.log("%c"+args,"color: "+colorSetVar);console.log("%c"+consoleUp+" RETURN "+consoleUp,"color: "+colorSetVar),console.log("%c"+msg,"color: "+colorSetVar)}else if(wildcardMatch("pushEvent*",func)){if(console.log("%c"+consoleDown+" RETURN "+consoleDown,"color: "+colorPushEvent),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: "+colorPushEvent)}else console.log("%c"+args,"color: "+colorPushEvent);console.log("%c"+consoleUp+" RETURN "+consoleUp,"color: "+colorPushEvent),console.log("%c"+msg,"color: "+colorPushEvent)}else if(wildcardMatch("autoPageLoadEvent*",func)){if(console.log("%c"+consoleDown+" RETURN "+consoleDown,"color: "+colorAutoPageLoadEvent),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: "+colorAutoPageLoadEvent)}else console.log("%c"+args,"color: "+colorPushEvent);console.log("%c"+consoleUp+" RETURN "+consoleUp,"color: "+colorAutoPageLoadEvent),console.log("%c"+msg,"color: "+colorAutoPageLoadEvent)}else{if(console.log("%c"+consoleDown+" RETURN "+consoleDown,"color: "+colorDefault),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: "+colorDefault)}else console.log("%c"+args,"color: "+colorDefault);console.log("%c"+consoleUp+" RETURN "+consoleUp,"color: "+colorDefault),console.log("%c"+msg,"color: "+colorDefault)}debugMode!==debugEnhancedInternal&&debugMode!==debugEnhancedExternal||console.groupEnd()}else if(debugMode===debugStandardInternal||debugMode===debugEnhancedInternal){var msg="DEDM: "+timeStampMS()+" -> "+func+": function end. (internal call)";if("undefined"!=typeof args&&""!==args){if(console.log("%c"+consoleDown+" RETURN "+consoleDown,"color: "+colorInternal),"object"==typeof args){var arrArgs=flattenObject(args);for(var arg in arrArgs)console.log("%c"+arg+" = "+arrArgs[arg],"color: "+colorInternal)}else console.log("%c"+args,"color: "+colorInternal);console.log("%c"+consoleUp+" RETURN "+consoleUp,"color: "+colorInternal)}console.log("%c"+msg,"color: "+colorInternal),debugMode!==debugEnhancedInternal&&debugMode!==debugEnhancedExternal||console.groupEnd()}});this.addItem=makeSafe(function(attribute,value){if(functionStart("addItem",{attribute:attribute,value:value}),"product"===attribute)$ddo.product.items.push(value);else if("cart"===attribute)$ddo.cart.items.push(value);else{if("transaction"!==attribute)throw'You can only add an item to product, cart or transaction. The first parameter to addItem must be one of these values. Syntax: ddo.addProduct( attribute, value ). attribute is "product", "cart" or "transaction". value is an object literal containing item details.';$ddo.transaction.items.push(value)}return functionEnd("addItem",value),value}),this.getItem=makeSafe(function(attribute,index){var items=null;if("product"===attribute)items=$ddo.product.items;else if("cart"===attribute)items=$ddo.cart.items;else{if("transaction"!==attribute)throw'You can only get items from product, cart or transaction. The first parameter to getItem must be one of these values. Syntax: ddo.getItem( attribute, index ). attribute is "product", "cart" or "transaction".  The second parameter is optional - it is the zero-based-index of the desired item.  If not present then all items are returned.';items=$ddo.transaction.items}return"undefined"!=typeof index&&0==isNaN(index)&&index>-1&&index<items.length?items[index]:items});var sortByEventOrderASC=makeSafe(function(arr){return arr.sort(function(a,b){return a._evtOrder-b._evtOrder})}),sortByTimestampASC=(makeSafe(function(arr){return arr.sort(function(a,b){return b._evtOrder-a._evtOrder})}),makeSafe(function(arr){return arr.sort(function(a,b){return a._evtTimestampJS-b._evtTimestampJS})})),sortByTimestampDESC=makeSafe(function(arr){return arr.sort(function(a,b){return b._evtTimestampJS-a._evtTimestampJS})});this.getLastEvent=makeSafe(function(){return $ddo[locEvents][$ddo[locEvents].length-1]}),this.getEventsToBeProcessed=makeSafe(function(){return _eventsToBeProcessed}),this.setProcessedEvent=makeSafe(function(evtOrder,action){var aAllEvents=sortByEventOrderASC(_eventsToBeProcessed);if("handled"==action)for(var i=0;i<aAllEvents.length;i++)aAllEvents[i]._evtOrder==evtOrder&&(aAllEvents[i]._evt_DTM_InEventHandler=1);if("wtconditionprocessed"==action)for(var i=0;i<aAllEvents.length;i++)aAllEvents[i]._evtOrder==evtOrder&&(aAllEvents[i]._wtConditionProcessed=1);if("delete"==action)for(var i=0;i<_eventsToBeProcessed.length;i++)_eventsToBeProcessed[i]._evtOrder==evtOrder&&_eventsToBeProcessed.splice(i,1)}),this.version=makeSafe(function(p){switch(p){case"_api":return $me.getVar("version.api");case"_config":return $me.getVar("version.config");case"_w3c":return $me.getVar("version.w3c");default:return $me.getVar("version")}});makeSafe(function(loc){if(0===findChar("edm.",loc)||findChar(".attributes.",loc)>-1)deleteData(loc);else{var cfg=$me.getConfig(loc);"undefined"!=typeof cfg._default?_setVar(loc,"function"==typeof cfg._default?cfg._default():cfg._default):deleteData(loc)}});this.clearVar=makeSafe(function(loc){functionStart("clearVar",loc,1,"e");var result=$clearVar(loc);return functionEnd("clearVar",result,1,"e"),result});var _clearVar=makeSafe(function(loc){functionStart("_clearVar",loc,1,"i");var result=$clearVar(loc);return functionEnd("_clearVar",result,1,"i"),result}),$clearVar=makeSafe(function(loc){if("undefined"==typeof loc)throw'clearVar requires a data layer location or keyword "_all"';if("string"==typeof loc)"_all"===loc?$ddo={}:deleteData(loc);else{if("object"!=typeof loc)throw"clearVar: function argument was not understood.";for(var k in loc)$clearVar(loc[k])}return initializeRequiredVariables(),doDefaultsByLocation(loc),!0}),doDefaultsByLocation=makeSafe(function(loc){functionStart("doDefaultsByLocation: "+loc,loc,2,"i");var o=strToRef("_all"===loc?"$config":"$config."+loc);if(validateConfig(o))return"undefined"!=typeof o._default?(_setVar(loc,"function"==typeof o._default?o._default():o._default),functionEnd("doDefaultsByLocation: "+loc,!0,2,"i"),!0):(functionEnd("doDefaultsByLocation: "+loc,!0,2,"i"),!1);if("object"==typeof o)for(var k in o)doDefaultsByLocation("_all"===loc?k:loc+"."+k);functionEnd("doDefaultsByLocation: "+loc,"undefined",2,"i")}),$getTimeBetween=function(d1,d2){if("object"==typeof d1)var d1Ms=d1.getTime();else d1Ms=d1;if("object"==typeof d2)var d2Ms=d2.getTime();else d2Ms=d2;var diffInMS=Math.abs(d2Ms-d1Ms);diffInMS/=1e3;var seconds=Math.floor(diffInMS%60);diffInMS/=60;var minutes=Math.floor(diffInMS%60);diffInMS/=60;var hours=Math.floor(diffInMS%24),days=Math.floor(diffInMS/24);return{days:days,hours:hours,minutes:minutes,seconds:seconds}},$clearEventsToBeProcessed=makeSafe(function(){for(var aTmp=[],i=0;i<_eventsToBeProcessed.length;i++)1==_eventsToBeProcessed[i]._processedByAdobe&&1==_eventsToBeProcessed[i]._processedByWT&&aTmp.push(_eventsToBeProcessed[i]._evtOrder);for(var i=0;i<aTmp.length;i++)ddo.setProcessedEvent(aTmp[i],"delete")}),$addToDL=makeSafe(function(evt){$me.getEventByNum($ddo[locEvents],evt._evtOrder)||$ddo[locEvents].push(evt)}),$addToImpressions=makeSafe(function(page,evt){$me.getEventByNum(_oImpressions[page],evt._evtOrder)||"undefined"!=typeof evt._evtOrder&&_oImpressions[page].push(evt)}),$clearImpressions=makeSafe(function(){if(!isEmpty(_oImpressions)){var oTmp={};for(var page in _oImpressions)if(_oImpressions.hasOwnProperty(page))for(var item=0;item<_oImpressions[page].length;item++)"undefined"==typeof oTmp[page]&&(oTmp[page]=[]),0==_oImpressions[page][item]._processedByAdobe&&0==_oImpressions[page][item]._processedByWT&&oTmp[page].push(_oImpressions[page][item]);_oImpressions=oTmp}}),_checkForOldEvents=makeSafe(function(){functionStart("_checkForOldEvents: start",void 0,1,"e"),"undefined"!=typeof $config.settings.checkEventInterval&&0!=$config.settings.checkEventInterval&&(window.ddoCheckEventInterval=setInterval($checkForOldEvents,1e3*$config.settings.checkEventInterval)),functionEnd("_checkForOldEvents: end",void 0,1,"e")}),$checkForOldEvents=makeSafe(function(){var now=makeTimestamp(),aTimerEvents=[],aTime={},secondsDiff=0,aOldEvents=[],timerFlag=!1,aTimerEventNums=[];if(null!=$me.getCacheVar(locEvents)){var aTimerEvents=sortByTimestampASC($me.getCacheVar(locEvents));_removeCacheVar(locEvents)}for(var i=0;i<aTimerEvents.length;i++)aTimerEventNums.push(aTimerEvents[i]._evtOrder);$clearImpressions();for(var page in _oImpressions)if(_oImpressions.hasOwnProperty(page)){var aEvts=_oImpressions[page];for(var evt in aEvts)aEvts.hasOwnProperty(evt)&&(0==aTimerEventNums.length?aTimerEvents.push(aEvts[evt]):aTimerEventNums.indexOf(aEvts[evt]._evtOrder)==-1&&aTimerEvents.push(aEvts[evt]))}if($clearImpressions(),$clearEventsToBeProcessed(),"undefined"!=typeof aTimerEvents&&aTimerEvents.length>0)for(var i=0;i<aTimerEvents.length;i++)if(aTime=$getTimeBetween(aTimerEvents[i]._evtTimestampJS,now),
secondsDiff=aTime.seconds+60*aTime.minutes+3600*aTime.hours,1!=aTimerEvents[i]._processedDueToTime&&"formSubmit"!=aTimerEvents[i].eventAction&&secondsDiff>=$config.settings.clearEventsOlderThan||"formSubmit"==aTimerEvents[i].eventAction&&secondsDiff>=$config.settings.clearFormSubmitsOlderThan){"undefined"==typeof aTimerEvents[i]._evtOrder&&(aTimerEvents[i]._evtOrder=++_eventOrder);for(var j=0;j<aTimerEvents.length;j++)"impression"==aTimerEvents[j].eventAction&&("undefined"==typeof _oImpressions[aTimerEvents[j]._evtPageName]&&(_oImpressions[aTimerEvents[j]._evtPageName]=[]),$addToImpressions(aTimerEvents[j]._evtPageName,aTimerEvents[j]));aOldEvents.push(aTimerEvents[i]),$addToDL(aTimerEvents[i]),timerFlag=!0}else"impression"==aTimerEvents[i].eventAction&&timerFlag?(aTimerEvents[i]._evtOrder=++_eventOrder,$addToImpressions(aTimerEvents[i]._evtPageName,aTimerEvents[i]),$addToDL(aTimerEvents[i])):pushCacheEvent(aTimerEvents[i]);for(var i=0;i<aOldEvents.length;i++)aOldEvents[i]._processedDueToTime=1,aOldEvents[i]._sendHitNow=1,_eventsToBeProcessed.push(aOldEvents[i]),sendEvents(aOldEvents[i].eventAction,aOldEvents[i].eventCode)});this.pullEventsFromCache=doSessionStorage(function(evtAction){return"undefined"==typeof evtAction&&(evtAction="no action defined"),$me.squawk("pullEventsFromCache: pulling: "+evtAction+" events from cache.",1,"e"),$pullEventsFromCache(evtAction),!0});var $pullEventsFromCache=makeSafe(function(evtAction){if("undefined"!=typeof evtAction){_flushEventCache();for(var i=0;i<$ddo[locEvents].length;i++)$ddo[locEvents][i].eventAction==evtAction?_eventsToBeProcessed.push($ddo[locEvents][i]):($ddo[locEvents].splice(i,1),pushCacheEvent($ddo[locEvents][i]))}return!0});makeSafe(function(){for(var aTmp=[],i=_eventsToBeProcessed.length-1;i>=0;i--)aTmp.push(_eventsToBeProcessed[i]._evtOrder);return aTmp});this.stopTimer=makeSafe(function(){clearInterval(window.ddoCheckEventInterval)}),this.startTimer=makeSafe(function(){"undefined"!=typeof $config.settings.checkEventInterval&&0!=$config.settings.checkEventInterval&&(window.ddoCheckEventInterval=setInterval($checkForOldEvents,1e3*$config.settings.checkEventInterval))});var initializeRequiredVariables=makeSafe(function(){return functionStart("initializeRequiredVariables",void 0,2,"i"),"undefined"==typeof $ddo.events&&($ddo.events=[]),"undefined"==typeof $ddo.product&&($ddo.product={}),"undefined"==typeof $ddo.product.items&&($ddo.product.items=[]),"undefined"==typeof $ddo.cart&&($ddo.cart={}),"undefined"==typeof $ddo.edm&&($ddo.edm={}),"undefined"==typeof $ddo.cart.items&&($ddo.cart.items=[]),"undefined"==typeof $ddo.transaction&&($ddo.transaction={}),"undefined"==typeof $ddo.transaction.items&&($ddo.transaction.items=[]),"undefined"==typeof $ddo.version&&($ddo.version={}),"undefined"==typeof $ddo.version.api&&($ddo.version.api=$apiVersion),$me.squawk2("DEDM: Setting: version.api = "+$ddo.version.api),"undefined"==typeof $ddo.version.config&&($ddo.version.config=$config.version.config),$me.squawk2("DEDM: Setting: version.config = "+$ddo.version.config),"undefined"==typeof $ddo.version.w3c&&($ddo.version.w3c=$config.version.w3c),$me.squawk2("DEDM: Setting: version.w3c = "+$ddo.version.w3c),"undefined"==typeof $ddo.user&&($ddo.user={}),"undefined"==typeof $ddo.user.tech&&($ddo.user.tech={}),"undefined"==typeof $ddo.user.tech.language&&($ddo.user.tech.language=$config.user.tech.language._default()),$me.squawk2("DEDM: Setting: user.tech.language = "+$ddo.user.tech.language),"undefined"==typeof $ddo.user.tech.userAgent&&($ddo.user.tech.userAgent=$config.user.tech.userAgent._default()),$me.squawk2("DEDM: Setting: user.tech.userAgent = "+$ddo.user.tech.userAgent),"undefined"==typeof $ddo.page&&($ddo.page={}),"undefined"==typeof $ddo.page.pageInfo&&($ddo.page.pageInfo={}),"undefined"==typeof $ddo.page.pageInfo.pageTitle&&($ddo.page.pageInfo.pageTitle=$config.page.pageInfo.pageTitle._default()),$me.squawk2("DEDM: Setting: page.pageInfo.pageTitle = "+$ddo.page.pageInfo.pageTitle),"undefined"==typeof $ddo.page.location&&($ddo.page.location={}),"undefined"==typeof $ddo.page.location.queryString&&($ddo.page.location.queryString="undefined"!=typeof $ddo._pageLocation&&"undefined"!=typeof $ddo._pageLocation.query&&"string"==typeof $ddo._pageLocation.query?$ddo._pageLocation.query:""),"undefined"==typeof $ddo.page.location.path&&($ddo.page.location.path="undefined"!=typeof $ddo._pageLocation&&"string"==typeof $ddo._pageLocation.path?$ddo._pageLocation.path:""),$me.squawk2("DEDM: Setting: page.locaiton.queryString = "+$ddo.page.location.queryString),functionEnd("initializeRequiredVariables",void 0,2,"i"),!0}),init=makeSafe(function(){functionStart("init: initializing the data manager",void 0,1,"e"),"undefined"!=typeof Array.prototype.toJSON&&delete Array.prototype.toJSON,$initTimestamp=makeTimestamp(),$me.squawk("init: Data Manager initialized at "+$initTimestamp,1,"e"),setPageLocation(),initializeRequiredVariables(),setDefaultHandlers(),_loadDefaultsDynamic(),_loadDefaultsInit(),_checkForOldEvents(),"private"===sessionStorage.getItem(cacheTestingEnabled)&&$me.enableTest("private"),functionEnd("init: done initializing the data manager",!0,1,"e")});this.buildGovernedPassThrough=makeSafe(function(evtNum){functionStart("buildGovernedPassThrough",void 0,1,"e");var result=$buildGovernedPassThrough(evtNum);return functionEnd("buildGovernedPassThrough",result,1,"e"),result}),this.buildPassThrough=makeSafe(function(vars,evtNum){functionStart("buildPassThrough",{vars:vars},1,"e");var result=$buildPassThrough(vars,evtNum);return functionEnd("buildPassThrough",result,1,"e"),result}),this.buildPassThroughExclusion=makeSafe(function(vars){functionStart("buildPassThroughExclusion",{vars:vars},1,"e");var result=$buildPassThroughExclusion(vars);return functionEnd("buildPassThroughExclusion",result,1,"e"),result});var $cleanPassThroughVal=makeSafe(function(val){return"string"==typeof val&&(val=val.replace(/\\n/g,"").replace(/\\'/g,"").replace(/\\"/g,"").replace(/\\&/g,"").replace(/\\r/g,"").replace(/\\t/g,"").replace(/\\b/g,"").replace(/\\f/g,"")),val}),$buildPassThrough=makeSafe(function(vars,evtNum){var chunkSize=125,delimiter="\\",cursor=0,arrPassThrough=[],str="",objPassThrough={};objPassThrough.events=[];for(var v=0;v<vars.length;v++)if("events"===vars[v])"undefined"==typeof evtNum?objPassThrough.events=$me.getEvents():objPassThrough.events[0]=$me.getEventByNum($ddo[locEvents],evtNum);else{var val=$me.getVar(vars[v]);if("undefined"!=typeof val&&isAcceptablePassThroughValue(val)){for(var nodes=vars[v].split("."),cursor=objPassThrough,i=0;i<nodes.length-1;i++)cursor[nodes[i]]||(cursor[nodes[i]]={}),cursor=cursor[nodes[i]];cursor[arrayLast(nodes)]=$cleanPassThroughVal(val)}}for(var i=objPassThrough.events.length-1;i>=0;i--)for(var key in objPassThrough.events[i])Object.prototype.hasOwnProperty.call(objPassThrough.events[i],key)&&(isAcceptablePassThroughValue(objPassThrough.events[i][key])?objPassThrough.events[i][key]=$cleanPassThroughVal(objPassThrough.events[i][key]):delete objPassThrough.events[i][key]);for(var JSONPassThrough=escape($stringify(objPassThrough));JSONPassThrough.length>0;)str=JSONPassThrough.substr(0,chunkSize),arrPassThrough.push(str),JSONPassThrough=JSONPassThrough.substr(chunkSize);var result=arrPassThrough.join(delimiter);return result=$cleanPassThroughVal(result)}),$buildGovernedPassThrough=makeSafe(function(evtNum){var vars=getPassThroughDefinitions(),cursor=0,objPassThrough={};objPassThrough.events=[];for(var v=0;v<vars.length;v++)if("events"===vars[v])"undefined"==typeof evtNum?objPassThrough.events=$me.getEvents():objPassThrough.events[0]=$me.getEventByNum($ddo[locEvents],evtNum);else{var val=$me.getVar(vars[v]);if("undefined"!=typeof val&&isAcceptablePassThroughValue(val)){for(var nodes=vars[v].split("."),cursor=objPassThrough,i=0;i<nodes.length-1;i++)cursor[nodes[i]]||(cursor[nodes[i]]={}),cursor=cursor[nodes[i]];cursor[arrayLast(nodes)]=$cleanPassThroughVal(val)}}for(var i=objPassThrough.events.length-1;i>=0;i--)for(var key in objPassThrough.events[i])Object.prototype.hasOwnProperty.call(objPassThrough.events[i],key)&&(isAcceptablePassThroughValue(objPassThrough.events[i][key])?objPassThrough.events[i][key]=$cleanPassThroughVal(objPassThrough.events[i][key]):delete objPassThrough.events[i][key]);var strPassThrough=$stringify(objPassThrough),dirtyPassThrough=escape(strPassThrough);return result=$cleanPassThroughVal(dirtyPassThrough),result}),isAcceptablePassThroughValue=makeSafe(function(value){var isAcceptable=!0;if("string"==typeof value){var lc=value.toLowerCase();""!==lc&&"unknown"!==lc&&"default"!==lc||(isAcceptable=!1)}return isAcceptable});this.printEdd=makeSafe(function(){var configObj=getFlatConfig();if(advancedConsole)console.table(configObj);else if(!noConsole)for(var i=0;i<configObj.length;i++)console.log(configObj[i]["config attribute"])});var $buildPassThroughExclusion=makeSafe(function(vars,evtNum){var chunkSize=125,delimiter="\\",cursor=0,arrPassThrough=[],str="",objPassThrough={},aDDO=getFlatDataLayer(),cleanedDDO=[],combinedVars="",regExVars="";combinedVars=vars.join("|"),regExVars=new RegExp(combinedVars);for(var i=0;i<aDDO.length;i++)regExVars.test(aDDO[i]["data layer attribute"])||cleanedDDO.push(aDDO[i]["data layer attribute"]+'","'+aDDO[i].value+'"\n');for(var text="",i=0;i<aDDO.length;i++)text=text+'"'+aDDO[i]["data layer attribute"]+'","'+aDDO[i].value+'"\n';for(var v=0;v<vars.length;v++)if("events"===vars[v])objPassThrough.events=$me.getEvents();else{var val=$me.getVar(vars[v]);if("undefined"!=typeof val){for(var nodes=vars[v].split("."),cursor=objPassThrough,i=0;i<nodes.length-1;i++)cursor[nodes[i]]||(cursor[nodes[i]]={}),cursor=cursor[nodes[i]];cursor[arrayLast(nodes)]=val}}for(var JSONPassThrough=$stringify(objPassThrough);JSONPassThrough.length>0;)str=JSONPassThrough.substr(0,chunkSize),arrPassThrough.push(str),JSONPassThrough=JSONPassThrough.substr(chunkSize);var result=arrPassThrough.join(delimiter);return result}),strToRef=makeSafe(function(loc){var bits=loc.split("."),cursor=void 0;if("$ddo"===bits[0])cursor=$ddo;else{if("$config"!==bits[0])throw'strToRef: argument loc must begin with "$ddo" or "$config"';cursor=$config}if(1===bits.length)return cursor;for(var i=1;i<bits.length;i++){if("undefined"==typeof cursor[bits[i]])return;cursor=cursor[bits[i]]}return cursor}),getEventInstructions=makeSafe(function(evt,evtDetails){var href=window.location.href;functionStart("getEventInstructions");for(var entry,eventActions=$config._globalEventActions,eventActionsX=$config._eventActionsExceptions,results="",urlParts=[],i=0;i<eventActionsX.length;i++)if(entry=eventActionsX[i],urlParts=edmDataManager.getURLParts(href),wildcardMatch(entry.filepath,urlParts.filepath)&&wildcardMatch(entry.host,urlParts.host)&&("undefined"==typeof entry.protocol||wildcardMatch(entry.protocol,urlParts.protocol))&&(results=processEventActions(evt,entry._eventActions),0!=results))return"undefined"!=typeof entry.logConsole?results.logConsole=entry.logConsole:results.logConsole=!1,functionEnd("getEventInstructions",results),results;return results=processEventActions(evt,eventActions),functionEnd("getEventInstructions",results),results}),getSiteSettings=makeSafe(function(){for(var entry,href=window.location.href,eventActionsX=$config._eventActionsExceptions,urlParts=[],i=0;i<eventActionsX.length;i++)if(entry=eventActionsX[i],urlParts=edmDataManager.getURLParts(href),wildcardMatch(entry.filepath,urlParts.filepath)&&wildcardMatch(entry.host,urlParts.host)&&("undefined"==typeof entry.protocol||wildcardMatch(entry.protocol,urlParts.protocol)))return entry._settings;return!1}),wildcardMatch=makeSafe(function(pattern,str){if(1===pattern.length&&"*"===pattern.charAt(0)&&pattern.charAt(pattern.length-1))return!0;if(str.indexOf("http")>-1){var aUrlParts=edmDataManager.getURLParts(str);str=aUrlParts.host+aUrlParts.filepath}if(pattern.indexOf("|")==-1)pattern="*"===pattern.charAt(0)?pattern.slice(1,pattern.length):"^"+pattern,pattern="*"===pattern.charAt(pattern.length-1)?pattern.slice(0,pattern.length-1):pattern.slice(0,pattern.length)+"$";else{aPattern=pattern.split("|");for(var i=0;i<aPattern.length;i++)"*"===aPattern[i].charAt(0)&&(aPattern[i]=aPattern[i].slice(1,aPattern[i].length)),"*"===aPattern[i].charAt(aPattern[i].length-1)&&(aPattern[i]=aPattern[i].slice(0,aPattern[i].length-1));pattern=aPattern.join("|")}var re=new RegExp(pattern,"i"),result=re.test(str);return result}),createDebugFunctions=makeSafe(function(){$me.test={wildcardMatch:makeSafe(function(str,pattern){return wildcardMatch(str,pattern)}),dumpConfig:makeSafe(function(){return $config}),loadNewConfig:makeSafe(function(filename){var newConfig=document.createElement("script");newConfig.setAttribute("type","text/javascript"),newConfig.setAttribute("src",filename),document.head.appendChild(newConfig)}),sortByTimestampDESC:makeSafe(function(arr){return sortByTimestampDESC(arr)}),getType:makeSafe(function(o){return getType(o)}),getLatestEvents:makeSafe(function(){return getLatestEvents()}),getURLParts:makeSafe(function(href){return edmDataManager.getURLParts(href)})}}),destroyDebugFunctions=makeSafe(function(){functionStart("destroyDebugFunctions",void 0,2,"i"),"undefined"!=typeof $me.test&&delete $me.test,functionEnd("destroyDebugFunctions",void 0,2,"i")});init()}!function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=setTimeout,k="function"==typeof setImmediate&&setImmediate||function(a){j(a,1)},l=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.prototype["catch"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&"object"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},"undefined"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);var DMviaDM=!0;/*
docReady: Plain javascript replacement for jQuery's .ready() so code can be scheduled to run when the document is ready
https://github.com/jfriend00/docReady

*****
README:
docReady is a single plain javascript function that provides a method of
scheduling one or more javascript functions to run at some later
point when the DOM has finished loading.

It works similarly to jQuery's $(document).ready(), but this is a small
single standalone function that does not require jQuery in any way.

*****
LICENSE:
The MIT License (MIT)

Copyright (c) 2014, John Friend

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/
!function(funcName,baseObj,internal){function ready(){if(!readyFired){readyFired=!0;for(var signaledInternal=!1,i=0;i<readyList.length;i++)readyList[i].fn.call(window,readyList[i].ctx),1==readyList[i].ctx.internal&&(signaledInternal=!0);readyList=[],0==signaledInternal&&"undefined"!=typeof window.docReady&&window.docReady.length<3&&(context={},context.docReady=!0,context.internal=internal||!1,window.docReady.call())}}function readyStateChange(){"complete"===document.readyState&&ready()}funcName=funcName||"docReady",baseObj=baseObj||window;var readyList=[],readyFired=!1,readyEventHandlersInstalled=!1;1==internal&&"undefined"!=typeof window.docReady&&(context={},context.docReady=!0,context.internal=internal||!1,readyList.push({fn:window.docReady,ctx:context})),baseObj[funcName]=function(callback,context,internal){return context=context||{},context.docReady="undefined"!=typeof window.docReady,context.internal=internal||!1,readyFired?void setTimeout(function(){"function"==typeof callback&&callback(context)},1):(readyList.push({fn:callback,ctx:context}),void("complete"===document.readyState?setTimeout(ready,1):readyEventHandlersInstalled||(document.addEventListener?(document.addEventListener("DOMContentLoaded",ready,!1),window.addEventListener("load",ready,!1)):(document.attachEvent("onreadystatechange",readyStateChange),window.attachEvent("onload",ready)),readyEventHandlersInstalled=!0)))},edmDataManager.getURLParts=function(href){var urlParts={};return bits=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(href),"undefined"!=typeof bits[12]&&0!=bits[12].length||"undefined"!=typeof bits[6]&&bits[6].length>0&&bits[6].toLowerCase().indexOf("directvnow.com")>-1&&(href2=href.replace(";","?"),bits2=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(href2),"undefined"!=typeof bits2[12]&&bits2[12].length>0&&(bits=bits2)),urlParts.protocol=bits[1],urlParts.host=bits[6],urlParts.filepath=bits[9]+("undefined"!=typeof bits[13]?"#"+bits[13]:""),urlParts.source=bits[0],urlParts.authority=bits[2],urlParts.userInfo=bits[3],urlParts.user=bits[4],urlParts.password=bits[5],urlParts.port=bits[7],urlParts.relative=bits[8],urlParts.path=bits[9],urlParts.directory=bits[10],urlParts.file=bits[11],urlParts.query=bits[12],urlParts.anchor=bits[13],urlParts}}("docReady",window,!0),edmDataManager.chatStateEnumeration={offline:"offline",available:"available",busy:"busy"};