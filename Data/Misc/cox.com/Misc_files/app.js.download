if(function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=ae.type(e);return"function"===n||ae.isWindow(e)?!1:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(ae.isFunction(t))return ae.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ae.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return ae.filter(t,e,n);t=ae.filter(t,e)}return ae.grep(e,function(e){return Z.call(t,e)>-1!==n})}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t={};return ae.each(e.match(Se)||[],function(e,n){t[n]=!0}),t}function s(){Q.removeEventListener("DOMContentLoaded",s),e.removeEventListener("load",s),ae.ready()}function r(){this.expando=ae.expando+r.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Ee,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Ne.test(n)?ae.parseJSON(n):n}catch(o){}_e.set(e,t,n)}else n=void 0;return n}function c(e,t,n,i){var o,a=1,s=20,r=i?function(){return i.cur()}:function(){return ae.css(e,t,"")},l=r(),c=n&&n[3]||(ae.cssNumber[t]?"":"px"),u=(ae.cssNumber[t]||"px"!==c&&+l)&&Re.exec(ae.css(e,t));if(u&&u[3]!==c){c=c||u[3],n=n||[],u=+l||1;do a=a||".5",u/=a,ae.style(e,t,u+c);while(a!==(a=r()/l)&&1!==a&&--s)}return n&&(u=+u||+l||0,o=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=u,i.end=o)),o}function u(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&ae.nodeName(e,t)?ae.merge([e],n):n}function d(e,t){for(var n=0,i=e.length;i>n;n++)Ie.set(e[n],"globalEval",!t||Ie.get(t[n],"globalEval"))}function h(e,t,n,i,o){for(var a,s,r,l,c,h,p=t.createDocumentFragment(),v=[],f=0,m=e.length;m>f;f++)if(a=e[f],a||0===a)if("object"===ae.type(a))ae.merge(v,a.nodeType?[a]:a);else if(Me.test(a)){for(s=s||p.appendChild(t.createElement("div")),r=(Oe.exec(a)||["",""])[1].toLowerCase(),l=Le[r]||Le._default,s.innerHTML=l[1]+ae.htmlPrefilter(a)+l[2],h=l[0];h--;)s=s.lastChild;ae.merge(v,s.childNodes),s=p.firstChild,s.textContent=""}else v.push(t.createTextNode(a));for(p.textContent="",f=0;a=v[f++];)if(i&&ae.inArray(a,i)>-1)o&&o.push(a);else if(c=ae.contains(a.ownerDocument,a),s=u(p.appendChild(a),"script"),c&&d(s),n)for(h=0;a=s[h++];)$e.test(a.type||"")&&n.push(a);return p}function p(){return!0}function v(){return!1}function f(){try{return Q.activeElement}catch(e){}}function m(e,t,n,i,o,a){var s,r;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(r in t)m(e,r,n,i,t[r],a);return e}if(null==i&&null==o?(o=n,i=n=void 0):null==o&&("string"==typeof n?(o=i,i=void 0):(o=i,i=n,n=void 0)),o===!1)o=v;else if(!o)return e;return 1===a&&(s=o,o=function(e){return ae().off(e),s.apply(this,arguments)},o.guid=s.guid||(s.guid=ae.guid++)),e.each(function(){ae.event.add(this,t,o,i,n)})}function g(e,t){return ae.nodeName(e,"table")&&ae.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function y(e){var t=Fe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){var n,i,o,a,s,r,l,c;if(1===t.nodeType){if(Ie.hasData(e)&&(a=Ie.access(e),s=Ie.set(t,a),c=a.events)){delete s.handle,s.events={};for(o in c)for(n=0,i=c[o].length;i>n;n++)ae.event.add(t,o,c[o][n])}_e.hasData(e)&&(r=_e.access(e),l=ae.extend({},r),_e.set(t,l))}}function S(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ve.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function C(e,t,n,i){t=K.apply([],t);var o,a,s,r,l,c,d=0,p=e.length,v=p-1,f=t[0],m=ae.isFunction(f);if(m||p>1&&"string"==typeof f&&!ie.checkClone&&He.test(f))return e.each(function(o){var a=e.eq(o);m&&(t[0]=f.call(this,o,a.html())),C(a,t,n,i)});if(p&&(o=h(t,e[0].ownerDocument,!1,e,i),a=o.firstChild,1===o.childNodes.length&&(o=a),a||i)){for(s=ae.map(u(o,"script"),b),r=s.length;p>d;d++)l=o,d!==v&&(l=ae.clone(l,!0,!0),r&&ae.merge(s,u(l,"script"))),n.call(e[d],l,d);if(r)for(c=s[s.length-1].ownerDocument,ae.map(s,y),d=0;r>d;d++)l=s[d],$e.test(l.type||"")&&!Ie.access(l,"globalEval")&&ae.contains(c,l)&&(l.src?ae._evalUrl&&ae._evalUrl(l.src):ae.globalEval(l.textContent.replace(We,"")))}return e}function x(e,t,n){for(var i,o=t?ae.filter(t,e):e,a=0;null!=(i=o[a]);a++)n||1!==i.nodeType||ae.cleanData(u(i)),i.parentNode&&(n&&ae.contains(i.ownerDocument,i)&&d(u(i,"script")),i.parentNode.removeChild(i));return e}function T(e,t){var n=ae(t.createElement(e)).appendTo(t.body),i=ae.css(n[0],"display");return n.detach(),i}function I(e){var t=Q,n=Xe[e];return n||(n=T(e,t),"none"!==n&&n||(Ue=(Ue||ae("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ue[0].contentDocument,t.write(),t.close(),n=T(e,t),Ue.detach()),Xe[e]=n),n}function _(e,t,n){var i,o,a,s,r=e.style;return n=n||Je(e),s=n?n.getPropertyValue(t)||n[t]:void 0,""!==s&&void 0!==s||ae.contains(e.ownerDocument,e)||(s=ae.style(e,t)),n&&!ie.pixelMarginRight()&&Qe.test(s)&&Ye.test(t)&&(i=r.width,o=r.minWidth,a=r.maxWidth,r.minWidth=r.maxWidth=r.width=s,s=n.width,r.width=i,r.minWidth=o,r.maxWidth=a),void 0!==s?s+"":s}function N(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function E(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in it)return e}function k(e,t,n){var i=Re.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function R(e,t,n,i,o){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,s=0;4>a;a+=2)"margin"===n&&(s+=ae.css(e,n+De[a],!0,o)),i?("content"===n&&(s-=ae.css(e,"padding"+De[a],!0,o)),"margin"!==n&&(s-=ae.css(e,"border"+De[a]+"Width",!0,o))):(s+=ae.css(e,"padding"+De[a],!0,o),"padding"!==n&&(s+=ae.css(e,"border"+De[a]+"Width",!0,o)));return s}function D(e,t,n){var i=!0,o="width"===t?e.offsetWidth:e.offsetHeight,a=Je(e),s="border-box"===ae.css(e,"boxSizing",!1,a);if(0>=o||null==o){if(o=_(e,t,a),(0>o||null==o)&&(o=e.style[t]),Qe.test(o))return o;i=s&&(ie.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+R(e,t,n||(s?"border":"content"),i,a)+"px"}function A(e,t){for(var n,i,o,a=[],s=0,r=e.length;r>s;s++)i=e[s],i.style&&(a[s]=Ie.get(i,"olddisplay"),n=i.style.display,t?(a[s]||"none"!==n||(i.style.display=""),""===i.style.display&&Ae(i)&&(a[s]=Ie.access(i,"olddisplay",I(i.nodeName)))):(o=Ae(i),"none"===n&&o||Ie.set(i,"olddisplay",o?n:ae.css(i,"display"))));for(s=0;r>s;s++)i=e[s],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[s]||"":"none"));return e}function V(e,t,n,i,o){return new V.prototype.init(e,t,n,i,o)}function O(){return e.setTimeout(function(){ot=void 0}),ot=ae.now()}function $(e,t){var n,i=0,o={height:e};for(t=t?1:0;4>i;i+=2-t)n=De[i],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function L(e,t,n){for(var i,o=(q.tweeners[t]||[]).concat(q.tweeners["*"]),a=0,s=o.length;s>a;a++)if(i=o[a].call(n,t,e))return i}function M(e,t,n){var i,o,a,s,r,l,c,u,d=this,h={},p=e.style,v=e.nodeType&&Ae(e),f=Ie.get(e,"fxshow");n.queue||(r=ae._queueHooks(e,"fx"),null==r.unqueued&&(r.unqueued=0,l=r.empty.fire,r.empty.fire=function(){r.unqueued||l()}),r.unqueued++,d.always(function(){d.always(function(){r.unqueued--,ae.queue(e,"fx").length||r.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=ae.css(e,"display"),u="none"===c?Ie.get(e,"olddisplay")||I(e.nodeName):c,"inline"===u&&"none"===ae.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t)if(o=t[i],st.exec(o)){if(delete t[i],a=a||"toggle"===o,o===(v?"hide":"show")){if("show"!==o||!f||void 0===f[i])continue;v=!0}h[i]=f&&f[i]||ae.style(e,i)}else c=void 0;if(ae.isEmptyObject(h))"inline"===("none"===c?I(e.nodeName):c)&&(p.display=c);else{f?"hidden"in f&&(v=f.hidden):f=Ie.access(e,"fxshow",{}),a&&(f.hidden=!v),v?ae(e).show():d.done(function(){ae(e).hide()}),d.done(function(){var t;Ie.remove(e,"fxshow");for(t in h)ae.style(e,t,h[t])});for(i in h)s=L(v?f[i]:0,i,d),i in f||(f[i]=s.start,v&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}}function P(e,t){var n,i,o,a,s;for(n in e)if(i=ae.camelCase(n),o=t[i],a=e[n],ae.isArray(a)&&(o=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),s=ae.cssHooks[i],s&&"expand"in s){a=s.expand(a),delete e[i];for(n in a)n in e||(e[n]=a[n],t[n]=o)}else t[i]=o}function q(e,t,n){var i,o,a=0,s=q.prefilters.length,r=ae.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=ot||O(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,a=1-i,s=0,l=c.tweens.length;l>s;s++)c.tweens[s].run(a);return r.notifyWith(e,[c,a,n]),1>a&&l?n:(r.resolveWith(e,[c]),!1)},c=r.promise({elem:e,props:ae.extend({},t),opts:ae.extend(!0,{specialEasing:{},easing:ae.easing._default},n),originalProperties:t,originalOptions:n,startTime:ot||O(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ae.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(o)return this;for(o=!0;i>n;n++)c.tweens[n].run(1);return t?(r.notifyWith(e,[c,1,0]),r.resolveWith(e,[c,t])):r.rejectWith(e,[c,t]),this}}),u=c.props;for(P(u,c.opts.specialEasing);s>a;a++)if(i=q.prefilters[a].call(c,e,u,c.opts))return ae.isFunction(i.stop)&&(ae._queueHooks(c.elem,c.opts.queue).stop=ae.proxy(i.stop,i)),i;return ae.map(u,L,c),ae.isFunction(c.opts.start)&&c.opts.start.call(e,c),ae.fx.timer(ae.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function j(e){return e.getAttribute&&e.getAttribute("class")||""}function B(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,o=0,a=t.toLowerCase().match(Se)||[];if(ae.isFunction(n))for(;i=a[o++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function z(e,t,n,i){function o(r){var l;return a[r]=!0,ae.each(e[r]||[],function(e,r){var c=r(t,n,i);return"string"!=typeof c||s||a[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}var a={},s=e===_t;return o(t.dataTypes[0])||!a["*"]&&o("*")}function H(e,t){var n,i,o=ae.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:i||(i={}))[n]=t[n]);return i&&ae.extend(!0,e,i),e}function F(e,t,n){for(var i,o,a,s,r=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in r)if(r[o]&&r[o].test(i)){l.unshift(o);break}if(l[0]in n)a=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){a=o;break}s||(s=o)}a=a||s}return a?(a!==l[0]&&l.unshift(a),n[a]):void 0}function W(e,t,n,i){var o,a,s,r,l,c={},u=e.dataTypes.slice();if(u[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(a=u.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=a,a=u.shift())if("*"===a)a=l;else if("*"!==l&&l!==a){if(s=c[l+" "+a]||c["* "+a],!s)for(o in c)if(r=o.split(" "),r[1]===a&&(s=c[l+" "+r[0]]||c["* "+r[0]])){s===!0?s=c[o]:c[o]!==!0&&(a=r[0],u.unshift(r[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+l+" to "+a}}}return{state:"success",data:t}}function U(e,t,n,i){var o;if(ae.isArray(t))ae.each(t,function(t,o){n||Rt.test(e)?i(e,o):U(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,n,i)});else if(n||"object"!==ae.type(t))i(e,t);else for(o in t)U(e+"["+o+"]",t[o],n,i)}function X(e){return ae.isWindow(e)?e:9===e.nodeType&&e.defaultView}var Y=[],Q=e.document,J=Y.slice,K=Y.concat,G=Y.push,Z=Y.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},oe="2.2.4",ae=function(e,t){return new ae.fn.init(e,t)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,re=/^-ms-/,le=/-([\da-z])/gi,ce=function(e,t){return t.toUpperCase()};ae.fn=ae.prototype={jquery:oe,constructor:ae,selector:"",length:0,toArray:function(){return J.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:J.call(this)},pushStack:function(e){var t=ae.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ae.each(this,e)},map:function(e){return this.pushStack(ae.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:G,sort:Y.sort,splice:Y.splice},ae.extend=ae.fn.extend=function(){var e,t,n,i,o,a,s=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[r]||{},r++),"object"==typeof s||ae.isFunction(s)||(s={}),r===l&&(s=this,r--);l>r;r++)if(null!=(e=arguments[r]))for(t in e)n=s[t],i=e[t],s!==i&&(c&&i&&(ae.isPlainObject(i)||(o=ae.isArray(i)))?(o?(o=!1,a=n&&ae.isArray(n)?n:[]):a=n&&ae.isPlainObject(n)?n:{},s[t]=ae.extend(c,a,i)):void 0!==i&&(s[t]=i));return s},ae.extend({expando:"jQuery"+(oe+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ae.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!ae.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==ae.type(e)||e.nodeType||ae.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=ae.trim(e),e&&(1===e.indexOf("use strict")?(t=Q.createElement("script"),t.text=e,Q.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(re,"ms-").replace(le,ce)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,o=0;if(n(e))for(i=e.length;i>o&&t.call(e[o],o,e[o])!==!1;o++);else for(o in e)if(t.call(e[o],o,e[o])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(se,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?ae.merge(i,"string"==typeof e?[e]:e):G.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:Z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,o=e.length;n>i;i++)e[o++]=t[i];return e.length=o,e},grep:function(e,t,n){for(var i,o=[],a=0,s=e.length,r=!n;s>a;a++)i=!t(e[a],a),i!==r&&o.push(e[a]);return o},map:function(e,t,i){var o,a,s=0,r=[];if(n(e))for(o=e.length;o>s;s++)a=t(e[s],s,i),null!=a&&r.push(a);else for(s in e)a=t(e[s],s,i),null!=a&&r.push(a);return K.apply([],r)},guid:1,proxy:function(e,t){var n,i,o;return"string"==typeof t&&(n=e[t],t=e,e=n),ae.isFunction(e)?(i=J.call(arguments,2),o=function(){return e.apply(t||this,i.concat(J.call(arguments)))},o.guid=e.guid=e.guid||ae.guid++,o):void 0},now:Date.now,support:ie}),"function"==typeof Symbol&&(ae.fn[Symbol.iterator]=Y[Symbol.iterator]),ae.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ue=function(e){function t(e,t,n,i){var o,a,s,r,l,c,d,p,v=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:j)!==A&&D(t),t=t||A,O)){if(11!==f&&(c=ge.exec(e)))if(o=c[1]){if(9===f){if(!(s=t.getElementById(o)))return n;if(s.id===o)return n.push(s),n}else if(v&&(s=v.getElementById(o))&&P(t,s)&&s.id===o)return n.push(s),n}else{if(c[2])return G.apply(n,t.getElementsByTagName(e)),n;if((o=c[3])&&S.getElementsByClassName&&t.getElementsByClassName)return G.apply(n,t.getElementsByClassName(o)),n}if(S.qsa&&!W[e+" "]&&(!$||!$.test(e))){if(1!==f)v=t,p=e;else if("object"!==t.nodeName.toLowerCase()){for((r=t.getAttribute("id"))?r=r.replace(ye,"\\$&"):t.setAttribute("id",r=q),d=I(e),a=d.length,l=he.test(r)?"#"+r:"[id='"+r+"']";a--;)d[a]=l+" "+h(d[a]);p=d.join(","),v=be.test(e)&&u(t.parentNode)||t}if(p)try{return G.apply(n,v.querySelectorAll(p)),n}catch(m){}finally{r===q&&t.removeAttribute("id")}}}return N(e.replace(re,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[q]=!0,e}function o(e){var t=A.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function a(e,t){for(var n=e.split("|"),i=n.length;i--;)C.attrHandle[n[i]]=t}function s(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function r(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var o,a=e([],n.length,t),s=a.length;s--;)n[o=a[s]]&&(n[o]=!(i[o]=n[o]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function h(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function p(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=z++;return t.first?function(t,n,a){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,a)}:function(t,n,s){var r,l,c,u=[B,a];if(s){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if(c=t[q]||(t[q]={}),l=c[t.uniqueID]||(c[t.uniqueID]={}),(r=l[i])&&r[0]===B&&r[1]===a)return u[2]=r[2];if(l[i]=u,u[2]=e(t,n,s))return!0}}}function v(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function f(e,n,i){for(var o=0,a=n.length;a>o;o++)t(e,n[o],i);return i}function m(e,t,n,i,o){for(var a,s=[],r=0,l=e.length,c=null!=t;l>r;r++)(a=e[r])&&(!n||n(a,i,o))&&(s.push(a),c&&t.push(r));return s}function g(e,t,n,o,a,s){return o&&!o[q]&&(o=g(o)),a&&!a[q]&&(a=g(a,s)),i(function(i,s,r,l){var c,u,d,h=[],p=[],v=s.length,g=i||f(t||"*",r.nodeType?[r]:r,[]),b=!e||!i&&t?g:m(g,h,e,r,l),y=n?a||(i?e:v||o)?[]:s:b;if(n&&n(b,y,r,l),o)for(c=m(y,p),o(c,[],r,l),u=c.length;u--;)(d=c[u])&&(y[p[u]]=!(b[p[u]]=d));if(i){if(a||e){if(a){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(b[u]=d);a(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=a?ee(i,d):h[u])>-1&&(i[c]=!(s[c]=d))}}else y=m(y===s?y.splice(v,y.length):y),a?a(null,s,y,l):G.apply(s,y)})}function b(e){for(var t,n,i,o=e.length,a=C.relative[e[0].type],s=a||C.relative[" "],r=a?1:0,l=p(function(e){return e===t},s,!0),c=p(function(e){return ee(t,e)>-1},s,!0),u=[function(e,n,i){var o=!a&&(i||n!==E)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,o}];o>r;r++)if(n=C.relative[e[r].type])u=[p(v(u),n)];else{if(n=C.filter[e[r].type].apply(null,e[r].matches),n[q]){for(i=++r;o>i&&!C.relative[e[i].type];i++);return g(r>1&&v(u),r>1&&h(e.slice(0,r-1).concat({value:" "===e[r-2].type?"*":""})).replace(re,"$1"),n,i>r&&b(e.slice(r,i)),o>i&&b(e=e.slice(i)),o>i&&h(e))}u.push(n)}return v(u)}function y(e,n){var o=n.length>0,a=e.length>0,s=function(i,s,r,l,c){var u,d,h,p=0,v="0",f=i&&[],g=[],b=E,y=i||a&&C.find.TAG("*",c),w=B+=null==b?1:Math.random()||.1,S=y.length;for(c&&(E=s===A||s||c);v!==S&&null!=(u=y[v]);v++){if(a&&u){for(d=0,s||u.ownerDocument===A||(D(u),r=!O);h=e[d++];)if(h(u,s||A,r)){l.push(u);break}c&&(B=w)}o&&((u=!h&&u)&&p--,i&&f.push(u))}if(p+=v,o&&v!==p){for(d=0;h=n[d++];)h(f,g,s,r);if(i){if(p>0)for(;v--;)f[v]||g[v]||(g[v]=J.call(l));g=m(g)}G.apply(l,g),c&&!i&&g.length>0&&p+n.length>1&&t.uniqueSort(l)}return c&&(B=w,E=b),f};return o?i(s):s}var w,S,C,x,T,I,_,N,E,k,R,D,A,V,O,$,L,M,P,q="sizzle"+1*new Date,j=e.document,B=0,z=0,H=n(),F=n(),W=n(),U=function(e,t){return e===t&&(R=!0),0},X=1<<31,Y={}.hasOwnProperty,Q=[],J=Q.pop,K=Q.push,G=Q.push,Z=Q.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),re=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ue=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ae),he=new RegExp("^"+ie+"$"),pe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ve=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,ye=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Se=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Ce=function(){D()};try{G.apply(Q=Z.call(j.childNodes),j.childNodes),Q[j.childNodes.length].nodeType}catch(xe){G={apply:Q.length?function(e,t){K.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}S=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},D=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:j;return i!==A&&9===i.nodeType&&i.documentElement?(A=i,V=A.documentElement,O=!T(A),(n=A.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),S.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),S.getElementsByTagName=o(function(e){return e.appendChild(A.createComment("")),!e.getElementsByTagName("*").length}),S.getElementsByClassName=me.test(A.getElementsByClassName),S.getById=o(function(e){return V.appendChild(e).id=q,!A.getElementsByName||!A.getElementsByName(q).length}),S.getById?(C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&O){var n=t.getElementById(e);return n?[n]:[]}},C.filter.ID=function(e){var t=e.replace(we,Se);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(we,Se);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=S.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):S.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],o=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[o++];)1===n.nodeType&&i.push(n);return i}return a},C.find.CLASS=S.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&O?t.getElementsByClassName(e):void 0},L=[],$=[],(S.qsa=me.test(A.querySelectorAll))&&(o(function(e){V.appendChild(e).innerHTML="<a id='"+q+"'></a><select id='"+q+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&$.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||$.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+q+"-]").length||$.push("~="),e.querySelectorAll(":checked").length||$.push(":checked"),e.querySelectorAll("a#"+q+"+*").length||$.push(".#.+[+~]")}),o(function(e){var t=A.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&$.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||$.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),$.push(",.*:")})),(S.matchesSelector=me.test(M=V.matches||V.webkitMatchesSelector||V.mozMatchesSelector||V.oMatchesSelector||V.msMatchesSelector))&&o(function(e){S.disconnectedMatch=M.call(e,"div"),M.call(e,"[s!='']:x"),L.push("!=",ae)}),$=$.length&&new RegExp($.join("|")),L=L.length&&new RegExp(L.join("|")),t=me.test(V.compareDocumentPosition),P=t||me.test(V.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return R=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!S.sortDetached&&t.compareDocumentPosition(e)===n?e===A||e.ownerDocument===j&&P(j,e)?-1:t===A||t.ownerDocument===j&&P(j,t)?1:k?ee(k,e)-ee(k,t):0:4&n?-1:1)}:function(e,t){if(e===t)return R=!0,0;var n,i=0,o=e.parentNode,a=t.parentNode,r=[e],l=[t];if(!o||!a)return e===A?-1:t===A?1:o?-1:a?1:k?ee(k,e)-ee(k,t):0;if(o===a)return s(e,t);for(n=e;n=n.parentNode;)r.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;r[i]===l[i];)i++;return i?s(r[i],l[i]):r[i]===j?-1:l[i]===j?1:0},A):A},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==A&&D(e),n=n.replace(ue,"='$1']"),S.matchesSelector&&O&&!W[n+" "]&&(!L||!L.test(n))&&(!$||!$.test(n)))try{var i=M.call(e,n);if(i||S.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(o){}return t(n,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&D(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&D(e);var n=C.attrHandle[t.toLowerCase()],i=n&&Y.call(C.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==i?i:S.attributes||!O?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,o=0;if(R=!S.detectDuplicates,k=!S.sortStable&&e.slice(0),e.sort(U),R){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return k=null,e},x=t.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=x(t);return n},C=t.selectors={cacheLength:50,createPseudo:i,match:pe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Se),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Se),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return pe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=I(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Se).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(o){var a=t.attr(o,e);return null==a?"!="===n:n?(a+="","="===n?a===i:"!="===n?a!==i:"^="===n?i&&0===a.indexOf(i):"*="===n?i&&a.indexOf(i)>-1:"$="===n?i&&a.slice(-i.length)===i:"~="===n?(" "+a.replace(se," ")+" ").indexOf(i)>-1:"|="===n?a===i||a.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,o){var a="nth"!==e.slice(0,3),s="last"!==e.slice(-4),r="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,h,p,v,f=a!==s?"nextSibling":"previousSibling",m=t.parentNode,g=r&&t.nodeName.toLowerCase(),b=!l&&!r,y=!1;if(m){if(a){for(;f;){for(h=t;h=h[f];)if(r?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;v=f="only"===e&&!v&&"nextSibling"}return!0}if(v=[s?m.firstChild:m.lastChild],s&&b){for(h=m,d=h[q]||(h[q]={}),u=d[h.uniqueID]||(d[h.uniqueID]={}),c=u[e]||[],p=c[0]===B&&c[1],y=p&&c[2],h=p&&m.childNodes[p];h=++p&&h&&h[f]||(y=p=0)||v.pop();)if(1===h.nodeType&&++y&&h===t){u[e]=[B,p,y];break}}else if(b&&(h=t,d=h[q]||(h[q]={}),u=d[h.uniqueID]||(d[h.uniqueID]={}),c=u[e]||[],p=c[0]===B&&c[1],y=p),y===!1)for(;(h=++p&&h&&h[f]||(y=p=0)||v.pop())&&((r?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++y||(b&&(d=h[q]||(h[q]={}),u=d[h.uniqueID]||(d[h.uniqueID]={}),u[e]=[B,y]),h!==t)););return y-=o,y===i||y%i===0&&y/i>=0}}},PSEUDO:function(e,n){var o,a=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return a[q]?a(n):a.length>1?(o=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,o=a(e,n),s=o.length;s--;)i=ee(e,o[s]),e[i]=!(t[i]=o[s])}):function(e){return a(e,0,o)}):a}},pseudos:{not:i(function(e){var t=[],n=[],o=_(e.replace(re,"$1"));return o[q]?i(function(e,t,n,i){for(var a,s=o(e,null,i,[]),r=e.length;r--;)(a=s[r])&&(e[r]=!(t[r]=a))}):function(e,i,a){return t[0]=e,o(t,null,a,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(we,Se),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Se).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===V},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return fe.test(e.nodeName)},input:function(e){return ve.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){
for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=r(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=l(w);return d.prototype=C.filters=C.pseudos,C.setFilters=new d,I=t.tokenize=function(e,n){var i,o,a,s,r,l,c,u=F[e+" "];if(u)return n?0:u.slice(0);for(r=e,l=[],c=C.preFilter;r;){(!i||(o=le.exec(r)))&&(o&&(r=r.slice(o[0].length)||r),l.push(a=[])),i=!1,(o=ce.exec(r))&&(i=o.shift(),a.push({value:i,type:o[0].replace(re," ")}),r=r.slice(i.length));for(s in C.filter)!(o=pe[s].exec(r))||c[s]&&!(o=c[s](o))||(i=o.shift(),a.push({value:i,type:s,matches:o}),r=r.slice(i.length));if(!i)break}return n?r.length:r?t.error(e):F(e,l).slice(0)},_=t.compile=function(e,t){var n,i=[],o=[],a=W[e+" "];if(!a){for(t||(t=I(e)),n=t.length;n--;)a=b(t[n]),a[q]?i.push(a):o.push(a);a=W(e,y(o,i)),a.selector=e}return a},N=t.select=function(e,t,n,i){var o,a,s,r,l,c="function"==typeof e&&e,d=!i&&I(e=c.selector||e);if(n=n||[],1===d.length){if(a=d[0]=d[0].slice(0),a.length>2&&"ID"===(s=a[0]).type&&S.getById&&9===t.nodeType&&O&&C.relative[a[1].type]){if(t=(C.find.ID(s.matches[0].replace(we,Se),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(o=pe.needsContext.test(e)?0:a.length;o--&&(s=a[o],!C.relative[r=s.type]);)if((l=C.find[r])&&(i=l(s.matches[0].replace(we,Se),be.test(a[0].type)&&u(t.parentNode)||t))){if(a.splice(o,1),e=i.length&&h(a),!e)return G.apply(n,i),n;break}}return(c||_(e,d))(i,t,!O,n,!t||be.test(e)&&u(t.parentNode)||t),n},S.sortStable=q.split("").sort(U).join("")===q,S.detectDuplicates=!!R,D(),S.sortDetached=o(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||a("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),S.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||a("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||a(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);ae.find=ue,ae.expr=ue.selectors,ae.expr[":"]=ae.expr.pseudos,ae.uniqueSort=ae.unique=ue.uniqueSort,ae.text=ue.getText,ae.isXMLDoc=ue.isXML,ae.contains=ue.contains;var de=function(e,t,n){for(var i=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ae(e).is(n))break;i.push(e)}return i},he=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},pe=ae.expr.match.needsContext,ve=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;ae.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ae.find.matchesSelector(i,e)?[i]:[]:ae.find.matches(e,ae.grep(t,function(e){return 1===e.nodeType}))},ae.fn.extend({find:function(e){var t,n=this.length,i=[],o=this;if("string"!=typeof e)return this.pushStack(ae(e).filter(function(){for(t=0;n>t;t++)if(ae.contains(o[t],this))return!0}));for(t=0;n>t;t++)ae.find(e,o[t],i);return i=this.pushStack(n>1?ae.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&pe.test(e)?ae(e):e||[],!1).length}});var me,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,be=ae.fn.init=function(e,t,n){var i,o;if(!e)return this;if(n=n||me,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ge.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ae?t[0]:t,ae.merge(this,ae.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Q,!0)),ve.test(i[1])&&ae.isPlainObject(t))for(i in t)ae.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return o=Q.getElementById(i[2]),o&&o.parentNode&&(this.length=1,this[0]=o),this.context=Q,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ae.isFunction(e)?void 0!==n.ready?n.ready(e):e(ae):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ae.makeArray(e,this))};be.prototype=ae.fn,me=ae(Q);var ye=/^(?:parents|prev(?:Until|All))/,we={children:!0,contents:!0,next:!0,prev:!0};ae.fn.extend({has:function(e){var t=ae(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(ae.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,o=this.length,a=[],s=pe.test(e)||"string"!=typeof e?ae(e,t||this.context):0;o>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&ae.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?ae.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?Z.call(ae(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ae.uniqueSort(ae.merge(this.get(),ae(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ae.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return de(e,"parentNode")},parentsUntil:function(e,t,n){return de(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return de(e,"nextSibling")},prevAll:function(e){return de(e,"previousSibling")},nextUntil:function(e,t,n){return de(e,"nextSibling",n)},prevUntil:function(e,t,n){return de(e,"previousSibling",n)},siblings:function(e){return he((e.parentNode||{}).firstChild,e)},children:function(e){return he(e.firstChild)},contents:function(e){return e.contentDocument||ae.merge([],e.childNodes)}},function(e,t){ae.fn[e]=function(n,i){var o=ae.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(o=ae.filter(i,o)),this.length>1&&(we[e]||ae.uniqueSort(o),ye.test(e)&&o.reverse()),this.pushStack(o)}});var Se=/\S+/g;ae.Callbacks=function(e){e="string"==typeof e?a(e):ae.extend({},e);var t,n,i,o,s=[],r=[],l=-1,c=function(){for(o=e.once,i=t=!0;r.length;l=-1)for(n=r.shift();++l<s.length;)s[l].apply(n[0],n[1])===!1&&e.stopOnFalse&&(l=s.length,n=!1);e.memory||(n=!1),t=!1,o&&(s=n?[]:"")},u={add:function(){return s&&(n&&!t&&(l=s.length-1,r.push(n)),function i(t){ae.each(t,function(t,n){ae.isFunction(n)?e.unique&&u.has(n)||s.push(n):n&&n.length&&"string"!==ae.type(n)&&i(n)})}(arguments),n&&!t&&c()),this},remove:function(){return ae.each(arguments,function(e,t){for(var n;(n=ae.inArray(t,s,n))>-1;)s.splice(n,1),l>=n&&l--}),this},has:function(e){return e?ae.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return o=r=[],s=n="",this},disabled:function(){return!s},lock:function(){return o=r=[],n||(s=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],r.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},ae.extend({Deferred:function(e){var t=[["resolve","done",ae.Callbacks("once memory"),"resolved"],["reject","fail",ae.Callbacks("once memory"),"rejected"],["notify","progress",ae.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ae.Deferred(function(n){ae.each(t,function(t,a){var s=ae.isFunction(e[t])&&e[t];o[a[1]](function(){var e=s&&s.apply(this,arguments);e&&ae.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[a[0]+"With"](this===i?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ae.extend(e,i):i}},o={};return i.pipe=i.then,ae.each(t,function(e,a){var s=a[2],r=a[3];i[a[1]]=s.add,r&&s.add(function(){n=r},t[1^e][2].disable,t[2][2].lock),o[a[0]]=function(){return o[a[0]+"With"](this===o?i:this,arguments),this},o[a[0]+"With"]=s.fireWith}),i.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,i,o=0,a=J.call(arguments),s=a.length,r=1!==s||e&&ae.isFunction(e.promise)?s:0,l=1===r?e:ae.Deferred(),c=function(e,n,i){return function(o){n[e]=this,i[e]=arguments.length>1?J.call(arguments):o,i===t?l.notifyWith(n,i):--r||l.resolveWith(n,i)}};if(s>1)for(t=new Array(s),n=new Array(s),i=new Array(s);s>o;o++)a[o]&&ae.isFunction(a[o].promise)?a[o].promise().progress(c(o,n,t)).done(c(o,i,a)).fail(l.reject):--r;return r||l.resolveWith(i,a),l.promise()}});var Ce;ae.fn.ready=function(e){return ae.ready.promise().done(e),this},ae.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ae.readyWait++:ae.ready(!0)},ready:function(e){(e===!0?--ae.readyWait:ae.isReady)||(ae.isReady=!0,e!==!0&&--ae.readyWait>0||(Ce.resolveWith(Q,[ae]),ae.fn.triggerHandler&&(ae(Q).triggerHandler("ready"),ae(Q).off("ready"))))}}),ae.ready.promise=function(t){return Ce||(Ce=ae.Deferred(),"complete"===Q.readyState||"loading"!==Q.readyState&&!Q.documentElement.doScroll?e.setTimeout(ae.ready):(Q.addEventListener("DOMContentLoaded",s),e.addEventListener("load",s))),Ce.promise(t)},ae.ready.promise();var xe=function(e,t,n,i,o,a,s){var r=0,l=e.length,c=null==n;if("object"===ae.type(n)){o=!0;for(r in n)xe(e,t,r,n[r],!0,a,s)}else if(void 0!==i&&(o=!0,ae.isFunction(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(ae(e),n)})),t))for(;l>r;r++)t(e[r],n,s?i:i.call(e[r],r,t(e[r],n)));return o?e:c?t.call(e):l?t(e[0],n):a},Te=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};r.uid=1,r.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!Te(e))return{};var t=e[this.expando];return t||(t={},Te(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,o=this.cache(e);if("string"==typeof t)o[t]=n;else for(i in t)o[i]=t[i];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,ae.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,o,a=e[this.expando];if(void 0!==a){if(void 0===t)this.register(e);else{ae.isArray(t)?i=t.concat(t.map(ae.camelCase)):(o=ae.camelCase(t),t in a?i=[t,o]:(i=o,i=i in a?[i]:i.match(Se)||[])),n=i.length;for(;n--;)delete a[i[n]]}(void 0===t||ae.isEmptyObject(a))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ae.isEmptyObject(t)}};var Ie=new r,_e=new r,Ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ee=/[A-Z]/g;ae.extend({hasData:function(e){return _e.hasData(e)||Ie.hasData(e)},data:function(e,t,n){return _e.access(e,t,n)},removeData:function(e,t){_e.remove(e,t)},_data:function(e,t,n){return Ie.access(e,t,n)},_removeData:function(e,t){Ie.remove(e,t)}}),ae.fn.extend({data:function(e,t){var n,i,o,a=this[0],s=a&&a.attributes;if(void 0===e){if(this.length&&(o=_e.get(a),1===a.nodeType&&!Ie.get(a,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(i=s[n].name,0===i.indexOf("data-")&&(i=ae.camelCase(i.slice(5)),l(a,i,o[i])));Ie.set(a,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){_e.set(this,e)}):xe(this,function(t){var n,i;if(a&&void 0===t){if(n=_e.get(a,e)||_e.get(a,e.replace(Ee,"-$&").toLowerCase()),void 0!==n)return n;if(i=ae.camelCase(e),n=_e.get(a,i),void 0!==n)return n;if(n=l(a,i,void 0),void 0!==n)return n}else i=ae.camelCase(e),this.each(function(){var n=_e.get(this,i);_e.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&_e.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){_e.remove(this,e)})}}),ae.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=Ie.get(e,t),n&&(!i||ae.isArray(n)?i=Ie.access(e,t,ae.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ae.queue(e,t),i=n.length,o=n.shift(),a=ae._queueHooks(e,t),s=function(){ae.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),i--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,s,a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ie.get(e,n)||Ie.access(e,n,{empty:ae.Callbacks("once memory").add(function(){Ie.remove(e,[t+"queue",n])})})}}),ae.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ae.queue(this[0],e):void 0===t?this:this.each(function(){var n=ae.queue(this,e,t);ae._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ae.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ae.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,o=ae.Deferred(),a=this,s=this.length,r=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=Ie.get(a[s],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(r));return r(),o.promise(t)}});var ke=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Re=new RegExp("^(?:([+-])=|)("+ke+")([a-z%]*)$","i"),De=["Top","Right","Bottom","Left"],Ae=function(e,t){return e=t||e,"none"===ae.css(e,"display")||!ae.contains(e.ownerDocument,e)},Ve=/^(?:checkbox|radio)$/i,Oe=/<([\w:-]+)/,$e=/^$|\/(?:java|ecma)script/i,Le={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Le.optgroup=Le.option,Le.tbody=Le.tfoot=Le.colgroup=Le.caption=Le.thead,Le.th=Le.td;var Me=/<|&#?\w+;/;!function(){var e=Q.createDocumentFragment(),t=e.appendChild(Q.createElement("div")),n=Q.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Pe=/^key/,qe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,je=/^([^.]*)(?:\.(.+)|)/;ae.event={global:{},add:function(e,t,n,i,o){var a,s,r,l,c,u,d,h,p,v,f,m=Ie.get(e);if(m)for(n.handler&&(a=n,n=a.handler,o=a.selector),n.guid||(n.guid=ae.guid++),(l=m.events)||(l=m.events={}),(s=m.handle)||(s=m.handle=function(t){return"undefined"!=typeof ae&&ae.event.triggered!==t.type?ae.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Se)||[""],c=t.length;c--;)r=je.exec(t[c])||[],p=f=r[1],v=(r[2]||"").split(".").sort(),p&&(d=ae.event.special[p]||{},p=(o?d.delegateType:d.bindType)||p,d=ae.event.special[p]||{},u=ae.extend({type:p,origType:f,data:i,handler:n,guid:n.guid,selector:o,needsContext:o&&ae.expr.match.needsContext.test(o),namespace:v.join(".")},a),(h=l[p])||(h=l[p]=[],h.delegateCount=0,d.setup&&d.setup.call(e,i,v,s)!==!1||e.addEventListener&&e.addEventListener(p,s)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),o?h.splice(h.delegateCount++,0,u):h.push(u),ae.event.global[p]=!0)},remove:function(e,t,n,i,o){var a,s,r,l,c,u,d,h,p,v,f,m=Ie.hasData(e)&&Ie.get(e);if(m&&(l=m.events)){for(t=(t||"").match(Se)||[""],c=t.length;c--;)if(r=je.exec(t[c])||[],p=f=r[1],v=(r[2]||"").split(".").sort(),p){for(d=ae.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,h=l[p]||[],r=r[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=a=h.length;a--;)u=h[a],!o&&f!==u.origType||n&&n.guid!==u.guid||r&&!r.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(h.splice(a,1),u.selector&&h.delegateCount--,d.remove&&d.remove.call(e,u));s&&!h.length&&(d.teardown&&d.teardown.call(e,v,m.handle)!==!1||ae.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)ae.event.remove(e,p+t[c],n,i,!0);ae.isEmptyObject(l)&&Ie.remove(e,"handle events")}},dispatch:function(e){e=ae.event.fix(e);var t,n,i,o,a,s=[],r=J.call(arguments),l=(Ie.get(this,"events")||{})[e.type]||[],c=ae.event.special[e.type]||{};if(r[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=ae.event.handlers.call(this,e,l),t=0;(o=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(a=o.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.rnamespace||e.rnamespace.test(a.namespace))&&(e.handleObj=a,e.data=a.data,i=((ae.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,r),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,o,a,s=[],r=t.delegateCount,l=e.target;if(r&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(i=[],n=0;r>n;n++)a=t[n],o=a.selector+" ",void 0===i[o]&&(i[o]=a.needsContext?ae(o,this).index(l)>-1:ae.find(o,this,null,[l]).length),i[o]&&i.push(a);i.length&&s.push({elem:l,handlers:i})}return r<t.length&&s.push({elem:this,handlers:t.slice(r)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,o,a=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Q,i=n.documentElement,o=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||o&&o.scrollLeft||0)-(i&&i.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||o&&o.scrollTop||0)-(i&&i.clientTop||o&&o.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[ae.expando])return e;var t,n,i,o=e.type,a=e,s=this.fixHooks[o];for(s||(this.fixHooks[o]=s=qe.test(o)?this.mouseHooks:Pe.test(o)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new ae.Event(a),t=i.length;t--;)n=i[t],e[n]=a[n];return e.target||(e.target=Q),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,a):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ae.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return ae.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ae.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ae.Event=function(e,t){return this instanceof ae.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?p:v):this.type=e,t&&ae.extend(this,t),this.timeStamp=e&&e.timeStamp||ae.now(),void(this[ae.expando]=!0)):new ae.Event(e,t)},ae.Event.prototype={constructor:ae.Event,isDefaultPrevented:v,isPropagationStopped:v,isImmediatePropagationStopped:v,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ae.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ae.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,a=e.handleObj;return(!o||o!==i&&!ae.contains(i,o))&&(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}}),ae.fn.extend({on:function(e,t,n,i){return m(this,e,t,n,i)},one:function(e,t,n,i){return m(this,e,t,n,i,1)},off:function(e,t,n){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ae(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=v),this.each(function(){ae.event.remove(this,e,n,t)})}});var Be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ze=/<script|<style|<link/i,He=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^true\/(.*)/,We=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ae.extend({htmlPrefilter:function(e){return e.replace(Be,"<$1></$2>")},clone:function(e,t,n){var i,o,a,s,r=e.cloneNode(!0),l=ae.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ae.isXMLDoc(e)))for(s=u(r),a=u(e),i=0,o=a.length;o>i;i++)S(a[i],s[i]);if(t)if(n)for(a=a||u(e),s=s||u(r),i=0,o=a.length;o>i;i++)w(a[i],s[i]);else w(e,r);return s=u(r,"script"),s.length>0&&d(s,!l&&u(e,"script")),r},cleanData:function(e){for(var t,n,i,o=ae.event.special,a=0;void 0!==(n=e[a]);a++)if(Te(n)){if(t=n[Ie.expando]){if(t.events)for(i in t.events)o[i]?ae.event.remove(n,i):ae.removeEvent(n,i,t.handle);n[Ie.expando]=void 0}n[_e.expando]&&(n[_e.expando]=void 0)}}}),ae.fn.extend({domManip:C,detach:function(e){return x(this,e,!0)},remove:function(e){return x(this,e)},text:function(e){return xe(this,function(e){return void 0===e?ae.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.appendChild(e)}})},prepend:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ae.cleanData(u(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return ae.clone(this,e,t)})},html:function(e){return xe(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ze.test(e)&&!Le[(Oe.exec(e)||["",""])[1].toLowerCase()]){e=ae.htmlPrefilter(e);try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(ae.cleanData(u(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return C(this,arguments,function(t){var n=this.parentNode;ae.inArray(this,e)<0&&(ae.cleanData(u(this)),n&&n.replaceChild(t,this))},e)}}),ae.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ae.fn[e]=function(e){for(var n,i=[],o=ae(e),a=o.length-1,s=0;a>=s;s++)n=s===a?this:this.clone(!0),ae(o[s])[t](n),G.apply(i,n.get());return this.pushStack(i)}});var Ue,Xe={HTML:"block",BODY:"block"},Ye=/^margin/,Qe=new RegExp("^("+ke+")(?!px)[a-z%]+$","i"),Je=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ke=function(e,t,n,i){var o,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];o=n.apply(e,i||[]);for(a in t)e.style[a]=s[a];return o},Ge=Q.documentElement;!function(){function t(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",r.innerHTML="",Ge.appendChild(s);var t=e.getComputedStyle(r);n="1%"!==t.top,a="2px"===t.marginLeft,i="4px"===t.width,r.style.marginRight="50%",o="4px"===t.marginRight,Ge.removeChild(s)}var n,i,o,a,s=Q.createElement("div"),r=Q.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===r.style.backgroundClip,s.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",s.appendChild(r),ae.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),o},reliableMarginLeft:function(){return null==i&&t(),a},reliableMarginRight:function(){var t,n=r.appendChild(Q.createElement("div"));return n.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",r.style.width="1px",Ge.appendChild(s),t=!parseFloat(e.getComputedStyle(n).marginRight),Ge.removeChild(s),r.removeChild(n),t}}))}();var Ze=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],it=Q.createElement("div").style;ae.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,r=ae.camelCase(t),l=e.style;return t=ae.cssProps[r]||(ae.cssProps[r]=E(r)||r),s=ae.cssHooks[t]||ae.cssHooks[r],void 0===n?s&&"get"in s&&void 0!==(o=s.get(e,!1,i))?o:l[t]:(a=typeof n,"string"===a&&(o=Re.exec(n))&&o[1]&&(n=c(e,t,o),a="number"),null!=n&&n===n&&("number"===a&&(n+=o&&o[3]||(ae.cssNumber[r]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,i))||(l[t]=n)),void 0)}},css:function(e,t,n,i){var o,a,s,r=ae.camelCase(t);return t=ae.cssProps[r]||(ae.cssProps[r]=E(r)||r),s=ae.cssHooks[t]||ae.cssHooks[r],s&&"get"in s&&(o=s.get(e,!0,n)),void 0===o&&(o=_(e,t,i)),"normal"===o&&t in tt&&(o=tt[t]),""===n||n?(a=parseFloat(o),n===!0||isFinite(a)?a||0:o):o}}),ae.each(["height","width"],function(e,t){ae.cssHooks[t]={get:function(e,n,i){return n?Ze.test(ae.css(e,"display"))&&0===e.offsetWidth?Ke(e,et,function(){return D(e,t,i)}):D(e,t,i):void 0},set:function(e,n,i){var o,a=i&&Je(e),s=i&&R(e,t,i,"border-box"===ae.css(e,"boxSizing",!1,a),a);return s&&(o=Re.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=ae.css(e,t)),k(e,n,s)}}}),ae.cssHooks.marginLeft=N(ie.reliableMarginLeft,function(e,t){return t?(parseFloat(_(e,"marginLeft"))||e.getBoundingClientRect().left-Ke(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),ae.cssHooks.marginRight=N(ie.reliableMarginRight,function(e,t){return t?Ke(e,{display:"inline-block"},_,[e,"marginRight"]):void 0}),ae.each({margin:"",padding:"",border:"Width"},function(e,t){ae.cssHooks[e+t]={expand:function(n){for(var i=0,o={},a="string"==typeof n?n.split(" "):[n];4>i;i++)o[e+De[i]+t]=a[i]||a[i-2]||a[0];return o}},Ye.test(e)||(ae.cssHooks[e+t].set=k)}),ae.fn.extend({css:function(e,t){return xe(this,function(e,t,n){var i,o,a={},s=0;if(ae.isArray(t)){for(i=Je(e),o=t.length;o>s;s++)a[t[s]]=ae.css(e,t[s],!1,i);return a}return void 0!==n?ae.style(e,t,n):ae.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ae(this)?ae(this).show():ae(this).hide()})}}),ae.Tween=V,V.prototype={constructor:V,init:function(e,t,n,i,o,a){this.elem=e,this.prop=n,this.easing=o||ae.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(ae.cssNumber[n]?"":"px")},cur:function(){var e=V.propHooks[this.prop];return e&&e.get?e.get(this):V.propHooks._default.get(this)},run:function(e){var t,n=V.propHooks[this.prop];return this.options.duration?this.pos=t=ae.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):V.propHooks._default.set(this),this}},V.prototype.init.prototype=V.prototype,V.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ae.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ae.fx.step[e.prop]?ae.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ae.cssProps[e.prop]]&&!ae.cssHooks[e.prop]?e.elem[e.prop]=e.now:ae.style(e.elem,e.prop,e.now+e.unit)}}},V.propHooks.scrollTop=V.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ae.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ae.fx=V.prototype.init,ae.fx.step={};var ot,at,st=/^(?:toggle|show|hide)$/,rt=/queueHooks$/;ae.Animation=ae.extend(q,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return c(n.elem,e,Re.exec(t),n),n}]},tweener:function(e,t){ae.isFunction(e)?(t=e,e=["*"]):e=e.match(Se);for(var n,i=0,o=e.length;o>i;i++)n=e[i],q.tweeners[n]=q.tweeners[n]||[],q.tweeners[n].unshift(t)},prefilters:[M],prefilter:function(e,t){t?q.prefilters.unshift(e):q.prefilters.push(e)}}),ae.speed=function(e,t,n){var i=e&&"object"==typeof e?ae.extend({},e):{complete:n||!n&&t||ae.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ae.isFunction(t)&&t};return i.duration=ae.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ae.fx.speeds?ae.fx.speeds[i.duration]:ae.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){ae.isFunction(i.old)&&i.old.call(this),i.queue&&ae.dequeue(this,i.queue)},i},ae.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=ae.isEmptyObject(e),a=ae.speed(t,n,i),s=function(){var t=q(this,ae.extend({},e),a);(o||Ie.get(this,"finish"))&&t.stop(!0)};return s.finish=s,o||a.queue===!1?this.each(s):this.queue(a.queue,s)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",a=ae.timers,s=Ie.get(this);if(o)s[o]&&s[o].stop&&i(s[o]);else for(o in s)s[o]&&s[o].stop&&rt.test(o)&&i(s[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(n),t=!1,a.splice(o,1));(t||!n)&&ae.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Ie.get(this),i=n[e+"queue"],o=n[e+"queueHooks"],a=ae.timers,s=i?i.length:0;for(n.finish=!0,ae.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;s>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ae.each(["toggle","show","hide"],function(e,t){var n=ae.fn[t];ae.fn[t]=function(e,i,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate($(t,!0),e,i,o)}}),ae.each({slideDown:$("show"),slideUp:$("hide"),slideToggle:$("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ae.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ae.timers=[],ae.fx.tick=function(){var e,t=0,n=ae.timers;for(ot=ae.now();t<n.length;t++)e=n[t],
e()||n[t]!==e||n.splice(t--,1);n.length||ae.fx.stop(),ot=void 0},ae.fx.timer=function(e){ae.timers.push(e),e()?ae.fx.start():ae.timers.pop()},ae.fx.interval=13,ae.fx.start=function(){at||(at=e.setInterval(ae.fx.tick,ae.fx.interval))},ae.fx.stop=function(){e.clearInterval(at),at=null},ae.fx.speeds={slow:600,fast:200,_default:400},ae.fn.delay=function(t,n){return t=ae.fx?ae.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var o=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(o)}})},function(){var e=Q.createElement("input"),t=Q.createElement("select"),n=t.appendChild(Q.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=Q.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var lt,ct=ae.expr.attrHandle;ae.fn.extend({attr:function(e,t){return xe(this,ae.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ae.removeAttr(this,e)})}}),ae.extend({attr:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"==typeof e.getAttribute?ae.prop(e,t,n):(1===a&&ae.isXMLDoc(e)||(t=t.toLowerCase(),o=ae.attrHooks[t]||(ae.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void ae.removeAttr(e,t):o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(i=o.get(e,t))?i:(i=ae.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&ae.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,o=0,a=t&&t.match(Se);if(a&&1===e.nodeType)for(;n=a[o++];)i=ae.propFix[n]||n,ae.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),lt={set:function(e,t,n){return t===!1?ae.removeAttr(e,n):e.setAttribute(n,n),n}},ae.each(ae.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ct[t]||ae.find.attr;ct[t]=function(e,t,i){var o,a;return i||(a=ct[t],ct[t]=o,o=null!=n(e,t,i)?t.toLowerCase():null,ct[t]=a),o}});var ut=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;ae.fn.extend({prop:function(e,t){return xe(this,ae.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ae.propFix[e]||e]})}}),ae.extend({prop:function(e,t,n){var i,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&ae.isXMLDoc(e)||(t=ae.propFix[t]||t,o=ae.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(i=o.set(e,n,t))?i:e[t]=n:o&&"get"in o&&null!==(i=o.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ae.find.attr(e,"tabindex");return t?parseInt(t,10):ut.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ie.optSelected||(ae.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ae.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ae.propFix[this.toLowerCase()]=this});var ht=/[\t\r\n\f]/g;ae.fn.extend({addClass:function(e){var t,n,i,o,a,s,r,l=0;if(ae.isFunction(e))return this.each(function(t){ae(this).addClass(e.call(this,t,j(this)))});if("string"==typeof e&&e)for(t=e.match(Se)||[];n=this[l++];)if(o=j(n),i=1===n.nodeType&&(" "+o+" ").replace(ht," ")){for(s=0;a=t[s++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r=ae.trim(i),o!==r&&n.setAttribute("class",r)}return this},removeClass:function(e){var t,n,i,o,a,s,r,l=0;if(ae.isFunction(e))return this.each(function(t){ae(this).removeClass(e.call(this,t,j(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Se)||[];n=this[l++];)if(o=j(n),i=1===n.nodeType&&(" "+o+" ").replace(ht," ")){for(s=0;a=t[s++];)for(;i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");r=ae.trim(i),o!==r&&n.setAttribute("class",r)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ae.isFunction(e)?this.each(function(n){ae(this).toggleClass(e.call(this,n,j(this),t),t)}):this.each(function(){var t,i,o,a;if("string"===n)for(i=0,o=ae(this),a=e.match(Se)||[];t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(void 0===e||"boolean"===n)&&(t=j(this),t&&Ie.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Ie.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+j(n)+" ").replace(ht," ").indexOf(t)>-1)return!0;return!1}});var pt=/\r/g,vt=/[\x20\t\r\n\f]+/g;ae.fn.extend({val:function(e){var t,n,i,o=this[0];{if(arguments.length)return i=ae.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=i?e.call(this,n,ae(this).val()):e,null==o?o="":"number"==typeof o?o+="":ae.isArray(o)&&(o=ae.map(o,function(e){return null==e?"":e+""})),t=ae.valHooks[this.type]||ae.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=ae.valHooks[o.type]||ae.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(pt,""):null==n?"":n)}}}),ae.extend({valHooks:{option:{get:function(e){var t=ae.find.attr(e,"value");return null!=t?t:ae.trim(ae.text(e)).replace(vt," ")}},select:{get:function(e){for(var t,n,i=e.options,o=e.selectedIndex,a="select-one"===e.type||0>o,s=a?null:[],r=a?o+1:i.length,l=0>o?r:a?o:0;r>l;l++)if(n=i[l],(n.selected||l===o)&&(ie.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ae.nodeName(n.parentNode,"optgroup"))){if(t=ae(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,o=e.options,a=ae.makeArray(t),s=o.length;s--;)i=o[s],(i.selected=ae.inArray(ae.valHooks.option.get(i),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),ae.each(["radio","checkbox"],function(){ae.valHooks[this]={set:function(e,t){return ae.isArray(t)?e.checked=ae.inArray(ae(e).val(),t)>-1:void 0}},ie.checkOn||(ae.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ft=/^(?:focusinfocus|focusoutblur)$/;ae.extend(ae.event,{trigger:function(t,n,i,o){var a,s,r,l,c,u,d,h=[i||Q],p=ne.call(t,"type")?t.type:t,v=ne.call(t,"namespace")?t.namespace.split("."):[];if(s=r=i=i||Q,3!==i.nodeType&&8!==i.nodeType&&!ft.test(p+ae.event.triggered)&&(p.indexOf(".")>-1&&(v=p.split("."),p=v.shift(),v.sort()),c=p.indexOf(":")<0&&"on"+p,t=t[ae.expando]?t:new ae.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:ae.makeArray(n,[t]),d=ae.event.special[p]||{},o||!d.trigger||d.trigger.apply(i,n)!==!1)){if(!o&&!d.noBubble&&!ae.isWindow(i)){for(l=d.delegateType||p,ft.test(l+p)||(s=s.parentNode);s;s=s.parentNode)h.push(s),r=s;r===(i.ownerDocument||Q)&&h.push(r.defaultView||r.parentWindow||e)}for(a=0;(s=h[a++])&&!t.isPropagationStopped();)t.type=a>1?l:d.bindType||p,u=(Ie.get(s,"events")||{})[t.type]&&Ie.get(s,"handle"),u&&u.apply(s,n),u=c&&s[c],u&&u.apply&&Te(s)&&(t.result=u.apply(s,n),t.result===!1&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||d._default&&d._default.apply(h.pop(),n)!==!1||!Te(i)||c&&ae.isFunction(i[p])&&!ae.isWindow(i)&&(r=i[c],r&&(i[c]=null),ae.event.triggered=p,i[p](),ae.event.triggered=void 0,r&&(i[c]=r)),t.result}},simulate:function(e,t,n){var i=ae.extend(new ae.Event,n,{type:e,isSimulated:!0});ae.event.trigger(i,null,t)}}),ae.fn.extend({trigger:function(e,t){return this.each(function(){ae.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ae.event.trigger(e,t,n,!0):void 0}}),ae.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ae.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ae.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||ae.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ae.event.simulate(t,e.target,ae.event.fix(e))};ae.event.special[t]={setup:function(){var i=this.ownerDocument||this,o=Ie.access(i,t);o||i.addEventListener(e,n,!0),Ie.access(i,t,(o||0)+1)},teardown:function(){var i=this.ownerDocument||this,o=Ie.access(i,t)-1;o?Ie.access(i,t,o):(i.removeEventListener(e,n,!0),Ie.remove(i,t))}}});var mt=e.location,gt=ae.now(),bt=/\?/;ae.parseJSON=function(e){return JSON.parse(e+"")},ae.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(i){n=void 0}return(!n||n.getElementsByTagName("parsererror").length)&&ae.error("Invalid XML: "+t),n};var yt=/#.*$/,wt=/([?&])_=[^&]*/,St=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ct=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xt=/^(?:GET|HEAD)$/,Tt=/^\/\//,It={},_t={},Nt="*/".concat("*"),Et=Q.createElement("a");Et.href=mt.href,ae.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt.href,type:"GET",isLocal:Ct.test(mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ae.parseJSON,"text xml":ae.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?H(H(e,ae.ajaxSettings),t):H(ae.ajaxSettings,e)},ajaxPrefilter:B(It),ajaxTransport:B(_t),ajax:function(t,n){function i(t,n,i,r){var c,d,b,y,S,x=n;2!==w&&(w=2,l&&e.clearTimeout(l),o=void 0,s=r||"",C.readyState=t>0?4:0,c=t>=200&&300>t||304===t,i&&(y=F(h,C,i)),y=W(h,y,C,c),c?(h.ifModified&&(S=C.getResponseHeader("Last-Modified"),S&&(ae.lastModified[a]=S),S=C.getResponseHeader("etag"),S&&(ae.etag[a]=S)),204===t||"HEAD"===h.type?x="nocontent":304===t?x="notmodified":(x=y.state,d=y.data,b=y.error,c=!b)):(b=x,(t||!x)&&(x="error",0>t&&(t=0))),C.status=t,C.statusText=(n||x)+"",c?f.resolveWith(p,[d,x,C]):f.rejectWith(p,[C,x,b]),C.statusCode(g),g=void 0,u&&v.trigger(c?"ajaxSuccess":"ajaxError",[C,h,c?d:b]),m.fireWith(p,[C,x]),u&&(v.trigger("ajaxComplete",[C,h]),--ae.active||ae.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var o,a,s,r,l,c,u,d,h=ae.ajaxSetup({},n),p=h.context||h,v=h.context&&(p.nodeType||p.jquery)?ae(p):ae.event,f=ae.Deferred(),m=ae.Callbacks("once memory"),g=h.statusCode||{},b={},y={},w=0,S="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!r)for(r={};t=St.exec(s);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,b[e]=t),this},overrideMimeType:function(e){return w||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>w)for(t in e)g[t]=[g[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||S;return o&&o.abort(t),i(0,t),this}};if(f.promise(C).complete=m.add,C.success=C.done,C.error=C.fail,h.url=((t||h.url||mt.href)+"").replace(yt,"").replace(Tt,mt.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=ae.trim(h.dataType||"*").toLowerCase().match(Se)||[""],null==h.crossDomain){c=Q.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=Et.protocol+"//"+Et.host!=c.protocol+"//"+c.host}catch(x){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ae.param(h.data,h.traditional)),z(It,h,n,C),2===w)return C;u=ae.event&&h.global,u&&0===ae.active++&&ae.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!xt.test(h.type),a=h.url,h.hasContent||(h.data&&(a=h.url+=(bt.test(a)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=wt.test(a)?a.replace(wt,"$1_="+gt++):a+(bt.test(a)?"&":"?")+"_="+gt++)),h.ifModified&&(ae.lastModified[a]&&C.setRequestHeader("If-Modified-Since",ae.lastModified[a]),ae.etag[a]&&C.setRequestHeader("If-None-Match",ae.etag[a])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",h.contentType),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Nt+"; q=0.01":""):h.accepts["*"]);for(d in h.headers)C.setRequestHeader(d,h.headers[d]);if(h.beforeSend&&(h.beforeSend.call(p,C,h)===!1||2===w))return C.abort();S="abort";for(d in{success:1,error:1,complete:1})C[d](h[d]);if(o=z(_t,h,n,C)){if(C.readyState=1,u&&v.trigger("ajaxSend",[C,h]),2===w)return C;h.async&&h.timeout>0&&(l=e.setTimeout(function(){C.abort("timeout")},h.timeout));try{w=1,o.send(b,i)}catch(x){if(!(2>w))throw x;i(-1,x)}}else i(-1,"No Transport");return C},getJSON:function(e,t,n){return ae.get(e,t,n,"json")},getScript:function(e,t){return ae.get(e,void 0,t,"script")}}),ae.each(["get","post"],function(e,t){ae[t]=function(e,n,i,o){return ae.isFunction(n)&&(o=o||i,i=n,n=void 0),ae.ajax(ae.extend({url:e,type:t,dataType:o,data:n,success:i},ae.isPlainObject(e)&&e))}}),ae._evalUrl=function(e){return ae.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ae.fn.extend({wrapAll:function(e){var t;return ae.isFunction(e)?this.each(function(t){ae(this).wrapAll(e.call(this,t))}):(this[0]&&(t=ae(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return ae.isFunction(e)?this.each(function(t){ae(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ae(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ae.isFunction(e);return this.each(function(n){ae(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ae.nodeName(this,"body")||ae(this).replaceWith(this.childNodes)}).end()}}),ae.expr.filters.hidden=function(e){return!ae.expr.filters.visible(e)},ae.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var kt=/%20/g,Rt=/\[\]$/,Dt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Vt=/^(?:input|select|textarea|keygen)/i;ae.param=function(e,t){var n,i=[],o=function(e,t){t=ae.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ae.ajaxSettings&&ae.ajaxSettings.traditional),ae.isArray(e)||e.jquery&&!ae.isPlainObject(e))ae.each(e,function(){o(this.name,this.value)});else for(n in e)U(n,e[n],t,o);return i.join("&").replace(kt,"+")},ae.fn.extend({serialize:function(){return ae.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ae.prop(this,"elements");return e?ae.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ae(this).is(":disabled")&&Vt.test(this.nodeName)&&!At.test(e)&&(this.checked||!Ve.test(e))}).map(function(e,t){var n=ae(this).val();return null==n?null:ae.isArray(n)?ae.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}}),ae.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Ot={0:200,1223:204},$t=ae.ajaxSettings.xhr();ie.cors=!!$t&&"withCredentials"in $t,ie.ajax=$t=!!$t,ae.ajaxTransport(function(t){var n,i;return ie.cors||$t&&!t.crossDomain?{send:function(o,a){var s,r=t.xhr();if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)r[s]=t.xhrFields[s];t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(s in o)r.setRequestHeader(s,o[s]);n=function(e){return function(){n&&(n=i=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?a(0,"error"):a(r.status,r.statusText):a(Ot[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=n(),i=r.onerror=n("error"),void 0!==r.onabort?r.onabort=i:r.onreadystatechange=function(){4===r.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{r.send(t.hasContent&&t.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}:void 0}),ae.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ae.globalEval(e),e}}}),ae.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ae.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,o){t=ae("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),Q.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Lt=[],Mt=/(=)\?(?=&|$)|\?\?/;ae.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||ae.expando+"_"+gt++;return this[e]=!0,e}}),ae.ajaxPrefilter("json jsonp",function(t,n,i){var o,a,s,r=t.jsonp!==!1&&(Mt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Mt.test(t.data)&&"data");return r||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=ae.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,r?t[r]=t[r].replace(Mt,"$1"+o):t.jsonp!==!1&&(t.url+=(bt.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return s||ae.error(o+" was not called"),s[0]},t.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){void 0===a?ae(e).removeProp(o):e[o]=a,t[o]&&(t.jsonpCallback=n.jsonpCallback,Lt.push(o)),s&&ae.isFunction(a)&&a(s[0]),s=a=void 0}),"script"):void 0}),ae.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Q;var i=ve.exec(e),o=!n&&[];return i?[t.createElement(i[1])]:(i=h([e],t,o),o&&o.length&&ae(o).remove(),ae.merge([],i.childNodes))};var Pt=ae.fn.load;ae.fn.load=function(e,t,n){if("string"!=typeof e&&Pt)return Pt.apply(this,arguments);var i,o,a,s=this,r=e.indexOf(" ");return r>-1&&(i=ae.trim(e.slice(r)),e=e.slice(0,r)),ae.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),s.length>0&&ae.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){a=arguments,s.html(i?ae("<div>").append(ae.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},ae.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ae.fn[t]=function(e){return this.on(t,e)}}),ae.expr.filters.animated=function(e){return ae.grep(ae.timers,function(t){return e===t.elem}).length},ae.offset={setOffset:function(e,t,n){var i,o,a,s,r,l,c,u=ae.css(e,"position"),d=ae(e),h={};"static"===u&&(e.style.position="relative"),r=d.offset(),a=ae.css(e,"top"),l=ae.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(a+l).indexOf("auto")>-1,c?(i=d.position(),s=i.top,o=i.left):(s=parseFloat(a)||0,o=parseFloat(l)||0),ae.isFunction(t)&&(t=t.call(e,n,ae.extend({},r))),null!=t.top&&(h.top=t.top-r.top+s),null!=t.left&&(h.left=t.left-r.left+o),"using"in t?t.using.call(e,h):d.css(h)}},ae.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ae.offset.setOffset(this,e,t)});var t,n,i=this[0],o={top:0,left:0},a=i&&i.ownerDocument;if(a)return t=a.documentElement,ae.contains(t,i)?(o=i.getBoundingClientRect(),n=X(a),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===ae.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ae.nodeName(e[0],"html")||(i=e.offset()),i.top+=ae.css(e[0],"borderTopWidth",!0),i.left+=ae.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-ae.css(n,"marginTop",!0),left:t.left-i.left-ae.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ae.css(e,"position");)e=e.offsetParent;return e||Ge})}}),ae.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ae.fn[e]=function(i){return xe(this,function(e,i,o){var a=X(e);return void 0===o?a?a[t]:e[i]:void(a?a.scrollTo(n?a.pageXOffset:o,n?o:a.pageYOffset):e[i]=o)},e,i,arguments.length)}}),ae.each(["top","left"],function(e,t){ae.cssHooks[t]=N(ie.pixelPosition,function(e,n){return n?(n=_(e,t),Qe.test(n)?ae(e).position()[t]+"px":n):void 0})}),ae.each({Height:"height",Width:"width"},function(e,t){ae.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){ae.fn[i]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return xe(this,function(t,n,i){var o;return ae.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?ae.css(t,n,s):ae.style(t,n,i,s)},t,a?i:void 0,a,null)}})}),ae.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),ae.fn.andSelf=ae.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ae});var qt=e.jQuery,jt=e.$;return ae.noConflict=function(t){return e.$===ae&&(e.$=jt),t&&e.jQuery===ae&&(e.jQuery=qt),ae},t||(e.jQuery=e.$=ae),ae}),define("jquery_loader",["jquery"],function(e){return window.cvjq=e.noConflict(!0),window.cvjq}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),+function(e){"use strict";function t(t,i){return this.each(function(){var o=e(this),a=o.data("bs.modal"),s=e.extend({},n.DEFAULTS,o.data(),"object"==typeof t&&t);a||o.data("bs.modal",a=new n(this,s)),"string"==typeof t?a[t](i):s.show&&a.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".cv-modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".cv-modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.7",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,o=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-cv-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(a)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&o;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+o).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){},n.prototype.setScrollbar=function(){},n.prototype.resetScrollbar=function(){},n.prototype.measureScrollbar=function(){};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-cv-api",'[data-cv-toggle="modal"]',function(n){var i=e(this),o=i.attr("href"),a=e(i.attr("data-cv-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),s=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},a.data(),i.data());i.is("a")&&n.preventDefault(),a.one("show.bs.modal",function(e){e.isDefaultPrevented()||a.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(a,s,this)})}(jQuery),+function(e){"use strict";function t(t){var n,i=t.attr("data-cv-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),o=n.data("bs.collapse"),a=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!o&&a.toggle&&/show|hide/.test(t)&&(a.toggle=!1),o||n.data("bs.collapse",o=new i(this,a)),"string"==typeof t&&o[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e('[data-cv-toggle="collapse"][href="#'+t.id+'"],[data-cv-toggle="collapse"][data-cv-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.6",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"),t&&t.transitioning))){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),t||o.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return r.call(this);var l=e.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[s](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-cv-toggle="collapse"][data-cv-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var o=e(i);this.addAriaAndCollapsedClass(t(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-cv-api",'[data-cv-toggle="collapse"]',function(i){var o=e(this);o.attr("data-cv-target")||i.preventDefault();var a=t(o),s=a.data("bs.collapse"),r=s?"toggle":o.data();n.call(a,r)})}(jQuery),define("bootstrap",["jquery"],function(){}),function(){function e(e){function t(t,n,i,o,a,s){for(;a>=0&&s>a;a+=e){var r=o?o[a]:a;i=n(i,t[r],r,t)}return i}return function(n,i,o,a){i=y(i,a,4);var s=!_(n)&&b.keys(n),r=(s||n).length,l=e>0?0:r-1;return arguments.length<3&&(o=n[s?s[l]:l],l+=e),t(n,i,o,s,l,r)}}function t(e){return function(t,n,i){n=w(n,i);for(var o=I(t),a=e>0?0:o-1;a>=0&&o>a;a+=e)if(n(t[a],a,t))return a;return-1}}function n(e,t,n){return function(i,o,a){var s=0,r=I(i);if("number"==typeof a)e>0?s=a>=0?a:Math.max(a+r,s):r=a>=0?Math.min(a+1,r):a+r+1;else if(n&&a&&r)return a=n(i,o),i[a]===o?a:-1;if(o!==o)return a=t(u.call(i,s,r),b.isNaN),a>=0?a+s:-1;for(a=e>0?s:r-1;a>=0&&r>a;a+=e)if(i[a]===o)return a;return-1}}function i(e,t){var n=D.length,i=e.constructor,o=b.isFunction(i)&&i.prototype||r,a="constructor";for(b.has(e,a)&&!b.contains(t,a)&&t.push(a);n--;)a=D[n],a in e&&e[a]!==o[a]&&!b.contains(t,a)&&t.push(a)}var o=this,a=o._,s=Array.prototype,r=Object.prototype,l=Function.prototype,c=s.push,u=s.slice,d=r.toString,h=r.hasOwnProperty,p=Array.isArray,v=Object.keys,f=l.bind,m=Object.create,g=function(){},b=function(e){
return e instanceof b?e:this instanceof b?void(this._wrapped=e):new b(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=b),exports._=b):o._=b,b.VERSION="1.8.3";var y=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,o){return e.call(t,n,i,o)};case 4:return function(n,i,o,a){return e.call(t,n,i,o,a)}}return function(){return e.apply(t,arguments)}},w=function(e,t,n){return null==e?b.identity:b.isFunction(e)?y(e,t,n):b.isObject(e)?b.matcher(e):b.property(e)};b.iteratee=function(e,t){return w(e,t,1/0)};var S=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var o=1;i>o;o++)for(var a=arguments[o],s=e(a),r=s.length,l=0;r>l;l++){var c=s[l];t&&void 0!==n[c]||(n[c]=a[c])}return n}},C=function(e){if(!b.isObject(e))return{};if(m)return m(e);g.prototype=e;var t=new g;return g.prototype=null,t},x=function(e){return function(t){return null==t?void 0:t[e]}},T=Math.pow(2,53)-1,I=x("length"),_=function(e){var t=I(e);return"number"==typeof t&&t>=0&&T>=t};b.each=b.forEach=function(e,t,n){t=y(t,n);var i,o;if(_(e))for(i=0,o=e.length;o>i;i++)t(e[i],i,e);else{var a=b.keys(e);for(i=0,o=a.length;o>i;i++)t(e[a[i]],a[i],e)}return e},b.map=b.collect=function(e,t,n){t=w(t,n);for(var i=!_(e)&&b.keys(e),o=(i||e).length,a=Array(o),s=0;o>s;s++){var r=i?i[s]:s;a[s]=t(e[r],r,e)}return a},b.reduce=b.foldl=b.inject=e(1),b.reduceRight=b.foldr=e(-1),b.find=b.detect=function(e,t,n){var i;return i=_(e)?b.findIndex(e,t,n):b.findKey(e,t,n),void 0!==i&&-1!==i?e[i]:void 0},b.filter=b.select=function(e,t,n){var i=[];return t=w(t,n),b.each(e,function(e,n,o){t(e,n,o)&&i.push(e)}),i},b.reject=function(e,t,n){return b.filter(e,b.negate(w(t)),n)},b.every=b.all=function(e,t,n){t=w(t,n);for(var i=!_(e)&&b.keys(e),o=(i||e).length,a=0;o>a;a++){var s=i?i[a]:a;if(!t(e[s],s,e))return!1}return!0},b.some=b.any=function(e,t,n){t=w(t,n);for(var i=!_(e)&&b.keys(e),o=(i||e).length,a=0;o>a;a++){var s=i?i[a]:a;if(t(e[s],s,e))return!0}return!1},b.contains=b.includes=b.include=function(e,t,n,i){return _(e)||(e=b.values(e)),("number"!=typeof n||i)&&(n=0),b.indexOf(e,t,n)>=0},b.invoke=function(e,t){var n=u.call(arguments,2),i=b.isFunction(t);return b.map(e,function(e){var o=i?t:e[t];return null==o?o:o.apply(e,n)})},b.pluck=function(e,t){return b.map(e,b.property(t))},b.where=function(e,t){return b.filter(e,b.matcher(t))},b.findWhere=function(e,t){return b.find(e,b.matcher(t))},b.max=function(e,t,n){var i,o,a=-(1/0),s=-(1/0);if(null==t&&null!=e){e=_(e)?e:b.values(e);for(var r=0,l=e.length;l>r;r++)i=e[r],i>a&&(a=i)}else t=w(t,n),b.each(e,function(e,n,i){o=t(e,n,i),(o>s||o===-(1/0)&&a===-(1/0))&&(a=e,s=o)});return a},b.min=function(e,t,n){var i,o,a=1/0,s=1/0;if(null==t&&null!=e){e=_(e)?e:b.values(e);for(var r=0,l=e.length;l>r;r++)i=e[r],a>i&&(a=i)}else t=w(t,n),b.each(e,function(e,n,i){o=t(e,n,i),(s>o||o===1/0&&a===1/0)&&(a=e,s=o)});return a},b.shuffle=function(e){for(var t,n=_(e)?e:b.values(e),i=n.length,o=Array(i),a=0;i>a;a++)t=b.random(0,a),t!==a&&(o[a]=o[t]),o[t]=n[a];return o},b.sample=function(e,t,n){return null==t||n?(_(e)||(e=b.values(e)),e[b.random(e.length-1)]):b.shuffle(e).slice(0,Math.max(0,t))},b.sortBy=function(e,t,n){return t=w(t,n),b.pluck(b.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var N=function(e){return function(t,n,i){var o={};return n=w(n,i),b.each(t,function(i,a){var s=n(i,a,t);e(o,i,s)}),o}};b.groupBy=N(function(e,t,n){b.has(e,n)?e[n].push(t):e[n]=[t]}),b.indexBy=N(function(e,t,n){e[n]=t}),b.countBy=N(function(e,t,n){b.has(e,n)?e[n]++:e[n]=1}),b.toArray=function(e){return e?b.isArray(e)?u.call(e):_(e)?b.map(e,b.identity):b.values(e):[]},b.size=function(e){return null==e?0:_(e)?e.length:b.keys(e).length},b.partition=function(e,t,n){t=w(t,n);var i=[],o=[];return b.each(e,function(e,n,a){(t(e,n,a)?i:o).push(e)}),[i,o]},b.first=b.head=b.take=function(e,t,n){return null!=e?null==t||n?e[0]:b.initial(e,e.length-t):void 0},b.initial=function(e,t,n){return u.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},b.last=function(e,t,n){return null!=e?null==t||n?e[e.length-1]:b.rest(e,Math.max(0,e.length-t)):void 0},b.rest=b.tail=b.drop=function(e,t,n){return u.call(e,null==t||n?1:t)},b.compact=function(e){return b.filter(e,b.identity)};var E=function(e,t,n,i){for(var o=[],a=0,s=i||0,r=I(e);r>s;s++){var l=e[s];if(_(l)&&(b.isArray(l)||b.isArguments(l))){t||(l=E(l,t,n));var c=0,u=l.length;for(o.length+=u;u>c;)o[a++]=l[c++]}else n||(o[a++]=l)}return o};b.flatten=function(e,t){return E(e,t,!1)},b.without=function(e){return b.difference(e,u.call(arguments,1))},b.uniq=b.unique=function(e,t,n,i){b.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=w(n,i));for(var o=[],a=[],s=0,r=I(e);r>s;s++){var l=e[s],c=n?n(l,s,e):l;t?(s&&a===c||o.push(l),a=c):n?b.contains(a,c)||(a.push(c),o.push(l)):b.contains(o,l)||o.push(l)}return o},b.union=function(){return b.uniq(E(arguments,!0,!0))},b.intersection=function(e){for(var t=[],n=arguments.length,i=0,o=I(e);o>i;i++){var a=e[i];if(!b.contains(t,a)){for(var s=1;n>s&&b.contains(arguments[s],a);s++);s===n&&t.push(a)}}return t},b.difference=function(e){var t=E(arguments,!0,!0,1);return b.filter(e,function(e){return!b.contains(t,e)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(e){for(var t=e&&b.max(e,I).length||0,n=Array(t),i=0;t>i;i++)n[i]=b.pluck(e,i);return n},b.object=function(e,t){for(var n={},i=0,o=I(e);o>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},b.findIndex=t(1),b.findLastIndex=t(-1),b.sortedIndex=function(e,t,n,i){n=w(n,i,1);for(var o=n(t),a=0,s=I(e);s>a;){var r=Math.floor((a+s)/2);n(e[r])<o?a=r+1:s=r}return a},b.indexOf=n(1,b.findIndex,b.sortedIndex),b.lastIndexOf=n(-1,b.findLastIndex),b.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),o=Array(i),a=0;i>a;a++,e+=n)o[a]=e;return o};var k=function(e,t,n,i,o){if(!(i instanceof t))return e.apply(n,o);var a=C(e.prototype),s=e.apply(a,o);return b.isObject(s)?s:a};b.bind=function(e,t){if(f&&e.bind===f)return f.apply(e,u.call(arguments,1));if(!b.isFunction(e))throw new TypeError("Bind must be called on a function");var n=u.call(arguments,2),i=function(){return k(e,i,t,this,n.concat(u.call(arguments)))};return i},b.partial=function(e){var t=u.call(arguments,1),n=function(){for(var i=0,o=t.length,a=Array(o),s=0;o>s;s++)a[s]=t[s]===b?arguments[i++]:t[s];for(;i<arguments.length;)a.push(arguments[i++]);return k(e,n,this,this,a)};return n},b.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=b.bind(e[n],e);return e},b.memoize=function(e,t){var n=function(i){var o=n.cache,a=""+(t?t.apply(this,arguments):i);return b.has(o,a)||(o[a]=e.apply(this,arguments)),o[a]};return n.cache={},n},b.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},b.defer=b.partial(b.delay,b,1),b.throttle=function(e,t,n){var i,o,a,s=null,r=0;n||(n={});var l=function(){r=n.leading===!1?0:b.now(),s=null,a=e.apply(i,o),s||(i=o=null)};return function(){var c=b.now();r||n.leading!==!1||(r=c);var u=t-(c-r);return i=this,o=arguments,0>=u||u>t?(s&&(clearTimeout(s),s=null),r=c,a=e.apply(i,o),s||(i=o=null)):s||n.trailing===!1||(s=setTimeout(l,u)),a}},b.debounce=function(e,t,n){var i,o,a,s,r,l=function(){var c=b.now()-s;t>c&&c>=0?i=setTimeout(l,t-c):(i=null,n||(r=e.apply(a,o),i||(a=o=null)))};return function(){a=this,o=arguments,s=b.now();var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(r=e.apply(a,o),a=o=null),r}},b.wrap=function(e,t){return b.partial(t,e)},b.negate=function(e){return function(){return!e.apply(this,arguments)}},b.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},b.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},b.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},b.once=b.partial(b.before,2);var R=!{toString:null}.propertyIsEnumerable("toString"),D=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(e){if(!b.isObject(e))return[];if(v)return v(e);var t=[];for(var n in e)b.has(e,n)&&t.push(n);return R&&i(e,t),t},b.allKeys=function(e){if(!b.isObject(e))return[];var t=[];for(var n in e)t.push(n);return R&&i(e,t),t},b.values=function(e){for(var t=b.keys(e),n=t.length,i=Array(n),o=0;n>o;o++)i[o]=e[t[o]];return i},b.mapObject=function(e,t,n){t=w(t,n);for(var i,o=b.keys(e),a=o.length,s={},r=0;a>r;r++)i=o[r],s[i]=t(e[i],i,e);return s},b.pairs=function(e){for(var t=b.keys(e),n=t.length,i=Array(n),o=0;n>o;o++)i[o]=[t[o],e[t[o]]];return i},b.invert=function(e){for(var t={},n=b.keys(e),i=0,o=n.length;o>i;i++)t[e[n[i]]]=n[i];return t},b.functions=b.methods=function(e){var t=[];for(var n in e)b.isFunction(e[n])&&t.push(n);return t.sort()},b.extend=S(b.allKeys),b.extendOwn=b.assign=S(b.keys),b.findKey=function(e,t,n){t=w(t,n);for(var i,o=b.keys(e),a=0,s=o.length;s>a;a++)if(i=o[a],t(e[i],i,e))return i},b.pick=function(e,t,n){var i,o,a={},s=e;if(null==s)return a;b.isFunction(t)?(o=b.allKeys(s),i=y(t,n)):(o=E(arguments,!1,!1,1),i=function(e,t,n){return t in n},s=Object(s));for(var r=0,l=o.length;l>r;r++){var c=o[r],u=s[c];i(u,c,s)&&(a[c]=u)}return a},b.omit=function(e,t,n){if(b.isFunction(t))t=b.negate(t);else{var i=b.map(E(arguments,!1,!1,1),String);t=function(e,t){return!b.contains(i,t)}}return b.pick(e,t,n)},b.defaults=S(b.allKeys,!0),b.create=function(e,t){var n=C(e);return t&&b.extendOwn(n,t),n},b.clone=function(e){return b.isObject(e)?b.isArray(e)?e.slice():b.extend({},e):e},b.tap=function(e,t){return t(e),e},b.isMatch=function(e,t){var n=b.keys(t),i=n.length;if(null==e)return!i;for(var o=Object(e),a=0;i>a;a++){var s=n[a];if(t[s]!==o[s]||!(s in o))return!1}return!0};var A=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var o=d.call(e);if(o!==d.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===o;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,r=t.constructor;if(s!==r&&!(b.isFunction(s)&&s instanceof s&&b.isFunction(r)&&r instanceof r)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),a){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!A(e[l],t[l],n,i))return!1}else{var c,u=b.keys(e);if(l=u.length,b.keys(t).length!==l)return!1;for(;l--;)if(c=u[l],!b.has(t,c)||!A(e[c],t[c],n,i))return!1}return n.pop(),i.pop(),!0};b.isEqual=function(e,t){return A(e,t)},b.isEmpty=function(e){return null==e?!0:_(e)&&(b.isArray(e)||b.isString(e)||b.isArguments(e))?0===e.length:0===b.keys(e).length},b.isElement=function(e){return!(!e||1!==e.nodeType)},b.isArray=p||function(e){return"[object Array]"===d.call(e)},b.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){b["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),b.isArguments(arguments)||(b.isArguments=function(e){return b.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(e){return"function"==typeof e||!1}),b.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},b.isNaN=function(e){return b.isNumber(e)&&e!==+e},b.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===d.call(e)},b.isNull=function(e){return null===e},b.isUndefined=function(e){return void 0===e},b.has=function(e,t){return null!=e&&h.call(e,t)},b.noConflict=function(){return o._=a,this},b.identity=function(e){return e},b.constant=function(e){return function(){return e}},b.noop=function(){},b.property=x,b.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},b.matcher=b.matches=function(e){return e=b.extendOwn({},e),function(t){return b.isMatch(t,e)}},b.times=function(e,t,n){var i=Array(Math.max(0,e));t=y(t,n,1);for(var o=0;e>o;o++)i[o]=t(o);return i},b.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},b.now=Date.now||function(){return(new Date).getTime()};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},O=b.invert(V),$=function(e){var t=function(t){return e[t]},n="(?:"+b.keys(e).join("|")+")",i=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(o,t):e}};b.escape=$(V),b.unescape=$(O),b.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),b.isFunction(i)?i.call(e):i};var L=0;b.uniqueId=function(e){var t=++L+"";return e?e+t:t},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var M=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g,j=function(e){return"\\"+P[e]};b.template=function(e,t,n){!t&&n&&(t=n),t=b.defaults({},t,b.templateSettings);var i=RegExp([(t.escape||M).source,(t.interpolate||M).source,(t.evaluate||M).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(i,function(t,n,i,s,r){return a+=e.slice(o,r).replace(q,j),o=r+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":s&&(a+="';\n"+s+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var s=new Function(t.variable||"obj","_",a)}catch(r){throw r.source=a,r}var l=function(e){return s.call(this,e,b)},c=t.variable||"obj";return l.source="function("+c+"){\n"+a+"}",l},b.chain=function(e){var t=b(e);return t._chain=!0,t};var B=function(e,t){return e._chain?b(t).chain():t};b.mixin=function(e){b.each(b.functions(e),function(t){var n=b[t]=e[t];b.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),B(this,n.apply(b,e))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=s[e];b.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],B(this,n)}}),b.each(["concat","join","slice"],function(e){var t=s[e];b.prototype[e]=function(){return B(this,t.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return b})}.call(this),define("underscore_loader",["underscore"],function(e){return window.CVUnderscore=e.noConflict(),window.CVUnderscore}),window.jQuery&&function(e){e.extend({xml2json:function(t,n){function i(t,s){if(!t)return null;var r="",l=null,c=null;t.nodeType,o(t.localName||t.nodeName),t.text||t.nodeValue||"";t.childNodes&&t.childNodes.length>0&&e.each(t.childNodes,function(e,t){var n=t.nodeType,s=o(t.localName||t.nodeName),c=t.text||t.nodeValue||"";if(8!=n)if(3!=n&&4!=n&&s)l=l||{},l[s]?(l[s].length||(l[s]=a(l[s])),l[s]=a(l[s]),l[s][l[s].length]=i(t,!0),l[s].length=l[s].length):l[s]=i(t);else{if(c.match(/^\s+$/))return;r+=c.replace(/^\s+/,"").replace(/\s+$/,"")}}),t.attributes&&t.attributes.length>0&&(c={},l=l||{},e.each(t.attributes,function(e,t){var n=o(t.name),i=t.value;c[n]=i,l[n]?(l[cnn]=a(l[cnn]),l[n][l[n].length]=i,l[n].length=l[n].length):l[n]=i})),l&&(l=e.extend(""!=r?new String(r):{},l||{}),r=l.text?("object"==typeof l.text?l.text:[l.text||""]).concat([r]):r,r&&(l.text=r),r="");var u=l||r;return n&&(r&&(u={}),r=u.text||r||"",r&&(u.text=r),s||(u=a(u))),u}if(!t)return{};var o=function(e){return String(e||"").replace(/-/g,"_")},a=function(t){return e.isArray(t)||(t=[t]),t.length=t.length,t};if("string"==typeof t&&(t=e.text2xml(t)),t.nodeType){if(3==t.nodeType||4==t.nodeType)return t.nodeValue;var s=9==t.nodeType?t.documentElement:t,r=i(s,!0);return t=null,s=null,r}},text2xml:function(t){var n;try{var i=e.support.opacity||e.support.style?new DOMParser:new ActiveXObject("Microsoft.XMLDOM");i.async=!1}catch(o){throw new Error("XML Parser could not be instantiated")}try{n=e.support.opacity||e.support.style?i.parseFromString(t,"text/xml"):i.loadXML(t)?i:!1}catch(o){throw new Error("Error parsing XML string")}return n}})}(jQuery),define("xml2json",["jquery"],function(e){return function(){var t;return t||e.window.cvjq.fn.xml2json}}(this)),function(e){var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,i,o){t.Backbone=e(t,o,n,i)});else if("undefined"!=typeof exports){var n,i=require("underscore");try{n=require("jquery")}catch(o){}e(t,exports,i,n)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(function(e,t,n,i){n=window.CVUnderscore;var o=e.Backbone,a=Array.prototype.slice;t.VERSION="1.3.3",t.$=i,t.noConflict=function(){return e.Backbone=o,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=function(e,t,i){switch(e){case 1:return function(){return n[t](this[i])};case 2:return function(e){return n[t](this[i],e)};case 3:return function(e,o){return n[t](this[i],l(e,this),o)};case 4:return function(e,o,a){return n[t](this[i],l(e,this),o,a)};default:return function(){var e=a.call(arguments);return e.unshift(this[i]),n[t].apply(n,e)}}},r=function(e,t,i){n.each(t,function(t,o){n[o]&&(e.prototype[o]=s(t,o,i))})},l=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?c(e):n.isString(e)?function(t){return t.get(e)}:e},c=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}},u=t.Events={},d=/\s+/,h=function(e,t,i,o,a){var s,r=0;if(i&&"object"==typeof i){void 0!==o&&"context"in a&&void 0===a.context&&(a.context=o);for(s=n.keys(i);r<s.length;r++)t=h(e,t,s[r],i[s[r]],a)}else if(i&&d.test(i))for(s=i.split(d);r<s.length;r++)t=e(t,s[r],o,a);else t=e(t,i,o,a);return t};u.on=function(e,t,n){return p(this,e,t,n)};var p=function(e,t,n,i,o){if(e._events=h(v,e._events||{},t,n,{context:i,ctx:e,listening:o}),o){var a=e._listeners||(e._listeners={});a[o.id]=o}return e};u.listenTo=function(e,t,i){if(!e)return this;var o=e._listenId||(e._listenId=n.uniqueId("l")),a=this._listeningTo||(this._listeningTo={}),s=a[o];if(!s){var r=this._listenId||(this._listenId=n.uniqueId("l"));s=a[o]={obj:e,objId:o,id:r,listeningTo:a,count:0}}return p(e,t,i,this,s),this};var v=function(e,t,n,i){if(n){var o=e[t]||(e[t]=[]),a=i.context,s=i.ctx,r=i.listening;r&&r.count++,o.push({callback:n,context:a,ctx:a||s,listening:r})}return e};u.off=function(e,t,n){return this._events?(this._events=h(f,this._events,e,t,{context:n,listeners:this._listeners}),this):this},u.stopListening=function(e,t,i){var o=this._listeningTo;if(!o)return this;for(var a=e?[e._listenId]:n.keys(o),s=0;s<a.length;s++){var r=o[a[s]];if(!r)break;r.obj.off(t,i,this)}return this};var f=function(e,t,i,o){if(e){var a,s=0,r=o.context,l=o.listeners;if(t||i||r){for(var c=t?[t]:n.keys(e);s<c.length;s++){t=c[s];var u=e[t];if(!u)break;for(var d=[],h=0;h<u.length;h++){var p=u[h];i&&i!==p.callback&&i!==p.callback._callback||r&&r!==p.context?d.push(p):(a=p.listening,a&&0===--a.count&&(delete l[a.id],delete a.listeningTo[a.objId]))}d.length?e[t]=d:delete e[t]}return e}for(var v=n.keys(l);s<v.length;s++)a=l[v[s]],delete l[a.id],delete a.listeningTo[a.objId]}};u.once=function(e,t,i){var o=h(m,{},e,t,n.bind(this.off,this));return"string"==typeof e&&null==i&&(t=void 0),this.on(o,t,i)},u.listenToOnce=function(e,t,i){var o=h(m,{},t,i,n.bind(this.stopListening,this,e));return this.listenTo(e,o)};var m=function(e,t,i,o){if(i){var a=e[t]=n.once(function(){o(t,a),i.apply(this,arguments)});a._callback=i}return e};u.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;t>i;i++)n[i]=arguments[i+1];return h(g,this._events,e,void 0,n),this};var g=function(e,t,n,i){if(e){var o=e[t],a=e.all;o&&a&&(a=a.slice()),o&&b(o,i),a&&b(a,[t].concat(i))}return e},b=function(e,t){var n,i=-1,o=e.length,a=t[0],s=t[1],r=t[2];switch(t.length){case 0:for(;++i<o;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<o;)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(;++i<o;)(n=e[i]).callback.call(n.ctx,a,s);return;case 3:for(;++i<o;)(n=e[i]).callback.call(n.ctx,a,s,r);return;default:for(;++i<o;)(n=e[i]).callback.apply(n.ctx,t);return}};u.bind=u.on,u.unbind=u.off,n.extend(t,u);var y=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{});var o=n.result(this,"defaults");i=n.defaults(n.extend({},o,i),o),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(y.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var o;if("object"==typeof e?(o=e,i=t):(o={})[e]=t,i||(i={}),!this._validate(o,i))return!1;var a=i.unset,s=i.silent,r=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,d=this._previousAttributes;for(var h in o)t=o[h],n.isEqual(c[h],t)||r.push(h),n.isEqual(d[h],t)?delete u[h]:u[h]=t,a?delete c[h]:c[h]=t;if(this.idAttribute in o&&(this.id=this.get(this.idAttribute)),!s){r.length&&(this._pending=i);for(var p=0;p<r.length;p++)this.trigger("change:"+r[p],this,c[r[p]],i)}if(l)return this;if(!s)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t=this._changing?this._previousAttributes:this.attributes,i={};for(var o in e){var a=e[o];n.isEqual(t[o],a)||(i[o]=a)}return n.size(i)?i:!1},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var o=e.parse?t.parse(n,e):n;return t.set(o,e)?(i&&i.call(e.context,t,n,e),void t.trigger("sync",t,n,e)):!1},B(this,e),this.sync("read",this,e)},save:function(e,t,i){var o;null==e||"object"==typeof e?(o=e,i=t):(o={})[e]=t,i=n.extend({validate:!0,parse:!0},i);var a=i.wait;if(o&&!a){if(!this.set(o,i))return!1}else if(!this._validate(o,i))return!1;var s=this,r=i.success,l=this.attributes;i.success=function(e){s.attributes=l;var t=i.parse?s.parse(e,i):e;return a&&(t=n.extend({},o,t)),t&&!s.set(t,i)?!1:(r&&r.call(i.context,s,e,i),void s.trigger("sync",s,e,i))},B(this,i),o&&a&&(this.attributes=n.extend({},l,o));var c=this.isNew()?"create":i.patch?"patch":"update";"patch"!==c||i.attrs||(i.attrs=o);var u=this.sync(c,this,i);return this.attributes=l,u},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,o=e.wait,a=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){o&&a(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var s=!1;return this.isNew()?n.defer(e.success):(B(this,e),s=this.sync("delete",this,e)),o||a(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||j();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var w={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};r(y,w,"attributes");var S=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},C={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},T=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,o=Array(e.length-n),a=t.length;for(i=0;i<o.length;i++)o[i]=e[i+n];for(i=0;a>i;i++)e[i+n]=t[i];for(i=0;i<o.length;i++)e[i+a+n]=o[i]};n.extend(S.prototype,u,{model:y,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:e.slice();var o=this._removeModels(e,t);return!t.silent&&o.length&&(t.changes={added:[],merged:[],removed:o},this.trigger("update",this,t)),i?o[0]:o},set:function(e,t){if(null!=e){t=n.extend({},C,t),t.parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var i=!n.isArray(e);e=i?[e]:e.slice();var o=t.at;null!=o&&(o=+o),o>this.length&&(o=this.length),0>o&&(o+=this.length+1);var a,s,r=[],l=[],c=[],u=[],d={},h=t.add,p=t.merge,v=t.remove,f=!1,m=this.comparator&&null==o&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null;for(s=0;s<e.length;s++){a=e[s];var b=this.get(a);if(b){if(p&&a!==b){var y=this._isModel(a)?a.attributes:a;t.parse&&(y=b.parse(y,t)),b.set(y,t),c.push(b),m&&!f&&(f=b.hasChanged(g))}d[b.cid]||(d[b.cid]=!0,r.push(b)),e[s]=b}else h&&(a=e[s]=this._prepareModel(a,t),a&&(l.push(a),this._addReference(a,t),d[a.cid]=!0,r.push(a)))}if(v){for(s=0;s<this.length;s++)a=this.models[s],d[a.cid]||u.push(a);u.length&&this._removeModels(u,t)}var w=!1,S=!m&&h&&v;if(r.length&&S?(w=this.length!==r.length||n.some(this.models,function(e,t){return e!==r[t]}),this.models.length=0,T(this.models,r,0),this.length=this.models.length):l.length&&(m&&(f=!0),T(this.models,l,null==o?this.length:o),this.length=this.models.length),f&&this.sort({silent:!0}),!t.silent){for(s=0;s<l.length;s++)null!=o&&(t.index=o+s),a=l[s],a.trigger("add",a,this,t);(f||w)&&this.trigger("sort",this,t),(l.length||u.length||c.length)&&(t.changes={added:l,removed:u,merged:c},this.trigger("update",this,t))}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return a.apply(this.models,arguments)},get:function(e){return null!=e?this._byId[e]||this._byId[this.modelId(e.attributes||e)]||e.cid&&this._byId[e.cid]:void 0},has:function(e){return null!=this.get(e)},at:function(e){return 0>e&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=n.bind(t,this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){e=n.extend({parse:!0},e);var t=e.success,i=this;return e.success=function(n){var o=e.reset?"reset":"set";i[o](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},B(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};var i=t.wait;if(e=this._prepareModel(e,t),!e)return!1;i||this.add(e,t);var o=this,a=t.success;return t.success=function(e,t,n){i&&o.add(e,n),a&&a.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var o=this.get(e[i]);if(o){var a=this.indexOf(o);this.models.splice(a,1),this.length--,delete this._byId[o.cid];var s=this.modelId(o.attributes);null!=s&&delete this._byId[s],t.silent||(t.index=a,o.trigger("remove",o,this,t)),n.push(o),this._removeReference(o,t)}}return n},_isModel:function(e){return e instanceof y},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var o=this.modelId(t.previousAttributes()),a=this.modelId(t.attributes);o!==a&&(null!=o&&delete this._byId[o],null!=a&&(this._byId[a]=t))}}this.trigger.apply(this,arguments)}});var I={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3};r(S,I,"models");var _=t.View=function(e){this.cid=n.uniqueId("view"),n.extend(this,n.pick(e,E)),this._ensureElement(),this.initialize.apply(this,arguments)},N=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];n.extend(_.prototype,u,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var o=t.match(N);this.delegate(o[1],o[2],n.bind(i,this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),
this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}}),t.sync=function(e,i,o){var a=k[e];n.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:a,dataType:"json"};if(o.url||(s.url=n.result(i,"url")||j()),null!=o.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||i.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){s.type="POST",o.emulateJSON&&(s.data._method=a);var r=o.beforeSend;o.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",a),r?r.apply(this,arguments):void 0}}"GET"===s.type||o.emulateJSON||(s.processData=!1);var l=o.error;o.error=function(e,t,n){o.textStatus=t,o.errorThrown=n,l&&l.call(o.context,e,t,n)};var c=o.xhr=t.ajax(n.extend(s,o));return i.trigger("request",i,c,o),c};var k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var R=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},D=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,V=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(R.prototype,u,{initialize:function(){},route:function(e,i,o){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(o=i,i=""),o||(o=this[i]);var a=this;return t.history.route(e,function(n){var s=a._extractParameters(e,n);a.execute(o,s,i)!==!1&&(a.trigger.apply(a,["route:"+i].concat(s)),a.trigger("route",i,s),t.history.trigger("route",a,i,s))}),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(D,"(?:$1)?").replace(A,function(e,t){return t?e:"([^/?]+)"}).replace(V,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var $=t.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},L=/^[#\/]|\s+$/g,M=/^\/+|\/+$/g,P=/#.*$/;$.started=!1,n.extend($.prototype,u,{interval:50,atRoot:function(){var e=this.location.pathname.replace(/[^\/]$/,"$&/");return e===this.root&&!this.getSearch()},matchRoot:function(){var e=this.decodeFragment(this.location.pathname),t=e.slice(0,this.root.length-1)+"/";return t===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(L,"")},start:function(e){if($.started)throw new Error("Backbone.history has already been started");if($.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(M,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,o=i.insertBefore(this.iframe,i.firstChild).contentWindow;o.document.open(),o.document.close(),o.location.hash="#"+this.fragment}var a=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};return this._usePushState?a("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?a("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.options.silent?void 0:this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),$.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return this.matchRoot()?(e=this.fragment=this.getFragment(e),n.some(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})):!1},navigate:function(e,t){if(!$.started)return!1;t&&t!==!0||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;(""===e||"?"===e.charAt(0))&&(n=n.slice(0,-1)||"/");var i=n+e;if(e=this.decodeFragment(e.replace(P,"")),this.fragment!==e){if(this.fragment=e,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;t.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new $;var q=function(e,t){var i,o=this;return i=e&&n.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},n.extend(i,o,t),i.prototype=n.create(o.prototype,e),i.prototype.constructor=i,i.__super__=o.prototype,i};y.extend=S.extend=R.extend=_.extend=$.extend=q;var j=function(){throw new Error('A "url" property or function must be specified')},B=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t}),define("models/request",["jquery","underscore_loader","backbone","settings"],function(e,t,n,i){t=window.CVUnderscore,e.ajaxSetup({cache:!1});var o=n.Model.extend({url:null,initialize:function(e){if(_this=this,e=e||{},this.url=e.url||this.url,this.extra_params=e.extra_params||{},n.Model.prototype.initialize.call(this,e),!this.url)throw new Error("A Url must be defined for the request model");void 0!==localStorage.getItem(i.businessName+"-cvVaBusinessArea")&&null!==localStorage.getItem(i.businessName+"-cvVaBusinessArea")&&(_this.extra_params.businessArea=localStorage.getItem(i.businessName+"-cvVaBusinessArea")),window.CVVA.methods.switchBA=function(e){"string"==typeof e&&(window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(i.businessName+"-cvVaBusinessArea",e)}),localStorage.setItem(i.businessName+"-cvVaBusinessArea",e),i.businessArea=e,_this.extra_params.businessArea=e,window.CVSaveAttributes())}},defaultRequestData:function(){try{window.coxCIDM=utag.data.cidm}catch(e){}return{entry:"",startentry:"",ident:this.get("ident")||"",userlogid:this.get("userlogid")||"",uid:this.uid,context:"",navcontext:"",businessArea:"",channel:"",siteContext:"",FAQ:"",RECOGNITION_ID:"",ANSWER_ID:"",ButtonRequest:"",FAQRequest:"",faqID:"",mainCat:"",mainCatDesc:"",isCookieEnabled:1,isJSEnabled:1,DTreeRequestType:"",connector_ID:"",DTREE_OBJECT_ID:"",DTREE_NODE_ID:"",ICS_SOURCE_ANSWER_ID:"",liveChatStatus:window.liveChatStatus||"",leEngagementButtons:encodeURIComponent(JSON.stringify(window.leEngagementButtons)),previousAnalysisCategory:window.previousAnalysisCategory||"",pagename:window.location.pathname,CIDM:window.coxCIDM||""}},makeRequest:function(n){i.initMessage.keepInChatHistory===!1&&e(".cv-va-bootstrap .cv-init-wrapper").hide(),e(".cv-va-bootstrap .back_link").hide();var o=new Date,a=o.getHours()+":"+(o.getMinutes()<10?"0":"")+o.getMinutes();if(window.cvVaCollectionLength>0&&n.data.entry){for(var s=[[/(?:4[0-9]{3}((([-\s.]*[0-9]{4}){3})|(([-\s.]*[0-9]{3}){3}))|5[1-5][0-9]{2}([-\s.]*[0-9]{4}){3}|6(?:011|5[0-9]{2})([-\s.]*[0-9]{4}){3}|3[47][0-9]{2}[-\s.]*[0-9]{6}[-\s.]*[0-9]{5}|3(?:0[0-5]|[68][0-9])[0-9][-\s.]*[0-9]{6}[-\s.]*[0-9]{4}|((?:2131|1800)[-\s.]*[0-9]{6}[-\s.]*[0-9]{5})|(35[0-9]{2}([-\s.]*[0-9]{4}){3}))/g,"**** **** **** ****"],[/\b(\d{6}[\s\-\_\|\.]*)(\d{4}[\s\-\_\|\.]*){2}(\d{3})\b/g,"********************"],[/\b(\d{4}[\s\-\_\|\.]*){3}(\d{3,5})\b/g,"********************"],[/\b\d{5}(?:-\d{4})?\b/g,"*****"],[/\b[a-z]\d[a-z]\s?\d[a-z]\d\b/g,"*****"],[/\S+@\S+\.\S+/g,"******************"]],r=n.data.entry,l=0,c=s.length;c>l;l++){var u=s[l];r=r.replace(u[0],u[1])}$transaction=e("<div>").addClass("panel panel-default cv-chat-transaction-panel"),"normal"===i.vaCaption.type?n.data.entry.indexOf(i.proactiveEndSessionCommand)<0&&($transaction.html('<div class="cv-col-xs-12" aria-hidden="true"><div class="panel-heading cv-chat-transaction-heading"><div class="panel-title pull-left cv-chat-transaction-title"><span class="cv-chat-transaction-entry">'+r+'</span></div><div class="clearfix"></div></div><span class="user-cv-time-stamp" aria-hidden="true">You&nbsp'+a+"</span></div>"),e("#cv-chat-answer-history").append($transaction)):"iMessage"===i.vaCaption.type&&(n.data.entry.indexOf(i.proactiveEndSessionCommand)>-1?$transaction.html('<div class="cv-col-xs-12"><div class="cv-va-bubble"><span class="cv-chat-va-imessage">'+i.vaCaption.text+"<span>.</span><span>.</span><span>.</span></span></div></div>"):$transaction.html('<div class="cv-col-xs-12" aria-hidden="true"><div class="panel-heading cv-chat-transaction-heading"><div class="panel-title pull-left cv-chat-transaction-title"><span class="cv-chat-transaction-entry">'+r+'</span></div><div class="clearfix"></div></div><span class="user-cv-time-stamp" aria-hidden="true">You&nbsp'+a+'</span></div><div class="cv-col-xs-12"><div class="cv-va-bubble"><span class="cv-chat-va-imessage">'+i.vaCaption.text+"<span>.</span><span>.</span><span>.</span></span></div></div>"),e("#cv-chat-answer-history").append($transaction)),e("#cv-chat-img-avatar").remove()}else $transaction=e("<div>");window.CVMobile===!1?i.shrunkenUI===!0?(i.avatar===!0&&(e("#cv-toggle-avatar").is(":checked")?$transaction.find(".cv-va-bubble").before('<img class="cv-avatar" src="'+i.libEndpoint+"images/titles/"+i.modalHeader.logo.name+'">'):($transaction.find(".cv-va-bubble").css("margin-left","0px"),$transaction.find(".va-time-stamp").css("left","6px"),$transaction.find(".cv-va-bubble.va-time-stamp-shim").addClass("va-time-stamp-shim-avatar"))),$transaction.find(".cv-va-bubble").addClass("va-time-stamp-shim"),$transaction.find(".panel-heading").addClass("va-time-stamp-shim")):($transaction.find(".va-time-stamp").addClass("va-time-stamp-shim"),$transaction.find(".user-cv-time-stamp").addClass("va-time-stamp-shim")):($transaction.find(".cv-va-bubble").addClass("va-time-stamp-shim"),$transaction.find(".panel-heading").addClass("va-time-stamp-shim")),e("#cv-chat-answer-history").scrollTo($transaction,500),e(".cv-va-bootstrap #cv-chat-submit.cvbtn").addClass("disabled").prop("disabled",!0),e(".cv-va-bootstrap #cv-chat-submit.disabled").css({"background-color":i.submitBtn.disabled.backgroundColor,"border-color":i.submitBtn.disabled.backgroundColor}),e(".cv-va-bootstrap #cv-chat-submit").is(":disabled")?(e(".cv-va-bootstrap .cv-button-text-image").hide(),e(".cv-va-bootstrap .cv-disabled-button-text-image").show()):(e(".cv-va-bootstrap .cv-button-text-image").show(),e(".cv-va-bootstrap .cv-disabled-button-text-image").hide());var d={dataType:i.responseType||"xml",processData:!0,wait:!0,data:e.extend(this.defaultRequestData(),this.extra_params),cookies:[i.libEndpointDomain]};return d=e.extend(!0,d,n),t.each(d.data,this.sanitiseData,d.data),window.CVVA.events.makeRequest(d.data),e.ajax({type:"POST",url:i.logEndpoint+"log",data:{level:"info",metadata:{options:d,libEndpointDomain:i.libEndpointDomain}}}),this.fetch(d)},sanitiseData:function(e,t){},getRequestMethod:function(){var e="create";return i.request_method&&"get"==i.request_method.toLowerCase()&&(e="read"),e},sync:function(e,t,i){var o=[];i.crossDomain=!0,i.xhrFields={withCredentials:!0},localStorage.getItem("cv-tserverid")&&(i.headers={"cv-tserverid":localStorage.getItem("cv-tserverid")}),o.push(i.success),o.push(function(e,t,n){var i=n.getResponseHeader("x-cv-tserverid");i&&(window.cvCrossStorage.onConnect().then(function(){window.cvCrossStorage.set("cv-tserverid",i)}),localStorage.setItem("cv-tserverid",i))}),i.success=o,e=this.getRequestMethod(),n.Model.prototype.sync.call(this,e,t,i)},init:function(t){this.makeRequest(t),e.ajax({type:"POST",url:i.logEndpoint+"log",data:{level:"info",metadata:{init:!0}}})},askQuestion:function(e){window.placeHolderRotationReset(),this.makeRequest({data:{entry:e,FAQ:"",ButtonRequest:""}})},disambiguationRequest:function(e,t){window.placeHolderRotationReset(),this.makeRequest({data:{entry:e,disambiguationOption:t,FAQ:"",ButtonRequest:""}})},backnavRequest:function(e){window.placeHolderRotationReset(),this.makeRequest({data:{entry:this.get("question"),FAQ:"0",DTreeRequestType:3,FAQRequest:"Go Back",mainCat:this.get("maincat"),DTREE_OBJECT_ID:this.get("dtreeobjectid"),DTREE_NODE_ID:this.get("dtreenodeid")}})},dtreeConnectorRequest:function(e,t,n){window.placeHolderRotationReset(),this.makeRequest({data:{entry:n,DTreeRequestType:2,connector_ID:e,DTREE_OBJECT_ID:this.get("dtreeobjectid"),DTREE_NODE_ID:this.get("dtreenodeid"),ICS_SOURCE_ANSWER_ID:t}})},faqRequest:function(e,t,n){window.placeHolderRotationReset(),this.makeRequest({data:{RECOGNITION_ID:e,ANSWER_ID:t,FAQ:"1",FAQRequest:n,entry:n}})},changeContext:function(e){var t=this;this.makeRequest({data:{context:"",navcontext:e,ButtonRequest:"change_Context",mainCat:this.get("maincat"),DTreeRequestType:"0",FAQ:"1"},silent:!0,success:function(e,n,i){t.trigger("change:faqitems",t)}})},closeSession:function(){this.makeRequest({data:{sessionclosed:"1"}})}});return o}),define("models/transaction",["jquery","xml2json","underscore_loader","backbone","settings","models/request"],function(e,t,n,i,o,a){n=window.CVUnderscore;var s=a.extend({uid:null,initialize:function(e){a.prototype.initialize.call(this,e),this.uid=(new Date).getTime()+Math.floor(100*Math.random())},parse:function(e,t){var n=o.responseType||"xml",i=this.attributes;if("xml"==n){try{i=this.parseXML(e,t),void 0!==i.responseurl&&this.trigger("error","Engine did not return a response!")}catch(s){this.trigger("error","Could not parse response!")}return i}return a.prototype.parse.call(this,e,t)},parseXML:function(t,i){var o=e.xml2json(t),a=function(t,i){n.each(t,function(n,i){e.isPlainObject(n)||e.isArray(n)?t[i]=n:t[i]=unescape(n)})};return void 0!==o.connectors&&(e.isArray(o.connectors.Connector)?o.connectors=o.connectors.Connector:e.isPlainObject(o.connectors.Connector)&&(o.connectors=[o.connectors.Connector])),a(o),o}});return s}),define("collections/transactions",["jquery","underscore","backbone","models/transaction"],function(e,t,n,i){var o=n.Collection.extend({url:"",addTransaction:function(e){this.add(e.clone())},subscribe:function(e){e.on("change",this.addTransaction,this)}});return o}),function(e){"function"==typeof define&&define.amd?define("jquery_ui",["jquery"],e):e(jQuery)}(function(e){e.ui=e.ui||{};var t=(e.ui.version="1.12.1",0),n=Array.prototype.slice;e.cleanData=function(t){return function(n){var i,o,a;for(a=0;null!=(o=n[a]);a++)try{i=e._data(o,"events"),i&&i.remove&&e(o).triggerHandler("remove")}catch(s){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var o,a,s,r={},l=t.split(".")[0];t=t.split(".")[1];var c=l+"-"+t;return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(r[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function o(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,a=this._superApply;return this._super=e,this._superApply=o,t=i.apply(this,arguments),this._super=n,this._superApply=a,t}}()):void(r[t]=i)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},r,{constructor:a,namespace:l,widgetName:t,widgetFullName:c}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a),a},e.widget.extend=function(t){for(var i,o,a=n.call(arguments,1),s=0,r=a.length;r>s;s++)for(i in a[s])o=a[s][i],a[s].hasOwnProperty(i)&&void 0!==o&&(e.isPlainObject(o)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],o):e.widget.extend({},o):t[i]=o);return t},e.widget.bridge=function(t,i){var o=i.prototype.widgetFullName||t;e.fn[t]=function(a){var s="string"==typeof a,r=n.call(arguments,1),l=this;return s?this.length||"instance"!==a?this.each(function(){var n,i=e.data(this,o);return"instance"===a?(l=i,!1):i?e.isFunction(i[a])&&"_"!==a.charAt(0)?(n=i[a].apply(i,r),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+a+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):l=void 0:(r.length&&(a=e.widget.extend.apply(null,[a].concat(r))),this.each(function(){var t=e.data(this,o);t?(t.option(a||{}),t._init&&t._init()):e.data(this,o,new i(a,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,o,a,s=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(s={},i=t.split("."),t=i.shift(),i.length){for(o=s[t]=e.widget.extend({},this.options[t]),a=0;a<i.length-1;a++)o[i[a]]=o[i[a]]||{},o=o[i[a]];if(t=i.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];s[t]=n}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,o;for(n in t)o=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&o&&o.length&&(i=e(o.get()),this._removeClass(o,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"cv-ui-state-hover"),this._removeClass(this.focusable,null,"cv-ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function n(n,a){var s,r;for(r=0;r<n.length;r++)s=o.classesElementLookup[n[r]]||e(),s=e(t.add?e.unique(s.get().concat(t.element.get())):s.not(t.element).get()),o.classesElementLookup[n[r]]=s,i.push(n[r]),a&&t.classes[n[r]]&&i.push(t.classes[n[r]])}var i=[],o=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&n(t.keys.match(/\S+/g)||[],!0),t.extra&&n(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(i,o){-1!==e.inArray(t.target,o)&&(n.classesElementLookup[i]=e(o.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var o="string"==typeof e||null===e,a={extra:o?t:n,keys:o?e:t,element:o?this.element:e,add:i};return a.element.toggleClass(this._classes(a),i),this},_on:function(t,n,i){var o,a=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=o=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,o=this.widget()),e.each(i,function(i,s){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("cv-ui-state-disabled")?("string"==typeof s?a[s]:s).apply(a,arguments):void 0}"string"!=typeof s&&(r.guid=s.guid=s.guid||r.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+a.eventNamespace,u=l[2];u?o.on(c,u,r):n.on(c,r)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"cv-ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"cv-ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"cv-ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"cv-ui-state-focus")}})},_trigger:function(t,n,i){var o,a,s=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(o in a)o in n||(n[o]=a[o]);return this.element.trigger(n,i),!(e.isFunction(s)&&s.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,o,a){"string"==typeof o&&(o={effect:o});var s,r=o?o===!0||"number"==typeof o?n:o.effect||n:t;o=o||{},"number"==typeof o&&(o={duration:o}),s=!e.isEmptyObject(o),o.complete=a,o.delay&&i.delay(o.delay),s&&e.effects&&e.effects.effect[r]?i[t](o):r!==t&&i[r]?i[r](o.duration,o.easing,a):i.queue(function(n){e(this)[t](),a&&a.call(i[0]),n()})}});e.widget;!function(){function t(e,t,n){return[parseFloat(e[0])*(d.test(e[0])?t/100:1),parseFloat(e[1])*(d.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var o,a=Math.max,s=Math.abs,r=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,d=/%$/,h=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==o)return o;var t,n,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=i.children()[0];return e("body").append(i),t=a.offsetWidth,i.css("overflow","scroll"),n=a.offsetWidth,t===n&&(n=i[0].clientWidth),i.remove(),o=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,a="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:a?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),o=!!n[0]&&9===n[0].nodeType,a=!i&&!o;return{element:n,isWindow:i,isDocument:o,offset:a?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(o){if(!o||!o.of)return h.apply(this,arguments);o=e.extend({},o);var d,p,v,f,m,g,b=e(o.of),y=e.position.getWithinInfo(o.within),w=e.position.getScrollInfo(y),S=(o.collision||"flip").split(" "),C={};return g=i(b),b[0].preventDefault&&(o.at="left top"),p=g.width,v=g.height,f=g.offset,m=e.extend({},f),e.each(["my","at"],function(){var e,t,n=(o[this]||"").split(" ");1===n.length&&(n=r.test(n[0])?n.concat(["center"]):l.test(n[0])?["center"].concat(n):["center","center"]),n[0]=r.test(n[0])?n[0]:"center",n[1]=l.test(n[1])?n[1]:"center",e=c.exec(n[0]),t=c.exec(n[1]),C[this]=[e?e[0]:0,t?t[0]:0],o[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===S.length&&(S[1]=S[0]),"right"===o.at[0]?m.left+=p:"center"===o.at[0]&&(m.left+=p/2),"bottom"===o.at[1]?m.top+=v:"center"===o.at[1]&&(m.top+=v/2),d=t(C.at,p,v),m.left+=d[0],m.top+=d[1],this.each(function(){var i,r,l=e(this),c=l.outerWidth(),u=l.outerHeight(),h=n(this,"marginLeft"),g=n(this,"marginTop"),x=c+h+n(this,"marginRight")+w.width,T=u+g+n(this,"marginBottom")+w.height,I=e.extend({},m),_=t(C.my,l.outerWidth(),l.outerHeight());"right"===o.my[0]?I.left-=c:"center"===o.my[0]&&(I.left-=c/2),"bottom"===o.my[1]?I.top-=u:"center"===o.my[1]&&(I.top-=u/2),I.left+=_[0],I.top+=_[1],i={marginLeft:h,marginTop:g},e.each(["left","top"],function(t,n){e.ui.position[S[t]]&&e.ui.position[S[t]][n](I,{targetWidth:p,targetHeight:v,elemWidth:c,elemHeight:u,collisionPosition:i,collisionWidth:x,collisionHeight:T,offset:[d[0]+_[0],d[1]+_[1]],my:o.my,at:o.at,within:y,elem:l})}),o.using&&(r=function(e){var t=f.left-I.left,n=t+p-c,i=f.top-I.top,r=i+v-u,d={target:{element:b,left:f.left,top:f.top,width:p,height:v},element:{element:l,left:I.left,top:I.top,width:c,height:u},horizontal:0>n?"left":t>0?"right":"center",vertical:0>r?"top":i>0?"bottom":"middle"};c>p&&s(t+n)<p&&(d.horizontal="center"),u>v&&s(i+r)<v&&(d.vertical="middle"),a(s(t),s(n))>a(s(i),s(r))?d.important="horizontal":d.important="vertical",o.using.call(this,e,d)}),l.offset(e.extend(I,{using:r}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollLeft:i.offset.left,s=i.width,r=e.left-t.collisionPosition.marginLeft,l=o-r,c=r+t.collisionWidth-s-o;t.collisionWidth>s?l>0&&0>=c?(n=e.left+l+t.collisionWidth-s-o,e.left+=l-n):c>0&&0>=l?e.left=o:l>c?e.left=o+s-t.collisionWidth:e.left=o:l>0?e.left+=l:c>0?e.left-=c:e.left=a(e.left-r,e.left)},top:function(e,t){var n,i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,s=t.within.height,r=e.top-t.collisionPosition.marginTop,l=o-r,c=r+t.collisionHeight-s-o;t.collisionHeight>s?l>0&&0>=c?(n=e.top+l+t.collisionHeight-s-o,e.top+=l-n):c>0&&0>=l?e.top=o:l>c?e.top=o+s-t.collisionHeight:e.top=o:l>0?e.top+=l:c>0?e.top-=c:e.top=a(e.top-r,e.top)}},flip:{left:function(e,t){var n,i,o=t.within,a=o.offset.left+o.scrollLeft,r=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-r-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,v=-2*t.offset[0];0>u?(n=e.left+h+p+v+t.collisionWidth-r-a,(0>n||n<s(u))&&(e.left+=h+p+v)):d>0&&(i=e.left-t.collisionPosition.marginLeft+h+p+v-l,(i>0||s(i)<d)&&(e.left+=h+p+v))},top:function(e,t){var n,i,o=t.within,a=o.offset.top+o.scrollTop,r=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-r-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,v="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];0>u?(i=e.top+p+v+f+t.collisionHeight-r-a,(0>i||i<s(u))&&(e.top+=p+v+f)):d>0&&(n=e.top-t.collisionPosition.marginTop+p+v+f-l,(n>0||s(n)<d)&&(e.top+=p+v+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}();var i=(e.ui.position,e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])}}),e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".cv-ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".cv-ui-disableSelection")}}),e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return i&&"static"===t.css("position")?!1:o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&a.length?a:e(this[0].ownerDocument||document)},e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="cv-ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^cv-ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),!1);e(document).on("mouseup",function(){i=!1});e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){
return t._mouseDown(e)}).on("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,o=1===t.which,a="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return o&&!a&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,i=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.ui.plugin={add:function(t,n,i){var o,a=e.ui[t].prototype;for(o in i)a.plugins[o]=a.plugins[o]||[],a.plugins[o].push([n,i[o]])},call:function(e,t,n,i){var o,a=e.plugins[t];if(a&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<a.length;o++)e.options[a[o][0]]&&a[o][1].apply(e.element,n)}},e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")};e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("cv-ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".cv-ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".cv-ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blurActiveElement(t),this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]),i=e(t.target);i.closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"cv-ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".cv-ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"cv-ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"cv-ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),o=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,o=this.options,a=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,e(a).width()-this.helperProportions.width-this.margins.left,(e(a).height()||a.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),n=e(o.containment),i=n[0],void(i&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,o,a,s=this.options,r=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),s.grid&&(o=s.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,c=n?o-this.offset.click.top>=n[1]||o-this.offset.click.top>n[3]?o:o-this.offset.click.top>=n[1]?o-s.grid[1]:o+s.grid[1]:o,a=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=n?a-this.offset.click.left>=n[0]||a-this.offset.click.left>n[2]?a:a-this.offset.click.left>=n[0]?a-s.grid[0]:a+s.grid[0]:a),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"cv-ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var o=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,o))})},stop:function(t,n,i){var o=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,o))})},drag:function(t,n,i){e.each(i.sortables,function(){var o=!1,a=this;a.positionAbs=i.positionAbs,a.helperProportions=i.helperProportions,a.offset.click=i.offset.click,a._intersectsWith(a.containerCache)&&(o=!0,e.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==a&&this._intersectsWith(this.containerCache)&&e.contains(a.element[0],this.element[0])&&(o=!1),o})),o?(a.isOver||(a.isOver=1,i._parent=n.helper.parent(),a.currentItem=n.helper.appendTo(a.element).data("cv-ui-sortable-item",!0),a.options._helper=a.options.helper,a.options.helper=function(){return n.helper[0]},t.target=a.currentItem[0],a._mouseCapture(t,!0),a._mouseStart(t,!0,!0),a.offset.click.top=i.offset.click.top,a.offset.click.left=i.offset.click.left,a.offset.parent.left-=i.offset.parent.left-a.offset.parent.left,a.offset.parent.top-=i.offset.parent.top-a.offset.parent.top,i._trigger("toSortable",t),i.dropped=a.element,e.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,a.fromOutside=i),a.currentItem&&(a._mouseDrag(t),n.position=a.position)):a.isOver&&(a.isOver=0,a.cancelHelperRemoval=!0,a.options._revert=a.options.revert,a.options.revert=!1,a._trigger("out",t,a._uiHash(a)),a._mouseStop(t,!0),a.options.revert=a.options._revert,a.options.helper=a.options._helper,a.placeholder&&a.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var o=e("body"),a=i.options;o.css("cursor")&&(a._cursor=o.css("cursor")),o.css("cursor",a.cursor)},stop:function(t,n,i){var o=i.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var o=e(n.helper),a=i.options;o.css("opacity")&&(a._opacity=o.css("opacity")),o.css("opacity",a.opacity)},stop:function(t,n,i){var o=i.options;o._opacity&&e(n.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var o=i.options,a=!1,s=i.scrollParentNotHidden[0],r=i.document[0];s!==r&&"HTML"!==s.tagName?(o.axis&&"x"===o.axis||(i.overflowOffset.top+s.offsetHeight-t.pageY<o.scrollSensitivity?s.scrollTop=a=s.scrollTop+o.scrollSpeed:t.pageY-i.overflowOffset.top<o.scrollSensitivity&&(s.scrollTop=a=s.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(i.overflowOffset.left+s.offsetWidth-t.pageX<o.scrollSensitivity?s.scrollLeft=a=s.scrollLeft+o.scrollSpeed:t.pageX-i.overflowOffset.left<o.scrollSensitivity&&(s.scrollLeft=a=s.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(r).scrollTop()<o.scrollSensitivity?a=e(r).scrollTop(e(r).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(r).scrollTop())<o.scrollSensitivity&&(a=e(r).scrollTop(e(r).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(r).scrollLeft()<o.scrollSensitivity?a=e(r).scrollLeft(e(r).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(r).scrollLeft())<o.scrollSensitivity&&(a=e(r).scrollLeft(e(r).scrollLeft()+o.scrollSpeed)))),a!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var o=i.options;i.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(cv-ui-draggable)":o.snap).each(function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,i){var o,a,s,r,l,c,u,d,h,p,v=i.options,f=v.snapTolerance,m=n.offset.left,g=m+i.helperProportions.width,b=n.offset.top,y=b+i.helperProportions.height;for(h=i.snapElements.length-1;h>=0;h--)l=i.snapElements[h].left-i.margins.left,c=l+i.snapElements[h].width,u=i.snapElements[h].top-i.margins.top,d=u+i.snapElements[h].height,l-f>g||m>c+f||u-f>y||b>d+f||!e.contains(i.snapElements[h].item.ownerDocument,i.snapElements[h].item)?(i.snapElements[h].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=!1):("inner"!==v.snapMode&&(o=Math.abs(u-y)<=f,a=Math.abs(d-b)<=f,s=Math.abs(l-g)<=f,r=Math.abs(c-m)<=f,o&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),a&&(n.position.top=i._convertPositionTo("relative",{top:d,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),r&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),p=o||a||s||r,"outer"!==v.snapMode&&(o=Math.abs(u-b)<=f,a=Math.abs(d-y)<=f,s=Math.abs(l-m)<=f,r=Math.abs(c-g)<=f,o&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),a&&(n.position.top=i._convertPositionTo("relative",{top:d-i.helperProportions.height,left:0}).top),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),r&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[h].snapping&&(o||a||s||r||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[h].item})),i.snapElements[h].snapping=o||a||s||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var o,a=i.options,s=e.makeArray(e(a.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});s.length&&(o=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(t){e(this).css("zIndex",o+t)}),this.css("zIndex",o+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var o=e(n.helper),a=i.options;o.css("zIndex")&&(a._zIndex=o.css("zIndex")),o.css("zIndex",a.zIndex)},stop:function(t,n,i){var o=i.options;o._zIndex&&e(n.helper).css("zIndex",o._zIndex)}});e.ui.draggable;e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"cv-ui-resizable-se":"cv-ui-icon cv-ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",o=!1;return t[i]>0?!0:(t[i]=1,o=t[i]>0,t[i]=0,o)},_create:function(){var t,n=this.options,i=this;this._addClass("cv-ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"cv-ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='cv-ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("cv-ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){n.disabled||(i._removeClass("cv-ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){n.disabled||i.resizing||(i._addClass("cv-ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("cv-ui-resizable").off(".resizable").find(".cv-ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,i,o,a,s=this.options,r=this;if(this.handles=s.handles||(e(".cv-ui-resizable-handle",this.element).length?{n:".cv-ui-resizable-n",e:".cv-ui-resizable-e",s:".cv-ui-resizable-s",w:".cv-ui-resizable-w",se:".cv-ui-resizable-se",sw:".cv-ui-resizable-sw",ne:".cv-ui-resizable-ne",nw:".cv-ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)t=e.trim(i[n]),o="cv-ui-resizable-"+t,a=e("<div>"),this._addClass(a,"cv-ui-resizable-handle "+o),a.css({zIndex:s.zIndex}),this.handles[t]=".cv-ui-resizable-"+t,this.element.append(a);this._renderAxis=function(t){var n,i,o,a;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:r._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=e(this.handles[n],this.element),a=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),o=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(o,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".cv-ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){r.resizing||(this.className&&(a=this.className.match(/cv-ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),r.axis=a&&a[1]?a[1]:"se")}),s.autoHide&&(this._handles.hide(),this._addClass("cv-ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,i,o=!1;for(n in this.handles)i=e(this.handles[n])[0],(i===t.target||e.contains(i,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var n,i,o,a=this.options,s=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),a.containment&&(n+=e(a.containment).scrollLeft()||0,i+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".cv-ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("cv-ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,o=this.originalMousePosition,a=this.axis,s=t.pageX-o.left||0,r=t.pageY-o.top||0,l=this._change[a];return this._updatePrevProperties(),l?(n=l.apply(this,[t,s,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var n,i,o,a,s,r,l,c=this.options,u=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),o=i&&this._hasScroll(n[0],"left")?0:u.sizeDiff.height,a=i?0:u.sizeDiff.width,s={width:u.helper.width()-a,height:u.helper.height()-o},r=parseFloat(u.element.css("left"))+(u.position.left-u.originalPosition.left)||null,l=parseFloat(u.element.css("top"))+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(s,{top:l,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("cv-ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,o,a,s=this.options;a={minWidth:this._isNumber(s.minWidth)?s.minWidth:0,maxWidth:this._isNumber(s.maxWidth)?s.maxWidth:1/0,minHeight:this._isNumber(s.minHeight)?s.minHeight:0,maxHeight:this._isNumber(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,i=a.minWidth/this.aspectRatio,n=a.maxHeight*this.aspectRatio,o=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),i>a.minHeight&&(a.minHeight=i),n<a.maxWidth&&(a.maxWidth=n),o<a.maxHeight&&(a.maxHeight=o)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,s=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(n),u=/nw|ne|n/.test(n);return a&&(e.width=t.minWidth),s&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),a&&c&&(e.left=r-t.minWidth),i&&c&&(e.left=r-t.maxWidth),s&&u&&(e.top=l-t.minHeight),o&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)n[t]=parseFloat(i[t])||0,n[t]+=parseFloat(o[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;
this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize,o=this.originalPosition;return{top:o.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,o=n._proportionallyResizeElements,a=o.length&&/textarea/i.test(o[0].nodeName),s=a&&n._hasScroll(o[0],"left")?0:n.sizeDiff.height,r=a?0:n.sizeDiff.width,l={width:n.size.width-r,height:n.size.height-s},c=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,u=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};o&&o.length&&e(o[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,o,a,s,r,l=e(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,h=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;h&&(l.containerElement=e(h),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){n[e]=l._num(t.css("padding"+i))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=l.containerOffset,o=l.containerSize.height,a=l.containerSize.width,s=l._hasScroll(h,"left")?h.scrollWidth:a,r=l._hasScroll(h)?h.scrollHeight:o,l.parentData={element:h,left:i.left,top:i.top,width:s,height:r}))},resize:function(t){var n,i,o,a,s=e(this).resizable("instance"),r=s.options,l=s.containerOffset,c=s.position,u=s._aspectRatio||t.shiftKey,d={top:0,left:0},h=s.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(s._helper?l.left:0)&&(s.size.width=s.size.width+(s._helper?s.position.left-l.left:s.position.left-d.left),u&&(s.size.height=s.size.width/s.aspectRatio,p=!1),s.position.left=r.helper?l.left:0),c.top<(s._helper?l.top:0)&&(s.size.height=s.size.height+(s._helper?s.position.top-l.top:s.position.top),u&&(s.size.width=s.size.height*s.aspectRatio,p=!1),s.position.top=s._helper?l.top:0),o=s.containerElement.get(0)===s.element.parent().get(0),a=/relative|absolute/.test(s.containerElement.css("position")),o&&a?(s.offset.left=s.parentData.left+s.position.left,s.offset.top=s.parentData.top+s.position.top):(s.offset.left=s.element.offset().left,s.offset.top=s.element.offset().top),n=Math.abs(s.sizeDiff.width+(s._helper?s.offset.left-d.left:s.offset.left-l.left)),i=Math.abs(s.sizeDiff.height+(s._helper?s.offset.top-d.top:s.offset.top-l.top)),n+s.size.width>=s.parentData.width&&(s.size.width=s.parentData.width-n,u&&(s.size.height=s.size.width/s.aspectRatio,p=!1)),i+s.size.height>=s.parentData.height&&(s.size.height=s.parentData.height-i,u&&(s.size.width=s.size.height*s.aspectRatio,p=!1)),p||(s.position.left=s.prevPosition.left,s.position.top=s.prevPosition.top,s.size.width=s.prevSize.width,s.size.height=s.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,o=t.containerPosition,a=t.containerElement,s=e(t.helper),r=s.offset(),l=s.outerWidth()-t.sizeDiff.width,c=s.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-o.left-i.left,width:l,height:c}),t._helper&&!n.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-o.left-i.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("cv-ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var i=e(this).resizable("instance"),o=i.options,a=i.originalSize,s=i.originalPosition,r={height:i.size.height-a.height||0,width:i.size.width-a.width||0,top:i.position.top-s.top||0,left:i.position.left-s.left||0};e(o.alsoResize).each(function(){var t=e(this),i=e(this).data("cv-ui-resizable-alsoresize"),o={},a=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var n=(i[t]||0)+(r[t]||0);n&&n>=0&&(o[t]=n||null)}),t.css(o)})},stop:function(){e(this).removeData("cv-ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"cv-ui-resizable-ghost"),e.uiBackCompat!==!1&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,o=n.size,a=n.originalSize,s=n.originalPosition,r=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,c=l[0]||1,u=l[1]||1,d=Math.round((o.width-a.width)/c)*c,h=Math.round((o.height-a.height)/u)*u,p=a.width+d,v=a.height+h,f=i.maxWidth&&i.maxWidth<p,m=i.maxHeight&&i.maxHeight<v,g=i.minWidth&&i.minWidth>p,b=i.minHeight&&i.minHeight>v;i.grid=l,g&&(p+=c),b&&(v+=u),f&&(p-=c),m&&(v-=u),/^(se|s|e)$/.test(r)?(n.size.width=p,n.size.height=v):/^(ne)$/.test(r)?(n.size.width=p,n.size.height=v,n.position.top=s.top-h):/^(sw)$/.test(r)?(n.size.width=p,n.size.height=v,n.position.left=s.left-d):((0>=v-u||0>=p-c)&&(t=n._getPaddingPlusBorderDimensions(this)),v-u>0?(n.size.height=v,n.position.top=s.top-h):(v=u-t.height,n.size.height=v,n.position.top=s.top+a.height-v),p-c>0?(n.size.width=p,n.position.left=s.left-d):(p=c-t.width,n.size.width=p,n.position.left=s.left+a.width-p))}});e.ui.resizable,e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"cv-ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("cv-ui-menu","cv-ui-widget cv-ui-widget-content"),this._on({"mousedown .cv-ui-menu-item":function(e){e.preventDefault()},"click .cv-ui-menu-item":function(t){var n=e(t.target),i=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".cv-ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".cv-ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".cv-ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".cv-ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .cv-ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.target).closest(".cv-ui-menu-item"),i=e(t.currentTarget);n[0]===i[0]&&(this._removeClass(i.siblings().children(".cv-ui-state-active"),null,"cv-ui-state-active"),this.focus(t,i))}},mouseleave:"collapseAll","mouseleave .cv-ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){var n=!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]));n&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".cv-ui-menu-item").removeAttr("role aria-disabled"),n=t.children(".cv-ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".cv-ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),n.children().each(function(){var t=e(this);t.data("cv-ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var n,i,o,a,s=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".cv-ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:s=!1,i=this.previousFilter||"",a=!1,o=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),o===i?a=!0:o=i+o,n=this._filterMenuItems(o),n=a&&-1!==n.index(this.active.next())?this.active.nextAll(".cv-ui-menu-item"):n,n.length||(o=String.fromCharCode(t.keyCode),n=this._filterMenuItems(o)),n.length?(this.focus(t,n),this.previousFilter=o,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}s&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".cv-ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n,i,o,a,s=this,r=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("cv-ui-menu-icons",null,!!this.element.find(".cv-ui-icon").length),i=l.filter(":not(.cv-ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev(),i=e("<span>").data("cv-ui-menu-submenu-caret",!0);s._addClass(i,"cv-ui-menu-icon","cv-ui-icon "+r),n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))}),this._addClass(i,"cv-ui-menu","cv-ui-widget cv-ui-widget-content cv-ui-front"),t=l.add(this.element),n=t.find(this.options.items),n.not(".cv-ui-menu-item").each(function(){var t=e(this);s._isDivider(t)&&s._addClass(t,"cv-ui-menu-divider","cv-ui-widget-content")}),o=n.not(".cv-ui-menu-item, .cv-ui-menu-divider"),a=o.children().not(".cv-ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(o,"cv-ui-menu-item")._addClass(a,"cv-ui-menu-item-wrapper"),n.filter(".cv-ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".cv-ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"cv-ui-state-disabled",!!e)},focus:function(e,t){var n,i,o;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children(".cv-ui-menu-item-wrapper"),this._addClass(i,null,"cv-ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),o=this.active.parent().closest(".cv-ui-menu-item").children(".cv-ui-menu-item-wrapper"),this._addClass(o,null,"cv-ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".cv-ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,o,a,s,r;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-n-i,a=this.activeMenu.scrollTop(),s=this.activeMenu.height(),r=t.outerHeight(),0>o?this.activeMenu.scrollTop(a+o):o+r>s&&this.activeMenu.scrollTop(a+o-s+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".cv-ui-menu-item-wrapper"),null,"cv-ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".cv-ui-menu").not(t.parents(".cv-ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".cv-ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this._removeClass(i.find(".cv-ui-state-active"),null,"cv-ui-state-active"),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".cv-ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".cv-ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".cv-ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".cv-ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".cv-ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".cv-ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".cv-ui-menu-item").eq(-1):this.active[e+"All"](".cv-ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,o;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.nextAll(".cv-ui-menu-item").each(function(){return n=e(this),n.offset().top-i-o<0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var n,i,o;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,o=this.element.height(),this.active.prevAll(".cv-ui-menu-item").each(function(){return n=e(this),n.offset().top-i+o>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".cv-ui-menu-item");var n={item:this.active};this.active.has(".cv-ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".cv-ui-menu-item").filter(function(){return i.test(e.trim(e(this).children(".cv-ui-menu-item-wrapper").text()))})}});e.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,n,i,o=this.element[0].nodeName.toLowerCase(),a="textarea"===o,s="input"===o;this.isMultiLine=a||!s&&this._isContentEditable(this.element),this.valueMethod=this.element[a||s?"val":"text"],this.isNewMenu=!0,this._addClass("cv-ui-autocomplete-input"),this.element.attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,i=!0,void(n=!0);t=!1,i=!1,n=!1;var a=e.ui.keyCode;switch(o.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",o);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case a.UP:t=!0,this._keyEvent("previous",o);break;case a.DOWN:t=!0,this._keyEvent("next",o);break;case a.ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case a.TAB:this.menu.active&&this.menu.select(o);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(o),o.preventDefault());break;default:n=!0,this._searchTimeout(o)}},keypress:function(i){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&i.preventDefault());if(!n){var o=e.ui.keyCode;switch(i.keyCode){case o.PAGE_UP:this._move("previousPage",i);break;case o.PAGE_DOWN:this._move("nextPage",i);break;case o.UP:this._keyEvent("previous",i);break;case o.DOWN:this._keyEvent("next",i)}}},input:function(e){return i?(i=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance"),this._addClass(this.menu.element,"cv-ui-autocomplete","cv-ui-front"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,this.element[0]!==e.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(t,n){var i,o;return this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type))?(this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)})):(o=n.item.data("cv-ui-autocomplete-item"),!1!==this._trigger("focus",t,{item:o})&&t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(o.value),i=n.item.attr("aria-label")||o.value,void(i&&e.trim(i).length&&(this.liveRegion.children().hide(),e("<div>").text(i).appendTo(this.liveRegion))))},menuselect:function(t,n){var i=n.item.data("cv-ui-autocomplete-item"),o=this.previous;this.element[0]!==e.ui.safeActiveElement(this.document[0])&&(this.element.trigger("focus"),this.previous=o,this._delay(function(){this.previous=o,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=e("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"cv-ui-helper-hidden-accessible"),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(t){var n=this.menu.element[0];return t.target===this.element[0]||t.target===n||e.contains(n,t.target)},_closeOnClickOutside:function(e){this._isEventTargetInWidget(e)||this.close()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".cv-ui-front, dialog")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,n,i=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,i){i(e.ui.autocomplete.filter(t,n.term))}):"string"==typeof this.options.source?(n=this.options.source,this.source=function(t,o){i.xhr&&i.xhr.abort(),i.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){var t=this.term===this._value(),n=this.menu.element.is(":visible"),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;(!t||t&&!n&&!i)&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this._addClass("cv-ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this._removeClass("cv-ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this._off(this.document,"mousedown"),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({},t,{label:t.label||t.value,value:t.value||t.label})})},_suggest:function(t){var n=this.menu.element.empty();this._renderMenu(n,t),this.isNewMenu=!0,this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(),this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var i=this;e.each(n,function(e,n){i._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("cv-ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<div>").text(n.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this.isMultiLine||this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())},_isContentEditable:function(e){if(!e.length)return!1;var t=e.prop("contentEditable");return"inherit"===t?this._isContentEditable(e.parent()):"true"===t}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var i=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return i.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var n;this._superApply(arguments),this.options.disabled||this.cancelSearch||(n=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.children().hide(),e("<div>").text(n).appendTo(this.liveRegion))}});e.ui.autocomplete}),define("views/virtual_assistant/components/container",["jquery","jquery_ui","bootstrap","underscore_loader","backbone","settings"],function(e,t,n,i,o,a){i=window.CVUnderscore;var s=o.View.extend({el:"#cv-chat-container",events:{"click .minimize-va":"minimizeMaximize","click .minimized-mobile-content":"minimizeMaximize"},minimized:!1,processingMinimizeMaximize:!1,contentWidth:"480px",contentHeight:"445px",initialize:function(t){a.persistenceEnabled===!0&&(this.contentWidth=localStorage.getItem(a.businessName+"-cvVaContentWidth"),(void 0===this.contentWidth||null===this.contentWidth||"undefined"===this.contentWidth||"null"===this.contentWidth||""===this.contentWidth)&&(a.shrunkenUI===!0?this.contentWidth="350px":this.contentWidth="480px"),this.contentHeight=localStorage.getItem(a.businessName+"-cvVaContentHeight"),(void 0===this.contentHeight||null===this.contentHeight||"undefined"===this.contentHeight||"null"===this.contentHeight||""===this.contentHeight)&&(a.shrunkenUI===!0?this.contentHeight="560px":this.contentHeight="550px")),void 0!==window.cvVaMinimized&&(this.minimized=window.cvVaMinimized),o.View.prototype.initialize.call(this,t);var n=this;window.CVMobile===!1&&(this.$(".cv-modal-dialog").css({position:"absolute",top:"0",right:"0",bottom:"0",left:"0",margin:"0px",width:"100%"}),null===localStorage.getItem(a.businessName+"-cvVaModel")&&this.$("#cv-chat-content").css({position:a.anchoredContainer.position,top:a.anchoredContainer.top,bottom:a.anchoredContainer.bottom,left:a.anchoredContainer.left,right:a.anchoredContainer.right}),a.iframeEvents===!1&&a.anchoredContainer.disabledResizeHandler===!0?(setInterval(function(){n.$(".cv-ui-resizable-handle").hide()},0),a.iframeEvents===!1&&e(window).resize(function(){n.$("#cv-chat-content").css({left:"auto",top:"auto"})}),n.$("#cv-chat-content").draggable({containment:"parent",axis:"x",handle:"#cv-chat-header, .cv-chat-footer",scroll:!1,start:function(){n.$("#cv-chat-content").css({top:"auto"})},drag:function(e,t){t.position.top="auto",n.$("#cv-chat-content").css({top:"auto"})},stop:function(){n.$("#cv-chat-content").css({top:"auto"}),window.CVSaveAttributes()}})):window.cvVaMinimized===!0?(n.$("#cv-chat-content").css({position:"absolute",top:"auto",bottom:"0"}).draggable({axis:"x",disabled:a.desktopAnchoredMinimizedContainer.disabled,containment:"parent",scroll:!1,handle:"#cv-chat-header, .cv-chat-footer",stop:function(){window.CVSaveAttributes()}}),a.desktopAnchoredMinimizedContainer.disabled===!0&&n.$("#cv-chat-content").css({left:a.desktopAnchoredMinimizedContainer.left,right:a.desktopAnchoredMinimizedContainer.right})):n.$("#cv-chat-content").draggable({containment:"parent",scroll:!1,handle:"#cv-chat-header, .cv-chat-footer",stop:function(){window.CVSaveAttributes()},drag:function(t,n){e(window).width()-(e(" #cv-chat-content").offset().left+e(".cv-va-bootstrap #cv-chat-content").outerWidth())<335?(e(".cv-va-bootstrap #cv-lp-secure-form-container").removeClass("cv-lp-secure-form-right-position"),e(".cv-va-bootstrap #cv-lp-secure-form-panel").removeClass("cv-lp-secure-form-panel-right-position"),e(".cv-va-bootstrap #cv-lp-secure-form-header a").removeClass("cv-lp-secure-form-header-icon").find("i").removeClass("fa-arrow-circle-left").addClass("fa-arrow-circle-right")):e(".cv-va-bootstrap #cv-chat-content").offset().left<335&&(e(".cv-va-bootstrap #cv-lp-secure-form-container").addClass("cv-lp-secure-form-right-position"),e(".cv-va-bootstrap #cv-lp-secure-form-panel").addClass("cv-lp-secure-form-panel-right-position"),e(".cv-va-bootstrap #cv-lp-secure-form-header a").addClass("cv-lp-secure-form-header-icon").find("i").removeClass("fa-arrow-circle-right").addClass("fa-arrow-circle-left"))}})),this.$("#cv-chat-answer-history").on("mousewheel DOMMouseScroll",function(e){var t=e.originalEvent,n=t.wheelDelta||-t.detail;this.scrollTop+=30*(0>n?1:-1),e.preventDefault()}),e(".cv-va-bootstrap .close.container-control.mobile-close").click(function(){e("#cv-chat-container").modal({show:!1,keyboard:!0,backdrop:!1}),window.CVMobile===!0&&(e("body > *").not("body > .cv-va-bootstrap").removeClass("cv-va-hide-external-engagements"),e("meta[name=viewport]").remove(),void 0!==window.originalViewport&&e("head").append('<meta name="viewport" content="'+window.originalViewport+'"/>'))})},minimizeMaximize:function(){var t;if(window.livechatTriggered!==!0){var n=this;if(window.CVMobile===!1&&(n.$("#cv-chat-content").css({position:"absolute",top:"auto",bottom:"0"}).draggable({axis:a.desktopAnchoredMinimizedContainer.axis,disabled:a.desktopAnchoredMinimizedContainer.disabled}),a.desktopAnchoredMinimizedContainer.disabled===!0&&n.$("#cv-chat-content").css({left:a.desktopAnchoredMinimizedContainer.left,right:a.desktopAnchoredMinimizedContainer.right})),this.processingMinimizeMaximize===!1)if(this.processingMinimizeMaximize=!0,this.minimized===!1){window.cvMazimized=!0,e(".cv-va-bootstrap #cv-lp-secure-form-panel").collapse("hide"),e(".cv-va-bootstrap #cv-faq-panel").collapse("hide"),e(".cv-va-bootstrap .cv-overlays").hide();var i={height:"100%","border-bottom-color":a.modalHeader.backgroundColor,"border-radius":"5px"};window.CVMobile===!0&&(clearInterval(window.CVVA.contentMobileInterval),e(".cv-va-bootstrap.cv-mobile-floating").addClass("hidden"),window.CVSaveAttributes(),e("body > *").not("body > .cv-va-bootstrap").removeClass("cv-va-hide-external-engagements"),e("meta[name=viewport]").remove(),void 0!==window.originalViewport&&e("head").append('<meta name="viewport" content="'+window.originalViewport+'"/>'),e(".cv-va-bootstrap #cv-chat-content").addClass("minimized-mobile-content").css({top:a.minimizedContentMobile.top,bottom:a.minimizedContentMobile.bottom,left:a.minimizedContentMobile.left,right:a.minimizedContentMobile.right,"border-radius":a.minimizedContentMobile.borderRadius,border:"none"}),a.minimizedContentMobile.minimizedButtonsOutline===!1&&e(".cv-va-bootstrap #cv-chat-content #cv-chat-header").addClass("cv-no-outline"),t={width:a.minimizedContentMobile.width,height:a.minimizedContentMobile.height,"min-height":a.minimizedContentMobile.height,"max-height":a.minimizedContentMobile.height},this.$(".cv-chat-title").attr("style",function(e,t){return t+"font-size: 50px !important;"}),this.$(".minimize-va i").toggleClass(a.minimizedContentMobile.fontAwesome).toggleClass(a.modalHeader.btnIcons.minimize).css("margin-bottom","4px"),
a.minimizedContentMobile.flipMinimizedIcon===!0&&this.$(".minimize-va i").addClass("fa-flip-horizontal"),a.minimizedContentMobile.absolutePositionIcon&&(this.$el.find(".minimize-va i").addClass(a.minimizedContentMobile.absolutePositionIcon),console.log(this.$el)),this.$(".minimize-va").toggleClass("minimize-va").toggleClass("minimize-mobile-icon"),this.$("#cv-close-cvbtn").hide(),a.minimizedContentMobile.addShim===!0&&e(".cv-va-bootstrap #cv-chat-content").addClass("minimize-shim"),i["border-radius"]=a.minimizedContentMobile.borderRadius,this.$("#cv-cvbtn-group").css("margin-right","auto"),this.$("#cv-lc-chat-logo").hide(),this.$("#cv-chat-header").append('<div id="cv-va-minimize-mobile-title">'+a.minimizedContentMobile.text+"</div>").addClass("cv-minimize-chat-header"),a.minimizedContentMobile.absolutePositionText&&this.$el.find("#cv-va-minimize-mobile-title").addClass(a.minimizedContentMobile.absolutePositionText)),window.CVMobile===!1&&a.fullScreen.enabled===!0&&clearInterval(window.CVVA.fullscreenInterval),this.$(".cv-ui-resizable-handle").hide(),this.$(".cv-va-tabs-container, #cv-faq-container").hide(),n.contentWidth=n.$("#cv-chat-content").outerWidth(),n.contentHeight=n.$("#cv-chat-content").outerHeight(),a.vaShim===!0&&window.CVMobile===!1&&(this.$("#cv-chat-content").toggleClass("front-shim"),this.$("#cv-chat-content").toggleClass("back-shim")),window.CVMobile===!1&&this.$(".minimize-va i").toggleClass(a.modalHeader.btnIcons.maximize).toggleClass(a.modalHeader.btnIcons.minimize),this.$(".cv-print-icon").hide(),this.$("#cv-chat-img-avatar").hide(),a.modalHeader.logo.enabled===!0&&this.$(".cv-chat-logo, .cv-chat-extra-logo").fadeOut(0,function(){n.$(".cv-chat-title").show()}),a.modalHeader.minimizedLogo.enabled===!0&&window.CVMobile===!1&&(this.$(".cv-chat-logo, .cv-chat-extra-logo").fadeOut(0,function(){n.$(".cv-chat-title").hide(),n.$(".cv-chat-minimized-logo").show(),n.$(".minimize-va").attr("aria-label",a.ariaLabel.maximizeBtn)}),this.$("#cv-lc-chat-logo").parent().find(".minimize-va").attr("aria-label",a.ariaLabel.maximizeBtn)),e("#cv-chat-body, .cv-chat-footer").is(":hidden")?this.$("#cv-chat-body, .cv-chat-footer").hide():this.$("#cv-chat-body, .cv-chat-footer").toggle(),a.avatar===!0&&this.$("#cv-chat-header").css("padding-top","15px"),window.CVMobile===!1&&this.$(".cv-chat-title").attr("style",function(e,t){return t+"font-size: 25px !important;"}),a.shrunkenUI===!1&&window.CVMobile===!1?(this.$(".container-control").css({top:"20px"}),t={"min-height":"60px","max-height":"60px",height:"60px",width:a.minimizedContainerWidth}):a.shrunkenUI===!0&&window.CVMobile===!1&&(a.avatar===!1&&this.$(".container-control").css({top:"16px"}),t={"min-height":a.modalHeader.height,"max-height":a.modalHeader.height,height:a.modalHeader.height,width:a.minimizedContainerWidth}),n.$("#cv-chat-header").css(i),this.$("#cv-chat-content").animate(t,0,function(){a.persistenceEnabled!==!0||window.forcesessionclose!==!1&&void 0!==window.forcesessionclose||window.CVSaveAttributes(),parent.postMessage("minimize","*"),n.minimized=!0,window.cvVaMinimized=n.minimized,window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaMinimized",window.cvVaMinimized)}),localStorage.setItem(a.businessName+"-cvVaMinimized",window.cvVaMinimized),window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaContentWidth",n.contentWidth)}),localStorage.setItem(a.businessName+"-cvVaContentWidth",n.contentWidth),window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaContentHeight",n.contentHeight)}),localStorage.setItem(a.businessName+"-cvVaContentHeight",n.contentHeight),n.processingMinimizeMaximize=!1})}else if(this.minimized===!0){var i={height:a.modalHeader.height,"border-bottom-color":"#e5e5e5","border-radius":"5px 5px 0 0"};e(".cv-va-bootstrap .cv-overlays").show(),window.CVMobile===!0&&(window.CVVA.contentMobileCallInterval(),window.CVVA.mobileMetaTag(),clearInterval(window.CVVA.hideMobileLauncherInterval),e(".cv-va-bootstrap.cv-mobile-floating").removeClass("hidden"),window.CVSaveAttributes(),e(".cv-va-bootstrap #cv-chat-content").removeClass("minimized-mobile-content"),e(".cv-va-bootstrap #cv-chat-header").removeClass("cv-minimize-chat-header"),i.height=a.modalHeader.mobile.height,this.$("#cv-close-cvbtn").show(),this.$("#cv-chat-content").removeClass("minimize-shim").css({top:"0",bottom:"0",left:"0",right:"0","border-radius":"6px",border:"1px solid rgba(0, 0, 0, 0.2)"}),this.$("#cv-cvbtn-group").css("margin-right","0"),this.$("#cv-lc-chat-logo").show(),this.$("#cv-va-minimize-mobile-title").remove(),this.$(".minimize-mobile-icon").toggleClass("minimize-mobile-icon").toggleClass("minimize-va"),a.minimizedContentMobile.minimizedButtonsOutline===!1&&e(".cv-va-bootstrap #cv-chat-content #cv-chat-header").removeClass("cv-no-outline"),a.minimizedContentMobile.flipMinimizedIcon===!0&&this.$el.find(".minimize-va i").removeClass("fa-flip-horizontal"),a.minimizedContentMobile.absolutePositionIcon&&this.$el.find(".minimize-va i").removeClass(a.minimizedContentMobile.absolutePositionIcon)),window.CVMobile===!1&&a.fullScreen.enabled===!0&&window.CVVA.fullscreen(),parent.postMessage("maximize","*"),window.CVMobile===!1&&(e(".cv-va-bootstrap #cv-lp-secure-form-container").show(),e("#cv-chat-content").draggable({axis:!1,disabled:!1}));var o,s;window.CVMobile===!1&&void 0!==window.cvVaCollectionLength&&window.cvVaCollectionLength>1&&void 0===window.resizableAttached&&a.anchoredContainer.enabled===!0&&(window.resizableAttached=!0,window.CVVA.resizable()),a.shrunkenUI===!0?(o="560px",s="600px"):(o="445px",s="600px"),t={"min-height":o,"max-height":s,width:n.contentWidth,height:n.contentHeight},window.CVMobile===!0&&(t.height=o),a.iframeEvents===!1&&e(window).width()-(e(".cv-va-bootstrap #cv-chat-content").offset().left+e(".cv-va-bootstrap #cv-chat-content").outerWidth())<282&&(e(".cv-va-bootstrap #cv-chat-content").css({left:"auto"}),e("#cv-chat-content").css({right:"0"})),this.$("#cv-chat-content").animate(t,0,function(){window.loadFromStorage===!0&&void 0===window.cvMazimized&&(window.loadFromStorage=!1,setTimeout(function(){e(".cv-va-bootstrap").show(),e(".cv-va-bootstrap #cv-chat-answer-history").length&&n.$("#cv-chat-answer-history").scrollTop(n.$("#cv-chat-answer-history")[0].scrollHeight)},500)),a.modalHeader.logo.enabled===!0&&n.$(".cv-chat-title, .cv-chat-minimized-logo").fadeOut(0,function(){n.$(".cv-chat-logo, .cv-chat-extra-logo").show(),n.$(".minimize-va").attr("aria-label",a.ariaLabel.minimizedBtn)}),n.$("#cv-chat-img-avatar").show(),n.$("#cv-chat-body, .cv-chat-footer").toggle(),n.$("#cv-chat-header").css(i),window.CVMobile===!1?n.$(".cv-chat-title").attr("style",function(e,t){return t+"font-size: 35px !important;"}):window.CVMobile===!0&&n.$(".cv-chat-title").attr("style",function(e,t){return t+"font-size: 50px !important;"});var t="0px";a.avatar===!0&&(t="-8px"),n.$(".container-control").animate({top:t},0,function(){window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaMinimized",window.cvVaMinimized)}),localStorage.setItem(a.businessName+"-cvVaMinimized",window.cvVaMinimized),window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaContentWidth",n.contentWidth)}),localStorage.setItem(a.businessName+"-cvVaContentWidth",n.contentWidth),window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaContentHeight",n.contentHeight)}),localStorage.setItem(a.businessName+"-cvVaContentHeight",n.contentHeight),n.$(".cv-ui-resizable-handle").show(),n.$(".cv-va-tabs-container, #cv-faq-container").show(),a.persistenceEnabled!==!0||window.forcesessionclose!==!1&&void 0!==window.forcesessionclose||(window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaCollectionLength",window.cvVaCollectionLength)}).then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaModel",JSON.stringify(window.cvVaModel))}).then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaBootstrapState",JSON.stringify(e("div.cv-va-bootstrap:first").html()))}).then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaStyles",JSON.stringify(e("#cv-va-styles").html()))}),localStorage.setItem(a.businessName+"-cvVaCollectionLength",window.cvVaCollectionLength),localStorage.setItem(a.businessName+"-cvVaModel",JSON.stringify(window.cvVaModel)),localStorage.setItem(a.businessName+"-cvVaBootstrapState",JSON.stringify(e("div.cv-va-bootstrap:first").html())),localStorage.setItem(a.businessName+"-cvVaStyles",JSON.stringify(e("#cv-va-styles").html()))),n.minimized=!1,window.cvVaMinimized=n.minimized,n.processingMinimizeMaximize=!1}),a.vaShim===!0&&window.CVMobile===!1&&(n.$("#cv-chat-content").toggleClass("front-shim"),n.$("#cv-chat-content").toggleClass("back-shim")),window.CVMobile===!1?n.$(".minimize-va i").toggleClass(a.modalHeader.btnIcons.maximize).toggleClass(a.modalHeader.btnIcons.minimize):n.$(".minimize-va i").toggleClass(a.minimizedContentMobile.fontAwesome).toggleClass(a.modalHeader.btnIcons.minimize).css("margin-bottom","0px"),n.$(".cv-chat-transaction-panel").is(":visible")&&n.$(".cv-print-icon").show()})}}}});return s}),define("views/virtual_assistant/components/ask_form",["jquery","underscore_loader","backbone","settings"],function(e,t,n,i){t=window.CVUnderscore;var o=n.View.extend({prevent_empty_submissions:!0,el:"#cv-chat-form",input_el:"#cv-chat-user-entry",events:{submit:"handleSubmit"},initialize:function(o){var a=this;if(n.View.prototype.initialize.call(a,o),a.input_el=o.input_el||a.input_el,a.$input_el=e(a.input_el),a.$submit_btn=a.getSubmitButton(),a.prevent_empty_submissions="boolean"==typeof o.prevent_empty_submissions?o.prevent_empty_submissions:!0,a.prevent_empty_submissions&&a.$input_el.bind("input keyup",function(){if(a.setButtonState(),i.proactiveEndOnLastKeystroke===!0){clearInterval(window.proactiveEndSessionInterval);var e=1e3*parseInt(a.model.get("autosubmitwaittime"))||i.proactiveEndSessionWaitTime||1e4;window.proactiveEndSessionTriggered===!0&&window.cvVaCollectionLength>0&&(window.proactiveEndSessionInterval=setInterval(function(){a.model.askQuestion(i.proactiveEndSessionCommand),clearInterval(window.proactiveEndSessionInterval)},e))}}),window.CVMobile===!0&&(window.CVVA.contentMobileCallInterval=function(){window.CVVA.contentMobileInterval=setInterval(function(){(window.cvVaMinimized===!1||void 0===window.cvVaMinimized)&&e(".cv-va-bootstrap #cv-chat-content").css({"min-height":e(window).outerHeight()+"px","max-height":e(window).outerHeight()+"px",height:e(window).outerHeight()+"px"})},0)},window.CVVA.contentMobileCallInterval()),window.CVMobile===!1&&i.fullScreen.enabled===!0&&(setInterval(function(){e(".cv-ui-resizable-handle").remove()},0),window.CVVA.fullscreen=function(){window.CVVA.fullscreenInterval=setInterval(function(){e(".cv-va-bootstrap #cv-chat-content").css({"min-width":e(window).outerWidth()+"px","max-width":e(window).outerWidth()+"px",width:e(window).outerWidth()+"px","min-height":e(window).outerHeight()+"px","max-height":e(window).outerHeight()+"px",height:e(window).outerHeight()+"px","border-radius":"0px"}),e(".cv-va-bootstrap #cv-chat-header").css("border-radius","0px"),e(".cv-va-bootstrap #cv-chat-body, .cv-va-bootstrap .cv-chat-history, .cv-va-bootstrap .cv-live-chat-info, .cv-va-bootstrap .cv-live-chat-user, .cv-va-bootstrap .cv-ui-autocomplete, .cv-va-bootstrap .cv-live-chat-agent, .cv-va-bootstrap .cv-live-chat-user, #cv-eocs-overlay, .cv-va-bootstrap .cv-chat-transaction-title").addClass("font-size-vw-unit")},0)},window.CVVA.fullscreen(),e(".cv-va-bootstrap #cv-compress-expand-cvbtn").on("click",function(){e(this).find("i").hasClass("fa-compress")?(clearInterval(window.CVVA.fullscreenInterval),e(this).find("i").removeClass("fa-compress").addClass("fa-expand"),e(".cv-va-bootstrap #cv-chat-content").css({width:"350px","min-width":"350px","max-width":"350px","min-height":"560px","min-height":"560px",height:"560px","border-radius":"6px"}),e(".cv-va-bootstrap #cv-chat-header").css("border-radius","5px 5px 0 0"),e(".cv-va-bootstrap #cv-chat-body, .cv-va-bootstrap .cv-chat-history, .cv-va-bootstrap .cv-live-chat-info, .cv-va-bootstrap .cv-live-chat-user, .cv-va-bootstrap .cv-ui-autocomplete, .cv-va-bootstrap .cv-live-chat-agent, .cv-va-bootstrap .cv-live-chat-user, #cv-eocs-overlay, .cv-va-bootstrap .cv-chat-transaction-title").removeClass("font-size-vw-unit")):(window.CVVA.fullscreen(),e(this).find("i").removeClass("fa-expand").addClass("fa-compress"),e(".cv-va-bootstrap #cv-chat-content").css({left:"auto",right:"0",top:"0"}))})),void 0===window.placeholderSuggestions&&(window.placeholderSuggestions=i.placeholderSuggestions),t.isArray(window.placeholderSuggestions)&&window.placeholderSuggestions.length){var s=function(){return Math.floor(Math.random()*window.placeholderSuggestions.length)+1-1};window.placeholderRotating=!1,window.placeHolderRotationCount=0;var r=function(){if((0===i.placeHolderRotationTicks||window.placeHolderRotationCount<=i.placeHolderRotationTicks)&&window.placeholderRotating===!1){for(window.placeholderRotating=!0,window.suggestionIndex=s();window.previousSuggestionIndex==window.suggestionIndex&&1!==window.placeholderSuggestions.length;)window.suggestionIndex=s();var e=window.placeholderSuggestions[window.suggestionIndex];window.previousSuggestionIndex=window.suggestionIndex;var t,n=e.length,o=0,r=0;a.$input_el.attr("placeholder","|"),function l(){t=setTimeout(function(){if(!a.$input_el.is(":focus")||window.restartPlaceholderRotationTimeout){o++;var i=e.substring(r,o);a.$input_el.attr("placeholder",i+"|"),o>37&&r++,l(),o==n&&(a.$input_el.length&&a.$input_el.attr("placeholder",a.$input_el.attr("placeholder").slice(0,-1)),clearTimeout(t),!a.$input_el.is(":focus")||window.restartPlaceholderRotationTimeout?window.placeholderRotating=!1:(window.placeholderRotating=!0,a.$input_el.attr("placeholder","")))}else window.placeholderRotating=!0,a.$input_el.attr("placeholder","")},i.placeholderTimeoutMilliseconds)}(),i.placeholderSuggestionOptions.disabled===!0&&window.cvVaCollectionLength>i.placeholderSuggestionOptions.collectionLength&&(clearTimeout(t),a.$input_el.attr("placeholder",""))}window.placeHolderRotationCount++};window.setInterval(r,3e3),window.placeHolderRotationReset=function(){clearTimeout(window.restartPlaceholderRotation),window.restartPlaceholderRotation=setTimeout(function(){window.restartPlaceholderRotationTimeout=!0,window.placeholderRotating=!1},i.placeHolderRotationResetMilliseconds),window.restartPlaceholderRotationTimeout=!1,window.placeholderRotating=!0,a.$input_el.attr("placeholder","")},a.$input_el.click(function(){window.placeHolderRotationReset()}).focus(function(){window.placeHolderRotationReset()}).blur(function(){window.setTimeout(function(){},100),window.placeholderRotating=!1})}},getSubmitButton:function(){var e=this,t=this.$el.find("button");return t.length||(t=this.$el.find("input[type='submit']")),t.length||(t=this.$el.find("input[type='image']")),t.click(function(t){e.$input_el.prop("disabled",!0),t.preventDefault(),e.handleSubmit(t)}),t},setButtonState:function(){var t=this,n=t.$input_el.val();e.trim(n).length>0?(t.$submit_btn.removeClass("disabled").removeAttr("disabled"),e(".cv-va-bootstrap #cv-chat-submit.cvbtn").css({"background-color":i.submitBtn.backgroundColor,"border-color":i.submitBtn.backgroundColor}),e(".cv-va-bootstrap .cv-button-text-image").show(),e(".cv-va-bootstrap .cv-disabled-button-text-image").hide()):(t.$submit_btn.addClass("disabled").prop("disabled","true"),e(".cv-va-bootstrap #cv-chat-submit.disabled").css({"background-color":i.submitBtn.disabled.backgroundColor,"border-color":i.submitBtn.disabled.backgroundColor}),e(".cv-va-bootstrap .cv-button-text-image").hide(),e(".cv-va-bootstrap .cv-disabled-button-text-image").show())},handleSubmit:function(t){t.preventDefault(),t.stopPropagation(),e(this).unbind("submit");var n=this,i=n.$input_el.val()||"";if(e(".cv-va-bootstrap .cv-ui-autocomplete").hide(),!n.$input_el.is(":visible")){var o=n.$el.parent().parent().children("#cv-chat-body").children("#cv-chat-answer-history");o.scrollTop(o[0].scrollHeight)}return n.$input_el.show(),n.$input_el.val("").focus(),n.prevent_empty_submissions&&n.setButtonState(),n.prevent_empty_submissions&!e.trim(i).length?!1:void this.model.askQuestion(i)}});return o}),define("views/virtual_assistant/components/base",["jquery","underscore_loader","backbone"],function(e,t,n){t=window.CVUnderscore;var i=n.View.extend({bindEvent:"change",initialize:function(t){if(n.View.prototype.initialize.call(this,t),"string"==typeof t.bindEvent&&(this.bindEvent=t.bindEvent),!this.model)throw new Error("Views that extend 'base' (js_source/views/virtual_assistant/components/base) must define a model instance");e.trim(this.bindEvent).length&&this.model.on(this.bindEvent,this.render,this)}});return i}),define("views/virtual_assistant/components/answer",["jquery","underscore_loader","backbone","views/virtual_assistant/components/base"],function(e,t,n,i){t=window.CVUnderscore;var o=i.extend({bindEvent:"change:botanswer",el:"#cv-chat-answer-history",navwin:null,use_removestyles:!0,initialize:function(e){i.prototype.initialize.call(this,e),this.use_removestyles="boolean"==typeof e.use_removestyles?e.use_removestyles:!0},removeStyles:function(t){return t.find("[style]").removeAttr("style"),t.find("font").each(function(){e(this).replaceWith(this.childNodes)}),t},render:function(e){this.$el.html(e.get("botanswer")),this.use_removestyles&&this.removeStyles(this.$el);var n=e.get("connectors");return t.isArray(n)&&n.length&&this.renderConnectors(n),this},renderConnectors:function(n){var i,o=this,a=e("<ul>");t.each(n,function(t){e.trim(t.DefaultClickText).length&&(i=e("<li>").append(o.renderConnector(t)),a.append(i))}),this.$el.append(a)},renderConnector:function(t){this.model;return e("<a>").attr("href","#").text(t.DefaultClickText)},renderSemanticFAQ:function(t){this.model;return e("<a>").attr("href","#").text(t.QuestionText)},renderDisambiguationOptions:function(t){this.model;return e("<a>").attr("href","#").text(t.clicktext)},openNavwin:function(e,t,n){null!=this.navwin?this.navwin.closed?this.navwin=window.open(e,t,n):this.navwin.location.href=e:this.navwin=window.open(e,t,n)},botNav:function(e,t,n,i,o){var a=["fullscreen=no","toolbar=1","scrollbars=1","location=1","statusbar=1","menubar=1","resizable=1"].join(",");if("string"!=typeof e)if(e.stopPropagation(),e.preventDefault(),"_blank"===n||""===n.trim())if(window.screen&&""!==i&&""!==o&&void 0!==i&&void 0!==o){var s=window.screen.availWidth*parseInt(i.substr(0,i.indexOf("%")))/100,r=window.screen.availHeight*parseInt(o.substr(0,o.indexOf("%")))/100;window.open(t,n,"width="+s+",height="+r+","+a)}else window.open(t,n);else"_top"===n&&(window.parent.location.href=t);else window.open(e,"_blank")}});return o}),function(e){"use strict";"function"==typeof define&&define.amd?define("scrollto",["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";function t(t){return!t.nodeName||-1!==e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])}function n(t){return e.isFunction(t)||e.isPlainObject(t)?t:{top:t,left:t}}var i=e.scrollTo=function(t,n,i){return e(window).scrollTo(t,n,i)};return i.defaults={axis:"xy",duration:0,limit:!0},e.fn.scrollTo=function(o,a,s){"object"==typeof a&&(s=a,a=0),"function"==typeof s&&(s={onAfter:s}),"max"===o&&(o=9e9),s=e.extend({},i.defaults,s),a=a||s.duration;var r=s.queue&&s.axis.length>1;return r&&(a/=2),s.offset=n(s.offset),s.over=n(s.over),this.each(function(){function l(t){var n=e.extend({},s,{queue:!0,duration:a,complete:t&&function(){t.call(d,p,s)}});h.animate(v,n)}if(null!==o){var c,u=t(this),d=u?this.contentWindow||window:this,h=e(d),p=o,v={};switch(typeof p){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(p)){p=n(p);break}p=u?e(p):e(p,d);case"object":if(0===p.length)return;(p.is||p.style)&&(c=(p=e(p)).offset())}var f=e.isFunction(s.offset)&&s.offset(d,p)||s.offset;e.each(s.axis.split(""),function(e,t){var n="x"===t?"Left":"Top",o=n.toLowerCase(),a="scroll"+n,m=h[a](),g=i.max(d,t);if(c)v[a]=c[o]+(u?0:m-h.offset()[o]),s.margin&&(v[a]-=parseInt(p.css("margin"+n),10)||0,v[a]-=parseInt(p.css("border"+n+"Width"),10)||0),v[a]+=f[o]||0,s.over[o]&&(v[a]+=p["x"===t?"width":"height"]()*s.over[o]);else{var b=p[o];v[a]=b.slice&&"%"===b.slice(-1)?parseFloat(b)/100*g:b}s.limit&&/^\d+$/.test(v[a])&&(v[a]=v[a]<=0?0:Math.min(v[a],g)),!e&&s.axis.length>1&&(m===v[a]?v={}:r&&(l(s.onAfterFirst),v={}))}),l(s.onAfter)}})},i.max=function(n,i){var o="x"===i?"Width":"Height",a="scroll"+o;if(!t(n))return n[a]-e(n)[o.toLowerCase()]();var s="client"+o,r=n.ownerDocument||n.document,l=r.documentElement,c=r.body;return Math.max(l[a],c[a])-Math.min(l[s],c[s])},e.Tween.propHooks.scrollLeft=e.Tween.propHooks.scrollTop={get:function(t){return e(t.elem)[t.prop]()},set:function(t){var n=this.get(t);if(t.options.interrupt&&t._last&&t._last!==n)return e(t.elem).stop();var i=Math.round(t.now);n!==i&&(e(t.elem)[t.prop](i),t._last=this.get(t))}},i}),function e(t,n,i){function o(s,r){if(!n[s]){if(!t[s]){var l="function"==typeof require&&require;if(!r&&l)return l(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return o(n?n:e)},u,u.exports,e,t,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){function i(e){e.fn.perfectScrollbar=function(e){return this.each(function(){if("object"==typeof e||"undefined"==typeof e){var t=e;a.get(this)||o.initialize(this,t)}else{var n=e;"update"===n?o.update(this):"destroy"===n&&o.destroy(this)}})}}var o=e("../main"),a=e("../plugin/instances");if("function"==typeof define&&define.amd)define("perfectScrollbar",["jquery"],i);else{var s=window.jQuery?window.jQuery:window.$;"undefined"!=typeof s&&i(s)}t.exports=i},{"../main":7,"../plugin/instances":18}],2:[function(e,t,n){function i(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}function o(e,t){var n=e.className.split(" "),i=n.indexOf(t);i>=0&&n.splice(i,1),e.className=n.join(" ")}n.add=function(e,t){e.classList?e.classList.add(t):i(e,t)},n.remove=function(e,t){e.classList?e.classList.remove(t):o(e,t)},n.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},{}],3:[function(e,t,n){function i(e,t){return window.getComputedStyle(e)[t]}function o(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}function a(e,t){for(var n in t){var i=t[n];"number"==typeof i&&(i=i.toString()+"px"),e.style[n]=i}return e}var s={};s.e=function(e,t){var n=document.createElement(e);return n.className=t,n},s.appendTo=function(e,t){return t.appendChild(e),e},s.css=function(e,t,n){return"object"==typeof t?a(e,t):"undefined"==typeof n?i(e,t):o(e,t,n)},s.matches=function(e,t){return"undefined"!=typeof e.matches?e.matches(t):"undefined"!=typeof e.matchesSelector?e.matchesSelector(t):"undefined"!=typeof e.webkitMatchesSelector?e.webkitMatchesSelector(t):"undefined"!=typeof e.mozMatchesSelector?e.mozMatchesSelector(t):"undefined"!=typeof e.msMatchesSelector?e.msMatchesSelector(t):void 0},s.remove=function(e){"undefined"!=typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},s.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return s.matches(e,t)})},t.exports=s},{}],4:[function(e,t,n){var i=function(e){this.element=e,this.events={}};i.prototype.bind=function(e,t){"undefined"==typeof this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},i.prototype.unbind=function(e,t){var n="undefined"!=typeof t;this.events[e]=this.events[e].filter(function(i){return n&&i!==t?!0:(this.element.removeEventListener(e,i,!1),!1)},this)},i.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var o=function(){this.eventElements=[]};o.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return"undefined"==typeof t&&(t=new i(e),this.eventElements.push(t)),t},o.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},o.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},o.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},o.prototype.once=function(e,t,n){var i=this.eventElement(e),o=function(e){i.unbind(t,o),n(e)};i.bind(t,o)},t.exports=o},{}],5:[function(e,t,n){t.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},{}],6:[function(e,t,n){function i(e){return function(t,n){e(t,"ps--in-scrolling"),"undefined"!=typeof n?e(t,"ps--"+n):(e(t,"ps--x"),e(t,"ps--y"))}}var o=e("./class"),a=e("./dom"),s=n.toInt=function(e){return parseInt(e,10)||0},r=n.clone=function(e){if(e){if(Array.isArray(e))return e.map(r);if("object"==typeof e){var t={};for(var n in e)t[n]=r(e[n]);return t}return e}return null};n.extend=function(e,t){var n=r(e);for(var i in t)n[i]=r(t[i]);return n},n.isEditable=function(e){return a.matches(e,"input,[contenteditable]")||a.matches(e,"select,[contenteditable]")||a.matches(e,"textarea,[contenteditable]")||a.matches(e,"button,[contenteditable]")},n.removePsClasses=function(e){for(var t=o.list(e),n=0;n<t.length;n++){var i=t[n];0===i.indexOf("ps-")&&o.remove(e,i)}},n.outerWidth=function(e){return s(a.css(e,"width"))+s(a.css(e,"paddingLeft"))+s(a.css(e,"paddingRight"))+s(a.css(e,"borderLeftWidth"))+s(a.css(e,"borderRightWidth"))},n.startScrolling=i(o.add),n.stopScrolling=i(o.remove),n.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(e,t,n){var i=e("./plugin/destroy"),o=e("./plugin/initialize"),a=e("./plugin/update");t.exports={initialize:o,update:a,destroy:i}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(e,t,n){t.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(e,t,n){var i=e("../lib/helper"),o=e("../lib/dom"),a=e("./instances");t.exports=function(e){var t=a.get(e);t&&(t.event.unbindAll(),o.remove(t.scrollbarX),o.remove(t.scrollbarY),o.remove(t.scrollbarXRail),o.remove(t.scrollbarYRail),i.removePsClasses(e),a.remove(e))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(e,t,n){function i(e,t){function n(e){return e.getBoundingClientRect()}var i=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",i),t.event.bind(t.scrollbarYRail,"click",function(i){var o=i.pageY-window.pageYOffset-n(t.scrollbarYRail).top,r=o>t.scrollbarYTop?1:-1;s(e,"top",e.scrollTop+r*t.containerHeight),a(e),i.stopPropagation()}),t.event.bind(t.scrollbarX,"click",i),t.event.bind(t.scrollbarXRail,"click",function(i){var o=i.pageX-window.pageXOffset-n(t.scrollbarXRail).left,r=o>t.scrollbarXLeft?1:-1;s(e,"left",e.scrollLeft+r*t.containerWidth),a(e),i.stopPropagation()})}var o=e("../instances"),a=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=o.get(e);i(e,t)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(e,t,n){function i(e,t){function n(n){var o=i+n*t.railXRatio,s=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);0>o?t.scrollbarXLeft=0:o>s?t.scrollbarXLeft=s:t.scrollbarXLeft=o;var r=a.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;c(e,"left",r)}var i=null,o=null,r=function(t){n(t.pageX-o),l(e),t.stopPropagation(),t.preventDefault()},u=function(){a.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",r)};t.event.bind(t.scrollbarX,"mousedown",function(n){o=n.pageX,i=a.toInt(s.css(t.scrollbarX,"left"))*t.railXRatio,a.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",r),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function o(e,t){function n(n){var o=i+n*t.railYRatio,s=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);0>o?t.scrollbarYTop=0:o>s?t.scrollbarYTop=s:t.scrollbarYTop=o;var r=a.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));c(e,"top",r)}var i=null,o=null,r=function(t){n(t.pageY-o),l(e),t.stopPropagation(),t.preventDefault()},u=function(){a.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",r)};t.event.bind(t.scrollbarY,"mousedown",function(n){o=n.pageY,i=a.toInt(s.css(t.scrollbarY,"top"))*t.railYRatio,a.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",r),t.event.once(t.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var a=e("../../lib/helper"),s=e("../../lib/dom"),r=e("../instances"),l=e("../update-geometry"),c=e("../update-scroll");t.exports=function(e){var t=r.get(e);i(e,t),o(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(e,t,n){function i(e,t){function n(n,i){var o=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===o&&i>0||o>=t.contentHeight-t.containerHeight&&0>i)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===i){if(!t.scrollbarXActive)return!1;if(0===a&&0>n||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}var i=!1;t.event.bind(e,"mouseenter",function(){i=!0}),t.event.bind(e,"mouseleave",function(){i=!1});var s=!1;t.event.bind(t.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var u=a.matches(t.scrollbarX,":focus")||a.matches(t.scrollbarY,":focus");if(i||u){var d=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(d){if("IFRAME"===d.tagName)d=d.contentDocument.activeElement;else for(;d.shadowRoot;)d=d.shadowRoot.activeElement;if(o.isEditable(d))return}var h=0,p=0;switch(c.which){case 37:h=c.metaKey?-t.contentWidth:c.altKey?-t.containerWidth:-30;break;case 38:p=c.metaKey?t.contentHeight:c.altKey?t.containerHeight:30;break;case 39:h=c.metaKey?t.contentWidth:c.altKey?t.containerWidth:30;break;case 40:p=c.metaKey?-t.contentHeight:c.altKey?-t.containerHeight:-30;break;case 33:p=90;break;case 32:p=c.shiftKey?90:-90;break;case 34:p=-90;break;case 35:p=c.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:p=c.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}l(e,"top",e.scrollTop-p),l(e,"left",e.scrollLeft+h),r(e),s=n(h,p),s&&c.preventDefault()}}})}var o=e("../../lib/helper"),a=e("../../lib/dom"),s=e("../instances"),r=e("../update-geometry"),l=e("../update-scroll");t.exports=function(e){var t=s.get(e);i(e,t)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(e,t,n){function i(e,t){function n(n,i){var o=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===o&&i>0||o>=t.contentHeight-t.containerHeight&&0>i)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===i){
if(!t.scrollbarXActive)return!1;if(0===a&&0>n||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}function i(e){var t=e.deltaX,n=-1*e.deltaY;return("undefined"==typeof t||"undefined"==typeof n)&&(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!==t&&n!==n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}function o(t,n){var i=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(i){var o=window.getComputedStyle(i),a=[o.overflow,o.overflowX,o.overflowY].join("");if(!a.match(/(scroll|auto)/))return!1;var s=i.scrollHeight-i.clientHeight;if(s>0&&!(0===i.scrollTop&&n>0||i.scrollTop===s&&0>n))return!0;var r=i.scrollLeft-i.clientWidth;if(r>0&&!(0===i.scrollLeft&&0>t||i.scrollLeft===r&&t>0))return!0}return!1}function r(r){var c=i(r),u=c[0],d=c[1];o(u,d)||(l=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(d?s(e,"top",e.scrollTop-d*t.settings.wheelSpeed):s(e,"top",e.scrollTop+u*t.settings.wheelSpeed),l=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(u?s(e,"left",e.scrollLeft+u*t.settings.wheelSpeed):s(e,"left",e.scrollLeft-d*t.settings.wheelSpeed),l=!0):(s(e,"top",e.scrollTop-d*t.settings.wheelSpeed),s(e,"left",e.scrollLeft+u*t.settings.wheelSpeed)),a(e),l=l||n(u,d),l&&(r.stopPropagation(),r.preventDefault()))}var l=!1;"undefined"!=typeof window.onwheel?t.event.bind(e,"wheel",r):"undefined"!=typeof window.onmousewheel&&t.event.bind(e,"mousewheel",r)}var o=e("../instances"),a=e("../update-geometry"),s=e("../update-scroll");t.exports=function(e){var t=o.get(e);i(e,t)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(e,t,n){function i(e,t){t.event.bind(e,"scroll",function(){a(e)})}var o=e("../instances"),a=e("../update-geometry");t.exports=function(e){var t=o.get(e);i(e,t)}},{"../instances":18,"../update-geometry":19}],15:[function(e,t,n){function i(e,t){function n(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}function i(){c||(c=setInterval(function(){return a.get(e)?(r(e,"top",e.scrollTop+u.top),r(e,"left",e.scrollLeft+u.left),void s(e)):void clearInterval(c)},50))}function l(){c&&(clearInterval(c),c=null),o.stopScrolling(e)}var c=null,u={top:0,left:0},d=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(n())?d=!0:(d=!1,l())}),t.event.bind(window,"mouseup",function(){d&&(d=!1,l())}),t.event.bind(window,"keyup",function(){d&&(d=!1,l())}),t.event.bind(window,"mousemove",function(t){if(d){var n={x:t.pageX,y:t.pageY},a={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};n.x<a.left+3?(u.left=-5,o.startScrolling(e,"x")):n.x>a.right-3?(u.left=5,o.startScrolling(e,"x")):u.left=0,n.y<a.top+3?(a.top+3-n.y<5?u.top=-5:u.top=-20,o.startScrolling(e,"y")):n.y>a.bottom-3?(n.y-a.bottom+3<5?u.top=5:u.top=20,o.startScrolling(e,"y")):u.top=0,0===u.top&&0===u.left?l():i()}})}var o=e("../../lib/helper"),a=e("../instances"),s=e("../update-geometry"),r=e("../update-scroll");t.exports=function(e){var t=a.get(e);i(e,t)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(e,t,n){function i(e,t,n,i){function o(n,i){var o=e.scrollTop,a=e.scrollLeft,s=Math.abs(n),r=Math.abs(i);if(r>s){if(0>i&&o===t.contentHeight-t.containerHeight||i>0&&0===o)return!t.settings.swipePropagation}else if(s>r&&(0>n&&a===t.contentWidth-t.containerWidth||n>0&&0===a))return!t.settings.swipePropagation;return!0}function l(t,n){r(e,"top",e.scrollTop-n),r(e,"left",e.scrollLeft-t),s(e)}function c(){w=!0}function u(){w=!1}function d(e){return e.targetTouches?e.targetTouches[0]:e}function h(e){return e.targetTouches&&1===e.targetTouches.length?!0:e.pointerType&&"mouse"!==e.pointerType&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE?!0:!1}function p(e){if(h(e)){S=!0;var t=d(e);m.pageX=t.pageX,m.pageY=t.pageY,g=(new Date).getTime(),null!==y&&clearInterval(y),e.stopPropagation()}}function v(e){if(!S&&t.settings.swipePropagation&&p(e),!w&&S&&h(e)){var n=d(e),i={pageX:n.pageX,pageY:n.pageY},a=i.pageX-m.pageX,s=i.pageY-m.pageY;l(a,s),m=i;var r=(new Date).getTime(),c=r-g;c>0&&(b.x=a/c,b.y=s/c,g=r),o(a,s)&&(e.stopPropagation(),e.preventDefault())}}function f(){!w&&S&&(S=!1,t.settings.swipeEasing&&(clearInterval(y),y=setInterval(function(){return a.get(e)&&(b.x||b.y)?Math.abs(b.x)<.01&&Math.abs(b.y)<.01?void clearInterval(y):(l(30*b.x,30*b.y),b.x*=.8,void(b.y*=.8)):void clearInterval(y)},10)))}var m={},g=0,b={},y=null,w=!1,S=!1;n?(t.event.bind(window,"touchstart",c),t.event.bind(window,"touchend",u),t.event.bind(e,"touchstart",p),t.event.bind(e,"touchmove",v),t.event.bind(e,"touchend",f)):i&&(window.PointerEvent?(t.event.bind(window,"pointerdown",c),t.event.bind(window,"pointerup",u),t.event.bind(e,"pointerdown",p),t.event.bind(e,"pointermove",v),t.event.bind(e,"pointerup",f)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",c),t.event.bind(window,"MSPointerUp",u),t.event.bind(e,"MSPointerDown",p),t.event.bind(e,"MSPointerMove",v),t.event.bind(e,"MSPointerUp",f)))}var o=e("../../lib/helper"),a=e("../instances"),s=e("../update-geometry"),r=e("../update-scroll");t.exports=function(e){if(o.env.supportsTouch||o.env.supportsIePointer){var t=a.get(e);i(e,t,o.env.supportsTouch,o.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(e,t,n){var i=e("../lib/helper"),o=e("../lib/class"),a=e("./instances"),s=e("./update-geometry"),r={"click-rail":e("./handler/click-rail"),"drag-scrollbar":e("./handler/drag-scrollbar"),keyboard:e("./handler/keyboard"),wheel:e("./handler/mouse-wheel"),touch:e("./handler/touch"),selection:e("./handler/selection")},l=e("./handler/native-scroll");t.exports=function(e,t){t="object"==typeof t?t:{},o.add(e,"ps");var n=a.add(e);n.settings=i.extend(n.settings,t),o.add(e,"ps--theme_"+n.settings.theme),n.settings.handlers.forEach(function(t){r[t](e)}),l(e),s(e)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(e,t,n){function i(e){function t(){l.add(e,"ps--focus")}function n(){l.remove(e,"ps--focus")}var i=this;i.settings=r.clone(c),i.containerWidth=null,i.containerHeight=null,i.contentWidth=null,i.contentHeight=null,i.isRtl="rtl"===u.css(e,"direction"),i.isNegativeScroll=function(){var t=e.scrollLeft,n=null;return e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=t,n}(),i.negativeScrollAdjustment=i.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.event=new d,i.ownerDocument=e.ownerDocument||document,i.scrollbarXRail=u.appendTo(u.e("div","ps__scrollbar-x-rail"),e),i.scrollbarX=u.appendTo(u.e("div","ps__scrollbar-x"),i.scrollbarXRail),i.scrollbarX.setAttribute("tabindex",0),i.event.bind(i.scrollbarX,"focus",t),i.event.bind(i.scrollbarX,"blur",n),i.scrollbarXActive=null,i.scrollbarXWidth=null,i.scrollbarXLeft=null,i.scrollbarXBottom=r.toInt(u.css(i.scrollbarXRail,"bottom")),i.isScrollbarXUsingBottom=i.scrollbarXBottom===i.scrollbarXBottom,i.scrollbarXTop=i.isScrollbarXUsingBottom?null:r.toInt(u.css(i.scrollbarXRail,"top")),i.railBorderXWidth=r.toInt(u.css(i.scrollbarXRail,"borderLeftWidth"))+r.toInt(u.css(i.scrollbarXRail,"borderRightWidth")),u.css(i.scrollbarXRail,"display","block"),i.railXMarginWidth=r.toInt(u.css(i.scrollbarXRail,"marginLeft"))+r.toInt(u.css(i.scrollbarXRail,"marginRight")),u.css(i.scrollbarXRail,"display",""),i.railXWidth=null,i.railXRatio=null,i.scrollbarYRail=u.appendTo(u.e("div","ps__scrollbar-y-rail"),e),i.scrollbarY=u.appendTo(u.e("div","ps__scrollbar-y"),i.scrollbarYRail),i.scrollbarY.setAttribute("tabindex",0),i.scrollbarY.setAttribute("aria-hidden","true"),i.event.bind(i.scrollbarY,"focus",t),i.event.bind(i.scrollbarY,"blur",n),i.scrollbarYActive=null,i.scrollbarYHeight=null,i.scrollbarYTop=null,i.scrollbarYRight=r.toInt(u.css(i.scrollbarYRail,"right")),i.isScrollbarYUsingRight=i.scrollbarYRight===i.scrollbarYRight,i.scrollbarYLeft=i.isScrollbarYUsingRight?null:r.toInt(u.css(i.scrollbarYRail,"left")),i.scrollbarYOuterWidth=i.isRtl?r.outerWidth(i.scrollbarY):null,i.railBorderYWidth=r.toInt(u.css(i.scrollbarYRail,"borderTopWidth"))+r.toInt(u.css(i.scrollbarYRail,"borderBottomWidth")),u.css(i.scrollbarYRail,"display","block"),i.railYMarginHeight=r.toInt(u.css(i.scrollbarYRail,"marginTop"))+r.toInt(u.css(i.scrollbarYRail,"marginBottom")),u.css(i.scrollbarYRail,"display",""),i.railYHeight=null,i.railYRatio=null}function o(e){return e.getAttribute("data-ps-id")}function a(e,t){e.setAttribute("data-ps-id",t)}function s(e){e.removeAttribute("data-ps-id")}var r=e("../lib/helper"),l=e("../lib/class"),c=e("./default-setting"),u=e("../lib/dom"),d=e("../lib/event-manager"),h=e("../lib/guid"),p={};n.add=function(e){var t=h();return a(e,t),p[t]=new i(e),p[t]},n.remove=function(e){delete p[o(e)],s(e)},n.get=function(e){return p[o(e)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(e,t,n){function i(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function o(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,r.css(t.scrollbarXRail,n);var i={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?i.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:i.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?i.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:i.left=t.scrollbarYLeft+e.scrollLeft,r.css(t.scrollbarYRail,i),r.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),r.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}var a=e("../lib/helper"),s=e("../lib/class"),r=e("../lib/dom"),l=e("./instances"),c=e("./update-scroll");t.exports=function(e){var t=l.get(e);t.containerWidth=e.clientWidth,t.containerHeight=e.clientHeight,t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight;var n;e.contains(t.scrollbarXRail)||(n=r.queryChildren(e,".ps__scrollbar-x-rail"),n.length>0&&n.forEach(function(e){r.remove(e)}),r.appendTo(t.scrollbarXRail,e)),e.contains(t.scrollbarYRail)||(n=r.queryChildren(e,".ps__scrollbar-y-rail"),n.length>0&&n.forEach(function(e){r.remove(e)}),r.appendTo(t.scrollbarYRail,e)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=i(t,a.toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=a.toInt((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=i(t,a.toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=a.toInt(e.scrollTop*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),o(e,t),t.scrollbarXActive?s.add(e,"ps--active-x"):(s.remove(e,"ps--active-x"),t.scrollbarXWidth=0,t.scrollbarXLeft=0,c(e,"left",0)),t.scrollbarYActive?s.add(e,"ps--active-y"):(s.remove(e,"ps--active-y"),t.scrollbarYHeight=0,t.scrollbarYTop=0,c(e,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(e,t,n){var i=e("./instances"),o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};t.exports=function(e,t,n){if("undefined"==typeof e)throw"You must provide an element to the update-scroll function";if("undefined"==typeof t)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";"top"===t&&0>=n&&(e.scrollTop=n=0,e.dispatchEvent(o("ps-y-reach-start"))),"left"===t&&0>=n&&(e.scrollLeft=n=0,e.dispatchEvent(o("ps-x-reach-start")));var a=i.get(e);"top"===t&&n>=a.contentHeight-a.containerHeight&&(n=a.contentHeight-a.containerHeight,n-e.scrollTop<=1?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(o("ps-y-reach-end"))),"left"===t&&n>=a.contentWidth-a.containerWidth&&(n=a.contentWidth-a.containerWidth,n-e.scrollLeft<=1?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(o("ps-x-reach-end"))),void 0===a.lastTop&&(a.lastTop=e.scrollTop),void 0===a.lastLeft&&(a.lastLeft=e.scrollLeft),"top"===t&&n<a.lastTop&&e.dispatchEvent(o("ps-scroll-up")),"top"===t&&n>a.lastTop&&e.dispatchEvent(o("ps-scroll-down")),"left"===t&&n<a.lastLeft&&e.dispatchEvent(o("ps-scroll-left")),"left"===t&&n>a.lastLeft&&e.dispatchEvent(o("ps-scroll-right")),"top"===t&&n!==a.lastTop&&(e.scrollTop=a.lastTop=n,e.dispatchEvent(o("ps-scroll-y"))),"left"===t&&n!==a.lastLeft&&(e.scrollLeft=a.lastLeft=n,e.dispatchEvent(o("ps-scroll-x")))}},{"./instances":18}],21:[function(e,t,n){var i=e("../lib/helper"),o=e("../lib/dom"),a=e("./instances"),s=e("./update-geometry"),r=e("./update-scroll");t.exports=function(e){var t=a.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,o.css(t.scrollbarXRail,"display","block"),o.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=i.toInt(o.css(t.scrollbarXRail,"marginLeft"))+i.toInt(o.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=i.toInt(o.css(t.scrollbarYRail,"marginTop"))+i.toInt(o.css(t.scrollbarYRail,"marginBottom")),o.css(t.scrollbarXRail,"display","none"),o.css(t.scrollbarYRail,"display","none"),s(e),r(e,"top",e.scrollTop),r(e,"left",e.scrollLeft),o.css(t.scrollbarXRail,"display",""),o.css(t.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]),define("views/virtual_assistant/components/answer_inline",["jquery","jquery_ui","underscore_loader","backbone","views/virtual_assistant/components/answer","settings","scrollto","perfectScrollbar"],function(e,t,n,i,o,a,s,r){n=window.CVUnderscore;var l=o.extend({use_unwraplinks:!0,initialize:function(t){o.prototype.initialize.call(this,t),this.launcher=t.launcher,this.use_unwraplinks="boolean"==typeof t.use_unwraplinks?t.use_unwraplinks:!0,this.append_to=t.append_to||"bottom",this.backlink_text=t.backlink_text||"Back",this.backlink_classes=t.backlink_classes||"back_link cvbtn cvbtn-mini",this.$scrollable_el=e(t.scrollable_el||"#answer");var n=this;void 0!==window.cvVaCollectionLength&&window.cvVaCollectionLength>1&&null!==localStorage.getItem(a.businessName+"-cvVaSemanticsFAQs")&&(n.$el.parent().parent().find(".cv-chat-va-typing").remove(),n.$el.parent().find(".suggestions").hide(),n.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!1)),n.$el.parent().parent().find("#cv-lc-cvbtn").on("click",function(e){e.preventDefault(),n.model.extra_params.lcBtnClicked=!0,window.ask_question("livechat")})},unwrapLinks:function(){this.$el.find("a").each(function(){var t=e(this);t.hasClass("back_link")?t.remove():t.parent(".cv-chat-connector").hasClass("cv-sematic-connector")||t.replaceWith(e(this).text())}),this.$el.find(".cv-chat-connector").each(function(){var t=e(this);t.hasClass("cv-sematic-connector")||t.removeClass("cv-chat-connector").addClass("cv-chat-connector-disabled").unbind("click mouseenter mouseleave").add(e(this).children("span")).css({"background-color":a.connectorsBackgroundColor,color:a.connectorsFontColor})}),"default"===a.icsStyle?this.$el.find(".cv-chat-connector-ics").each(function(){var t=e(this);t.unbind("click").attr("disabled",!0).addClass("cv-chat-connector-ics-disabled")}):"thumbs"===a.icsStyle&&this.$el.find(".thumbs-ics").each(function(){var t=e(this);t.hide()}),window.processingRequest=!1},addTransaction:function(e,t){var n=this,i=new Date;i.getHours()+":"+(i.getMinutes()<10?"0":"")+i.getMinutes();"bottom"==n.append_to?n.$el.append(e):n.$el.prepend(e),"conversational"===a.vaChatView&&n.collection.length>0&&(window.CVMobile===!1&&n.collection.length>1?a.shrunkenUI===!0?e.find(".cv-va-bubble").addClass("va-time-stamp-shim"):e.find(".va-time-stamp").addClass("va-time-stamp-shim"):e.find(".cv-va-bubble").addClass("va-time-stamp-shim"),e.find(".cv-question-link-connector").wrap('<li class="cv-list-group-item cv-chat-connector"></li>'),e.find(".cv-question-link-connector").after('<span class="pull-right"><i class="fa fa-arrow-right"></i></span>'))},addBackLink:function(t,n){var i=this;e.trim(t.get("dtreenodeid")).length&&"1"==e.trim(t.get("backnavflag"))&&"false"===e.trim(t.get("backnavdisabled"))&&($back=e("<a>").attr("href","#").addClass(i.backlink_classes).text(i.backlink_text).click(function(e){e.preventDefault(),e.stopPropagation(),(window.processingRequest===!1||void 0===window.processingRequest)&&(window.processingRequest=!0,i.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!0),i.model.backnavRequest())}),$back.prepend('<i class="fa fa-arrow-left" aria-hidden="true"></i>'),"normal"===a.vaCaption.type?n.find(".cv-va-bubble").append($back):"iMessage"===a.vaCaption.type&&setTimeout(function(){i.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!1),window.CVMobile===!1&&i.$el.parent().parent().find("#cv-chat-user-entry").focus(),n.find(".cv-va-bubble").last().append($back)},1500))},render:function(t){var i=this;i.$el.parent().parent().find("#cv-chat-loader-layer").hide(),window.CVVA.hasOwnProperty("inputLauncher")&&window.CVVA.inputLauncher.trigger===!0&&(window.CVVA.inputLauncher.trigger=!1,i.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!0),setTimeout(function(){window.CVVA.inputLauncher.userQuestion&&t.askQuestion(window.CVVA.inputLauncher.userQuestion)},500)),window.CVVA.model.ident=t.get("ident"),t.get("entrysuggestions")&&"string"==typeof t.get("entrysuggestions")&&(window.placeholderSuggestions=t.get("entrysuggestions").replace(/[\[\]]|"+/g,"").split(",")),window.CVSaveAttributes(),"true"===t.get("livechatavailable")&&a.cvLCbtn.enabled===!0?(i.$el.parent().parent().find("#cv-lc-cvbtn").show(),i.$el.parent().parent().find("#cv-font-size").css("bottom","118px")):"false"===t.get("livechatavailable")&&i.$el.parent().parent().find("#cv-lc-cvbtn").hide(),a.anchoredContainer.enabled===!0&&a.anchoredContainer.disabledResizeHandler===!0&&e(".cv-va-bootstrap #cv-chat-content").css({top:"auto"}),clearInterval(window.proactiveEndSessionInterval);var o=t.get("autosubmitmode")||a.enableProactiveEndSession||!1,s=1e3*parseInt(t.get("autosubmitwaittime"))||a.proactiveEndSessionWaitTime||1e4;"true"===o&&window.cvVaCollectionLength>0?(window.proactiveEndSessionTriggered=!0,window.proactiveEndSessionInterval=setInterval(function(){t.askQuestion(a.proactiveEndSessionCommand)},s)):window.proactiveEndSessionTriggered=!1,a.persistenceEnabled===!0&&(window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaTimestamp",Date.now())}),localStorage.setItem(a.businessName+"-cvVaTimestamp",Date.now())),void 0!==window.cvVaCollectionLength&&1==i.collection.length&&(1===window.cvVaCollectionLength&&(window.cvVaCollectionLength=2),i.collection.length=window.cvVaCollectionLength),window.cvVaCollectionLength=i.collection.length,i.$el.css("pointer-events","all"),a.avatar===!0&&window.cvVaCollectionLength<2&&i.$el.parent().parent().find("#cv-chat-img-avatar").show(),window.CVMobile===!0&&e(".cv-va-bootstrap #cv-chat-user-entry").blur();var r="false";void 0!==t.get(a.livechatOfferETV)&&(r=t.get(a.livechatOfferETV).toLowerCase()),"true"===r&&this.$el.fadeOut("fast",function(){i.$el.parent().parent().find("#cv-chat-loader-layer").show()});var l=t.get("faqitems").suggestedfaqlist.semanticfaqs.semanticfaq,c=t.get("connectors"),u=!1;n.isArray(c)&&c.forEach(function(e){""===e.DefaultClickText&&(u=!0)}),i.collection.length>1&&"false"===r&&n.isArray(l)&&(a.vaCaption.enabled===!0&&"normal"===a.vaCaption.type&&i.$el.parent().parent().find("#cv-chat-form").before('<span class="cv-chat-va-typing">'+a.vaCaption.text+"<span>.</span><span>.</span><span>.</span></span>"),i.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!0),i.$el.parent().find(".suggestions").show());var d=function(){if(window.CVSaveAttributes(),window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(a.businessName+"-cvVaSemanticsFAQs",JSON.stringify(l))}),localStorage.removeItem(a.businessName+"-cvVaSemanticsFAQs"),i.collection.length>1&&(i.$el.parent().parent().find(".cv-chat-va-typing").remove(),i.$el.parent().find(".suggestions").hide(),i.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!1),window.CVMobile===!1&&i.$el.parent().parent().find("#cv-chat-user-entry").focus()),t.get("botanswer").trim().length>0){window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaInitCall",!0)}),localStorage.setItem(a.businessName+"-cvVaInitCall",!0),i.use_unwraplinks&&i.unwrapLinks();var o;i.collection.length>1?(o=i.$el.find(".cv-chat-transaction-panel").last(),"normal"===a.vaCaption.type?o=e("<div>").addClass("panel panel-defaXult cv-chat-transaction-panel"):"iMessage"===a.vaCaption.type&&(o=i.$el.find(".cv-chat-transaction-panel").last())):o=e("<div>").addClass("cv-init-wrapper");var s;if(2==i.collection.length){if(s={fontSize:a.inputFontSize,height:a.inputHeight},window.CVMobile===!0&&(s={fontSize:"18px",height:"50px"}),i.$el.parent().parent().find("#cv-chat-user-entry").css(s),a.submitBtn.embedded.enabled===!0&&window.CVMobile===!1){var r=a.submitBtn.embedded.width;i.$el.parent().parent().find("#cv-chat-submit").css({width:r,position:"absolute",right:"17px",top:"2px",padding:"7px","border-radius":a.inputBorderRadius}),i.$el.parent().parent().find("#cv-chat-user-entry").css({"font-size":"21px",height:"44px",padding:"6px 133px 6px 9px"})}a.useImageButton===!1&&i.$el.parent().parent().find("#cv-chat-submit").empty().append('<i id="cv-submit-icon" class="'+a.submitBtn.fontAwesome+'" aria-hidden="true"></i>'+a.submitBtn.interactionText),i.$el.parent().parent().find(".cv-print-icon").show(),window.CVMobile===!1&&void 0===window.resizableAttached&&(window.resizableAttached=!0,window.CVVA.resizable())}var d=t.get("userinputtitle")||"We found an answer for...",p="";t.get("relatedlistprompttext");p=""!==e.trim(t.get("question"))?t.get("question").substr(0,1).toUpperCase()+t.get("question").substr(1):h.substr(0,1).toUpperCase()+h.substr(1);var v=new Date,f=v.getHours()+":"+(v.getMinutes()<10?"0":"")+v.getMinutes();return""===e.trim(t.get("question"))&&""===h||n.isArray(l)||n.isArray(c)&&u!==!0?n.isArray(l)||n.isArray(c)&&u!==!0||(a.bubbleInit===!0?o.html('<div class="cv-init-message">'+t.get("botanswer")+"</div>"):o.html(t.get("botanswer"))):"conversational"===a.vaChatView?(void 0!==t.get("hideuserentry")&&"true"==t.get("hideuserentry")?i.$el.find(".cv-va-bubble").last().html(t.get("botanswer")).after('<span class="va-time-stamp">'+a.virtualAgentName+"&nbsp"+f+"</span>"):void 0!==t.get("hideuserentry")&&"true"==t.get("hideuserentry")?i.$el.find(".cv-va-bubble").last().html(t.get("botanswer")).after('<span class="va-time-stamp">'+a.virtualAgentName+"&nbsp"+f+"</span>"):"normal"===a.vaCaption.type?o.html('<div class="cv-col-xs-12"><div class="cv-va-bubble">'+t.get("botanswer")+'</div><span class="va-time-stamp">'+a.virtualAgentName+"&nbsp"+f+"</span></div>"):"iMessage"===a.vaCaption.type&&(i.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!0),setTimeout(function(){i.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!1),window.CVMobile===!1&&i.$el.parent().parent().find("#cv-chat-user-entry").focus(),i.$el.find(".cv-va-bubble").last().html(t.get("botanswer")).after('<span class="va-time-stamp">'+a.virtualAgentName+"&nbsp"+f+"</span>"),a.avatar===!0&&(e("#cv-toggle-avatar").is(":checked")||o.find(".va-time-stamp").css("left","6px")),window.CVSaveAttributes()},1500)),window.CVMobile===!1?a.shrunkenUI===!0?(o.find(".cv-va-bubble").addClass("va-time-stamp-shim"),o.find(".panel-heading").addClass("va-time-stamp-shim")):(o.find(".va-time-stamp").addClass("va-time-stamp-shim"),o.find(".user-cv-time-stamp").addClass("va-time-stamp-shim")):(o.find(".cv-va-bubble").addClass("va-time-stamp-shim"),o.find(".panel-heading").addClass("va-time-stamp-shim"))):void 0!==t.get("hideuserentry")&&"true"==t.get("hideuserentry")?o.html('<div class="clearfix"></div></div><div class="cv-va-bubble">'+t.get("botanswer")+"</div>"):o.html('<div class="panel-heading cv-chat-transaction-heading"><div class="panel-title pull-left cv-chat-transaction-title"><span>'+d+' </span><span class="cv-chat-transaction-entry">'+p+'</span></div><div class="clearfix"></div></div><div class="cv-va-bubble">'+t.get("botanswer")+"</div>"),n.isArray(l)&&("conversational"===a.vaChatView?window.CVMobile===!1?a.shrunkenUI===!0?(o.find(".cv-va-bubble").addClass("va-time-stamp-shim"),o.find(".panel-heading").addClass("va-time-stamp-shim")):(o.find(".va-time-stamp").addClass("va-time-stamp-shim"),o.find(".user-cv-time-stamp").addClass("va-time-stamp-shim")):(o.find(".cv-va-bubble").addClass("va-time-stamp-shim"),o.find(".panel-heading").addClass("va-time-stamp-shim")):o.html('<div class="panel-heading cv-chat-transaction-heading"><div class="panel-title pull-left cv-chat-transaction-title"><span>'+d+' </span><span class="cv-chat-transaction-entry">'+t.get("question")+'</span></div><div class="clearfix"></div></div>')),i.use_removestyles&&(o=i.removeStyles(o)),i.renderConnectors(t,o),i.addBackLink(t,o),i.addTransaction(o),i.$el.scrollTo(o,500),"iMessage"===a.vaCaption.type&&setTimeout(function(){i.$el.scrollTo(o,500),window.CVSaveAttributes()},1500),i}window.CVSaveAttributes(),window.CVSaveAttributes()},h="";i.collection.length>1&&void 0!==i.collection.models[i.collection.length-2]&&(h=e.trim(i.collection.models[i.collection.length-2].get("question"))),1==i.collection.length&&d(),i.collection.length>1&&n.isArray(l)&&(""!==e.trim(t.get("question"))||""!==h)?(window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(a.businessName+"-cvVaSemanticsFAQs",JSON.stringify(l))}),localStorage.setItem(a.businessName+"-cvVaSemanticsFAQs",JSON.stringify(l)),"normal"===a.vaCaption.type?window.setTimeout(function(){d()},2500):d()):i.collection.length>1&&!n.isArray(l)&&(""!==e.trim(t.get("question"))||""!==h)&&d(),void 0!==t.get("userentryallowed")&&"false"==t.get("userentryallowed")?a.submitBtn.embedded.enabled===!0?(this.$el.parent().parent().find("#cv-chat-user-entry").addClass("disabled").prop("disabled",!0),this.$el.parent().parent().find(".cv-chat-footer #cv-chat-submit").addClass("disabled").prop("disabled",!0)):(this.$el.parent().parent().find("#cv-chat-user-entry").hide(),this.$el.parent().parent().find(".cv-chat-footer #cv-chat-submit").removeClass("disabled").removeProp("disabled")):void 0!==t.get("userentryallowed")&&"true"==t.get("userentryallowed")&&(a.submitBtn.embedded.enabled===!0?(this.$el.parent().parent().find("#cv-chat-user-entry").removeClass("disabled").removeProp("disabled"),this.$el.parent().parent().find(".cv-chat-footer #cv-chat-submit").removeClass("disabled").removeProp("disabled")):(this.$el.parent().parent().find("#cv-chat-answer-history").is(":visible")&&this.$el.parent().parent().find("#cv-chat-user-entry").show(),this.$el.parent().parent().find(".cv-chat-footer #cv-chat-submit").addClass("disabled").prop("disabled",!0))),"true"===t.get("forcesessionclose")?"true"!==t.get(a.livechatOfferETV).toLowerCase()?(void 0!==i.launcher&&i.launcher.remove(),clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(a.businessName+"-cvVaBootstrapState"),localStorage.removeItem(a.businessName+"-cvVaModel"),localStorage.removeItem(a.businessName+"-cvVaStyles"),localStorage.removeItem(a.businessName+"-cvVaInitCall"),window.forcesessionclose=!0,window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.sessionFlushInterval=setInterval(function(){clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(a.businessName+"-cvVaBootstrapState"),localStorage.removeItem(a.businessName+"-cvVaModel"),localStorage.removeItem(a.businessName+"-cvVaStyles"),localStorage.removeItem(a.businessName+"-cvVaInitCall"),window.forcesessionclose=!0,window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.localInitCall=void 0},0),setTimeout(function(){window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(a.businessName+"-cvVaBootstrapState",a.businessName+"-cvVaModel",a.businessName+"-cvVaStyles",a.businessName+"-cvVaInitCall")}).then(function(e){window.loadFromStorage=!1,a.submitBtn.embedded.enabled===!0?(i.$el.parent().parent().find("#cv-chat-user-entry").addClass("disabled").prop("disabled",!0),i.$el.parent().parent().find(".cv-chat-footer #cv-chat-submit").addClass("disabled").prop("disabled",!0)):(i.$el.parent().parent().find("#cv-chat-user-entry").hide(),i.$el.parent().parent().find(".cv-chat-footer #cv-chat-submit").removeClass("disabled").removeProp("disabled")),"mainFrame"==t.get("linktarget")&&(window.location.href=t.get("linkurl")),t.closeSession(),clearInterval(window.sessionFlushInterval)})},150)):(clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),t.closeSession()):"true"===t.get("forceescalate")?"true"!==t.get(a.livechatOfferETV).toLowerCase()&&(clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),window.cvCrossStorage.onConnect().then(function(){window.cvCrossStorage.set("cvSessionEndedExternal_VA","true")}),localStorage.setItem("cvSessionEndedExternal_VA","true")):"mainFrame"==t.get("linktarget")&&(window.location.href=t.get("linkurl")),i.autoAskQuestion(t)},renderConnectors:function(t,i){var o="false";void 0!==t.get(a.livechatOfferETV)&&(o=t.get(a.livechatOfferETV).toLowerCase());var s=t.get("connectors"),r=t.get("icsappended")||"false";n.isArray(s)&&s.length&&"false"==r?"false"==o&&void 0!==t.get("userentryallowed")&&"false"==t.get("userentryallowed")&&(this.$el.parent().parent().find("#cv-chat-user-entry").hide(),this.$el.parent().parent().find(".cv-chat-footer #cv-chat-submit").removeClass("disabled").removeProp("disabled")):"false"==o&&(this.$el.parent().parent().find(".cv-chat-footer #cv-chat-submit").addClass("disabled").prop("disabled","disabled"),this.$el.parent().parent().find("#cv-chat-answer-history").is(":visible")&&this.$el.parent().parent().find("#cv-chat-user-entry").show());var l,c=this,u=e("<ul>").addClass("cv-list-group"),d=t.get("faqitems").suggestedfaqlist.semanticfaqs.semanticfaq,h=t.get("maxsemanticfaqs")||3,p=t.get("relatedlistprompttext");if(n.isArray(d)&&d.length?(u.append(p),d=d.slice(0,h),n.each(d,function(n){e.trim(n.QuestionText).length&&(l=e("<li>").addClass("cv-list-group-item cv-chat-connector cv-sematic-connector").append(c.renderSemanticFAQ(n)).click(function(e){e.preventDefault(),c.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!0),
t.askQuestion(n.QuestionText)}),l.append('<span class="pull-right"><i class="fa fa-arrow-right"></i></span>'),l.find(".pull-right").css({color:a.connectorsFontColor}),a.semanticTextAlignRight===!0&&l.css("text-align","right"),u.append(l))})):void 0!==d?(u.append(p),u.addClass("connector-follow-on"),e.trim(d.QuestionText).length&&(l=e("<li>").addClass("cv-list-group-item cv-chat-connector cv-sematic-connector").append(c.renderSemanticFAQ(d)).click(function(e){e.preventDefault(),c.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!0),t.askQuestion(d.QuestionText)}),l.append('<span class="pull-right"><i class="fa fa-arrow-right"></i></span>'),l.find(".pull-right").css({color:a.connectorsFontColor}),a.semanticTextAlignRight===!0&&l.css("text-align","right"),u.append(l))):u.removeClass("cv-list-group"),"default"===a.icsStyle){var v=[a.firstIcsBtnBkgColor,a.secondIcsBtnBkgColor,a.thirdIcsBtnBkgColor],f=[a.firstIcsBtnFontColor,a.secondIcsBtnFontColor,a.thirdIcsBtnFontColor],m=0,g=0;n.isArray(s)&&s.length&&"true"==r?(u.addClass("ics-cvbtn-group"),n.each(s,function(n){e.trim(n.DefaultClickText).length&&($button=e("<li>").addClass("cvbtn cv-chat-connector-ics").append(c.renderConnector(n)).click(function(e){e.preventDefault(),e.stopPropagation(),(window.processingRequest===!1||void 0===window.processingRequest)&&(window.processingRequest=!0,t.dtreeConnectorRequest(n.ConnectorId,t.get("answerID"),n.DefaultClickText))}),$button.css({"background-color":v[m],color:f[g],"font-weight":"bold"}),m=(m+1)%v.length,$button.children(":first").css("color",f[g]),g=(g+1)%f.length,$button.addClass("cv-ics-option"),u.append($button))})):n.isArray(s)&&s.length&&(u.addClass("cv-list-group connector-follow-on"),n.each(s,function(n){e.trim(n.DefaultClickText).length&&(l=e("<li>").addClass("cv-list-group-item cv-chat-connector").append(c.renderConnector(n)).click(function(e){e.preventDefault(),e.stopPropagation(),(window.processingRequest===!1||void 0===window.processingRequest)&&(window.processingRequest=!0,c.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!0),t.dtreeConnectorRequest(n.ConnectorId,t.get("answerID"),n.DefaultClickText))}),l.append('<span class="pull-right"><i class="fa fa-arrow-right"></i></span>'),l.find(".pull-right").css({color:a.connectorsFontColor}),a.semanticTextAlignRight===!0&&l.css("text-align","right"),u.append(l))}))}else"thumbs"===a.icsStyle&&(nameICSclass=["fa fa-thumbs-up","fa fa-thumbs-down","fa fa-phone"],classICS=0,n.isArray(s)&&s.length&&"true"==r?(u.addClass("cvbtn-group ics-thumb-cvbtn-group"),n.each(s,function(n){e.trim(n.DefaultClickText).length&&($i=e("<i>").addClass("cvbtn cvbtn-default thumbs-ics").append(c.renderConnector(n)).click(function(e){e.preventDefault(),e.stopPropagation(),(window.processingRequest===!1||void 0===window.processingRequest)&&(window.processingRequest=!0,t.dtreeConnectorRequest(n.ConnectorId,t.get("answerID"),n.DefaultClickText))}),$i.addClass(nameICSclass[classICS]),classICS=(classICS+1)%nameICSclass.length,u.append($i).find("a").text(""))})):n.isArray(s)&&s.length&&window.cvVaCollectionLength>1&&(u.addClass("cv-list-group connector-follow-on"),n.each(s,function(n){e.trim(n.DefaultClickText).length&&(l=e("<li>").addClass("cv-list-group-item cv-chat-connector").append(c.renderConnector(n)).click(function(e){e.preventDefault(),e.stopPropagation(),(window.processingRequest===!1||void 0===window.processingRequest)&&(window.processingRequest=!0,t.dtreeConnectorRequest(n.ConnectorId,t.get("answerID"),n.DefaultClickText))}),l.append('<span class="pull-right"><i class="fa fa-arrow-right"></i></span>'),l.find(".pull-right").css({color:a.connectorsFontColor}),a.semanticTextAlignRight===!0&&l.css("text-align","right"),u.append(l))})));if(void 0!==t.get("disambiguationoptions")){var b=t.get("disambiguationoptions").option;n.isArray(b)&&b.length&&(u.addClass("cv-list-group"),n.each(b,function(n){e.trim(n.clicktext).length&&(l=e("<li>").addClass("cv-list-group-item cv-chat-connector cv-disambiguation-connector").append(c.renderDisambiguationOptions(n)).click(function(e){e.preventDefault(),e.stopPropagation(),(window.processingRequest===!1||void 0===window.processingRequest)&&(window.processingRequest=!0,c.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!0),t.disambiguationRequest(n.clicktext,n.answerid))}),l.append('<span class="pull-right"><i class="fa fa-arrow-right"></i></span>'),l.find(".pull-right").css({color:a.connectorsFontColor}),a.semanticTextAlignRight===!0&&l.css("text-align","right"),u.append(l))}))}var y=(t.get("autosubmitmode")||a.enableProactiveEndSession||!1,new Date),w=y.getHours()+":"+(y.getMinutes()<10?"0":"")+y.getMinutes();u.children("li").length>0&&(i.find(".cv-va-bubble").length>0?"normal"===a.vaCaption.type?i.find(".cv-va-bubble").append(u):"iMessage"===a.vaCaption.type&&(c.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!0),setTimeout(function(){c.$el.parent().parent().find("#cv-chat-user-entry").prop("disabled",!1),window.CVMobile===!1&&c.$el.parent().parent().find("#cv-chat-user-entry").focus(),c.$el.parent().find(".cv-va-bubble").last().html(t.get("botanswer")).append(u).after('<span class="va-time-stamp">'+a.virtualAgentName+"&nbsp"+w+"</span>")},1500)):("conversational"===a.vaChatView&&window.cvVaCollectionLength>1?a.semanticAppendBotAnswer===!0?"normal"===a.vaCaption.type?i.append('<div class="cv-col-xs-12"><div class="cv-va-bubble">'+t.get("botanswer")+'</div><span class="va-time-stamp">'+a.virtualAgentName+"&nbsp"+w+"</span></div>"):"iMessage"===a.vaCaption.type:i.append('<div class="cv-col-xs-12"><div class="cv-va-bubble"></div></div>'):n.isArray(s)&&s.length&&window.cvVaCollectionLength<2?(i.append('<div class="cv-col-xs-12"><div class="cv-va-bubble">'+t.get("botanswer")+"</div></div>"),i.find(".cv-va-bubble").append(u)):i.append('<div class="cv-col-xs-12"><div class="cv-va-bubble"></div></div>'),"normal"===a.vaCaption.type?i.find(".cv-va-bubble").append(u):"iMessage"===a.vaCaption.type&&(1==window.cvVaCollectionLength?c.$el.parent().find(".cv-va-bubble").last().append(u):setTimeout(function(){c.$el.parent().find(".cv-va-bubble").last().html(t.get("botanswer")).append(u).after('<span class="va-time-stamp">'+a.virtualAgentName+"&nbsp"+w+"</span>")},1500))))},autoAskQuestion:function(e){var t=this;if("altice"===a.businessName&&1===t.collection.length)if(localStorage.getItem(a.businessName+"-pcsData_genesys")){var n=JSON.parse(localStorage.getItem(a.businessName+"-pcsData_genesys"));e.askQuestion(n.subject)}else console.log("empty PCS data")}});return l}),define("views/virtual_assistant/components/autocomplete",["jquery","jquery_ui","underscore_loader","backbone","xml2json","settings"],function(e,t,n,i,o,a){n=window.CVUnderscore;var s=i.View.extend({el:"#cv-chat-user-entry",request_method:"POST",threshold:3,maxRows:12,jsonp:!1,events:{keyup:"render"},initialize:function(t){if(i.View.prototype.initialize.call(this,t),this.jsonp=t.jsonp||this.jsonp,this.endpoint=t.endpoint||this.endpoint,this.maxRows=t.maxRows||this.maxRows,this.threshold=t.threshold||this.threshold,null===this.endpoint)throw"You must define an endpoint for your autocomplete results";var n=this;this.$el.autocomplete({messages:{noResults:a.ariaLabel.acNoResultsMsg,results:function(e){return e+(e>1?a.ariaLabel.acResultsPlural:a.ariaLabel.acResultSingular)+a.ariaLabel.acAvailableResultsNav}},minLength:t.threshold||this.threshold,position:{my:"center bottom",at:"center top-5",collision:"none"},appendTo:n.$el.parent(),select:function(e,t){e.preventDefault(),"Enter"===e.key&&(n.$el.val(""),n.model.askQuestion(t.item.value),n.$el.autocomplete("close"),n.$el.prop("disabled",!0),n.$el.submit())},source:function(e,t){n.getResults(e.term,t)},open:function(t,i){for(var o=0;o<e(".cv-va-bootstrap .cv-ui-menu-item").length;o++)e(e(".cv-va-bootstrap .cv-ui-menu-item")[o]).on("click",function(){n.model.askQuestion(e(this).find("div").text()),n.$el.val(""),n.$el.autocomplete("close"),n.$el.prop("disabled",!0)}),e(e(".cv-va-bootstrap .cv-ui-menu-item")[o]).keypress(function(t){var i=t.which;return 13==i?(n.model.askQuestion(e(this).find("div").text()),n.$el.val(""),n.$el.autocomplete("close"),n.$el.prop("disabled",!0),!1):void 0})}})},render:function(){window.placeHolderRotationReset()},parseResponse:function(t,n){try{var i=e.parseJSON(t);n(i.suggestions)}catch(o){var a=[],s=e(t).find("AutoComplete:lt(3)");s.each(function(){var t=e(this),n={label:t.find("QuestionText").text(),value:t.find("QuestionText").text()};a.push(n)}),n(a)}},getParams:function(e,t){var n=this,i={};return i=a.useLegacyAC===!0?{url:this.endpoint,type:this.request_method,cookies:[a.libEndpointDomain],crossDomain:!0,xhrFields:{withCredentials:!0},data:{jsin:1,AUTOCOMPLETE_REQUEST_TYPE:2,AUTO_COMPLETE:1,FAQ:0,entry:e,ident:this.model.get("ident"),businessArea:this.model.get("currentBA"),channel:this.model.get("currentChannel")},success:function(e,i,o){n.parseResponse(e,t);var a=o.getResponseHeader("x-cv-tserverid");a&&(window.cvCrossStorage.onConnect().then(function(){window.cvCrossStorage.set("cv-tserverid",a)}),localStorage.setItem("cv-tserverid",a))},error:function(){t([])}}:{url:this.endpoint,type:this.request_method,cookies:[a.libEndpointDomain],crossDomain:!0,xhrFields:{withCredentials:!0},data:{jsin:1,AUTO_COMPLETE:1,AUTOCOMPLETE_REQUEST_TYPE:2,FAQ:0,entry:e,ident:this.model.get("ident"),businessArea:this.model.get("currentBA"),channel:this.model.get("currentChannel")},success:function(e,i,o){n.parseResponse(e,t);var a=o.getResponseHeader("x-cv-tserverid");a&&(window.cvCrossStorage.onConnect().then(function(){window.cvCrossStorage.set("cv-tserverid",a)}),localStorage.setItem("cv-tserverid",a))},error:function(){t([])}},localStorage.getItem("cv-tserverid")&&(i.headers={"cv-tserverid":localStorage.getItem("cv-tserverid")}),i},getAjax:function(t,n){e.ajax(this.getParams(t,n))},getJsonp:function(t,n){var i=e.extend(this.getParams(t,n),{dataType:"jsonp",success:function(e,t,i){n(e.suggestions)}});e.ajax(i)},getResults:function(e,t){this.jsonp?this.getJsonp(e,t):this.getAjax(e,t)}});return s}),define("views/virtual_assistant/components/eocs_view",["jquery","underscore_loader","backbone","settings"],function(e,t,n,i){t=window.CVUnderscore;var o=n.View.extend({tagName:"div",attributes:{id:"eocs"},eocs_submit_text:"cv log eocs data",header:function(){var t=e("<div>").attr({id:"feedbackheader"}),n=e("<div>").attr({id:"headertext"}).text(i.eocs.header_text);return t.append(n),t},body:function(){var t=e("<div>").attr({id:"feedback"}).addClass("feedback");return t.append(this.eocs_form()),t},eocs_form:function(){var t=this;return e("<form>").attr({action:".",method:"POST"}).append([this.eocs_question_list(),this.feedback(),this.submit_button()]).submit(function(n){n.preventDefault();var i=e(this),o=i.find("input:radio[name=useful]:checked").val(),a=i.find("input:radio[name=recommend]:checked").val(),s=i.find("#comments").val();t.model,t.collection;o&&a?t.submit_data({useful:o,recommend:a,comments:s}):alert("You must select at least 2 radio fields before submitting the survey")})},eocs_question_list:function(){var t=e("<div>").addClass("cv-form-group");return t.append(this.eocs_question),t},eocs_question:function(){for(var t=i.eocs.questions.text,n=i.eocs.questions.input_name,o=0,a=e("<div>"),s=0;s<t.length;s++){var r=e("<div>"),l=e("<div>").addClass("rating");r.text(i.eocs.questions.text[s]).append(l);for(var c=5;c>o;c--){var u=e("<label>");e("<input />").attr({type:"radio",name:n[s],value:c}).appendTo(u);l.append(u)}a.append(r)}return e(a)},eocs_form_table:function(){var t=e("<table>").attr({border:0,cellspacing:5,cellpadding:5,width:"98%"}).addClass("tblstyle"),n=e("<tbody>");return n.append(this.header_rows()),n.append(this.field_rows()),t.append(n),t},field_rows:function(){var t='<tr><td width="200">This session resolved your issue.</td><td align="center"><input type="radio" name="useful" id="useful1" value="1"></td><td align="center"><input type="radio" name="useful" id="useful2" value="2"></td><td align="center"><input type="radio" name="useful" id="useful3" value="3"></td><td align="center"><input type="radio" name="useful" id="useful4" value="4"></td><td align="center"><input type="radio" name="useful" id="useful5" value="5"></td></tr><tr><td colspan="6">&nbsp;</td></tr><tr><td width="200">I would recommend the <br> Virtual Assistant <br>to a friend or colleague.</td><td align="center"><input type="radio" name="recommend" id="recommend1" value="1"></td><td align="center"><input type="radio" name="recommend" id="recommend2" value="2"></td><td align="center"><input type="radio" name="recommend" id="recommend3" value="3"></td><td align="center"><input type="radio" name="recommend" id="recommend4" value="4"></td><td align="center"><input type="radio" name="recommend" id="recommend5" value="5"></td></tr><tr><td colspan="6">&nbsp;</td></tr>';return e(t)},header_rows:function(){var t='<tr class="header"><td width="200">&nbsp;</td><td>Strongly <br>&nbsp;&nbsp;&nbsp;Agree&nbsp;</td><td>Somewhat <br>&nbsp;&nbsp;&nbsp;Agree&nbsp;</td><td>&nbsp;&nbsp;&nbsp;No <br>&nbsp;Opinion&nbsp;</td><td>Somewhat <br>&nbsp;&nbsp;&nbsp;Disagree&nbsp;</td><td>&nbsp;Strongly <br>&nbsp;&nbsp;Disagree&nbsp;</td></tr><tr><td colspan="6">&nbsp;</td></tr>';return e(t)},hr:function(){var t=e("<div>").attr({id:"hrline2"}),n=e("<hr/>").attr({id:"hrline"});return t.append(n),t},feedback:function(){var t=e("<div>").addClass("cv-form-group").attr({id:"tellus"}),n=e("<label>").attr({"for":"comments","class":"textclass"}).text(i.eocs.textarea_label),o=e("<textarea>").addClass("cv-form-control").attr({name:"comments",id:"comments"}),a=e("<div>").attr({id:"ofbContainer"}).html('<span id="ofbCounter">0</span>/500');return o.keyup(function(t){var n=e.trim(e(this).val());a.find("#ofbCounter").text(n.length)}),t.append([n,o,a]),t},submit_button:function(){var t=e("<div>").attr({id:"submit-button"}),n=e("<input />").addClass("cvbtn").attr({id:"feedbackSend",type:"submit",value:i.eocs.submit_btn_text});return t.append(n),t},render:function(){return this.$el.append(this.header()),this.$el.append(this.body()),this},submit_data:function(e){var n=this,i=t.extend(e,{entry:n.eocs_submit_text,FAQ:"0",ButtonRequest:""});n.model.once("change",function(e){alert(e.get("botanswer")),window.close()}),n.model.makeRequest({data:i})}});return o}),define("views/virtual_assistant/components/eocs",["jquery","underscore_loader","backbone","views/virtual_assistant/components/eocs_view","settings"],function(e,t,n,i,o){t=window.CVUnderscore;var a=n.View.extend({el:"#cv-chat-body",min_transactions:2,eocs_completed:!1,eocs_data:{},initialize:function(t){window.eocsDataGlobal=this.eocs_data;var i=this;n.View.prototype.initialize.call(this,t),i.min_transactions="number"==typeof t.min_transactions?t.min_transactions:2,this.eocs_data.questions=[],void 0!==o.eocs&&void 0!==o.eocs.questions&&o.eocs.questions.forEach(function(e){e.id="cv-eocs-question-"+Math.round((new Date).getTime()+100*Math.random()),e.value=null,i.eocs_data.questions.push(e)}),window.render_eocs=function(){"true"!==localStorage.getItem(o.businessName+"-cvVaEOCSRendered")&&(e("#cv-live-chat-answer-history").hide(),window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(o.businessName+"-cvVaEOCSRendered","true")}),localStorage.setItem(o.businessName+"-cvVaEOCSRendered","true"),window.CVSaveAttributes(),i.render())}},render:function(t){var n=this,i=e("<div>").attr("id","cv-eocs-overlay"),o=n.createHeader();i.append(o);var a=n.createForm();i.append(a),this.$el.append(i),function(e){e.fn.starRating=function(){return this.each(function(){var t=e(this),n=(t.find("input"),t.find("input:checked").length>0);t.one("click",function(){e(this).removeClass("starrating--unselected")}),n===!1&&t.addClass("starrating--unselected")})},e(".starrating").starRating()}(jQuery),e(".cv-form-group.survey-question.starrating input").click(function(){n.handleValue(e(this).attr("id"))})},createForm:function(){var t=this;return e("<form>").attr({action:".",method:"POST"}).append([this.createQuestionList(o.eocs.questions),this.feedback(),this.submit_button()]).submit(function(n){n.preventDefault(),t.eocs_data.ident=t.model.get("ident"),t.eocs_data.comments=t.$el.find("#comments").val(),t.eocs_data.queueId=window.cvLCQueueId,e.ajax({url:o.libEndpoint+o.businessName+"eocs",type:"POST",data:t.eocs_data,success:function(e){t.$el.empty().css("line-height",t.$el.height()+"px"),t.$el.append('<div style="vertical-align: middle; text-align: center;">'+o.eocs.postEOCSMessage+"</div>")}})})},createHeader:function(){var t=e("<div>").attr({id:"headertext"}).text(o.eocs.header_text);return t},createQuestionList:function(t){var n=this,i=e("<div>").addClass("cv-form-group");return t.forEach(function(e){var t=n.buildQuestion(e.id,e.text,e.input_name,e.type,e.rating_labels);i.append(t)}),i},buildQuestion:function(t,n,i,a,s){var r=e("<div>").addClass("cv-form-group survey-question starrating").attr("id",t),l=6,c=e("<fieldset>");c.append("<legend>"+n+"</legend>"),r.append(c);for(var u=1;l>u;u++){var d=e("<input />").attr({type:a,name:i,value:u,id:t+"_nodefault_"+u}),h=e("<label>").attr({"for":t+"_nodefault_"+u,"aria-label":u+o.ariaLabel.eocsRatingStarNum+"5"});c.append(d),c.append(h)}r.append(c);var p=e(s);return p.attr("id","cv-eocs-rating-labels"),r.append(p),r},handleValue:function(e){for(var t=this,n=t.$el.find("#"+e),i=0;i<t.eocs_data.questions.length;i++)t.eocs_data.questions[i].id===e.substr(0,e.indexOf("_"))&&(t.eocs_data.questions[i].value=n.val())},feedback:function(){var t=e("<div>").addClass("cv-form-group").attr({id:"tellus"}),n=e("<label>").attr({"for":"comments","class":"textclass"}).text(o.eocs.textarea_label),i=e("<textarea>").addClass("cv-form-control").attr({name:"comments",id:"comments",rows:"3",maxlength:"1000"}),a=e("<div>").attr({id:"ofbContainer"}).html('<span id="ofbCounter">0</span>/1000');return i.keyup(function(t){var n=e.trim(e(this).val());a.find("#ofbCounter").text(n.length)}),t.append([n,i,a]),t},submit_button:function(){var t=e("<div>").attr({id:"submit-button"}),n=e("<button>").addClass("cvbtn").attr({id:"feedbackSend",type:"submit"}).html('<i id="cv-submit-icon" class="'+o.submitBtn.fontAwesome+'" aria-hidden="true"></i>'+o.eocs.submit_btn_text).css({"border-radius":o.inputBorderRadius,"background-color":o.submitBtn.backgroundColor,color:"#fff"});return t.append(n),t}});return a}),define("views/virtual_assistant/components/cv_livechat",["jquery","jquery_ui","backbone","settings","scrollto","views/virtual_assistant/components/eocs"],function(e,t,n,i,o,a){_=window.CVUnderscore;var s=n.View.extend({el:".cv-va-bootstrap #cv-chat-content",submitID:"cv-live-chat-submit",entryID:"cv-live-chat-user-entry",bindEvent:"change:transactioncount",newLines:0,agentName:"Agent",activeChatSession:!1,launcherAppended:!1,proactiveLauncherAppended:!1,events:{"click #cv-live-chat-submit":"addLine"},initialize:function(t){n.Model.prototype.initialize.call(this,t),this.model.on(this.bindEvent,this.render,this);var o=i.creativeVirtual,a=o.split("/");window.CVVA.cvLcOrigin=a[0]+"//"+a[2];var s=function(e){e.origin===window.CVVA.cvLcOrigin&&e.data.hasOwnProperty("firstname")&&(window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(i.businessName+"-cvPCSdata",JSON.stringify(e.data))}),localStorage.setItem(i.businessName+"-cvPCSdata",JSON.stringify(e.data)))};window.addEventListener("message",s,!1),this.$el.find("#cv-close-cvbtn").on("click",function(){if("creative virtual"===i.livechatVendor&&"true"===localStorage.getItem(i.businessName+"-cvVaActiveSession_cv")&&"true"!==localStorage.getItem(i.businessName+"-cvVaEOCSRendered")){var t=document.getElementById("cv-lc-iframe").contentWindow,n=e(this).data("clicked",!0),o=n.data();t.postMessage(o,window.CVVA.cvLcOrigin)}})},configureLiveChat:function(){},render:function(t){var n,o=this;if(void 0!==t.get(i.livechatOfferETV)&&(n=t.get(i.livechatOfferETV).toLowerCase(),"true"===n&&this.activeChatSession===!1)){window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(i.businessName+"-cvVaActiveSession_cv","true")}),localStorage.setItem(i.businessName+"-cvVaActiveSession_cv","true"),window.CVMobile!==!1||void 0===window.cvVaCollectionLength||void 0!==window.resizableAttached||window.cvVaMinimized!==!1&&void 0!==window.cvVaMinimized||(window.resizableAttached=!0,window.CVVA.resizable()),i.vaLcTabs===!1&&(o.$el.find("#cv-chat-body").empty(),o.$el.find(".cv-chat-footer, .cv-chat-minimized-logo").remove(),o.$el.find("#cv-va-title").html("Welcome to "+i.businessName+" Live Chat."),o.$el.find(".cv-chat-logo").fadeOut(0,function(){var t=e("<img>").attr({id:"cv-lc-chat-logo",src:i.libEndpoint+"images/titles/"+i.lcMinimizedLogo,alt:i.businessName+" Live Chat Logo"});o.$el.find("#cv-chat-header").prepend(t),o.$el.find(".cv-chat-logo").remove()})),o.livechatrendered=!0,o.$el.find("#cv-chat-body").css("border-radius",i.modalFooter.borderRadius).append('<div id="cv-live-chat-answer-history" class="cv-chat-history"></div>'),e("#cv-live-chat-answer-history").css({overflow:"hidden",display:"block",padding:"0px"}),o.$el.find("#cv-chat-form").hide();var a=o;i.vaLcTabs===!0&&(a.$el.find(".cv-chat-footer").hide(),a.$el.find("#cv-chat-header").after('<ul class="cv-row cv-va-tabs-container nav nav-tabs"></ul>'),a.$el.find(".cv-va-tabs-container").length>1&&a.$el.find(".cv-va-tabs-container").get(-1).remove(),a.$el.find(".cv-va-tabs-container").append('<li id="va-tab" class="col-xs-6"><span>Virtual Agent</span></li>'),a.$el.find(".cv-va-tabs-container").append('<li id="lc-tab" class="active col-xs-6"><span>Live Chat<i class="fa fa-times lc-close-cvbtn"></i></span></li>')),e("#cv-live-chat-answer-history").html('<iframe id="cv-lc-iframe" title="'+i.ariaLabel.cvLCiframeTitle+'" style="width: 100%;height: 100%;border: none;" src="'+i.creativeVirtual+'" sandbox="allow-forms allow-scripts allow-same-origin allow-pointer-lock allow-popups"></iframe>'),e.ajax({type:"POST",url:i.logEndpoint+"log",data:{level:"info",metadata:{renderingLivechatIframe:!0}}}),setTimeout(function(){var n=i.modalHeader.height;window.CVMobile===!0&&(n=i.modalHeader.mobile.height),o.$el.find("#cv-chat-header").animate({height:n},500,function(){function n(){a.$el.find(".lc-close-cvbtn").click(function(t){t.preventDefault(),a.$el.find("#va-tab").animate({width:"100%"},500),a.$el.find("#lc-tab").remove(),a.$el.find("#va-tab").trigger("click");var n=e(this).data("clicked",!0),i=n.data();lc_iframe.postMessage(i,window.CVVA.cvLcOrigin)})}i.vaLcTabs===!0?(n(),a.$el.find("#va-tab").click(function(e){e.preventDefault(),a.$el.find("#cv-chat-form").show(),a.$el.find("#va-tab").addClass("active"),a.$el.find("#lc-tab").removeClass("active"),a.$el.find("#cv-live-chat-answer-history").hide(),a.$el.find("#cv-chat-answer-history").show(),a.$el.find(".cv-chat-footer").show()}),a.$el.find("#lc-tab").click(function(e){e.preventDefault(),a.$el.find("#cv-chat-form").hide(),a.$el.find("#lc-tab").addClass("active"),a.$el.find("#va-tab").removeClass("active"),a.$el.find("#cv-live-chat-answer-history").show(),a.$el.find("#cv-chat-answer-history").hide(),a.$el.find(".cv-chat-footer").hide(),n()})):i.vaLcTabs===!1&&i.shrunkenUI===!1&&(a.$el.find(".cv-chat-title").removeClass("cv-chat-title").addClass("cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Virtual Assistant'),a.$el.find(".cv-live-chat-active-title").css({color:i.modalHeader.color}),a.$el.find("#cv-chat-header .close").css({color:i.modalHeader.color,opacity:1}),a.$el.find("#cv-chat-header").css({"background-color":i.modalHeader.backgroundColor}),a.$el.find(".cv-live-chat-active-title").fadeIn(),a.$el.find(".cv-live-chat-active-title").click(function(){if(a.newLines=0,a.livechatrendered){o.$el.find("#cv-chat-form").show(),a.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Live Chat');var e=t.get("connectors");_.isArray(e)&&e.length?(a.$el.find("#cv-chat-user-entry").hide(),a.$el.find("#cv-chat-submit").removeClass("disabled").removeAttr("disabled")):(a.$el.find("#cv-chat-submit").addClass("disabled").prop("disabled","true"),a.$el.find("#cv-chat-user-entry").show()),a.$el.find("#cv-chat-submit").show(),a.$el.find("#cv-chat-user-entry").val().trim().length>0||!a.$el.find("#cv-chat-user-entry").is(":visible")?a.$el.find("#cv-chat-submit").removeClass("disabled").addClass("enabled"):a.$el.find("#cv-chat-submit").removeClass("enabled").addClass("disabled"),a.$el.find("#"+o.entryID).hide(),a.$el.find("#"+o.submitID).hide()}else o.$el.find("#cv-chat-form").hide(),a.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Virtual Assistant'),a.$el.find("#cv-chat-user-entry").hide(),a.$el.find("#cv-chat-submit").hide(),a.$el.find("#cv-chat-submit").removeClass("enabled").addClass("disabled").prop("disabled","true"),a.activeChatSession?a.$el.find("#"+o.entryID).show():a.$el.find("#"+o.entryID).hide(),a.$el.find("#"+o.submitID).show();a.$el.find(".cv-chat-va-typing").toggle(),a.$el.find(".cv-live-chat-agent-typing").toggle(),a.$el.find("#cv-live-chat-answer-history").animate({opacity:"toggle"},"fast",function(){a.$el.find("#cv-chat-answer-history").animate({opacity:"toggle"},"fast")}),a.livechatrendered=!a.livechatrendered})),i.lcAvailabilityLauncher===!1&&o.configureLiveChat()}),i.vaLcTabs===!0?(o.$el.find(".cv-chat-logo").show(),o.$el.find(".cv-chat-extra-logo").show()):o.$el.find(".cv-chat-extra-logo").hide()},500)}}});return s}),window.lpTag=window.lpTag||{},lpTag.cookieMethods=lpTag.cookieMethods||function(){"use strict";function e(){var e="lpTestCookie"+(new Date).getTime(),t="testValue";return a({name:e,value:t}),r=t===n(e),s(e),l=!1,r}function t(){return r}function n(e){var t,n,i="; ",o="";if(l||r){if("string"!=typeof e)return"";e=encodeURIComponent(e);try{n=i+document.cookie}catch(a){}t=n.split(i+e+"="),o=1==t.length?"":decodeURIComponent(t[1].split(";")[0])}return o}function i(e,t,n){return n="number"==typeof n?n:2592e3,"object"==typeof e&&(e.seconds=n),o(e,t,n)}function o(e,t,n,i,o,s){return a("object"==typeof e?e:{name:e,value:t,seconds:n,path:i,domain:o,secure:s})}function a(e){var t,n,i=!1;if(l||r){if("string"!=typeof e.name||""===e.name)return!1;null!==e.value&&void 0!==e.value||(e.seconds=-1),"number"==typeof e.seconds&&(n=(new Date).getTime(),t=new Date(n+1e3*e.seconds)),e.value=e.value?encodeURIComponent(e.value):"";try{document.cookie=[encodeURIComponent(e.name),"=",e.value,t?"; expires="+t.toUTCString():"",e.path?"; path="+e.path:"",e.domain?"; domain="+e.domain:"",e.secure?"; secure":""].join(""),i=!0}catch(o){}}return i}function s(e,t,n){return a({name:e,path:t,domain:n})}var r=!1,l=!0;return e(),{clearCookie:s,writeSessionCookie:o,writePersistentCookie:i,readCookie:n,isCookieEnabled:t}}(),window.lpTag=window.lpTag||{},lpTag.storageMethods=lpTag.storageMethods||function(){"use strict";function e(){return d&&h}function t(){return d}function n(){return h}function i(e,n){return t()?(sessionStorage.setItem(e,n),!0):void 0}function o(e){return t()?sessionStorage.getItem(e)||"":void 0}function a(e){return t()&&o(e)?(sessionStorage.removeItem(e),!0):!1}function s(e,t){return n()?(localStorage.setItem(e,t),!0):void 0}function r(e){return n()?localStorage.getItem(e)||"":void 0}function l(e){return n()&&r(e)?(localStorage.removeItem(e),!0):!1}function c(){try{d=u(sessionStorage),h=u(localStorage)}catch(e){}}function u(e){var t=!1,n="lpTestCase",i="abc";try{"undefined"!=typeof Storage&&(e.setItem(n,i),t=e.getItem(n)===i,e.removeItem(n))}catch(o){}return t}var d=!1,h=!1;return c(),{isStorageEnabled:e,isSessionStorageEnabled:t,isLocalStorageEnabled:n,setSessionData:i,getSessionData:o,removeSessionData:a,setPersistentData:s,getPersistentData:r,removePersistentData:l}}(),window.lpTag=window.lpTag||{},lpTag.SessionDataManager=lpTag.SessionDataManager||function(e){"use strict";function t(e){lpTag&&lpTag.log&&lpTag.log(e,"ERROR","SessionData")}function n(e,n,i){var o=!1;if("object"!=typeof n)try{var a=i?s.getPersistentSessionData(e):s.getSessionData(e),r=""!==a?a.split(l):[];r.push(n),a=r.join(l),o=i?s.setPersistentData(e,a,i):s.setSessionData(e,a)}catch(c){t((i?"appendToPersistentData ":"appendToSessionData ")+" failed, key: "+e)}return o}function i(e,n,i){var o=!1;if("object"!=typeof n)try{for(var a=i?s.getPersistentSessionData(e):s.getSessionData(e),r=""!==a?a.split(l):[],c=[],u=0;u<r.length;u++)r[u]!==n&&c.push(r[u]);a=c.join(l),o=""!==a?i?s.setPersistentData(e,a,i):s.setSessionData(e,a):i?s.removePersistentData(e):s.removeSessionData(e)}catch(d){t((i?"removePartialPersistentData ":"removePartialSessionData ")+" failed, key: "+e)}return o}var o,a,s,r,l="::",c={},u={},d="object"==typeof e?e:{};this!==window&&(o=lpTag.storageMethods,a=lpTag.cookieMethods,r=!0!==d.disableStorage&&o.isStorageEnabled(),s=this,this.readCookie=function(e){return a.readCookie(e)},this.setSessionData=function(e,n){n=this.stringifyValue(n);try{c[e]||(c[e]=e),r?o.setSessionData(e,n):a.writeSessionCookie(e,n)}catch(i){t("Error in setSessionData, data: "+e)}},this.getSessionData=function(e){try{return this.parseValue(r?o.getSessionData(e):a.readCookie(e))}catch(n){t("Error in getSessionData, data: "+e)}},this.stringifyValue=function(e){try{"object"==typeof e&&(e=JSON.stringify(e))}catch(t){}return e},this.parseValue=function(e){try{e=JSON.parse(e)}catch(t){}return e},this.getPersistentSessionData=function(e){try{return this.parseValue(r?o.getPersistentData(e):a.readCookie(e))}catch(n){t("Error in getPersistentSessionData, data: "+e)}},this.appendToSessionData=function(e,t){n(e,t,!1)},this.appendToPersistentData=function(e,t,i){n(e,t,!0,i)},this.removePartialPersistentData=function(e,t){i(e,t,!0)},this.removeSessionData=function(e){r?o.removeSessionData(e):a.clearCookie(e)},this.removePersistentData=function(e){r?o.removePersistentData(e):a.clearCookie(e)},this.removePartialSessionData=function(e,t){i(e,t,!1)},this.setPersistentData=function(e,n,i){n=this.stringifyValue(n);try{u[e]||(u[e]=e),r?o.setPersistentData(e,n):a.writePersistentCookie(e,n,i)}catch(s){t("Error in setPersistentData, data: "+e)}},this.clearPersistentData=function(e){e=e||u;for(var n in e)try{r?o.removePersistentData(e[n]):a.clearCookie(e[n])}catch(i){t("Error in clearPersistentData, key: "+e[n])}},this.clearSessionData=function(e){e=e||c;for(var n in e)try{r?o.removeSessionData(e[n]):a.clearCookie(e[n])}catch(i){t("Error in SessionData in clearSessionData, key:"+e[n])}})},window.lpTag=window.lpTag||{},lpTag.taglets=lpTag.taglets||{},lpTag.utils=lpTag.utils||{},lpTag.utils.SessionDataAsyncWrapper=lpTag.utils.SessionDataAsyncWrapper||function(e){"use strict";function t(e,t,n,i){var c;d?r.getValue({key:e,appName:s,site:u,success:o(e,t,i),error:o(e,n,i),context:i,domain:l}):(c=h.getSessionData(e),void 0!==c?a(t,c,i):a(n,c,i))}function n(e,t,n,i,c){d?r.setValue({key:e,appName:s,value:t,site:u,success:o(e,n,c),error:o(e,i,c),context:c,domain:l}):h.setSessionData(e,t)?a(n,!0,c):a(i,!1,c)}function i(e,t,n,i){d?r.setValue({key:e,appName:s,site:u,success:o(e,t,i),error:o(e,n,i),context:i,domain:l,expires:-1}):h.removeSessionData(e)?a(t,!0,i):a(n,!1,i)}function o(e,t,n){return function(e){a(t,e,n)}}function a(e,t,n){try{e&&"function"==typeof e&&e.call(n,t)}catch(i){}}if(this===window)return null;e=e||{};var s,r,l,c=e.useSecureStorage,u=e.lpNumber,d=!1;c&&(s=e.appName,r=lpTag.taglets&&lpTag.taglets.lpSecureStorage,l=e.secureStorageLocation,d=!!(c&&l&&r&&s)),lpTag.SessionDataManager&&(lpTag.utils.sessionDataManager=lpTag.utils.sessionDataManager||new lpTag.SessionDataManager(e));var h=lpTag.utils.sessionDataManager||null;return{setSessionData:n,getSessionData:t,removeSessionData:i,readCookie:lpTag.utils.sessionDataManager&&lpTag.utils.sessionDataManager.readCookie,usingSecureStorage:d}},window.lpTag=window.lpTag||{},lpTag.RelManager=lpTag.RelManager||function(e){
"use strict";function t(e,t){var n;for(var i in t.data)if(t.data.hasOwnProperty(i)&&(n=u.getURI(e,{type:i,id:t.data[i]})))break;return n}function n(e){return e.indexOf("v=1")<0&&(e+=e.indexOf("?")>-1?"&":"?",e+="v=1"),e.indexOf("&NC=true")<0&&(e+="&NC=true"),e}function i(e){return c&&e.toLowerCase().indexOf(".json")<0&&(e.indexOf("?")>0?e=e.replace("?",".json?"):e+=".json"),e}function o(e){var t="";for(var n in e)if(e.hasOwnProperty(n)&&void 0!==e[n]&&null!==e[n])if(e[n].constructor===Array)for(var i=0;i<e[n].length;i++)t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(e[n][i]);else t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(e[n]);return t}function a(e){return"PUT"===e||"DELETE"===e?"POST":e||"GET"}function s(e){var t={AUTHORIZATION:"LivePerson appKey="+p.appKey};return p.accessToken&&(t={AUTHORIZATION:"Bearer "+p.accessToken}),"PUT"!==e&&"DELETE"!==e||(t["X-HTTP-Method-Override"]=e),t}function r(e,t){return e?e=t.url:t&&t.rel||!p.domain||!p.lpNumber?t&&t.rel&&(e=u.getURI(t.rel,{type:t.type,id:t.id,needAuth:t.needAuth})):e="https://"+p.domain+"/api/account/"+p.lpNumber,e&&(e=i(e),e=n(e)),e}function l(e,t,n){lpTag&&lpTag.utils&&lpTag.utils.log&&lpTag.utils.log(e,t,n)}var c=!0,u=this,d=null,h="",p={domain:"",lpNumber:"",appKey:"",accessToken:""},v=["xhr","postmessage","rest2jsonp"];return this===window?(l("RelManager called without new","DEBUG","lpTag.RelManager"),new lpTag.RelManager(e)):(e&&e.constructor===Array&&(v=e),this.clearData=function(){for(var e in p)p.hasOwnProperty(e)&&(p[e]="");d=null,h=""},this.setData=function(e){if(d={},h="",e){for(var t in e)e.hasOwnProperty(t)&&(p[t]=e[t]);"boolean"==typeof e.useJSON&&(c=e.useJSON),e.transportOrder&&(v=e.transportOrder)}},this.addRels=function(e,t){var n,i,o,a;if(t){a=this.extractRels(e),n=d[t.type]=d[t.type]||{},t.id&&(n=n[t.id]=n[t.id]||{});for(var s in a)a.hasOwnProperty(s)&&(i=a[s].rel||a[s]["@rel"],o=a[s].href||a[s]["@href"],n[i]=o);if(t.data){n.data=n.data||{};for(var r in t.data)t.data.hasOwnProperty(r)&&(n.data[r]=t.data[r])}}},this.removeRels=function(e){var t=!1;return e&&void 0!==e.type&&d[e.type]&&(e.id?d[e.type][e.id]&&(d[e.type][e.id]=null,delete d[e.type][e.id],t=!0):(d[e.type]=null,delete d[e.type],t=!0)),t},this.hasRel=function(e,t){return!!this.getURI(e,t)},this.buildRequestObj=function(e){var t={url:"",method:"",headers:"",data:""};return t.url=r(e&&e.url,e),e&&e.queryParams&&t.url&&(t.url+=o(e.queryParams)),t.headers=s(e&&e.requestType),t.method=a(e&&e.requestType),t.transportOrder=e&&e.transportOrder||v.slice(0),e&&e.data&&(t.data=e.data),t.url?t:null},this.extractRels=function(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)&&0===t.length){if("link"===n){t=e[n].constructor===Array?e[n]:[e[n]];break}null!==e[n]&&void 0!==e[n]&&"object"==typeof e[n]&&e[n].constructor!==Array&&(t=this.extractRels(e[n]))}return t},void(this.getURI=function(e,n){var i,o=null;return n&&d&&(i=d[n.type],i&&n.id&&i[n.id]&&(i=i[n.id]),i&&(o=i[e]||null,!o&&i.data&&(o=t(e,i)))),o}))},!function(e){"use strict";function t(e,t,n){lpTag&&lpTag.log&&lpTag.log(e,t,n)}function n(e,t,n){return i.getPropertyFromObject(e,"body",{error:{message:t,time:new Date,originalRequest:n}})}e.lpTag=e.lpTag||{},lpTag.taglets=lpTag.taglets||{},lpTag.utils=lpTag.utils||{};var i=lpTag.utils;i.runErrorCallback=function(e,t){e&&e.error&&lpTag.utils.runCallback(e.error,e,t),t=null,e=null},i.runSuccessCallback=function(e,t){e&&e.success&&lpTag.utils.runCallback(e.success,e,t)},i.runCallback=function(e,n,i){if(e&&"function"==typeof e)try{e.call(n.context||n,i)}catch(o){t("Failed to run callback, callback: "+e+" data: "+i,"error","lpTag.utils.runCallback")}},i.validateAndExtendConfigs=function(e,t,n){for(var o=0;o<e.length&&(t=i.validateAndExtend(e[o],t),!n||!t.hasOwnProperty(e[o].prop));o++);return t},i.validateAndExtend=function(e,t){var n,o=!0;return t=t||{},e&&i.validateType("object",e)&&(n=i.getPropertyFromObject(e.obj,e.path,e.defaultValue),void 0!==n&&null!==n&&(e.type&&(o=i.validateType(e.type,n)),o&&(t[e.prop]=n))),t},i.validateType=function(e,t){var n=!1;return n="number"===e?!isNaN(t):"array"===e?t.constructor===Array:typeof t===e},i.getPropertyFromObject=function(e,t,n){var i,o=e;if("string"==typeof t){i=t.split(".");for(var a=0;a<i.length;a++){if(void 0===o||null===o||void 0===o[i[a]]||null===o[i[a]]){o=void 0!==n?n:void 0;break}o=o[i[a]]}}return o},i.trim=function(e){return"string"==typeof e&&""!==e&&(e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),e},i.getErrorData=function(e,t,i,o){e=n(e,t,i);for(var a in o)o.hasOwnProperty(a)&&!e[a]&&(e[a]=o[a]);return o=null,e},i.getResponseData=function(e,t,n,o){var a,s,r,l=i.getPropertyFromObject(e,"body",{});if(t){r=t.split("."),s=r.length;for(var c=0;s>c&&(a=r[c],void 0!==l[a]);c++)l=l[a];if(!0===n){var u={};u[r[s-1]]=l,l=u}}l=i.removeRels(l);for(var d in o)o.hasOwnProperty(d)&&void 0===l[d]&&(l[d]=o[d]);return l},i.removeRels=function(e){for(var t in e)e.hasOwnProperty(t)&&("link"==t?(e[t]=null,delete e[t]):"object"==typeof e[t]&&(e[t]=lpTag.utils.removeRels(e[t])));return e},i.deleteProps=function(e,t){for(var n=0;n<t.length;n++)if(e.hasOwnProperty(t[n]))try{e[t[n]]=null,delete e[t[n]]}catch(i){}},i.hasProperties=function(e){var t=!1;if(e&&"object"==typeof e)for(var n in e)if(e.hasOwnProperty(n)){t=!0;break}return t}}(window),window.lpTag=window.lpTag||{},lpTag.taglets=lpTag.taglets||{},lpTag.taglets.lpajax_utils={_name:"lpajax_utils",_v:"0.1",each:function(e,t,n){if(null!=e){var i=Array.prototype.forEach;if(i&&e.forEach===i)e.forEach(t,n);else if(e.length===+e.length){for(var o=0,a=e.length;a>o;o++)if(o in e&&t.call(n,e[o],o,e)==={})return}else for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t.call(n,e[s],s,e)==={})return}},extend:function(e){return this.each(Array.prototype.slice.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},isEmptyObj:function(e){for(var t in e)return!1;return!0},init:function(){}},window.lpTag=window.lpTag||{},lpTag.taglets=lpTag.taglets||{},lpTag.taglets.lpAjax=lpTag.taglets.lpAjax||function(e){function t(){v=!0}function n(t,n){e.lpTag&&lpTag.log&&lpTag.log(t,n,d)}function i(e,t){p[e]?n("Existing transport: "+e+" tried to register",f.DEBUG):(p[e]=t,n("Added transport: "+e,f.DEBUG))}function o(e){v||t();var i="unknown";try{var o=r(e);if(o)return o.issueCall(e),!0;n("No Transport found to issueCall",f.ERROR),u(f.ERROR,e.error,{responseCode:601,error:"No Transport found to issueCall, request: "+e.url,body:"ERROR"},e.context)}catch(a){o&&o.getName&&(i=o.getName()),n("Transport - "+i+" - unknown exception while issueCall",f.ERROR),u(f.ERROR,e.error,{responseCode:600,error:"Transport - "+i+" - unknown exception while issueCall: "+e.url+" e="+a,body:"ERROR"},e.context)}}function a(e){v||t();for(var n in e){var i=p[n];i&&i.configure(e[n])}}function s(e){e&&"object"==typeof e&&(e.appName=h,e.ts=(new Date).getTime(),e.tags&&e.tags.constructor===Array&&e.tags.push({pageId:m}),n(e,f.METRICS))}function r(e){for(var t,n=!1,i=-1,o=0;o<e.transportOrder.length;o++)if(!n){t=c({},e);var a=p[t.transportOrder[o]];a&&a.isValidRequest&&a.isValidRequest(t)&&(n=!0,i=o)}return n?p[t.transportOrder[i]]:null}function l(e,t,n){if(null!=e){var i=Array.prototype.forEach;if(i&&e.forEach===i)e.forEach(t,n);else if(e.length===+e.length){for(var o=0,a=e.length;a>o;o++)if(o in e&&t.call(n,e[o],o,e)==={})return}else for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t.call(n,e[s],s,e)==={})return}}function c(e){return l(Array.prototype.slice.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e}function u(e,t,i,o){if("function"==typeof t)try{t.call(o||null,i),t=null}catch(a){n("runCallback: Exception in execution of callback, type :"+e+" e=["+a.message+"]",f.ERROR)}else n("runCallBack: No callback, of type :"+e,f.INFO)}var d="lpAjax",h="lpTransporter",p={},v=!1,f={ERROR:"ERROR",DEBUG:"DEBUG",INFO:"INFO",METRICS:"METRICS"},m="lpT"+Math.floor(1e5*Math.random())+"_"+Math.floor(1e6*Math.random());return{getVersion:function(){return"1.1.3"},getName:function(){return d},init:t,publishMetrics:s,issueCall:o,configureTransports:a,addTransport:i}}(window),window.lpTag=window.lpTag||{},lpTag.taglets=lpTag.taglets||{},lpTag.taglets.jsonp=lpTag.taglets.jsonp||function(e){function t(){if(lpTag&&lpTag.taglets&&lpTag.taglets.lpAjax)try{lpTag.taglets.lpAjax.addTransport(Y,Q)}catch(e){}x()}function n(e){if(e)for(var n in e)V.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(V[n]=e[n]);t()}function i(t){var n=!1;if($&&t&&t.url){var i=!1;t.callbackName&&"string"==typeof t.callbackName&&(W[t.callbackName]||e[t.callbackName])&&(i=!0);var o;try{o=u(t)}catch(a){R("Could not evaluate the length  of the request, e="+a,O.ERROR,"isValidRequest"),n=!1}void 0!==o&&L>o&&!i&&(n=!0)}return n}function o(e){var t;return i(e)?(e=s(e),e.callbackName&&"string"==typeof e.callbackName?e.retries=0:e.callbackName=M+r(),t=e.url+(e.url.indexOf("?")>-1?"&":"?")+e.callback+"="+e.callbackName,e.data&&(t+="&"+d(e.data)),e.query&&(t+="&"+d(e.query)),e.callUrl=t,p(e)?(k(e),v()):R("URL request was too long and was not sent, url: "+t,O.ERROR,"issueCall"),!0):(R("URL request was too long or static callback name already exists, url: "+t,O.ERROR,"issueCall"),b(),e&&e.error&&N(O.ERROR,e.error,l(600,"Transport - JSONP - unable to run request: "+e.url),e.context),!1)}function a(){var e={};for(var t in V)V.hasOwnProperty(t)&&(e[t]=V[t]);return e}function s(e){return"string"==typeof e&&(e={url:e}),e.url?(e.encoding=e.encoding||V.encoding,e.callback=e.callback||V.callback,e.retries="number"==typeof e.retries?e.retries:V.retries,e.timeout=e.timeout?e.timeout:V.timeout,e):!1}function r(e){var t,n=99999,i="x";return t=e?n+i+n:Math.round(Math.random()*n)+i+Math.round(Math.random()*n)}function l(e,t){return{statusCode:e,responseCode:e,error:t,body:"ERROR"}}function c(){return"scr"+Math.round(999999999*Math.random())+"_"+Math.round(999999999*Math.random())}function u(e){var t=U;return e.callbackName&&"string"==typeof e.callbackName&&(t=e.callbackName.length),4+(e.callback||V.callback).length+e.url.length+t+d(e.data).length+d(e.query).length}function d(e){var t="";if("string"==typeof e)t+=e;else{var n=!0;for(var i in e){var o;"object"==typeof e[i]?o=h(e[i]):"function"!=typeof e[i]&&(o=e[i]),void 0!==o&&(n||(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(o),n=!1)}}return t}function h(e){var t;if("function"==typeof Array.prototype.toJSON){var n=Array.prototype.toJSON;delete Array.prototype.toJSON;try{t=JSON.stringify(e)}catch(i){throw Array.prototype.toJSON=n,i}Array.prototype.toJSON=n}else t=JSON.stringify(e);return t}function p(t){var n,i=!1,o=new RegExp(/(http{1}s{0,1}?:\/\/)([^\/\?]+)(\/?)/gi);if(n=0===t.callUrl.indexOf("http")?o.exec(t.callUrl):o.exec(e.location.href),n&&n.length>=3&&""!==n[2]){var a=n[2].toLowerCase();t.domainMatch=a,P[a]=P[a]||[],P[a].inFlight=P[a].inFlight||0,P[a].push(t),i=!0,j+=1,R("buffered URL: "+t.callUrl,O.DEBUG,"lpTag.taglets.jsonp.bufferRequest")}else R("NO MATCH for URL: "+t.callUrl,O.ERROR,"lpTag.taglets.jsonp.bufferRequest");return i}function v(){var e;for(var t in P)if(P.hasOwnProperty(t)){e=P[t];for(var n=!1;!n&&e.inFlight<6&&e.length>0;){var i=e.shift();i?(R("Sent URL: "+i.callUrl,O.DEBUG,"lpTag.taglets.jsonp.sendRequests"),i.scriptId=m(i.callUrl,i.encoding,i.callbackName),i.startTime=(new Date).getTime(),g(t,i.callbackName,i.timeout),j-=1):n=!0}}e=null}function f(){clearTimeout(D),D=null;var t=new Date;for(var n in W)if(W.hasOwnProperty(n)&&W[n].launchTime){var i=t-W[n].launchTime;(W[n].loadTime||i>W[n].timeout)&&e[n].apply(null,[l(408,{message:"Request timed out",name:"timeout"}),!0])}B>0&&(D=setTimeout(f,1e3))}function m(t,n,i){var o=c(),a=document.createElement("script");return a.setAttribute("type","text/javascript"),a.setAttribute("charset",n),a.onload=function(){W[i]&&(W[i].loadTime=new Date),this.onload=this.onerror=this.onreadystatechange=null},e.addEventListener?a.onerror=function(){W[i]&&(W[i].loadTime=new Date),this.onload=this.onerror=this.onreadystatechange=null}:a.onreadystatechange=function(){!this.readyState||"loaded"!==this.readyState&&"complete"!==this.readyState||(W[i]&&(W[i].loadTime=new Date),this.onload=this.onerror=this.onreadystatechange=null)},a.setAttribute("src",t),a.setAttribute("id",o),document.getElementsByTagName("head")[0].appendChild(a),D||(D=setTimeout(f,1e3)),a=null,o}function g(e,t,n){P[e].inFlight=P[e].inFlight+1,W[t]={launchTime:new Date,timeout:n},B+=1,q+=1}function b(){z+=1}function y(e){var t=document.getElementById(e);if(t)try{t.parentNode.removeChild(t)}catch(n){R("error when removing script",O.ERROR,"removeScript")}}function w(e){P[e].inFlight=P[e].inFlight-1,B-=1}function S(e,t,n){T(t.startTime,t.url,n),y(t.scriptId),w(t.domainMatch),E(t.callbackName,n),n?(t.callbackName&&(t.callbackName=null,delete t.callbackName),I(e,t)):(_(t),N("callback",t.success,e,t.context),t=null,v())}function C(){var e;lpTag.taglets.lpAjax&&lpTag.taglets.lpAjax.publishMetrics&&F.length>0&&(e={tags:[{transport:Y}],metrics:F},lpTag.taglets.lpAjax.publishMetrics(e),F.length=0),x()}function x(){A&&clearTimeout(A),A=setTimeout(C,V.metricsTimeout)}function T(e,t,n){var i,o;e&&(o=(new Date).getTime(),i=o-e,F.push({rd:i,ts:e,url:t,method:"GET",statusCode:n?400:200}),F.length>=V.metricsCount&&C())}function I(e,t){H+=1,t.retries>0?(t.retries=t.retries-1,o(t)):(_(t),N(O.ERROR,t.error,e||l(408,{id:408,name:"TIMEOUT",message:"Request has timed out on all retries"}),t.context),t=null,v())}function _(e){for(var t=["callUrl","retries","id","requestTimeout","type","encoding","launchTime","callbackName","domainMatch","startTime"],n=0;n<t.length;n++)e.hasOwnProperty(t[n])&&(e[t[n]]=null,delete e[t[n]])}function N(e,t,n,i){if("function"==typeof t)try{t.call(i||null,n),t=null}catch(o){R("Exception in execution of callback, type :"+e+" e=["+o.message+"]",O.ERROR,"runCallback")}else R("No callback, of type :"+e,O.INFO,"runCallback")}function E(t,n){if(W[t]=null,delete W[t],!0===n)e[t]=function(){e[t]=null;try{delete e[t]}catch(n){}};else{e[t]=null;try{delete e[t]}catch(i){}}}function k(t){W[t.callbackName]?(b(),I(l(409,{message:"This callbackName is already in a pending request and can't be serviced",id:409,name:"CONFLICT"}),t)):e[t.callbackName]=function(e,n){S(e,t,n)}}function R(t,n,i){e.lpTag&&lpTag.log&&("string"==typeof t&&i&&(t=i+": "+t),lpTag.log(t,n,Y))}var D,A,V={callback:"cb",encoding:"UTF-8",timeout:1e4,retries:2,metricsCount:100,metricsTimeout:6e4},O={ERROR:"ERROR",DEBUG:"DEBUG",INFO:"INFO"},$=!0,L=2083,M="lpCb",P={},q=0,j=0,B=0,z=0,H=0,F=[],W={},U=r(!0).length,X="1.1.7",Y="jsonp",Q={init:t,configure:n,issueCall:o,isValidRequest:i,getVersion:function(){return X},getName:function(){return Y},getDefaults:a,inspect:function(){return{name:Y,version:X,callsMade:q,errorsFound:H,pending:B,buffered:j,refused:z,defaults:a()}}};return t(),Q}(window),window.lpTag=window.lpTag||{},lpTag.taglets=lpTag.taglets||{},lpTag.taglets.rest2jsonp=lpTag.taglets.rest2jsonp||function(){function e(){if(lpTag&&lpTag.taglets&&lpTag.taglets.lpAjax)try{lpTag.taglets.lpAjax.addTransport(A,k)}catch(e){}}function t(e){for(var t in e)e.hasOwnProperty(t)&&(L.hasOwnProperty(t)?L[t]=e[t]:q.hasOwnProperty(t)&&(q[t]=e[t]));q.domain&&q.site&&(P=M.prefix+q.domain+M.middle+q.site+M.suffix)}function n(e){var t=!1;return e&&"string"==typeof e.url&&"function"==typeof e.success&&q.site&&q.domain&&P&&(t=!0),t}function i(e){return n(e)?(e=a(e),f(e)?b(e):w(e)):!1}function o(){return{name:A,version:R,callsMade:V,errorsFound:O,pending:$,baseUrl:P,defaults:JSON.parse(d(L))}}function a(e){for(var t in L)L.hasOwnProperty(t)&&(e[t]=e[t]||L[t]);return e.data=s(e),e.url=P+E(e.data.u),e}function s(e){return{u:r(e.url),m:e.method||L.method,b:e.data||"",h:e.headers||""}}function r(e){return e&&e.indexOf(".json?")&&(e=e.replace(".json?","?")),e}function l(e,t,n){lpTag&&lpTag.log&&lpTag.log(e,t,n)}function c(){return Math.round(9999999999*Math.random())+"-"+Math.round(9999999999*Math.random())}function u(e){return e?encodeURIComponent(d(e)):""}function d(e){var t;if("function"==typeof Array.prototype.toJSON){var n=Array.prototype.toJSON;delete Array.prototype.toJSON;try{t=JSON.stringify(e)}catch(i){throw Array.prototype.toJSON=n,i}Array.prototype.toJSON=n}else t=JSON.stringify(e);return t}function h(){var e=0;for(var t in H)H.hasOwnProperty(t)&&(e+=("&"+H[t]+"=99").length);return e+=R.length+L.callback.length+j.length+F}function p(){var e=0;for(var t in z)z.hasOwnProperty(t)&&(e+=("&"+z[t]+"=99").length);return e+=3,e+=B}function v(e,t){var n=e.url+(e.url.indexOf("?")>-1?"&":"?")+H.VERSION_PARAM+"="+D+"&"+H.JSON+"="+j;if(t){var i=u(e.data);i&&(n+="&"+H.BODY_PARAM+"="+i)}return n}function f(e){return e.url.length+U+u(e.data).length>W}function m(e,t,n,i){if("function"==typeof t)try{t.call(i||null,n)}catch(o){l("Exception in execution of callback, type :"+e+" e=["+o.message+"]","ERROR","lpTag.JSONP.runCallback")}else l("No callback, of type :"+e,"INFO","lpTag.JSONP.runCallback")}function g(e,t){var n={};return n.encoding=e.encoding,n.timeout=e.timeout||L.timeout,n.callback=e.callback||L.callback,n.retries="number"==typeof t?t:0,n}function b(e){e.id=c(),Y[e.id]={originalRequest:e,index:0,baseUrl:v(e,!1),urls:x(e.url,u(e.data),e.id),interimObj:g(e)},y(Y[e.id].interimObj,Y[e.id])}function y(e,t){e.url=C(t),e.id=t.id+"!"+t.index,e.success=function(n){!n||200!==n.responseCode&&201!==n.responseCode?(t.originalRequest.error.apply(null,[n]),S(t.id),N()):(n&&n.lpMeta&&n.lpMeta.lpS&&(t.secureId=n.lpMeta.lpS),t.index+1<t.urls.length?(t.index++,y(e,t)):(t.originalRequest.success.apply(null,[n]),S(t.id))),_()},e.error=e.success,lpTag.taglets.jsonp.issueCall(e),I()}function w(e){var t=g(e,e.retries||L.retries);t.id=c(),t.url=v(e,!0),t.success=function(n){n.responseCode&&200===n.responseCode||201===n.responseCode?m("CALLBACK",e.success,n,e.context):(m("ERROR",e.error,n,e.context),N()),t=null,e=null,_()},t.error=function(n){m("ERROR",e.error,n,e.context),t=null,e=null,_(),N()},lpTag.taglets.jsonp.issueCall(t),I()}function S(e){Y[e]=null,delete Y[e]}function C(e){return e.baseUrl+"&"+z.PART_PARAM+"="+(e.index+1)+"&"+z.OUTOF_PARAM+"="+e.urls.length+(e.secureId?"&"+z.SECURE_IDENTIFIER+"="+e.secureId:"")+"&"+H.BODY_PARAM+"="+e.urls[e.index]}function x(e,t,n){return e+="&"+H.CALLID+"="+n,T(W-e.length-X-U,t)}function T(e,t){function n(e,t,n,i,o){e+=i>0?"%":"";var a=o-e.length;return e+=t.substring(0,a),n.push(e),t=t.substring(a,t.length)}function i(e,t,n){for(var i,o=Math.ceil(e.length/t),a=0;o>a;a++)i=e.substring(a*t,(a+1)*t),o>a+1&&n.push(i);return i}function o(e,t,n,i,o){var a=(e+t).length;return a+=o>0?1:0,a>n&&(i.push(e),e=""),e+=o>0?"%":"",e+=t}var a,s="",r=[],l=t.split("%");for(a=0;a<l.length;a++)l[a].length>e?(l[a]=n(s,l[a],r,a,e),s="",s=i(l[a],e,r)):s=o(s,l[a],e,r,a);return""!==s&&r.push(s),r}function I(){V+=1,$+=1}function _(){$=$>0?$-1:0}function N(){O+=1}function E(e){var t="";return-1!=e.indexOf("/agentSession")?t="/agentSession":-1!=e.indexOf("/chat")?t="/chat":-1!=e.indexOf("/visit")?(t="/visit",-1!=e.indexOf("/keepAlive")&&(t+="/keepAlive")):-1!=e.indexOf("/configuration")&&(t="/configuration"),t}var k,R="1.2",D="1",A="rest2jsonp",V=0,O=0,$=0,L={retries:3,method:"GET",timeout:3e4,encoding:"UTF-8",callback:"cb"},M={prefix:"https://",middle:"/api/account/",suffix:"/js2rest"},P="",q={site:"",domain:""},j="1",B=32,z={PART_PARAM:"lpP",OUTOF_PARAM:"lpO",SECURE_IDENTIFIER:"lpS"},H={VERSION_PARAM:"lpV",BODY_PARAM:"lpB",JSON:"lpjson",CALLID:"lpCallId"},F=c().length,W=2083,U=h(),X=p(),Y={};return k={name:A,version:R,init:e,configure:t,issueCall:i,isValidRequest:n,inspect:o},e(),k}(),window.lpTag=window.lpTag||{},lpTag.taglets=lpTag.taglets||{},lpTag.taglets.postmessage=lpTag.taglets.postmessage||function(e){function t(e){var t=0===location.protocol.indexOf("https");if(e){if(e.frames){e.frames=e.frames.constructor===Array?e.frames:[e.frames];for(var n=0;n<e.frames.length;n++)v(e.frames[n],t)}if(e.defaults)for(var i in e.defaults)be.hasOwnProperty(i)&&e.defaults.hasOwnProperty(i)&&(be[i]=e.defaults[i])}ne=!0}function n(){if(lpTag&&lpTag.taglets&&lpTag.taglets.lpAjax)try{lpTag.taglets.lpAjax.addTransport(te,Se)}catch(e){}}function i(t){var n=!1;return e.postMessage&&e.JSON&&t&&t.success&&(t.domain&&t.validation||t.url)&&(t.domain=t.domain||p(t.url),(ie[t.domain]||ce[t.domain])&&(n=!0)),n}function o(e){var t=!1;return ne&&i(e)?ie[e.domain]?ie[e.domain].validated!==we.PENDING||e.validation?(t=O(e),t?w(e.domain):oe[e.callId].timeout=0):t=S(e.domain,e):(K("Adding iFrame to DOM - first request: "+e.domain,he.INFO,"issueCall"),t=S(e.domain,e),f(ce[e.domain]),delete ce[e.domain]):t=V(e.domain,e.error,e.context),t}function a(e){return e&&ie[e]?{url:ie[e].url,validated:ie[e].validated,requestCount:ie[e].requestCount,defaults:q(ie[e].defaults),started:ie[e].validated===we.VALIDATED}:{}}function s(){var e={};for(var t in ie)ie.hasOwnProperty(t)&&(e[t]=a(t));return e}function r(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function l(e,t){return{callId:e,responseType:t.responseType,responseCode:t.responseCode,error:{message:t.message,id:t.responseCode,name:t.name}}}function c(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}function u(){document.body?(ue=!0,d()):setTimeout(u,5)}function d(){for(;de.length>0;)try{de.shift().call(null)}catch(e){K("Unable to execute queued callbacks for window interactive state: "+e,he.ERROR,"_attachPendingIFrames")}}function h(e){return e+"_"+Math.floor(1e5*Math.random())+"_"+Math.floor(1e5*Math.random())}function p(e){var t,n=new RegExp(/(http{1}s{0,1}?:\/\/)([^\/\?]+)(\/?)/gi),i=null;return 0!==e.indexOf("http")?location.protocol+"//"+location.host:(t=n.exec(e),t&&t.length>=3&&""!==t[2]&&(i=t[1].toLowerCase()+t[2].toLowerCase()),i)}function v(e,t){var n,i,o=!1;return e&&e.url&&"string"==typeof e.url?(n=p(e.url),i=0===e.url.toLowerCase().indexOf("https"),ie[n]||ce[n]||t&&i!==t||(ce[n]=e,o=!0),o):(K("iFrame configuration empty or missing url parameter",he.ERROR,"_queueFrame"),o)}function f(e){var t=p(e.url);if(ie[t])return C(t,e.callback||e.success,e.context);var n=h("fr");return ie[t]={elem:x(n),url:e.url,validated:we.PENDING,defaults:e.defaults||{},delayLoad:isNaN(e.delayLoad)?0:e.delayLoad,requestCount:0,success:e.callback||e.success,error:e.error,maxReloadRetries:e.maxReloadRetries||3,reloadInterval:1e3*e.reloadInterval||3e4},setTimeout(function(){g(e.url,t)},ie[t].delayLoad),K("iFrame Queued to load "+t,he.INFO,"_addFrame"),we.PENDING}function m(e){var t=p(e.url);ce[t]={url:e.url,defaults:e.defaults||{},delayLoad:e.delayLoad,success:e.success,error:e.error,maxReloadRetries:e.maxReloadRetries,reloadInterval:e.reloadInterval/1e3}}function g(e,t){ue?b(e,t):de.push(function(){b(e,t)})}function b(e,t){ie[t].loadCallback=ie[t].loadCallback||y(t),F(ie[t].elem,e),r(ie[t].elem,"load",ie[t].loadCallback),ie[t].iFrameOnloadTimeout=setTimeout(ie[t].loadCallback,ye),ie[t].attachTime=(new Date).getTime(),document.body.appendChild(ie[t].elem)}function y(e){return function(t){ie[e].iFrameOnloadTimeout&&(clearTimeout(ie[e].iFrameOnloadTimeout),delete ie[e].iFrameOnloadTimeout),ie[e].loadTime=(new Date).getTime()-ie[e].attachTime,_(e,t)}}function w(e){se+=1,le+=1,ie[e].requestCount=ie[e].requestCount+1}function S(e,t){return ae[e]=ae[e]||[],ae[e].push(t),!0}function C(e,t,n){return Y(t,n,a(e)),ie[e].validated}function x(e){var t=document.createElement("IFRAME");return t.setAttribute("id",e),t.setAttribute("name",e),t.setAttribute("tabindex","-1"),t.setAttribute("aria-hidden","true"),t.setAttribute("title",""),t.setAttribute("role","presentation"),t.style.width="0px",t.style.height="0px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t}function T(e,t,n,i,o,a){var s=!1;return e&&t&&"function"==typeof t&&(oe[e]={success:t,error:n,progress:i,ctx:o,launchTime:new Date,timeout:isNaN(a)?be.timeout:a+1e3},s=!0),s}function I(e){return oe[e]?(oe[e]=null,delete oe[e],!0):!1}function _(e,t){K("onLoad validation called "+e,he.INFO,"_validateFrame");var n=function(t){N(t,e)};return t&&t.error?N(t,e):setTimeout(function(){o({domain:e,success:n,error:n,validation:!0,timeout:100,retries:-1,defaults:ie[e].defaults})},10),!0}function N(e,t){var n,i=ie[t];return K("running validation of domain "+t,he.INFO,"_validateFrameCallback"),i&&(ie[t].validated=e&&e.error?we.FAILED:we.VALIDATED,n=ie[t].validated===we.VALIDATED,n?E(t,e):ie[t].reloadObj&&ie[t].reloadObj.retriesLeft>0?R(t):k(t)),i=null,n}function E(e,t){var n;K("FrameLoaded "+e,he.INFO,"_runFrameValidated"),n=q(me);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);Y(ie[e].success,ie[e].context,n),U(e),D(e,!0)}function k(e){if(K("iFrame is a teapot "+e,he.ERROR,"_runFrameFailedToLoad"),ie[e].error){var t=l(0,ge);t.domain=e,Y(ie[e].error,ie[e].context,t)}A(e),D(e,!1)}function R(e){K("Retry loading domain: "+e,"info","_runReloadAttempt"),D(e,!1),B(e)}function D(e,t){if(K("Running buffer queue : "+e+" loaded: "+t,he.INFO,"_runQueuedRequests"),ae[e]&&ae[e].length>0){do{var n=ae[e].shift();t?o(n):Y(n.error,n.context,{responseCode:600,error:"Transport - postmessage - unable to run request: "+e,body:"ERROR"})}while(ae[e].length>0);ae[e]=null,delete ae[e]}}function A(e){if(K("Cleaning up failed iFrame: "+e,he.INFO,"_cleanupIFrame"),ie[e]){c(ie[e].elem,"load",ie[e].loadCallback),ie[e].elem.parentNode.removeChild(ie[e].elem);var t=q(ge);t.domain=e,t.url=ie[e].url,Y(ie[e].error,ie[e].context,t),m(ie[e]),ie[e]=null,delete ie[e]}}function V(e,t,n){return K("Frame not found for domain: "+e,he.ERROR,"_noFrameFound"),Y(t,{responseCode:600,error:"Transport - postmessage - unable to run request: "+e,body:"ERROR"},n),!1}function O(e){var t,n=!1;e=L(e),t=q(e);try{t=$(t)}catch(i){return K("Error trying to _stringify message",he.ERROR,"sendMessageToFrame"),!1}K("sending msg to domain "+e.domain,he.DEBUG,"sendMessageToFrame");var o;isNaN(e.timeout)||isNaN(e.retries)||(o=e.timeout*(e.retries+1)+2e3),T(e.callId,e.success,e.error,e.progress,e.context,o);try{n=M(e.domain,t),Z=setTimeout(P,1e3)}catch(i){K("Error trying to send message: "+i,he.ERROR,"sendMessageToFrame"),n=!1}return n}function $(e){var t;if("function"==typeof Array.prototype.toJSON){var n=Array.prototype.toJSON;delete Array.prototype.toJSON;try{t=JSON.stringify(e)}catch(i){throw Array.prototype.toJSON=n,i}Array.prototype.toJSON=n}else t=JSON.stringify(e);return t}function L(t){var n=ie[t.domain]&&ie[t.domain].defaults;return t.callId=h("call"),t.returnDomain=pe,void 0===t.timeout&&(t.timeout=n&&n.timeout||be.timeout),void 0===t.retries&&(t.retries=n&&void 0!==n.retries?n.retries:be.retries),t.progress&&(t.fireProgress=!0),t.headers=t.headers||{},t.headers["LP-URL"]=e.location.href,t}function M(e,t){var n=!1;try{ie[e].elem.contentWindow.postMessage(t,e),n=!0}catch(i){K("Error trying to send message: "+i,he.ERROR,"_postTheMessage")}return n}function P(){Z&&clearTimeout(Z),Z=null;var e=new Date,t=0,n=[];for(var i in oe)if(oe.hasOwnProperty(i)&&oe[i].launchTime){var o=e-oe[i].launchTime;o>oe[i].timeout?n.push(i):t+=1}if(n.length){K("Checking errors found "+n.length+" timeout callbacks to call",he.DEBUG,"_checkForErrors");for(var a=0;a<n.length;a++)j(l(n[a],fe))}return t>0&&(Z=setTimeout(P,1e3)),!0}function q(e){var t=e;try{t=JSON.parse($(e))}catch(n){}return t}function j(e,t){var n,i=oe[e.callId],o=e.responseType,a=!1;if(e.callId&&oe[e.callId]||e.responseType===ve.reloading||e.responseType===ve.stats)try{switch(o){case ve.completed:n=i.success,a=!0;break;case ve.error:n=i.error,a=!0,re+=1;break;case ve.progress:n=i.progress;break;case ve.reloading:e=t,n=B;break;case ve.stats:n=G,e=e.rawData}a&&(I(e.callId),X(e),le=le>=0?0:le-1),n&&"function"==typeof n&&Y(n,i&&i.ctx||null,e),n=null,i=null}catch(s){return K("Error in executing callback: "+s,he.ERROR,"_executeMessageCallback"),!1}return!0}function B(e){K("Got reload request from "+e,he.INFO,"_handleReload"),ie[e].validated=we.PENDING,ie[e].reloadObj||(K("Creating reloadObj"+e,he.DEBUG,"_handleReload"),ie[e].reloadObj=W(e)),z(e)}function z(e){K("Reload try for domain "+e+" ,retries left "+ie[e].reloadObj.retriesLeft,he.INFO,"_reloadIFrame"),ie[e].reloadObj.retriesLeft=ie[e].reloadObj.retriesLeft-1,ie[e].reloadObj.setLocationTimeout&&clearTimeout(ie[e].reloadObj.setLocationTimeout),ie[e].reloadObj.retry?ie[e].reloadObj.setLocationTimeout=setTimeout(H(e),ie[e].reloadInterval):(ie[e].reloadObj.retry=!0,H(e)())}function H(e){return function(){ie[e].iFrameOnloadTimeout=setTimeout(function(){_(e,{error:{code:404,message:"Frame did not trigger load"}})},ye),F(ie[e].elem,ie[e].url)}}function F(e,t){t+=t.indexOf("?")>0?"&bust=":"?bust=",t+=(new Date).getTime(),t+="&loc="+encodeURIComponent(location.protocol+"//"+location.host),K("Setting iFrame to URL: "+t,he.INFO,"_setIFrameLocation"),e.setAttribute("src",t)}function W(e){return K("Creating reload object "+e,he.INFO,"_createReloadObject"),{retriesLeft:ie[e].maxReloadRetries}}function U(e){K("Cleaning up reload object for this instance"+e,he.INFO,"_cleanUpReloadObject"),ie[e].reloadObj&&(ie[e].reloadObj.setLocationTimeout&&clearTimeout(ie[e].reloadObj.setLocationTimeout),ie[e].reloadObj=null,delete ie[e].reloadObj)}function X(e){for(var t=["callId","responseType"],n=0;n<t.length;n++)e[t[n]]=null,delete e[t[n]]}function Y(e,t,n){if(e&&"function"==typeof e)try{e.call(t||null,n)}catch(i){K("Error in executing callback: "+i,he.ERROR,"runCallback")}}function Q(e){var t,n;try{if(n=e.origin,!ie[n])return;t=J(e.data),t.body=J(t.body)}catch(i){t=null,K("Error in handling message from frame:"+i+" origin: "+n,he.ERROR,"_handleMessage")}t&&"object"==typeof t&&j(t,n)}function J(e){var t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch(n){K("Error in parsing string: "+e,he.DEBUG,"_parseJSONString")}return t}function K(t,n,i){e.lpTag&&lpTag.log&&("string"==typeof t&&i&&(t=i+": "+t),lpTag.log(t,n,te))}function G(e){lpTag.taglets.lpAjax&&lpTag.taglets.lpAjax.publishMetrics&&(e.tags&&e.tags.constructor===Array&&e.tags.push({transport:te}),lpTag.taglets.lpAjax.publishMetrics(e))}var Z,ee="1.1.8",te="postmessage",ne=!0,ie={},oe={},ae={},se=0,re=0,le=0,ce={},ue=!1,de=[],he={DEBUG:"DEBUG",INFO:"INFO",ERROR:"ERROR"},pe=p(document.location.href),ve={progress:"progressLoad",completed:"completeLoad",success:"success",error:"errorLoad",reloading:"reloading",stats:"statData"},fe={responseType:ve.error,responseCode:404,message:"Request timed out on parent postMessage layer",name:"TIMEOUT"},me={responseType:ve.success,responseCode:200,message:"iFrame has successfully loaded",name:"OK"},ge={responseType:ve.error,responseCode:418,message:"This iFrame is a teapot, not very useful for communication but lovely for earl grey",name:"TEAPOT"},be={timeout:6e4,metricsCount:1e3},ye=1e4,we={VALIDATED:"valid",PENDING:"pending",FAILED:"failed"};u(),r(e,"message",Q);var Se={v:ee,name:te,init:n,issueCall:o,isValidRequest:i,getVersion:function(){return ee},getName:function(){return te},configure:t,getFrameData:a,inspect:function(){return{name:te,version:ee,callsMade:se,errorsFound:re,pending:le,defaults:be,iFrameList:q(ce),activeFrames:s()}}};return n(),Se}(window),window.lpTag=window.lpTag||{},lpTag.taglets=lpTag.taglets||{},lpTag.taglets.LPWebSocketWrapper=lpTag.taglets.LPWebSocketWrapper||function(e){function t(){}function n(e){if(e&&(z||"string"!=typeof e.server||0===e.server.indexOf("ws")&&(L=e.server),"function"==typeof e.created&&H.push({cb:e.created,context:e.context}),"function"==typeof e.message&&F.push({cb:e.message,context:e.context}),"function"==typeof e.closed&&W.push({cb:e.closed,context:e.context}),"object"==typeof e.ping&&r(e.ping),L)){for(var t in J)J.hasOwnProperty(t)&&typeof e[t]==typeof J[t]&&(J[t]=e[t]);return!!z||h(J)}}function i(){var e=!1;return V?e=z:(X=0,e=h()),e}function o(){return z}function a(e){try{o()?(T(),V.send(x(e))):c("Socket not connected","send")}catch(t){c("unable to send request","send")}}function s(){clearTimeout($),clearTimeout(O),L="",y(),H.length=0,F.length=0,W.length=0,U.length=0}function r(e){"object"==typeof e&&e.request&&(Q.request=JSON.parse(x(e.request)),
j=!0,e.response?Q.response=e.response:"object"==typeof e.keys&&"object"==typeof Q.request&&"string"==typeof e.keys.request&&"string"==typeof e.keys.response&&(Q.reqKey=e.keys.request,Q.resKey=e.keys.response),"function"==typeof e.callback&&U.push({cb:e.callback}),(Q.response||Q.reqKey&&Q.resKey)&&(Q.timeout=e.timeout||J.pingTimeout),Q.idleBeforePing=e.idleBeforePing||J.idleBeforePing)}function l(e,t,n){window.lpTag&&lpTag.log&&("string"==typeof e&&n&&(e=n+": "+e),lpTag.log(e,t,M))}function c(e,t){l(e,K.ERROR,t)}function u(){X>=J.maxReconnectAttempt?S("cb",W,{state:"TERMINAL",code:503,message:"Socket terminal, will not reconnect"}):J.autoReconnect&&L&&($&&clearTimeout($),$=setTimeout(function(){h()||(X+=1,u())},d()))}function d(){var e;return e=X<Y[0].count?J.reconnectTimeout||Y[0].timeout:X<Y[1].count?Y[1].timeout:Y[2].timeout}function h(e){var t=!1;if(L=e&&e.server||L,!V&&L&&!0===navigator.onLine){try{V=new WebSocket(L)}catch(n){c("Exception creating WebSocket: "+n.message,"_createSocket"),V=null}V&&V.readyState<=3&&(p(),t=!0)}return t}function p(){V&&"function"!=typeof V.onopen&&(V.onopen=f,V.onclose=b,V.onerror=R,V.onmessage=m)}function v(){V&&(V.onopen=null,V.onclose=null,V.onerror=null,V.onmessage=null)}function f(e){z=!0,X=0,S("cb",H,w(e)||{state:"OPEN",code:200})}function m(e){var t=!1;if(e)try{var n=g(e.data);B&&(t=k(n)),T(),t||S("cb",F,n)}catch(i){c("failed to process message","_socketMessage")}}function g(e){var t=e;try{t=JSON.parse(e)}catch(n){c("Unable to parse message","transformToJSON")}return t}function b(e,t){z=!1,D(),S("cb",W,w(e,t)||{state:"CLOSED",code:500}),u()}function y(){J.autoReconnect=!1,z&&V.close(),D()}function w(e,t){return e?{name:M,state:e.type,code:e.code,statusCode:e.code>1e3||t?500:200,reason:e.reason||"",domain:e.srcElement&&e.srcElement.url?e.srcElement.url:""}:null}function S(e,t,n){var i;if(t){i=t.constructor===Array?t:[t];for(var o=0;o<i.length;o++)C(i[o][e],n,i[o].context)}i=null}function C(e,t,n){if("function"==typeof e)try{e.call(n||null,t)}catch(i){c("Error executing callback","_runCallback")}}function x(e){var t;if("function"==typeof Array.prototype.toJSON){var n=Array.prototype.toJSON;delete Array.prototype.toJSON;try{t=JSON.stringify(e)}catch(i){throw Array.prototype.toJSON=n,i}Array.prototype.toJSON=n}else t=JSON.stringify(e);return t}function T(){j&&!B&&(I(),Q.timeoutId=setTimeout(_,Q.idleBeforePing))}function I(){Q.timeoutId&&(clearTimeout(Q.timeoutId),Q.timeoutId=null)}function _(){j&&!B&&(B=!0,a(E(),!0),Q.timeout&&(O=setTimeout(N,Q.timeout)))}function N(){B=!1,S("cb",U,{state:"TIMEOUT",code:404,message:"No Ping Response from Service"}),delete Q.timeoutId,T()}function E(){var e;return Q.request&&(e=JSON.parse(x(Q.request)),Q.reqKey&&"object"==typeof e&&(Q.lastKey="pingKey_"+Math.floor(99999999*Math.random()),e[Q.reqKey]=Q.lastKey)),e}function k(e){return(Q.response||Q.reqKey&&Q.resKey)&&(Q.response?e===Q.response&&(B=!1):"object"==typeof e&&e[Q.resKey]===Q.lastKey&&(B=!1),!B&&O&&(clearTimeout(O),O=null),S("cb",U,{state:"PING_SUCCESS",code:200,message:"Ping Response"})),!B}function R(e){b(e,!0),X+=1}function D(){v(),I(),V=null}function A(){var e="WebSocket is not supported here.";return c(e,"socketNotSupported"),e}var V,O,$,L,M="LPWebSocketWrapper",P="0.9.7",q=void 0!==window.WebSocket&&((""+window.WebSocket).indexOf("[native")>-1||(""+window.WebSocket).indexOf("WebSocketConstructor")>-1),j=!1,B=!1,z=!1,H=[],F=[],W=[],U=[],X=0,Y=[{count:5,timeout:2e3},{count:20,timeout:5e3},{timeout:1e4}],Q={},J={autoReconnect:!0,reconnectTimeout:2e3,maxReconnectAttempt:100,idleBeforePing:1e4,pingTimeout:3e4},K={DEBUG:"DEBUG",INFO:"INFO",ERROR:"ERROR"};return n(e),{name:M,v:P,init:t,dispose:s,supported:q,connected:o,configure:q?n:A,send:q?a:A,restartSocket:q?i:A}},window.lpTag=window.lpTag||{},lpTag.taglets=lpTag.taglets||{},lpTag.taglets.websocket2http=lpTag.taglets.websocket2http||function(e){function t(){L||(L=new lpTag.taglets.LPWebSocketWrapper),L.supported||u("WebSockets not supported","init")}function n(e){var t;return L.supported&&e&&"object"==typeof e?"string"==typeof e.server?(t={server:e.server,idleBeforePing:3e4,closed:w,created:e.created,message:y,autoReconnect:"boolean"!=typeof e.autoReconnect||e.autoReconnect,reconnectTimeout:isNaN(e.reconnectTimeout)?2e3:e.reconnectTimeout,maxReconnectAttempt:isNaN(e.maxReconnectAttempt)?30:e.maxReconnectAttempt},e&&!isNaN(e.timeout)&&(B.timeout=e.timeout),L.configure(t)):void r("No server set for WebSocket","configure"):!1}function i(e){var t=!1;if(L.connected())for(var n=e&&e.constructor!==Array?[e]:e,i=0;i<n.length;i++){if(!d(n[i])){t=!1;break}t=!0}return t}function o(e){i(e)?h(e):e&&L.connected()?k("error",e,Y):k("error",e,Q)}function a(e){var t=!1,n=[];if(e){"string"==typeof e?n=[e]:e&&e.constructor===Array&&(n=e);for(var i=0;i<n.length;i++)W[n[i]]&&(N(W[n[i]]),t=!0);p(n)}return t}function s(t,n,i){e.lpTag&&lpTag.log&&("string"==typeof t&&i&&(t=i+": "+t),lpTag.log(t,n,q))}function r(e,t){s(e,j.ERROR,t)}function l(e,t){s(e,j.DEBUG,t)}function c(e,t){s(e,j.TRACE,t||"")}function u(e,t){s(e,j.INFO,t)}function d(e){return!(!e||"string"!=typeof e.url||0!==e.url.indexOf("http")||!g(e.url)||"function"!=typeof e.success)}function h(e){var t;z+=1;try{t=f(e),L.send(t),M=(new Date).getTime()}catch(n){t&&v(t),r("Failed to run request, exc "+n.message,"_runRequest"),H+=1}}function p(e){var t={cancelId:e};L.connected()&&L.send(t)}function v(e){k("error",e,X);for(var t=0;t<e.length;t++)N(e[t].name)}function f(e){for(var t=e&&e.constructor===Array?e:e?[e]:[],n=[],i=0;i<t.length;i++)n.push(m(t[i]));return n}function m(e){var t,n=R(),i=(new Date).getTime();return t=O(e),t=V(t),t.name=n,e.launchTime=i,F[n]=e,t}function g(e){if(!(U.length>0))return!0;var t,n=!1,i=/https{0,1}:\/\/([^\/|\s]+)/gi.exec(e);if(t=2===i.length?i[1]:"")for(var o=0;o<U.length;o++)if(n=b(t,U[o]))return n}function b(e,t){var n=!0,i=e.split(".");if(i.length>2)for(var o=i.length-1,a=t.split("."),s=a.length-1;s>=0;s--){if(i[o]!==a[s]&&"*"!==a[s]){n=!1;break}if(!(o-1>0))break;o-=1}else n=!1;return n}function y(e){if("object"==typeof e)for(var t in e)e.hasOwnProperty(t)&&t&&(F[t]?C(t,F[t],e[t]):"config"===t&&e[t].allowDomain?_(e[t].allowDomain):r("Callback not found for key:"+t+" response:"+JSON.stringify(e[t]),"_handleMessage"));else r("Message response not an object: "+e,"_handleMessage")}function w(e){k("error",F,Q),r("Socket closed: "+JSON.stringify(e))}function S(e){return void 0===e.responseCode&&(void 0!==e.statusCode?e.responseCode=e.statusCode:void 0!==e.HTTPStatus&&(e.responseCode=e.HTTPStatus)),e}function C(e,t,n){var i;n&&(n=S(n),n.responseCode<400||n.statusCode&&n.statusCode<400?i=t.success:(i=t.error,H+=1),I(e)?("object"==typeof n&&(n.requestName=e),T(e,n.cancelId)):N(e),c(x(t,n),"_runMessageResponse"),E(i,n,t.context),l("Ran response for key: "+e,"_runMessageResponse"))}function x(e,t){var n={},i=(new Date).getTime();return n[e.url]={duration:i-e.launchTime,request:O(e),response:O(t)},n}function T(e,t){t&&F[e]&&(F[e].cancelId=t,W[t]=e)}function I(e){return F[e]&&!0===F[e].persistent}function _(e){U=e,U&&U.constructor===Array&&1===U.length&&"*"===U[0]&&(U.length=0),l("Allowed Domains: "+JSON.stringify(e),"_setAllowedDomains")}function N(e){F[e]=null,delete F[e]}function E(e,t,n){if("function"==typeof e)try{e.call(n||null,t)}catch(i){r("Error executing callback","_runCallback")}}function k(e,t,n){var i;if(t){i=t.constructor===Array?t:[t];for(var o=0;o<i.length;o++)E(i[o][e],O(n),i[o].context)}i=null}function R(){return"ws"+(Math.abs(Math.round(9999999999*Math.random()))+(new Date).getTime())}function D(e){var t="";if("string"==typeof e)t+=e;else{var n=!0;for(var i in e){var o;"object"==typeof e[i]?o=JSON.stringify(e[i]):"function"!=typeof e[i]&&(o=e[i]),void 0!==o&&(n||(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(o),n=!1)}}return t}function A(e,t){var n=D(t);return n&&(e+=e.indexOf("?")<0?"?":"&",e+=n),e}function V(e){return e.method||(e.method="GET"),isNaN(e.timeout)&&(e.timeout=B.timeout),e.caseSensitiveHeaders=!1!==e.caseSensitiveHeaders,e.query&&(e.url=A(e.url,e.query),e.query=null),e}function O(e){try{return JSON.parse($(e))}catch(t){return r("Failed to clone object","_cloneSimpleObj"),new Error("Failed to clone object")}}function $(e){var t;if("function"==typeof Array.prototype.toJSON){var n=Array.prototype.toJSON;delete Array.prototype.toJSON;try{t=JSON.stringify(e)}catch(i){throw Array.prototype.toJSON=n,i}Array.prototype.toJSON=n}else t=JSON.stringify(e);return t}var L,M,P="0.9.4",q="websocket2http",j={DEBUG:"DEBUG",INFO:"INFO",ERROR:"ERROR",TRACE:"TRACE"},B={timeout:3e4},z=0,H=0,F={},W={},U=[],X={statusCode:400,responseCode:400,message:"Malformed/Bad request, unable to service it",name:"BADREQUEST"},Y={statusCode:401,responseCode:401,message:"Batch(elor) WS can't service this request.",name:"FORBIDDEN"},Q={statusCode:500,responseCode:500,message:"WebSocket is not connected",name:"NOCONNECTION"};t();var J={init:t,configure:n,name:q,version:P,issueCall:o,cancelPersistentRequest:a,isValidRequest:i,inspect:function(){return{name:q,version:P,callsMade:z,errorsFound:H}}};if(L&&L.supported&&lpTag.taglets.lpAjax)try{lpTag.taglets.lpAjax.addTransport(q,J)}catch(K){}return J}(window),!function(e,t){"use strict";"object"==typeof exports?t(e,exports):(e.Chronos=e.Chronos||{},t(e,e.Chronos))}(void 0===window.lpTag?this:window.lpTag,function(e,t,n){"use strict";function i(e,t,n){var i=[];if(e[t]&&e[t].length)for(var o=0;o<e[t].length;o++)n&&"*"!==e[t][o].appName&&e[t][o].appName!==n||i.push(e[t][o]);if(e["*"])for(var a=0;a<e["*"].length;a++)n&&"*"!==e["*"][a].appName&&e["*"][a].appName!==n||i.push(e["*"][a]);return i}function o(t,n,i){e&&"function"==typeof e.log&&e.log(t,n,i)}function a(e){var t,n=e.unbindObj[e.attrName],i=!1;if(!e.unbindObj)return o("CMD listen id not spec for unbind","ERROR",e.loggerName),null;if("string"==typeof e.unbindObj)return c(e.lstnrs,e.unbindObj);if(!e.unbindObj.func&&!e.unbindObj.context&&!e.unbindObj.appName)return!1;var a=e.lstnrs;n&&(a={},a[n]=e.lstnrs[n]);for(var s in a)a.hasOwnProperty(s)&&a[s]&&a[s].length&&(t=u(a[s],e.unbindObj.func,e.unbindObj.context,e.unbindObj.appName),t.length!==a[s].length&&(e.lstnrs[s]=t,i=!0));return i}function s(e){var t={};if(e.constructor===Object)for(var n in e)e.hasOwnProperty(n)&&null!==e[n]&&void 0!==e[n]&&("object"==typeof e[n]&&e[n].constructor!==Array?t[n]=s(e[n]):e[n].constructor===Array?t[n]=e[n].slice(0)||[]:"function"!=typeof e[n]&&(t[n]=null!==e[n]&&void 0!==e[n]?e[n]:""));else e.constructor===Array?t=e.slice(0)||[]:"function"!=typeof e&&(t=e);return t}function r(e,t,n){if((void 0===n||"*"===n)&&"*"===t)return e;for(var i=[],o=0;o<e.length;o++)e[o].eventName!==n&&"*"!==n||(t&&t===e[o].appName||!e[o].appName||"*"===e[o].appName||"*"===t)&&i.push(e[o]);return i}function l(e){if(0===e.eventBufferLimit||e.triggerData.data&&e.triggerData.data.doNotStore)e=null;else{var t={eventName:e.triggerData[e.attrName],appName:e.triggerData.appName};t.data=e.triggerData.passDataByRef?e.triggerData.data:s(e.triggerData.data),e.eventBufferLimit>0?(e.index>=e.eventBufferLimit&&(e.index=0),e.fired[e.index]=t,e.index++):e.fired.push(t),e=null}}function c(e,t){var n=!1;if(!t)return o("Ev listen id not spec for unregister","ERROR","Events"),null;for(var i in e)if(e.hasOwnProperty(i))for(var a=0;a<e[i].length;a++)if(e[i][a].id==t){e[i].splice(a,1),o("Ev listen="+t+" and name="+i+" unregister","DEBUG","Events"),n=!0;break}return n||o("Ev listen not found "+t+" unregister","DEBUG","Events"),n}function u(e,t,n,i){var a=[];if(e&&e.length)for(var s=0;s<e.length;s++)try{var r=!n&&e[s].func===t,l=!t&&n&&e[s].context===n,c=t&&n&&e[s].func===t&&e[s].context===n,u=i&&i===e[s].appName,d="*"===e[s].appName;if(r||l||c){if(u||d)continue;if(l)continue}else if(!t&&!n&&u)continue;a.push(e[s])}catch(h){o("Error in unbind e="+h.message,"ERROR","Events")}return a}var d={getListeners:i,log:o,unbind:a,hasFired:r,cloneEventData:s,storeEventData:l};return n||(t.EventsUtil=t.EventsUtil||d),d}),!function(e,t){"use strict";"object"==typeof exports?t(e,exports,require("./util/EventsUtil").EventsUtil):(e.Chronos=e.Chronos||{},t(e,e.Chronos,e.Chronos.EventsUtil))}(void 0===window.lpTag?this:window.lpTag,function(e,t,n,i){"use strict";function o(e){function t(e){return e?(e.triggerOnce=!0,i(e)):null}function i(e,t,o){var a=e;if("string"==typeof e&&(a={appName:e,eventName:t,func:o}),a.appName=a.appName||d,"*"!==d&&("string"!=typeof e||"function"!=typeof t&&void 0!==t||(a.eventName=e)),!a.eventName||!a.func||"function"!=typeof a.func&&a.func.constructor!==Array)return n.log("Ev listen has invalid params: evName=["+a.eventName+"]","ERROR","Events"),null;if(a.func.constructor===Array){for(var s,r,l=[],c=0;c<a.func.length;c++)s=n.cloneEventData(a),s.func=a.func[c],r=i(s),l.push(r);return l}var u=g+v++,h={id:u,func:a.func,context:a.context||null,aSync:!!a.aSync,appName:a.appName,triggerOnce:a.triggerOnce||!1};return f[a.eventName]=f[a.eventName]||[],f[a.eventName].push(h),n.log("Ev listen rgstr: evName=["+a.eventName+"] aSync="+h.aSync+" appName="+h.name,"DEBUG","Events"),a=null,e=null,u}function o(e){return"*"!==d&&(e.appName=e.appName||d),n.unbind({unbindObj:e,attrName:p,loggerName:h,lstnrs:f})}function a(e,t){return void 0===t&&(t=e,e=d),n.hasFired(m,e,t)}function s(e,t,i){var o=e;if("string"==typeof e&&(o={eventName:t,appName:e,data:i}),"*"!==d&&(o.appName=o.appName||d,"string"!=typeof e||"object"!=typeof t&&void 0!==t||(o.eventName=e)),!o||void 0===o.eventName)return n.log("Ev name not spec for publish","ERROR","Events"),o=null,null;o.passDataByRef=o.passDataByRef||!c,l(o);var a=n.getListeners(f,o.eventName,o.appName);if(a.length>0)for(var s=0;s<a.length;s++){var u=o.passDataByRef?o.data:n.cloneEventData(o.data),h={appName:o.appName,eventName:o.eventName},p=a[s];p.aSync||u&&u.aSync?setTimeout(r(p,u,h),0):r(p,u,h)()}return o=null,a.length>0}function r(e,t,i){return function(){try{e.func.call(e.context,t,i),t=null,e.triggerOnce&&o(e),e=null}catch(a){n.log("Error executing "+i.eventName+" eventId: "+e.id+"e="+a.message,"ERROR","Events")}}}function l(e){n.storeEventData({triggerData:e,eventBufferLimit:u,attrName:p,fired:m,index:b})}var c,u,d,h="Events",p="eventName",v=0,f={},m=[],g="evId_",b=0;d=e&&e.appName||"*",c=!(!e||"boolean"!=typeof e.cloneEventData)&&e.cloneEventData,u=e&&!isNaN(e.eventBufferLimit)?e.eventBufferLimit:-1,this.once=t,this.hasFired=a,this.trigger=s,this.publish=s,this.bind=i,this.register=i,this.unbind=o,this.unregister=o}return i||(t.Events=t.Events||o),o}),window.lpTag=window.lpTag||{},lpTag.taglets=lpTag.taglets||{},lpTag.utils=lpTag.utils||{},lpTag.utils.log=lpTag.utils.log||function(){},lpTag.utils.log.debug=!1,lpTag.taglets.ChatOverRestAPI=lpTag.taglets.ChatOverRestAPI||function(e){function t(e,t){var n,i,a=o(e,t);if(a&&"string"==typeof a&&e&&e.data){n=se.validateAndExtendConfigs([{obj:e.data,type:ye.STR,path:fe.pageId,prop:fe.pageId},{obj:e.data,type:ye.ARR,path:fe.impAttributes,prop:fe.impAttributes}],{}),i={data:n,transportOrder:ce,method:"PUT",XMLHTTPOverride:!1,url:a,success:function(t){t=t||{},S(pe.DEBUG,{originalRequest:e,sentRequest:i,response:t}),se.runSuccessCallback(e,{responseCode:t.responseCode,body:t.body}),i=null},error:function(t){t=t||{},S(pe.ERROR,{originalRequest:e,sentRequest:i,response:t}),se.runErrorCallback(e,{responseCode:t.responseCode,body:t.body}),i=null}};try{return le.issueCall(U(i))}catch(s){S(pe.ERROR,{request:i,message:"Failed to send request"}),se.runErrorCallback(e)}}else S(pe.ERROR,{originalRequest:e,message:"Invalid input"}),se.runErrorCallback(e)}function n(e,t){var n=e.filter(function(e){return e.service===t});return n[0]&&n[0].baseURI}function i(t,n){if(t=t||{},n=n||{},!e.engagementDomain)return w({error:"missing engagementDomain - cannot get engagement"},"","","");var i=o(t,n),a={};a=se.validateAndExtendConfigs([{obj:t,type:ye.OBJ,path:fe.appDetails,prop:fe.appDetails},{obj:t,type:ye.STR,path:fe.appDetails,prop:fe.appVersion},{obj:t,type:ye.STR,path:fe.appDetails,prop:fe.deviceFamily},{obj:t,type:ye.STR,path:fe.appDetails,prop:fe.os},{obj:t,type:ye.STR,path:fe.appDetails,prop:fe.osVersion},{obj:t,type:ye.STR,path:fe.appDetails,prop:fe.ipAddress},{obj:t,type:ye.ARR,path:fe.consumerSections,prop:fe.consumerSections},{obj:t,type:ye.ARR,path:fe.engagementAttributes,prop:fe.engagementAttributes}],a),a.appType=a.appType||ve.EXTERNAL;var s={data:a,transportOrder:ce,method:"POST",url:i};return s=U(s),s.success=function(e){var i;S(pe.INFO,{originalRequest:t||"",sentRequest:s,response:e}),e&&(i=se.getResponseData(e),i&&i[fe.vId]&&i[fe.sId]&&(n[fe.sId]=i[fe.sId],n[fe.vId]=i[fe.vId],Z.setSessionData(y(ue.engagementData),n)),ee.publish({eventName:ge.onEngagement,data:i}),se.runSuccessCallback(t,i)),s=null},s.error=function(e){k(t,s,e,ge.onEngagement,"getEngagement - server error")},S(pe.INFO,{originalRequest:t||"",sentRequest:s,response:"SENDING REQUEST"}),le.issueCall(s)}function o(t,n){var i,o,a;return e&&t&&n&&e.engagementDomain&&e.lpNumber?(i=t.sid||v(n[fe.sId])||"",o=t.vid||f(n[fe.vId])||"",a="?v=1.0"+(i?"&sid="+i:""),"https://"+e.engagementDomain+"/api/account/"+e.lpNumber+"/app/engagement/visitors/"+o+a):void 0}function a(){function t(){o&&(clearTimeout(o),o=null)}function n(){B({success:i,error:i}),a=(new Date).valueOf()}function i(){if(s){t();var e=(new Date).valueOf()-a;e=l-e,e>0?o=setTimeout(n,e):n()}}var o,a,s,r={inChat:2e3,exitSurvey:15e3},l=r.inChat,c=this;c.changeKeepAliveState=function(){t(),s=!Ve&&(be.chatInProgress||be.exitSurveyOn),s&&(l=be.chatInProgress?r.inChat:r.exitSurvey,n())},c.stopKeepAliveRequests=function(){be.exitSurveyOn&&(be.exitSurveyOn=!1,s=!1,t())},c.storeChatLocationURI=function(t,n){var i=y(ue.chat);e.sessionUID&&(i=y(e.sessionUID));var o={chatRel:t,location:window.location.href};if(n){o.overRides={};for(var a in n)n.hasOwnProperty(a)&&(o.overRides[a]=n[a])}Z.setSessionData(i,o)},c.sessionEnded=function(){Z.removeSessionData(y(ue.sessionVars)),Z.removeSessionData(y(ue.chat)),Z.removeSessionData(y(ue.resumeMode)),e.sessionUID&&Z.removeSessionData(y(e.sessionUID))}}function s(e,t){return se.validateAndExtendConfigs([{obj:t,type:ye.STR,path:fe.leVid,prop:fe.leVid},{obj:t,type:ye.STR,path:fe.leSid,prop:fe.leSid},{obj:t,type:ye.STR,path:fe.leCid,prop:fe.leCid},{obj:t,type:ye.STR,path:fe.skill,prop:fe.skill}],e,!1)}function r(t){lpTag.Chronos.Events&&lpTag.RelManager&&lpTag.SessionDataManager?(ee=new lpTag.Chronos.Events({cloneEventData:!0,eventBufferLimit:50}),te=new a,ne=new lpTag.RelManager(t&&t.transportOrder||ce),e=e||{},e.appName=oe,Z=new window.lpTag.utils.SessionDataAsyncWrapper(e),h()):20>Ae&&setTimeout(r,500),Ae++}function l(){for(var e in ge)ge.hasOwnProperty(e)&&(ie[e]=c(e))}function c(e){return function(t,n,i){return g(e,t,n||"",i)}}function u(){return!!(Se.lpNumber&&Se.appKey&&Se.domain)}function d(t,n){t&&(t.clearDomain?Se.domain=se.trim(t.domain):Se.domain=se.trim(t.domain)||se.trim(Se.domain)||"",Se.lpNumber=se.trim(t.lpNumber)||se.trim(Se.lpNumber)||"",Se.appKey=se.trim(t.appKey)||se.trim(Se.appKey)||"",e.sessionUID&&(Se.sessionUID=e.sessionUID),Se.lpNumber&&Se.appKey&&Se.domain&&(ne.setData(Se),typeof n===ye.BOOL&&!n||Z.usingSecureStorage||Z.setSessionData(y(ue.sessionVars),Se)),he=t&&t.environment&&de[t.environment]?t.environment:he,e.engagementDomain=e.engagementDomain||se.trim(t.engagementDomain),x())}function h(){function t(e){var t;for(var n in e)if(e.hasOwnProperty(n)&&0===String(n).indexOf("on")&&ie.hasOwnProperty(n)){e[n]=e[n].constructor===Array?e[n]:[e[n]];for(var o=0;o<e[n].length;o++)t=i(n,e[n][o]),ie[n](t.callback,t.appName,t.context)}}function n(e){var t;for(var n in me)e.hasOwnProperty(n)&&(t=i(n,e[n]),g(t.eventName,t.callback,t.appName,t.context))}function i(e,t){var n=null;return t=typeof t===ye.OBJ?t:{callback:t},"function"==typeof t.callback&&(n={eventName:e,callback:t.callback,context:t.context||null,appName:t.appName||""}),n}function o(){document.body?m():setTimeout(o,5)}function a(e){var t={};if(e)for(var n in e)if(e.hasOwnProperty(n)){var i=void 0!==t[n],o=0===n.indexOf("on");i&&(t[n]===e[n]||o)?(t[n]=t[n].constructor===Array?t[n]:[t[n]],t[n].push(e[n])):t[n]=e[n]}return t}ie.onInit(function(e){e.error||(be.initialised=!0)}),ie.onStart(function(e){e.error||(be.chatInProgress=!0)}),ie.onState(function(e){if(!e.error)switch(be.state=e.state,be.state){case ie.chatStates.RESUMING:be.chatInProgress=!0;break;case ie.chatStates.CHATTING:case ie.chatStates.WAITING:Z.usingSecureStorage||Z.setSessionData(y(ue.resumeMode),!0,null,null,null,!1),be.chatInProgress=!0,be.agentName="",be.agentId="",be.agentPictureUrl="",te.changeKeepAliveState();break;case ie.chatStates.INITIALISED:be.chatInProgress=!!De;break;case ie.chatStates.ENDED:case ie.chatStates.UNINITIALISED:be.chatInProgress=!1,te.changeKeepAliveState();break;case ie.chatStates.NOTFOUND:be.chatInProgress=!1,be.exitSurveyOn=!1,te.changeKeepAliveState()}}),ie.onVisitorName(function(e){e.error||(be.visitorName=e.visitorName)}),ie.onSetVisitorTyping(function(e){e.error||(be.typing=e.typing)}),we=a(e),d(we,!1),t(we),n(we),typeof we.debug===ye.BOOL&&ie.setDebugMode(we.debug),o()}function p(e){return e||window.lpMTagConfig&&window.lpMTagConfig.FPC_CONT||Z.readCookie("HumanClickSiteContainerID_"+we.lpNumber)||null}function v(e){return e||window.lpMTagConfig&&window.lpMTagConfig.LPSID_VAR||Z.readCookie(we.lpNumber+"-SKEY")||null}function f(e){return e||window.lpMTagConfig&&window.lpMTagConfig.FPC_VID||Z.readCookie(we.lpNumber+"-VID")||null}function m(){ke=!0,e.doNotResume&&he!==de.PRODUCTION?u()&&(A(),ee.publish({eventName:ge.onLoad,data:{API:"Chat API SDK Loaded",version:ae,state:De?ie.chatStates.RESUMING:ie.chatStates.UNINITIALISED}}),be.chatInProgress=!1):e.sessionUID?Z.getSessionData(y(e.sessionUID),N,N,null):Z.getSessionData(y(ue.resumeMode),T,T,null)}function g(e,t,n,i){if(!ee)return!1;var o={eventName:e,appName:n||"",aSync:!1,func:t,context:i||null};return ee.register(o)}function b(e,t,n,i){if(!ee)return!1;typeof e===ye.FUN?(n=e,e=""):typeof e===ye.OBJ&&(i=e,e="");var o={eventName:e,appName:t||"",func:n,context:i||null};return ee.unbind(o)}function y(t){if(!e.lpNumber)return"";if(typeof t===ye.OBJ){var n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(t[i]+e.lpNumber);return n}return t+e.lpNumber}function w(e,t,n,i){return S(pe.ERROR,{error:e,originalRequest:t,sentRequest:n,response:i}),t=null,n=null,i=null,e}function S(e,t){var n={eventName:ge.onLog};e&&typeof e===ye.STR?n.appName=e:typeof e===ye.OBJ&&(t=e),n.data=t,!n.appName||n.appName===pe.ERROR||Re?(ee.publish(n),n=null):n=null}function C(){return he!=de.PRODUCTION?"/hcp/html/lpsunco/postmessage.html":"/hcp/html/postmessage.min.html"}function x(){if(Se.domain&&Se.lpNumber){var t={rest2jsonp:{domain:Se.domain,site:Se.lpNumber},postmessage:{frames:[{url:"https://"+Se.domain+C(),delayLoad:0}]}};e.engagementDomain&&t.postmessage.frames.push({url:"https://"+e.engagementDomain+"/postmessage/postmessage.min.html",delayLoad:0}),we&&we.batchelor&&(t.websocket2http={idleBeforePing:15e3,server:we.batchelor}),le.configureTransports(t)}}function T(e){1==e?Z.getSessionData(y(ue.sessionVars),_,_,null):I()}function I(){be.chatInProgress=!1,De=!1,ee.publish({eventName:ge.onLoad,data:{API:"Chat API SDK Loaded",version:ae,state:De?ie.chatStates.RESUMING:ie.chatStates.UNINITIALISED}}),A()}function _(t){t&&typeof t===ye.OBJ&&!t.error?E(e,t)&&(d(t),De=!0,Z.getSessionData(y(ue.chat),N,N,null)):I()}function N(e){!e||e&&!e.chatRel?I():(be.chatInProgress=!0,ee.publish({eventName:ge.onLoad,data:{API:"Chat API SDK Loaded",version:ae,state:De?ie.chatStates.RESUMING:ie.chatStates.UNINITIALISED}}),e.overRides&&d(e.overRides),A({success:function(){ne.addRels({link:[{rel:"location",href:e.chatRel}]},{type:"chat"}),J(Y(ie.chatStates.RESUMING,new Date)),P(null,e.overRides)},error:function(){te.sessionEnded()}}))}function E(e,t){for(var n=["lpNumber","appKey","sessionUID"],i=!0,o=0;o<n.length;o++){var a=n[o];if(e[a]!=t[a]&&("sessionUID"===a?e[a]&&t[a]&&(i=!1):i=!1),!i)break}return i}function k(e,t,n,i,o,a){return S(pe.ERROR,{originalRequest:e,sentRequest:t,response:n}),n=se.getErrorData(n,o,e),R(i,n,a),se.runErrorCallback(e,n),t=null,n}function R(e,t,n){e=e.constructor===Array?e:[e];for(var i=0;i<e.length;i++)ee.publish({eventName:e[i],appName:n||"",data:t})}function D(t){var n={site:t.lpNumber};n.success=function(n){e.engagementDomain=n.engagementDomain,t.domain=n.domain,A(t)},n.error=function(e){w({error:"unable to resolve site domain"},t,"",e),k({},{},{},ge.onInit,"unable to initiate session"),se.runErrorCallback(t)},ie.getSiteDomain(n)}function A(e){if(e=e||{},d(e),e.lpNumber=Se.lpNumber,e.appKey=Se.appKey,e.domain=Se.domain,!e.lpNumber)return w({error:"missing site configuration data, cannot _init"},e,"","");if(!e.domain)return D(e),!1;if(!u())return!1;ne.setData(e);var t=ne.buildRequestObj({rel:"",data:{lpNumber:Se.lpNumber,appKey:Se.appKey,domain:Se.domain}});return t=U(t),t.success=function(n){S(pe.INFO,{originalRequest:e,sentRequest:t,response:n}),n&&(ne.addRels(n,{type:"chat"}),$("self",{type:"chat",ignoreParameters:!0},[{rel:"OTK",href:"chat/resumeWithOTK"}]),ee.publish({eventName:ge.onInit,data:{account:e.lpNumber,domain:e.domain,init:!0}}),J(Y(ie.chatStates.INITIALISED))),e.requestChat?ie.requestChat(e):se.runSuccessCallback(e,{}),t=null},t.error=function(n){var i=[ge.onInit];e.requestChat&&i.push(ge.onRequestChat),k(e,t,n,i,"unable to initiate session"),ne.clearData()},S(pe.INFO,{originalRequest:e,sentRequest:t,response:"SENDING REQUEST"}),le.issueCall(t)}function V(e){var t,n,i,o={};if(e=e||{},i=v(e.visitorSessionId),n=f(e.visitorId),t=ie.getRtSessionId(),o=se.validateAndExtendConfigs([{obj:e,type:ye.STR,path:fe.agent,prop:fe.agent},{obj:e,type:ye.STR,path:fe.skill,prop:fe.skill},{obj:e,type:ye.STR,path:fe.sQueue,prop:fe.sQueue}],o,!0),se.validateAndExtendConfigs([{obj:e,type:ye.NUM,path:"interactionTimeout",prop:"interactionTimeout"},{obj:navigator,type:ye.STR,path:fe.UA,prop:fe.UA},{obj:e,type:ye.STR,path:fe.leVid,prop:fe.leVid},{obj:e,type:ye.STR,path:fe.leSid,prop:fe.leSid},{obj:e,path:fe.leCid,prop:fe.leCid},{obj:e,type:ye.STR,path:"ssoKey",prop:"ssoKey"},{obj:e,type:ye.OBJ,path:"survey",prop:"survey"},{obj:e,path:"participantId",prop:"participantId"},{obj:e,path:"conversationId",prop:"conversationId"},{obj:e,path:"a2aSourceSiteId",prop:"a2aSourceSiteId"},{obj:e,path:"a2aSourceSessionId",prop:"a2aSourceSessionId"},{obj:e,path:"a2aEventId",prop:"a2aEventId"},{obj:e,type:ye.BOOL,path:"runWithRules",prop:"runWithRules"},{obj:e,type:ye.STR,path:"ssoServiceExtraParams",prop:"ssoServiceExtraParams"},{obj:e,type:ye.STR,path:"ssoServiceKey",prop:"ssoServiceKey"},{obj:e,path:"engagementId",prop:"engagementId"},{obj:e,path:"campaignId",prop:"campaignId"},{obj:e,path:"language",prop:"language"},{obj:e,type:ye.STR,path:"capChallenge",prop:"capChallenge"},{obj:e,type:ye.STR,path:"capResponse",prop:"capResponse"},{obj:e,type:ye.NUM,path:fe.availabilityPolicy,prop:fe.availabilityPolicy},{obj:n,prop:fe.vId},{obj:i,prop:"visitorSessionId"},{obj:t,prop:"rtSessionId"}],o),!isNaN(e.maxWaitTime)&&e.maxWaitTime>=0&&e.maxWaitTime<86400&&(o.maxWaitTime=e.maxWaitTime),typeof e.buttonName===ye.STR?o.chatReferrer="(button dynamic-button:"+e.buttonName+"()) "+document.location.href:!0===e.invitation?o.chatReferrer="(engage) "+document.location.href:(e.chatReferrer||document.referrer)&&(o.chatReferrer=e.chatReferrer||document.referrer),typeof e.customVariables===ye.OBJ)if(e.customVariables.customVariable&&e.customVariables.customVariable.constructor===Array)o.customVariables=e.customVariables;else{var a=O(e.customVariables);a&&(o.customVariables=a)}return e.preChatLines&&e.preChatLines.constructor===Array&&(o.preChatLines={line:e.preChatLines}),se.hasProperties(o)?{request:o}:{}}function O(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({name:n,value:e[n]});return t.length>0?{customVariable:t}:null}function $(e,t,n){for(var i=ne.getURI(e,t),o={link:[]},a=0;a<n.length;a++)o.link.push({href:i+"/"+n[a].href,rel:""+n[a].rel});ne.addRels(o,t)}function L(e,t){if(be.chatInProgress||Ee)return!1;var n={},i=p(e.siteContainer);i&&(n.siteContainer=i);var o=ne.buildRequestObj({rel:"chat-request",type:"chat",needAuth:!0,requestType:"POST",data:V(e),queryParams:n});return o?(M(e.sessionUID),Ee=!0,o=U(o),o.success=function(n){var i;S(pe.INFO,{originalRequest:e||"",sentRequest:o,response:n}),i=n&&n.headers&&(n.headers.Location||n.headers.location),i&&(ne.addRels({link:[{"@rel":"location","@href":i}]},{type:"chat"}),te.storeChatLocationURI(i,t),t&&(be.initialised=!1),P(e)),o=null},o.error=function(t){k(e,o,t,[ge.onRequestChat],"requestChat  - server error"),Ee=!1},S(pe.INFO,{originalRequest:e||"",sentRequest:o,response:"SENDING REQUEST"}),le.issueCall(o)):w({error:"requestChat - unable to find rel for request"},"","","")}function M(t){t&&(e=e||{},e.sessionUID&&ie.clearSessionData(e.sessionUID),e.sessionUID=t)}function P(e,t){var n=ne.buildRequestObj({rel:"location",type:"chat",needAuth:!0,requestType:"GET"});return n?(Ee=!0,n=U(n),n.success=function(i){S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:i}),q(n,e,i),t&&(be.initialised=!1),Ie=0,Ee=!1,n=null},n.error=function(i){var o=i&&i.responseCode,a=se.getErrorData(i,"_getSessionData  - server error",e);503===o&&27===a.error.internalCode&&Te>Ie?(setTimeout(function(){P(e,t)},xe),Ie+=1):(be.chatState===ie.chatStates.RESUMING&&(J(Y(ie.chatStates.NOTFOUND)),te.sessionEnded()),k(e,n,i,ge.onRequestChat,"_getSessionData  - server error"),Ie=0,Ee=!1)},S(pe.INFO,{originalRequest:"",sentRequest:n,response:"SENDING REQUEST"}),ee.publish({eventName:me.onSessionData,data:n,cloneEventData:!0}),le.issueCall(n)):w({error:"_getSessionData - unable to find rel for request"},"","","")}function q(e,t,n){if(n){ne.addRels({link:n.body.chat.link},{type:"chat"}),ne.addRels(n.body.chat.info,{type:"visitor"});var i=se.getResponseData(n,"chat",!1);ee.publish({eventName:ge.onRequestChat,data:i}),Q(i.info),i.events=z(i.events,i.info);var o=K(i.events);o&&H(o,i.events),se.runSuccessCallback(t,i),De=!1}}function j(e){for(var t={},n=0;n<e.length;n++)t[e[n].skill]=e[n].isAvailable;return t}function B(e){var t=ne.buildRequestObj({rel:"next",type:"chat",needAuth:!0,requestType:"GET"});return t?(t=U(t),t.timeout=1e4,t.retries=0,t.success=function(n){_e=0,G&&clearTimeout(G);var i,o;S(pe.INFO,{originalRequest:"",sentRequest:t,response:n}),n&&(ne.addRels({link:n.body.chat.link},{type:"chat"}),ne.addRels(n.body.chat.info,{type:"visitor"}),i=se.getResponseData(n,"chat"),i.events=z(i.events,i.info),o=K(i.events),o&&H(o,i.events),i.info&&Q(i.info)),se.runSuccessCallback(e,o),t=null},t.error=function(n){var i=n&&n.responseCode;_e+=1,n=k(e,t,n,[],""),!G&&Ne&&(G=setTimeout(function(){J(Y(ie.chatStates.NOTFOUND))},Ne)),503===i&&27===n.error.internalCode&&Ce>_e?k(e,t,n,[ge.onEvents],"_getEvents - server error"):!G&&_e>Ce||n&&n.error&&12===n.error.internalCode?J(Y(ie.chatStates.NOTFOUND)):R([ge.onLine,ge.onAgentTyping,ge.onInfo,ge.onEvents],n)},S(pe.INFO,{originalRequest:"",sentRequest:t,response:"SENDING REQUEST"}),le.issueCall(t)):w({error:"_getEvents - unable to find rel for request"},"","","")}function z(e,t){var n=e&&e.event;if(n=n&&n.constructor===Array?n:[n],n&&t&&t.agentPictureUrl)for(var i=0;i<n.length;i++)n[i]&&n[i].by&&n[i].by===t.agentName&&(n[i].agentPictureUrl=t.agentPictureUrl);return e}function H(e,t){if(t&&ee.publish({eventName:ge.onEventList,data:t.event}),e.line&&ee.publish({eventName:ge.onLine,data:{lines:e.line}}),e["a2a-transfer"]){var n=X(e["a2a-transfer"]);ee.publish({eventName:ge.onAccountToAccountTransfer,data:n})}e.leCollaboration&&ee.publish({eventName:ge.onCollaboration,data:{collaboration:e.leCollaboration}}),e.state&&(e.state=e.state.constructor===Array?e.state.pop():e.state,J(Y(e.state.state,e.state.time))),ee.publish({eventName:ge.onEvents,data:e})}function F(e){var t=!1;e=e.constructor===Array?e:[e];for(var n={},i=0;i<e.length;i++)"object"==typeof e[i]&&e[i]["@name"]&&(n[e[i]["@name"]]=e[i].$,t=!0);return t?n:e;
}function W(e){if(e){var t={"@type":"leCollaboration",subType:e.subType,command:e.command};if("object"==typeof e.info){var n=[];for(var i in e.info)e.info.hasOwnProperty(i)&&n.push({"@name":i,$:e.info[i]});n.length>0&&(t.info=n)}return t}}function U(e){return e.headers=e.headers||{},e.headers.Pragma="no-cache",e.headers["Cache-Control"]="private, max-age=0, no-cache, no-store",e}function X(e){return e.length>1?e[e.length-1]:e[0]}function Y(e,t){return{state:e,time:t||(new Date).toTimeString()}}function Q(e){"typing"===e.agentTyping!=be.agentTyping&&(be.agentTyping="typing"===e.agentTyping,ee.publish({eventName:ge.onAgentTyping,data:{agentTyping:be.agentTyping}}),e.agentTyping=null,delete e.agentTyping);var t=!1;for(var n in e)e.hasOwnProperty(n)&&be.hasOwnProperty(n)&&e[n]!=be[n]&&"lastUpdate"!==n&&"agentTyping"!==n&&"visitorTyping"!==n&&"state"!==n&&(be[n]=e[n],t=!0);be.state==ie.chatStates.RESUMEPAUSEDCHAT&&e.state!==be.state&&J(Y(e.state)),be.lastUpdate=e.lastUpdate,t&&ee.publish({eventName:ge.onInfo,data:be,cloneEventData:!0})}function J(e){if(be.chatState!==e.state){switch(be.chatState=e.state,e.state){case ie.chatStates.ENDED:ee.publish({eventName:ge.onStop,data:e});break;case ie.chatStates.CHATTING:ee.publish({eventName:ge.onStart,data:e})}ee.publish({eventName:ge.onState,data:e})}}function K(e){if(!e.event)return null;e=e.event,e=e.constructor===Array?e:[e];for(var t={},n=!1,i=0;i<e.length;i++){var o=e[i].type||e[i]["@type"];if("leCollaboration"===o&&e[i].info&&(e[i].info=F(e[i].info)),e[i].channelID){var a=e[i].channelID;t[o]=t[o]||{},t[o][a]=t[o][a]||[],t[o][a].push(e[i])}else t[o]=t[o]||[],t[o].push(e[i]);n=!0}return n?t:null}if(this===window)return!1;var G,Z,ee,te,ne,ie=this,oe="ChatOverRestAPI",ae="3.1.0",se=lpTag.utils,re=lpTag&&lpTag.taglets&&lpTag.taglets.jsonp,le=lpTag&&lpTag.taglets&&lpTag.taglets.lpAjax,ce=e.batchelor?["websocket2http","postmessage","rest2jsonp"]:["postmessage","rest2jsonp"],ue={resumeMode:"lpVisitorResumeMode",sessionVars:"lpVisitorSessionVars",chat:"lpVisitorChatRels",sessionUID:"lpSessionUID",engagementData:"lpEngagementData"},de={QA:"QA",DEV:"DEV",PRODUCTION:"PRODUCTION",CI:"CI",CLOUD:"CLOUD"},he=de.PRODUCTION,pe={ERROR:"ERROR",INFO:"INFO",DEBUG:"DEBUG"},ve={EXTERNAL:"EXTERNAL"},fe={skill:"skill",sQueue:"serviceQueue",agent:"agent",mWaitTime:"maxWaitTime",sAPIId:"surveyApiId",subject:"subject",sName:"surveyName",vProfile:"visitorProfile",sId:"sessionId",vId:"visitorId",vIp:"visitorIp",leVid:"LETagVisitorId",leSid:"LETagSessionId",leCid:"LETagContextId",UA:"userAgent",appType:"appType",appDetails:"appDetails",windowSurveyEnabled:"windowSurveyEnabled",engSkillId:"engSkillId",availabilityPolicy:"availabilityPolicy",deviceFamily:"deviceFamily",os:"os",ipAddress:"ipAddress",osVersion:"osVersion",consumerSections:"consumerSections",engagementAttributes:"engagementAttributes",impAttributes:"impAttributes",pageId:"pageId"},me={onSessionData:"onSessionData"},ge={onLoad:"onLoad",onInit:"onInit",onEngagement:"onEngagement",onStart:"onStart",onRequestChat:"onRequestChat",onAvailability:"onAvailability",onEstimatedWaitTime:"onEstimatedWaitTime",onAgentTyping:"onAgentTyping",onLine:"onLine",onInfo:"onInfo",onEvents:"onEvents",onEventList:"onEventList",onState:"onState",onStop:"onStop",onAccountToAccountTransfer:"onAccountToAccountTransfer",onAddLine:"onAddLine",onCollaboration:"onCollaboration",onSendCollaboration:"onSendCollaboration",onVisitorName:"onVisitorName",onSetVisitorTyping:"onSetVisitorTyping",onTranscript:"onTranscript",onPreChatSurvey:"onPreChatSurvey",onOfflineSurvey:"onOfflineSurvey",onSubmitOfflineSurvey:"onSubmitOfflineSurvey",onExitSurvey:"onExitSurvey",onLog:"onLog",onVisitorDisposed:"onVisitorDisposed",onSetCustomVariable:"onSetCustomVariable",onSubmitExitSurvey:"onSubmitExitSurvey"},be={typing:null,visitorName:"",agentName:"",rtSessionId:"",initialised:!1,agentTyping:!1,chatInProgress:!1,visitorId:"",agentId:"",agentPictureUrl:"",skillName:"",timeout:"",chatSessionKey:"",chatState:"",exitSurveyOn:!1},ye={STR:"string",BOOL:"boolean",ARR:"array",OBJ:"object",NUM:"number",FUN:"function"},we={},Se={},Ce=e&&e.failureTolerance||45,xe=e&&e.moveToPrimaryInterval||2e3,Te=e&&e.moveToPrimaryRetry||15,Ie=0,_e=0,Ne=e&&e.reconnectTimeout,Ee=!1,ke=!1,Re=!1,De=!1,Ae=0,Ve=!1;ie.getSiteDomain=function(e){var t="https://api.liveperson.net/csdr/account/",i="/service/baseURI.lpCsds?version=1.0";if(typeof e.success!==ye.FUN||!e.site)return w({error:"missing callback or site - cannot lookup domain"},"","","");var o={url:t+e.site+i};return o=U(o),o.success=function(t){var i,a;S(pe.INFO,{originalRequest:{site:e.site},sentRequest:o,response:t}),t&&t.ResultSet&&t.ResultSet.lpData&&(i=n(t.ResultSet.lpData.baseURIs,"conversationVep"),a=n(t.ResultSet.lpData.baseURIs,"smt")),o=null,i&&a?se.runSuccessCallback(e,{domain:i,engagementDomain:a,site:e.site}):se.runErrorCallback(e,{error:"unable to resolve site domain",response:t,site:e.site})},o.error=o.success,S(pe.INFO,{originalRequest:{site:e.site},sentRequest:o,response:"SENDING REQUEST"}),re.issueCall(o)},ie.updateSdes=function(e){var n=y(ue.engagementData),i=t.bind(this,e);Z.getSessionData(n,i,i,null)},ie.getEngagement=function(e){var t,n;e=e||{},e.sid&&e.vid?i(e):(t=i.bind(this,e),n=y(ue.engagementData),Z.getSessionData(n,t,t,null))},ie.requestChat=function(t){be.initialised?L(t):(t=t||{},t.requestChat=!0,t.lpNumber=e.lpNumber,t.appKey=e.appKey,t.domain=e.domain||null,t.clearDomain=!0,A(t))},ie.startChat=ie.requestChat,ie.reInit=function(t){be={typing:null,visitorName:"",agentName:"",rtSessionId:"",initialised:!1,agentTyping:!1,chatInProgress:!1,visitorId:"",agentId:"",agentPictureUrl:"",skillName:"",timeout:"",chatSessionKey:"",chatState:"",exitSurveyOn:!1},t&&(!0===t.disposeVisitor&&ie.disposeVisitor(),t.sessionUID&&(e=e||{},e.sessionUID=t.sessionUID)),ne.clearData(),m()},ie.getEstimatedWaitTime=function(e){var t={};e&&(t=se.validateAndExtendConfigs([{obj:e,type:ye.STR,path:fe.skill,prop:fe.skill},{obj:e,type:ye.STR,path:fe.sQueue,prop:fe.sQueue}],t));var n=ne.buildRequestObj({rel:"chat-estimatedWaitTime",type:"chat",needAuth:!0,requestType:"GET",queryParams:t});return n?(n=U(n),n.success=function(t){if(S(pe.INFO,{originalRequest:"",sentRequest:n,response:t}),t){var i=se.getResponseData(t,"estimatedWaitTime",!0);ee.publish({eventName:ge.onEstimatedWaitTime,data:i}),se.runSuccessCallback(e,i)}n=null},n.error=function(t){k(e,n,t,ge.onEstimatedWaitTime,"getEstimatedWaitTime - server error")},S(pe.INFO,{originalRequest:"",sentRequest:n,response:"SENDING REQUEST"}),le.issueCall(n)):w({error:"getEstimatedWaitTime - unable to find rel for request"},"","","")},ie.getAvailabilty=function(e){var t={};e&&(e.agent&&typeof e.agent===ye.STR?t.agent=e.agent:t=se.validateAndExtendConfigs([{obj:e,path:fe.skill,prop:fe.skill},{obj:e,path:fe.mWaitTime,prop:fe.mWaitTime},{obj:e,type:ye.STR,path:fe.sQueue,prop:fe.sQueue}],t));var n=ne.buildRequestObj({rel:"chat-availability",type:"chat",needAuth:!0,requestType:"GET",queryParams:t});return n?(n=U(n),n.success=function(t){var i,o;S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:t}),t&&(i=se.getResponseData(t,"availability",!0),o=se.getPropertyFromObject(i,"availability.AvailabilityForSkills.skillAvailability"),o&&(i=j(o)),ee.publish({eventName:ge.onAvailability,data:i}),se.runSuccessCallback(e,i)),n=null},n.error=function(t){k(e,n,t,ge.onAvailability,"getAvailabilty - server error")},S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:"SENDING REQUEST"}),le.issueCall(n)):w({error:"getAvailability - unable to find rel for request"},"","","")},ie.getAvailability=ie.getAvailabilty,ie.disposeVisitor=function(){te.sessionEnded(),ee.publish({eventName:ge.onVisitorDisposed,data:{visitorDisposed:!0,aSync:!0}})},ie.clearSessionData=function(e){return e?(Z.removeSessionData(y(e)),!0):!1},ie.getPreChatSurvey=function(e){var t={};e&&(t=se.validateAndExtendConfigs([{obj:e,type:ye.STR,path:fe.vProfile,prop:fe.vProfile}],t,!0),t=se.validateAndExtend({obj:e,type:ye.STR,path:fe.vIp,prop:fe.vIp},t),t=se.validateAndExtendConfigs([{obj:e,path:fe.sAPIId,prop:fe.sAPIId},{obj:e,type:ye.STR,path:fe.sName,prop:fe.sName}],t,!0),t=s(t,e));var n=ne.buildRequestObj({rel:"prechat-survey",type:"chat",needAuth:!0,requestType:"GET",queryParams:t});return n?(n=U(n),n.success=function(t){if(S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:t}),t){var i=se.getResponseData(t,"survey",!0);ee.publish({eventName:ge.onPreChatSurvey,data:i}),se.runSuccessCallback(e,i)}n=null},n.error=function(t){k(e,n,t,ge.onPreChatSurvey,"getPreChatSurvey - server error")},S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:"SENDING REQUEST"}),le.issueCall(n)):w({error:"getPreChatSurvey - unable to find rel for request"},"","","")},ie.getOfflineSurvey=function(e){var t={};e&&(t=se.validateAndExtendConfigs([{obj:e,path:fe.sAPIId,prop:fe.sAPIId},{obj:e,type:ye.STR,path:fe.vProfile,prop:fe.vProfile},{obj:e,type:ye.STR,path:fe.vId,prop:fe.vId},{obj:e,type:ye.STR,path:fe.sName,prop:fe.sName}],t,!0),t=se.validateAndExtendConfigs([{obj:e,path:fe.engSkillId,prop:fe.engSkillId},{obj:e,type:ye.BOOL,path:fe.windowSurveyEnabled,prop:fe.windowSurveyEnabled}],t),t=s(t,e));var n=ne.buildRequestObj({rel:"chat-offline-survey",type:"chat",needAuth:!0,requestType:"GET",queryParams:t});return n?(n=U(n),n.success=function(t){if(S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:t}),t){var i=se.getResponseData(t,"survey",!0);ee.publish({eventName:ge.onOfflineSurvey,data:i}),se.runSuccessCallback(e,i)}n=null},n.error=function(t){k(e,n,t,ge.onOfflineSurvey,"getOfflineSurvey - server error")},S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:"SENDING REQUEST"}),le.issueCall(n)):w({error:"getOfflineSurvey - unable to find rel for request"},"","","")},ie.submitOfflineSurvey=function(e){var t,n,i={};if(!e.survey)return w({error:"Survey must be present in order to submit"},"","","");i.survey=e.survey;var o={},a=p(e.siteContainer);a&&(o.siteContainer=a),t=v(e.visitorSessionId),n=f(e.visitorId),i.survey=lpTag.utils.validateAndExtendConfigs([{obj:t,prop:"visitorSessionId"},{obj:n,prop:fe.vId},{obj:e,type:ye.STR,path:fe.leVid,prop:fe.leVid},{obj:e,type:ye.STR,path:fe.leSid,prop:fe.leSid},{obj:e,path:fe.leCid,prop:fe.leCid},{obj:e,path:"offsiteEngContext",prop:"offsiteEngContext"},{obj:e,type:ye.STR,path:"chatRefferer",prop:"chatRefferer"},{obj:e,type:ye.STR,path:fe.skill,prop:fe.skill},{obj:e,type:ye.STR,path:"capChallenge",prop:"capChallenge"},{obj:e,type:ye.STR,path:"capResponse",prop:"capResponse"},{obj:e,path:fe.vIp,prop:fe.vIp},{obj:navigator,path:fe.UA,prop:fe.UA}],i.survey);var s=ne.buildRequestObj({rel:"chat-offline-survey",type:"chat",needAuth:!0,requestType:"PUT",data:i,queryParams:o});return s?(s=U(s),s.success=function(t){if(S(pe.INFO,{originalRequest:e||"",sentRequest:s,response:t}),t){var n=se.getResponseData(t);ee.publish({eventName:ge.onSubmitOfflineSurvey,data:n}),se.runSuccessCallback(e,n)}s=null},s.error=function(t){k(e,s,t,ge.onSubmitOfflineSurvey,"submitOfflineSurvey - server error")},S(pe.INFO,{originalRequest:e||"",sentRequest:s,response:"SENDING REQUEST"}),le.issueCall(s)):w({error:"submitOfflineSurvey - unable to find rel for request"},"","","")},ie.pauseChat=function(){Ve=!0,J(Y(ie.chatStates.PAUSECHAT)),te.changeKeepAliveState()},ie.resumePausedChat=function(){Ve=!1,J(Y(ie.chatStates.RESUMEPAUSEDCHAT)),te.changeKeepAliveState()},ie.setCustomVariable=function(e){if(!e.customVariable)return w({error:"setCustomVariable - no variables passed in"},"","","");var t=O(e.customVariable);if(!t||!t.customVariable)return w({error:"setCustomVariable - unable to find any custom variables to set"},"","","");e.customVariable=t.customVariable;var n=ne.buildRequestObj({rel:"custom-variables",type:"chat",needAuth:!0,requestType:"PUT",data:{customVariables:{customVariable:e.customVariable}}});return n?(n=U(n),n.success=function(t){if(S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:t}),t){var i={customVariable:e.customVariable};ee.publish({eventName:ge.onSetCustomVariable,data:i}),se.runSuccessCallback(e,i)}n=null},n.error=function(t){k(e,n,t,ge.onSetCustomVariable,"setCustomVariable  - server error")},S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:"SENDING REQUEST"}),le.issueCall(n)):w({error:"setCustomVariable - unable to find rel for request"},"","","")},ie.requestTranscript=function(e){var t,n=new RegExp(/[a-zA-Z0-9.-_]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i);t=typeof e===ye.STR?e:e.email;var i={transcriptRequest:{email:t}};if(e[fe.subject]&&(i.transcriptRequest[fe.subject]=e[fe.subject]),typeof t!==ye.STR||!n.test(e.email))return w({error:"requestTranscriptEmail - no variables passed in or invalid email"},"","","");var o=ne.buildRequestObj({rel:"transcript-with-subject-request",type:"chat",needAuth:!0,requestType:"PUT",data:i});return o||(i={email:t},o=ne.buildRequestObj({rel:"transcript-request",type:"chat",needAuth:!0,requestType:"PUT",data:i})),o?(o=U(o),o.success=function(t){if(S(pe.INFO,{originalRequest:e||"",sentRequest:o,response:t}),t){var n={email:e.email};ee.publish({eventName:ge.onTranscript,data:n}),se.runSuccessCallback(e,n)}o=null},o.error=function(t){k(e,o,t,ge.onTranscript,"requestTranscriptEmail  - server error")},S(pe.INFO,{originalRequest:e||"",sentRequest:o,response:"SENDING REQUEST"}),le.issueCall(o)):w({error:"requestTranscript - unable to find rel for request"},"","","")},ie.getExitSurvey=function(e){var t={};t=lpTag.utils.validateAndExtendConfigs([{obj:e,path:fe.sAPIId,prop:fe.sAPIId},{obj:e,type:ye.STR,path:fe.sName,prop:fe.sName}],t,!0),t=lpTag.utils.validateAndExtendConfigs([{obj:e,path:fe.engSkillId,prop:fe.engSkillId},{obj:e,type:ye.BOOL,path:fe.windowSurveyEnabled,prop:fe.windowSurveyEnabled}],t);var n=ne.buildRequestObj({rel:"exit-survey",type:"chat",needAuth:!0,requestType:"GET",queryParams:t});return n?(n=U(n),n.success=function(t){S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:t});var i,o=se.getPropertyFromObject(t,"body.survey");o&&(be.exitSurveyOn=!0,te.changeKeepAliveState(),i={survey:o},ee.publish({eventName:ge.onExitSurvey,data:i}),se.runSuccessCallback(e,i)),n=null},n.error=function(t){be.exitSurveyOn=!1,te.changeKeepAliveState(),k(e,n,t,ge.onExitSurvey,"getExitSurvey  - server error")},S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:"SENDING REQUEST"}),le.issueCall(n)):w({error:"getExitSurvey - unable to find rel for request"},"","","")},ie.submitExitSurvey=function(e){var t;if(t=e.survey&&e.survey.survey?e.survey.survey:e.survey,!t)return w({error:"submitExitSurvey - no survey passed in"},"","","");t=lpTag.utils.validateAndExtendConfigs([{obj:document,type:ye.STR,path:"referrer",prop:"chatReferrer"},{obj:navigator,path:fe.UA,prop:fe.UA}],t,!0);var n=ne.buildRequestObj({rel:"exit-survey",type:"chat",needAuth:!0,requestType:"PUT",data:{survey:t}});return n?(n=U(n),n.success=function(t){if(S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:t}),be.exitSurveyOn=!1,te.changeKeepAliveState(),t){var i=se.getResponseData(t);ee.publish({eventName:ge.onSubmitExitSurvey,data:i}),se.runSuccessCallback(e,i)}n=null},n.error=function(t){k(e,n,t,ge.onSubmitExitSurvey,"submitExitSurvey  - server error")},S(pe.INFO,{originalRequest:e||"",sentRequest:n,response:"SENDING REQUEST"}),le.issueCall(n)):w({error:"submitExitSurvey - unable to find rel for request"},"","","")},ie.cancelSurvey=function(){te.stopKeepAliveRequests()},ie.addLine=function(e){if(!e||!e.text)return w({error:"No text to send"},e,"","");var t=ne.buildRequestObj({rel:"events",needAuth:!0,type:"chat",requestType:"POST",data:{event:{"@type":"line",text:e.text}}});return t?(t=U(t),t.success=function(n){if(S(pe.INFO,{originalRequest:e,sentRequest:t,response:n}),n){var i={text:e.text};ee.publish({eventName:ge.onAddLine,data:i}),se.runSuccessCallback(e,i)}t=null},t.error=function(n){k(e,t,n,ge.onAddLine,"addLine  - server error")},S(pe.INFO,{originalRequest:e,sentRequest:t,response:"SENDING REQUEST"}),le.issueCall(t)):w({error:"addLine - unable to find rel for request"},e,"","")},ie.sendCollaboration=function(e){if(!e||"string"!=typeof e.command||"string"!=typeof e.subType)return w({error:"Missing collaboration events parameters"},e,"","");var t=W(e),n=ne.buildRequestObj({rel:"events",needAuth:!0,type:"chat",requestType:"POST",data:{event:t}});return n?(n=U(n),n.success=function(i){S(pe.INFO,{originalRequest:e,sentRequest:n,response:i}),i&&(t.info&&(t.info=F(t.info)),ee.publish({eventName:ge.onSendCollaboration,data:t}),se.runSuccessCallback(e,t)),n=null},n.error=function(t){k(e,n,t,ge.onSendCollaboration,"sendCollaboration  - server error")},S(pe.INFO,{originalRequest:e,sentRequest:n,response:"SENDING REQUEST"}),le.issueCall(n)):w({error:"sendCollaboration - unable to find rel for request"},e,"","")},ie.setVisitorTyping=function(e){if(!e)return w({error:"No object data passed"},"","","");if(typeof e.typing!==ye.BOOL||e.typing===be.typing)return w({error:"setVisitorTyping typing status missing, not a boolean or unchanged from previous update"},e,"","");be.typing=e.typing;var t=ne.buildRequestObj({rel:"visitor-typing",needAuth:!0,type:"visitor",requestType:"PUT",data:{visitorTyping:e.typing?"typing":"not-typing"}});return t?(t=U(t),t.success=function(n){if(S(pe.INFO,{originalRequest:e,sentRequest:t,response:n}),n){var i={typing:e.typing};ee.publish({eventName:ge.onSetVisitorTyping,data:i}),se.runSuccessCallback(e,i)}t=null},t.error=function(n){k(e,t,n,ge.onSetVisitorTyping,"setVisitorTyping  - server error")},S(pe.INFO,{originalRequest:e,sentRequest:t,response:"SENDING REQUEST"}),le.issueCall(t)):w({error:"setVisitorTyping - unable to find rel for request"},e,"","")},ie.endChat=function(e){var t=ne.buildRequestObj({rel:"events",type:"chat",needAuth:!0,requestType:"POST",data:{event:{"@type":"state",state:ie.chatStates.ENDED}}});return t&&be.chatInProgress?(t=U(t),t.success=function(n){if(S(pe.INFO,{originalRequest:e,sentRequest:t,response:n}),n){var i=Y(ie.chatStates.ENDED);J(i),se.runSuccessCallback(e,i)}t=null},t.error=function(n){k(e,t,n,[ge.onState],"endChat - server error")},e&&e.disposeVisitor&&ie.disposeVisitor(),S(pe.INFO,{originalRequest:e,sentRequest:t,response:"SENDING REQUEST"}),le.issueCall(t)):w({error:"endChat - unable to find rel for request, or chat not active"},e,"","")},ie.setVisitorName=function(e){if(!e)return w({error:"No object data passed"},"","","");var t="";if(typeof e.visitorName!==ye.STR||e.visitorName===be.visitorName)return w({error:"setVisitorName missing visitorName or unchanged from previous update"},e,"","");t=be.visitorName,be.visitorName=e.visitorName;var n=ne.buildRequestObj({rel:"visitor-name",needAuth:!0,type:"visitor",requestType:"PUT",data:{visitorName:e.visitorName}});return n?(n=U(n),n.success=function(t){if(S(pe.INFO,{originalRequest:e,sentRequest:n,response:t}),t){var i={visitorName:e.visitorName};ee.publish({eventName:ge.onVisitorName,data:i}),se.runSuccessCallback(e,i)}n=null},n.error=function(i){be.visitorName=t,k(e,n,i,ge.onVisitorName,"setVisitorName  - server error")},S(pe.INFO,{originalRequest:e,sentRequest:n,response:"SENDING REQUEST"}),le.issueCall(n)):w({error:"setVisitorName - unable to find rel for request"},e,"","")},ie.getAgentTyping=function(){return be.agentTyping},ie.getVisitorName=function(){return be.visitorName},ie.getState=function(){return be.state},ie.getAgentLoginName=function(){return be.agentName},ie.getAgentId=function(){return be.agentId},ie.agentPictureUrl=function(){return be.agentPictureUrl},ie.getRtSessionId=function(){return be.rtSessionId||null},ie.getConfig=function(){var e={};for(var t in we)we.hasOwnProperty(t)&&(e[t]=we[t]);return e},ie.getSessionKey=function(){return be.chatSessionKey},ie.setDebugMode=function(e){typeof e===ye.BOOL&&(Re=e,lpTag.utils.log.debug=e)},ie.unbind=function(e,t,n,i){return b(e,t,n,i)},l(),r(e)},lpTag.taglets.ChatOverRestAPI.prototype.chatStates={CHATTING:"chatting",WAITING:"waiting",ENDED:"ended",RESUMING:"resume",UNINITIALISED:"uninitialised",INITIALISED:"initialised",NOTFOUND:"notfound",PAUSECHAT:"paused",RESUMEPAUSEDCHAT:"resumepaused"},lpTag.taglets.ChatOverRestAPI.prototype.connectionStates={ACTIVE:"active",INACTIVE:"inactive"},define("lpChatV3",function(){}),define("leTagConfiguration",["settings"],function(e){e.liveperson.leTag.enabled===!0&&e.liveperson.leTag.loadedOnHost===!1&&(window.lpTag={},window.lpTag.autoStart=!1)}),define("leTag",["settings"],function(e){e.liveperson.leTag.enabled===!0&&e.liveperson.leTag.loadedOnHost===!1&&(window.lpTag=window.lpTag||{},"undefined"==typeof window.lpTag._tagCount?(window.lpTag={site:e.liveperson.accountNumber||"",section:lpTag.section||"",autoStart:lpTag.autoStart===!1?!1:!0,ovr:lpTag.ovr||{domain:"lptag-a.liveperson.net",tagjs:"tags-a.liveperson.net"},_v:"1.6.0",_tagCount:1,protocol:"https:",events:{bind:function(e,t,n){lpTag.defer(function(){lpTag.events.bind(e,t,n)},0)},trigger:function(e,t,n){lpTag.defer(function(){lpTag.events.trigger(e,t,n)},1)}},defer:function(e,t){0==t?(this._defB=this._defB||[],this._defB.push(e)):1==t?(this._defT=this._defT||[],this._defT.push(e)):(this._defL=this._defL||[],this._defL.push(e))},load:function(e,t,n){var i=this;setTimeout(function(){i._load(e,t,n)},0)},_load:function(e,t,n){var i=e;e||(i=this.protocol+"//"+(this.ovr&&this.ovr.domain?this.ovr.domain:"lptag.liveperson.net")+"/tag/tag.js?site="+this.site);var o=document.createElement("script");o.setAttribute("charset",t?t:"UTF-8"),n&&o.setAttribute("id",n),o.setAttribute("src",i),document.getElementsByTagName("head").item(0).appendChild(o)},init:function(){this._timing=this._timing||{},this._timing.start=(new Date).getTime();var e=this;window.attachEvent?window.attachEvent("onload",function(){e._domReady("domReady")}):(window.addEventListener("DOMContentLoaded",function(){e._domReady("contReady")},!1),window.addEventListener("load",function(){e._domReady("domReady")},!1)),"undefined"==typeof window._lptStop&&this.load()},start:function(){this.autoStart=!0},_domReady:function(e){this.isDom||(this.isDom=!0,this.events.trigger("LPT","DOM_READY",{t:e})),this._timing[e]=(new Date).getTime()},vars:lpTag.vars||[],dbs:lpTag.dbs||[],ctn:lpTag.ctn||[],sdes:lpTag.sdes||[],ev:lpTag.ev||[]},lpTag.init()):window.lpTag._tagCount+=1)}),define("views/virtual_assistant/components/liveperson",["jquery","jquery_ui","backbone","lpChatV3","leTagConfiguration","leTag","settings","scrollto"],function(e,t,n,i,o,a,s,r){_=window.CVUnderscore;var l=n.View.extend({el:".cv-va-bootstrap #cv-chat-content",submitID:"cv-live-chat-submit",entryID:"cv-live-chat-user-entry",bindEvent:"change:transactioncount",newLines:0,agentName:"Agent",activeChatSession:!1,launcherAppended:!1,proactiveLauncherAppended:!1,events:{"click #cv-live-chat-submit":"addLine"},surveyPrefixes:{question:"q_",checkbox:"cb_",radioButton:"rb_"},initialize:function(t){if("liveperson"===s.livechatVendor){this.pciSecureFormListener=function(){},this.$el.find("#lc-tab, #cv-live-chat-answer-history, #cv-live-chat-submit, #cv-live-chat-user-entry").remove(),(s.vaLcTabs===!1&&"true"===localStorage.getItem(s.businessName+"-cvVaActiveSession_lp")||"true"===localStorage.getItem(s.businessName+"-requestingChat_lp"))&&this.$el.find("#cv-chat-answer-history").remove(),this.$el.find(".cv-va-tabs-container").remove(),n.Model.prototype.initialize.call(this,t),this.model.on(this.bindEvent,this.render,this),window.leEngagementButtons=[];var i=!1,o=this;if(s.selectiveLauncherInjection.enabled===!0){if(s.selectiveLauncherInjection.url.length>0)for(var a=0;a<s.selectiveLauncherInjection.url.length;a++)window.location.href.indexOf(s.selectiveLauncherInjection.url[a])>-1&&(i=!0)}else i=!0;s.lcAvailabilityLauncher===!0&&s.liveperson.leTag.enabled===!1?(this.launcher=t.launcher,this.configureLiveChat()):s.lcAvailabilityLauncher===!0&&s.liveperson.leTag.enabled===!0&&i===!0?(this.launcher=t.launcher,setInterval(function(){var t=!1;if(s.liveperson.leTag.injectOnLauncher===!1){for(var n=0;n<s.liveperson.leTag.engagementButtons.length;n++)if(e(s.liveperson.leTag.engagementButtons[n]).length>0){e(s.liveperson.leTag.engagementButtons[n]+" .LPMcontainer").length>0?(window.liveChatStatus="online",o.launcherAppended===!1?(o.launcherAppended=!0,o.launcher.render(s.liveperson.leTag.engagementButtons[n])):o.launcherAppended===!0&&o.launcher.show()):0===e(s.liveperson.leTag.engagementButtons[n]+" .LPMcontainer").length&&(window.liveChatStatus="offline",o.launcherAppended===!0&&o.launcher.hide());break}}else if(s.liveperson.leTag.injectOnLauncher===!0){for(var i=0;i<s.liveperson.leTag.engagementButtons.length;i++)e(s.liveperson.leTag.engagementButtons[i]).length>0&&(e(s.liveperson.leTag.engagementButtons[i]+" .LPMcontainer").length>0?(t=!1,window.leEngagementButtons.forEach(function(e){e.engagementId===s.liveperson.leTag.engagementButtons[i]&&(e.status="online",t=!0)}),t===!1&&window.leEngagementButtons.push({engagementId:s.liveperson.leTag.engagementButtons[i],status:"online",rendered:!1})):0===e(s.liveperson.leTag.engagementButtons[i]+" .LPMcontainer").length&&(t=!1,window.leEngagementButtons.forEach(function(e){e.engagementId===s.liveperson.leTag.engagementButtons[i]&&(e.status="offline",t=!0)}),t===!1&&window.leEngagementButtons.push({engagementId:s.liveperson.leTag.engagementButtons[i],status:"offline",rendered:!1})));for(var a=0;a<window.leEngagementButtons.length;a++)window.leEngagementButtons[a].rendered===!1&&"online"===window.leEngagementButtons[a].status&&e(window.leEngagementButtons[a].engagementId+" .LPMcontainer img").length>0&&(window.leEngagementButtons[a].rendered=!0,o.launcher.render(e(window.leEngagementButtons[a].engagementId+" .LPMcontainer"),!0));e(".LPMimage").each(function(t){e(this).attr("src").indexOf("invitation/need_help_on.gif")>-1&&o.proactiveLauncherAppended===!1&&(o.proactiveLauncherAppended=!0,o.launcher.render(e(this).parent().parent(),!0,{height:e(this).height()+"px"}))})}},0)):s.liveperson.leTag.enabled===!0&&i===!0&&setInterval(function(){var t=!1;if(s.liveperson.leTag.injectOnLauncher===!1){for(var n=0;n<s.liveperson.leTag.engagementButtons.length;n++)if(e(s.liveperson.leTag.engagementButtons[n]).length>0){e(s.liveperson.leTag.engagementButtons[n]+" .LPMcontainer").length>0?window.liveChatStatus="online":0===e(s.liveperson.leTag.engagementButtons[n]+" .LPMcontainer").length&&(window.liveChatStatus="offline");break}for(var i=0;i<s.liveperson.leTag.engagementButtons.length;i++)e(s.liveperson.leTag.engagementButtons[i]).length>0&&(e(s.liveperson.leTag.engagementButtons[i]+" .LPMcontainer").length>0?(t=!1,window.leEngagementButtons.forEach(function(e){e.engagementId===s.liveperson.leTag.engagementButtons[i]&&(e.status="online",t=!0)}),t===!1&&window.leEngagementButtons.push({engagementId:s.liveperson.leTag.engagementButtons[i],status:"online",rendered:!1})):0===e(s.liveperson.leTag.engagementButtons[i]+" .LPMcontainer").length&&(t=!1,window.leEngagementButtons.forEach(function(e){e.engagementId===s.liveperson.leTag.engagementButtons[i]&&(e.status="offline",t=!0)}),t===!1&&window.leEngagementButtons.push({engagementId:s.liveperson.leTag.engagementButtons[i],status:"offline",rendered:!1})))}},0),s.liveperson.leTag.showLauncher===!1&&setInterval(function(){for(var t=0;t<s.liveperson.leTag.engagementButtons.length;t++)e(s.liveperson.leTag.engagementButtons[t]+" .LPMcontainer img").hide(),e(s.liveperson.leTag.engagementButtons[t]+" .LPMcontainer").css({background:"none"})},0),window.CVMobile===!0?(e(".cv-va-bootstrap #cv-lp-secure-form-container").hide(),e(".cv-va-bootstrap #cv-lp-secure-form-panel").removeClass("collapse width"),e(".cv-va-bootstrap #cv-lp-secure-form-header a i").removeClass("fa-arrow-circle-right").addClass("fa-arrow-circle-left"),e(".cv-va-bootstrap #cv-lp-secure-form-header a").addClass("cv-lp-secure-form-header-icon").on("click",function(t){t.preventDefault(),e(".cv-va-bootstrap #cv-lp-secure-form-container").hide()})):e(".cv-va-bootstrap #cv-lp-secure-form-header a").attr({"data-cv-toggle":"collapse","data-cv-target":"#cv-lp-secure-form-panel","aria-expanded":"false"}).on("click",function(e){e.preventDefault()}),e('.cv-va-bootstrap #cv-lp-end-chat-confirmation input[value="Yes"]').on("click",function(){s.liveperson.surveys.exitSurveysEnabled&&o.model.get("exitsurvey")?(o.$el.find("#cv-live-chat-user-entry").hide(),o.$el.find("#cv-live-chat-submit").hide(),o.$el.find("#cv-live-chat-answer-history").hide(),o.$el.find("#cv-lp-end-chat-confirmation").hide(),o.$el.find("#cv-chat-loader-layer").show(),o.lpChat.getExitSurvey({surveyName:o.model.get("exitsurvey"),success:o.lpChat.handleExitSurvey,error:o.lpChat.noSurveyRecieved,context:o.lpChat}),o.lpChat.endChat({success:function(){console.log("ended chat")},disposeVisitor:!0})):o.endChat()}),e('.cv-va-bootstrap #cv-lp-end-chat-confirmation input[value="No"]').on("click",function(){e(".cv-va-bootstrap #cv-lp-end-chat-confirmation").hide()})}"true"===localStorage.getItem(s.businessName+"-cvVaActiveSession_lp")||"true"===localStorage.getItem(s.businessName+"-requestingChat_lp")?(setTimeout(function(){o.configureLiveChat()},1e3),this.render(this.model)):s.lcAvailabilityLauncher===!1&&s.liveperson.leTag.enabled===!1&&o.configureLiveChat(),1===o.$el.find("#cv-lp-survey").length&&o.rebindSurveyEvents()},configureLiveChat:function(){this.lpChat=new lpTag.taglets.ChatOverRestAPI({lpNumber:s.liveperson.accountNumber,appKey:s.liveperson.APIKey,onAvailability:e.proxy(this._onAvailability,this),onInfo:e.proxy(this._onInfo,this),onLoad:e.proxy(this._onLoad,this),onInit:e.proxy(this._onInit,this),onLine:e.proxy(this._onLine,this),onState:e.proxy(this._onState,this),onStart:e.proxy(this._onStart,this),onStop:e.proxy(this._onStop,this),onAgentTyping:e.proxy(this._onAgentTyping,this),onRequestChat:e.proxy(this._onRequestChat,this),onCollaboration:e.proxy(this._onCollaboration,this),onPreChatSurvey:e.proxy(this._onPreChatSurvey,this),onOfflineSurvey:e.proxy(this._onOfflineSurvey,this),onExitSurvey:e.proxy(this._onExitSurvey,this)})},render:function(t){var n=this;if(n.model=t,"true"===localStorage.getItem(s.businessName+"-cvVaActiveSession_lp")&&this.activeChatSession===!1||"true"===localStorage.getItem(s.businessName+"-requestingChat_lp"))this.activeChatSession=!0,n.launchLC();else{var i,o=t.get(s.liveperson.leTag.lpEngagementIdETV)||"",a=(t.get("conversationhistory"),t.get("pcs")),r=!0;if(""!==o&&(o=JSON.parse(o)),void 0!==t.get(s.livechatOfferETV)&&s.liveperson.leTag.enabled===!1)i=t.get(s.livechatOfferETV).toLowerCase(),"true"===i&&this.activeChatSession===!1&&window.cvCrossStorage.onConnect().then(function(){window.cvCrossStorage.del("cvSessionEndedExternal_VA"),localStorage.removeItem("cvSessionEndedExternal_VA"),s.liveperson.monitoring&&s.liveperson.surveys.offlineSurveysEnabled&&t.get("offlinesurvey")&&0===e("#cv-va-le-api-engagement-button").length&&(r=!1),n.onEstimatedWaitTimeSuccess=function(e){-1===e.estimatedWaitTime&&(r=!1),!r&&s.liveperson.surveys.offlineSurveysEnabled&&t.get("offlinesurvey")?n.showOfflineSurvey():s.liveperson.surveys.pcsEnabled&&a&&r?(n.$el.find("#cv-chat-user-entry").hide(),n.$el.find("#cv-chat-submit").hide(),n.$el.find("#cv-chat-answer-history").hide(),n.lpChat.getPreChatSurvey({surveyName:a,success:n.lpChat.populateSurvey,error:n.lpChat.noSurvey,context:n.lpChat})):(window.cvCrossStorage.del(s.businessName+"-lpSessionEndedExternal"),window.cvCrossStorage.set(s.businessName+"-requestingChat_lp","true"),localStorage.removeItem(s.businessName+"-lpSessionEndedExternal"),localStorage.setItem(s.businessName+"-requestingChat_lp","true"),n.launchLC())},n.onEstimatedWaitTimeError=function(e){console.log(e),window.cvCrossStorage.del(s.businessName+"-lpSessionEndedExternal"),window.cvCrossStorage.set(s.businessName+"-requestingChat_lp","true"),localStorage.removeItem(s.businessName+"-lpSessionEndedExternal"),localStorage.setItem(s.businessName+"-requestingChat_lp","true"),n.launchLC()},s.liveperson.surveys.pcsEnabled&&t.get("pcs")?s.liveperson.surveys.pcsEnabled&&a?(n.$el.find("#cv-chat-user-entry").hide(),
n.$el.find("#cv-chat-submit").hide(),n.$el.find("#cv-chat-answer-history").hide(),n.lpChat.getPreChatSurvey({surveyName:a,success:n.lpChat.populateSurvey,error:n.lpChat.noSurvey,context:n.lpChat})):(window.cvCrossStorage.del(s.businessName+"-lpSessionEndedExternal"),window.cvCrossStorage.set(s.businessName+"-requestingChat_lp","true"),localStorage.removeItem(s.businessName+"-lpSessionEndedExternal"),localStorage.setItem(s.businessName+"-requestingChat_lp","true"),n.launchLC()):n.lpChat.getEstimatedWaitTime({skill:t.get("livechatskill"),success:n.onEstimatedWaitTimeSuccess,error:n.onEstimatedWaitTimeError,context:n})});else if(void 0!==t.get(s.livechatOfferETV)&&s.liveperson.leTag.enabled===!0&&("online"===window.liveChatStatus||void 0===window.liveChatStatus)&&(i=t.get(s.livechatOfferETV).toLowerCase(),n=this,"true"===i&&this.activeChatSession===!1)){var l=function(){s.liveperson.leTag.loadedOnHost===!1&&window.lpTag.start(),window.lpTag.loaded===!0&&window.lpTag.started===!0&&n.activeChatSession===!1&&e(".lp_desktop").is(":visible")===!1?setTimeout(function(){n.activeChatSession=!0,window.leTagContainerInterval=setInterval(function(){for(var t=0;t<o.length;t++)if(e(o[t]).length>0&&e(o[t]+" .LPMcontainer").length>0){e(o[t]+" .LPMcontainer").trigger("click");break}},0),window.leTagClearInterval=setInterval(function(){e(".lp_desktop").is(":visible")===!0&&(window.clearInterval(window.leTagContainerInterval),s.liveperson.leTag.closeVAOnLaunch===!0&&(e("#cv-chat-container").modal("hide"),void 0!==n.launcher&&n.launcher.hide(),window.forcesessionclose===!0&&(window.resetVA(),window.forcesessionclose=void 0)),window.clearInterval(window.leTagClearInterval))},0)},500):n.activeChatSession===!1&&e(".lp_desktop").is(":visible")===!1?setTimeout(function(){l()},0):e(".lp_desktop").is(":visible")===!0&&s.liveperson.leTag.closeVAOnLaunch===!0&&(n.launcher.remove(),e("#cv-chat-container").modal("hide"),setTimeout(function(){window.forcesessionclose===!0&&(window.resetVA(),window.forcesessionclose=void 0)},500))};l()}}},_onAvailability:function(e){e.availability===!0&&this.launcherAppended===!1&&s.lcAvailabilityLauncher===!0&&(this.launcherAppended=!0,this.launcher.render(s.appendLauncherTo))},_onLoad:function(e){},_onInit:function(e){var t=this;s.launcherInjection===!0&&s.lcAvailabilityLauncher===!0&&setInterval(function(){t.lpChat.getAvailabilty({maxWaitTime:0})},s.availabiltyInterval)},_onInfo:function(e){this.refreshTimeout(),void 0!==e.agentName&&""!==e.agentName.trim()&&(this.agentName=e.agentName)},_onLine:function(t){console.log(t);var n=this;this.refreshTimeout(),this.saveLpSessionVariables();for(var i=0;i<t.lines.length;i++){var o,a,r,l,c=t.lines[i];0!==c.systemMessageId&&"0"!==c.systemMessageId&&c.text&&0!==c.text.length&&(c.time?(l=new Date(c.time),r=l.getHours()+":"+(l.getMinutes()<10?"0":"")+l.getMinutes()):(a=new Date,r=a.getHours()+":"+(a.getMinutes()<10?"0":"")+a.getMinutes()),"visitor"!==c.source?(o=e("<div>").addClass("cv-live-chat-info"),o.html(c.text.replace("<div","<span").replace("</div>","</span>")),this.$el.find("#cv-live-chat-answer-history").append(o),"system"==c.source&&(o.addClass("cv-live-chat-system"),s.lcTimeStamp!==!0&&(r=""),o.after('<span class="time-stamp-system">Info&nbsp'+r+"</span>")),"agent"==c.source&&(o.addClass("cv-live-chat-agent"),this.$el.find(".cv-live-chat-agent").last().wrap('<div class="cv-col-xs-12"></div>'),this.$el.find(".cv-live-chat-agent").last().after('<span class="time-stamp-info">'+c.by+"&nbsp"+r+"</span>"),this.$el.find(".cv-live-chat-agent").addClass("ts-shim")),this.$el.find("#cv-live-chat-answer-history").is(":visible")||(this.newLines++,this.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> <span style="margin-right:10px;">Back to Live Chat </span>'+this.newLines+' <i class="fa fa-comment lc-fa-comment" aria-hidden="true"></i>'),s.vaLcTabs===!0&&this.$el.find("#lc-tab a").html("Live Chat "+this.newLines+' <i class="fa fa-comment" aria-hidden="true"></i><i class="fa fa-times lc-close-cvbtn"></i></a>'))):(o=e("<div>").addClass("cv-live-chat-user"),o.html(c.text),this.$el.find("#cv-live-chat-answer-history").append(o),this.$el.find(".cv-live-chat-user").last().wrap('<div class="cv-col-xs-12"></div>'),"visitor"==c.source&&(this.$el.find(".cv-live-chat-user").last().after('<span class="time-stamp-user">You '+r+"</span>"),this.$el.find(".cv-live-chat-user").addClass("ts-shim"))))}"none"===n.$el.find("#cv-live-chat-answer-history").css("display")?setTimeout(function(){n.$el.find("#cv-live-chat-answer-history").show(),n.$el.find("#cv-live-chat-answer-history").scrollTo("max",{duration:0,onAfter:function(){n.$el.find("#cv-chat-loader-layer").hide()}})},300):n.$el.find("#cv-live-chat-answer-history").scrollTo("max",{duration:500})},_onState:function(e){this.chatState=e.state,this.saveLpSessionVariables()},_onStart:function(t){var n=this;this.$el.find("#cv-chat-user-entry").parent().append('<input id="'+this.entryID+'" type="text" name="entry" autocomplete="off" class="cv-form-control cv-chat-user-entry" style="display: none;" placeholder="'+s.defaultPlaceholderText+'">'),s.liveperson.cursorAtEndOnFocus===!0&&n.$el.find("#cv-live-chat-user-entry").focus(function(t){var i=this;n.$el.find("#cv-live-chat-user-entry")[0].scrollWidth>n.$el.find("#cv-live-chat-user-entry").innerWidth()&&(setTimeout(function(){i.setSelectionRange(i.value.length,i.value.length)},0),e(this).scrollLeft(1e4))}),(this.$el.find("#cv-live-chat-answer-history").is(":visible")||s.vaLcTabs===!1)&&this.$el.find("#"+this.entryID).show(),this.$el.find("#"+this.entryID).css({"font-size":s.inputFontSize,"border-radius":s.inputBorderRadius}),this.$el.find("#"+this.entryID).keyup(function(e){n.keyPress(e,n)}),e(".lc-close-cvbtn").on("click",function(e){e.preventDefault(),n.endChat()})},_onStop:function(e){console.log("onstop");var t=this;this.activeChatSession=!1,window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(s.businessName+"-cvVaActiveSession_lp",s.businessName+"-cvLpVisitorChatRels",s.businessName+"-cvLpVisitorResumeMode",s.businessName+"-cvLpVisitorSessionVars")}).then(function(){localStorage.removeItem(s.businessName+"-cvVaActiveSession_lp"),sessionStorage.removeItem("lpVisitorChatRels"+s.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorResumeMode"+s.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorSessionVars"+s.liveperson.accountNumber),t.userCloseLC!==!0&&(window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(s.businessName+"-lpSessionEndedExternal","true")}),localStorage.setItem(s.businessName+"-lpSessionEndedExternal","true")),t.saveLpSessionVariables()}),this.$el.find("#cv-live-chat-submit").prop("disabled",!0),this.$el.find("#cv-live-chat-user-entry").remove()},_onAgentTyping:function(e){this.$el.find("#cv-chat-form").before('<span class="cv-live-chat-agent-typing">'+this.agentName+" is typing...</span>"),e.agentTyping===!0&&this.$el.find("#cv-live-chat-user-entry").is(":visible")?this.$el.find(".cv-live-chat-agent-typing").show():this.$el.find(".cv-live-chat-agent-typing").remove()},_onRequestChat:function(t){var n,i,o,a,r,l,c=this;t.error?(s.liveperson.surveys.offlineSurveysEnabled&&c.model.get("offlinesurvey")?c.showOfflineSurvey():(n=e("<div>").addClass("cv-live-chat-info"),n.html(decodeURIComponent(s.liveperson.unavailableMessage)),n.addClass("cv-live-chat-system"),c.$el.find("#cv-live-chat-answer-history").show(),this.$el.find("#cv-live-chat-answer-history").append(n),i=new Date,o="",s.lcTimeStamp===!0&&(o=i.getHours()+":"+(i.getMinutes()<10?"0":"")+i.getMinutes()),n.after('<span class="time-stamp-system">Info&nbsp'+o+"</span>"),a=this.$el.find(".cv-live-chat-info").get(-2),r=e(a).next(".cv-live-chat-info"),e(r).remove("div"),l=e(r).text(),e(a).append('<br><span dir="ltr">'+l+"</span>")),window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(s.businessName+"-requestingChat_lp",s.businessName+"-cvVaActiveSession_lp",s.businessName+"-cvLpVisitorChatRels",s.businessName+"-cvLpVisitorResumeMode",s.businessName+"-cvLpVisitorSessionVars"),window.cvCrossStorage.set(s.businessName+"-lpSessionEndedExternal","true")}),localStorage.removeItem(s.businessName+"-requestingChat_lp"),localStorage.removeItem(s.businessName+"-cvVaActiveSession_lp"),sessionStorage.removeItem("lpVisitorChatRels"+s.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorResumeMode"+s.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorSessionVars"+s.liveperson.accountNumber),localStorage.setItem(s.businessName+"-lpSessionEndedExternal","true")):(c.activeChatSession=!0,window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(s.businessName+"-requestingChat_lp"),window.cvCrossStorage.set(s.businessName+"-cvVaActiveSession_lp","true")}),localStorage.removeItem(s.businessName+"-requestingChat_lp"),localStorage.setItem(s.businessName+"-cvVaActiveSession_lp","true"),s.vaLcTabs===!1&&this.$el.find("#cv-chat-answer-history").hide()),this.$el.find("#cv-chat-loader-layer").hide(),console.log(t)},_onCollaboration:function(t){var n=this;if(console.log(t),"leSecureForm"===t.collaboration[0].subType&&"send"===t.collaboration[0].command){window.CVMobile===!0?n.$el.find("#cv-lp-secure-form-container").hide():n.$el.find("#cv-lp-secure-form-panel").collapse("hide"),n.$el.find("#cv-lp-secure-form-body").empty();var i,o,a,r=t.collaboration[0]["@id"],l=s.liveperson.accountNumber,c=t.collaboration[0].info.chatId,u=t.collaboration[0].info.submitOtk,d=t.collaboration[0].info.getOtk,h=t.collaboration[0].info.uniqueId,p=t.collaboration[0].info.secureFormName,v=t.collaboration[0].info.secureFormId,f='<iframe class="lp_secure_form_iframe" src="https://tokenizer.liveperson.net/pcigw/pci_dynamic_le.jsp?siteid=SITEIDVAR&amp;redirect=https%3A%2F%2Ftokenizer.liveperson.net%2Fpcigw%2Fpci_dynamic_submitted_le.html&amp;css=%257B%25221%2522%253A%257B%2522bc%2522%253A%2522%2523FFFFFF%2522%252C%2522f%2522%253A%2522Arial%252CHelvetica%252Csans-serif%2522%252C%2522c%2522%253A%2522%25236D6E70%2522%257D%252C%25222%2522%253A%257B%2522bc%2522%253A%2522%25230363ad%2522%252C%2522c%2522%253A%2522%2523FFFFFF%2522%257D%257D&amp;hideLogo=false&amp;otkJson={&quot;siteId&quot;:&quot;SITEIDVAR&quot;,&quot;chatId&quot;:&quot;CHATIDVAR&quot;}&amp;lang=en-US&amp;otk=SUBMITOTKVAR&amp;formOtk=FORMOTKVAR" aria-label="Credit Card Information" style="width: 100%; height: 100%; display: block;" frameBorder="0"></iframe>';f=f.replace(/SITEIDVAR/g,l).replace("CHATIDVAR",c).replace("SUBMITOTKVAR",u).replace("FORMOTKVAR",d),n.$el.find("#cv-lp-secure-form-body").append(f),n.lpChat.sendCollaboration({command:"received",subType:"leSecureForm",info:{uniqueId:h,secureFormName:p,secureFormId:v,sequenceId:r}}),i=e("<div>").addClass("cv-live-chat-info");var m=e("<a>").attr("href","#").text(t.collaboration[0].info.secureFormName);window.CVMobile===!1&&m.attr({"data-cv-toggle":"collapse","data-cv-target":"#cv-lp-secure-form-panel","aria-expanded":"false"}),i.html(t.collaboration[0].by+" has sent you a Secure Form: ").append(m),i.find("a").on("click",function(t){t.preventDefault(),e(this).data("loaded")?window.CVMobile===!0&&e("#cv-lp-secure-form-container").show():(e(this).data("loaded","true"),window.CVMobile===!0&&e("#cv-lp-secure-form-container").show(),window.removeEventListener("message",n.pciSecureFormListener,!1),n.pciSecureFormListener=function(e){var t;"object"==typeof e.data?t=e.data:"string"==typeof e.data&&(t=JSON.parse(e.data)),"https://tokenizer.liveperson.net"===e.origin&&console.log(t),"https://tokenizer.liveperson.net"===e.origin&&t.state&&("viewed"===t.state?n.lpChat.sendCollaboration({command:"viewed",subType:"leSecureForm",info:{uniqueId:h,secureFormName:p,secureFormId:v,sequenceId:r}}):"submit"===t.state&&t.token&&(n.lpChat.sendCollaboration({command:"submit",subType:"leSecureForm",info:{uniqueId:h,secureFormName:p,secureFormId:v,sequenceId:r,formUuid:t.token,gatewayDomain:t.gatewayDomain}}),window.removeEventListener("message",n.pciSecureFormListener,!1),n.$el.find("#cv-lp-secure-form-body").empty().append('<div style="text-align: center;position: relative;top: 43%;transform: translateY(-50%);"><i class="fa fa-lock" aria-hidden="true"style="font-size: 38px;"></i><p>The form has been submitted successfully. </br> To protect your information, submitted forms cannot be reopened.</p></div>'),setTimeout(function(){window.CVMobile===!0?n.$el.find("#cv-lp-secure-form-container").hide():n.$el.find("#cv-lp-secure-form-panel").collapse("hide")},2e3)))},window.addEventListener("message",n.pciSecureFormListener,!1))}),n.$el.find("#cv-live-chat-answer-history").append(i),i.addClass("cv-live-chat-agent"),n.$el.find(".cv-live-chat-agent").last().wrap('<div class="cv-col-xs-12"></div>'),o=new Date,a="",a=o.getHours()+":"+(o.getMinutes()<10?"0":"")+o.getMinutes(),n.$el.find(".cv-live-chat-agent").last().after('<span class="time-stamp-info">'+t.collaboration[0].by+"&nbsp"+a+"</span>"),n.$el.find(".cv-live-chat-agent").addClass("ts-shim"),n.$el.find("#cv-live-chat-answer-history").is(":visible")||(n.newLines++,n.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> <span style="margin-right:10px;">Back to Live Chat </span>'+n.newLines+' <i class="fa fa-comment lc-fa-comment" aria-hidden="true"></i>'),s.vaLcTabs===!0&&n.$el.find("#lc-tab a").html("Live Chat "+n.newLines+' <i class="fa fa-comment" aria-hidden="true"></i><i class="fa fa-times lc-close-cvbtn"></i></a>')),n.$el.find("#cv-live-chat-answer-history").scrollTo(n.$el.find("#cv-live-chat-answer-history").children().get(-1),500)}},_onPreChatSurvey:function(e){var t=this;console.log(e),t.$el.find("#cv-lp-survey").remove(),t.$el.find("#cv-chat-body").append('<div id="cv-lp-survey" data-survey-type="pcs" data-survey-id="'+e.survey.id+'" class="cv-chat-history"></div>'),t.renderQuestions(e.survey.questions||{},"pcs",e.survey.header,e.survey.id)},_onOfflineSurvey:function(e){var t=this;console.log(e),t.$el.find("#cv-lp-survey").remove(),t.$el.find("#cv-chat-body").append('<div id="cv-lp-survey" data-survey-type="offlinesurvey" data-survey-id="'+e.survey.id+'" class="cv-chat-history"></div>'),t.renderQuestions(e.survey.questions||{},"offlineSurvey",e.survey.header,e.survey.id)},_onExitSurvey:function(e){var t=this;console.log(e),t.$el.find("#cv-chat-loader-layer").hide(),t.$el.find("#cv-lp-survey").remove(),t.$el.find("#cv-chat-body").append('<div id="cv-lp-survey" data-survey-type="exitsurvey" data-survey-id="'+e.survey.id+'" class="cv-chat-history"></div>'),t.renderQuestions(e.survey.questions||{},"exitSurvey",e.survey.header,e.survey.id)},launchLC:function(t){var n=this,i=(n.model.get(s.liveperson.leTag.lpEngagementIdETV)||"",n.model.get("conversationhistory"));window.livechatTriggered!==!0&&(n.livechatrendered=!0,n.$el.find("#cv-chat-user-entry").hide(),n.$el.find("#cv-chat-submit").hide(),n.$el.find("#cv-chat-submit").parent().append('<button id="'+n.submitID+'" type="submit" class="cvbtn cvbtn-primary cvbtn-lg cvbtn-block small-border-radius" disabled="disabled">'+s.submitBtn.text+"</button>"),s.submitBtn.embedded.enabled===!0&&(n.$el.find("#cv-chat-user-entry").parent().append('<input id="'+this.entryID+'" type="text" name="entry" autocomplete="off" class="cv-form-control cv-chat-user-entry" style="display: none;" placeholder="'+s.defaultPlaceholderText+'">'),n.$el.find("#"+this.entryID).addClass("cv-tab-live-chat-user-entry"),n.$el.find("#"+this.entryID).css("border-radius",s.inputBorderRadius),n.$el.find("#"+n.submitID).show(),n.$el.find("#"+this.entryID).show(),n.$el.find("#"+n.submitID).addClass("cv-tab-live-chat-submit"),n.$el.find("#"+n.submitID).css({"border-radius":s.inputBorderRadius,"font-weight":s.submitBtn.fontWeight}),n.$el.find("#"+n.submitID).html("Send")),n.$el.find("#"+n.submitID).css({"background-color":s.submitBtn.backgroundColor,"border-color":s.submitBtn.backgroundColor,"border-radius":s.inputBorderRadius,"font-weight":s.submitBtn.fontWeight,"font-size":s.submitBtn.fontSize}),s.submitBtn.disabled.opacity===!0&&n.$el.find("#"+n.submitID+"[disabled]").css({opacity:1}),n.$el.find(".cv-chat-title").animate({color:s.modalHeader.backgroundColor},"fast"),setTimeout(function(){var o=function(){var o=n;if(n.$el.find("#cv-chat-answer-history").hide(),console.log("added cv live chat"),n.$el.find("#cv-chat-loader-layer").show(),n.$el.find("#cv-chat-body").append('<div id="cv-live-chat-answer-history" style="display:none;" class="cv-chat-history"></div>'),s.vaLcTabs===!0){o.$el.find("#cv-chat-header").after('<ul class="cv-row cv-va-tabs-container nav nav-tabs"></ul>'),o.$el.find(".cv-va-tabs-container").append('<li id="va-tab" class="col-xs-6"><span>Virtual Agent</span></li>'),o.$el.find(".cv-va-tabs-container").append('<li id="lc-tab" class="active col-xs-6"><span>Live Chat<i class="fa fa-times lc-close-cvbtn"></i></span></li>');var a=function(){n.endChat(),o.$el.find("#va-tab").trigger("click"),o.$el.find("#lc-tab, #cv-live-chat-answer-history, #cv-live-chat-submit, #cv-live-chat-user-entry").remove(),n.$el.find(".cv-va-tabs-container").hide(100),n.$el.find(".cv-va-tabs-container").remove()};o.$el.find(".lc-close-cvbtn").on("click",function(e){e.preventDefault(),a()}),o.$el.find("#va-tab").click(function(){o.newLines=0,o.$el.find("#va-tab").addClass("active"),o.$el.find("#lc-tab").removeClass("active"),o.$el.find("#cv-chat-user-entry").show(),o.$el.find("#cv-chat-submit").show(),o.$el.find("#cv-chat-submit").removeClass("disabled").addClass("enabled"),o.$el.find("#"+n.entryID).hide(),o.$el.find("#"+n.submitID).hide(),o.$el.find(".cv-chat-va-typing").show(),o.$el.find(".cv-live-chat-agent-typing").hide(),o.$el.find("#cv-live-chat-answer-history").hide(),o.$el.find("#cv-chat-answer-history").show(),o.$el.find(".lc-close-cvbtn").on("click",function(e){e.preventDefault(),a()})}),o.$el.find("#lc-tab").click(function(e){e.preventDefault(),o.newLines=0,o.$el.find("#lc-tab a").html('Live Chat<i class="fa fa-times lc-close-cvbtn"></i>'),o.$el.find(".lc-close-cvbtn").on("click",function(e){e.preventDefault(),a()}),o.$el.find("#lc-tab").addClass("active"),o.$el.find("#va-tab").removeClass("active"),o.$el.find("#"+n.entryID).show(),o.$el.find("#"+n.submitID).show(),o.$el.find("#cv-chat-submit").removeClass("enabled").addClass("disabled").prop("disabled","true"),o.$el.find("#cv-chat-submit").hide(),o.$el.find("#cv-chat-user-entry").hide(),o.$el.find(".cv-chat-va-typing").hide(),o.$el.find(".cv-live-chat-agent-typing").show(),o.$el.find("#cv-live-chat-answer-history").show(),o.$el.find("#cv-chat-answer-history").hide()})}else if(s.vaLcTabs===!1&&s.terminateVASession===!1)o.$el.find(".cv-chat-title").removeClass("cv-chat-title").addClass("cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Virtual Assistant'),o.$el.find(".cv-live-chat-active-title").css({color:s.modalHeader.color}),o.$el.find("#cv-chat-header .close").css({color:s.modalHeader.color,opacity:1}),o.$el.find("#cv-chat-header").css({"background-color":s.modalHeader.backgroundColor}),o.$el.find(".cv-live-chat-active-title").fadeIn(),o.$el.find(".cv-live-chat-active-title").click(function(){if(o.newLines=0,o.livechatrendered){o.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Live Chat');var e=n.model.get("connectors");_.isArray(e)&&e.length?(o.$el.find("#cv-chat-user-entry").hide(),o.$el.find("#cv-chat-submit").removeClass("disabled").removeAttr("disabled")):(o.$el.find("#cv-chat-submit").addClass("disabled").prop("disabled","true"),o.$el.find("#cv-chat-user-entry").show()),o.$el.find("#cv-chat-submit").show(),o.$el.find("#cv-chat-user-entry").val().trim().length>0||!o.$el.find("#cv-chat-user-entry").is(":visible")?o.$el.find("#cv-chat-submit").removeClass("disabled").addClass("enabled"):o.$el.find("#cv-chat-submit").removeClass("enabled").addClass("disabled"),o.$el.find("#"+n.entryID).hide(),o.$el.find("#"+n.submitID).hide()}else o.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Virtual Assistant'),o.$el.find("#cv-chat-user-entry").hide(),o.$el.find("#cv-chat-submit").hide(),o.$el.find("#cv-chat-submit").removeClass("enabled").addClass("disabled").prop("disabled","true"),o.activeChatSession?o.$el.find("#"+n.entryID).show():o.$el.find("#"+n.entryID).hide(),o.$el.find("#"+n.submitID).show();o.$el.find(".cv-chat-va-typing").toggle(),o.$el.find(".cv-live-chat-agent-typing").toggle(),o.$el.find("#cv-live-chat-answer-history").animate({opacity:"toggle"},"fast",function(){o.$el.find("#cv-chat-answer-history").animate({opacity:"toggle"},"fast")}),o.livechatrendered=!o.livechatrendered});else if(s.vaLcTabs===!1&&s.terminateVASession===!0&&(clearInterval(window.proactiveEndSessionInterval),o.activeChatSession))var r=setInterval(function(){o.$el.find("#"+o.entryID).length>0&&(o.$el.find("#"+o.entryID).show(),clearInterval(r))},20);var l=[];if(i){var c;c=JSON.parse(i),l.push("-----VA Transcript begins-----<br>");for(var u in c)if(c[u].user_entry&&(l.push("Visitor"),l.push("<p>"+c[u].user_entry+"</p>")),c[u].response_text){l.push("Virtual Agent");var d=c[u].response_text.replace(/<p>/g,"").replace(/<\/p>/g,"");l.push("<p>"+d+"</p>")}l.push("-----VA Transcript ends-----")}if("true"!==localStorage.getItem(s.businessName+"-cvVaActiveSession_lp"))if(s.liveperson.monitoring===!0)if(window.initializeEngagementData=function(e){console.log(e);var i;i=l.length>0?{preChatLines:l,skill:n.model.get("livechatskill"),LETagVisitorId:e.svid,LETagSessionId:e.ssid,LETagContextId:e.scid}:{skill:n.model.get("livechatskill"),LETagVisitorId:e.svid,LETagSessionId:e.ssid,LETagContextId:e.scid},s.liveperson.surveys.pcsEnabled&&t&&(i.survey=t),n.lpChat.requestChat(i)},e("#cv-va-le-api-engagement-button").length>0)e("#cv-va-le-api-engagement-button").trigger("click");else{if(n.$el.find("#cv-chat-loader-layer").hide(),n.$el.find("#cv-live-chat-answer-history").show(),s.liveperson.surveys.offlineSurveysEnabled&&n.model.get("offlinesurvey"))n.showOfflineSurvey();else{var h=e("<div>").addClass("cv-live-chat-info");h.html(decodeURIComponent(s.liveperson.unavailableMessage)),h.addClass("cv-live-chat-system"),n.$el.find("#cv-live-chat-answer-history").append(h),dt=new Date,time="",s.lcTimeStamp===!0&&(time=dt.getHours()+":"+(dt.getMinutes()<10?"0":"")+dt.getMinutes()),h.after('<span class="time-stamp-system">Info&nbsp'+time+"</span>"),previous=n.$el.find(".cv-live-chat-info").get(-2),current=e(previous).next(".cv-live-chat-info"),e(current).remove("div"),lastLine=e(current).text(),e(previous).append('<br><span dir="ltr">'+lastLine+"</span>")}window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(s.businessName+"-requestingChat_lp",s.businessName+"-cvVaActiveSession_lp",s.businessName+"-cvLpVisitorChatRels",s.businessName+"-cvLpVisitorResumeMode",s.businessName+"-cvLpVisitorSessionVars"),window.cvCrossStorage.set(s.businessName+"-lpSessionEndedExternal","true")}),localStorage.removeItem(s.businessName+"-requestingChat_lp"),localStorage.removeItem(s.businessName+"-cvVaActiveSession_lp"),sessionStorage.removeItem("lpVisitorChatRels"+s.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorResumeMode"+s.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorSessionVars"+s.liveperson.accountNumber),localStorage.setItem(s.businessName+"-lpSessionEndedExternal","true")}else{var p;p=l.length>0?{preChatLines:l,skill:n.model.get("livechatskill")}:{skill:n.model.get("livechatskill")},s.liveperson.surveys.pcsEnabled&&t&&(p.survey=t),n.lpChat.requestChat(p)}};o()},1e3))},createDivWrapper:function(e){var t,n=document.createElement("DIV");n.className="lp_question cv-form-group",n.setAttribute("id",this.surveyPrefixes.question+e.id),n.dataset.validationType=e.validationType;var i=document.createElement("DIV");if(t="Text Field"===e.type?"textfield":"Text Area"===e.type?"textarea":"Dropdown Box"===e.type?"dropdownbox":"Radio Button"===e.type?"radiobutton":"Radio Button (side by side)"===e.type?"radiobuttonh":"checkbox",n.dataset.questionType=t,e.mandatory){var o=document.createElement("SPAN");o.innerHTML="*",o.className="mandatory",i.appendChild(o),n.className+=" cv-lp-required";var a=document.createElement("DIV");a.className="cv-lp-required-input",a.innerHTML="Required!",a.style.display="none",n.insertBefore(a,n.childNodes[0])}return i.appendChild(document.createTextNode(e.label)),n.appendChild(i),n},bindEventElement:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},selectBind:function(t,n,i){e("#"+this.surveyPrefixes.question+i).find(".cv-lp-required-input").hide()},renderSelect:function(e){var t=this,n=document.createElement("SELECT");n.className="cv-form-control";var i=[{value:"Choose one..."}];i=i.concat(e.entry);for(var o=0;o<i.length;o++){var a=i[o],s=document.createElement("OPTION");s.setAttribute("value",a.value),s.innerHTML=a.value,(a.checked===!0||"true"==a.checked)&&s.setAttribute("selected","selected"),n.appendChild(s)}return t.bindEventElement(n,"change",function(i){t.selectBind(i,n,e.id)}),n},createRandomId:function(e){return e+Math.floor(1e4*Math.random())+"_"+Math.floor(1e4*Math.random())},renderCheckbox:function(e,t){for(var n=this,i=0;i<e.entry.length;i++){var o=e.entry[i],a=n.createRandomId("cb"),s=document.createElement("DIV");s.className="form-check checkbox-wrapper";var r=document.createElement("input");r.setAttribute("type","checkbox"),r.setAttribute("value",o.value),r.setAttribute("name",n.surveyPrefixes.checkbox+e.id),r.setAttribute("id",a),(o.checked===!0||"true"==o.checked)&&r.setAttribute("checked","checked"),s.appendChild(r);var l=document.createElement("LABEL");l.innerHTML=o.value,l.setAttribute("for",a),s.appendChild(l),t.appendChild(s)}return n.bindEventElement(t,"click",function(t){n.bindCheckboxes(e.id)}),t},bindCheckboxes:function(t){for(var n=this,i=[],o=document.getElementsByName(n.surveyPrefixes.checkbox+t),a=0;a<o.length;a++)(o[a].checked||1==o[a].getAttribute("checked")||"checked"==o[a].getAttribute("checked"))&&i.push(o[a].value);e("#"+n.surveyPrefixes.question+t).find(".cv-lp-required-input").hide()},renderRadioButtons:function(e,t){console.log("renderRadioButtons");for(var n=this,i=0;i<e.entry.length;i++){var o=e.entry[i],a=n.createRandomId("rb"),s=document.createElement("DIV");s.className="form-check checkbox-wrapper";var r=document.createElement("input");r.setAttribute("type","radio"),r.setAttribute("value",o.value),r.setAttribute("name",n.surveyPrefixes.radioButton+e.id),r.setAttribute("id",a),(o.checked===!0||"true"==o.checked)&&r.setAttribute("checked","checked"),s.appendChild(r);var l=document.createElement("LABEL");l.innerHTML=o.value,l.setAttribute("for",a),s.appendChild(l),t.appendChild(s)}return n.bindEventElement(t,"click",function(t){n.bindRadioButtons(t,e.id)}),t},bindRadioButtons:function(t,n){console.log("bindRadioButtons");var i=this;t=t||event;var o,a=t.target||t.srcElement;a.value?o=a.value:"LABEL"===a.nodeName&&(o=document.getElementById(a.getAttribute("for")).value),o&&e("#"+i.surveyPrefixes.question+n).find(".cv-lp-required-input").hide()},renderTextArea:function(t){console.log("renderTextArea");var n=this,i=document.createElement("TEXTAREA");return i.className="cv-form-control",t.lastKnownValue&&(i.value=t.lastKnownValue),n.bindEventElement(i,"keyup",function(){e("#"+n.surveyPrefixes.question+t.id).find(".cv-lp-required-input").hide()}),i},renderInputText:function(t){console.log("renderInputText");var n=this,i=document.createElement("INPUT");return"email"===t.validationType?i.setAttribute("type","email"):i.setAttribute("type","text"),t.lastKnownValue&&(i.value=t.lastKnownValue),n.bindEventElement(i,"keyup",function(){e("#"+n.surveyPrefixes.question+t.id).find(".cv-lp-required-input").hide()}),i},addSubmitButtonPCS:function(e){var t=this,n=document.createElement("BUTTON");n.innerHTML="Submit",t.bindEventElement(n,"click",function(){t.bindSubmitButtonPCS(e)}),n.className="surveyBtn cvbtn",t.$el.find("#cv-lp-cvbtn-group").append(n)},bindSubmitButtonPCS:function(e){var t=this;t.validateSurvey()&&window.cvCrossStorage.onConnect().then(function(){var n=t.getSurveyDataJSON("pcs",e);window.cvCrossStorage.del(s.businessName+"-lpSessionEndedExternal"),window.cvCrossStorage.set(s.businessName+"-requestingChat_lp","true"),localStorage.removeItem(s.businessName+"-lpSessionEndedExternal"),localStorage.setItem(s.businessName+"-requestingChat_lp","true"),t.$el.find("#cv-chat-loader-layer").show(),t.$el.find("#cv-lp-survey").remove(),window.CVSaveAttributes(),t.launchLC(n)})},rebindSurveyEvents:function(){var t=this,n=t.$el.find("#cv-lp-survey"),i=n.data("survey-type"),o=n.data("survey-id"),a=t.$el.find("#cv-lp-survey .surveyBtn").get(0);t.bindEventElement(a,"click",function(){1===n.length&&("pcs"===i?t.bindSubmitButtonPCS(o):"offlinesurvey"===i?t.bindSubmitButtonOfflineSurvey(o):"exitsurvey"===i&&t.bindSubmitButtonExitSurvey(o))}),n.find("input, textarea, select").on("change keyup",function(){e(this).closest(".lp_question").find(".cv-lp-required-input").hide()})},addCancelButtonPCS:function(e){},addSubmitButtonOfflineSurvey:function(e){var t=this,n=document.createElement("BUTTON");n.innerHTML="Submit",this.bindEventElement(n,"click",function(){t.bindSubmitButtonOfflineSurvey(e)}),n.className="surveyBtn cvbtn",t.$el.find("#cv-lp-cvbtn-group").append(n)},bindSubmitButtonOfflineSurvey:function(e){var t=this;t.validateSurvey()&&(t.lpChat.submitOfflineSurvey({survey:t.getSurveyDataJSON("offlineSurvey",e),success:t.lpChat.offlineSurveySubmitted,error:t.lpChat.offlineSubmitFailed,context:t.lpChat}),t.$el.find("#cv-lp-survey").html("<p>"+s.liveperson.surveys.submittedSurveyMsg+"<p>").css({"text-align":"center",display:"flex",display:"-webkit-flex","justify-content":"center","flex-direction":"column","-webkit-flex-direction":"column"}))},addCancelButtonOfflineSurvey:function(e){},addSubmitButtonExitSurvey:function(e){var t=this,n=document.createElement("BUTTON");n.innerHTML="Submit",this.bindEventElement(n,"click",function(){t.bindSubmitButtonExitSurvey(e)}),n.className="surveyBtn cvbtn",t.$el.find("#cv-lp-cvbtn-group").append(n)},bindSubmitButtonExitSurvey:function(e){var t=this;t.validateSurvey()&&(t.lpChat.submitExitSurvey({survey:t.getSurveyDataJSON("exitSurvey",e),success:t.lpChat.exitSurveySubmitted,error:t.lpChat.exitSurveyFailed,context:t.lpChat}),t.$el.find("#cv-lp-survey").html("<p>"+s.liveperson.surveys.submittedSurveyMsg+"<p>").css({"text-align":"center",display:"flex",display:"-webkit-flex","justify-content":"center","flex-direction":"column","-webkit-flex-direction":"column"}))},addCancelButtonExitSurvey:function(e){},renderQuestions:function(t,n,i,o){var a;a=!Array.isArray(t.question)&&t.question?[t.question]:t.question||[],console.log(a);var s=document.createDocumentFragment();console.log("document frag"+s);for(var r,l,c=this,u=0;u<a.length;u++){switch(r=a[u],console.log("create div wrapper"),l=c.createDivWrapper(r),r.type){case"Dropdown Box":l.appendChild(c.renderSelect(r)),e(l).find(".cv-lp-required-input").css("margin-top","-4px");break;case"Checkbox":c.renderCheckbox(r,l);break;case"Radio Button":case"Radio Button (side by side)":c.renderRadioButtons(r,l);break;case"Text Area":l.appendChild(c.renderTextArea(r));break;case"Text Field":l.appendChild(c.renderInputText(r)),e(l).find("input").attr({"aria-label":r.label}).addClass("cv-form-control")}s.appendChild(l)}setTimeout(function(){c.$el.find("#cv-chat-loader-layer").hide(),c.$el.find("#cv-lp-survey").append('<div id="cv-lp-survey-header">'+i+"</div>"),c.$el.find("#cv-lp-survey").append(s),c.$el.find("#cv-lp-survey").append('<div id="cv-lp-cvbtn-group"></div>'),"pcs"===n?c.addSubmitButtonPCS(o):"offlineSurvey"===n?a.length>0&&c.addSubmitButtonOfflineSurvey(o):"exitSurvey"===n&&a.length>0&&c.addSubmitButtonExitSurvey(o),window.CVSaveAttributes();
},1e3)},validateSurvey:function(){var t,n=this,i=n.$el.find(".lp_question.cv-lp-required"),o=!0;return i.each(function(n,i){var a=e(this);"checkbox"===a.data("question-type")||"radiobutton"===a.data("question-type")||"radiobuttonh"===a.data("question-type")?0===a.find("input:checked").length&&(a.find(".cv-lp-required-input").show(),o=!1):"dropdownbox"===a.data("question-type")?"Choose one..."===a.find("option:selected").val()&&(a.find(".cv-lp-required-input").show(),o=!1):("textfield"===a.data("question-type")||"textarea"===a.data("question-type"))&&("numeric"===a.data("validation-type")?(t=/[0-9]/g,t.test(a.find("input, textarea").val())||(a.find(".cv-lp-required-input").show(),o=!1)):"email"===a.data("validation-type")||a.find('input[aria-label="Please enter your email address:"]').length>0?(t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,t.test(a.find("input, textarea").val())||(a.find(".cv-lp-required-input").show(),o=!1)):a.find("input, textarea").val()||(a.find(".cv-lp-required-input").show(),o=!1))}),o},getSurveyDataJSON:function(t,n){var i=this,o=i.$el.find(".lp_question");console.log(o);var a,s={id:n},r=[];return a="answer",o.each(function(t,n){var o=e(this),s={},l=[];"checkbox"===o.data("question-type")||"radiobutton"===o.data("question-type")||"radiobuttonh"===o.data("question-type")?1===o.find("input:checked").length?(s.id=o.attr("id").replace(i.surveyPrefixes.question,""),s[a]=o.find("input:checked").val()):o.find("input:checked").length>1&&(s.id=o.attr("id").replace(i.surveyPrefixes.question,""),o.find("input:checked").each(function(t,n){l.push(e(this).val())}),s[a]=l):"dropdownbox"===o.data("question-type")?(s.id=o.attr("id").replace(i.surveyPrefixes.question,""),s[a]=o.find("option:selected").val(),"Choose one..."===s[a]&&(s[a]=void 0)):("textfield"===o.data("question-type")||"textarea"===o.data("question-type"))&&(s.id=o.attr("id").replace(i.surveyPrefixes.question,""),s[a]=o.find("input, textarea").val()),void 0!==s[a]&&r.push(s)}),1===r.length?s.question=r[0]:r.length>1&&(s.question=r),s},showOfflineSurvey:function(){var e=this;setTimeout(function(){e.$el.find("#cv-chat-user-entry").hide(),e.$el.find("#cv-chat-submit").hide(),e.$el.find("#cv-chat-answer-history").hide(),e.$el.find("#cv-live-chat-user-entry").hide(),e.$el.find("#cv-live-chat-submit").hide(),window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(s.businessName+"-lpSessionEndedExternal","true")}),localStorage.setItem(s.businessName+"-lpSessionEndedExternal","true"),e.lpChat.getOfflineSurvey({surveyName:e.model.get("offlinesurvey"),success:e.lpChat.handleOfflineSurvey,error:e.lpChat.errorGettingOfflineSurvey,context:e.lpChat})},1e3)},setButtonState:function(){var t=this,n=t.$el.find("#"+t.entryID).val();e.trim(n).length>0?t.$el.find("#"+t.submitID).removeClass("disabled").removeAttr("disabled"):t.$el.find("#"+t.submitID).addClass("disabled").prop("disabled","true")},addLine:function(e){e.preventDefault(),e.stopPropagation();var t=this;if(t.$el.find("#"+t.submitID).addClass("disabled").prop("disabled","true"),""!==this.$el.find("#"+this.entryID).val().trim()){var n=this.$el.find("#"+t.entryID).val();t.$el.find("#"+t.entryID).val(""),this.lpChat.addLine({text:n,error:function(e){console.log(e)},success:function(){}})}},keyPress:function(e,t){e.preventDefault(),t.setButtonState(),13==e.keyCode&&t.addLine(e)},endChat:function(t){console.log("endchat"),window.livechatTriggered=!1;var n=this;t&&(n=t),(n.activeChatSession||"true"===localStorage.getItem(s.businessName+"-lpSessionEndedExternal"))&&(s.liveperson.removeLPengagements===!0&&(clearInterval(window.CVVA.removeExternalEngagementsInterval),e(".LPMcontainer").each(function(t,n){e(this).removeClass("cv-va-hide-external-engagements")})),n.userCloseLC=!0,this.activeChatSession=!1,window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(s.businessName+"-cvVaBootstrapState",s.businessName+"-cvVaModel",s.businessName+"-cvVaStyles",s.businessName+"-cvVaInitCall",s.businessName+"-cvVaCollectionLength",s.businessName+"-cvVaTimestamp",s.businessName+"-lpSessionEndedExternal",s.businessName+"-cvVaActiveSession_lp",s.businessName+"-requestingChat_lp",s.businessName+"-cvLpVisitorChatRels",s.businessName+"-cvLpVisitorResumeMode",s.businessName+"-cvLpVisitorSessionVars")}).then(function(){localStorage.removeItem(s.businessName+"-cvVaActiveSession_lp"),localStorage.removeItem(s.businessName+"-requestingChat_lp"),sessionStorage.removeItem("lpVisitorChatRels"+s.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorResumeMode"+s.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorSessionVars"+s.liveperson.accountNumber),window.calledResetVAOnLP=!0,n.model.closeSession(),window.resetVA()}),this.$el.find("#cv-live-chat-user-entry").remove(),n.lpChat.endChat({success:function(){console.log("ended chat")},disposeVisitor:!0})),s.terminateVASession===!0&&(console.log("terminate session"),clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(s.businessName+"-cvVaBootstrapState"),localStorage.removeItem(s.businessName+"-cvVaModel"),localStorage.removeItem(s.businessName+"-cvVaStyles"),localStorage.removeItem(s.businessName+"-cvVaInitCall"),localStorage.removeItem(s.businessName+"-cvVaCollectionLength"),localStorage.removeItem(s.businessName+"-cvVaTimestamp"),window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.localInitCall=void 0,window.sessionFlushInterval=setInterval(function(){clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(s.businessName+"-cvVaBootstrapState"),localStorage.removeItem(s.businessName+"-cvVaModel"),localStorage.removeItem(s.businessName+"-cvVaStyles"),localStorage.removeItem(s.businessName+"-cvVaInitCall"),localStorage.removeItem(s.businessName+"-cvVaCollectionLength"),localStorage.removeItem(s.businessName+"-cvVaTimestamp"),window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.localInitCall=void 0},0),setTimeout(function(){window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(s.businessName+"-cvVaBootstrapState",s.businessName+"-cvVaModel",s.businessName+"-cvVaStyles",s.businessName+"-cvVaInitCall",s.businessName+"-cvVaCollectionLength",s.businessName+"-cvVaTimestamp",s.businessName+"-lpSessionEndedExternal")}).then(function(e){window.loadFromStorage=!1,clearInterval(window.sessionFlushInterval)})},150))},refreshTimeout:function(){window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(s.businessName+"-cvVaTimestamp",Date.now())}),localStorage.setItem(s.businessName+"-cvVaTimestamp",Date.now())},saveLpSessionVariables:function(){var e,t,n;sessionStorage.getItem("lpVisitorSessionVars"+s.liveperson.accountNumber)?(e=sessionStorage.getItem("lpVisitorChatRels"+s.liveperson.accountNumber),t=sessionStorage.getItem("lpVisitorResumeMode"+s.liveperson.accountNumber),n=sessionStorage.getItem("lpVisitorSessionVars"+s.liveperson.accountNumber),window.cvCrossStorage.onConnect().then(function(){window.cvCrossStorage.set(s.businessName+"-cvLpVisitorChatRels",e),window.cvCrossStorage.set(s.businessName+"-cvLpVisitorResumeMode",t),window.cvCrossStorage.set(s.businessName+"-cvLpVisitorSessionVars",n)})):window.cvCrossStorage.onConnect().then(function(){window.cvCrossStorage.del(s.businessName+"-cvLpVisitorChatRels",s.businessName+"-cvLpVisitorResumeMode",s.businessName+"-cvLpVisitorSessionVars")})},removeExternalEngagements:function(){e(".LPMcontainer").each(function(t,n){for(var i=!0,t=0;t<s.liveperson.removeLPengagementExceptions.length;t++)e(this).parent().attr("id")===s.liveperson.removeLPengagementExceptions[t]&&(i=!1);i&&e(this).remove()})}});return l}),function(e,t,n){function i(t,n){var i,o;if(e.isArray(t)){for(i=t.length-1;i>=0;i--)o=t[i],"string"===e.type(o)&&l.transports[o]||(n.log("Invalid transport: "+o+", removing it from the transports list."),t.splice(i,1));0===t.length&&(n.log("No transports remain within the specified transport array."),t=null)}else if(l.transports[t]||"auto"===t){if("auto"===t&&l._.ieVersion<=8)return["longPolling"]}else n.log("Invalid transport: "+t.toString()+"."),t=null;return t}function o(e){return"http:"===e?80:"https:"===e?443:void 0}function a(e,t){return t.match(/:\d+$/)?t:t+":"+o(e)}function s(t,n){var i=this,o=[];i.tryBuffer=function(n){return t.state===e.signalR.connectionState.connecting?(o.push(n),!0):!1},i.drain=function(){if(t.state===e.signalR.connectionState.connected)for(;o.length>0;)n(o.shift())},i.clear=function(){o=[]}}var r={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if("function"!=typeof e)throw new Error(r.nojQuery);var l,c,u="complete"===t.document.readyState,d=e(t),h="__Negotiate Aborted__",p={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},v=function(e,n){if(n!==!1){var i;"undefined"!=typeof t.console&&(i="["+(new Date).toTimeString()+"] SignalR: "+e,t.console.debug?t.console.debug(i):t.console.log&&t.console.log(i))}},f=function(t,n,i){return n===t.state?(t.state=i,e(t).triggerHandler(p.onStateChanged,[{oldState:n,newState:i}]),!0):!1},m=function(e){return e.state===l.connectionState.disconnected},g=function(e){return e._.keepAliveData.activated&&e.transport.supportsKeepAlive(e)},b=function(n){var i,o;n._.configuredStopReconnectingTimeout||(o=function(t){var n=l._.format(l.resources.reconnectTimeout,t.disconnectTimeout);t.log(n),e(t).triggerHandler(p.onError,[l._.error(n,"TimeoutException")]),t.stop(!1,!1)},n.reconnecting(function(){var e=this;e.state===l.connectionState.reconnecting&&(i=t.setTimeout(function(){o(e)},e.disconnectTimeout))}),n.stateChanged(function(e){e.oldState===l.connectionState.reconnecting&&t.clearTimeout(i)}),n._.configuredStopReconnectingTimeout=!0)};l=function(e,t,n){return new l.fn.init(e,t,n)},l._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var e,n;return"Microsoft Internet Explorer"===t.navigator.appName&&(n=/MSIE ([0-9]+\.[0-9]+)/.exec(t.navigator.userAgent),n&&(e=t.parseFloat(n[1]))),e}(),error:function(e,t,n){var i=new Error(e);return i.source=t,"undefined"!=typeof n&&(i.context=n),i},transportError:function(e,t,i,o){var a=this.error(e,i,o);return a.transport=t?t.name:n,a},format:function(){for(var e=arguments[0],t=0;t<arguments.length-1;t++)e=e.replace("{"+t+"}",arguments[t+1]);return e},firefoxMajorVersion:function(e){var t=e.match(/Firefox\/(\d+)/);return!t||!t.length||t.length<2?0:parseInt(t[1],10)},configurePingInterval:function(n){var i=n._.config,o=function(t){e(n).triggerHandler(p.onError,[t])};i&&!n._.pingIntervalId&&i.pingInterval&&(n._.pingIntervalId=t.setInterval(function(){l.transports._logic.pingServer(n).fail(o)},i.pingInterval))}},l.events=p,l.resources=r,l.ajaxDefaults={processData:!0,timeout:null,async:!0,global:!1,cache:!1},l.changeState=f,l.isDisconnecting=m,l.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},l.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'></script>.")}},d.load(function(){u=!0}),l.fn=l.prototype={init:function(t,n,i){var o=e(this);this.url=t,this.qs=n,this.lastError=null,this._={keepAliveData:{},connectingMessageBuffer:new s(this,function(e){o.triggerHandler(p.onReceived,[e])}),onFailedTimeoutHandle:null,lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0},"boolean"==typeof i&&(this.logging=i)},_parseResponse:function(e){var t=this;return e&&"string"==typeof e?t.json.parse(e):e},_originalJson:t.JSON,json:t.JSON,isCrossDomain:function(n,i){var o;return n=e.trim(n),i=i||t.location,0!==n.indexOf("http")?!1:(o=t.document.createElement("a"),o.href=n,o.protocol+a(o.protocol,o.host)!==i.protocol+a(i.protocol,i.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:l.connectionState.disconnected,clientProtocol:"1.4",reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:18e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(n,o){var a,s,c,v=this,m={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},y=v._deferral||e.Deferred(),w=t.document.createElement("a");if(v.lastError=null,v._deferral=y,!v.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");if("function"===e.type(n)?o=n:"object"===e.type(n)&&(e.extend(m,n),"function"===e.type(m.callback)&&(o=m.callback)),m.transport=i(m.transport,v),!m.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");return v._.config=m,u||m.waitForPageLoad!==!0?v.state===l.connectionState.connecting?y.promise():f(v,l.connectionState.disconnected,l.connectionState.connecting)===!1?(y.resolve(v),y.promise()):(b(v),w.href=v.url,w.protocol&&":"!==w.protocol?(v.protocol=w.protocol,v.host=w.host):(v.protocol=t.document.location.protocol,v.host=w.host||t.document.location.host),v.baseUrl=v.protocol+"//"+v.host,v.wsProtocol="https:"===v.protocol?"wss://":"ws://","auto"===m.transport&&m.jsonp===!0&&(m.transport="longPolling"),0===v.url.indexOf("//")&&(v.url=t.location.protocol+v.url,v.log("Protocol relative URL detected, normalizing it to '"+v.url+"'.")),this.isCrossDomain(v.url)&&(v.log("Auto detected cross domain url."),"auto"===m.transport&&(m.transport=["webSockets","serverSentEvents","longPolling"]),"undefined"==typeof m.withCredentials&&(m.withCredentials=!0),m.jsonp||(m.jsonp=!e.support.cors,m.jsonp&&v.log("Using jsonp because this browser doesn't support CORS.")),v.contentType=l._.defaultContentType),v.withCredentials=m.withCredentials,v.ajaxDataType=m.jsonp?"jsonp":"text",e(v).bind(p.onStart,function(){"function"===e.type(o)&&o.call(v),y.resolve(v)}),a=function(n,i){var o=l._.error(r.noTransportOnInit);if(i=i||0,i>=n.length)return e(v).triggerHandler(p.onError,[o]),y.reject(o),void v.stop();if(v.state!==l.connectionState.disconnected){var s=n[i],c=l.transports[s],u=!1,h=function(){u||(u=!0,t.clearTimeout(v._.onFailedTimeoutHandle),c.stop(v),a(n,i+1))};v.transport=c;try{v._.onFailedTimeoutHandle=t.setTimeout(function(){v.log(c.name+" timed out when trying to connect."),h()},v._.totalTransportConnectTimeout),c.start(v,function(){var n=function(){var n=l._.firefoxMajorVersion(t.navigator.userAgent)>=11,i=!!v.withCredentials&&n;v.log("The start request succeeded. Transitioning to the connected state."),g(v)&&l.transports._logic.monitorKeepAlive(v),l.transports._logic.startHeartbeat(v),l._.configurePingInterval(v),f(v,l.connectionState.connecting,l.connectionState.connected)||v.log("WARNING! The connection was not in the connecting state."),v._.connectingMessageBuffer.drain(),e(v).triggerHandler(p.onStart),d.bind("unload",function(){v.log("Window unloading, stopping the connection."),v.stop(i)}),n&&d.bind("beforeunload",function(){t.setTimeout(function(){v.stop(i)},0)})};if(!u){if(u=!0,t.clearTimeout(v._.onFailedTimeoutHandle),v.state===l.connectionState.disconnected)return;v.log(c.name+" transport selected. Initiating start request."),l.transports._logic.ajaxStart(v,n)}},h)}catch(m){v.log(c.name+" transport threw '"+m.message+"' when attempting to start."),h()}}},s=v.url+"/negotiate",c=function(t,n){var i=l._.error(r.errorOnNegotiate,t,n._.negotiateRequest);e(n).triggerHandler(p.onError,i),y.reject(i),n.stop()},e(v).triggerHandler(p.onStarting),s=l.transports._logic.prepareQueryString(v,s),v.log("Negotiating with '"+s+"'."),v._.negotiateRequest=l.transports._logic.ajax(v,{url:s,error:function(e,t){t!==h?c(e,v):y.reject(l._.error(r.stoppedWhileNegotiating,null,v._.negotiateRequest))},success:function(t){var n,i,o,s=[],u=[];try{n=v._parseResponse(t)}catch(d){return void c(l._.error(r.errorParsingNegotiateResponse,d),v)}return i=v._.keepAliveData,v.appRelativeUrl=n.Url,v.id=n.ConnectionId,v.token=n.ConnectionToken,v.webSocketServerUrl=n.WebSocketServerUrl,v._.longPollDelay=1e3*n.LongPollDelay,v.disconnectTimeout=1e3*n.DisconnectTimeout,v._.totalTransportConnectTimeout=v.transportConnectTimeout+1e3*n.TransportConnectTimeout,n.KeepAliveTimeout?(i.activated=!0,i.timeout=1e3*n.KeepAliveTimeout,i.timeoutWarning=i.timeout*v.keepAliveWarnAt,v._.beatInterval=(i.timeout-i.timeoutWarning)/3):i.activated=!1,v.reconnectWindow=v.disconnectTimeout+(i.timeout||0),n.ProtocolVersion&&n.ProtocolVersion===v.clientProtocol?(e.each(l.transports,function(e){return 0===e.indexOf("_")||"webSockets"===e&&!n.TryWebSockets?!0:void u.push(e)}),e.isArray(m.transport)?e.each(m.transport,function(t,n){e.inArray(n,u)>=0&&s.push(n)}):"auto"===m.transport?s=u:e.inArray(m.transport,u)>=0&&s.push(m.transport),void a(s)):(o=l._.error(l._.format(r.protocolIncompatible,v.clientProtocol,n.ProtocolVersion)),e(v).triggerHandler(p.onError,[o]),void y.reject(o))}}),y.promise()):(v._.deferredStartHandler=function(){v.start(n,o)},d.bind("load",v._.deferredStartHandler),y.promise())},starting:function(t){var n=this;return e(n).bind(p.onStarting,function(){t.call(n)}),n},send:function(e){var t=this;if(t.state===l.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(t.state===l.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return t.transport.send(t,e),t},received:function(t){var n=this;return e(n).bind(p.onReceived,function(e,i){t.call(n,i)}),n},stateChanged:function(t){var n=this;return e(n).bind(p.onStateChanged,function(e,i){t.call(n,i)}),n},error:function(t){var n=this;return e(n).bind(p.onError,function(e,i,o){n.lastError=i,t.call(n,i,o)}),n},disconnected:function(t){var n=this;return e(n).bind(p.onDisconnect,function(){t.call(n)}),n},connectionSlow:function(t){var n=this;return e(n).bind(p.onConnectionSlow,function(){t.call(n)}),n},reconnecting:function(t){var n=this;return e(n).bind(p.onReconnecting,function(){t.call(n)}),n},reconnected:function(t){var n=this;return e(n).bind(p.onReconnect,function(){t.call(n)}),n},stop:function(n,i){var o=this,a=o._deferral;return o._.deferredStartHandler&&d.unbind("load",o._.deferredStartHandler),delete o._.config,delete o._.deferredStartHandler,u||o._.config&&o._.config.waitForPageLoad!==!0?o.state!==l.connectionState.disconnected?(o.log("Stopping connection."),f(o,o.state,l.connectionState.disconnected),t.clearTimeout(o._.beatHandle),t.clearTimeout(o._.onFailedTimeoutHandle),t.clearInterval(o._.pingIntervalId),o.transport&&(o.transport.stop(o),i!==!1&&o.transport.abort(o,n),g(o)&&l.transports._logic.stopMonitoringKeepAlive(o),o.transport=null),o._.negotiateRequest&&(o._.negotiateRequest.abort(h),delete o._.negotiateRequest),l.transports._logic.tryAbortStartRequest(o),e(o).triggerHandler(p.onDisconnect),delete o._deferral,delete o.messageId,delete o.groupsToken,delete o.id,delete o._.pingIntervalId,delete o._.lastMessageAt,delete o._.lastActiveAt,delete o._.longPollDelay,o._.connectingMessageBuffer.clear(),o):void 0:(o.log("Stopping connection prior to negotiate."),void(a&&a.reject(l._.error(r.stoppedWhileLoading))))},log:function(e){v(e,this.logging)}},l.fn.init.prototype=l.fn,l.noConflict=function(){return e.connection===l&&(e.connection=c),l},e.connection&&(c=e.connection),e.connection=e.signalR=l}(window.jQuery,window),function(e,t){function n(e){e._.keepAliveData.monitoring&&i(e),a.markActive(e)&&(e._.beatHandle=t.setTimeout(function(){n(e)},e._.beatInterval))}function i(t){var n,i=t._.keepAliveData;t.state===s.connectionState.connected&&(n=(new Date).getTime()-t._.lastMessageAt,n>=i.timeout?(t.log("Keep alive timed out.  Notifying transport that connection has been lost."),t.transport.lostConnection(t)):n>=i.timeoutWarning?i.userNotified||(t.log("Keep alive has been missed, connection may be dead/slow."),e(t).triggerHandler(r.onConnectionSlow),i.userNotified=!0):i.userNotified=!1)}function o(e,t){var n=e.url+t;return e.transport&&(n+="?transport="+e.transport.name),a.prepareQueryString(e,n)}var a,s=e.signalR,r=e.signalR.events,l=e.signalR.changeState,c="__Start Aborted__";s.transports={},a=s.transports._logic={ajax:function(t,n){return e.ajax(e.extend(!0,{},e.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:t.withCredentials},contentType:t.contentType,dataType:t.ajaxDataType},n))},pingServer:function(t){var n,i,o=e.Deferred();return t.transport?(n=t.url+"/ping",n=a.addQs(n,t.qs),i=a.ajax(t,{url:n,success:function(e){var n;try{n=t._parseResponse(e)}catch(a){return o.reject(s._.transportError(s.resources.pingServerFailedParse,t.transport,a,i)),void t.stop()}"pong"===n.Response?o.resolve():o.reject(s._.transportError(s._.format(s.resources.pingServerFailedInvalidResponse,e),t.transport,null,i))},error:function(e){401===e.status||403===e.status?(o.reject(s._.transportError(s._.format(s.resources.pingServerFailedStatusCode,e.status),t.transport,e,i)),t.stop()):o.reject(s._.transportError(s.resources.pingServerFailed,t.transport,e,i))}})):o.reject(s._.transportError(s.resources.noConnectionTransport,t.transport)),o.promise()},prepareQueryString:function(e,n){var i;return i=a.addQs(n,"clientProtocol="+e.clientProtocol),i=a.addQs(i,e.qs),e.token&&(i+="&connectionToken="+t.encodeURIComponent(e.token)),e.data&&(i+="&connectionData="+t.encodeURIComponent(e.data)),i},addQs:function(t,n){var i,o=-1!==t.indexOf("?")?"&":"?";if(!n)return t;if("object"==typeof n)return t+o+e.param(n);if("string"==typeof n)return i=n.charAt(0),("?"===i||"&"===i)&&(o=""),t+o+n;throw new Error("Query string property must be either a string or object.")},getUrl:function(e,n,i,o){var s="webSockets"===n?"":e.baseUrl,r=s+e.appRelativeUrl,l="transport="+n;return e.groupsToken&&(l+="&groupsToken="+t.encodeURIComponent(e.groupsToken)),i?(r+=o?"/poll":"/reconnect",e.messageId&&(l+="&messageId="+t.encodeURIComponent(e.messageId))):r+="/connect",r+="?"+l,r=a.prepareQueryString(e,r),r+("&tid="+Math.floor(11*Math.random()))},maximizePersistentResponse:function(e){return{MessageId:e.C,Messages:e.M,Initialized:"undefined"!=typeof e.S?!0:!1,Disconnect:"undefined"!=typeof e.D?!0:!1,ShouldReconnect:"undefined"!=typeof e.T?!0:!1,LongPollDelay:e.L,GroupsToken:e.G}},updateGroups:function(e,t){t&&(e.groupsToken=t)},stringifySend:function(e,t){return"string"==typeof t||"undefined"==typeof t||null===t?t:e.json.stringify(t)},ajaxSend:function(t,n){var i,l=a.stringifySend(t,n),c=o(t,"/send"),u=function(t,o){e(o).triggerHandler(r.onError,[s._.transportError(s.resources.sendFailed,o.transport,t,i),n])};return i=a.ajax(t,{url:c,type:"jsonp"===t.ajaxDataType?"GET":"POST",contentType:s._.defaultContentType,data:{data:l},success:function(e){var n;if(e){try{n=t._parseResponse(e)}catch(i){return u(i,t),void t.stop()}a.triggerReceived(t,n)}},error:function(e,n){"abort"!==n&&"parsererror"!==n&&u(e,t)}})},ajaxAbort:function(e,t){if("undefined"!=typeof e.transport){t="undefined"==typeof t?!0:t;var n=o(e,"/abort");a.ajax(e,{url:n,async:t,timeout:1e3,type:"POST"}),e.log("Fired ajax abort async = "+t+".")}},ajaxStart:function(t,n){var i=function(e){var n=t._deferral;n&&n.reject(e)},l=function(n){t.log("The start request failed. Stopping the connection."),e(t).triggerHandler(r.onError,[n]),i(n),t.stop()};t._.startRequest=a.ajax(t,{url:o(t,"/start"),success:function(e,i,o){var a;try{a=t._parseResponse(e)}catch(r){return void l(s._.error(s._.format(s.resources.errorParsingStartResponse,e),r,o))}"started"===a.Response?n():l(s._.error(s._.format(s.resources.invalidStartResponse,e),null,o))},error:function(e,n,o){n!==c?l(s._.error(s.resources.errorDuringStartRequest,o,e)):(t.log("The start request aborted because connection.stop() was called."),i(s._.error(s.resources.stoppedDuringStartRequest,null,e)))}})},tryAbortStartRequest:function(e){e._.startRequest&&(e._.startRequest.abort(c),delete e._.startRequest)},tryInitialize:function(e,t){e.Initialized&&t()},triggerReceived:function(t,n){t._.connectingMessageBuffer.tryBuffer(n)||e(t).triggerHandler(r.onReceived,[n])},processMessages:function(t,n,i){var o;a.markLastMessage(t),n&&(o=a.maximizePersistentResponse(n),a.updateGroups(t,o.GroupsToken),o.MessageId&&(t.messageId=o.MessageId),o.Messages&&(e.each(o.Messages,function(e,n){a.triggerReceived(t,n)}),a.tryInitialize(o,i)))},monitorKeepAlive:function(t){var n=t._.keepAliveData;n.monitoring?t.log("Tried to monitor keep alive but it's already being monitored."):(n.monitoring=!0,a.markLastMessage(t),t._.keepAliveData.reconnectKeepAliveUpdate=function(){a.markLastMessage(t)},e(t).bind(r.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t.log("Now monitoring keep alive with a warning timeout of "+n.timeoutWarning+" and a connection lost timeout of "+n.timeout+"."))},stopMonitoringKeepAlive:function(t){var n=t._.keepAliveData;n.monitoring&&(n.monitoring=!1,e(t).unbind(r.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t._.keepAliveData={},t.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(e){e._.lastActiveAt=(new Date).getTime(),n(e)},markLastMessage:function(e){e._.lastMessageAt=(new Date).getTime()},markActive:function(e){return a.verifyLastActive(e)?(e._.lastActiveAt=(new Date).getTime(),!0):!1},isConnectedOrReconnecting:function(e){return e.state===s.connectionState.connected||e.state===s.connectionState.reconnecting},ensureReconnectingState:function(t){return l(t,s.connectionState.connected,s.connectionState.reconnecting)===!0&&e(t).triggerHandler(r.onReconnecting),t.state===s.connectionState.reconnecting},clearReconnectTimeout:function(e){e&&e._.reconnectTimeout&&(t.clearTimeout(e._.reconnectTimeout),delete e._.reconnectTimeout)},verifyLastActive:function(t){if((new Date).getTime()-t._.lastActiveAt>=t.reconnectWindow){var n=s._.format(s.resources.reconnectWindowTimeout,new Date(t._.lastActiveAt),t.reconnectWindow);return t.log(n),e(t).triggerHandler(r.onError,[s._.error(n,"TimeoutException")]),t.stop(!1,!1),!1}return!0},reconnect:function(e,n){var i=s.transports[n];if(a.isConnectedOrReconnecting(e)&&!e._.reconnectTimeout){if(!a.verifyLastActive(e))return;e._.reconnectTimeout=t.setTimeout(function(){a.verifyLastActive(e)&&(i.stop(e),a.ensureReconnectingState(e)&&(e.log(n+" reconnecting."),i.start(e)))},e.reconnectDelay)}},handleParseFailure:function(t,n,i,o,a){t.state===s.connectionState.connecting?(t.log("Failed to parse server response while attempting to connect."),o()):(e(t).triggerHandler(r.onError,[s._.transportError(s._.format(s.resources.parseFailed,n),t.transport,i,a)]),t.stop())},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(e,t){var n=e.signalR,i=e.signalR.events,o=e.signalR.changeState,a=n.transports._logic;n.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(t,o){var s=a.stringifySend(t,o);try{t.socket.send(s)}catch(r){e(t).triggerHandler(i.onError,[n._.transportError(n.resources.webSocketsInvalidState,t.transport,r,t.socket),o])}},start:function(s,r,l){var c,u=!1,d=this,h=!r,p=e(s);return t.WebSocket?void(s.socket||(c=s.webSocketServerUrl?s.webSocketServerUrl:s.wsProtocol+s.host,c+=a.getUrl(s,this.name,h),s.log("Connecting to websocket endpoint '"+c+"'."),s.socket=new t.WebSocket(c),s.socket.onopen=function(){u=!0,s.log("Websocket opened."),a.clearReconnectTimeout(s),o(s,n.connectionState.reconnecting,n.connectionState.connected)===!0&&p.triggerHandler(i.onReconnect)},s.socket.onclose=function(t){if(this===s.socket){if(!u)return void(l?l():h&&d.reconnect(s));"undefined"!=typeof t.wasClean&&t.wasClean===!1?(e(s).triggerHandler(i.onError,[n._.transportError(n.resources.webSocketClosed,s.transport,t)]),s.log("Unclean disconnect from websocket: "+t.reason||"[no reason given].")):s.log("Websocket closed."),d.reconnect(s)}},s.socket.onmessage=function(t){var n;try{n=s._parseResponse(t.data)}catch(i){return void a.handleParseFailure(s,t.data,i,l,t)}n&&(e.isEmptyObject(n)||n.M?a.processMessages(s,n,r):a.triggerReceived(s,n))})):void l()},reconnect:function(e){a.reconnect(e,this.name)},lostConnection:function(e){this.reconnect(e)},stop:function(e){a.clearReconnectTimeout(e),e.socket&&(e.log("Closing the Websocket."),e.socket.close(),e.socket=null)},abort:function(e,t){a.ajaxAbort(e,t)}}}(window.jQuery,window),function(e,t){var n=e.signalR,i=e.signalR.events,o=e.signalR.changeState,a=n.transports._logic,s=function(e){t.clearTimeout(e._.reconnectAttemptTimeoutHandle),delete e._.reconnectAttemptTimeoutHandle};n.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(r,l,c){var u,d=this,h=!1,p=e(r),v=!l;if(r.eventSource&&(r.log("The connection already has an event source. Stopping it."),r.stop()),!t.EventSource)return void(c&&(r.log("This browser doesn't support SSE."),c()));u=a.getUrl(r,this.name,v);try{r.log("Attempting to connect to SSE endpoint '"+u+"'."),r.eventSource=new t.EventSource(u,{withCredentials:r.withCredentials})}catch(f){return r.log("EventSource failed trying to connect with error "+f.Message+"."),void(c?c():(p.triggerHandler(i.onError,[n._.transportError(n.resources.eventSourceFailedToConnect,r.transport,f)]),v&&d.reconnect(r)))}v&&(r._.reconnectAttemptTimeoutHandle=t.setTimeout(function(){h===!1&&r.eventSource.readyState!==t.EventSource.OPEN&&d.reconnect(r)},d.timeOut)),r.eventSource.addEventListener("open",function(){r.log("EventSource connected."),s(r),a.clearReconnectTimeout(r),h===!1&&(h=!0,o(r,n.connectionState.reconnecting,n.connectionState.connected)===!0&&p.triggerHandler(i.onReconnect));
},!1),r.eventSource.addEventListener("message",function(e){var t;if("initialized"!==e.data){try{t=r._parseResponse(e.data)}catch(n){return void a.handleParseFailure(r,e.data,n,c,e)}a.processMessages(r,t,l)}},!1),r.eventSource.addEventListener("error",function(e){if(this===r.eventSource){if(!h)return void(c&&c());r.log("EventSource readyState: "+r.eventSource.readyState+"."),e.eventPhase===t.EventSource.CLOSED?(r.log("EventSource reconnecting due to the server connection ending."),d.reconnect(r)):(r.log("EventSource error."),p.triggerHandler(i.onError,[n._.transportError(n.resources.eventSourceError,r.transport,e)]))}},!1)},reconnect:function(e){a.reconnect(e,this.name)},lostConnection:function(e){this.reconnect(e)},send:function(e,t){a.ajaxSend(e,t)},stop:function(e){s(e),a.clearReconnectTimeout(e),e&&e.eventSource&&(e.log("EventSource calling close()."),e.eventSource.close(),e.eventSource=null,delete e.eventSource)},abort:function(e,t){a.ajaxAbort(e,t)}}}(window.jQuery,window),function(e,t){var n=e.signalR,i=e.signalR.events,o=e.signalR.changeState,a=n.transports._logic,s=function(){var e=t.document.createElement("iframe");return e.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),e},r=function(){var e=null,i=1e3,o=0;return{prevent:function(){n._.ieVersion<=8&&(0===o&&(e=t.setInterval(function(){var e=s();t.document.body.appendChild(e),t.document.body.removeChild(e),e=null},i)),o++)},cancel:function(){1===o&&t.clearInterval(e),o>0&&o--}}}();n.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(e,n,i){var o,l=this,c=a.foreverFrame.count+=1,u=s(),d=function(){e.log("Forever frame iframe finished loading and is no longer receiving messages."),l.reconnect(e)};return t.EventSource?void(i&&(e.log("This browser supports SSE, skipping Forever Frame."),i())):(u.setAttribute("data-signalr-connection-id",e.id),r.prevent(),o=a.getUrl(e,this.name),o+="&frameId="+c,t.document.body.appendChild(u),e.log("Binding to iframe's load event."),u.addEventListener?u.addEventListener("load",d,!1):u.attachEvent&&u.attachEvent("onload",d),u.src=o,a.foreverFrame.connections[c]=e,e.frame=u,e.frameId=c,void(n&&(e.onSuccess=function(){e.log("Iframe transport started."),n()})))},reconnect:function(e){var n=this;a.isConnectedOrReconnecting(e)&&a.verifyLastActive(e)&&t.setTimeout(function(){if(a.verifyLastActive(e)&&e.frame&&a.ensureReconnectingState(e)){var t=e.frame,i=a.getUrl(e,n.name,!0)+"&frameId="+e.frameId;e.log("Updating iframe src to '"+i+"'."),t.src=i}},e.reconnectDelay)},lostConnection:function(e){this.reconnect(e)},send:function(e,t){a.ajaxSend(e,t)},receive:function(t,i){var o,s,r;if(t.json!==t._originalJson&&(i=t._originalJson.stringify(i)),r=t._parseResponse(i),a.processMessages(t,r,t.onSuccess),t.state===e.signalR.connectionState.connected&&(t.frameMessageCount=(t.frameMessageCount||0)+1,t.frameMessageCount>n.transports.foreverFrame.iframeClearThreshold&&(t.frameMessageCount=0,o=t.frame.contentWindow||t.frame.contentDocument,o&&o.document&&o.document.body)))for(s=o.document.body;s.firstChild;)s.removeChild(s.firstChild)},stop:function(e){var n=null;if(r.cancel(),e.frame){if(e.frame.stop)e.frame.stop();else try{n=e.frame.contentWindow||e.frame.contentDocument,n.document&&n.document.execCommand&&n.document.execCommand("Stop")}catch(i){e.log("Error occured when stopping foreverFrame transport. Message = "+i.message+".")}e.frame.parentNode===t.document.body&&t.document.body.removeChild(e.frame),delete a.foreverFrame.connections[e.frameId],e.frame=null,e.frameId=null,delete e.frame,delete e.frameId,delete e.onSuccess,delete e.frameMessageCount,e.log("Stopping forever frame.")}},abort:function(e,t){a.ajaxAbort(e,t)},getConnection:function(e){return a.foreverFrame.connections[e]},started:function(t){o(t,n.connectionState.reconnecting,n.connectionState.connected)===!0&&e(t).triggerHandler(i.onReconnect)}}}(window.jQuery,window),function(e,t){var n=e.signalR,i=e.signalR.events,o=e.signalR.changeState,a=e.signalR.isDisconnecting,s=n.transports._logic,r=function(){try{return"onprogress"in new t.XMLHttpRequest}catch(e){return!1}}();n.transports.longPolling={name:"longPolling",supportsKeepAlive:function(e){return r&&"jsonp"!==e.ajaxDataType&&0===e._.longPollDelay},reconnectDelay:3e3,start:function(r,l,c){var u=this,d=function(){d=e.noop,c=null,r.log("LongPolling connected."),l()},h=function(){return c?(c(),c=null,r.log("LongPolling failed to connect."),!0):!1},p=r._,v=0,f=function(a){t.clearTimeout(p.reconnectTimeoutId),p.reconnectTimeoutId=null,o(a,n.connectionState.reconnecting,n.connectionState.connected)===!0&&(a.log("Raising the reconnect event"),e(a).triggerHandler(i.onReconnect))},m=36e5;r.pollXhr&&(r.log("Polling xhr requests already exists, aborting."),r.stop()),r.messageId=null,p.reconnectTimeoutId=null,p.pollTimeoutId=t.setTimeout(function(){!function o(l,c){var g=l.messageId,b=null===g,y=!b,w=!c,S=s.getUrl(l,u.name,y,w);a(l)!==!0&&(r.log("Opening long polling request to '"+S+"'."),l.pollXhr=s.ajax(r,{xhrFields:{onprogress:function(){s.markLastMessage(r)}},url:S,success:function(n){var i,c,u,m=0;r.log("Long poll complete."),v=0;try{i=r._parseResponse(n)}catch(g){return void s.handleParseFailure(l,n,g,h,l.pollXhr)}null!==p.reconnectTimeoutId&&f(l),i&&(c=s.maximizePersistentResponse(i)),s.processMessages(l,i,d),c&&"number"===e.type(c.LongPollDelay)&&(m=c.LongPollDelay),c&&c.Disconnect||a(l)!==!0&&(u=c&&c.ShouldReconnect,!u||s.ensureReconnectingState(l))&&(m>0?p.pollTimeoutId=t.setTimeout(function(){o(l,u)},m):o(l,u))},error:function(a,c){if(t.clearTimeout(p.reconnectTimeoutId),p.reconnectTimeoutId=null,"abort"===c)return void r.log("Aborted xhr request.");if(!h()){if(v++,r.state!==n.connectionState.reconnecting&&(r.log("An error occurred using longPolling. Status = "+c+".  Response = "+a.responseText+"."),e(l).triggerHandler(i.onError,[n._.transportError(n.resources.longPollFailed,r.transport,a,l.pollXhr)])),(r.state===n.connectionState.connected||r.state===n.connectionState.reconnecting)&&!s.verifyLastActive(r))return;if(!s.ensureReconnectingState(l))return;p.pollTimeoutId=t.setTimeout(function(){o(l,!0)},u.reconnectDelay)}}}),y&&c===!0&&(p.reconnectTimeoutId=t.setTimeout(function(){f(l)},Math.min(1e3*(Math.pow(2,v)-1),m))))}(r)},250)},lostConnection:function(e){e.pollXhr&&e.pollXhr.abort("lostConnection")},send:function(e,t){s.ajaxSend(e,t)},stop:function(e){t.clearTimeout(e._.pollTimeoutId),t.clearTimeout(e._.reconnectTimeoutId),delete e._.pollTimeoutId,delete e._.reconnectTimeoutId,e.pollXhr&&(e.pollXhr.abort(),e.pollXhr=null,delete e.pollXhr)},abort:function(e,t){s.ajaxAbort(e,t)}}}(window.jQuery,window),function(e){function t(e){return e+l}function n(e,t,n){for(var i=e.length,o=[],a=0;i>a;a+=1)e.hasOwnProperty(a)&&(o[a]=t.call(n,e[a],a,e));return o}function i(t){return e.isFunction(t)?null:"undefined"===e.type(t)?null:t}function o(e){for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}function a(e,t){var n,i,a=e._.invocationCallbacks;o(a)&&e.log("Clearing hub invocation callbacks with error: "+t+"."),e._.invocationCallbackId=0,delete e._.invocationCallbacks,e._.invocationCallbacks={};for(i in a)n=a[i],n.method.call(n.scope,{E:t})}function s(e,t){return new s.fn.init(e,t)}function r(t,n){var i={qs:null,logging:!1,useDefaultPath:!0};return e.extend(i,n),(!t||i.useDefaultPath)&&(t=(t||"")+"/signalr"),new r.fn.init(t,i)}var l=".hubProxy",c=e.signalR;s.fn=s.prototype={init:function(e,t){this.state={},this.connection=e,this.hubName=t,this._={callbackMap:{}}},hasSubscriptions:function(){return o(this._.callbackMap)},on:function(n,i){var o=this,a=o._.callbackMap;return n=n.toLowerCase(),a[n]||(a[n]={}),a[n][i]=function(e,t){i.apply(o,t)},e(o).bind(t(n),a[n][i]),o},off:function(n,i){var a,s=this,r=s._.callbackMap;return n=n.toLowerCase(),a=r[n],a&&(a[i]?(e(s).unbind(t(n),a[i]),delete a[i],o(a)||delete r[n]):i||(e(s).unbind(t(n)),delete r[n])),s},invoke:function(t){var o=this,a=o.connection,s=e.makeArray(arguments).slice(1),r=n(s,i),l={H:o.hubName,M:t,A:r,I:a._.invocationCallbackId},u=e.Deferred(),d=function(n){var i,s,r=o._maximizeHubResponse(n);e.extend(o.state,r.State),r.Progress?u.notifyWith?u.notifyWith(o,[r.Progress.Data]):a._.progressjQueryVersionLogged||(a.log("A hub method invocation progress update was received but the version of jQuery in use ("+e.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),a._.progressjQueryVersionLogged=!0):r.Error?(r.StackTrace&&a.log(r.Error+"\n"+r.StackTrace+"."),i=r.IsHubException?"HubException":"Exception",s=c._.error(r.Error,i),s.data=r.ErrorData,a.log(o.hubName+"."+t+" failed to execute. Error: "+s.message),u.rejectWith(o,[s])):(a.log("Invoked "+o.hubName+"."+t),u.resolveWith(o,[r.Result]))};return a._.invocationCallbacks[a._.invocationCallbackId.toString()]={scope:o,method:d},a._.invocationCallbackId+=1,e.isEmptyObject(o.state)||(l.S=o.state),a.log("Invoking "+o.hubName+"."+t),a.send(l),u.promise()},_maximizeHubResponse:function(e){return{State:e.S,Result:e.R,Progress:e.P?{Id:e.P.I,Data:e.P.D}:null,Id:e.I,IsHubException:e.H,Error:e.E,StackTrace:e.T,ErrorData:e.D}}},s.fn.init.prototype=s.fn,r.fn=r.prototype=e.connection(),r.fn.init=function(n,i){var o={qs:null,logging:!1,useDefaultPath:!0},s=this;e.extend(o,i),e.signalR.fn.init.call(s,n,o.qs,o.logging),s.proxies={},s._.invocationCallbackId=0,s._.invocationCallbacks={},s.received(function(n){var i,o,a,r,l,c;n&&("undefined"!=typeof n.P?(a=n.P.I.toString(),r=s._.invocationCallbacks[a],r&&r.method.call(r.scope,n)):"undefined"!=typeof n.I?(a=n.I.toString(),r=s._.invocationCallbacks[a],r&&(s._.invocationCallbacks[a]=null,delete s._.invocationCallbacks[a],r.method.call(r.scope,n))):(i=this._maximizeClientHubInvocation(n),s.log("Triggering client hub event '"+i.Method+"' on hub '"+i.Hub+"'."),l=i.Hub.toLowerCase(),c=i.Method.toLowerCase(),o=this.proxies[l],e.extend(o.state,i.State),e(o).triggerHandler(t(c),[i.Args])))}),s.error(function(e,t){var n,i;t&&(n=t.I,i=s._.invocationCallbacks[n],i&&(s._.invocationCallbacks[n]=null,delete s._.invocationCallbacks[n],i.method.call(i.scope,{E:e})))}),s.reconnecting(function(){s.transport&&"webSockets"===s.transport.name&&a(s,"Connection started reconnecting before invocation result was received.")}),s.disconnected(function(){a(s,"Connection was disconnected before invocation result was received.")})},r.fn._maximizeClientHubInvocation=function(e){return{Hub:e.H,Method:e.M,Args:e.A,State:e.S}},r.fn._registerSubscribedHubs=function(){var t=this;t._subscribedToHubs||(t._subscribedToHubs=!0,t.starting(function(){var n=[];e.each(t.proxies,function(e){this.hasSubscriptions()&&(n.push({name:e}),t.log("Client subscribed to hub '"+e+"'."))}),0===n.length&&t.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to."),t.data=t.json.stringify(n)}))},r.fn.createHubProxy=function(e){e=e.toLowerCase();var t=this.proxies[e];return t||(t=s(this,e),this.proxies[e]=t),this._registerSubscribedHubs(),t},r.fn.init.prototype=r.fn,e.hubConnection=r}(window.jQuery,window),function(e){e.signalR.version="2.1.1"}(window.jQuery),define("jquery_signalR",function(){}),define("views/virtual_assistant/components/linkR",["jquery","jquery_ui","jquery_signalR","backbone","settings","scrollto"],function(e,t,n,i,o,a){_=window.CVUnderscore;var s=i.View.extend({el:".cv-va-bootstrap #cv-chat-content",submitID:"cv-live-chat-submit",entryID:"cv-live-chat-user-entry",bindEvent:"change:transactioncount",newLines:0,agentName:"Agent",activeChatSession:!1,launcherAppended:!1,proactiveLauncherAppended:!1,events:{"click #cv-live-chat-submit":"addLine"},instId:0,callId:0,tenant:"",initialize:function(e){console.log("init linkR"),"linkR"===o.livechatVendor&&(i.Model.prototype.initialize.call(this,e),this.model.on(this.bindEvent,this.render,this))},render:function(t){console.log("render linkR");var n=this;if("true"===window.liveChatOffer&&n.activeChatSession!==!0){window.liveChatOffer="false";var i="https://chat-am.asus.com/ChatService/info/skill?tenant=VA&channel=web";e.getJSON(i,function(e){console.log("skills.length"+e.length),0==e.length?console.log("live chat service not available"):n.launchPCS(e)})}},keyPress:function(e,t){e.preventDefault(),t.setButtonState(),13==e.keyCode&&t.addLine()},setButtonState:function(){var t=this,n=t.$el.find("#"+t.entryID).val();e.trim(n).length>0?t.$el.find("#"+t.submitID).removeClass("disabled").removeAttr("disabled"):t.$el.find("#"+t.submitID).addClass("disabled").prop("disabled","true")},addLine:function(){var t=this;t.$el.find("#"+t.submitID).addClass("disabled").prop("disabled","true"),""!==t.$el.find("#"+t.entryID).val().trim()&&(proxy.invoke("message",t.callId,"text","",t.$el.find("#"+t.entryID).val()),t.$el.find("#"+t.entryID).val(""),window.CVMobile===!0&&e(".cv-va-bootstrap #cv-live-chat-user-entry").blur())},launchPCS:function(t){var n=this;n.livechatrendered=!0,n.$el.find("#cv-chat-user-entry").hide(),n.$el.find("#cv-chat-submit").hide(),n.$el.find("#cv-chat-body>div:first-child").hide(),n.$el.css("top","5px"),n.previousMaxHeight=n.$el.css("max-height"),n.previousHeight=n.$el.css("height"),n.$el.css("max-height","925px"),n.$el.css("height","98%"),o.submitBtn.embedded.enabled===!0&&(n.$el.find("#cv-chat-user-entry").parent().append('<input id="'+n.entryID+'" type="text" name="entry" autocomplete="off" class="cv-form-control cv-chat-user-entry" style="display: none;" placeholder="'+o.defaultPlaceholderText+'">'),n.$el.find("#"+n.entryID).addClass("cv-tab-live-chat-user-entry"),n.$el.find("#"+n.entryID).css("border-radius",o.inputBorderRadius),n.$el.find("#"+n.submitID).show(),n.$el.find("#"+n.entryID).show(),n.$el.find("#"+n.submitID).addClass("cv-tab-live-chat-submit"),n.$el.find("#"+n.submitID).css({"border-radius":o.inputBorderRadius,"font-weight":o.submitBtn.fontWeight}),n.$el.find("#"+n.submitID).html("Send")),n.$el.find("#"+n.submitID).css({"background-color":o.submitBtn.backgroundColor,"border-color":o.submitBtn.backgroundColor,"border-radius":o.inputBorderRadius,"font-weight":o.submitBtn.fontWeight,"font-size":o.submitBtn.fontSize}),o.submitBtn.disabled.opacity===!0&&n.$el.find("#"+n.submitID+"[disabled]").css({opacity:1}),n.$el.find(".cv-chat-title").animate({color:o.modalHeader.backgroundColor},"fast"),n.$el.find("#cv-chat-answer-history").animate({opacity:"toggle"},"fast"),setTimeout(function(){var i=o.modalHeader.height;window.CVMobile===!0&&(i=o.modalHeader.mobile.height),window.cvVaMinimized===!0&&(i="100%"),n.$el.find("#cv-chat-user-entry").hide(),n.$el.find("#cv-chat-header").animate({height:i},500,function(){var i=n;if(o.vaLcTabs===!0){i.$el.find("#cv-chat-header").after('<ul class="cv-row cv-va-tabs-container nav nav-tabs"></ul>'),i.$el.find(".cv-va-tabs-container").append('<li id="va-tab" class="col-xs-6"><span>Virtual Agent</span></li>'),i.$el.find(".cv-va-tabs-container").append('<li id="lc-tab" class="active col-xs-6"><span>Live Chat<i class="fa fa-times lc-close-cvbtn"></i></span></li>');var a=function(){n.endChat(),i.$el.find("#va-tab").trigger("click"),i.$el.find("#lc-tab, #cv-live-chat-answer-history, #cv-live-chat-submit, #cv-live-chat-user-entry").remove(),n.$el.find(".cv-va-tabs-container").hide(100),n.$el.find(".cv-va-tabs-container").remove()};i.$el.find(".lc-close-cvbtn").on("click",function(e){e.preventDefault(),a()}),i.$el.find("#va-tab").click(function(){i.newLines=0,i.$el.find("#va-tab").addClass("active"),i.$el.find("#lc-tab").removeClass("active"),i.$el.find("#cv-chat-user-entry").show(),i.$el.find("#cv-chat-submit").show(),i.$el.find("#cv-chat-submit").removeClass("disabled").addClass("enabled"),i.$el.find("#"+n.entryID).hide(),i.$el.find("#"+n.submitID).hide(),i.$el.find(".cv-chat-va-typing").show(),i.$el.find(".cv-live-chat-agent-typing").hide(),i.$el.find("#cv-live-chat-answer-history").hide(),i.$el.find("#cv-chat-answer-history").show(),i.$el.find(".lc-close-cvbtn").on("click",function(e){e.preventDefault(),a()})}),i.$el.find("#lc-tab").click(function(e){e.preventDefault(),i.newLines=0,i.$el.find("#lc-tab a").html('Live Chat<i class="fa fa-times lc-close-cvbtn"></i>'),i.$el.find(".lc-close-cvbtn").on("click",function(e){e.preventDefault(),a()}),i.$el.find("#lc-tab").addClass("active"),i.$el.find("#va-tab").removeClass("active"),i.$el.find("#"+n.entryID).show(),i.$el.find("#"+n.submitID).show(),i.$el.find("#cv-chat-submit").removeClass("enabled").addClass("disabled").prop("disabled","true"),i.$el.find("#cv-chat-submit").hide(),i.$el.find("#cv-chat-user-entry").hide(),i.$el.find(".cv-chat-va-typing").hide(),i.$el.find(".cv-live-chat-agent-typing").show(),i.$el.find("#cv-live-chat-answer-history").show(),i.$el.find("#cv-chat-answer-history").hide()})}else if(o.vaLcTabs===!1&&o.terminateVASession===!1)i.$el.find(".cv-chat-title").removeClass("cv-chat-title").addClass("cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Virtual Assistant'),i.$el.find(".cv-live-chat-active-title").css({color:o.modalHeader.color}),i.$el.find("#cv-chat-header .close").css({color:o.modalHeader.color,opacity:1}),i.$el.find("#cv-chat-header").css({"background-color":o.modalHeader.backgroundColor}),i.$el.find(".cv-live-chat-active-title").fadeIn(),i.$el.find(".cv-live-chat-active-title").click(function(){if(i.newLines=0,i.livechatrendered){i.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Live Chat');var e=model.get("connectors");_.isArray(e)&&e.length?(i.$el.find("#cv-chat-user-entry").hide(),i.$el.find("#cv-chat-submit").removeClass("disabled").removeAttr("disabled")):(i.$el.find("#cv-chat-submit").addClass("disabled").prop("disabled","true"),i.$el.find("#cv-chat-user-entry").show()),i.$el.find("#cv-chat-submit").show(),i.$el.find("#cv-chat-user-entry").val().trim().length>0||!i.$el.find("#cv-chat-user-entry").is(":visible")?i.$el.find("#cv-chat-submit").removeClass("disabled").addClass("enabled"):i.$el.find("#cv-chat-submit").removeClass("enabled").addClass("disabled"),i.$el.find("#"+n.entryID).hide(),i.$el.find("#"+n.submitID).hide()}else i.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Virtual Assistant'),i.$el.find("#cv-chat-user-entry").hide(),i.$el.find("#cv-chat-submit").hide(),i.$el.find("#cv-chat-submit").removeClass("enabled").addClass("disabled").prop("disabled","true"),i.activeChatSession?i.$el.find("#"+n.entryID).show():i.$el.find("#"+n.entryID).hide(),i.$el.find("#"+n.submitID).show();i.$el.find(".cv-chat-va-typing").toggle(),i.$el.find(".cv-live-chat-agent-typing").toggle(),i.$el.find("#cv-live-chat-answer-history").animate({opacity:"toggle"},"fast",function(){i.$el.find("#cv-chat-answer-history").animate({opacity:"toggle"},"fast")}),i.livechatrendered=!i.livechatrendered});else if(o.vaLcTabs===!1&&o.terminateVASession===!0&&(clearInterval(window.proactiveEndSessionInterval),i.activeChatSession))var s=setInterval(function(){i.$el.find("#"+i.entryID).length>0&&(i.$el.find("#"+i.entryID).show(),clearInterval(s))},20);e.get(o.libEndpoint+"linkR-pcs",function(i){e("#cv-chat-body").append(i),e("#cv-product-line-menu").append('<option value="0">Product Line</option>'),e.each(t,function(t,n){var i=e('<option value="'+n.Id+'">'+n.Name+"</option>");e("#cv-product-line-menu").append(i)}),e("#request-chat").on("click",function(){n.validatePCS()&&(e("#linkR-pcs").hide(),n.launchLC())})})})},500)},launchLC:function(){var t=this;t.$el.css("max-height",t.previousMaxHeight),t.$el.css("height",t.previousHeight),t.$el.find("#cv-close-cvbtn").on("click",function(){t.endChat()}),t.$el.find("#cv-chat-body").append('<div id="cv-live-chat-answer-history" class="cv-chat-history"></div>'),t.$el.find("#cv-chat-submit").parent().append('<button id="'+t.submitID+'" type="submit" class="cvbtn cvbtn-primary cvbtn-lg cvbtn-block small-border-radius" disabled="disabled">Send Your Question</button>'),window.liveChatOffer=null;var n=e.hubConnection("signalr",{useDefaultPath:!1});n.url="https://chat-am.asus.com/ChatService/signalr",proxy=n.createHubProxy("entityHub"),t.proxy=proxy,proxy.on("login",function(e){t.instId=e,console.log("logged in")}),proxy.on("move",function(e){t.instId=e}),proxy.on("enqueue",function(n,i){var a,s,r,l,c,u;a=e("<div>").addClass("cv-live-chat-info"),a.html("There are currently "+(i+1)+" people waiting on this queue."),t.$el.find("#cv-live-chat-answer-history").append(a),a.addClass("cv-live-chat-system"),s=new Date,r="",o.lcTimeStamp===!0&&(r=s.getHours()+":"+(s.getMinutes()<10?"0":"")+s.getMinutes()),a.after('<span class="time-stamp-system">Info&nbsp'+r+"</span>"),l=t.$el.find(".cv-live-chat-user").has("span").get(-2),c=e(l).next(".cv-live-chat-user"),e(c).remove("div"),u=e(c).text(),e(l).append('<br><span dir="ltr">'+u+"</span>"),t.$el.find("#cv-live-chat-answer-history").scrollTo(t.$el.find("#cv-live-chat-answer-history").children().get(-1),500)}),proxy.on("join",function(n,i){if(t.callId=n,console.log(i.InstId+" , "+t.instId),t.activeChatSession=!0,i.InstId!=t.instId){var a,s,r,l,c,u;a=e("<div>").addClass("cv-live-chat-info"),a.html("Hi, This is ASUS Online Service Center, my name is "+i.Name+", how can I help you?"),t.$el.find("#cv-live-chat-answer-history").append(a),a.addClass("cv-live-chat-system"),s=new Date,r="",o.lcTimeStamp===!0&&(r=s.getHours()+":"+(s.getMinutes()<10?"0":"")+s.getMinutes()),a.after('<span class="time-stamp-system">Info&nbsp'+r+"</span>"),l=t.$el.find(".cv-live-chat-user").has("span").get(-2),c=e(l).next(".cv-live-chat-user"),e(c).remove("div"),u=e(c).text(),e(l).append('<br><span dir="ltr">'+u+"</span>"),t.$el.find("#cv-live-chat-answer-history").scrollTo(t.$el.find("#cv-live-chat-answer-history").children().get(-1),500),t.$el.find("#cv-chat-user-entry").parent().append('<input id="'+t.entryID+'" type="text" name="entry" autocomplete="off" class="cv-form-control cv-chat-user-entry" style="display: none;" placeholder="'+o.defaultPlaceholderText+'">'),t.$el.find("#cv-live-chat-answer-history").is(":visible")&&t.$el.find("#"+t.entryID).show(),t.$el.find("#"+t.entryID).css({"font-size":o.inputFontSize,"border-radius":o.inputBorderRadius}),t.$el.find("#"+t.entryID).keyup(function(e){t.keyPress(e,t)})}}),proxy.on("leave",function(n,i,a){if(console.log(i.InstId+" // "+t.instId),i.InstId==t.instId&&"LeaveChat"==a){e("#pretyping").empty(),proxy.invoke("logout");var s,r,l,c,u,d;s=e("<div>").addClass("cv-live-chat-info"),s.html("The conversation ended."),t.$el.find("#cv-live-chat-answer-history").append(s),s.addClass("cv-live-chat-system"),r=new Date,l="",o.lcTimeStamp===!0&&(l=r.getHours()+":"+(r.getMinutes()<10?"0":"")+r.getMinutes()),s.after('<span class="time-stamp-system">Info&nbsp'+l+"</span>"),c=t.$el.find(".cv-live-chat-user").has("span").get(-2),u=e(c).next(".cv-live-chat-user"),e(u).remove("div"),d=e(u).text(),e(c).append('<br><span dir="ltr">'+d+"</span>"),t.$el.find("#"+t.submitID).addClass("disabled").prop("disabled","true"),t.$el.find("#cv-live-chat-user-entry").hide(),t.$el.find("#cv-live-chat-answer-history").scrollTo(t.$el.find("#cv-live-chat-answer-history").children().get(-1),500)}}),proxy.on("message",function(n,i){var a,s,r;"User"===i.SenderType?(a=e("<div>").addClass("cv-live-chat-user"),a.html(i.Content).wrapInner("<span></span>"),t.$el.find("#cv-live-chat-answer-history").append(a),t.$el.find(".cv-live-chat-user").last().wrap('<div class="cv-col-xs-12"></div>'),s=new Date,r="",r=s.getHours()+":"+(s.getMinutes()<10?"0":"")+s.getMinutes(),t.$el.find(".cv-live-chat-user").last().after('<span class="time-stamp-user">You '+r+"</span>"),t.$el.find(".cv-live-chat-user").addClass("ts-shim")):(a=e("<div>").addClass("cv-live-chat-info"),a.html(i.Content.replace("<div","<span").replace("</div>","</span>")),t.$el.find("#cv-live-chat-answer-history").append(a),a.addClass("cv-live-chat-agent"),t.$el.find(".cv-live-chat-agent").last().wrap('<div class="cv-col-xs-12"></div>'),s=new Date,r="",r=s.getHours()+":"+(s.getMinutes()<10?"0":"")+s.getMinutes(),t.$el.find(".cv-live-chat-agent").last().after('<span class="time-stamp-info">'+i.SenderName+"&nbsp"+r+"</span>"),t.$el.find(".cv-live-chat-agent").addClass("ts-shim"),t.$el.find("#cv-live-chat-answer-history").is(":visible")||(t.newLines++,t.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> <span style="margin-right:10px;">Back to Live Chat </span>'+t.newLines+' <i class="fa fa-comment lc-fa-comment" aria-hidden="true"></i>'),o.vaLcTabs===!0&&t.$el.find("#lc-tab a").html("Live Chat "+t.newLines+' <i class="fa fa-comment" aria-hidden="true"></i><i class="fa fa-times lc-close-cvbtn"></i></a>'))),t.$el.find("#cv-live-chat-answer-history").scrollTo(t.$el.find("#cv-live-chat-answer-history").children().get(-1),500)}),proxy.on("timeout",function(e){}),proxy.on("typing",function(e,t,n){}),n.stateChanged(function(e){0==e.oldState&&1==e.newState&&(console.log(t.instId+"///"+t.instId.length),window.cvInstId&&proxy.invoke("move",t.tenant,window.cvInstId)),console.log(e)}),n.disconnected(function(){setTimeout(function(){n.start()},5e3)}),n.qs={tenant:"VA"},n.start().done(function(){e(window).on("unload",function(){proxy.invoke("logout")}),t.tenant="VA";var n=new Object;n.PhoneNo=t.$el.find("#cv-pnum").val(),n.EMail=t.$el.find("#cv-email").val(),n.Inquiry="0"!==t.$el.find("#cv-problem-type-menu").val()?t.$el.find("#cv-problem-type-menu").val():"Other",n.Attr1=t.$el.find("#cv-pnum").val(),n.Attr2=t.$el.find("#cv-email").val(),n.Attr4=t.$el.find("#cv-product-line-menu").val(),n.Attr3="0"!==t.$el.find("#cv-problem-type-menu").val()?t.$el.find("#cv-problem-type-menu").val():"Other",n.Attr5=t.$el.find("#cv-fname").val(),n.Attr6=t.$el.find("#cv-lname").val(),n.Attr7=t.$el.find("#cv-case").val(),n.Attr8=t.$el.find("#cv-serial-n").val(),n.Attr9=t.$el.find("#cv-question").val(),n.Attr10=t.$el.find('input[name="cv-country"]:checked').val();var i=n.Attr6+" "+n.Attr5;n.Name=i,proxy.invoke("userLogin","VA","web","",i,n.PhoneNo,n.EMail,n.Attr4,n)}).fail(function(){alert("Could not connect")})},endChat:function(e){console.log("endchat");var t=this;e&&(t=e),t.activeChatSession&&(console.log("logout sent"),t.proxy.invoke("logout")),o.terminateVASession===!0&&(clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(o.businessName+"-cvVaBootstrapState"),localStorage.removeItem(o.businessName+"-cvVaModel"),localStorage.removeItem(o.businessName+"-cvVaStyles"),localStorage.removeItem(o.businessName+"-cvVaInitCall"),localStorage.removeItem(o.businessName+"-cvVaCollectionLength"),localStorage.removeItem(o.businessName+"-cvVaTimestamp"),window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.localInitCall=void 0,window.sessionFlushInterval=setInterval(function(){clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(o.businessName+"-cvVaBootstrapState"),localStorage.removeItem(o.businessName+"-cvVaModel"),localStorage.removeItem(o.businessName+"-cvVaStyles"),localStorage.removeItem(o.businessName+"-cvVaInitCall"),localStorage.removeItem(o.businessName+"-cvVaCollectionLength"),localStorage.removeItem(o.businessName+"-cvVaTimestamp"),window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.localInitCall=void 0},0),setTimeout(function(){window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(o.businessName+"-cvVaBootstrapState",o.businessName+"-cvVaModel",o.businessName+"-cvVaStyles",o.businessName+"-cvVaInitCall",o.businessName+"-cvVaCollectionLength",o.businessName+"-cvVaTimestamp",o.businessName+"-lpSessionEndedExternal")}).then(function(e){window.loadFromStorage=!1,t.model.closeSession(),clearInterval(window.sessionFlushInterval),window.resetVA()})},150))},validatePCS:function(){var t=this,n=!0;return t.$el.find(".pcs-field-error").removeClass("pcs-field-error"),"0"===e("#cv-product-line-menu").val()&&(e("#cv-product-line-menu").addClass("pcs-field-error"),n=!1),0===e("#cv-fname").val().length&&(e("#cv-fname").focus(),e("#cv-fname").addClass("pcs-field-error"),n=!1),0==e("#cv-lname").val().length&&(e("#cv-lname").focus(),e("#cv-lname").addClass("pcs-field-error"),n=!1),0==e("#cv-serial-n").val().length&&(e("#cv-serial-n").focus(),e("#cv-serial-n").addClass("pcs-field-error"),n=!1),0==e("#cv-question").val().length&&(e("#cv-question").focus(),e("#cv-question").addClass("pcs-field-error"),n=!1),0!==e("#cv-email").val().length&&t.validateEmail(e("#cv-email").val())||(e("#cv-email").focus(),e("#cv-email").addClass("pcs-field-error"),n=!1),0!==e("#cv-pnum").val().length&&t.validatePhone(e("#cv-pnum").val())||(e("#cv-pnum").focus(),e("#cv-pnum").addClass("pcs-field-error"),n=!1),e("#cv-privacy").prop("checked")||(alert("You need to accept the Terms of Use and Privacy Policy to continue."),e("#cv-privacy").focus(),n=!1),n},validateEmail:function(e){var t=(document.getElementById("txtEmail"),/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/);return t.test(e)?!0:!1},validatePhone:function(e){var t=/[0-9]/g;return t.test(e)?!0:!1}});return s}),define("views/virtual_assistant/components/genesys",["jquery","jquery_ui","backbone","settings","scrollto"],function(e,t,n,i,o){_=window.CVUnderscore;var a=n.View.extend({el:".cv-va-bootstrap #cv-chat-content",submitID:"cv-live-chat-submit",entryID:"cv-live-chat-user-entry",bindEvent:"change:transactioncount",newLines:0,agentName:"Agent",launcherAppended:!1,proactiveLauncherAppended:!1,events:{"click #cv-live-chat-submit":"addLine"},chatSessionData:{},userTypingTimeoutId:null,initialize:function(t){var o=this;"genesys"===i.livechatVendor&&(n.Model.prototype.initialize.call(this,t),o.model.on(this.bindEvent,this.render,this),window.CVVA.methods.sendEscalationData=function(e){console.log(e),window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(i.businessName+"-pcsData_genesys",JSON.stringify(e))}),localStorage.setItem(i.businessName+"-pcsData_genesys",JSON.stringify(e))},localStorage.getItem(i.businessName+"-chatSessionData_genesys")?(o.chatSessionData=JSON.parse(localStorage.getItem(i.businessName+"-chatSessionData_genesys")),e("#cv-close-cvbtn").on("click",function(e){o.endChat()}),localStorage.getItem(i.businessName+"-agentPickedUp_genesys")&&o.$el.find("#"+o.entryID).keyup(function(e){o.keyPress(e,o)}),o.startChatSession()):localStorage.getItem(i.businessName+"-requestingChat_genesys")&&(e("#cv-close-cvbtn").on("click",function(e){o.endChat()}),o.requestChat()))},render:function(t){console.log("render genesys");var n,o=this,a=function(){window.livechatTriggered!==!0&&(o.livechatrendered=!0,o.$el.find("#cv-chat-user-entry").hide(),o.$el.find("#cv-chat-submit").hide(),o.$el.find("#cv-chat-submit").parent().append('<button id="'+o.submitID+'" type="submit" class="cvbtn cvbtn-primary cvbtn-lg cvbtn-block small-border-radius" disabled="disabled">'+i.submitBtn.text+"</button>"),i.submitBtn.embedded.enabled===!0&&(o.$el.find("#cv-chat-user-entry").parent().append('<input id="'+this.entryID+'" type="text" name="entry" autocomplete="off" class="cv-form-control cv-chat-user-entry" style="display: none;" placeholder="'+i.defaultPlaceholderText+'">'),o.$el.find("#"+this.entryID).addClass("cv-tab-live-chat-user-entry"),o.$el.find("#"+this.entryID).css("border-radius",i.inputBorderRadius),o.$el.find("#"+o.submitID).show(),o.$el.find("#"+this.entryID).show(),o.$el.find("#"+o.submitID).addClass("cv-tab-live-chat-submit"),o.$el.find("#"+o.submitID).css({"border-radius":i.inputBorderRadius,"font-weight":i.submitBtn.fontWeight}),o.$el.find("#"+o.submitID).html("Send")),o.$el.find("#"+o.submitID).css({
"background-color":i.submitBtn.backgroundColor,"border-color":i.submitBtn.backgroundColor,"border-radius":i.inputBorderRadius,"font-weight":i.submitBtn.fontWeight,"font-size":i.submitBtn.fontSize}),i.submitBtn.disabled.opacity===!0&&o.$el.find("#"+o.submitID+"[disabled]").css({opacity:1}),o.$el.find(".cv-chat-title").animate({color:i.modalHeader.backgroundColor},"fast"),o.$el.find("#cv-chat-answer-history").animate({opacity:"toggle"},"fast"),setTimeout(function(){var e=i.modalHeader.height;window.CVMobile===!0&&(e=i.modalHeader.mobile.height),window.cvVaMinimized===!0&&(e="100%"),o.$el.find("#cv-chat-user-entry").hide(),o.$el.find("#cv-chat-header").animate({height:e},500,function(){var e=o;if(i.vaLcTabs===!0){e.$el.find("#cv-chat-header").after('<ul class="cv-row cv-va-tabs-container nav nav-tabs"></ul>'),e.$el.find(".cv-va-tabs-container").append('<li id="va-tab" class="col-xs-6"><span>Virtual Agent</span></li>'),e.$el.find(".cv-va-tabs-container").append('<li id="lc-tab" class="active col-xs-6"><span>Live Chat<i class="fa fa-times lc-close-cvbtn"></i></span></li>');var n=function(){o.endChat(),e.$el.find("#va-tab").trigger("click"),e.$el.find("#lc-tab, #cv-live-chat-answer-history, #cv-live-chat-submit, #cv-live-chat-user-entry").remove(),o.$el.find(".cv-va-tabs-container").hide(100),o.$el.find(".cv-va-tabs-container").remove()};e.$el.find(".lc-close-cvbtn").on("click",function(e){e.preventDefault(),n()}),e.$el.find("#va-tab").click(function(){e.newLines=0,e.$el.find("#va-tab").addClass("active"),e.$el.find("#lc-tab").removeClass("active"),e.$el.find("#cv-chat-user-entry").show(),e.$el.find("#cv-chat-submit").show(),e.$el.find("#cv-chat-submit").removeClass("disabled").addClass("enabled"),e.$el.find("#"+o.entryID).hide(),e.$el.find("#"+o.submitID).hide(),e.$el.find(".cv-chat-va-typing").show(),e.$el.find(".cv-live-chat-agent-typing").hide(),e.$el.find("#cv-live-chat-answer-history").hide(),e.$el.find("#cv-chat-answer-history").show(),e.$el.find(".lc-close-cvbtn").on("click",function(e){e.preventDefault(),n()})}),e.$el.find("#lc-tab").click(function(t){t.preventDefault(),e.newLines=0,e.$el.find("#lc-tab a").html('Live Chat<i class="fa fa-times lc-close-cvbtn"></i>'),e.$el.find(".lc-close-cvbtn").on("click",function(e){e.preventDefault(),n()}),e.$el.find("#lc-tab").addClass("active"),e.$el.find("#va-tab").removeClass("active"),e.$el.find("#"+o.entryID).show(),e.$el.find("#"+o.submitID).show(),e.$el.find("#cv-chat-submit").removeClass("enabled").addClass("disabled").prop("disabled","true"),e.$el.find("#cv-chat-submit").hide(),e.$el.find("#cv-chat-user-entry").hide(),e.$el.find(".cv-chat-va-typing").hide(),e.$el.find(".cv-live-chat-agent-typing").show(),e.$el.find("#cv-live-chat-answer-history").show(),e.$el.find("#cv-chat-answer-history").hide()})}else if(i.vaLcTabs===!1&&i.terminateVASession===!1)e.$el.find(".cv-chat-title").removeClass("cv-chat-title").addClass("cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Virtual Assistant'),e.$el.find(".cv-live-chat-active-title").css({color:i.modalHeader.color}),e.$el.find("#cv-chat-header .close").css({color:i.modalHeader.color,opacity:1}),e.$el.find("#cv-chat-header").css({"background-color":i.modalHeader.backgroundColor}),e.$el.find(".cv-live-chat-active-title").fadeIn(),e.$el.find(".cv-live-chat-active-title").click(function(){if(e.newLines=0,e.livechatrendered){e.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Live Chat');var n=t.get("connectors");_.isArray(n)&&n.length?(e.$el.find("#cv-chat-user-entry").hide(),e.$el.find("#cv-chat-submit").removeClass("disabled").removeAttr("disabled")):(e.$el.find("#cv-chat-submit").addClass("disabled").prop("disabled","true"),e.$el.find("#cv-chat-user-entry").show()),e.$el.find("#cv-chat-submit").show(),e.$el.find("#cv-chat-user-entry").val().trim().length>0||!e.$el.find("#cv-chat-user-entry").is(":visible")?e.$el.find("#cv-chat-submit").removeClass("disabled").addClass("enabled"):e.$el.find("#cv-chat-submit").removeClass("enabled").addClass("disabled"),e.$el.find("#"+o.entryID).hide(),e.$el.find("#"+o.submitID).hide()}else e.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Back to Virtual Assistant'),e.$el.find("#cv-chat-user-entry").hide(),e.$el.find("#cv-chat-submit").hide(),e.$el.find("#cv-chat-submit").removeClass("enabled").addClass("disabled").prop("disabled","true"),localStorage.getItem(i.businessName+"-chatSessionData_genesys")?e.$el.find("#"+o.entryID).show():e.$el.find("#"+o.entryID).hide(),e.$el.find("#"+o.submitID).show();e.$el.find(".cv-chat-va-typing").toggle(),e.$el.find(".cv-live-chat-agent-typing").toggle(),e.$el.find("#cv-live-chat-answer-history").animate({opacity:"toggle"},"fast",function(){e.$el.find("#cv-chat-answer-history").animate({opacity:"toggle"},"fast")}),e.livechatrendered=!e.livechatrendered});else if(i.vaLcTabs===!1&&i.terminateVASession===!0&&(clearInterval(window.proactiveEndSessionInterval),localStorage.getItem(i.businessName+"-chatSessionData_genesys")))var a=setInterval(function(){e.$el.find("#"+e.entryID).length>0&&(e.$el.find("#"+e.entryID).show(),clearInterval(a))},20);o.$el.find("#cv-chat-body").append('<div id="cv-live-chat-answer-history" class="cv-chat-history"></div>'),o.requestChat()})},500))};void 0!==t.get(i.livechatOfferETV)&&i.liveperson.leTag.enabled===!1&&(n=t.get(i.livechatOfferETV).toLowerCase(),"true"!==n||localStorage.getItem(i.businessName+"-chatSessionData_genesys")||(e("#cv-close-cvbtn").on("click",function(e){o.endChat()}),a()))},requestChat:function(){var t=this,n={headers:{appName:"chatBot.resi",accessKey:"chatBot.resi",channel:"chat",lang:"en-us"},chatData:{},kvpUserData:{InitiationDate:(new Date).toString(),Source:"chatBot.resi"}},o=JSON.parse(localStorage.getItem(i.businessName+"-pcsData_genesys"));n.headers.transactionId=t.model.get("ident").substring(0,8),n.chatData.custFirstName=o.custFirstName,n.chatData.custLastName=o.custLastName,n.chatData.emailAddress=o.emailAddress,n.kvpUserData.optId=o.optId,n.kvpUserData.ServiceSubType=o.ServiceSubType,n.kvpUserData.CustProd=o.CustProd,n.kvpUserData.subject=t.model.get("question"),n.kvpUserData.PhoneNumber=o.PhoneNumber,window.CVSaveAttributes&&window.CVSaveAttributes(),window.cvCrossStorage.onConnect().then(function(){console.log("requesting livechat"),window.cvCrossStorage.set(i.businessName+"-requestingChat_genesys","true"),localStorage.setItem(i.businessName+"-requestingChat_genesys","true"),e.ajax({type:"POST",url:i.genesys.hashingEndpoint,dataType:"json",data:n}).done(function(e){var n=JSON.parse(e);n.status.success===!0?(t.chatSessionData=n.chatData,window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(i.businessName+"-requestingChat_genesys"),window.cvCrossStorage.set(i.businessName+"-chatSessionData_genesys",JSON.stringify(n.chatData))}),localStorage.removeItem(i.businessName+"-requestingChat_genesys"),localStorage.setItem(i.businessName+"-chatSessionData_genesys",JSON.stringify(n.chatData)),console.log(n.chatData),t.startChatSession()):(t.addUnavailableMessage(),console.log("no LC service available"),console.log(n))}).fail(function(e,t,n){console.log(t+" - "+n)})})},startChatSession:function(){var t=this,n=function(){e.ajax({type:"GET",url:"https://contactusprod.cablevision.com/cvContactUs/rest/chat/refresh",data:t.chatSessionData}).done(function(e){e.status.success===!0?(console.log(e),t.chatSessionData.scriptPos=e.chatUserSessionData.scriptPos,window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(i.businessName+"-chatSessionData_genesys",JSON.stringify(t.chatSessionData))}),localStorage.setItem(i.businessName+"-chatSessionData_genesys",JSON.stringify(t.chatSessionData)),t.updateConnectionStatus(e),t.updateAgentTypingStatus(e),t.renderMessages(e)):(t.chatSessionData={},window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(i.businessName+"-chatSessionData_genesys",i.businessName+"-agentPickedUp_genesys")}),localStorage.removeItem(i.businessName+"-chatSessionData_genesys"),localStorage.removeItem(i.businessName+"-agentPickedUp_genesys"),clearInterval(t.refreshInterval),console.log("chat session ended"),console.log(e))}).fail(function(e,t,n){console.log(t+" - "+n)})};n(),t.refreshInterval=setInterval(n,1e3)},updateConnectionStatus:function(t){var n=this;localStorage.getItem(i.businessName+"-agentPickedUp_genesys")||t.chatUserSessionData.messages.some(function(t){return"AGENT"===t.userTypeCode?(n.$el.find("#cv-chat-user-entry").parent().append('<input id="'+n.entryID+'" type="text" name="entry" autocomplete="off" class="cv-form-control cv-chat-user-entry" style="display: none;" placeholder="'+i.defaultPlaceholderText+'">'),(n.$el.find("#cv-live-chat-answer-history").is(":visible")||i.vaLcTabs===!1)&&n.$el.find("#"+n.entryID).show(),n.$el.find("#"+n.entryID).css({"font-size":i.inputFontSize,"border-radius":i.inputBorderRadius}),n.$el.find("#"+n.entryID).keyup(function(e){n.keyPress(e,n)}),e(".lc-close-cvbtn").on("click",function(e){e.preventDefault(),n.endChat()}),i.vaLcTabs===!1&&n.$el.find("#cv-chat-answer-history").hide(),window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(i.businessName+"-agentPickedUp_genesys","true")}),localStorage.setItem(i.businessName+"-agentPickedUp_genesys","true"),n.$el.find("#cv-chat-loader-layer").hide(),!0):!1})},updateAgentTypingStatus:function(e){var t=this,n=e.chatUserSessionData.messages.some(function(e){return"AGENT"===e.userTypeCode&&e.text===e.userNickName+" is typing."?(t.$el.find("#cv-chat-form").before('<span class="cv-live-chat-agent-typing">'+e.userNickName+" is typing...</span>"),!0):!1});n||t.$el.find(".cv-live-chat-agent-typing").remove()},renderMessages:function(t){var n=this;t.chatUserSessionData.messages.forEach(function(t){var o,a,s;if("EXTERNAL"===t.userTypeCode||"AGENT"===t.userTypeCode){if(t.text===t.userNickName+" is typing."||t.text===t.userNickName+" has stopped typing.")return;o=e("<div>").addClass("cv-live-chat-info"),o.html(t.text.replace("<div","<span").replace("</div>","</span>")),n.$el.find("#cv-live-chat-answer-history").append(o),"EXTERNAL"===t.userTypeCode&&(o.addClass("cv-live-chat-system"),a=new Date,s="",i.lcTimeStamp===!0&&(s=a.getHours()+":"+(a.getMinutes()<10?"0":"")+a.getMinutes()),o.after('<span class="time-stamp-system">Info&nbsp'+s+"</span>")),"AGENT"===t.userTypeCode&&(o.addClass("cv-live-chat-agent"),n.$el.find(".cv-live-chat-agent").last().wrap('<div class="cv-col-xs-12"></div>'),a=new Date,s="",s=a.getHours()+":"+(a.getMinutes()<10?"0":"")+a.getMinutes(),n.$el.find(".cv-live-chat-agent").last().after('<span class="time-stamp-info">'+t.userNickName+"&nbsp"+s+"</span>"),n.$el.find(".cv-live-chat-agent").addClass("ts-shim")),n.$el.find("#cv-live-chat-answer-history").is(":visible")||(n.newLines++,n.$el.find(".cv-live-chat-active-title").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> <span style="margin-right:10px;">Back to Live Chat </span>'+n.newLines+' <i class="fa fa-comment lc-fa-comment" aria-hidden="true"></i>'),i.vaLcTabs===!0&&n.$el.find("#lc-tab a").html("Live Chat "+n.newLines+' <i class="fa fa-comment" aria-hidden="true"></i><i class="fa fa-times lc-close-cvbtn"></i></a>'))}else"CLIENT"===t.userTypeCode&&(o=e("<div>").addClass("cv-live-chat-user"),o.html(t.text),n.$el.find("#cv-live-chat-answer-history").append(o),n.$el.find(".cv-live-chat-user").last().wrap('<div class="cv-col-xs-12"></div>'),a=new Date,s="",s=a.getHours()+":"+(a.getMinutes()<10?"0":"")+a.getMinutes(),n.$el.find(".cv-live-chat-user").last().after('<span class="time-stamp-user">You '+s+"</span>"),n.$el.find(".cv-live-chat-user").addClass("ts-shim"));n.$el.find("#cv-live-chat-answer-history").scrollTo(n.$el.find("#cv-live-chat-answer-history").children().get(-1),500)}),window.CVSaveAttributes()},keyPress:function(t,n){var i=this;t.preventDefault(),n.setButtonState(),13==t.keyCode&&n.addLine(),clearTimeout(i.userTypingTimeout),i.userTyping||(i.userTyping=!0,e.ajax({type:"GET",url:"https://contactusprod.cablevision.com/cvContactUs/rest/chat/userTyping",dataType:"json",data:i.chatSessionData})),i.userTypingTimeout=setTimeout(function(){e.ajax({type:"GET",url:"https://contactusprod.cablevision.com/cvContactUs/rest/chat/userStoppedTyping",dataType:"json",data:i.chatSessionData}),i.userTyping=!1},2e3)},setButtonState:function(){var t=this,n=t.$el.find("#"+t.entryID).val();e.trim(n).length>0?t.$el.find("#"+t.submitID).removeClass("disabled").removeAttr("disabled"):t.$el.find("#"+t.submitID).addClass("disabled").prop("disabled","true")},addLine:function(){var t=this;t.$el.find("#"+t.submitID).addClass("disabled").prop("disabled","true"),""!==t.$el.find("#"+t.entryID).val().trim()&&(t.chatSessionData.clientMessage=this.$el.find("#"+t.entryID).val(),e.ajax({type:"GET",url:"https://contactusprod.cablevision.com/cvContactUs/rest/chat/send",dataType:"json",data:t.chatSessionData}),t.$el.find("#"+t.entryID).val(""),window.CVMobile===!0&&e(".cv-va-bootstrap #cv-live-chat-user-entry").blur())},addUnavailableMessage:function(){var t,n,o,a,s,r,l=this;t=e("<div>").addClass("cv-live-chat-info"),t.html(decodeURIComponent(i.liveperson.unavailableMessage)),t.addClass("cv-live-chat-system"),l.$el.find("#cv-live-chat-answer-history").append(t),n=new Date,o="",i.lcTimeStamp===!0&&(o=n.getHours()+":"+(n.getMinutes()<10?"0":"")+n.getMinutes()),t.after('<span class="time-stamp-system">Info&nbsp'+o+"</span>"),a=l.$el.find(".cv-live-chat-info").get(-2),s=e(a).next(".cv-live-chat-info"),e(s).remove("div"),r=e(s).text(),e(a).append('<br><span dir="ltr">'+r+"</span>")},endChat:function(t){var n=this;localStorage.getItem(i.businessName+"-chatSessionData_genesys")&&(e.ajax({type:"GET",url:"https://contactusprod.cablevision.com/cvContactUs/rest/chat/disconnect",dataType:"json",data:n.chatSessionData}),clearInterval(n.refreshInterval),setTimeout(function(){n.chatSessionData={},window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(i.businessName+"-chatSessionData_genesys",i.businessName+"-agentPickedUp_genesys")}).then(function(){localStorage.removeItem(i.businessName+"-chatSessionData_genesys"),localStorage.removeItem(i.businessName+"-agentPickedUp_genesys"),n.model.closeSession(),window.resetVA()}),i.terminateVASession===!0&&(clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(i.businessName+"-cvVaBootstrapState"),localStorage.removeItem(i.businessName+"-cvVaModel"),localStorage.removeItem(i.businessName+"-cvVaStyles"),localStorage.removeItem(i.businessName+"-cvVaInitCall"),localStorage.removeItem(i.businessName+"-cvVaCollectionLength"),localStorage.removeItem(i.businessName+"-cvVaTimestamp"),window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.localInitCall=void 0,window.sessionFlushInterval=setInterval(function(){clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(i.businessName+"-cvVaBootstrapState"),localStorage.removeItem(i.businessName+"-cvVaModel"),localStorage.removeItem(i.businessName+"-cvVaStyles"),localStorage.removeItem(i.businessName+"-cvVaInitCall"),localStorage.removeItem(i.businessName+"-cvVaCollectionLength"),localStorage.removeItem(i.businessName+"-cvVaTimestamp"),window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.localInitCall=void 0},0),setTimeout(function(){window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(i.businessName+"-cvVaBootstrapState",i.businessName+"-cvVaModel",i.businessName+"-cvVaStyles",i.businessName+"-cvVaInitCall",i.businessName+"-cvVaCollectionLength",i.businessName+"-cvVaTimestamp")}).then(function(e){window.loadFromStorage=!1,clearInterval(window.sessionFlushInterval)})},150))},500))}});return a}),define("views/virtual_assistant/components/print_transcript",["jquery","underscore_loader","backbone"],function(e,t,n){t=window.CVUnderscore;var i=n.View.extend({el:"#print_transcript",min_transactions:2,events:{click:"handle"},initialize:function(e){n.View.prototype.initialize.call(this,e),this.render(this.model,this.collection),this.min_transactions=e.min_transactions||this.min_transactions,this.collection.on("add remove reset",this.render,this)},render:function(e,t){return this.collection.length<this.min_transactions?this.$el.addClass("disabled"):this.$el.removeClass("disabled"),this},handle:function(t){t.preventDefault(),e(t.target).hasClass("disabled")||window.print()}});return i}),define("views/virtual_assistant/components/launcher",["jquery","jquery_ui","backbone","settings"],function(e,t,n,i){_=window.CVUnderscore;var o=n.View.extend({el:"cv-va-opener",customLauncherInjectedIndex:-1,initialize:function(t){n.View.prototype.initialize.call(this,t);var o,a,s,r='<style class="cv-va-launcher-styles">';for(o=0;o<i.customLaunchers.length;o++)if(s=!1,window.CVMobile===!1)for(a=0;a<i.customLaunchers[o].url.length;a++)i.customLaunchers[o].desktop===!0&&window.location.href.indexOf(i.customLaunchers[o].url[a])>-1&&e(i.customLaunchers[o].elementSelector).length>0&&(r=i.customLaunchers[o].launcherStyle.replace(/QUOTES/g,'"').replace("LIBENDPOINT",i.libEndpoint),this.customLauncherInjectedIndex=o,s||(e(r).appendTo("head"),this.render(i.customLaunchers[o].elementSelector,!0)),s=!0);else if(window.CVMobile===!0)for(a=0;a<i.customLaunchers[o].url.length;a++)i.customLaunchers[o].mobile===!0&&window.location.href.indexOf(i.customLaunchers[o].url[a])>-1&&e(i.customLaunchers[o].elementSelector).length>0&&(r=i.customLaunchers[o].launcherStyle.replace(/QUOTES/g,'"').replace("LIBENDPOINT",i.libEndpoint),this.customLauncherInjectedIndex=o,s||(e(r).appendTo("head"),this.render(i.customLaunchers[o].elementSelector,!0)),s=!0);this.customLauncherInjectedIndex<0&&(r+=".cv-va-opener, .cv-va-opener:hover {","liveperson"!==i.livechatVendor||i.liveperson.leTag.injectOnLauncher===!1?(r+="position: fixed !important;",r+="pointer-events: all;",r=r+"left: "+i.launcherCSS.left+";",r=r+"right: "+i.launcherCSS.right+";",r=r+"top:"+i.launcherCSS.top+";",r=r+"bottom:"+i.launcherCSS.bottom+";",r=r+"background-color: "+i.launcherCSS.backgroundColor+";",r+="border: none;",r=r+"color: "+i.launcherCSS.color+";",r+="text-align: center;",r+="text-decoration: none;",r+="display: inline-block;",r+="cursor: pointer;",r+="z-index: 9999999;",r+="padding: 10px;",r=r+"width: "+i.launcherCSS.width+";",r=r+"border-radius: "+i.launcherCSS.borderRadius+";",r=r+"height: "+i.launcherCSS.height+";",r+="outline: none;",r+="}",r+=".cv-va-opener i {",r+="font-size: 38px !important;",r+="}",r+=".cv-va-opener div:first-child {",r+="margin-top: -7px;",r=r+"display: "+i.launcherCSS.displayChildren+";",r+="}",r+=".cv-va-opener div:nth-child(2) {",r+="line-height: 10px;",r=r+"font-family: "+i.fontfamily+";",r+="font-weight: bold;",r=r+"font-size: "+i.launcherCSS.fontSize+";",r+="margin-top: 4px;",r+="margin-bottom: -2px;",r+="letter-spacing: 0.6px;",r=r+"display: "+i.launcherCSS.displayChildren+";",r+="}"):("liveperson"===i.livechatVendor||i.liveperson.leTag.injectOnLauncher===!0)&&(r+="position: absolute !important;",r+="left: 0 !important;",r+="top: 0 !important;",r+="right: 0 !important;",r+="bottom: 0 !important;",r+="background: none !important;",r+="border: none; !important;",r+="text-decoration: none; !important;",r+="z-index: 9999999;",r+="cursor: pointer;",r+="width: 100% !important;",r+="}"),i.launcherCSS.before===!0&&(r+=".cv-va-opener:before {",r=r+"border-color: "+i.launcherCSS.backgroundColor+";",r+="border-radius: 50%;",r+="border-style: solid;",r+="border-width: 0 20px;",r+="bottom: 0;",r+="clip: rect(20px, 35px, 42px, 0px);",r+='content: " ";',r+="height: 40px;",r+="position: absolute;",r+="right: -40px;",r+="width: 30px;",r+="z-index: -1;",r+="box-sizing: content-box;",r+="}"),r+="</style>",window.CVMobile===!1&&e(r).appendTo("head"))},render:function(t,n,o){var a=this;console.log("render launcher");var s;if(window.CVMobile===!1||i.selectiveInjection.device.mobile===!0){if(t instanceof e||(t=e(t)),void 0===n||n===!1)this.customLauncherInjectedIndex<0?"liveperson"!==i.livechatVendor||i.liveperson.leTag.injectOnLauncher===!1?t.append('<button class="cv-va-bootstrap cv-va-opener" type="button"><div><i class="fa fa-comments" aria-hidden="true"></i></div></button>'):("liveperson"===i.livechatVendor||i.liveperson.leTag.injectOnLauncher===!0)&&t.append('<button class="cv-va-opener" type="button"></button>'):(t.append(i.customLaunchers[this.customLauncherInjectedIndex].launcherHtml.replace(/QUOTES/g,'"')),window.CVMobile===!0&&"true"!==localStorage.getItem(i.businessName+"-cvVaMinimized")&&e(".cv-va-bootstrap.cv-mobile-floating").show().removeClass("hidden"));else if(n===!0)if(this.customLauncherInjectedIndex<0){if("liveperson"!==i.livechatVendor||i.liveperson.leTag.injectOnLauncher===!1)t.prepend('<button class="cv-va-bootstrap cv-va-opener" type="button"><div><i class="fa fa-comments" aria-hidden="true"></i></div></button>');else if("liveperson"===i.livechatVendor||i.liveperson.leTag.injectOnLauncher===!0)if(void 0===o)t.prepend('<button class="cv-va-opener" type="button"></button>');else{var r=(new Date).getMilliseconds();t.prepend('<button id="cv-va-opener-'+r+'" class="cv-va-opener" type="button"></button>'),t.find("#cv-va-opener-"+r).css(o)}}else t.prepend(s||i.customLaunchers[a.customLauncherInjectedIndex].launcherHtml.replace(/QUOTES/g,'"')),window.CVMobile===!0&&"true"!==localStorage.getItem(i.businessName+"-cvVaMinimized")&&e(".cv-va-bootstrap.cv-mobile-floating").show().removeClass("hidden");("liveperson"!==i.livechatVendor||i.liveperson.leTag.injectOnLauncher===!1)&&this.customLauncherInjectedIndex<0&&t.find(".cv-va-opener").append("<div>"+i.launcherText+"</div>"),t.find(".cv-va-opener").on("click",function(t){t.stopPropagation(),e(".LPMimage").each(function(t){e(this).attr("src").indexOf("invitation/need_help_on.gif")>-1&&e(this).parent().parent().hide()}),window.CVlaunchVA()})}},hide:function(){this.$el.hide()},show:function(){this.$el.hide()},remove:function(){this.$el.remove()}});return o}),define("views/virtual_assistant/components/faq_list",["jquery","underscore_loader","backbone","views/virtual_assistant/components/base"],function(e,t,n,i){t=window.CVUnderscore;var o=i.extend({bindEvent:"change:faqitems",el:"#faq_list",render:function(e){var t=e.get("faqitems");return t&&"string"==typeof t.faqlist&&(this.$el.html(t.faqlist),this.$el.find("ul").addClass("cv-list-group"),this.$el.find("li").addClass("cv-faq-item").css("font-size","13px"),this.$el.find(".cv-faq-item").prepend('<i class="faq-item-icon fa fa-angle-double-right" aria-hidden="true"></i>')),this}});return o}),define("views/virtual_assistant/components/breadcrumb",["jquery","underscore_loader","backbone","views/virtual_assistant/components/base"],function(e,t,n,i){t=window.CVUnderscore;var o=i.extend({bindEvent:"change:faqitems",el:"#breadcrumb",render:function(e){var t=e.get("faqitems");return t&&"string"==typeof t.breadcrumb&&(this.$el.html(t.breadcrumb),this.$el.find("li").parent().addClass("breadcrumb"),this.$el.find("a").has("li")?this.$el.find("a").parent().addClass("breadcrumb-item"):this.$el.find("a").wrap('<li class="breadcrumb-item"></div>'),this.$el.find(".seperator").remove()),this}});return o}),define("views/virtual_assistant/components/dropdown",["jquery","underscore_loader","backbone","views/virtual_assistant/components/base"],function(e,t,n,i){t=window.CVUnderscore;var o=i.extend({bindEvent:"change:faqitems",el:"#dropdown",events:{"change select":"changeContext"},changeContext:function(e){var t=this.model.get("maincat"),n=this.$el.find("select").val(),i=t+"."+n;this.model.changeContext(i)},render:function(e){var t=e.get("faqitems");return t&&"string"==typeof t.dropdown&&(this.$el.html(t.dropdown),this.$el.find("select").addClass("cv-form-control")),this}});return o}),define("views/virtual_assistant/components/text_resize",["jquery","underscore_loader","backbone"],function(e,t,n){t=window.CVUnderscore;var i=n.View.extend({el:"#cv-chat-content",currentClass:"font-medium",events:{"click #cv-font-size a":"render"},render:function(t){t.preventDefault();var n=e(t.currentTarget);e("#cv-font-size i.active-cv-font-size").removeClass("active-cv-font-size"),n.find("i").addClass("active-cv-font-size");var i="font-"+n.data("class");this.$el.removeClass(this.currentClass).addClass(i),this.currentClass=i}});return i}),define("views/virtual_assistant/components/input_launcher",["jquery","jquery_ui","backbone","settings"],function(e,t,n,i){_=window.CVUnderscore;var o=n.View.extend({initialize:function(t){n.View.prototype.initialize.call(this,t);var o='<style class="cv-va-input-launcher-styles">';o+=".cv-va-input-launcher-container {",o+="border-radius: 6px;",o+="display: flex;",o+="display: -webkit-flex;",o+="flex-direction: column;",o+="-webkit-flex-direction: column;",o+="position: static;",o+="z-index: auto;",o+="pointer-events: all;",o=o+"background-color: "+i.inputLauncher.css.container.backgroundColor+";",o=o+"border: "+i.inputLauncher.css.container.border+";",o=o+"padding: "+i.inputLauncher.css.container.padding+";",o+="}",o+=".cv-va-input-launcher-header {",o+="font-size: 16px;",o+="display: table;",o+="border-radius: 5px 5px 0 0;",o+="position: relative;",o+="top: 1px;",o+="border-bottom: none !important;",o=o+"background-color: "+i.inputLauncher.css.header.backgroundColor+";",o=o+"border: "+i.inputLauncher.css.header.border+";",o=o+"padding: "+i.inputLauncher.css.header.padding+";",o+="}",o+=".cv-va-input-launcher-header i {",o+="font-size: 18px;",o+="margin-left: 2px;",o=o+"color: "+i.submitBtn.backgroundColor+";",o+="}",o+=".cv-va-input-launcher-body {",o+="border-radius: 0px 5px 5px 5px;",o=o+"background-color: "+i.inputLauncher.css.body.backgroundColor+";",o=o+"border: "+i.inputLauncher.css.body.border+";",o=o+"padding: "+i.inputLauncher.css.body.padding+";",o+="}",o+=".cv-va-input-launcher-form {",o+="display: flex;",o+="display: -webkit-flex;",o+="flex-direction: row;",o+="-webkit-flex-direction: row;",o+="padding: 3px;",o+="background-color: #fff;",o+="border: 1px solid #ccc;",o+="border-radius: 6px;",o+="}",o+=".cv-va-input-launcher-form input {",o+="margin-right: 2px;",o+="height: 39px !important;",o+="border: none !important;",o+="box-shadow: none !important;",o+="}",o+=".cv-va-input-launcher-form button {",o+="color: #fff;",o=o+"background-color: "+i.submitBtn.backgroundColor+";",o+="}",o+=".cv-va-input-launcher-form button:hover, .cv-va-input-launcher-form button:focus {",o+="color: #fff !important;",o+="}",o+="</style>",e(o).appendTo("head")},render:function(t){t instanceof e||(t=e(t));var n=e("<section>").addClass("cv-va-bootstrap cv-va-input-launcher-container"),o=e("<div>").addClass("cv-va-input-launcher-header").html("<div>"+i.inputLauncher.headerText+'<i class="'+i.inputLauncher.headerFontAwesome+'" aria-hidden="true"></i></div>'),a=e("<div>").addClass("cv-va-input-launcher-body"),s=e("<div>").addClass("cv-va-input-launcher-form"),r=e("<input>").addClass("cv-form-control").attr("placeholder",i.inputLauncher.inputPlaceholder),l=e("<button>").addClass("cvbtn").html(i.inputLauncher.submitBtnText+' <i class="'+i.inputLauncher.submitBtnFontawesome+'" aria-hidden="true"></i>');s.append(r,l),a.append(s),n.append(o,a),t.prepend(n);var c=function(){void 0==window.cvVaCollectionLength&&(window.CVVA.inputLauncher={trigger:!0,userQuestion:e(".cv-va-input-launcher-form input").val()||!1}),window.CVlaunchVA()};t.find(".cv-va-input-launcher-form button").on("click",function(e){e.stopPropagation(),c()}),t.find(".cv-va-input-launcher-form input").on("keyup",function(e){13===e.keyCode&&c()})}});return o}),define("views/virtual_assistant/index",["jquery","bootstrap","underscore_loader","backbone","views/virtual_assistant/components/container","views/virtual_assistant/components/ask_form","views/virtual_assistant/components/answer_inline","views/virtual_assistant/components/autocomplete","views/virtual_assistant/components/cv_livechat","views/virtual_assistant/components/liveperson","views/virtual_assistant/components/linkR","views/virtual_assistant/components/genesys","views/virtual_assistant/components/print_transcript","views/virtual_assistant/components/launcher","views/virtual_assistant/components/faq_list","views/virtual_assistant/components/breadcrumb","views/virtual_assistant/components/dropdown","views/virtual_assistant/components/text_resize","views/virtual_assistant/components/eocs","views/virtual_assistant/components/input_launcher","settings"],function(e,t,n,o,a,s,r,l,c,u,d,h,p,v,f,m,g,b,y,w,S){n=window.CVUnderscore;var C=o.View.extend({initialize:function(e){o.View.prototype.initialize.call(this,e),this.render()},render:function(){e(S.trigger).off("click"),e(S.trigger).removeProp("onclick"),e(S.trigger).prop("href","#");var t=this,n=function(){if(t.container=new a({model:t.model,collection:t.collection}),t.ask_form=new s({model:t.model,collection:t.collection}),t.faq_list=new f({model:t.model,collection:t.collection}),t.breadcrumb=new m({model:t.model,collection:t.collection}),t.dropdown=new g({model:t.model,collection:t.collection}),t.print_transcript=new p({model:t.model,collection:t.collection}),t.eocs=new y({model:t.model,collection:t.collection}),t.autocomplete=new l({model:t.model,collection:t.collection,endpoint:S.endpoint||"./bot.htm"}),t.text_resize=new b({model:t.model,collection:t.collection}),S.launcherInjection===!0){var n=!1;for(i=0;i<S.customLaunchers.length;i++)window.location.href.indexOf(S.customLaunchers[i].url)>-1&&e(S.customLaunchers[i].elementSelector).length>0&&(n=!0);if(t.launcher=new v,S.lcAvailabilityLauncher===!1&&!n&&window.CVMobile===!1)if(S.selectiveLauncherInjection.enabled===!0)for(i=0;i<S.selectiveLauncherInjection.url.length;i++)window.location.href.indexOf(S.selectiveLauncherInjection.url[i])>-1&&t.launcher.render(S.appendLauncherTo);else t.launcher.render(S.appendLauncherTo)}if(S.inputLauncher.enabled===!0)if(t.inputLauncher=new w,S.inputLauncher.selectiveInjection.enabled===!0)for(i=0;i<S.inputLauncher.selectiveInjection.url.length;i++)window.location.href.indexOf(S.inputLauncher.selectiveInjection.url[i])>-1&&t.inputLauncher.render(S.inputLauncher.appendTo);else t.inputLauncher.render(S.inputLauncher.appendTo);t.answer=new r({model:t.model,collection:t.collection,bindEvent:"change",launcher:t.launcher}),"liveperson"===S.livechatVendor?(S.launcherInjection===!0&&S.lcAvailabilityLauncher===!0?t.liveperson=new u({model:t.model,collection:t.collection,launcher:t.launcher}):t.liveperson=new u({model:t.model,collection:t.collection}),t.endChatLP=function(){t.liveperson.endChat(t.liveperson)}):"creative virtual"===S.livechatVendor?t.cvLiveChat=new c({model:t.model,collection:t.collection}):"linkR"===S.livechatVendor?t.linkR=new d({model:t.model,collection:t.collection}):"genesys"===S.livechatVendor&&(t.linkR=new h({model:t.model,collection:t.collection})),window.CVMobile===!0&&e(".cv-va-bootstrap #cv-chat-header, .cv-va-bootstrap #cv-chat-body, .cv-va-bootstrap #cv-chat-form").find("*").each(function(){})};S.persistenceEnabled===!0?(window.cvCrossStorage.onConnect().then(function(){}).then(function(){return window.cvCrossStorage.get(S.businessName+"-cvVaContentWidth",S.businessName+"-cvVaContentHeight",S.businessName+"-cvVaMinimized")}).then(function(e){null!==e[0]&&localStorage.setItem(S.businessName+"-cvVaContentWidth",e[0]),null!==e[1]&&localStorage.setItem(S.businessName+"-cvVaContentHeight",e[1]),null!==e[2]&&localStorage.setItem(S.businessName+"-cvVaMinimized",e[2])}),n()):n()}});return C}),function(e){function t(){}function n(e,t){return function(){e.apply(t,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");
if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function o(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void i._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?a:s)(t.promise,e._value);var i;try{i=n(e._value)}catch(o){return void s(t.promise,o)}a(t.promise,i)}))}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var o=t.then;if(t instanceof i)return e._state=3,e._value=t,void r(e);if("function"==typeof o)return void c(n(o,t),e)}e._state=1,e._value=t,r(e)}catch(a){s(e,a)}}function s(e,t){e._state=2,e._value=t,r(e)}function r(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;n>t;t++)o(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(i){if(n)return;n=!0,s(t,i)}}var u=setTimeout;i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,n){var i=new this.constructor(t);return o(this,new l(e,n,i)),i},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function i(a,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var r=s.then;if("function"==typeof r)return void r.call(s,function(e){i(a,e)},n)}t[a]=s,0===--o&&e(t)}catch(l){n(l)}}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)i(a,t[a])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){for(var i=0,o=e.length;o>i;i++)e[i].then(t,n)})},i._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){u(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},window.Promise||(window.Promise=i),"undefined"!=typeof module&&module.exports?module.exports=i:e.Promise||(e.Promise=i)}(this),define("iePollyfill",function(){}),function(e){function t(e,n){n=n||{},this._id=t._generateUUID(),this._promise=n.promise||Promise,this._frameId=n.frameId||"CrossStorageClient-"+this._id,this._origin=t._getOrigin(e),this._requests={},this._connected=!1,this._closed=!1,this._count=0,this._timeout=n.timeout||5e3,this._listener=null,this._installListener();var i;n.frameId&&(i=document.getElementById(n.frameId)),i&&this._poll(),i=i||this._createFrame(e),this._hub=i.contentWindow}t.frameStyle={display:"none",position:"absolute",top:"-999px",left:"-999px"},t._getOrigin=function(e){var t,n,i;return t=document.createElement("a"),t.href=e,t.host||(t=window.location),n=t.protocol&&":"!==t.protocol?t.protocol:window.location.protocol,i=n+"//"+t.host,i=i.replace(/:80$|:443$/,"")},t._generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})},t.prototype.onConnect=function(){var e=this;return this._connected?this._promise.resolve():this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(this._requests.connect||(this._requests.connect=[]),new this._promise(function(t,n){var i=setTimeout(function(){n(new Error("CrossStorageClient could not connect"))},e._timeout);e._requests.connect.push(function(e){return clearTimeout(i),e?n(e):void t()})}))},t.prototype.set=function(e,t){return this._request("set",{key:e,value:t})},t.prototype.get=function(e){var t=Array.prototype.slice.call(arguments);return this._request("get",{keys:t})},t.prototype.del=function(){var e=Array.prototype.slice.call(arguments);return this._request("del",{keys:e})},t.prototype.clear=function(){return this._request("clear")},t.prototype.getKeys=function(){return this._request("getKeys")},t.prototype.close=function(){var e=document.getElementById(this._frameId);e&&e.parentNode.removeChild(e),window.removeEventListener?window.removeEventListener("message",this._listener,!1):window.detachEvent("onmessage",this._listener),this._connected=!1,this._closed=!0},t.prototype._installListener=function(){var e=this;this._listener=function(t){var n,i,o,a;if(!e._closed&&t.data&&"string"==typeof t.data&&(i="null"===t.origin?"file://":t.origin,i===e._origin))if("cross-storage:unavailable"!==t.data){if(-1!==t.data.indexOf("cross-storage:")&&!e._connected){if(e._connected=!0,!e._requests.connect)return;for(n=0;n<e._requests.connect.length;n++)e._requests.connect[n](o);delete e._requests.connect}if("cross-storage:ready"!==t.data){try{a=JSON.parse(t.data)}catch(s){return}a.id&&e._requests[a.id]&&e._requests[a.id](a.error,a.result)}}else{if(e._closed||e.close(),!e._requests.connect)return;for(o=new Error("Closing client. Could not access localStorage in hub."),n=0;n<e._requests.connect.length;n++)e._requests.connect[n](o)}},window.addEventListener?window.addEventListener("message",this._listener,!1):window.attachEvent("onmessage",this._listener)},t.prototype._poll=function(){var e,t,n;e=this,n="file://"===e._origin?"*":e._origin,t=setInterval(function(){return e._connected?clearInterval(t):void(e._hub&&e._hub.postMessage("cross-storage:poll",n))},1e3)},t.prototype._createFrame=function(e){var n,i;n=window.document.createElement("iframe"),n.id=this._frameId;for(i in t.frameStyle)t.frameStyle.hasOwnProperty(i)&&(n.style[i]=t.frameStyle[i]);return window.document.body.appendChild(n),n.src=e,n},t.prototype._request=function(e,t){var n,i;return this._closed?this._promise.reject(new Error("CrossStorageClient has closed")):(i=this,i._count++,n={id:this._id+":"+i._count,method:"cross-storage:"+e,params:t},new this._promise(function(e,t){var o,a,s;o=setTimeout(function(){i._requests[n.id]&&(delete i._requests[n.id],t(new Error("Timeout: could not perform "+n.method)))},i._timeout),i._requests[n.id]=function(a,s){return clearTimeout(o),delete i._requests[n.id],a?t(new Error(a)):void e(s)},Array.prototype.toJSON&&(a=Array.prototype.toJSON,Array.prototype.toJSON=null),s="file://"===i._origin?"*":i._origin,i._hub.postMessage(JSON.stringify(n),s),a&&(Array.prototype.toJSON=a)}))},"undefined"!=typeof module&&module.exports?module.exports=t:"undefined"!=typeof exports?exports.CrossStorageClient=t:"function"==typeof define&&define.amd?define("crossStorage",[],function(){return t}):e.CrossStorageClient=t}(this),define("utils/get-param",[],function(){var e=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)","i"),n=t.exec(window.location.href);return null===n?"":decodeURI(n[1])};return e});var CVMobileDet={initCompleted:!1,isWebkit:!1,isMobilePhone:!1,isIphone:!1,isAndroid:!1,isAndroidPhone:!1,isTierTablet:!1,isTierIphone:!1,isTierRichCss:!1,isTierGenericMobile:!1,engineWebKit:"webkit",deviceIphone:"iphone",deviceIpod:"ipod",deviceIpad:"ipad",deviceMacPpc:"macintosh",deviceAndroid:"android",deviceGoogleTV:"googletv",deviceHtcFlyer:"htc_flyer",deviceWinPhone7:"windows phone os 7",deviceWinPhone8:"windows phone 8",deviceWinMob:"windows ce",deviceWindows:"windows",deviceIeMob:"iemobile",devicePpc:"ppc",enginePie:"wm5 pie",deviceBB:"blackberry",deviceBB10:"bb10",vndRIM:"vnd.rim",deviceBBStorm:"blackberry95",deviceBBBold:"blackberry97",deviceBBBoldTouch:"blackberry 99",deviceBBTour:"blackberry96",deviceBBCurve:"blackberry89",deviceBBCurveTouch:"blackberry 938",deviceBBTorch:"blackberry 98",deviceBBPlaybook:"playbook",deviceSymbian:"symbian",deviceSymbos:"symbos",deviceS60:"series60",deviceS70:"series70",deviceS80:"series80",deviceS90:"series90",devicePalm:"palm",deviceWebOS:"webos",deviceWebOShp:"hpwos",engineBlazer:"blazer",engineXiino:"xiino",deviceNuvifone:"nuvifone",deviceBada:"bada",deviceTizen:"tizen",deviceMeego:"meego",deviceKindle:"kindle",engineSilk:"silk-accelerated",vndwap:"vnd.wap",wml:"wml",deviceTablet:"tablet",deviceBrew:"brew",deviceDanger:"danger",deviceHiptop:"hiptop",devicePlaystation:"playstation",devicePlaystationVita:"vita",deviceNintendoDs:"nitro",deviceNintendo:"nintendo",deviceWii:"wii",deviceXbox:"xbox",deviceArchos:"archos",engineOpera:"opera",engineNetfront:"netfront",engineUpBrowser:"up.browser",engineOpenWeb:"openweb",deviceMidp:"midp",uplink:"up.link",engineTelecaQ:"teleca q",engineObigo:"obigo",devicePda:"pda",mini:"mini",mobile:"mobile",mobi:"mobi",maemo:"maemo",linux:"linux",mylocom2:"sony/com",manuSonyEricsson:"sonyericsson",manuericsson:"ericsson",manuSamsung1:"sec-sgh",manuSony:"sony",manuHtc:"htc",svcDocomo:"docomo",svcKddi:"kddi",svcVodafone:"vodafone",disUpdate:"update",uagent:"",InitDeviceScan:function(){this.initCompleted=!1,navigator&&navigator.userAgent&&(this.uagent=navigator.userAgent.toLowerCase()),this.isWebkit=this.DetectWebkit(),this.isIphone=this.DetectIphone(),this.isAndroid=this.DetectAndroid(),this.isAndroidPhone=this.DetectAndroidPhone(),this.isTierIphone=this.DetectTierIphone(),this.isTierTablet=this.DetectTierTablet(),this.isMobilePhone=this.DetectMobileQuick(),this.isTierRichCss=this.DetectTierRichCss(),this.isTierGenericMobile=this.DetectTierOtherPhones(),this.initCompleted=!0},DetectIphone:function(){return this.initCompleted||this.isIphone?this.isIphone:-1<this.uagent.search(this.deviceIphone)?this.DetectIpad()||this.DetectIpod()?!1:!0:!1},DetectIpod:function(){return-1<this.uagent.search(this.deviceIpod)?!0:!1},DetectIphoneOrIpod:function(){return this.DetectIphone()||this.DetectIpod()?!0:!1},DetectIpad:function(){return-1<this.uagent.search(this.deviceIpad)&&this.DetectWebkit()?!0:!1},DetectIos:function(){return this.DetectIphoneOrIpod()||this.DetectIpad()?!0:!1},DetectAndroid:function(){return this.initCompleted||this.isAndroid?this.isAndroid:-1<this.uagent.search(this.deviceAndroid)||this.DetectGoogleTV()?!0:-1<this.uagent.search(this.deviceHtcFlyer)?!0:!1},DetectAndroidPhone:function(){return this.initCompleted||this.isAndroidPhone?this.isAndroidPhone:this.DetectAndroid()&&-1<this.uagent.search(this.mobile)||this.DetectOperaAndroidPhone()?!0:-1<this.uagent.search(this.deviceHtcFlyer)?!0:!1},DetectAndroidTablet:function(){return!this.DetectAndroid()||this.DetectOperaMobile()||-1<this.uagent.search(this.deviceHtcFlyer)?!1:-1<this.uagent.search(this.mobile)?!1:!0},DetectAndroidWebKit:function(){return this.DetectAndroid()&&this.DetectWebkit()?!0:!1},DetectGoogleTV:function(){return-1<this.uagent.search(this.deviceGoogleTV)?!0:!1},DetectWebkit:function(){return this.initCompleted||this.isWebkit?this.isWebkit:-1<this.uagent.search(this.engineWebKit)?!0:!1},DetectWindowsPhone:function(){return this.DetectWindowsPhone7()||this.DetectWindowsPhone8()?!0:!1},DetectWindowsPhone7:function(){return-1<this.uagent.search(this.deviceWinPhone7)?!0:!1},DetectWindowsPhone8:function(){return-1<this.uagent.search(this.deviceWinPhone8)?!0:!1},DetectWindowsMobile:function(){return this.DetectWindowsPhone()?!1:-1<this.uagent.search(this.deviceWinMob)||-1<this.uagent.search(this.deviceIeMob)||-1<this.uagent.search(this.enginePie)||-1<this.uagent.search(this.devicePpc)&&!(-1<this.uagent.search(this.deviceMacPpc))?!0:-1<this.uagent.search(this.manuHtc)&&-1<this.uagent.search(this.deviceWindows)?!0:!1},DetectBlackBerry:function(){return-1<this.uagent.search(this.deviceBB)||-1<this.uagent.search(this.vndRIM)?!0:this.DetectBlackBerry10Phone()?!0:!1},DetectBlackBerry10Phone:function(){return-1<this.uagent.search(this.deviceBB10)&&-1<this.uagent.search(this.mobile)?!0:!1},DetectBlackBerryTablet:function(){return-1<this.uagent.search(this.deviceBBPlaybook)?!0:!1},DetectBlackBerryWebKit:function(){return this.DetectBlackBerry()&&-1<this.uagent.search(this.engineWebKit)?!0:!1},DetectBlackBerryTouch:function(){return this.DetectBlackBerry()&&(-1<this.uagent.search(this.deviceBBStorm)||-1<this.uagent.search(this.deviceBBTorch)||-1<this.uagent.search(this.deviceBBBoldTouch)||-1<this.uagent.search(this.deviceBBCurveTouch))?!0:!1},DetectBlackBerryHigh:function(){return this.DetectBlackBerryWebKit()?!1:this.DetectBlackBerry()&&(this.DetectBlackBerryTouch()||-1<this.uagent.search(this.deviceBBBold)||-1<this.uagent.search(this.deviceBBTour)||-1<this.uagent.search(this.deviceBBCurve))?!0:!1},DetectBlackBerryLow:function(){return this.DetectBlackBerry()?this.DetectBlackBerryHigh()||this.DetectBlackBerryWebKit()?!1:!0:!1},DetectS60OssBrowser:function(){return this.DetectWebkit()&&(-1<this.uagent.search(this.deviceS60)||-1<this.uagent.search(this.deviceSymbian))?!0:!1},DetectSymbianOS:function(){return-1<this.uagent.search(this.deviceSymbian)||-1<this.uagent.search(this.deviceS60)||-1<this.uagent.search(this.deviceSymbos)&&this.DetectOperaMobile||-1<this.uagent.search(this.deviceS70)||-1<this.uagent.search(this.deviceS80)||-1<this.uagent.search(this.deviceS90)?!0:!1},DetectPalmOS:function(){return this.DetectPalmWebOS()?!1:-1<this.uagent.search(this.devicePalm)||-1<this.uagent.search(this.engineBlazer)||-1<this.uagent.search(this.engineXiino)?!0:!1},DetectPalmWebOS:function(){return-1<this.uagent.search(this.deviceWebOS)?!0:!1},DetectWebOSTablet:function(){return-1<this.uagent.search(this.deviceWebOShp)&&-1<this.uagent.search(this.deviceTablet)?!0:!1},DetectOperaMobile:function(){return-1<this.uagent.search(this.engineOpera)&&(-1<this.uagent.search(this.mini)||-1<this.uagent.search(this.mobi))?!0:!1},DetectOperaAndroidPhone:function(){return-1<this.uagent.search(this.engineOpera)&&-1<this.uagent.search(this.deviceAndroid)&&-1<this.uagent.search(this.mobi)?!0:!1},DetectOperaAndroidTablet:function(){return-1<this.uagent.search(this.engineOpera)&&-1<this.uagent.search(this.deviceAndroid)&&-1<this.uagent.search(this.deviceTablet)?!0:!1},DetectKindle:function(){return-1<this.uagent.search(this.deviceKindle)&&!this.DetectAndroid()?!0:!1},DetectAmazonSilk:function(){return-1<this.uagent.search(this.engineSilk)?!0:!1},DetectGarminNuvifone:function(){return-1<this.uagent.search(this.deviceNuvifone)?!0:!1},DetectBada:function(){return-1<this.uagent.search(this.deviceBada)?!0:!1},DetectTizen:function(){return-1<this.uagent.search(this.deviceTizen)?!0:!1},DetectMeego:function(){return-1<this.uagent.search(this.deviceMeego)?!0:!1},DetectDangerHiptop:function(){return-1<this.uagent.search(this.deviceDanger)||-1<this.uagent.search(this.deviceHiptop)?!0:!1},DetectSonyMylo:function(){return-1<this.uagent.search(this.manuSony)&&(-1<this.uagent.search(this.qtembedded)||-1<this.uagent.search(this.mylocom2))?!0:!1},DetectMaemoTablet:function(){return-1<this.uagent.search(this.maemo)?!0:-1<this.uagent.search(this.linux)&&-1<this.uagent.search(this.deviceTablet)&&!this.DetectWebOSTablet()&&!this.DetectAndroid()?!0:!1},DetectArchos:function(){return-1<this.uagent.search(this.deviceArchos)?!0:!1},DetectGameConsole:function(){return this.DetectSonyPlaystation()||this.DetectNintendo()||this.DetectXbox()?!0:!1},DetectSonyPlaystation:function(){return-1<this.uagent.search(this.devicePlaystation)?!0:!1},DetectGamingHandheld:function(){return-1<this.uagent.search(this.devicePlaystation)&&-1<this.uagent.search(this.devicePlaystationVita)?!0:!1},DetectNintendo:function(){return-1<this.uagent.search(this.deviceNintendo)||-1<this.uagent.search(this.deviceWii)||-1<this.uagent.search(this.deviceNintendoDs)?!0:!1},DetectXbox:function(){return-1<this.uagent.search(this.deviceXbox)?!0:!1},DetectBrewDevice:function(){return-1<this.uagent.search(this.deviceBrew)?!0:!1},DetectSmartphone:function(){return this.DetectTierIphone()||this.DetectS60OssBrowser()||this.DetectSymbianOS()||this.DetectWindowsMobile()||this.DetectBlackBerry()||this.DetectPalmOS()?!0:!1},DetectMobileQuick:function(){return this.DetectTierTablet()?!1:this.initCompleted||this.isMobilePhone?this.isMobilePhone:this.DetectSmartphone()||-1<this.uagent.search(this.mobile)||this.DetectKindle()||this.DetectAmazonSilk()||-1<this.uagent.search(this.deviceMidp)||this.DetectBrewDevice()||this.DetectOperaMobile()||this.DetectArchos()||-1<this.uagent.search(this.engineObigo)||-1<this.uagent.search(this.engineNetfront)||-1<this.uagent.search(this.engineUpBrowser)||-1<this.uagent.search(this.engineOpenWeb)?!0:!1},DetectMobileLong:function(){return this.DetectMobileQuick()||this.DetectGameConsole()||this.DetectDangerHiptop()||this.DetectMaemoTablet()||this.DetectSonyMylo()||this.DetectGarminNuvifone()||-1<this.uagent.search(this.devicePda)&&!(-1<this.uagent.search(this.disUpdate))||-1<this.uagent.search(this.manuSamsung1)||-1<this.uagent.search(this.manuSonyEricsson)||-1<this.uagent.search(this.manuericsson)||-1<this.uagent.search(this.svcDocomo)||-1<this.uagent.search(this.svcKddi)||-1<this.uagent.search(this.svcVodafone)?!0:!1},DetectTierTablet:function(){return this.initCompleted||this.isTierTablet?this.isTierTablet:this.DetectIpad()||this.DetectAndroidTablet()||this.DetectBlackBerryTablet()||this.DetectWebOSTablet()?!0:!1},DetectTierIphone:function(){return this.initCompleted||this.isTierIphone?this.isTierIphone:this.DetectIphoneOrIpod()||this.DetectAndroidPhone()||this.DetectWindowsPhone()||this.DetectBlackBerry10Phone()||this.DetectPalmWebOS()||this.DetectBada()||this.DetectTizen()||this.DetectGamingHandheld()?!0:this.DetectBlackBerryWebKit()&&this.DetectBlackBerryTouch()?!0:!1},DetectTierRichCss:function(){return this.initCompleted||this.isTierRichCss?this.isTierRichCss:this.DetectTierIphone()||this.DetectKindle()||this.DetectTierTablet()||!this.DetectMobileQuick()?!1:this.DetectWebkit()?!0:this.DetectS60OssBrowser()||this.DetectBlackBerryHigh()||this.DetectWindowsMobile()||-1<this.uagent.search(this.engineTelecaQ)?!0:!1},DetectTierOtherPhones:function(){return this.initCompleted||this.isTierGenericMobile?this.isTierGenericMobile:this.DetectTierIphone()||this.DetectTierRichCss()||this.DetectTierTablet()?!1:this.DetectMobileLong()?!0:!1}};CVMobileDet.InitDeviceScan(),define("detectmobile",function(e){return function(){var t;return t||e.detectmobile}}(this)),define("app",["jquery","bootstrap","underscore_loader","models/transaction","collections/transactions","views/virtual_assistant/index","crossStorage","utils/get-param","detectmobile","settings","views/virtual_assistant/components/launcher","views/virtual_assistant/components/input_launcher"],function(e,t,n,i,o,a,s,r,l,c,u,d){n=window.CVUnderscore;var h=function(){CVVA=CVVA||{},CVVA.version="1.5.7.cox.12",window.CVVA.popupMode===!0&&(c.businessName=c.businessName+"-popup",c.disableBtn.close=!0,c.disableBtn.minimize=!0,c.disableBtn.fullscreen=!0,c.fullScreen.enabled=!0,c.launcherInjection=!1),window.calledResetVAOnLP=void 0,window.cvCrossStorage=new s(c.libEndpoint+"storage-hub.html"),window.cvCrossStorage.onConnect().then(function(){}).then(function(){return window.cvCrossStorage.get(c.businessName+"-cvVaBootstrapState",c.businessName+"-cvVaModel",c.businessName+"-cvVaStyles",c.businessName+"-cvVaInitCall",c.businessName+"-cvVaTimestamp",c.businessName+"-cvVaMinimized",c.businessName+"-cvVaCollectionLength",c.businessName+"-cvVaContentHeight",c.businessName+"-cvVaContentWidth",c.businessName+"-cvVaSemanticsFAQs",c.businessName+"-cvVaActiveSession_lp",c.businessName+"-cvLpVisitorChatRels",c.businessName+"-cvLpVisitorResumeMode",c.businessName+"-cvLpVisitorSessionVars",c.businessName+"-cvVaEOCSRendered",c.businessName+"-cvVaActiveSession_cv",c.businessName+"-cvPCSdata",c.businessName+"-lpSessionEndedExternal",c.businessName+"-cvVaBusinessArea",c.businessName+"-cvVaIdent",c.businessName+"-requestingChat_lp",c.businessName+"-chatSessionData_genesys",c.businessName+"-agentPickedUp_genesys",c.businessName+"-pcsData_genesys",c.businessName+"-requestingChat_genesys","cv-tserverid","cvSessionEndedExternal_VA")}).then(function(t){null!==t[0]&&"undefined"!==t[0]?localStorage.setItem(c.businessName+"-cvVaBootstrapState",t[0]):localStorage.removeItem(c.businessName+"-cvVaBootstrapState"),null!==t[1]&&"undefined"!==t[1]?localStorage.setItem(c.businessName+"-cvVaModel",t[1]):localStorage.removeItem(c.businessName+"-cvVaModel"),null!==t[2]&&"undefined"!==t[2]?localStorage.setItem(c.businessName+"-cvVaStyles",t[2]):localStorage.removeItem(c.businessName+"-cvVaStyles"),null!==t[3]&&"undefined"!==t[3]?localStorage.setItem(c.businessName+"-cvVaInitCall",t[3]):localStorage.removeItem(c.businessName+"-cvVaInitCall"),null!==t[4]&&"undefined"!==t[4]?localStorage.setItem(c.businessName+"-cvVaTimestamp",t[4]):localStorage.removeItem(c.businessName+"-cvVaTimestamp"),null!==t[5]&&"undefined"!==t[5]?localStorage.setItem(c.businessName+"-cvVaMinimized",t[5]):localStorage.removeItem(c.businessName+"-cvVaMinimized"),null!==t[6]&&"undefined"!==t[6]?(localStorage.setItem(c.businessName+"-cvVaCollectionLength",t[6]),window.rebuiltFromStorage=!0):localStorage.removeItem(c.businessName+"-cvVaCollectionLength"),null!==t[7]&&"undefined"!==t[7]?localStorage.setItem(c.businessName+"-cvVaContentHeight",t[7]):localStorage.removeItem(c.businessName+"-cvVaContentHeight"),null!==t[8]&&"undefined"!==t[8]?localStorage.setItem(c.businessName+"-cvVaContentWidth",t[8]):localStorage.removeItem(c.businessName+"-cvVaContentWidth"),null!==t[9]&&"undefined"!==t[9]?localStorage.setItem(c.businessName+"-cvVaSemanticsFAQs",t[9]):localStorage.removeItem(c.businessName+"-cvVaSemanticsFAQs"),null!==t[10]&&"undefined"!==t[10]?localStorage.setItem(c.businessName+"-cvVaActiveSession_lp",t[10]):localStorage.removeItem(c.businessName+"-cvVaActiveSession_lp"),null!==t[11]&&"undefined"!==t[11]?(sessionStorage.setItem("lpVisitorChatRels"+c.liveperson.accountNumber,t[11]),sessionStorage.setItem("lpVisitorResumeMode"+c.liveperson.accountNumber,t[12]),sessionStorage.setItem("lpVisitorSessionVars"+c.liveperson.accountNumber,t[13])):(sessionStorage.removeItem("lpVisitorChatRels"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorResumeMode"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorSessionVars"+c.liveperson.accountNumber)),null!==t[14]&&"undefined"!==t[14]?localStorage.setItem(c.businessName+"-cvVaEOCSRendered",t[14]):localStorage.removeItem(c.businessName+"-cvVaEOCSRendered"),null!==t[15]&&"undefined"!==t[15]?localStorage.setItem(c.businessName+"-cvVaActiveSession_cv",t[15]):localStorage.removeItem(c.businessName+"-cvVaActiveSession_cv"),null!==t[16]&&"undefined"!==t[16]?localStorage.setItem(c.businessName+"-cvPCSdata",t[16]):localStorage.removeItem(c.businessName+"-cvPCSdata"),null!==t[17]&&"undefined"!==t[17]?localStorage.setItem(c.businessName+"-lpSessionEndedExternal",t[17]):localStorage.removeItem(c.businessName+"-lpSessionEndedExternal"),null!==t[18]&&"undefined"!==t[18]?localStorage.setItem(c.businessName+"-cvVaBusinessArea",t[18]):localStorage.removeItem(c.businessName+"-cvVaBusinessArea"),null!==t[19]&&"undefined"!==t[19]?(localStorage.setItem(c.businessName+"-cvVaIdent",t[19]),void 0!==window.CVVA.model&&(window.CVVA.model.ident=t[19])):localStorage.removeItem(c.businessName+"-cvVaIdent"),null!==t[20]&&"undefined"!==t[20]?localStorage.setItem(c.businessName+"-requestingChat_lp",t[20]):localStorage.removeItem(c.businessName+"-requestingChat_lp"),null!==t[21]&&"undefined"!==t[21]?(localStorage.setItem(c.businessName+"-chatSessionData_genesys",t[21]),localStorage.setItem(c.businessName+"-agentPickedUp_genesys",t[22])):(localStorage.removeItem(c.businessName+"-chatSessionData_genesys"),localStorage.removeItem(c.businessName+"-agentPickedUp_genesys")),null!==t[23]&&"undefined"!==t[23]?localStorage.setItem(c.businessName+"-pcsData_genesys",t[23]):localStorage.removeItem(c.businessName+"-pcsData_genesys"),null!==t[24]&&"undefined"!==t[24]?localStorage.setItem(c.businessName+"-requestingChat_genesys",t[24]):localStorage.removeItem(c.businessName+"-requestingChat_genesys"),null!==t[25]&&"undefined"!==t[25]?localStorage.setItem("cv-tserverid",t[25]):localStorage.removeItem("cv-tserverid"),null!==t[26]&&"undefined"!==t[26]?localStorage.setItem("cvSessionEndedExternal_VA",t[26]):localStorage.removeItem("cvSessionEndedExternal_VA"),c.persistenceEnabled===!0&&Date.now()-localStorage.getItem(c.businessName+"-cvVaTimestamp")>=c.persistenceTimeout?(localStorage.removeItem(c.businessName+"-cvVaBootstrapState"),localStorage.removeItem(c.businessName+"-cvVaModel"),localStorage.removeItem(c.businessName+"-cvVaStyles"),localStorage.removeItem(c.businessName+"-cvVaInitCall"),localStorage.removeItem(c.businessName+"-cvVaTimestamp"),localStorage.removeItem(c.businessName+"-cvVaMinimized"),localStorage.removeItem(c.businessName+"-cvVaCollectionLength"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_lp"),localStorage.removeItem(c.businessName+"-cvVaEOCSRendered"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_cv"),localStorage.removeItem(c.businessName+"-cvPCSdata"),localStorage.removeItem(c.businessName+"-lpSessionEndedExternal"),localStorage.removeItem(c.businessName+"-cvVaIdent"),localStorage.removeItem(c.businessName+"-requestingChat_lp"),localStorage.removeItem(c.businessName+"-chatSessionData_genesys"),localStorage.removeItem(c.businessName+"-agentPickedUp_genesys"),localStorage.removeItem(c.businessName+"-pcsData_genesys"),localStorage.removeItem(c.businessName+"-requestingChat_genesys"),localStorage.removeItem("cv-tserverid"),localStorage.removeItem("cvSessionEndedExternal_VA"),sessionStorage.removeItem("lpVisitorChatRels"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorResumeMode"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorSessionVars"+c.liveperson.accountNumber),sessionStorage.removeItem(c.businessName+"-cvVaBusinessArea"),window.rebuiltFromStorage=!1):c.persistenceEnabled===!1?(localStorage.removeItem(c.businessName+"-cvVaBootstrapState"),localStorage.removeItem(c.businessName+"-cvVaModel"),localStorage.removeItem(c.businessName+"-cvVaStyles"),localStorage.removeItem(c.businessName+"-cvVaInitCall"),localStorage.removeItem(c.businessName+"-cvVaTimestamp"),localStorage.removeItem(c.businessName+"-cvVaMinimized"),localStorage.removeItem(c.businessName+"-cvVaCollectionLength"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_lp"),localStorage.removeItem(c.businessName+"-cvVaEOCSRendered"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_cv"),localStorage.removeItem(c.businessName+"-cvPCSdata"),localStorage.removeItem(c.businessName+"-lpSessionEndedExternal"),localStorage.removeItem(c.businessName+"-cvVaIdent"),localStorage.removeItem(c.businessName+"-requestingChat_lp"),localStorage.removeItem(c.businessName+"-chatSessionData_genesys"),localStorage.removeItem(c.businessName+"-agentPickedUp_genesys"),localStorage.removeItem(c.businessName+"-pcsData_genesys"),localStorage.removeItem(c.businessName+"-requestingChat_genesys"),localStorage.removeItem("cvSessionEndedExternal_VA"),sessionStorage.removeItem("lpVisitorChatRels"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorResumeMode"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorSessionVars"+c.liveperson.accountNumber),sessionStorage.removeItem(c.businessName+"-cvVaBusinessArea"),window.rebuiltFromStorage=!1):"true"===localStorage.getItem(c.businessName+"-lpSessionEndedExternal")?(localStorage.removeItem(c.businessName+"-cvVaBootstrapState"),localStorage.removeItem(c.businessName+"-cvVaModel"),localStorage.removeItem(c.businessName+"-cvVaStyles"),localStorage.removeItem(c.businessName+"-cvVaInitCall"),localStorage.removeItem(c.businessName+"-cvVaTimestamp"),localStorage.removeItem(c.businessName+"-cvVaMinimized"),localStorage.removeItem(c.businessName+"-cvVaCollectionLength"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_lp"),localStorage.removeItem(c.businessName+"-cvVaEOCSRendered"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_cv"),localStorage.removeItem(c.businessName+"-cvPCSdata"),localStorage.removeItem(c.businessName+"-lpSessionEndedExternal"),localStorage.removeItem(c.businessName+"-cvVaIdent"),localStorage.removeItem(c.businessName+"-requestingChat_lp"),sessionStorage.removeItem("lpVisitorChatRels"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorResumeMode"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorSessionVars"+c.liveperson.accountNumber),sessionStorage.removeItem(c.businessName+"-cvVaBusinessArea"),window.rebuiltFromStorage=!1):"true"===localStorage.getItem("cvSessionEndedExternal_VA")&&(localStorage.removeItem(c.businessName+"-cvVaBootstrapState"),localStorage.removeItem(c.businessName+"-cvVaModel"),localStorage.removeItem(c.businessName+"-cvVaStyles"),localStorage.removeItem(c.businessName+"-cvVaInitCall"),localStorage.removeItem(c.businessName+"-cvVaTimestamp"),localStorage.removeItem(c.businessName+"-cvVaMinimized"),localStorage.removeItem(c.businessName+"-cvVaCollectionLength"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_lp"),localStorage.removeItem(c.businessName+"-cvVaEOCSRendered"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_cv"),localStorage.removeItem(c.businessName+"-cvPCSdata"),localStorage.removeItem(c.businessName+"-lpSessionEndedExternal"),localStorage.removeItem(c.businessName+"-cvVaIdent"),localStorage.removeItem(c.businessName+"-requestingChat_lp"),localStorage.removeItem("cvSessionEndedExternal_VA"),sessionStorage.removeItem("lpVisitorChatRels"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorResumeMode"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorSessionVars"+c.liveperson.accountNumber),sessionStorage.removeItem(c.businessName+"-cvVaBusinessArea"),window.rebuiltFromStorage=!1),CVMobileDet.DetectMobileLong()===!0||CVMobileDet.DetectTierTablet()===!0?window.CVMobile=!0:window.CVMobile=!1;var s=!1;if(c.selectiveInjection.enabled===!0){if(c.selectiveInjection.url.length>0)for(var l=0;l<c.selectiveInjection.url.length;l++)window.location.href.indexOf(c.selectiveInjection.url[l])>-1&&(s=!0);null!==c.selectiveInjection.variable&&c.selectiveInjection.variable===!0&&(s=!0)}else s=!0;if(window.CVMobile===!1?c.selectiveInjection.device.desktop===!1&&(s=!1):window.CVMobile===!0&&c.selectiveInjection.device.mobile===!1&&(s=!1),s===!0){var u=c.libEndpoint,d=document.getElementsByTagName("head")[0],h=document.createElement("link");h.id="cv-font-awesome-css",h.rel="stylesheet",h.type="text/css",h.href=u+"css/libs/font_awesome/cv-font-awesome.css",h.media="screen",d.appendChild(h);var p=document.createElement("link");p.id="cv-jquery-ui-css",p.rel="stylesheet",p.type="text/css",p.href=u+"css/libs/jquery/jquery-ui.css",p.media="screen",d.appendChild(p);var v=document.createElement("link");v.id="cv-bootstrap-css",v.rel="stylesheet",v.type="text/css",v.href=u+"css/libs/bootstrap/cv-va-bootstrap.css",v.media="screen",d.appendChild(v);var f=document.createElement("link");f.id="cv-va-css",f.rel="stylesheet",f.type="text/css",f.href=u+"css/styles.css",f.media="screen",d.appendChild(f);var m=document.createElement("link");m.id="cv-print-css",m.rel="stylesheet",m.type="text/css",m.href=u+"css/print.css",m.media="print",d.appendChild(m);var g=document.createElement("link");g.id="cv-scrollbar-css",g.rel="stylesheet",g.type="text/css",g.href=u+"css/libs/perfect_scrollbar/cv-perfect-scrollbar.css",g.media="screen",d.appendChild(g),window.loadFromStorage=!1;var b;if(void 0!==localStorage.getItem(c.businessName+"-cvVaBootstrapState")&&null!==localStorage.getItem(c.businessName+"-cvVaBootstrapState")&&c.persistenceEnabled===!0&&Date.now()-localStorage.getItem(c.businessName+"-cvVaTimestamp")<=c.persistenceTimeout&&(window.loadFromStorage=!0),void 0!==localStorage.getItem(c.businessName+"-cvVaBootstrapState")&&null!==localStorage.getItem(c.businessName+"-cvVaBootstrapState")&&c.persistenceEnabled===!0&&window.loadFromStorage===!0){
if(c.liveperson.removeLPengagements===!0){var y=function(){e(".LPMcontainer").each(function(t,n){for(var i=!0,t=0;t<c.liveperson.removeLPengagementExceptions.length;t++)e(this).parent().attr("id")===c.liveperson.removeLPengagementExceptions[t]&&(i=!1);i&&e(this).addClass("cv-va-hide-external-engagements")})};clearInterval(window.CVVA.removeExternalEngagementsInterval),window.CVVA.removeExternalEngagementsInterval=setInterval(y,100),y()}if("true"===localStorage.getItem(c.businessName+"-cvVaMinimized")?window.cvVaMinimized=!0:"false"===localStorage.getItem(c.businessName+"-cvVaMinimized")&&(window.cvVaMinimized=!1),e("head").append('<style id="cv-va-styles">'+JSON.parse(localStorage.getItem(c.businessName+"-cvVaStyles"))+"</style>"),window.CVMobile===!0&&(b=document.createElement("link"),b.id="cv-va-mobile-css",b.rel="stylesheet",b.type="text/css",b.href=u+"/css/styles-mobile.css",b.media="screen",d.appendChild(b)),e("body").append('<div class="cv-va-bootstrap" style="display: none;">'+JSON.parse(localStorage.getItem(c.businessName+"-cvVaBootstrapState"))+"</div>"),e(".cv-va-bootstrap #cv-chat-content").removeClass("ui-resizable"),e(".cv-va-bootstrap .cv-ui-resizable-handle").remove(),e(".cv-va-bootstrap #va-tab").click(function(t){t.preventDefault(),e(".cv-va-bootstrap #cv-chat-form").show(),e(".cv-va-bootstrap #va-tab").addClass("active"),e(".cv-va-bootstrap #lc-tab").removeClass("active"),e(".cv-va-bootstrap #cv-live-chat-answer-history").hide(),e(".cv-va-bootstrap #cv-chat-answer-history").show(),e(".cv-va-bootstrap .cv-chat-footer").show()}),e("#lc-tab").click(function(t){t.preventDefault(),e(".cv-va-bootstrap #cv-chat-form").hide(),e(".cv-va-bootstrap #lc-tab").addClass("active"),e(".cv-va-bootstrap #va-tab").removeClass("active"),e(".cv-va-bootstrap #cv-live-chat-answer-history").show(),e(".cv-va-bootstrap #cv-chat-answer-history").hide(),e(".cv-va-bootstrap .cv-chat-footer").hide()}),"creative virtual"===c.livechatVendor&&"true"===localStorage.getItem(c.businessName+"-cvVaActiveSession_cv")&&"true"!==localStorage.getItem(c.businessName+"-cvVaEOCSRendered")){var w=e("<div>").attr("id","cv-lc-loader").css("background-color","#fff");w.append('<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading Live Chat Prechat Survey...</span>'),e(".cv-va-bootstrap #cv-chat-body").append(w);var S=!0,C=function(){setTimeout(function(){e("#cv-lc-loader").hide().remove()},5e3),S=!1};C()}e(".cv-va-bootstrap #cv-chat-user-entry").prop("disabled",!1),e.each(e(".cv-va-bootstrap .cv-chat-connector-disabled"),function(){e(this).add(e(this).children("span")).css({"background-color":c.connectorsBackgroundColor,color:c.connectorsFontColor})}),e(".cv-va-bootstrap .back_link").click(function(e){e.preventDefault(),$.backnavRequest()}),setTimeout(function(){e(".cv-va-bootstrap").show(),e(".cv-va-bootstrap #cv-chat-answer-history").length&&e(".cv-va-bootstrap #cv-chat-answer-history").scrollTop(e(".cv-va-bootstrap #cv-chat-answer-history")[0].scrollHeight)},500)}else{var x='<div class="cv-va-bootstrap"';x+=window.navigator.userAgent.indexOf("MSIE ")>0||window.navigator.userAgent.indexOf("Trident/")>0||window.navigator.userAgent.indexOf("Edge/")>0?'tabindex="0"><div id="cv-chat-container" style="display:none;" class="modal fade" data-cv-backdrop="false">':'><div id="cv-chat-container" style="display:none;" class="modal fade" data-cv-backdrop="false">',x+='<div class="cv-modal-dialog">',x+='<div id="cv-chat-content" class="cv-modal-content">',x+='<div id="cv-chat-header" class="cv-modal-header">',c.modalHeader.title.disabled===!1&&(x=x+'<div id="cv-va-title" class="cv-chat-title" aria-live="polite">'+c.modalHeader.title.text+"</div>"),c.modalHeader.logo.enabled===!0&&(x=x+'<img class="cv-chat-logo" src="'+c.libEndpoint+"images/titles/"+c.modalHeader.logo.name+'" alt="'+c.businessName+' logo">'),c.modalHeader.extralogo.enabled===!0&&(x=x+'<img class="cv-chat-extra-logo" src="'+c.libEndpoint+"images/titles/"+c.modalHeader.extralogo.name+'" alt="'+c.businessName+' logo">'),c.modalHeader.minimizedLogo.enabled===!0&&(x=x+'<img class="cv-chat-minimized-logo" src="'+c.libEndpoint+"images/titles/"+c.modalHeader.minimizedLogo.name+'" alt="'+c.businessName+' logo" style="display: none;">'),x=x+'<div id="cv-cvbtn-group" class="cvbtn-group" role="group" aria-label="'+c.ariaLabel.btnGroup+'">',c.disableBtn.close===!1&&(x=x+'<button id="cv-close-cvbtn" aria-label="'+c.ariaLabel.closeBtn+'" type="button" class="close container-control mobile-close">',x=x+'<i class="fa '+c.modalHeader.btnIcons.close+'" aria-hidden="true"></i>',x+="</button>"),c.disableBtn.minimize===!1&&(x=x+'<button id="cv-minimize-cvbtn" aria-label="'+c.ariaLabel.minimizedBtn+'" type="button" class="close container-control minimize-va">',x=x+'<i class="fa '+c.modalHeader.btnIcons.minimize+'" aria-hidden="true"></i>',x+="</button>"),window.CVMobile===!1&&c.fullScreen.enabled===!0&&c.disableBtn.fullscreen===!1&&(x=x+'<button id="cv-compress-expand-cvbtn" aria-label="'+c.ariaLabel.fullScreenBtn+'" type="button" class="close container-control">',x+='<i class="fa fa-compress" aria-hidden="true"></i>',x+="</button>"),c.printIconOption===!0&&window.CVMobile===!1&&(x=x+'<button aria-label="'+c.ariaLabel.printBtn+'" type="button" id="print_transcript" class="close container-control cv-print-icon" hidden>',x+='<i class="fa fa-print" aria-hidden="true"></i>',x+="</button>"),x+="</div>",c.avatar===!0&&(x+='<label class="switch">',x+='<input type="checkbox" checked id="cv-toggle-avatar">',x+='<div class="slider round"></div>',x+="</label>"),x+="</div>",c.avatar===!0&&(x=x+'<img id="cv-chat-img-avatar" src="'+c.libEndpoint+"images/titles/"+c.modalHeader.logo.name+'" alt="'+c.businessName+' avatar" style="display: none;">'),x+='<div class="cv-overlays">',x+='<div id="cv-chat-loader-layer">',x+='<i class="fa fa-spinner fa-spin fa-3x fa-fw"></i><span class="sr-only">Loading...</span>',x+="</div>","liveperson"===c.livechatVendor&&(x+='<div id="cv-lp-end-chat-confirmation" style="display: none;">',x+='<div style="text-align: center;margin: 0 45px;">Are you sure you want to end the conversation?</div>',x+='<div class="cv-lp-confirmation-cvbtn-group">',x+='<input class="cvbtn cvbtn-primary cvbtn-lg cvbtn-block small-border-radius" type="button" value="Yes">',x+='<input class="cvbtn cvbtn-primary cvbtn-lg cvbtn-block small-border-radius" type="button" value="No">',x+="</div>",x+="</div>"),x+="</div>",x+='<div id="cv-chat-body" class="cv-modal-body" aria-live="polite">',x+='<div id="cv-chat-answer-history" class="cv-chat-history">',x+="</div>",x+="</div>",x+='<div class="cv-row cv-modal-footer cv-chat-footer">',x+='<form id="cv-chat-form" class="form col-sm-12 center-block">',x+='<div class="cv-form-group">',x=x+'<input aria-label="'+c.ariaLabel.userEntry+'" accesskey="c" id="cv-chat-user-entry" type="text" name="entry" autocomplete="off" class="cv-form-control cv-chat-user-entry" placeholder="'+c.defaultPlaceholderText+'">',x+="</div>",x+='<div class="cv-form-group">',x=x+'<button aria-label="'+c.ariaLabel.submitBtn+'" id="cv-chat-submit" type="submit" class="cvbtn cvbtn-primary cvbtn-lg cvbtn-block small-border-radius" disabled="true">',c.useImageButton===!0&&(x=x+'<img class="cv-button-text-image" src="'+c.libEndpoint+"images/submit/"+c.imageButtonText+'" alt="VA Button Image">'),c.useImageDisabledButton===!0?x=x+'<img class="cv-disabled-button-text-image" src="'+c.libEndpoint+"images/submit/"+c.imageDisabledButtonText+'" alt="VA Button Image">':(x=x+'<i id="cv-submit-icon" class="'+c.submitBtn.fontAwesome+'" aria-hidden="true"></i>',x+=c.submitBtn.text),x+="</button>",x+="</div>",x+="</form>",window.CVMobile===!1&&(c.cvFooter===!0&&(x+='<div class="cv-col-xs-5 cv-col-sm-4 creative-virtual-logo">',x+="<span>",x+='<a href="http://www.creativevirtual.com/us/" target="_blank">',x=x+'<img src="'+u+'/images/creative_virtual_full_color.png" alt="Creative Virtual Logo"/>',x+="</a>",x+="</span>",x+="</div>"),c.cvDisclaimer===!0&&(x+='<div class="cv-col-xs-7 cv-col-sm-8 cv-chat-disclaimer">',x+="<span>For quality and security purposes, your session is recorded and may be reviewed. For your privacy, please do not enter any personal information.</span>",x+="</div>")),c.textResize===!0&&window.CVMobile===!1&&(x+='<ul id="cv-font-size">',x=x+'<li><a class="font-small" role="button" data-class="small" href="#" aria-label="'+c.ariaLabel.fontSizeBtn.small+'"><i class="fa fa-font cv-font-icon" aria-hidden="true"></i></a></li>',x=x+'<li><a class="font-medium" role="button" data-class="medium" href="#" aria-label="'+c.ariaLabel.fontSizeBtn.medium+'"><i class="fa fa-font cv-font-icon active-cv-font-size" aria-hidden="true"></i></a></li>',x=x+'<li><a class="font-large" role="button" data-class="large" href="#" aria-label="'+c.ariaLabel.fontSizeBtn.large+'"><i class="fa fa-font cv-font-icon" aria-hidden="true"></i></a></li>',x+="</ul>"),c.cvLCbtn.enabled===!0&&(x=x+'<button aria-label="'+c.cvLCbtn.text+'" type="button" id="cv-lc-cvbtn" class="cvbtn">'+c.cvLCbtn.text+"</button>"),x+="</div>",c.faqTab===!0&&window.CVMobile===!1&&(x+='<div id="cv-faq-container">',x+='<div id="cv-faq-panel" class="collapse width">',x+='<div id="cv-faq-body">',x+='<div id="breadcrumb"></div>',x+='<div id="dropdown"></div>',x+='<div id="faq_list"></div>',x+="</div>",x+="</div>",x+='<button id="cv-faq-cvbtn" type="button" class="cvbtn cvbtn-primary" data-toggle="collapse" data-target="#cv-faq-panel"><i class="fa fa-bars" aria-hidden="true"></i></button>',x+="</div>"),"liveperson"===c.livechatVendor&&(x+='<div id="cv-lp-secure-form-container">',x+='<div id="cv-lp-secure-form-panel" class="collapse width">',x+='<div id="cv-lp-secure-form-header">',x+='<a href="#">',x+='<i class="fa fa-arrow-circle-right" aria-hidden="true"></i>',x+="</a>",x+="</div>",x+='<div id="cv-lp-secure-form-body">',x+="</div>",x+="</div>",x+="</div>"),x+="</div>",x+="</div>",x+="</div>",x+="</div>",e("body").append(x),e(".cv-va-bootstrap #cv-chat-submit.disabled").css({"background-color":c.submitBtn.disabled.backgroundColor,"border-color":c.submitBtn.disabled.backgroundColor}),e(".cv-va-bootstrap #cv-chat-submit").is(":disabled")?(e(".cv-va-bootstrap .cv-button-text-image").hide(),e(".cv-va-bootstrap .cv-disabled-button-text-image").show()):(e(".cv-va-bootstrap .cv-button-text-image").show(),e(".cv-va-bootstrap .cv-disabled-button-text-image").hide()),e(".cv-va-bootstrap #cv-chat-header, .cv-va-bootstrap #cv-lp-secure-form-header").css({"background-color":c.modalHeader.backgroundColor,"border-top-color":c.modalHeader.backgroundColor,"border-right-color":c.modalHeader.backgroundColor,"border-left-color":c.modalHeader.backgroundColor,"border-bottom":c.headerBorderBottom}),e(".cv-va-bootstrap #cv-lp-secure-form-header").css({height:c.modalHeader.height}),e(".cv-va-bootstrap #cv-lp-secure-form-header a").css({color:c.modalHeader.color}).on("click",function(t){t.preventDefault(),e(".cv-va-bootstrap .cv-modal-dialog").css({width:"100%",left:"0"})}),e(".cv-va-bootstrap .cv-chat-title").css({color:c.modalHeader.color}),c.modalHeader.logo.enabled===!0&&(e(".cv-va-bootstrap .cv-chat-title").hide(),e(".cv-va-bootstrap .cv-chat-title").addClass("offscreen")),c.modalHeader.extralogo.enabled===!0&&e(".cv-va-bootstrap .cv-chat-title").hide(),c.modalHeader.minimizedLogo.enabled===!0&&e(".cv-va-bootstrap .cv-chat-minimized-logo").hide(),e(".cv-va-bootstrap #cv-chat-header .container-control, .cv-va-bootstrap .cv-live-chat-active-title").css({color:c.modalHeader.color}),e(".cv-va-bootstrap .cvbtn-primary:hover").css({"background-color":c.mainColor,"border-color":c.mainColor}),c.vaShim===!0&&window.CVMobile===!1&&(e(".cv-va-bootstrap #cv-chat-content").addClass("back-shim"),e(".cv-va-bootstrap #cv-chat-content").addClass("front-shim")),window.CVMobile===!1?e(".cv-va-bootstrap #cv-chat-user-entry").css({height:"85px","font-size":c.inputFontSize,"border-radius":c.inputBorderRadius}):e(".cv-va-bootstrap #cv-chat-user-entry").css({height:"50px","border-radius":c.inputBorderRadius}),e(".cv-va-bootstrap #cv-chat-submit").css({"border-radius":c.inputBorderRadius,"font-weight":c.submitBtn.fontWeight,"font-size":c.submitBtn.fontSize}),c.submitBtn.disabled.opacity===!0&&e(".cv-va-bootstrap .cvbtn.disabled, .cv-va-bootstrap .cvbtn[disabled], .cv-va-bootstrap fieldset[disabled] .cvbtn").css({opacity:"1"}),c.avatar===!0&&(e(".cv-va-bootstrap .container-control").css({top:"-8px"}),e(".cv-va-bootstrap .cv-chat-logo").css({width:"initial",top:"30px",left:"70px"}),window.desactivate_avatar=function(){e(".cv-va-bootstrap #cv-toggle-avatar").is(":checked")?(e(".cv-va-bootstrap #cv-chat-img-avatar").show(),!e(".cv-va-bootstrap .cv-va-bubble").is(":visible"),e(".cv-va-bootstrap .cv-va-bubble").before('<img class="cv-avatar" src="'+c.libEndpoint+"images/titles/"+c.modalHeader.logo.name+'">'),e(".cv-va-bootstrap .cv-avatar").show(),e(".cv-va-bootstrap .cv-va-bubble").css("margin-left","34px"),e(".cv-va-bootstrap .va-time-stamp").css("left","37px"),e(".cv-va-bootstrap .cv-va-bubble.va-time-stamp-shim").removeClass("va-time-stamp-shim-avatar")):(e(".cv-va-bootstrap #cv-chat-img-avatar").hide(),e(".cv-va-bootstrap .cv-avatar").hide(),e(".cv-va-bootstrap .cv-va-bubble").css("margin-left","0px"),e(".cv-va-bootstrap .va-time-stamp").css("left","6px"),e(".cv-va-bootstrap .cv-va-bubble.va-time-stamp-shim").addClass("va-time-stamp-shim-avatar"))},e("#cv-toggle-avatar").on("click",desactivate_avatar));var T='<style id="cv-va-styles">';T+=".cv-va-bootstrap {",T=T+"font-family: "+c.fontfamily+" !important;",T+="}",T+=".cv-va-bootstrap #cv-chat-submit, .cv-va-bootstrap #cv-lc-cvbtn,  .cv-va-bootstrap #feedbackSend {",T=T+"background-color: "+c.submitBtn.backgroundColor+";",T+="}",T+=".cv-va-bootstrap #cv-chat-submit:focus, .cv-va-bootstrap #cv-lc-cvbtn:focus,  .cv-va-bootstrap #feedbackSend:focus {",T=T+"background-color: "+c.submitBtn.focus.backgroundColor+" !important;",T+="}",T+=".cv-va-bootstrap .panel-heading, .cv-va-bootstrap .cv-live-chat-user, .cv-va-bootstrap .cv-chat-transaction-entry {",T=T+"background-color: "+c.userBubbleBackgroundColor+" !important;",T=T+"color: "+c.vaPillFontColor+" !important;",T+="}",T+=".cv-va-bootstrap .cv-chat-transaction-title {",T=T+"color: "+c.vaPillFontColor+" !important;",T+="}",T+=".cv-va-bootstrap .cv-chat-transaction-entry {",T=T+"color: "+c.vaInputPillFontColor+" !important;",T=T+"font-style: "+c.inputPillFontStyle+" !important;",T+="}",window.CVMobile===!1&&(T+=".cv-va-bootstrap .cv-chat-history, .cv-va-bootstrap .cv-chat-transaction-title, .cv-va-bootstrap .cv-live-chat-info, .cv-va-bootstrap .cv-live-chat-user, .cv-va-bootstrap .cv-ui-autocomplete, .cv-va-bootstrap .cv-live-chat-agent, .cv-va-bootstrap .cv-live-chat-user, #cv-eocs-overlay{",T=T+"font-size: "+c.chatHistoryDiv.fontSize+";",T+="}"),T+=".cv-va-bootstrap #cv-chat-header {",T=window.CVMobile===!1?T+"height: "+c.modalHeader.height+";":T+"height: "+c.modalHeader.mobile.height+";",c.avatar===!0&&(T+="padding: 0px 15px !important;"),T+="}","liveperson"===c.livechatVendor&&(T+=".cv-va-bootstrap .cv-lp-confirmation-cvbtn-group>input, .cv-va-bootstrap #cv-lp-cvbtn-group>button {",T=T+"background-color: "+c.submitBtn.backgroundColor+";",T=T+"border-color: "+c.submitBtn.backgroundColor+";",T+="}"),"conversational"===c.vaChatView&&(c.shrunkenUI===!0&&(T+=".cv-va-bootstrap #cv-chat-content {",T+="width: 350px;",T+="height: 560px;",T=T+"border-radius: "+c.modalContent.borderRadius+";",T=T+"border: "+c.modalContent.border+";",T=T+"box-shadow: "+c.modalContent.boxShadow+";",T=T+"border-top: "+c.modalContent.borderTop+";",T+="}",T+=".cv-va-bootstrap .cv-chat-footer {",T=T+"background-color:"+c.modalFooter.backgroundColor+";",T=T+"border-radius:"+c.modalFooter.borderRadius+";",T+="}",T+=".cv-va-bootstrap #cv-chat-body, .cv-va-bootstrap .cv-chat-transaction-panel{",T=T+"background-color:"+c.chatHistoryDiv.backgroundColor+";",T+="}",T+=".cv-va-bootstrap .cv-init-message {",T=T+"background-color:"+c.initMessage.backgroundColor+";",T=T+"border-radius:"+c.initMessage.borderRadius+";",T=T+"margin:"+c.initMessage.margin+";",T=T+"padding:"+c.initMessage.padding+";",T=T+"border:"+c.initMessage.border+";",T=T+"box-shadow:"+c.initMessage.boxShadow+";",T=T+"border-bottom-color:"+c.initMessage.borderBottomColor+";",T=T+"border-top:"+c.initMessage.borderTop+";",T+="}",T+=".cv-va-bootstrap .cv-chat-logo, .cv-va-bootstrap .cv-chat-minimized-logo, .cv-va-bootstrap #cv-lc-chat-logo {",T+="margin-left: 0px;",T+="}",T+=".cv-va-bootstrap .cv-chat-logo {",T=T+"width:"+c.modalHeader.logo.width+";",T+="}",T+=".cv-va-bootstrap .cv-chat-minimized-logo {",T=T+"width:"+c.modalHeader.minimizedLogo.width+";",T+="}",T+=".cv-va-bootstrap .cv-chat-extra-logo {",T=T+"width:"+c.modalHeader.extralogo.width+";",T+="}",T+=".cv-va-bootstrap .container-control i {",T+="font-size: 17px!important;",T+="}",T+=".cv-va-bootstrap .panel-heading, .cv-va-bootstrap .cv-live-chat-user {",T+="min-width: 0px!important;",T+="margin-left: 45px!important;",T=T+"border-radius: "+c.userBubbleCSS.borderRadius+";",T+="}",T+=".cv-va-bootstrap .panel-heading.va-time-stamp-shim:before, .cv-va-bootstrap .cv-live-chat-user.ts-shim:before {",T+="border-left:0px solid transparent;",T+="border-right:8px solid transparent;",T+="border-top:10px solid;",T=T+"border-top-color: "+c.userBubbleBackgroundColor+" !important;",T+='content:"";',T+="margin-top:-5px;",T+="position:absolute;",T+="width:0;",T+="right:-6px;",T+="}",T+=".cv-va-bootstrap .cv-va-bubble.va-time-stamp-shim:before, .cv-va-bootstrap .cv-live-chat-agent.ts-shim:before {",T+="border-left:8px solid transparent;",T+="border-right:0px solid transparent;",T+="border-top:10px solid;",T=T+"border-top-color: "+c.vaBubbleBackgroundColor+" !important;",T+='content:"";',T+="margin-top:-6px;",T+="position:absolute;",T+="width:0;",T+=c.avatar===!0?"left:28px;":"left:-6px;",T+="}",T+=".cv-va-bootstrap .cv-va-bubble, .cv-va-bootstrap .cv-live-chat-agent {",T=T+"border-radius: "+c.vaBubbleCSS.borderRadius+";",T+=c.avatar===!0?"margin-left:34px;":"margin-right:45px !important;",T+="}",T+=".cv-va-bootstrap .cv-chat-user-entry, .cv-va-bootstrap #cv-chat-submit, .cv-va-bootstrap #cv-live-chat-submit, .cv-va-bootstrap #cv-live-chat-user-entry {",T=T+"height:"+c.submitBtn.height+" !important;",T+="}",T+=".cv-va-bootstrap .cv-form-group {",T+="margin-bottom:6px !important;",T+="}",T+=".cv-va-bootstrap #cv-chat-submit, .cv-va-bootstrap #cv-live-chat-submit {",T+="padding:0px !important;",T+="}"),T+=".cv-va-bootstrap .cv-chat-va-typing {",T=T+"font-size:"+c.vaTypingFontSize+";",T+="}",T+=".cv-va-bootstrap #cv-chat-header {",T=T+"background:linear-gradient("+c.modalHeader.backgroundColor+","+c.modalHeader.secondBackgroundColor+")repeat 0 0;",T+="}",T+=".cv-va-bootstrap .cv-minimize-chat-header {",T=T+"background:linear-gradient("+c.minimizedContentMobile.backgroundColor+","+c.minimizedContentMobile.backgroundColor+")repeat 0 0 !important;",T=T+"color:"+c.minimizedContentMobile.color+" !important;",T+="}",T+=".cv-va-bootstrap .cv-va-bubble, .cv-va-bootstrap .cv-live-chat-agent {",T=T+"background-color:"+c.vaBubbleBackgroundColor+" !important;",T=T+"border-radius: "+c.vaBubbleCSS.borderRadius+";",c.avatar===!1&&(T+="margin-right:140px;"),T+="padding:6px 12px !important;",T+="word-wrap:break-word !important;",c.shrunkenUI===!0&&(T+="display:inline-block;"),T+="}",T+=".cv-va-bootstrap .cv-chat-transaction-title {",T+="}",T+=".cv-va-bootstrap .panel-heading, .cv-va-bootstrap .cv-live-chat-user{",T=T+"border-radius: "+c.userBubbleCSS.borderRadius+";",T+="padding:5px 12px !important;",T+="word-wrap:break-word !important;",T+="margin-left:150px;",T+="min-width:54px;",T+="float:right;",T+="}",T+=".cv-va-bootstrap .va-time-stamp, .cv-va-bootstrap .time-stamp-info {",T+="color:#000000 !important;",T+="font-size:10px !important;",T+="position:absolute !important;",T+="bottom:-15px;",T+="line-height:14.2857px; !important;",T+=c.avatar===!0?"left:37px;":"left:6px;",T+="}",T+=".cv-va-bootstrap .user-cv-time-stamp, .cv-va-bootstrap .time-stamp-user {",T+="color:#000000 !important;",T+="font-size:10px !important;",T+="position:absolute !important;",T+="bottom:-15px !important;",T+="right:3px !important;",T+="}",T+=".cv-va-bootstrap .ics-thumb-cvbtn-group {",T+="left:122px !important;",T+="bottom:43px !important;",T+="margin-bottom:-6px !important;",T+="}",window.CVMobile===!0&&(T+=".cv-va-bootstrap .minimize-shim:before {",T=T+"border-color: "+c.minimizedContentMobile.backgroundColor+" !important;",T+="}",T+=".cv-va-bootstrap .cv-va-bubble.va-time-stamp-shim:before,  .cv-va-bootstrap .cv-live-chat-agent.ts-shim:before {",T+="border-left:20px solid transparent;",T+="border-right:0px solid transparent;",T+="border-top:22px solid;",T=T+"border-top-color: "+c.vaBubbleBackgroundColor+" !important;",T+='content:"";',T+="margin-top:-11px;",T+="position:absolute;",T+="width:0;",T+="margin-left:-4px;",T+="}",T+=".cv-va-bootstrap .cv-va-bubble, .cv-va-bootstrap .cv-list-group, .cv-va-bootstrap .cv-live-chat-agent {",T+="border-radius:0 12px 12px 12px !important;",T+="padding:11px 21px  !important;",T+="}",T+=".cv-va-bootstrap .panel-heading, .cv-va-bootstrap .cv-live-chat-user {",T+="border-radius:12px 0 12px 12px !important;",T+="padding:10px 22px !important;",T+="right:25px !important;",T+="}",T+=".cv-va-bootstrap .panel-heading.va-time-stamp-shim:before, .cv-va-bootstrap .cv-live-chat-user.ts-shim:before {",T+="border-left:0px solid transparent;",T+="border-right:18px solid transparent;",T+="border-top:19px solid;",T=T+"border-top-color: "+c.userBubbleBackgroundColor+" !important;",T+='content:"";',T+="margin-top:-10px;",T+="position:absolute;",T+="width:0;",T+="margin-right:-4px;",T+="}",T+=".cv-va-bootstrap .user-cv-time-stamp, .cv-va-bootstrap .time-stamp-user {",T+="color:#999999 !important;",T+="display:block !important;",T+="font-size:12px !important;",T+="bottom:-17px !important;",T+="right:8px !important;",T+="}",T+=".cv-va-bootstrap .va-time-stamp, .cv-va-bootstrap .time-stamp-info {",T+="color:#999999 !important;",T+="font-size:12px !important;",T+="bottom:-17px !important;",T+="left:8px !important;",T+="}"),c.shrunkenUI===!1&&(T+=".cv-va-bootstrap .va-time-stamp.va-time-stamp-shim:before {",T+="border-left:9px solid transparent;",T+="border-right:9px solid transparent;",T+="border-top:9px solid;",T=T+"border-top-color: "+c.vaBubbleBackgroundColor+" !important;",T+='content:"";',T+="margin-top:-7px;",T+="position:absolute;",T+="width:0;",T+="left:3px;",T+="}"),T+=".cv-va-bootstrap .user-cv-time-stamp.va-time-stamp-shim:before {",T+="border-left:9px solid transparent;",T+="border-right:9px solid transparent;",T+="border-top:9px solid;",T=T+"border-top-color: "+c.userBubbleBackgroundColor+" !important;",T+='content:"";',T+="margin-top:-8px;",T+="position:absolute;",T+="width:0;",T+="right:2px;",T+="bottom:12px;",T+="}",T+=".cv-va-bootstrap .cv-chat-transaction-entry {",T=T+"background-color: "+c.userBubbleBackgroundColor+" !important;",T=T+"color: "+c.vaInputPillFontColor+" !important;",T=T+"font-weight: "+c.userInputFontWeight+" !important;",T+="}",T+=".cv-va-bootstrap .cv-va-bubble p {",T+="margin: 0px;",T+="}",T+=".cv-va-bootstrap .cv-va-bubble {",T=T+"color: "+c.vaBubbleFontColor+" !important;",T+="}",T+=".cv-va-bootstrap .cv-list-group-item a {",T=T+"color: "+c.connectorsFontColor+";",T+="}",T+=".cv-va-bootstrap .back_link {",T=T+"color: "+c.connectorsFontColor+";",T=T+"background-color: "+c.connectorsBackgroundColor+";",T+="padding: 11px 30px 11px 11px;",T=T+"border-width: "+c.backlinkBorderWidth+";",T=T+"border-color: "+c.connectorBorder.borderColor+";",T+="}",T+=".cv-va-bootstrap .back_link:hover {",T=T+"color: "+c.connectorsHoverFontColor+";",T=T+"background-color: "+c.connectorsHoverBackgroundColor+";",T+="padding: 11px 30px 11px 11px;",T=T+"border-width: "+c.backlinkBorderWidth+";",T=T+"border-color: "+c.connectorBorder.borderColor+";",T+="}",T+=".cv-va-bootstrap .cv-chat-connector, .cv-va-bootstrap .cv-chat-connector-disabled {",T=T+"color: "+c.connectorsFontColor+";",T=T+"background-color: "+c.connectorsBackgroundColor+";",T=T+"border-width: "+c.connectorBorder.borderWidth+";",T=T+"border-style: "+c.connectorBorder.borderStyle+";",T=T+"border-color: "+c.connectorBorder.borderColor+";",T+="padding: 9px 30px 9px 9px;",window.CVMobile===!0&&(T+="padding-right: 60px !important;"),T+="}",T+=".cv-va-bootstrap .cv-chat-connector span, .cv-va-bootstrap .cv-chat-connector-disabled span {",T+="right: 8px !important;",T+="top: 24% !important;",T+="}",T+=".cv-va-bootstrap .cv-chat-connector:last-child, .cv-va-bootstrap .cv-chat-connector-disabled:last-child {",T=T+"border-bottom-width: "+c.connectorLastChildBorderBottomWidth+"!important;",T+="}",T+=".cv-va-bootstrap .cv-chat-connector:hover {",T=T+"background-color: "+c.connectorsHoverBackgroundColor+"!important;",T=T+"border-width: "+c.connectorBorder.borderWidth+";",T=T+"border-style: "+c.connectorBorder.borderStyle+";",T=T+"border-color: "+c.connectorBorder.borderColor+";",T+="}",T+=".cv-va-bootstrap .cv-chat-connector:hover * {",T=T+"background-color: "+c.connectorsHoverBackgroundColor+"!important;",T=T+"color: "+c.connectorsHoverFontColor+";",T+="}",T+=".cv-va-bootstrap .cv-chat-transaction-entry {",T+="padding: 0px !important;",T+="}",T+=".cv-va-bootstrap #cv-live-chat-submit[disabled] {",T=T+"background-color: "+c.submitBtn.disabled.backgroundColor+" !important;",T=T+"border-color: "+c.submitBtn.disabled.backgroundColor+" !important;",T+="}",T+=".cv-va-bootstrap .cv-va-tabs-container li.active, .cv-va-bootstrap .cv-va-tabs-container li.active:hover {",T=T+"border-bottom-color: "+c.tabsActiveBorderBottomColor+" !important;",T+="}",T+=".cv-va-bootstrap .cv-va-tabs-container li.open, .cv-va-bootstrap .cv-va-tabs-container li:hover {",T=T+"border-bottom-color: "+c.tabsHoverBorderBottomColor+" !important;",T+="}",T+=".cv-va-bootstrap a {",T=T+"color: "+c.vaHyperLinkCSS.color+";",T=T+"text-decoration: "+c.vaHyperLinkCSS.textDecoration+";",T+="}"),T+="</style>",e(T).appendTo("head"),window.CVMobile===!0&&(b=document.createElement("link"),b.id="cv-va-mobile-css",b.rel="stylesheet",b.type="text/css",b.href=u+"/css/styles-mobile.css",b.media="screen",d.appendChild(b))}window.CVVA.resizable=function(){var t,n,i,o,a;c.shrunkenUI===!0?(t="560px",n="560",i="600",o="350",a="600"):(t="550px",n="445",i="600",o="480",a="700"),void 0===window.expanded&&(window.expanded=!0,parent.postMessage("expand","*")),c.anchoredContainer.expandHeight===!0&&e(".cv-va-bootstrap #cv-chat-content").css("height",t),e(".cv-va-bootstrap #cv-chat-content").resizable({maxHeight:i,maxWidth:a,minHeight:n,minWidth:o,stop:function(){window.CVSaveAttributes()}});var s=c.ariaLabel.resizeHandlerBtn;s=e(".cv-va-bootstrap #cv-chat-content").hasClass("content-expanded")?c.ariaLabel.maximizeBtn:c.ariaLabel.resizeHandlerBtn,e(".cv-va-bootstrap #cv-chat-content").find(".cv-ui-icon").attr({tabindex:"0","aria-label":s,role:"button"}).on("keypress",function(t){var s=t.keyCode||t.which;13!=s||e(".cv-va-bootstrap #cv-chat-content").hasClass("content-expanded")?13==s&&e(".cv-va-bootstrap #cv-chat-content").hasClass("content-expanded")&&(e(".cv-va-bootstrap #cv-chat-content").css({height:n,width:o}),e(this).attr("aria-label",c.ariaLabel.resizeHandlerBtn),e(".cv-va-bootstrap #cv-chat-content").removeClass("content-expanded")):(e(".cv-va-bootstrap #cv-chat-content").css({height:i,width:a}),e(this).attr("aria-label",c.ariaLabel.maximizeBtn),e(".cv-va-bootstrap #cv-chat-content").addClass("content-expanded")),e(window).width()-(e(".cv-va-bootstrap #cv-chat-content").offset().left+e(".cv-va-bootstrap #cv-chat-content").outerWidth())<282&&e(".cv-va-bootstrap #cv-chat-content").css({left:"auto",right:"0"}),window.CVSaveAttributes()})},window.CVMobile===!1&&localStorage.getItem(c.businessName+"-cvVaCollectionLength")>1&&window.loadFromStorage===!0&&(window.cvVaMinimized===!1||void 0===window.cvVaMinimized)&&(window.resizableAttached=!0,window.CVVA.resizable()),window.CVVA.mobileMetaTag=function(){e("body > *").not("body > .cv-va-bootstrap").addClass("cv-va-hide-external-engagements"),void 0!==e("meta[name=viewport]").attr("content")&&(window.originalViewport=e("meta[name=viewport]").attr("content")),e("meta[name=viewport]").remove(),e("head").append('<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>'),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&document.querySelector("meta[name=viewport]").setAttribute("content","initial-scale=1.0001, minimum-scale=1.0001, maximum-scale=1.0001, user-scalable=no")},window.CVMobile!==!0||window.loadFromStorage!==!0||window.cvVaMinimized!==!1&&void 0!==window.cvVaMinimized||e("#cv-chat-container").hasClass("in")&&(console.log("modal visible"),window.CVVA.mobileMetaTag());var I,_=c.plugins||[],N=(c.development||!1,c.endpoint||"./bot.htm?JSIN=1"),E={url:N,extra_params:{}},k=new o,R={data:{}},D=r("businessArea")||c.businessArea,A=r("channel")||c.channel,V=r("startContext");D&&(E.extra_params.businessArea=D),A&&(E.extra_params.channel=A);var O={};CVMobileDet.DetectMobileLong()===!0?(O.isMobile=!0,O.isTablet=!1,O.isDesktop=!1):CVMobileDet.DetectTierTablet()===!0?(O.isMobile=!1,O.isTablet=!0,O.isDesktop=!1):(O.isMobile=!1,O.isTablet=!1,O.isDesktop=!0),E.extra_params.deviceDetection=JSON.stringify(O);var $;if(void 0!==localStorage.getItem(c.businessName+"-cvVaModel")&&null!==localStorage.getItem(c.businessName+"-cvVaModel")&&window.loadFromStorage===!0?($=new i(E),$.attributes=JSON.parse(localStorage.getItem(c.businessName+"-cvVaModel")),window.cvVaCollectionLength=parseInt(localStorage.getItem(c.businessName+"-cvVaCollectionLength"))):$=new i(E),window.cvVaModel=$,e(".cv-va-bootstrap .cv-chat-va-imessage").length){e(".cv-va-bootstrap .cv-va-bubble").last().html(window.cvVaModel.attributes.botanswer);var L=e("<ul>").addClass("cv-list-group"),M=window.cvVaModel.attributes.faqitems.suggestedfaqlist.semanticfaqs.semanticfaq,P=window.cvVaModel.attributes.maxsemanticfaqs||3,q=window.cvVaModel.attributes.relatedlistprompttext;if(n.isArray(M)&&M.length&&(L.append(q),M=M.slice(0,P),n.each(M,function(t){e.trim(t.QuestionText).length&&($li=e("<li>").addClass("cv-list-group-item cv-chat-connector cv-sematic-connector").html(t.QuestionText),$li.append('<span class="pull-right"><i class="fa fa-arrow-right"></i></span>'),$li.find(".pull-right").css({color:c.connectorsFontColor}),c.semanticTextAlignRight===!0&&$li.css("text-align","right"),L.append($li))}),e(".cv-va-bootstrap .cv-va-bubble").last().append(L)),void 0!==window.cvVaModel.attributes.disambiguationoptions){var j=window.cvVaModel.attributes.disambiguationoptions.option;n.isArray(j)&&j.length&&(L.addClass("cv-list-group"),n.each(j,function(t){e.trim(t.clicktext).length&&($li=e("<li>").addClass("cv-list-group-item cv-chat-connector cv-disambiguation-connector").html(t.clicktext),$li.append('<span class="pull-right"><i class="fa fa-arrow-right"></i></span>'),$li.find(".pull-right").css({color:c.connectorsFontColor}),c.semanticTextAlignRight===!0&&$li.css("text-align","right"),L.append($li))}),e(".cv-va-bootstrap .cv-va-bubble").last().append(L))}var B=new Date,z=B.getHours()+":"+(B.getMinutes()<10?"0":"")+B.getMinutes();e(".cv-va-bootstrap .cv-va-bubble").last().after('<span class="va-time-stamp">'+c.virtualAgentName+"&nbsp"+z+"</span>")}e.each(e(".cv-va-bootstrap .cv-chat-connector:not(.cv-chat-connector-disabled)"),function(){e(this).hasClass("cv-disambiguation-connector")||e(this).click(function(t){t.preventDefault(),t.stopPropagation(),$.askQuestion(e(this).text())})}),e.each(e(".cv-va-bootstrap .cv-chat-connector.cv-disambiguation-connector"),function(t){e(this).click(function(n){n.preventDefault(),n.stopPropagation(),$.disambiguationRequest(e(this).text(),window.cvVaModel.attributes.disambiguationoptions.option[t].answerid)})}),e.each(e(".cv-va-bootstrap .ics-cvbtn-group .cv-chat-connector-ics:not(.cv-chat-connector-ics-disabled)"),function(t){
e(this).click(function(n){n.preventDefault(),n.stopPropagation(),$.dtreeConnectorRequest(window.cvVaModel.attributes.connectors[t].ConnectorId,window.cvVaModel.attributes.answerID,e(this).text())})}),k.subscribe($);var H={model:$,collection:k},F=new a(H);window.ask_question=function(t,n,i,o,a,s,r){"string"!=typeof t?(t.preventDefault(),7==arguments.length?$.faqRequest(s,r,n):($.askQuestion(n),"A"===t.target.tagName&&e(t.target).prop("onclick",null))):"string"==typeof t&&(6==arguments.length?$.faqRequest(a,s,r):$.askQuestion(t))},window.connector_Click=function(e,t,n){$.dtreeConnectorRequest(e,t,n)},window.change_context=function(e){$.changeContext(e)},window.bot_nav=function(e,t,n,i,o){F.answer.botNav(e,t,n,i,o)},n.each(_,function(e){try{I=new e(H),I.render()}catch(t){settings.development&&alert("Error thrown whilst instantiating plugin: "+t)}}),e.trim(r("entry")).length&&(R.data.entry=e.trim(r("entry"))),V&&(R.success=function(){$.changeContext(V)}),window.CVSaveAttributes=function(){c.persistenceEnabled!==!0||window.forcesessionclose!==!1&&void 0!==window.forcesessionclose||(window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.set(c.businessName+"-cvVaCollectionLength",window.cvVaCollectionLength)}).then(function(){return window.cvCrossStorage.set(c.businessName+"-cvVaModel",JSON.stringify(window.cvVaModel))}).then(function(){return window.cvCrossStorage.set(c.businessName+"-cvVaBootstrapState",JSON.stringify(e("div.cv-va-bootstrap:first").html()))}).then(function(){return window.cvCrossStorage.set(c.businessName+"-cvVaStyles",JSON.stringify(e("#cv-va-styles").html()))}).then(function(){return window.cvCrossStorage.set(c.businessName+"-cvVaIdent",window.CVVA.model.ident)}),localStorage.setItem(c.businessName+"-cvVaCollectionLength",window.cvVaCollectionLength),localStorage.setItem(c.businessName+"-cvVaModel",JSON.stringify(window.cvVaModel)),localStorage.setItem(c.businessName+"-cvVaBootstrapState",JSON.stringify(e("div.cv-va-bootstrap:first").html())),localStorage.setItem(c.businessName+"-cvVaStyles",JSON.stringify(e("#cv-va-styles").html())),localStorage.setItem(c.businessName+"-cvVaIdent",window.CVVA.model.ident))},window.CVlaunchVA=function(){if(c.liveperson.removeLPengagements===!0){var t=function(){e(".LPMcontainer").each(function(t,n){for(var i=!0,t=0;t<c.liveperson.removeLPengagementExceptions.length;t++)e(this).parent().attr("id")===c.liveperson.removeLPengagementExceptions[t]&&(i=!1);i&&e(this).addClass("cv-va-hide-external-engagements")})};clearInterval(window.CVVA.removeExternalEngagementsInterval),window.CVVA.removeExternalEngagementsInterval=setInterval(t,100),t()}void 0===window.forcesessionclose&&(void 0===window.localInitCall&&(window.localInitCall=!0,void 0!==localStorage.getItem(c.businessName+"-cvVaModel")&&null!==localStorage.getItem(c.businessName+"-cvVaModel")&&c.persistenceEnabled!==!1&&(void 0!==localStorage.getItem(c.businessName+"-cvVaInitCall")&&null!==localStorage.getItem(c.businessName+"-cvVaInitCall")||window.loadFromStorage!==!1)||e(".cv-va-bootstrap #cv-chat-container").is(":visible")!==!1||(console.log("init"),$.init(R))),window.CVMobile===!0?(window.cvVaMinimized===!1||void 0===window.cvVaMinimized)&&(window.CVVA.mobileMetaTag(),setTimeout(function(){e("#cv-chat-container").modal({show:!0,keyboard:!1,backdrop:!1})},0),e("#cv-chat-container").on("shown.bs.modal",function(){window.CVSaveAttributes()})):setTimeout(function(){e("#cv-chat-container").modal({show:!1,keyboard:!0,backdrop:!1}),e("#cv-chat-container").on("shown.bs.modal",function(){window.CVSaveAttributes(),c.focusInputOnOpen===!0&&e(".cv-va-bootstrap #cv-chat-user-entry").focus()}),e("#cv-chat-container").modal({show:!0,keyboard:!0,backdrop:!1})},0))},setTimeout(function(){window.CVVA.events.loaded({launcherExposed:!0,loadTime:((new Date).getTime()-window.CVVA.initStarts.getTime())/1e3})},100),e("#cv-chat-container").on("hidden.bs.modal",function(){"liveperson"===c.livechatVendor&&localStorage.getItem(c.businessName+"-cvVaActiveSession_lp")||"true"===localStorage.getItem(c.businessName+"-lpSessionEndedExternal")?F.endChatLP():"creative virtual"===c.livechatVendor&&"true"===localStorage.getItem(c.businessName+"-cvVaActiveSession_cv")?(clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(c.businessName+"-cvVaBootstrapState"),localStorage.removeItem(c.businessName+"-cvVaModel"),localStorage.removeItem(c.businessName+"-cvVaStyles"),localStorage.removeItem(c.businessName+"-cvVaInitCall"),localStorage.removeItem(c.businessName+"-cvVaCollectionLength"),localStorage.removeItem(c.businessName+"-cvVaTimestamp"),localStorage.removeItem(c.businessName+"-cvVaEOCSRendered"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_cv"),localStorage.removeItem(c.businessName+"-cvVaBusinessArea"),localStorage.removeItem(c.businessName+"-cvVaIdent"),window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.localInitCall=void 0,window.sessionFlushInterval=setInterval(function(){clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(c.businessName+"-cvVaBootstrapState"),localStorage.removeItem(c.businessName+"-cvVaModel"),localStorage.removeItem(c.businessName+"-cvVaStyles"),localStorage.removeItem(c.businessName+"-cvVaInitCall"),localStorage.removeItem(c.businessName+"-cvVaCollectionLength"),localStorage.removeItem(c.businessName+"-cvVaTimestamp"),localStorage.removeItem(c.businessName+"-cvVaEOCSRendered"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_cv"),localStorage.removeItem(c.businessName+"-cvVaBusinessArea"),localStorage.removeItem(c.businessName+"-cvVaIdent"),window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.localInitCall=void 0},0),setTimeout(function(){window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(c.businessName+"-cvVaBootstrapState",c.businessName+"-cvVaModel",c.businessName+"-cvVaStyles",c.businessName+"-cvVaInitCall",c.businessName+"-cvVaCollectionLength",c.businessName+"-cvVaTimestamp",c.businessName+"-cvVaEOCSRendered",c.businessName+"-cvVaActiveSession_cv",c.businessName+"-cvVaBusinessArea")}).then(function(e){window.loadFromStorage=!1,$.closeSession(),clearInterval(window.sessionFlushInterval),window.resetVA()})},150)):c.persistenceEnabled!==!0||window.forcesessionclose!==!1&&void 0!==window.forcesessionclose||window.CVSaveAttributes()});var W=!1;navigator.userAgent.toLowerCase().indexOf("firefox")>-1,1;var U=function(e){if(e.origin===window.CVVA.cvLcOrigin&&e.data.hasOwnProperty("chat_accepted"))window.cvLCQueueId=e.data.queueId,W=!0;else if(e.origin===window.CVVA.cvLcOrigin&&e.data.hasOwnProperty("get_ident")){var t=document.getElementById("cv-lc-iframe").contentWindow,n={ident:window.CVVA.model.ident};t.postMessage(n,"*")}else e.origin===window.CVVA.cvLcOrigin&&e.data.hasOwnProperty("focusMinimize")?(navigator.userAgent.toLowerCase().indexOf("firefox")>-1,1):e.origin===window.CVVA.cvLcOrigin&&e.data.hasOwnProperty("botNav")&&window.bot_nav({preventDefault:function(){},stopPropagation:function(){}},e.data.url,e.data.target)};navigator.userAgent.toLowerCase().indexOf("firefox")>-1,1,window.addEventListener("message",U,!1),e(".cv-va-bootstrap .close.container-control.mobile-close").click(function(t){"creative virtual"===c.livechatVendor&&"true"===localStorage.getItem(c.businessName+"-cvVaActiveSession_cv")&&"true"!==localStorage.getItem(c.businessName+"-cvVaEOCSRendered")&&c.vaLcTabs===!1&&W===!0?(localStorage.removeItem(c.businessName+"-cvPCSdata"),window.render_eocs()):"liveperson"===c.livechatVendor&&"true"===localStorage.getItem(c.businessName+"-cvVaActiveSession_lp")?e(".cv-va-bootstrap #cv-lp-end-chat-confirmation").show():window.forcesessionclose===!0?(clearInterval(window.CVVA.removeExternalEngagementsInterval),e(".LPMcontainer").each(function(t,n){e(this).removeClass("cv-va-hide-external-engagements")}),window.resetVA(),window.forcesessionclose=void 0):("true"===localStorage.getItem("cvSessionEndedExternal_VA")||c.flushVAonClose)===!0?(c.liveperson.removeLPengagements===!0&&(clearInterval(window.CVVA.removeExternalEngagementsInterval),e(".LPMcontainer").each(function(t,n){e(this).removeClass("cv-va-hide-external-engagements")})),window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(c.businessName+"-cvVaBootstrapState",c.businessName+"-cvVaModel",c.businessName+"-cvVaStyles",c.businessName+"-cvVaInitCall",c.businessName+"-cvVaCollectionLength",c.businessName+"-cvVaTimestamp","cvSessionEndedExternal_VA",c.businessName+"-lpSessionEndedExternal",c.businessName+"-cvVaActiveSession_lp",c.businessName+"-requestingChat_lp",c.businessName+"-cvLpVisitorChatRels",c.businessName+"-cvLpVisitorResumeMode",c.businessName+"-cvLpVisitorSessionVars")}).then(function(){localStorage.removeItem("cvSessionEndedExternal_VA"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_lp"),localStorage.removeItem(c.businessName+"-requestingChat_lp"),localStorage.removeItem(c.businessName+"-lpSessionEndedExternal"),$.closeSession(),window.resetVA()}),clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(c.businessName+"-cvVaBootstrapState"),localStorage.removeItem(c.businessName+"-cvVaModel"),localStorage.removeItem(c.businessName+"-cvVaStyles"),localStorage.removeItem(c.businessName+"-cvVaInitCall"),localStorage.removeItem(c.businessName+"-cvVaCollectionLength"),localStorage.removeItem(c.businessName+"-cvVaTimestamp"),window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.localInitCall=void 0,window.sessionFlushInterval=setInterval(function(){clearInterval(window.proactiveEndSessionInterval),clearInterval(window.cvVaSaveState),localStorage.removeItem(c.businessName+"-cvVaBootstrapState"),localStorage.removeItem(c.businessName+"-cvVaModel"),localStorage.removeItem(c.businessName+"-cvVaStyles"),localStorage.removeItem(c.businessName+"-cvVaInitCall"),localStorage.removeItem(c.businessName+"-cvVaCollectionLength"),localStorage.removeItem(c.businessName+"-cvVaTimestamp"),window.cvVaCollectionLength=void 0,window.cvVaModel=void 0,window.cvVaMinimized=void 0,window.resizableAttached=void 0,window.localInitCall=void 0},0),setTimeout(function(){window.cvCrossStorage.onConnect().then(function(){return window.cvCrossStorage.del(c.businessName+"-cvVaBootstrapState",c.businessName+"-cvVaModel",c.businessName+"-cvVaStyles",c.businessName+"-cvVaInitCall",c.businessName+"-cvVaCollectionLength",c.businessName+"-cvVaTimestamp","cvSessionEndedExternal_VA")}).then(function(e){window.loadFromStorage=!1,clearInterval(window.sessionFlushInterval)})},150)):(e("#cv-chat-container").modal({show:!0,keyboard:!0,backdrop:!1}),e("#cv-chat-container").modal("hide"))})}else window.CVlaunchVA=function(){},console.warn("CV VA Disabled")})["catch"](function(e){console.log(e),console.log("cross domain storage not available");var t=!1;if(CVMobileDet.DetectMobileLong()===!0||CVMobileDet.DetectTierTablet()===!0?window.CVMobile=!0:window.CVMobile=!1,c.selectiveInjection.enabled===!0){if(c.selectiveInjection.url.length>0)for(var n=0;n<c.selectiveInjection.url.length;n++)window.location.href.indexOf(c.selectiveInjection.url[n])>-1&&(t=!0);null!==c.selectiveInjection.variable&&c.selectiveInjection.variable===!0&&(t=!0)}else t=!0;if(window.CVMobile===!1?c.selectiveInjection.device.desktop===!1&&(t=!1):window.CVMobile===!0&&c.selectiveInjection.device.mobile===!1&&(t=!1),t===!0){if(c.launcherInjection===!0){var i=document.getElementsByTagName("head")[0],o=document.createElement("link");o.id="cv-font-awesome-css",o.rel="stylesheet",o.type="text/css",o.href=c.libEndpoint+"css/libs/font_awesome/cv-font-awesome.css",o.media="screen",i.appendChild(o);var a=new u;if(c.lcAvailabilityLauncher===!1&&0===c.customLaunchers.length&&window.CVMobile===!1)if(c.selectiveLauncherInjection.enabled===!0)for(var s=0;s<c.selectiveLauncherInjection.url.length;s++)window.location.href.indexOf(c.selectiveLauncherInjection.url[s])>-1&&a.render(c.appendLauncherTo);else a.render(c.appendLauncherTo);window.CVlaunchVA=function(){var e=window.cvVASettings.libEndpoint+"bot?config="+window.cvVASettings.businessName,t=window.cvVASettings.businessName+"/window";window.open(e,t,"width=350,height=560,resizable=yes")}}if(c.inputLauncher.enabled===!0){var r=new d;if(c.inputLauncher.selectiveInjection.enabled===!0)for(n=0;n<c.inputLauncher.selectiveInjection.url.length;n++)window.location.href.indexOf(c.inputLauncher.selectiveInjection.url[n])>-1&&r.render(c.appendLauncherTo);else r.render(c.inputLauncher.appendTo)}}}),window.CVVA.popupMode===!0&&(localStorage.removeItem(c.businessName+"-cvVaBootstrapState"),localStorage.removeItem(c.businessName+"-cvVaModel"),localStorage.removeItem(c.businessName+"-cvVaStyles"),localStorage.removeItem(c.businessName+"-cvVaInitCall"),localStorage.removeItem(c.businessName+"-cvVaTimestamp"),localStorage.removeItem(c.businessName+"-cvVaMinimized"),localStorage.removeItem(c.businessName+"-cvVaCollectionLength"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_lp"),localStorage.removeItem(c.businessName+"-cvVaEOCSRendered"),localStorage.removeItem(c.businessName+"-cvVaActiveSession_cv"),localStorage.removeItem(c.businessName+"-cvPCSdata"),localStorage.removeItem(c.businessName+"-chatSessionData_genesys"),localStorage.removeItem(c.businessName+"-agentPickedUp_genesys"),localStorage.removeItem(c.businessName+"-pcsData_genesys"),localStorage.removeItem(c.businessName+"-requestingChat_genesys"),localStorage.removeItem("cv-tserverid"),sessionStorage.removeItem("lpVisitorChatRels"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorResumeMode"+c.liveperson.accountNumber),sessionStorage.removeItem("lpVisitorSessionVars"+c.liveperson.accountNumber))};return{initialize:h}}),require.config({baseUrl:"js_source/",urlArgs:"cb="+Math.random(),paths:{jquery:"libs/jquery/jquery",jquery_loader:"utils/jquery-loader",jquery_ui:"libs/jquery/jquery.ui",jquery_signalR:"libs/jquery/jquery.signalR-2.1.1.min",underscore:"libs/underscore/underscore",underscore_loader:"utils/underscore-loader",backbone:"libs/backbone/backbone",bootstrap:"libs/bootstrap/bootstrap",xml2json:"libs/jquery/jquery.xml2json",iePollyfill:"libs/cross_storage/ie-pollyfill",crossStorage:"libs/cross_storage/client",detectmobile:"libs/detectmobile/detectmobile",scrollto:"libs/jquery/jquery.scrollto",lpChatV3:"libs/liveperson/lpChat.min",leTagConfiguration:"libs/liveperson/leTagConfiguration",leTag:"libs/liveperson/leTag.min",perfectScrollbar:"libs/jquery/perfect-scrollbar.jquery"},map:{"*":{jquery:"jquery_loader"},jquery_loader:{jquery:"jquery"}},shim:{bootstrap:{deps:["jquery"]},xml2json:{deps:["jquery"],exports:"window.cvjq.fn.xml2json"},crossStorage:{deps:["iePollyfill"]},detectmobile:{exports:"detectmobile"}}}),require(["app"],function(e){return window.resetVA=function(){console.log("resetVA"),window.cvjq("#"+window.cvCrossStorage._frameId).remove(),window.cvjq(".cv-va-bootstrap").remove(),window.cvjq(".cv-va-opener").remove(),window.cvjq("#cv-font-awesome-css").remove(),window.cvjq("#cv-jquery-ui-css").remove(),window.cvjq("#cv-bootstrap-css").remove(),window.cvjq("#cv-va-css").remove(),window.cvjq("#cv-print-css").remove(),window.cvjq("#cv-va-styles").remove(),window.cvjq(".cv-va-launcher-styles").remove(),window.cvjq(".cv-ui-helper-hidden-accessible").remove(),e.initialize()},e.initialize()}),define("main",function(){});