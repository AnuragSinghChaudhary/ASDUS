!function(){if("function"==typeof window.Event)return;window.Event=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}(),function(){"use strict";if(window.cQuery)return;var a=window.cQuery=function(o,e){if(o instanceof a)return o;if("string"==typeof o&&"<"===o[0]&&">"===o.substr(-1)&&3<=o.length)return a.$tmp.html(o).children().detach();if("function"==typeof o)return o=o.bind(window,a),a.isReady?o():n.push(o);if(!(this instanceof a))return new a(o,e);if(this.elms=[],void 0===o)return this;if((o instanceof Node||o===window)&&this.elms.push(o),"string"==typeof o){e=void 0===e?document:e;var t=function(e){if(e.querySelectorAll)for(var t=e.querySelectorAll(o),n=0;n<t.length;n++)this.elms.push(t[n])}.bind(this);e instanceof a?e.each(t):t(e)}return this};a.fn=a.prototype,a.fn.each=function(n){return this.elms.forEach(function(e,t){n.call(e,e,t)}),this},a.each=function(e,n){var t=function(e,t){n(t,e)};if(e instanceof Array)e.forEach(t);else if(e instanceof a)e.each(t);else for(var o in e)e.hasOwnProperty(o)&&n(o,e[o])},a.eachCSS=function(e,t){e instanceof Array?e.forEach(function(e){t.apply(void 0,e)}):a.each(e,t)},a.fn.hasClass=function(e){for(var t=new RegExp("(^| )"+e+"((?= )|$)","g"),n=0;n<this.elms.length;n++)if(this.elms[n].className.match(t))return!0;return!1},a.fn.addClass=function(e){var t=new RegExp("(^| )"+e+"((?= )|$)","g");return this.each(function(){this.className.match(t)||(this.className+=" "+e)})},a.fn.removeClass=function(e){var t=new RegExp("(^| )"+e+"((?= )|$)","g");return this.each(function(){this.className=this.className.replace(t,"$1$2").trim()})},a.fn.mod=function(e,t){if(0===this.elms.length)return this;var n,o=new RegExp("(^| )"+e+"_([a-zA-Z0-9_-]+)((?= )|$)","g");return!1===t?this.each(function(){this.className=this.className.replace(o,"$3")}):void 0===t?!!(n=o.exec(this.elms[0].className))&&n[2]:this.each(function(){this.className.match(o)?this.className=this.className.replace(o,"$1"+e+"_"+t+"$3"):this.className+=" "+e+"_"+t})};var c=function(e,t){return void 0===t||(e.matches||e.matchesSelector||e.msMatchesSelector||e.oMatchesSelector).call(e,t)};a.fn.is=function(e){for(var t=0;t<this.elms.length;t++)if(c(this.elms[t],e))return!0;return!1},a.fn.find=function(e){return a(e,this)},a.fn.filter=function(e){var t=a();return this.each(function(){c(this,e)&&t.elms.push(this)}),t},a.fn.first=function(){return a(this.elms[0])},a.fn.closest=function(t){var n=a();return this.each(function(e){for(;e.parentNode;e=e.parentNode)if(c(e,t)){n.elms.push(e);break}}),n},a.fn.parent=function(e){var t=a();return this.each(function(){c(this.parentNode,e)&&t.elms.push(this.parentNode)}),t},a.fn.children=function(t){var n=a();return this.each(function(){for(var e=0;e<this.children.length;e++)c(this.children[e],t)&&n.elms.push(this.children[e])}),n},a.fn.attr=function(e,t){return void 0===t?this.elms.length?this.elms[0].getAttribute(e):null:this.each(function(){this.setAttribute(e,t)})},a.fn.css=function(e){return 2===arguments.length&&(e=[arguments]),"string"==typeof e?this.elms.length?this.elms[0].style[e]:null:this.each(function(n){a.eachCSS(e,function(e,t){n.style[e]=t+("number"==typeof t?"px":"")})})},a.fn.eraseCSS=function(t){return this.each(function(){for(var e=0;e<t.length;e++)this.style[t[e]]=null})},a.fn.data=function(e,t){if(void 0===t){if(!this.elms.length)return;return this.elms[0].$$oqData&&this.elms[0].$$oqData[e]||this.attr("data-"+e)}return this.each(function(){this.$$oqData||(this.$$oqData={}),null===t?delete this.$$oqData[e]:this.$$oqData[e]=t})},a.fn.val=function(e){return void 0===e?this.elms.length?this.elms[0].value:null:this.each(function(){this.value=e})},a.fn.height=function(e){return void 0===e?this.elms.length?this.elms[0].offsetHeight:0:this.css({height:e})},a.fn.html=function(t){return void 0===t?this.elms.length?this.elms[0].innerHTML:null:this.each(function(e){e.innerHTML=t})},a.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})},a.fn.remove=function(){this.find("*").each(function(){delete this.$$oqEvents}),this.html("").each(function(){delete this.$$oqEvents}).detach(),this.elms=[]},a.fn.eachEach=function(e,n){return this.each(function(t){e.each(function(e){n(t,e)})})};var e=function(t){return function(e){return a(e)[t](this),this}};a.fn.append=function(e){return this.eachEach(a(e),function(e,t){e.appendChild(t)})},a.fn.appendTo=e("append"),a.fn.prepend=function(e){return this.eachEach(a(e),function(e,t){e.insertBefore(t,e.firstChild)})},a.fn.prependTo=e("prepend"),a.fn.before=function(e){return this.eachEach(a(e),function(e,t){e.parentNode.insertBefore(t,e)})},a.fn.insertBefore=e("before"),a.fn.after=function(e){return this.eachEach(a(e),function(e,t){e.parentNode.insertBefore(t,e),e.parentNode.insertBefore(e,t)})},a.fn.insertAfter=e("after"),a.fn.replace=function(e){a(e).before(this).remove()},a.fn.on=function(e,s){var r=3===arguments.length&&"string"==typeof s?s:null;return r&&(s=arguments[2]),this.each(function(o){var i=r?function(e){for(var t=e.target;t.parentNode;t=t.parentNode)if(c(t,r))return s.call(t,e)}:s.bind(o);a.each(e.split(" "),function(e,t){var n=(r?r+":":"")+t;o.$$oqEvents||(o.$$oqEvents={}),o.$$oqEvents[n]||(o.$$oqEvents[n]=[]),o.$$oqEvents[n].push([s,i]),o.addEventListener(t,i)})})},a.fn.off=function(e,i){var s=3===arguments.length&&"string"==typeof i?i:null;return s&&(i=arguments[2]),this.each(function(o){a.each(e.split(" "),function(e,t){var n=(s?s+":":"")+t;o.$$oqEvents&&o.$$oqEvents[n]&&(o.$$oqEvents[n]=o.$$oqEvents[n].filter(function(e){return e[0]!==i||o.removeEventListener(t,e[1])&&!1}),o.$$oqEvents[n].length||delete o.$$oqEvents[n])})})},a.fn.one=function(t,n){var o=function(e){n.call(this,e),this.off(t,o)}.bind(this);return this.on(t,o)},a.fn.trigger=function(e){return this.each(function(){this.dispatchEvent(new Event(e))})};var n=[];if(a.ready=function(){a.isReady=!0,n.forEach(function(e){e()})},"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)setTimeout(a.ready);else{var t=function(){document.removeEventListener("DOMContentLoaded",t),window.removeEventListener("load",t),a.ready()};document.addEventListener("DOMContentLoaded",t),window.addEventListener("load",t)}a.fn.animate=function(e,t,n,o,i){t=t||250,n=n||"ease-in-out",i=i||25;var s="";return a.eachCSS(e,function(e){s+=(s?", ":"")+e+" "+t+"ms "+n}),this.stop().css({transition:s,"-webkit-transition":s}).data("$animationStart",setTimeout(function(){this.css(e)}.bind(this),i)).data("$animationEnd",setTimeout(function(){this.stop(),o instanceof Function&&o.call(this)}.bind(this),i+t))},a.fn.stop=function(){return this.each(function(){var t=a(this);["$animationStart","$animationStop"].forEach(function(e){clearTimeout(t.data(e)),t.data(e,null)})}).eraseCSS(["transition","-webkit-transition"])},a.scrollTo=function(e,t,n){t<0?n instanceof Function&&n.call(this):setTimeout(function(){window.scroll(0,window.pageYOffset+(e-window.pageYOffset)/t*10),a.scrollTo(e,t-10,n)},10)};var r=function(e,n){var o=[];return a.each(e,function(e,t){e=n?n+"["+e+"]":e,o.push(null!==t&&"object"==typeof t?r(t,e):encodeURIComponent(e)+"="+encodeURIComponent(t))}),o.join("&")};a.ajax=function(e,o){"string"!=typeof e&&(e=(o=e||{}).url);var i=o.dataType||"json",s=new XMLHttpRequest;s.onload=s.onerror=function(e){var t=o[200<=s.status&&s.status<400?"success":"error"];if(t instanceof Function){var n=e.target.response;if(window.resp=n,"json"===i&&"string"==typeof n)try{n=JSON.parse(n)}catch(e){return}t(n)}};var t=o.data||{},n="POST"===o.type;return n||void 0===o.cache||o.cache||(t._=Date.now()),t=r(t),n?(s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded")):s.open("GET",e+(t.length?-1===e.indexOf("?")?"?":"&":"")+t,!0),o.allowCookies&&(s.withCredentials=!0),s.responseType=i,s.timeout=o.timeout||5e3,s.send.apply(s,n?[t]:[]),s},a.get=function(e,t,n,o){return a.ajax("string"!=typeof e?e:{type:"GET",url:e,data:t,success:n,dataType:o})},a.post=function(e,t,n,o){return a.ajax("string"!=typeof e?e:{type:"POST",url:e,data:t,success:n,dataType:o})};var i=[];a.storagePrefix="conv_",function(){if(void 0!==window.localStorage){var e={store:function(e,t){try{localStorage[null!=t?"setItem":"removeItem"](e,t)}catch(e){}},retrieve:function(e){return localStorage.getItem(e)}};try{e.store("",1),e.store("",null),i.push(e)}catch(e){}}}(),i.push({store:function(e,t){var n=new Date(Date.now()+(null===t?-1:63072e6));document.cookie=e+"="+t+"; expires="+n.toGMTString()+"; path=/"},retrieve:function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*\|{}\(\)\[\]\\\/\+\^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):null}}),a.store=function(e,t){null!==t&&(t=JSON.stringify(t));for(var n=0;n<i.length;n++)i[n].store(a.storagePrefix+e,t)},a.retrieve=function(e,t){for(var n=null,o=0;o<i.length&&!n;o++)try{n=JSON.parse(i[o].retrieve(a.storagePrefix+e))}catch(e){}return null===n&&void 0!==t&&(n=t),n},a.getCookie=function(e,t){for(var n=null,o=0;o<i.length&&!n;o++)try{n=i[o].retrieve(e)}catch(e){}return null===n&&void 0!==t&&(n=t),n},a.safeEval=function(e){try{window.eval(e)}catch(e){console.error(e)}},a.extend=function(){var n={},o=!1,e=0,t=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(o=arguments[0],e++);for(var i=function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(o&&"[object Object]"===Object.prototype.toString.call(e[t])?n[t]=a.extend(!0,n[t],e[t]):n[t]=e[t])};e<t;e++){i(arguments[e])}return n};var o=function(){a.$document=a(document),a.$window=a(window),a.$head=a(document.head),a.$html=a(document.documentElement),a.$body=a(document.body),a.$tmp=a(document.createElement("div"))};a.isReady?o():n.push(o)}(),cQuery(function(S){if(window.Convertful)return!1;var x=window.Convertful={getParameterByName:function(e,t){var n;return t||(t=window.location.href),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),(n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t))?decodeURIComponent(n[1].replace(/\+/g," ")):""}},e=S('script#convertful-api, script#optinguru-api, script[src*="/Convertful.js"]'),t=e.attr("src"),a=t.split("/").slice(0,-1).join("/"),n=+(e.data("owner")||x.getParameterByName("owner",t));if(n){var o={};x.on=function(e,t){return void 0===o[e]&&(o[e]=[]),o[e].push(t),this},x.off=function(e,t){if(o[e]instanceof Array&&void 0!==t){var n=o[e].indexOf(t);-1!==n&&o[e].splice(n,1)}else delete o[e];return x},x.one=function(e,t){var n=function(){t.apply(x,arguments),x.off(e,n)};return x.on(e,n)},x.trigger=function(e,t){return o[e]instanceof Array&&o[e].forEach(function(e){e.apply(x,t)}),x};var p=x.si={values:{},affects:{},_bound:{},permanent:[],attach:function(e,t){if(t[0]instanceof Array)for(var n=0;n<t.length;n+=2)p.attach(e,t[n]);else{var o=t[0],i=void 0===p.affects[o],s=E();if(i&&(p.affects[o]=[]),-1===p.affects[o].indexOf(e)&&p.affects[o].push(e),i)if("timeOnPage"===o)p.pageTimer=setInterval(function(){p.set(o,E()-s)},1e3),p.set(o,0);else if("inactivityTime"===o){var r=0,a=function(){r++,p.set(o,r)};p.pageInactivityTimer=setInterval(a,1e3),S.$window.on("mousemove scroll orientationchange keydown",p._bound.inactivity=function(){clearInterval(p.pageInactivityTimer),r=0,p.pageInactivityTimer=setInterval(a,1e3)}),p.set(o,r)}else if("timeOnSite"===o)p.siteTimer=setInterval(function(){p.set(o,E()-x.session().start)},1e3);else if("countdownTime"===o){var c=x.session(),l=0;l=t[4]&&c.countdownR&&c.countdownR[t[4]]?c.countdownR[t[4]].end:t[3],p.countdownTimer=setInterval(function(){p.set(o,l-E())},1e3)}else if("wasShown"===o)p.set(o,p.getWidgetEvents(0));else if("wasClosed"===o)p.set(o,p.getWidgetEvents(1));else if("wasSubmitted"===o)p.set(o,p.getWidgetEvents(2));else if("leaveIntent"===o){var f=0,d=!1;S.$body.on("mousemove",p._bound.bodymove=function(e){d=e.screenY<200&&e.screenY<=f,f=e.screenY}),S.$body.on("mouseleave",p._bound.bodyleave=function(){d&&p.setEvent(o)})}else if("clicked:"===o.substr(0,8)){var u=o.substr(8),v=function(){if(!p.affects[o])return S.$body.off("click",u,v);p.setEvent(o,!0)};S.$body.on("click",u,v)}else if("scrollPc"===o)S.$window.on("scroll",p._bound.scrollPc=function(){p.set(o,window.pageYOffset/(document.body.offsetHeight-window.innerHeight)*100)});else if("scrollPx"===o)S.$window.on("scroll",p._bound.scrollPx=function(){p.set(o,window.pageYOffset)});else if("relativeUrl"===o||"absoluteUrl"===o||"relativeStartUrl"===o||"absoluteStartUrl"===o){var h=("Start"===o.substr(-8,5)?x.session().startUrl:location.href).split("#")[0];"r"===o[0]&&(h=h.replace(/^(?:\/\/|[^\/]+)*/,"")),p.set(o,h)}else if("sessionImpressions"===o||"pageImpressions"===o){var m=[],w=function(e){e&&m.push(e),p.set("sessionImpressions",x.session().shown),p.set("pageImpressions",m)};x.on("afterShow",w),w()}else"refUrl"===o?p.set(o,x.session().referrer):"ref"===o?p.set(o,p.getRef(x.session().referrer)):"pageViews"===o?p.set(o,x.session().pageViews):"visitNum"===o?p.set(o,x.personGet("$visitNum")):"timeFromFv"===o?p.set(o,E()-x.personGet("$fvDate")):"timeFromLv"===o&&x.personGet("$lvDate")?p.set(o,E()-x.personGet("$lvDate")):"lvDate"===o&&x.personGet("$lvDate")?p.set(o,new Date(1e3*x.personGet("$lvDate")).toISOString().substr(0,10)):0===o.indexOf("urlGet")?p.set(o,p.getUrlQuery(o.split(":")[1])):"date"===o?p.set(o,(new Date).toISOString().substr(0,10)):0===o.indexOf("personParam")?p.set(o,x.personGet(o.split(":")[1],"")):0===o.indexOf("cookie")?p.cookieTimer=setInterval(function(){p.set(o,S.getCookie(o.split(":")[1]))},1e3):"screenWidth"===o?p.set(o,screen.width):"platform"===o?p.set(o,p.getPlatform()):"wpIsPost"===o?window.cQuery(function(){var e=!!window.conv_page_vars&&"post"===window.conv_page_vars.type;p.set(o,e)}):"wpCategory"===o?window.cQuery(function(){var e=window.conv_page_vars?window.conv_page_vars.categories:{};p.set(o,e)}):"wpTag"===o?window.cQuery(function(){var e=window.conv_page_vars?window.conv_page_vars.tags:{};p.set(o,e)}):"wpUserRole"===o&&window.cQuery(function(){var e=window.conv_page_vars&&window.conv_page_vars.user_roles?window.conv_page_vars.user_roles:[],t={};-1!==e.indexOf("administrator")?t.admin="admin":0===e.length&&(t.guest="guest"),p.set(o,t)})}},set:function(t,e,n){e!==p.values[t]&&(p.values[t]=e,setTimeout(function(){var e=p.affects[t];e&&e.forEach(function(e){var t=x.widgets[e];(t.isInstant||!x.shownObstacle||n)&&p.checkRule(t.showIf)&&(x.show(e),p.detach(e))})},1))},getWidgetEvents:function(n){var e=S.retrieve("lastEvents",{}),o={};return S.each(e,function(e,t){t[n]&&(o[e]=!0)}),o},getPlatform:function(){var e=navigator.userAgent;return void 0!==window.orientation||-1!==e.indexOf("IEMobile")?/Android/i.test(e)?/Mobile/i.test(e)?"mobile":"tablet":/ipad|playbook|silk/i.test(e)?"tablet":"mobile":/Nintendo|PLAYSTATION|Xbox/i.test(e)?"console":window.orientation||"ontouchstart"in window||"onmsgesturechange"in window?-1!==e.indexOf("Edge")?"desktop":"unknown":"desktop"},getUrlQuery:function(e){for(var t,n=/[?&]?([^=]+)=([^&]*)/g;t=n.exec(location.search);)if(e===decodeURIComponent(t[1]))return decodeURIComponent(t[2]);return""},getRef:function(e){if(""===e)return["direct"];var t=e.split("/")[2].replace(/^www\./,"");if(t===location.host.replace(/^www\./,""))return["internal"];var n=["utm_source=bing","gclid=","utm_medium=cpc","utm_medium=paid-media","utm_medium=ppc","aclk?","cid="];if(-1!==e.search(/\bgoogle\..*\?.*adurl=http/))return["ppc"];for(var o=0;o<n.length;o++)if(-1!==e.split("?").slice(1).join("?").indexOf(n[o])||-1!==location.search.indexOf(n[o]))return["ppc"];if(-1!==e.split("?").slice(1).join("?").indexOf("utm_medium=email")||-1!==location.search.indexOf("utm_medium=email"))return["email"];var i={facebook:["facebook.com","fb.me"],pinterest:["pinterest.com"],twitter:["twitter.com","t.co"],linkedin:["linkedin.com"],googleplus:["plus.google.com","plus.url.google.com"]};for(var s in i)if(i.hasOwnProperty(s))for(o=0;o<i[s].length;o++)if(-1!==t.replace(i[s][o],"#").split(".").indexOf("#"))return["social",s];var r={google:[["google"]],bing:[["bing"],["q"]],yahoo:[["search.yahoo","m.yahoo","m2.yahoo"]],baidu:[["baidu"],["wd","word"]],yandex:[["yandex","ya.ru"],["text"]],socom:[["so.com"],["q"]],"360cn":[["360.cn"],["q"]],"360sou":[["360sou"],["q"]],aol:[["aol"],["query","q"]],duckduckgo:[["duckduckgo"]],askcom:[["ask.com"],["q","QUERYT"]],mailru:[["mail.ru"],["words"]],sogou:[["sogou"],["q","query"]]};for(var a in r)if(r.hasOwnProperty(a)){var c=new RegExp("(\\.|^)("+r[a][0].join("|").replace(/\./g,"\\.")+")(\\.|$)").test(t),l=r[a].length<2||new RegExp("(\\?|&)("+r[a][1].join("|")+")=").test(e);if(c&&l)return["organic",a]}return["external"]},setEvent:function(e,t){p.set(e,!0,t),setTimeout(p.set.bind(p,e,!1),100)},detach:function(n,o){S.each(p.affects,function(e,t){if(-1!==t.indexOf(n)){if(!o&&"clicked:"===e.substr(0,8))return!0;t.splice(t.indexOf(n),1),0===t.length&&(delete p.affects[e],"timeOnPage"===e?clearInterval(p.pageTimer):"inactivityTime"===e?(clearInterval(p.pageInactivityTimer),S.$window.off("mousemove scroll orientationchange keydown",p._bound.inactivity)):"timeOnSite"===e?clearInterval(p.siteTimer):0===e.indexOf("cookie")?clearInterval(p.cookieTimer):"countdownTime"===e?clearInterval(p.countdownTimer):"leaveIntent"===e?S.$body.off("mousemove",p._bound.bodymove).off("mouseleave",p._bound.bodyleave):"scrollPc"!==e&&"scrollPx"!==e||S.$window.off("scroll",p._bound[e]))}})},checkRule:function(e){if(e[0]instanceof Array){for(var t=p.checkRule(e[0]),n=2;n<e.length;n+=2)t="and"===e[n-1]?t&&p.checkRule(e[n]):t||p.checkRule(e[n]);return t}var o=p.values[e[0]];switch(e[1]){case"=":return o==e[2];case"!=":return o!=e[2];case"<":return o<e[2];case"<=":return o<=e[2];case">":return o>e[2];case">=":return o>=e[2];case"!~=":return o.indexOf&&-1===o.indexOf(e[2])||"object"==typeof o&&!Array.isArray(o)&&void 0===o[e[2]];case"~=":return o.indexOf&&-1!==o.indexOf(e[2])||"object"==typeof o&&void 0!==o[e[2]];default:return!1}}},c=x.ab={ids:[],vars:{},init:function(e){var o=[];e.forEach(function(e){var t=+e.id,n=+e.varOf;n&&(c.vars[t]=c.vars[n]=c.vars[n]||[n]).push(t),o.push(t)});var t=x.session(),i=t.ab=(t.ab||[]).filter(function(e){return-1!==o.indexOf(e)});S.each(c.vars,function(e,t){for(var n=0;n<t.length;n++)if(-1!==i.indexOf(t[n]))return;i.push(t[Math.floor(Math.random()*t.length)])}),0<i.length&&x.session(t),c.ids=o.filter(function(e){return!c.vars[e]||-1!==i.indexOf(e)})},canBeShown:function(e){return-1!==c.ids.indexOf(e)},getVarsOf:function(e){return c.vars[e]||[e]}};x.active=[],x.$widgets={},x.$containers={},x.$overlays={},x.$styles={},x.shownObstacle=!1,x.socsignEvents={},x.waypoints=[],x.lastClickedElement=window.event;var i=navigator.userAgent||navigator.vendor||window.opera;x.isIOS=i.match(/iphone|ipod|ipad/i),x.isFB=-1<i.indexOf("FBAN")||-1<i.indexOf("FBAV"),x.show=function(_){var $=x.widgets[_];if(-1===x.active.indexOf(_)&&x.widgets[_]||$.isInstant){"welcome"!==$.type&&"bar"!==$.type||($.prevBodyStyle=S.$body.attr("style"),x.isIOS&&($.prevHtmlStyle=S.$html.attr("style"),$.iosH=window.innerHeight)),x.active.length||(S.$head.append(x.$styles.general),S.$window.on("resize",x._resize),x.isIOS&&S.$window.on("orientationchange",x._orientationchange),x._resize());var O=x.$containers[_]=S('<div class="conv-container"></div>').on("click",".conv-closer, .conv-wrap-closer, .conv-btn.conv_action_close",function(){x.close(_)});if(void 0===x.$styles[_]){var n="";S.each($.externalCss||[],function(e,t){n+='<link rel="stylesheet" class="conv-css-external conv_id_'+_+'" href="'+t+'" />'}),$.css&&(n+='<style type="text/css" class="conv-css conv_id_'+_+'">'+$.css+"</style>"),n&&S.$head.append(x.$styles[_]=S(n))}$.place?$.place[1]&&O[$.place[0]](S($.place[1]).first()):O.appendTo(S.$body),setTimeout(function(){O.mod("conv_state",k).append(S($.html));var e=x.$widgets[_]=O.find(".conv-widget"),t=x.$overlays[_]=O.find(".conv-overlay");t.elms.length&&O.find(".conv-wrap").on("click",function(e){S(e.target).is(".conv-wrap")&&x.close(_)}),e.on("click",function(e){x.lastClickedElement=e.target});var n=e.find("form").on("submit",x.submit);e.find(".conv-btn.conv_action_link").on("click",x.linkClick),e.find(".conv-btn.conv_action_submit").on("click",x.submit),e.find(".conv-btn.conv_action_step_forward").on("click",function(){x.nextStep(e)}),n.find(".conv-form-field input, .conv-form-field select").on("focus change",function(e){S(e.target).closest(".conv-form-field").removeClass("conv_error").find(".conv-form-field-message").html("").css({display:"none"})}),e.find(".conv-follow-item > div.fb-like").elms.length&&($.facebookTimer=setInterval(function(){var e=document.activeElement;e&&"IFRAME"===e.tagName&&S(e).closest("div.fb-like").elms.length&&(clearInterval($.facebookTimer),setTimeout(x._followCallback.bind(this,e),5e3))},250));var o=e.find(".conv-socsign-link");o.elms.length&&(x.socsignEvents[_]=x._socsign,S.$window.on("message",x.socsignEvents[_]),o.on("click",function(e){e.preventDefault();var t=S(e.currentTarget).attr("href");x.isIOS&&x.isFB&&(t+="&prevUrl="+window.location.href,S.store("convStoredData",x._getWidgetData(_)),S.store("convScroll",window.pageYOffset)),x._openDialog(t,"toolbar=no, width=600, height=600")})),e.find(".conv-share-item").on("click",function(e){x._shareCallback(e)});var s=e.find(".conv-countdown");if(s.elms.length){var r,a,c=s.find(".conv-countdown-time.conv_for_days > .conv-countdown-time-h"),l=s.find(".conv-countdown-time.conv_for_hours > .conv-countdown-time-h"),f=s.find(".conv-countdown-time.conv_for_minutes > .conv-countdown-time-h"),d=s.find(".conv-countdown-time.conv_for_seconds > .conv-countdown-time-h"),u=function(){if(void 0===a||1<=E()-a){a=E();var e=r-E(),t=Math.floor(e%60),n=Math.floor(e/60%60),o=Math.floor(e/3600%24),i=Math.floor(e/86400);if(e<0)return x.countdown_animation&&cancelAnimationFrame(x.countdown_animation),void("1"===s.data("hide")&&s.css({display:"none"}));c.html((i<10?"0":"")+i),l.html(("0"+o).slice(-2)),f.html(("0"+n).slice(-2)),d.html(("0"+t).slice(-2))}x.countdown_animation=requestAnimationFrame(u)};if(s.data("ends_on"))r=+s.data("ends_on");else if(s.data("ends_after")){var i=+s.data("parent"),v=+s.data("ends_after"),h=+s.data("ends_reset"),m=i||_,w=x.session(),p=function(){r=v+E(),w.countdownR[m]={end:r,orig:v}};w.countdownR||(w.countdownR={}),w.countdownR[m]?(r=w.countdownR[m].end,(+w.countdownR[m].orig!==v||0!==h&&h+r<=E())&&p()):p(),x.session(w)}x.countdown_animation=requestAnimationFrame(u)}if(x.trigger("beforeShow",[_]),$.isObstacle?setTimeout(function(){e.addClass("conv_active"),t.addClass("conv_active"),setTimeout(x.addImpression.bind(x,_),300),"welcome"===$.type&&$.isScrollable&&x.addWaypoint(O.find(".conv-widget-h"),x.hide.bind(x,_),"onHide"),$.onshow_js&&S.safeEval($.onshow_js)},25):(x.addWaypoint(O,x.addImpression.bind(x,_)),$.onshow_js&&S.safeEval($.onshow_js),S.$window.trigger("resize"),x._scroll()),"bar"===$.type&&x._resize(),"welcome"===$.type)if($.isScrollable=e.hasClass("conv_scrollable"),$.isScrollable)window.scroll(0,0);else{S.$body.css({paddingTop:"100vh",height:"100%",overflow:"hidden"}),x.isIOS&&S.$html.css({height:"100%",width:"100%",position:"fixed",overflow:"hidden"}),$._restoreScrollValue=window.pageYOffset,x._resize();for(var g=50;g<=500;g++)setTimeout(function(){window.scroll(0,0)},g)}var y=e.find(".conv-ref a"),b=y.attr("href");b&&-1!==b.indexOf("utm_")&&-1===b.indexOf("utm_referrer")&&y.attr("href",b+"&utm_referrer="+encodeURIComponent(location))},1),$.isObstacle&&(x.shownObstacle=_),x.active.push(_)}},x._socsign=function(e){e.origin===a&&x.submit(null,null,e.data)},x.addImpression=function(e){x.sendStat(e);var t=x.session();-1===t.shown.indexOf(e)&&t.shown.push(e),x.session(t),x.trigger("afterShow",[e])},x.sendStat=function(e,t,n){var o=function(){n instanceof Function&&n(),n=null};setTimeout(o,500);var i={widget_id:e,site_id:x.siteId};return t&&(i.type=t),s(e,t||"impression",E()),S.post(a+"/api/stats/add",i,o)},x.hide=function(e){var t=x.widgets[e];if(e&&t){x.trigger("beforeHide",[e]),x.$widgets[e].removeClass("conv_active"),x.$overlays[e].removeClass("conv_active");var n=function(){x.$containers[e]&&(x.$containers[e].remove(),x.active.splice(x.active.indexOf(e),1),x.$styles[e]&&x.$styles[e].remove(),delete x.$widgets[e],delete x.$containers[e],delete x.$overlays[e],delete x.$styles[e],x.socsignEvents[e]&&(S.$window.off("message",x.socsignEvents[e]),delete x.socsignEvents[e]),x.active.length||(x.$styles.general.detach(),S.$window.off("resize",x._resize),x.isIOS&&S.$window.on("orientationchange",x._orientationchange)),t.isObstacle&&(x.shownObstacle=!1),void 0!==t.prevBodyStyle&&S.$body.attr("style",t.prevBodyStyle||""),void 0!==t.prevHtmlStyle&&S.$html.attr("style",t.prevHtmlStyle||""),t.isInstant&&S.$window.trigger("resize"),t.facebookTimer&&clearInterval(t.facebookTimer),x.countdown_animation&&!S(".conv-countdown").elms.length&&cancelAnimationFrame(x.countdown_animation),x.trigger("afterHide",[e]))};if("welcome"===t.type){var o=x.$containers[e].find(".conv-widget-h").elms[0],i=o.offsetTop+o.offsetHeight;if(t.isScrollable&&i<=window.pageYOffset){var s=window.pageYOffset-i;n(),window.scroll(0,s);var r=navigator.userAgent;if(-1!==r.indexOf("Chrome")&&-1!==r.indexOf("Windows"))for(var a=50;a<=500;a++)setTimeout(function(){window.scroll(0,s)},a);return}if(t.isScrollable)return S.scrollTo(o.offsetHeight,parseInt((i-window.pageYOffset)/4),function(){n(),window.scroll(0,0)});var c=x.$containers[e].find(".conv-widget-h");return c.css({position:"fixed",transform:"translateY(0%)"}),void 0!==t.prevBodyStyle&&S.$body.attr("style",t.prevBodyStyle||""),void 0!==t.prevHtmlStyle&&S.$html.attr("style",t.prevHtmlStyle||""),window.scroll(0,t._restoreScrollValue),c.animate({transform:"translateY(-100%)"},parseInt((i-window.pageYOffset)/4),"ease",function(){n()})}setTimeout(n,300)}},x.addWaypoint=function(e,t,n){x.waypoints.push({elm:e instanceof cQuery?e.elms[0]:e,fn:t,mode:n||"onShow"}),1===x.waypoints.length&&S.$window.on("scroll",x._scroll),x._resize()},x.followDialog=function(e){x._openDialog(e,"toolbar=no, width=650, height=600",x._followCallback)},x._openDialog=function(e,t,n){var o=window.open(e,null,t);if(n)var i=window.setInterval(function(){try{(null==o||o.closed)&&(window.clearInterval(i),n())}catch(e){}},500);return o},x._followCallback=function(e){e?x.lastClickedElement=e:e=x.lastClickedElement;var t=S(e).closest(".conv-follow");if(t.elms.length){var n=t.mod("conv_action");x.submit(null,n)}},x._shareCallback=function(e){var t=S(e.currentTarget).closest(".conv-share"),n=t.mod("conv_action"),o=+t.closest(".conv-widget").attr("id").replace("conv","");x._actionHandler(o,{},n)},x._orientationchange=function(){x.shownObstacle&&"welcome"===x.widgets[x.shownObstacle].type&&x.widgets[x.shownObstacle].isScrollable&&(x.widgets[x.shownObstacle].iosH=window.innerHeight,x._resize())};var k="desktop";x._resize=function(){var n=document.body.clientWidth<600?"mobile":"desktop",o=window.innerHeight;if(n!==k&&(S.each(x.$containers,function(e,t){t.mod("conv_state",n)}),k=n),x.shownObstacle&&"bar"===x.widgets[x.shownObstacle].type){var e=x.widgets[x.shownObstacle],t=x.$widgets[x.shownObstacle];if(e.overlap=t.hasClass("conv_overlap"),!(e.overlap||e.height&&e.height===t.height())){if(e.height=t.height(),"top"===t.mod("conv_"+("desktop"===k?"place":"mobilePlace"))){e._restoreScrollValue=window.pageYOffset,S.$body.css({paddingTop:e.height});var i=e._restoreScrollValue<e.height?0:e._restoreScrollValue+e.height,s=navigator.userAgent;if(-1!==s.indexOf("Chrome")&&-1!==s.indexOf("Windows"))for(var r=50;r<=500;r++)setTimeout(function(){window.scroll(0,i)},r);else window.scroll(0,i)}else S.$body.css({paddingBottom:e.height});setTimeout(x._resize,50)}}if(x.shownObstacle&&"welcome"===x.widgets[x.shownObstacle].type&&x.$widgets[x.shownObstacle]){var a="100vh";if(x.widgets[x.shownObstacle].isScrollable){var c=x.$widgets[x.shownObstacle].find(".conv-widget-h").css({bottom:"auto","min-height":""}),l=c.height();x.isIOS?a=x.widgets[x.shownObstacle].iosH:o<l?a=l:c.css({bottom:0}),c.css({"min-height":a})}var f,d,u=x.$widgets[x.shownObstacle].find(".conv-widget-hhh"),v=window.innerWidth,h=window.innerHeight,m=Math.max(u.height(),1080),w=1;"desktop"===k&&(f=(v<640?640:v)/1920,d=(h<360?360:h)/m,w=Math.max(Math.min(f,d),640/1920)),u.css({transform:"scale("+w+")"}),S.$body.css("padding-top",a)}x.waypoints=x.waypoints.filter(function(e){return e.elm.offsetHeight}),x.waypoints.forEach(function(e){var t=e.elm.offsetTop,n=e.elm.offsetHeight;"onShow"===e.mode?e.min=(e.max=t+n/2)-o:e.min=t+n}),x._scroll()},x._scroll=function(){for(var e=0;e<x.waypoints.length;e++){var t=x.waypoints[e];(void 0===t.min||window.pageYOffset>t.min)&&(void 0===t.max||window.pageYOffset<t.max)&&(t.fn(),x.waypoints.splice(e--,1))}x.waypoints.length||S.$window.off("scroll",x._scroll)};var E=function(){return Math.floor(Date.now()/1e3)},s=function(e,t,n){var o="close"===t?1:"success"===t?2:0,i=S.retrieve("lastEvents",{});i[e=+e]=i[e]||[];for(var s=0;s<=o;s++)i[e][s]=i[e][s]||0;i[e][o]=n,S.store("lastEvents",i)},l=!(x.close=function(e){(e=+e)&&-1!==x.active.indexOf(e)&&x.widgets[e]&&(s(e,"close",E()),x.hide(e),x.trigger("close",[e]))});x.submit=function(e,t,n){var o;e?(e.preventDefault(),o=S(e.target)):o=S(x.lastClickedElement);var i=x.isIOS&&x.isFB&&n?+n.widgetId:+o.closest(".conv-widget").attr("id").replace("conv","");if(i&&-1!==x.active.indexOf(i)&&(!n||i===+n.widgetId)){var s=x.$widgets[i];if(!l){if(l=!0,"intro"===s.find(".conv-widget-step").filter(".conv_active").mod("conv_step"))return x._actionHandler(i,{},t),void(l=!1);n&&x._setWidgetData(i,n);var r=x._getWidgetData(i);r=S.extend(!0,r,n),S.post(a+"/api/optin/create",{widget_id:i,site_id:x.siteId,data:r.data,extra_data:r.extra},function(o){l=!1,o.success?(o.data.duplicate||s.data("submitted")?x._actionHandler(i,o.data,t):x.sendStat(i,"success",x._actionHandler.bind(x,i,o.data,t)),s.data("submitted",1),x.personSet("$isSubscribed",1)):S.each(o.errors,function(e,t){var n=s.find(".conv-form-field.conv_for_"+e).addClass("conv_error");Object.keys(o.errors)[0]===e&&n.find(".conv-form-field-message").html(t).css({display:"block"})})})}}},x._getWidgetData=function(e){var t=x.$widgets[e],i={},o={};return S.each(t.find("input[name], textarea[name], select[name]"),function(e,t){var n=S(t),o=n.attr("name");n.is('[type="checkbox"], [type="radio"]')&&!n.is(":checked")||(i[o]=n.val())}),S.each(["url","referrer"].concat(x._utmParams),function(e,t){var n;void 0!==(n="url"===t?window.location.href:r[t]||document[t])&&(o[t]=n)}),{data:i,extra:o}},x._setWidgetData=function(e,t){var o=x.$widgets[e];S.each(t.data,function(e,t){var n=o.find('[name="'+e+'"]');if(!n.elms.length||void 0===t)return!0;"radio"===n.elms[0].getAttribute("type")?o.find('[name="'+e+'"][value="'+t+'"]').elms[0].checked=!0:"agreement"===n.elms[0].getAttribute("name")?n.elms[0].checked=+t:n.elms[0].value=t})},x._actionHandler=function(e,t,n){t.js&&S.safeEval(t.js),setTimeout(function(){switch(n||t.action){case"message":case"step_forward":x.nextStep(x.$widgets[e]);break;case"url":x.hide(e),location.assign(t.url);break;case"url_post":x.hide(e),x.$widgets[e].find(".conv-form").attr("action",t.url).attr("method","POST").each(function(e){var n=S(e);S.each(t.post_vars,function(e,t){e!==t&&n.find('[name="'+e+'"]').attr("name",t)}),e.submit()});break;case"refresh":x.hide(e),location.reload();break;case"nothing":break;default:x.hide(e)}},t.js?500:0)},x.nextStep=function(e){var t=e.find(".conv-widget-step").filter(".conv_active");if(void 0!==t.elms[0]&&t.elms[0].nextSibling){var n=S(t.elms[0].nextSibling);if(n.hasClass("conv-widget-step")){var o=t.find(".conv-video iframe");o.each(function(e){var t=e.cloneNode(!1);e.parentNode.insertBefore(t,e)}),o.remove(),t.removeClass("conv_active"),n.addClass("conv_active")}}},x._utmParams=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],x.linkClick=function(e){var t=S(e.currentTarget),n=t.closest(".conv-widget"),o=+n.attr("id").replace("conv",""),i=t.attr("href"),s=0===i.indexOf("javascript:"),r="_blank"===t.attr("target");if(!s&&r||e.preventDefault(),o&&-1!==x.active.indexOf(o)){var a=function(){s?S.safeEval(i.substr(11)):r?x.nextStep(n):window.location=i};return t.data("clicked")||1==+x.personGet("$isSubscribed",0)?a():x.sendStat(o,"cta",a),t.data("clicked",!0),!1}},x.session=function(){if(arguments.length)return S.store("session",arguments[0]);var e=S.retrieve("session"),t=!e||!e.expires||e.expires<E();if(t){x.personSet({$visitNum:x.personGet("$visitNum",0)+1,$fvDate:x.personGet("$fvDate",E()),$lvDate:e&&e.expires?e.expires-1800:null}),e={start:E(),shown:[],startUrl:document.URL,referrer:document.referrer};for(var n=0;n<this._utmParams.length;n++){var o=this._utmParams[n],i=this.getParameterByName(o);""!==i&&void 0!==i&&(e[o]=i)}}return e.expires=E()+1800,x.session(e),e.isNew=t,e},x.personSet=function(e,t){if(void 0===t&&e)return S.each(e,x.personSet);var n=x.personGet();null!==t?n[e]=t:delete n[e],S.store("person",n)},x.personSetOnce=function(e,t){if(void 0===t&&e)return S.each(e,x.personSetOnce);null===x.personGet(e)&&x.personSet(e,t)},x.personGet=function(e,t){var n=S.retrieve("person",{});return void 0===e?n:(t=void 0===t?null:t,n=void 0!==n[e]?n[e]:t)},x.reset=function(){S.store("person",null),S.store("session",null),S.store("lastEvents",null)},x.reinit=function(){var o=function(e){var t=x.widgets[e];t.showIf.length&&!p.checkRule(t.showIf)||x.show(e)},i=function(e){o(e),x.off("afterHide",i)};S.each(x.widgets,function(e,t){var n=+t.id;t.isInstant&&c.canBeShown(n)&&(x.$widgets[n]?(x.on("afterHide",i),x.hide(n)):o(n))})},x.init=function(e){x.ver="1.2",x.siteId=+e.site_id,x.widgets={};var r=S.retrieve("lastEvents",{});c.init(e.widgets);var a=[];e.widgets.forEach(function(e){var t=+e.id,n=e.banTime,o=r[t];if(n&&o)for(var i=0;i<3;i++){var s=["impression","close","success"][i];if(n[s]&&o[i]&&o[i]+n[s]>=E()){a=a.concat(c.getVarsOf(t));break}}}),e.widgets.length&&(x.$styles.general=S('<style type="text/css" class="conv-css conv_id_general">'+(e.css||"")+"</style>"));var n={},t={};if(x.isIOS&&x.isFB&&"1"===p.getUrlQuery("convFBLogin")){window.scroll(0,+S.retrieve("convScroll")),n=S.retrieve("convStoredData")||{data:{}},t=JSON.parse(p.getUrlQuery("convData")),S.each(t.data,function(e,t){n.data[e]=t}),n.widgetId=+t.widgetId;var o=function(e){+e==+n.widgetId&&(x.off("afterShow",o),x.submit(null,null,n))};e.widgets.forEach(function(e){+e.id==+n.widgetId&&(e.id=+e.id,e.isInstant=1,x.on("afterShow",o))})}e.widgets.sort(function(e,t){return+(t.isInstant||0)-(e.isInstant||0)}),e.widgets.forEach(function(e){var t=+e.id;if(+n.widgetId===t)x.widgets[t]=e,x.show(t);else if(-1===a.indexOf(t)&&c.canBeShown(t)){if((x.widgets[t]=e).isInstant&&!e.showIf.length)return x.show(t);p.attach(t,e.showIf)}}),e.js&&S.safeEval(e.js),x.trigger("afterInit")},S.ajax({url:a+"/api/widget/export",data:{owner:n,domain:location.host},success:function(e){e.success&&e.data.site_id&&e.data.widgets instanceof Array&&x.init(e.data)},allowCookies:1});var r=x.session();r.pageViews=(r.pageViews||0)+1,x.session(r),r.isNew&&(document.cookie="session_id=1;expires="+new Date(1e3*r.expires).toGMTString()+";domain="+a.split("/")[2]+";path=/")}});
//# sourceMappingURL=Convertful.js.map