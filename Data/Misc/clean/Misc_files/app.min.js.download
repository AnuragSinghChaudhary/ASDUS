!function(){function e(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}var n,t,i;!function(e){function r(e,n){return w.call(e,n)}function o(e,n){var t,i,r,o,s,a,u,c,l,d,f=n&&n.split("/"),p=k.map,m=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(n){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),c=0;c<e.length;c+=1)if(d=e[c],"."===d)e.splice(c,1),c-=1;else if(".."===d){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||m)&&p){for(t=e.split("/"),c=t.length;c>0;c-=1){if(i=t.slice(0,c).join("/"),f)for(l=f.length;l>0;l-=1)if(r=p[f.slice(0,l).join("/")],r&&(r=r[i])){o=r,s=c;break}if(o)break;!a&&m&&m[i]&&(a=m[i],u=c)}!o&&a&&(o=a,s=u),o&&(t.splice(0,s,o),e=t.join("/"))}return e}function s(n,t){return function(){return p.apply(e,y.call(arguments,0).concat([n,t]))}}function a(e){return function(n){return o(n,e)}}function u(e){return function(n){g[e]=n}}function c(n){if(r(h,n)){var t=h[n];delete h[n],b[n]=!0,f.apply(e,t)}if(!r(g,n)&&!r(b,n))throw new Error("No "+n);return g[n]}function l(e){var n,t=e?e.indexOf("!"):-1;return t>-1&&(n=e.substring(0,t),e=e.substring(t+1,e.length)),[n,e]}function d(e){return function(){return k&&k.config&&k.config[e]||{}}}var f,p,m,v,g={},h={},k={},b={},w=Object.prototype.hasOwnProperty,y=[].slice;m=function(e,n){var t,i=l(e),r=i[0];return e=i[1],r&&(r=o(r,n),t=c(r)),r?e=t&&t.normalize?t.normalize(e,a(n)):o(e,n):(e=o(e,n),i=l(e),r=i[0],e=i[1],r&&(t=c(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:t}},v={require:function(e){return s(e)},exports:function(e){var n=g[e];return"undefined"!=typeof n?n:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:d(e)}}},f=function(n,t,i,o){var a,l,d,f,p,k,w=[];if(o=o||n,"function"==typeof i){for(t=!t.length&&i.length?["require","exports","module"]:t,p=0;p<t.length;p+=1)if(f=m(t[p],o),l=f.f,"require"===l)w[p]=v.require(n);else if("exports"===l)w[p]=v.exports(n),k=!0;else if("module"===l)a=w[p]=v.module(n);else if(r(g,l)||r(h,l)||r(b,l))w[p]=c(l);else{if(!f.p)throw new Error(n+" missing "+l);f.p.load(f.n,s(o,!0),u(l),{}),w[p]=g[l]}d=i.apply(g[n],w),n&&(a&&a.exports!==e&&a.exports!==g[n]?g[n]=a.exports:d===e&&k||(g[n]=d))}else n&&(g[n]=i)},n=t=p=function(n,t,i,r,o){return"string"==typeof n?v[n]?v[n](t):c(m(n,t).f):(n.splice||(k=n,t.splice?(n=t,t=i,i=null):n=e),t=t||function(){},"function"==typeof i&&(i=r,r=o),r?f(e,n,t,i):setTimeout(function(){f(e,n,t,i)},4),p)},p.config=function(e){return k=e,k.deps&&p(k.deps,k.callback),p},n._defined=g,i=function(e,n,t){n.splice||(t=n,n=[]),r(g,e)||r(h,e)||(h[e]=[e,n,t])},i.amd={jQuery:!0}}(),i("vendor/almond",function(){}),function(){function e(e,n,t){for(var i=e.length,r=t?i:-1;t?r--:++r<i;)if(n(e[r],r,e))return r;return-1}function n(e,n,t){if(n!==n){e:{for(n=e.length,t+=-1;++t<n;){var i=e[t];if(i!==i){e=t;break e}}e=-1}return e}for(t-=1,i=e.length;++t<i;)if(e[t]===n)return t;return-1}function t(e,n){for(var t=-1,i=e.length;++t<i&&-1<n.indexOf(e.charAt(t)););return t}function r(e,n){for(var t=e.length;t--&&-1<n.indexOf(e.charAt(t)););return t}function o(e,n){var t;e:{t=e.a;var i=n.a;if(t!==i){var r=null===t,o=t===xe,s=t===t,a=null===i,u=i===xe,c=i===i;if(t>i&&!a||!s||r&&!u&&c||o&&c){t=1;break e}if(i>t&&!r||!c||a&&!o&&s||u&&s){t=-1;break e}}t=0}return t||e.b-n.b}function s(e){return!!e&&"object"==typeof e}function a(e){return 160>=e&&e>=9&&13>=e||32==e||160==e||5760==e||6158==e||e>=8192&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function u(){}function c(e){var n=e?e.length:0;for(this.data={hash:Ln(null),set:new In};n--;)this.push(e[n])}function l(e,n){var t=e.data;return("string"==typeof n||me(n)?t.set.has(n):t.hash[n])?0:-1}function d(e,n){var t=-1,i=e.length;for(n||(n=Array(i));++t<i;)n[t]=e[t];return n}function f(e,n){for(var t=-1,i=e.length;++t<i&&!1!==n(e[t],t,e););return e}function p(e,n){for(var t=-1,i=e.length;++t<i;)if(!n(e[t],t,e))return!1;return!0}function m(e,n){for(var t=-1,i=e.length,r=Array(i);++t<i;)r[t]=n(e[t],t,e);return r}function v(e,n){for(var t=-1,i=e.length;++t<i;)if(n(e[t],t,e))return!0;return!1}function g(e,n){return null==n?e:h(n,Qn(n),e)}function h(e,n,t){t||(t={});for(var i=-1,r=n.length;++i<r;){var o=n[i];t[o]=e[o]}return t}function k(e,n,t){var i=typeof e;return"function"==i?n===xe?e:B(e,n,t):null==e?Ee:"object"==i?T(e):n===xe?Le(e):_(e,n)}function b(e,n,t,i,r,o,s){var a;if(t&&(a=r?t(e,i,r):t(e)),a!==xe)return a;if(!me(e))return e;if(i=Kn(e)){if(a=W(e),!n)return d(e,a)}else{var u=bn.call(e),c=u==Re;if(u!=Be&&u!=Te&&(!c||r))return sn[u]?Y(e,u,n):r?e:{};if(fn(e))return r?e:{};if(a=q(c?{}:e),!n)return g(a,e)}for(o||(o=[]),s||(s=[]),r=o.length;r--;)if(o[r]==e)return s[r];return o.push(e),s.push(a),(i?f:C)(e,function(i,r){a[r]=b(i,n,t,r,e,o,s)}),a}function w(e,t){var i=e?e.length:0,r=[];if(!i)return r;var o=-1,s=z(),a=s===n,u=a&&t.length>=Ae&&Ln&&In?new c(t):null,d=t.length;u&&(s=l,a=!1,t=u);e:for(;++o<i;)if(u=e[o],a&&u===u){for(var f=d;f--;)if(t[f]===u)continue e;r.push(u)}else 0>s(t,u,0)&&r.push(u);return r}function y(e,n){var t=!0;return Dn(e,function(e,i,r){return t=!!n(e,i,r)}),t}function S(e,n,t){var i;return t(e,function(e,t,r){return n(e,t,r)?(i=e,!1):void 0}),i}function I(e,n,t,i){i||(i=[]);for(var r=-1,o=e.length;++r<o;){var a=e[r];if(s(a)&&Q(a)&&(t||Kn(a)||fe(a)))if(n)I(a,n,t,i);else for(var u=i,c=-1,l=a.length,d=u.length;++c<l;)u[d+c]=a[c];else t||(i[i.length]=a)}return i}function E(e,n){jn(e,n,we)}function C(e,n){return jn(e,n,Qn)}function L(e,n,t){if(null!=e){e=re(e),t!==xe&&t in e&&(n=[t]),t=0;for(var i=n.length;null!=e&&i>t;)e=re(e)[n[t++]];return t&&t==i?e:xe}}function x(e,n,t,i,r,o){if(e===n)e=!0;else if(null==e||null==n||!me(e)&&!s(n))e=e!==e&&n!==n;else e:{var a=x,u=Kn(e),c=Kn(n),l=_e,d=_e;u||(l=bn.call(e),l==Te?l=Be:l!=Be&&(u=ke(e))),c||(d=bn.call(n),d==Te?d=Be:d!=Be&&ke(n));var f=l==Be&&!fn(e),c=d==Be&&!fn(n),d=l==d;if(!d||u||f){if(!i&&(l=f&&kn.call(e,"__wrapped__"),c=c&&kn.call(n,"__wrapped__"),l||c)){e=a(l?e.value():e,c?n.value():n,t,i,r,o);break e}if(d){for(r||(r=[]),o||(o=[]),l=r.length;l--;)if(r[l]==e){e=o[l]==n;break e}r.push(e),o.push(n),e=(u?j:H)(e,n,a,t,i,r,o),r.pop(),o.pop()}else e=!1}else e=F(e,n,l)}return e}function A(e,n){var t=n.length,i=t;if(null==e)return!i;for(e=re(e);t--;){var r=n[t];if(r[2]?r[1]!==e[r[0]]:!(r[0]in e))return!1}for(;++t<i;){var r=n[t],o=r[0],s=e[o],a=r[1];if(r[2]){if(s===xe&&!(o in e))return!1}else if(r=xe,r===xe?!x(a,s,void 0,!0):!r)return!1}return!0}function U(e,n){var t=-1,i=Q(e)?Array(e.length):[];return Dn(e,function(e,r,o){i[++t]=n(e,r,o)}),i}function T(e){var n=G(e);if(1==n.length&&n[0][2]){var t=n[0][0],i=n[0][1];return function(e){return null==e?!1:(e=re(e),e[t]===i&&(i!==xe||t in e))}}return function(e){return A(e,n)}}function _(e,n){var t=Kn(e),i=$(e)&&n===n&&!me(n),r=e+"";return e=oe(e),function(o){if(null==o)return!1;var s=r;if(o=re(o),!(!t&&i||s in o)){if(o=1==e.length?o:L(o,R(e)),null==o)return!1;s=ae(e),o=re(o)}return o[s]===n?n!==xe||s in o:x(n,o[s],xe,!0)}}function N(e,n,t,i,r){if(!me(e))return e;var o=Q(n)&&(Kn(n)||ke(n)),a=o?xe:Qn(n);return f(a||n,function(u,c){if(a&&(c=u,u=n[c]),s(u)){i||(i=[]),r||(r=[]);e:{for(var l=c,f=i,p=r,m=f.length,v=n[l];m--;)if(f[m]==v){e[l]=p[m];break e}var m=e[l],g=t?t(m,v,l,e,n):xe,h=g===xe;h&&(g=v,Q(v)&&(Kn(v)||ke(v))?g=Kn(m)?m:Q(m)?d(m):[]:ge(v)||fe(v)?g=fe(m)?be(m):ge(m)?m:{}:h=!1),f.push(v),p.push(g),h?e[l]=N(g,v,t,f,p):(g===g?g!==m:m===m)&&(e[l]=g)}}else l=e[c],f=t?t(l,u,c,e,n):xe,(p=f===xe)&&(f=u),f===xe&&(!o||c in e)||!p&&(f===f?f===l:l!==l)||(e[c]=f)}),e}function P(e){return function(n){return null==n?xe:re(n)[e]}}function M(e){var n=e+"";return e=oe(e),function(t){return L(t,e,n)}}function R(e){var n=0,t=-1,i=-1,r=e.length,n=null==n?0:+n||0;for(0>n&&(n=-n>r?0:r+n),t=t===xe||t>r?r:+t||0,0>t&&(t+=r),r=n>t?0:t-n>>>0,n>>>=0,t=Array(r);++i<r;)t[i]=e[i+n];return t}function O(e,n){var t=e.length;for(e.sort(n);t--;)e[t]=e[t].c;return e}function B(e,n,t){if("function"!=typeof e)return Ee;if(n===xe)return e;switch(t){case 1:return function(t){return e.call(n,t)};case 3:return function(t,i,r){return e.call(n,t,i,r)};case 4:return function(t,i,r,o){return e.call(n,t,i,r,o)};case 5:return function(t,i,r,o,s){return e.call(n,t,i,r,o,s)}}return function(){return e.apply(n,arguments)}}function V(e){var n=new yn(e.byteLength);return new Cn(n).set(new Cn(e)),n}function D(e){return de(function(n,t){var i=-1,r=null==n?0:t.length,o=r>2?t[r-2]:xe,s=r>2?t[2]:xe,a=r>1?t[r-1]:xe;for("function"==typeof o?(o=B(o,a,5),r-=2):(o="function"==typeof a?a:xe,r-=o?1:0),s&&X(t[0],t[1],s)&&(o=3>r?xe:o,r=1);++i<r;)(s=t[i])&&e(n,s,o);return n})}function j(e,n,t,i,r,o,s){var a=-1,u=e.length,c=n.length;if(u!=c&&!(r&&c>u))return!1;for(;++a<u;){var l=e[a],c=n[a],d=i?i(r?c:l,r?l:c,a):xe;if(d!==xe){if(d)continue;return!1}if(r){if(!v(n,function(e){return l===e||t(l,e,i,r,o,s)}))return!1}else if(l!==c&&!t(l,c,i,r,o,s))return!1}return!0}function F(e,n,t){switch(t){case Ne:case Pe:return+e==+n;case Me:return e.name==n.name&&e.message==n.message;case Oe:return e!=+e?n!=+n:e==+n;case Ve:case De:return e==n+""}return!1}function H(e,n,t,i,r,o,s){var a=Qn(e),u=a.length,c=Qn(n).length;if(u!=c&&!r)return!1;for(c=u;c--;){var l=a[c];if(!(r?l in n:kn.call(n,l)))return!1}for(var d=r;++c<u;){var l=a[c],f=e[l],p=n[l],m=i?i(r?p:f,r?f:p,l):xe;if(m===xe?!t(f,p,i,r,o,s):!m)return!1;d||(d="constructor"==l)}return d||(t=e.constructor,i=n.constructor,!(t!=i&&"constructor"in e&&"constructor"in n)||"function"==typeof t&&t instanceof t&&"function"==typeof i&&i instanceof i)?!0:!1}function J(e,n,t){var i=u.callback||Ie,i=i===Ie?k:i;return t?i(e,n,t):i}function z(e,t,i){var r=u.indexOf||se,r=r===se?n:r;return e?r(e,t,i):r}function G(e){e=ye(e);for(var n=e.length;n--;){var t=e[n][1];e[n][2]=t===t&&!me(t)}return e}function K(e,n){var t=null==e?xe:e[n];return ve(t)?t:xe}function W(e){var n=e.length,t=new e.constructor(n);return n&&"string"==typeof e[0]&&kn.call(e,"index")&&(t.index=e.index,t.input=e.input),t}function q(e){return e=e.constructor,"function"==typeof e&&e instanceof e||(e=Object),new e}function Y(e,n,t){var i=e.constructor;switch(n){case je:return V(e);case Ne:case Pe:return new i(+e);case Fe:case He:case Je:case ze:case Ge:case Ke:case We:case qe:case Ye:return i instanceof i&&(i=Rn[n]),n=e.buffer,new i(t?V(n):n,e.byteOffset,e.length);case Oe:case De:return new i(e);case Ve:var r=new i(e.source,en.exec(e));r.lastIndex=e.lastIndex}return r}function Q(e){return null!=e&&ee(Fn(e))}function Z(e,n){return e="number"==typeof e||tn.test(e)?+e:-1,n=null==n?Mn:n,e>-1&&0==e%1&&n>e}function X(e,n,t){if(!me(t))return!1;var i=typeof n;return("number"==i?Q(t)&&Z(n,t.length):"string"==i&&n in t)?(n=t[n],e===e?e===n:n!==n):!1}function $(e,n){var t=typeof e;return"string"==t&&Ze.test(e)||"number"==t?!0:Kn(e)?!1:!Qe.test(e)||null!=n&&e in re(n)}function ee(e){return"number"==typeof e&&e>-1&&0==e%1&&Mn>=e}function ne(e,n){e=re(e);for(var t=-1,i=n.length,r={};++t<i;){var o=n[t];o in e&&(r[o]=e[o])}return r}function te(e,n){var t={};return E(e,function(e,i,r){n(e,i,r)&&(t[i]=e)}),t}function ie(e){for(var n=we(e),t=n.length,i=t&&e.length,r=!!i&&ee(i)&&(Kn(e)||fe(e)||he(e)),o=-1,s=[];++o<t;){var a=n[o];(r&&Z(a,i)||kn.call(e,a))&&s.push(a)}return s}function re(e){if(u.support.unindexedChars&&he(e)){for(var n=-1,t=e.length,i=Object(e);++n<t;)i[n]=e.charAt(n);return i}return me(e)?e:Object(e)}function oe(e){if(Kn(e))return e;var n=[];return(null==e?"":e+"").replace(Xe,function(e,t,i,r){n.push(i?r.replace($e,"$1"):t||e)}),n}function se(e,t,i){var r=e?e.length:0;if(!r)return-1;if("number"==typeof i)i=0>i?Tn(r+i,0):i;else if(i){i=0;var o=e?e.length:i;if("number"==typeof t&&t===t&&Pn>=o){for(;o>i;){var s=i+o>>>1,a=e[s];t>a&&null!==a?i=s+1:o=s}i=o}else{o=Ee,i=o(t);for(var s=0,a=e?e.length:0,u=i!==i,c=null===i,l=i===xe;a>s;){var d=xn((s+a)/2),f=o(e[d]),p=f!==xe,m=f===f;(u?m:c?m&&p&&null!=f:l?m&&p:null==f?0:i>f)?s=d+1:a=d}i=_n(a,Nn)}return r>i&&(t===t?t===e[i]:e[i]!==e[i])?i:-1}return n(e,t,i||0)}function ae(e){var n=e?e.length:0;return n?e[n-1]:xe}function ue(e,n,t){var i=Kn(e)?p:y;return t&&X(e,n,t)&&(n=xe),("function"!=typeof n||t!==xe)&&(n=J(n,t,3)),i(e,n)}function ce(e,n,t,i){var r=e?Fn(e):0;return ee(r)||(e=Se(e),r=e.length),t="number"!=typeof t||i&&X(n,t,i)?0:0>t?Tn(r+t,0):t||0,"string"==typeof e||!Kn(e)&&he(e)?r>=t&&-1<e.indexOf(n,t):!!r&&-1<z(e,n,t)}function le(e,n,t){var i=Kn(e)?m:U;return n=J(n,t,3),i(e,n)}function de(e,n){if("function"!=typeof e)throw new TypeError(Ue);return n=Tn(n===xe?e.length-1:+n||0,0),function(){for(var t=arguments,i=-1,r=Tn(t.length-n,0),o=Array(r);++i<r;)o[i]=t[n+i];switch(n){case 0:return e.call(this,o);case 1:return e.call(this,t[0],o);case 2:return e.call(this,t[0],t[1],o)}for(r=Array(n+1),i=-1;++i<n;)r[i]=t[i];return r[n]=o,e.apply(this,r)}}function fe(e){return s(e)&&Q(e)&&kn.call(e,"callee")&&!Sn.call(e,"callee")}function pe(e){return me(e)&&bn.call(e)==Re}function me(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function ve(e){return null==e?!1:pe(e)?wn.test(hn.call(e)):s(e)&&(fn(e)?wn:nn).test(e)}function ge(e){var n;if(!s(e)||bn.call(e)!=Be||fn(e)||fe(e)||!(kn.call(e,"constructor")||(n=e.constructor,"function"!=typeof n||n instanceof n)))return!1;var t;return u.support.ownLast?(E(e,function(e,n,i){return t=kn.call(i,n),!1}),!1!==t):(E(e,function(e,n){t=n}),t===xe||kn.call(e,t))}function he(e){return"string"==typeof e||s(e)&&bn.call(e)==De}function ke(e){return s(e)&&ee(e.length)&&!!on[bn.call(e)]}function be(e){return h(e,we(e))}function we(e){if(null==e)return[];me(e)||(e=Object(e));for(var n=e.length,t=u.support,n=n&&ee(n)&&(Kn(e)||fe(e)||he(e))&&n||0,i=e.constructor,r=-1,i=pe(i)&&i.prototype||vn,o=i===e,s=Array(n),a=n>0,c=t.enumErrorProps&&(e===mn||e instanceof Error),l=t.enumPrototypes&&pe(e);++r<n;)s[r]=r+"";for(var d in e)l&&"prototype"==d||c&&("message"==d||"name"==d)||a&&Z(d,n)||"constructor"==d&&(o||!kn.call(e,d))||s.push(d);if(t.nonEnumShadows&&e!==vn)for(n=e===gn?De:e===mn?Me:bn.call(e),t=On[n]||On[Be],n==Be&&(i=vn),n=rn.length;n--;)d=rn[n],r=t[d],o&&r||(r?!kn.call(e,d):e[d]===i[d])||s.push(d);return s}function ye(e){e=re(e);for(var n=-1,t=Qn(e),i=t.length,r=Array(i);++n<i;){var o=t[n];r[n]=[o,e[o]]}return r}function Se(e){for(var n=Qn(e),t=-1,i=n.length,r=Array(i);++t<i;)r[t]=e[n[t]];return r}function Ie(e,n,t){return t&&X(e,n,t)&&(n=xe),s(e)?Ce(e):k(e,n)}function Ee(e){return e}function Ce(e){return T(b(e,!0))}function Le(e){return $(e)?P(e):M(e)}var xe,Ae=200,Ue="Expected a function",Te="[object Arguments]",_e="[object Array]",Ne="[object Boolean]",Pe="[object Date]",Me="[object Error]",Re="[object Function]",Oe="[object Number]",Be="[object Object]",Ve="[object RegExp]",De="[object String]",je="[object ArrayBuffer]",Fe="[object Float32Array]",He="[object Float64Array]",Je="[object Int8Array]",ze="[object Int16Array]",Ge="[object Int32Array]",Ke="[object Uint8Array]",We="[object Uint8ClampedArray]",qe="[object Uint16Array]",Ye="[object Uint32Array]",Qe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Ze=/^\w*$/,Xe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,$e=/\\(\\)?/g,en=/\w*$/,nn=/^\[object .+?Constructor\]$/,tn=/^\d+$/,rn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),on={};on[Fe]=on[He]=on[Je]=on[ze]=on[Ge]=on[Ke]=on[We]=on[qe]=on[Ye]=!0,on[Te]=on[_e]=on[je]=on[Ne]=on[Pe]=on[Me]=on[Re]=on["[object Map]"]=on[Oe]=on[Be]=on[Ve]=on["[object Set]"]=on[De]=on["[object WeakMap]"]=!1;var sn={};sn[Te]=sn[_e]=sn[je]=sn[Ne]=sn[Pe]=sn[Fe]=sn[He]=sn[Je]=sn[ze]=sn[Ge]=sn[Oe]=sn[Be]=sn[Ve]=sn[De]=sn[Ke]=sn[We]=sn[qe]=sn[Ye]=!0,sn[Me]=sn[Re]=sn["[object Map]"]=sn["[object Set]"]=sn["[object WeakMap]"]=!1;var an={"function":!0,object:!0},un=an[typeof module]&&module&&!module.nodeType&&module,cn=an[typeof self]&&self&&self.Object&&self,ln=an[typeof window]&&window&&window.Object&&window,dn=an[typeof exports]&&exports&&!exports.nodeType&&exports&&un&&"object"==typeof global&&global&&global.Object&&global||ln!==(this&&this.window)&&ln||cn||this,fn=function(){try{Object({toString:0}+"")}catch(e){return function(){return!1}}return function(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}}(),pn=Array.prototype,mn=Error.prototype,vn=Object.prototype,gn=String.prototype,hn=Function.prototype.toString,kn=vn.hasOwnProperty,bn=vn.toString,wn=RegExp("^"+hn.call(kn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yn=dn.ArrayBuffer,Sn=vn.propertyIsEnumerable,In=K(dn,"Set"),En=pn.splice,Cn=dn.Uint8Array,Ln=K(Object,"create"),xn=Math.floor,An=K(Array,"isArray"),Un=K(Object,"keys"),Tn=Math.max,_n=Math.min,Nn=4294967294,Pn=2147483647,Mn=9007199254740991,Rn={};Rn[Fe]=dn.Float32Array,Rn[He]=dn.Float64Array,Rn[Je]=dn.Int8Array,Rn[ze]=dn.Int16Array,Rn[Ge]=dn.Int32Array,Rn[Ke]=Cn,Rn[We]=dn.Uint8ClampedArray,Rn[qe]=dn.Uint16Array,Rn[Ye]=dn.Uint32Array;var On={};On[_e]=On[Pe]=On[Oe]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},On[Ne]=On[De]={constructor:!0,toString:!0,valueOf:!0},On[Me]=On[Re]=On[Ve]={constructor:!0,toString:!0},On[Be]={constructor:!0},f(rn,function(e){for(var n in On)if(kn.call(On,n)){var t=On[n];t[e]=kn.call(t,e)}});var Bn=u.support={};!function(e){function n(){this.x=e}var t={0:e,length:e},i=[];n.prototype={valueOf:e,y:e};for(var r in new n)i.push(r);Bn.enumErrorProps=Sn.call(mn,"message")||Sn.call(mn,"name"),Bn.enumPrototypes=Sn.call(n,"prototype"),Bn.nonEnumShadows=!/valueOf/.test(i),Bn.ownLast="x"!=i[0],Bn.spliceObjects=(En.call(t,0,1),!t[0]),Bn.unindexedChars="xx"!="x"[0]+Object("x")[0]}(1,0);var Vn=function(){function e(){}return function(n){if(me(n)){e.prototype=n;var t=new e;e.prototype=xe}return t||{}}}(),Dn=function(e,n){return function(t,i){var r=t?Fn(t):0;if(!ee(r))return e(t,i);for(var o=n?r:-1,s=re(t);(n?o--:++o<r)&&!1!==i(s[o],o,s););return t}}(C),jn=function(e){return function(n,t,i){var r=re(n);i=i(n);for(var o=i.length,s=e?o:-1;e?s--:++s<o;){var a=i[s];if(!1===t(r[a],a,r))break}return n}}(),Fn=P("length"),Hn=function(n){return function(t,i,r){return t&&t.length?(i=J(i,r,3),e(t,i,n)):-1}}(),Jn=de(function(e){e=I(e,!1,!0);var t=-1,i=z(),r=e.length,o=i===n,s=o&&r>=Ae,a=s&&Ln&&In?new c(void 0):null,u=[];a?(i=l,o=!1):(s=!1,a=u);e:for(;++t<r;){var d=e[t],f=d;if(o&&d===d){for(var p=a.length;p--;)if(a[p]===f)continue e;u.push(d)}else 0>i(a,f,0)&&(s&&a.push(f),u.push(d))}return u}),zn=function(n,t){return function(i,r,o){return r=J(r,o,3),Kn(i)?(r=e(i,r,t),r>-1?i[r]:xe):S(i,r,n)}}(Dn),Gn=function(e,n){return function(t,i,r){return"function"==typeof i&&r===xe&&Kn(t)?e(t,i):n(t,B(i,r,3))}}(f,Dn),Kn=An||function(e){return s(e)&&ee(e.length)&&bn.call(e)==_e},Wn=D(N),qn=D(function(e,n,t){if(t)for(var i=-1,r=Qn(n),o=r.length;++i<o;){var s=r[i],a=e[s],u=t(a,n[s],s,e,n);(u===u?u===a:a!==a)&&(a!==xe||s in e)||(e[s]=u)}else e=g(e,n);return e}),Yn=function(e){return function(n,t,i){return("function"!=typeof t||i!==xe)&&(t=B(t,i,3)),e(n,t,we)}}(jn),Qn=Un?function(e){var n=null==e?xe:e.constructor;return"function"==typeof n&&n.prototype===e||("function"==typeof e?u.support.enumPrototypes:Q(e))?ie(e):me(e)?Un(e):[]}:ie,Zn=de(function(e,n){if(null==e)return{};if("function"!=typeof n[0])return n=m(I(n),String),ne(e,w(we(e),n));var t=B(n[0],n[1],3);return te(e,function(e,n,i){return!t(e,n,i)})});c.prototype.push=function(e){var n=this.data;"string"==typeof e||me(e)?n.set.add(e):n.hash[e]=!0},u.assign=qn,u.callback=Ie,u.forEach=Gn,u.forIn=Yn,u.keys=Qn,u.keysIn=we,u.map=le,u.matches=Ce,u.merge=Wn,u.omit=Zn,u.pairs=ye,u.property=Le,u.remove=function(e,n,t){var i=[];if(!e||!e.length)return i;var r=-1,o=[],s=e.length;for(n=J(n,t,3);++r<s;)t=e[r],n(t,r,e)&&(i.push(t),o.push(r));for(n=e?o.length:0;n--;)if(r=o[n],r!=a&&Z(r)){var a=r;En.call(e,r,1)}return i},u.restParam=de,u.set=function(e,n,t){if(null==e)return e;var i=n+"";n=null!=e[i]||$(n,e)?[i]:oe(n);for(var i=-1,r=n.length,o=r-1,s=e;null!=s&&++i<r;){var a=n[i];me(s)&&(i==o?s[a]=t:null==s[a]&&(s[a]=Z(n[i+1])?[]:{})),s=s[a]}return e},u.sortBy=function(e,n,t){if(null==e)return[];t&&X(e,n,t)&&(n=xe);var i=-1;return n=J(n,t,3),e=U(e,function(e,t,r){return{a:n(e,t,r),b:++i,c:e}}),O(e,o)},u.toPlainObject=be,u.transform=function(e,n,t,i){var r=Kn(e)||ke(e);return n=J(n,i,4),null==t&&(r||me(e)?(i=e.constructor,t=r?Kn(e)?new i:[]:Vn(pe(i)?i.prototype:xe)):t={}),(r?f:C)(e,function(e,i,r){return n(t,e,i,r)}),t},u.union=Jn,u.values=Se,u.collect=le,u.each=Gn,u.extend=qn,u.iteratee=Ie,u.clone=function(e,n,t,i){return n&&"boolean"!=typeof n&&X(e,n,t)?n=!1:"function"==typeof n&&(i=t,t=n,n=!1),"function"==typeof t?b(e,n,B(t,i,3)):b(e,n)},u.cloneDeep=function(e,n,t){return"function"==typeof n?b(e,!0,B(n,t,3)):b(e,!0)},u.every=ue,u.find=zn,u.findIndex=Hn,u.get=function(e,n,t){return e=null==e?xe:L(e,oe(n),n+""),e===xe?t:e},u.has=function(e,n){if(null==e)return!1;var t=kn.call(e,n);if(!t&&!$(n)){if(n=oe(n),e=1==n.length?e:L(e,R(n)),null==e)return!1;n=ae(n),t=kn.call(e,n)}return t||ee(e.length)&&Z(n,e.length)&&(Kn(e)||fe(e)||he(e))},u.identity=Ee,u.includes=ce,u.indexOf=se,u.isArguments=fe,u.isArray=Kn,u.isEmpty=function(e){return null==e?!0:Q(e)&&(Kn(e)||he(e)||fe(e)||s(e)&&pe(e.splice))?!e.length:!Qn(e).length},u.isFunction=pe,u.isNative=ve,u.isNull=function(e){return null===e},u.isObject=me,u.isPlainObject=ge,u.isString=he,u.isTypedArray=ke,u.last=ae,u.trim=function(e,n,i){var o=e;if(e=null==e?"":e+"",!e)return e;if(i?X(o,n,i):null==n){for(n=e.length;n--&&a(e.charCodeAt(n)););for(i=-1,o=e.length;++i<o&&a(e.charCodeAt(i)););return e.slice(i,n+1)}return n+="",e.slice(t(e,n),r(e,n)+1)},u.all=ue,u.contains=ce,u.detect=zn,u.include=ce,u.VERSION="3.10.1","function"==typeof i&&"object"==typeof i.amd&&i.amd&&i("lodash",[],function(){return u})}.call(this),i("globals",[],function(){"use strict";return{window:window,document:window.document,navigator:navigator,nike:window.nike=window.nike||{}}}),i("utilitiesSub/cookie",["globals"],function(e){"use strict";function n(n){if("string"!=typeof n)throw new Error("key must be a string");var t=e.document.cookie.match("(^|;)\\s*"+n+"\\s*=\\s*([^;]+)");return t?t.pop():null}function t(n){e.document.cookie=n+"=; path=/; domain=.nikedev.com; expires=Thu, 01 Jan 1970 00:00:01 GMT",e.document.cookie=n+"=; path=/; domain=.nike.com; expires=Thu, 01 Jan 1970 00:00:01 GMT"}return{clearCookie:t,getCookieValue:n}});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i("utilitiesSub/deepKeys",["lodash"],function(e){"use strict";function n(t,i){var o=[];return i=i||"",e.each(t,function(e,t){"object"===("undefined"==typeof e?"undefined":r(e))&&null!==e?o=o.concat(n(e,i+t+".")):o.push(i+t)}),o}return n}),i("utilitiesSub/formData",["globals","lodash"],function(e,n){"use strict";function i(){var t={};return n.each(e.nike.unite.currentView().view.components,function(e){"function"==typeof e.getValue?t[e.model.name]={dataField:e.model.dataField?e.model.dataField:e.model.name,value:e.getValue()}:n.get(e,"model.hiddenFields")&&(n.each(e.model.hiddenFields,function(e,n){t[n]={dataField:n,value:e}}),t[e.model.name]={hiddenFields:e.model.hiddenFields})}),t}function r(){var e=i(),t={};return n.each(e,function(e){e.dataField&&(t[e.dataField]=e.value)}),t}function o(e){var i={facebook:"Facebook",qq:"QQ",sina:"Sina Weibo",wechat:"WeChat"},r=t("settings").experience.getExperience(),o=e.toLowerCase();return r.settings.social&&r.settings.social.networks.length>0&&n.each(r.settings.social.networks,function(e){-1===e.displayName.indexOf("provider")&&(i[e.name.toLowerCase()]=e.displayName)}),i[o]?i[o]:e}return{getFormData:r,getFormDataByComponent:i,getProviderNameDisplay:o}}),i("utilitiesSub/loadCss",["globals"],function(e){"use strict";function n(n,i){var r=e.document.getElementsByTagName("head")[0],o=r.querySelector('link[href="'+n+'"]');if(o)return o;var s=e.document.createElement("link");return s.rel="styleSheet",s.href=n,s.type="text/css",s.setAttribute("charset","utf-8"),s.onload=function(){clearTimeout(t),"function"==typeof i&&i()},"function"==typeof i&&(t=setTimeout(function(){s.onload=null,i()},1e3)),r.appendChild(s),s}var t=void 0;return n}),i("utilitiesSub/namespace",["lodash"],function(e){"use strict";function n(n,t){var i=n.split(".");t=t||window,e.each(i,function(e){void 0===t[e]&&(t[e]={}),t=t[e]});var r=t;return r}return n}),i("utilitiesSub/parentNodes",[],function(){"use strict";function e(n){var t=void 0;return n?"BODY"===n.tagName?!1:(t=n.parentNode,t&&t.className&&-1!==t.className.indexOf("nike-unite-component")?t:e(t)):void 0}return{getParentComponent:e}}),i("utilitiesSub/sanitize",[],function(){"use strict";function e(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}return{htmlEntities:e}}),i("utilitiesSub/script",["globals","lodash"],function(e,n){"use strict";function t(e){if(!e)return"";var n=e.split("?")[0];return n=n.split("/"),n[n.length-1]}function i(i,o,s){var a=t(i);if(n.has(l,a))return l[a];"function"==typeof o&&(c[a]=o);var u=e.document.createElement("script");return u.setAttribute("charset","utf-8"),u.setAttribute("async",""),u.onload=r,s&&u.setAttribute("id",s),l[a]=u,u.setAttribute("src",i),e.document.head.appendChild(u),u}function r(i){var r=i&&i.target?i.target.src:"unknown",o=t(r);if(n.has(c,o)){var s=c[o];s(i),delete c[o]}if(i&&i.target){var a=e.document.getElementsByTagName("head")[0];a.removeChild(i.target)}delete l[o]}function o(t){var i={};return t=t||e.document.location.search,n.each(t.slice(1).split("&"),function(e){var n=e.split("=");if(2===n.length)try{i[n[0]]=decodeURIComponent(n[1])}catch(t){console.error('Unable to parse key "'+n[0]+'" with value "'+n[1]+'": '+t.message)}}),i}function s(e){var n={};return n.view="defaultview",n[e.toLowerCase()]||e.toLowerCase()}function a(e){var n=void 0,t=o();for(n in t){e.getAttribute(e.dataset[n]);var i=s(n);e.setAttribute("data-"+i,t[n]||e.dataset[n])}}function u(e){var t="?";return n.each(e,function(e,n){"?"!==t&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e)}),t}var c={},l={},d={load:i,setAttributesWithQueryStringParams:a,buildQueryString:u,parseQueryString:o};return d}),i("utilitiesSub/uuid",[],function(){"use strict";function e(){for(var e=new Array(36),n="0123456789abcdef",t=0;36>t;t++)e[t]=n.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=n.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var i=e.join("");return i}return e}),i("utilities",["utilitiesSub/cookie","utilitiesSub/deepKeys","utilitiesSub/formData","utilitiesSub/loadCss","utilitiesSub/namespace","utilitiesSub/parentNodes","utilitiesSub/sanitize","utilitiesSub/script","utilitiesSub/uuid"],function(e,n,t,i,r,o,s,a,u){"use strict";return{cookie:e,formData:t,loadCss:i,generateUuid:u,namespace:r,noop:function(){},parentNodes:o,sanitize:s,script:a,deepKeys:n}}),i("networkSub/errors",["lodash","globals"],function(e,n){"use strict";function i(e,n){0===n?l.connection():l.general(e,n)}function r(e,n){return c("general.error.connect",e,n)}function o(){return c("connection.error")}function s(e,n){return c("socialNetwork.update.failure",e,n)}function a(e,t){return n.document.cookie="coppa=true;max-age=86400",n.nike.unite.destroyAllViews(),c("EmailSignup.dateOfBirth.InvalidCOPPAweb",e,t)}function u(e,t){return n.nike.unite.destroyAllViews(),c("previous.coppa.failure",e,t)}function c(i,r,o){var s=t("settings").experience.getExperience(),a=e.clone(s.components.errorPanel);a.byKey[i]||(i="general.error.connect"),e.merge(a,a.byKey[i],{hiddenResult:JSON.stringify(r),hiddenCode:o}),delete a.byKey,n.nike.unite.views.error.render({errorPanel:a})}var l=void 0;return l={handleUnexpected:i,general:r,connection:o,byKey:c,social:s,coppa:a,previousCoppaFailure:u}});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};if(i("networkSub/xhrConfig",["lodash","utilities","globals","networkSub/errors"],function(e,n,i,o){"use strict";function s(){i.nike.unite.spinner.hide(),o.handleUnexpected("","TIMEOUT")}function a(e,n){i.nike.unite.spinner.hide(),o.handleUnexpected(e,n)}function u(r){var o=t("settings"),s=r.split("?",2)[0],a=r.split("?",2)[1]||"",u=r.split("#",2)[1]||"",c={},l=a.split("&");return e.each(l,function(e){var n=e.split("=",2);n[0]&&n[1]&&(c[n[0]]=decodeURIComponent(n[1]))}),c=e.merge({appVersion:i.window.nike.unite.version.app,experienceVersion:i.window.nike.unite.version.experiences,uxid:o.experience.getUxId(),locale:o.localization.getLocale(),backendEnvironment:o.experience.getBackendEnvironment(),browser:i.window.navigator.vendor,os:i.window.navigator.oscpu,mobile:o.platform.isMobile(),"native":o.platform.isNative(),visit:p||"",visitor:m||""},c),s+n.script.buildQueryString(c)+(u?"#"+u:"")}function c(e,n){var t=new XMLHttpRequest;return n=u(n),"withCredentials"in t?t.open(e,n,!0):"undefined"!=typeof XDomainRequest?(t=new XDomainRequest,t.open(e,n)):t=null,t}function l(e){p=e.visit,m=e.visitor}function d(){return{visit:p,visitor:m}}function f(e,n,t){if(4===e.readyState){var i=void 0;try{i=e.responseText?JSON.parse(e.responseText):{}}catch(o){return void t({},e.status)}var s=e.status;"object"===("undefined"==typeof i?"undefined":r(i))&&2===Object.keys(i).length&&i.status&&i.response&&(s=i.status,i=i.response),[200,201,202,204].indexOf(s)>=0&&"function"==typeof n?n(i,s):t&&"function"==typeof t&&t(i,s)}}var p=void 0,m=void 0;return{setup:c,setVisitData:l,getVisitData:d,handleResponseDefault:f,onErrorDefault:a,onTimeoutDefault:s}}),i("networkSub/cors",["lodash","networkSub/xhrConfig"],function(e,n){"use strict";function t(e,t,i,r){i=i||n.onErrorDefault,r=r||n.onTimeoutDefault,"withCredentials"in e||(e.onload=function(){this.readyState=4,this.status=200,n.handleResponseDefault(this,t,i)},e.onerror=i,e.onprogress=function(){}),e.withCredentials=!0,e.onreadystatechange=function(){n.handleResponseDefault(this,t,i)},e.ontimeout=r,e.timeout=15e3}function i(i,r,o,s,a){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},c={};e.isObject(r)?c=e.extend(c,r):c.data=r;var l=n.setup("POST",i,!0);if(!l)throw new Error("CORS not supported");t(l,o,s,a),l.setRequestHeader&&e.each(u,function(e,n){l.setRequestHeader(n,e)}),setTimeout(function(){l.send(JSON.stringify(c))},0)}function r(i,r,o,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=n.setup("GET",i,!0);if(!u)throw new Error("CORS not supported");t(u,r,o,s),u.setRequestHeader&&e.each(a,function(e,n){u.setRequestHeader(n,e)}),setTimeout(function(){u.send()},0)}function o(n){var t=!1;return n&&e.each(s,function(e){n.match(e)&&(t=!0)}),t}var s=[/^http(s)?:\/\/localhost(:[0-9]+)?[\/]?$/,/^http(s)?:\/\/([^\/]*\.)?nike\.com(:[0-9]+)?[\/]?$/,/^http(s)?:\/\/([^\/]*\.)?nikedev\.com(:[0-9]+)?[\/]?$/,/^http(s)?:\/\/([^\/]*\.)?nikecdn\.com(:[0-9]+)?[\/]?$/];return{get:r,post:i,isValidDomain:o}}),i("network",["networkSub/cors","networkSub/errors"],function(e,n){"use strict";return{cors:e,errors:n}}),i("componentsSub/spinner",["globals","utilities"],function(e,n){"use strict";function t(){r&&r.parentNode&&r.parentNode.removeChild(r),r=void 0}function i(){t();var i=e.nike.unite.currentView();return i&&(r=document.createElement("div"),r.id=n.generateUuid(),r.addEventListener("dblclick",function(){return t(),!1}),r.classList.add("nike-unite-spinner-overlay"),i.view.placeholder.appendChild(r)),r}var r=void 0,o=n.namespace("nike.unite.spinner");return o.show=i,o.hide=t,{show:i,hide:t}}),i("apiSub/error",["network","componentsSub/spinner"],function(e,n){"use strict";function t(t,i,r){n.hide(),e.errors.byKey(t,i,r)}var i=void 0;return i={display:t}}),i("apiSub/social",["componentsSub/spinner"],function(e){"use strict";function n(){e.hide()}var t=void 0;return t={cancelLogin:n
}}),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof i&&i.amd?i("Promise",n):e.ES6Promise=n()}(this,function(){"use strict";function e(e){var n=typeof e;return null!==e&&("object"===n||"function"===n)}function n(e){return"function"==typeof e}function i(e){W=e}function r(e){q=e}function o(){return function(){return process.nextTick(l)}}function s(){return"undefined"!=typeof K?function(){K(l)}:c()}function a(){var e=0,n=new Z(l),t=document.createTextNode("");return n.observe(t,{characterData:!0}),function(){t.data=e=++e%2}}function u(){var e=new MessageChannel;return e.port1.onmessage=l,function(){return e.port2.postMessage(0)}}function c(){var e=setTimeout;return function(){return e(l,1)}}function l(){for(var e=0;G>e;e+=2){var n=ee[e],t=ee[e+1];n(t),ee[e]=void 0,ee[e+1]=void 0}G=0}function d(){try{var e=t,n=e("vertx");return K=n.runOnLoop||n.runOnContext,s()}catch(i){return c()}}function f(e,n){var t=arguments,i=this,r=new this.constructor(m);void 0===r[te]&&P(r);var o=i._state;return o?!function(){var e=t[o-1];q(function(){return T(o,r,e,i._result)})}():L(i,r,e,n),r}function p(e){var n=this;if(e&&"object"==typeof e&&e.constructor===n)return e;var t=new n(m);return S(t,e),t}function m(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function h(e){try{return e.then}catch(n){return se.error=n,se}}function k(e,n,t,i){try{e.call(n,t,i)}catch(r){return r}}function b(e,n,t){q(function(e){var i=!1,r=k(t,n,function(t){i||(i=!0,n!==t?S(e,t):E(e,t))},function(n){i||(i=!0,C(e,n))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,C(e,r))},e)}function w(e,n){n._state===re?E(e,n._result):n._state===oe?C(e,n._result):L(n,void 0,function(n){return S(e,n)},function(n){return C(e,n)})}function y(e,t,i){t.constructor===e.constructor&&i===f&&t.constructor.resolve===p?w(e,t):i===se?(C(e,se.error),se.error=null):void 0===i?E(e,t):n(i)?b(e,t,i):E(e,t)}function S(n,t){n===t?C(n,v()):e(t)?y(n,t,h(t)):E(n,t)}function I(e){e._onerror&&e._onerror(e._result),x(e)}function E(e,n){e._state===ie&&(e._result=n,e._state=re,0!==e._subscribers.length&&q(x,e))}function C(e,n){e._state===ie&&(e._state=oe,e._result=n,q(I,e))}function L(e,n,t,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=n,r[o+re]=t,r[o+oe]=i,0===o&&e._state&&q(x,e)}function x(e){var n=e._subscribers,t=e._state;if(0!==n.length){for(var i=void 0,r=void 0,o=e._result,s=0;s<n.length;s+=3)i=n[s],r=n[s+t],i?T(t,i,r,o):r(o);e._subscribers.length=0}}function A(){this.error=null}function U(e,n){try{return e(n)}catch(t){return ae.error=t,ae}}function T(e,t,i,r){var o=n(i),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if(s=U(i,r),s===ae?(c=!0,a=s.error,s.error=null):u=!0,t===s)return void C(t,g())}else s=r,u=!0;t._state!==ie||(o&&u?S(t,s):c?C(t,a):e===re?E(t,s):e===oe&&C(t,s))}function _(e,n){try{n(function(n){S(e,n)},function(n){C(e,n)})}catch(t){C(e,t)}}function N(){return ue++}function P(e){e[te]=ue++,e._state=void 0,e._result=void 0,e._subscribers=[]}function M(e,n){this._instanceConstructor=e,this.promise=new e(m),this.promise[te]||P(this.promise),z(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&E(this.promise,this._result))):C(this.promise,R())}function R(){return new Error("Array Methods must be provided an Array")}function O(e){return new M(this,e).promise}function B(e){var n=this;return new n(z(e)?function(t,i){for(var r=e.length,o=0;r>o;o++)n.resolve(e[o]).then(t,i)}:function(e,n){return n(new TypeError("You must pass an array to race."))})}function V(e){var n=this,t=new n(m);return C(t,e),t}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function j(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(e){this[te]=N(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&D(),this instanceof F?_(this,e):j())}function H(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(n){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(n){}if("[object Promise]"===i&&!t.cast)return}e.Promise=F}var J=void 0;J=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var z=J,G=0,K=void 0,W=void 0,q=function(e,n){ee[G]=e,ee[G+1]=n,G+=2,2===G&&(W?W(l):ne())},Y="undefined"!=typeof window?window:void 0,Q=Y||{},Z=Q.MutationObserver||Q.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),$="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ee=new Array(1e3),ne=void 0;ne=X?o():Z?a():$?u():void 0===Y&&"function"==typeof t?d():c();var te=Math.random().toString(36).substring(16),ie=void 0,re=1,oe=2,se=new A,ae=new A,ue=0;return M.prototype._enumerate=function(e){for(var n=0;this._state===ie&&n<e.length;n++)this._eachEntry(e[n],n)},M.prototype._eachEntry=function(e,n){var t=this._instanceConstructor,i=t.resolve;if(i===p){var r=h(e);if(r===f&&e._state!==ie)this._settledAt(e._state,n,e._result);else if("function"!=typeof r)this._remaining--,this._result[n]=e;else if(t===F){var o=new t(m);y(o,e,r),this._willSettleAt(o,n)}else this._willSettleAt(new t(function(n){return n(e)}),n)}else this._willSettleAt(i(e),n)},M.prototype._settledAt=function(e,n,t){var i=this.promise;i._state===ie&&(this._remaining--,e===oe?C(i,t):this._result[n]=t),0===this._remaining&&E(i,this._result)},M.prototype._willSettleAt=function(e,n){var t=this;L(e,void 0,function(e){return t._settledAt(re,n,e)},function(e){return t._settledAt(oe,n,e)})},F.all=O,F.race=B,F.resolve=p,F.reject=V,F._setScheduler=i,F._setAsap=r,F._asap=q,F.prototype={constructor:F,then:f,"catch":function(e){return this.then(null,e)}},F.polyfill=H,F.Promise=F,F}),i("instantiation",["globals","utilities"],function(e,n){"use strict";function t(){if(i=e.document.getElementById("nike-unite"),!i)throw new Error('Unable to start Unite -- no element with id "nike-unite" was found!');"true"===i.dataset.allowqueryparams&&n.script.setAttributesWithQueryStringParams(i),n.namespace("nike.unite.version"),i.dataset.experienceVersion&&(window.nike.unite.version.experiences=i.dataset.experienceVersion),i.dataset.appVersion&&(window.nike.unite.version.app=i.dataset.appVersion)}var i=void 0;return{getObject:function(){return i},start:t}}),i("settingsSub/experience",["lodash","globals","instantiation","networkSub/cors"],function(e,n,t,i){"use strict";function r(){L=null,x=null,A=null,U=null}function o(n,t,i){var r=n,o=t.split("."),s=o.slice(-1);e.each(o.slice(0,-1),function(e){r[e]||(r[e]={}),r=r[e]}),"undefined"!=typeof i?r[s]=i:r[s]="undefined"!=typeof r[s]?r[s]:""}function s(){if(!L||!L.settings||""===e.trim(L.settings.welcomeEmailTemplate))throw new Error("Called getWelcomeEmailTemplate without first calling setExperience.");return L.settings.welcomeEmailTemplate}function a(){if(!L||!L.settings)throw new Error("Called getAtgSync without first calling setExperience.");return L.settings.atgSync}function u(){if(!L)throw new Error("Called getExperience without first setting the experience.");return L}function c(n,t){if(t)o(n,"settings.clientId",t.clientid||t.appid),o(n,"settings.mode",t.mode),o(n,"settings.environments.local.backendEnvironment",t.backendenvironment),o(n,"settings.environments.ci.backendEnvironment",t.backendenvironment),o(n,"settings.environments.production.backendEnvironment",t.backendenvironment),o(n,"settings.environments.local.facebookAppId",t.facebookappid),o(n,"settings.environments.ci.facebookAppId",t.facebookappid),o(n,"settings.environments.production.facebookAppId",t.facebookappid),o(n,"settings.weChatAppId",t.wechatappid),o(n,"settings.passwordRedirectURL",t.redirecturl),o(n,"settings.passwordResetEmailTemplate",t.passwordresetemailtemplate),o(n,"settings.welcomeEmailTemplate",t.welcomeemailtemplate),o(n,"settings.atgSync",t.atgsync),o(n,"settings.atgLogoutOnLogin",t.atgLogoutOnLogin),t.enableAnalytics&&o(n,"settings.enableAnalytics",t.enableAnalytics),t.cors&&i.isValidDomain(t.cors)&&(o(n,"settings.environments.local.cors",t.cors),o(n,"settings.environments.ci.cors",t.cors),o(n,"settings.environments.production.cors",t.cors)),t.corsoverride&&i.isValidDomain(t.corsoverride)&&(o(n,"settings.environments.local.corsOverride",t.corsoverride),o(n,"settings.environments.ci.corsOverride",t.corsoverride),o(n,"settings.environments.production.corsOverride",t.corsoverride));else if(!e.isNull(n))throw new Error("You must set the required experience overrides.");L=n}function l(){var e=n.document.getElementById("nike-unite");return e.dataset.environment?e.dataset.environment:"production"}function d(){var e=l(),n=u().settings.environments[e];if(!n)throw new Error("Called getEnvironmentVariables for an environment that is unknown");return n}function f(){return u(),d().backendEnvironment}function p(){return u(),d().cors}function m(){u();var e=d().corsOverride;return e}function v(){var e=u();if(!e.settings.clientId)throw new Error("Called getClientId without first setting data-clientid attribute for unite loader script.");return e.settings.clientId}function g(){var n=u(),t=[],i=n.settings.progressiveFields||[];return e.each(i,function(e){Object.keys(e).length>0&&t.push(e)}),t}function h(){if(!x)throw new Error("Called getUuId without first calling setUuId.");return x}function k(e){x=e}function b(){if(!L||!L.settings||""===e.trim(L.settings.uxId))throw new Error("Called getUxId without first calling setExperience.");return L.settings.uxId}function w(e){U=e}function y(){return U}function S(){return d().gigyaApiKey}function I(){var e=u();return e.settings.weChatAppId}function E(){var e=f();return e.toLowerCase().indexOf("identity")>=0}function C(){var n=u();return""===e.trim(t.getObject().dataset.facebookappid)&&n.settings.isDefaultFacebookAppId}var L=void 0,x=void 0,A=void 0,U=null;return{reset:r,getBackendEnvironment:f,getCorsServer:p,getCorsServerOverride:m,getClientId:v,getWelcomeEmailTemplate:s,getExperience:u,setExperience:c,getProgressiveFields:g,getUuId:h,setUuId:k,getUxId:b,getGigyaModel:y,setGigyaModel:w,getGigyaApiKey:S,getEnvironment:l,getEnvironmentVariables:d,getWeChatAppId:I,getAtgSync:a,isIdentityBackend:E,isDefaultFacebookAppId:C}}),i("settingsSub/fileStructure",[],function(){"use strict";function e(){if(!t)throw new Error("Called getBaseUrl without first calling setBaseUrl.");return t}function n(e){t=e}var t=void 0;return{getBaseUrl:e,setBaseUrl:n}}),!i)var i=t("amdefine")(module);i("settingsSub/mappings",[],function(){"use strict";function e(e,n){return i[e]||(e="en"),r[n]&&r[n][e]?r[n][e]:i[e]||"en_GB"}var n=["ar_AE","ca_ES","cs_CZ","da_DK","de_DE","el_GR","en_GB","en_US","es_AR","es_ES","es_LA","es_MX","fr_CA","fr_FR","hi_IN","hr_HR","hu_HU","in_ID","it_IT","ja_JP","ko_KR","ms_MY","nl_NL","no_NO","pl_PL","pt_BR","pt_PT","ru_RU","sv_SE","th_TH","tr_TR","zh_CN","zh_TW"],t={US:/^\s*(AL|AK|AZ|AR|CA|CO|CT|DC|DE|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY)\s*$/i},i={ar:"ar_AE",ca:"ca_ES",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_GB",es:"es_ES",fr:"fr_FR",hi:"hi_IN",hr:"hr_HR",hu:"hu_HU",id:"in_ID","in":"in_ID",it:"it_IT",ja:"ja_JP",ko:"ko_KR",ms:"ms_MY",nl:"nl_NL",no:"no_NO",pl:"pl_PL",pt:"pt_BR",ru:"ru_RU",sv:"sv_SE",th:"th_TH",tr:"tr_TR",zh:"zh_CN"},r={AD:{},AE:{},AF:{},AG:{},AI:{},AL:{},AM:{},AN:{},AO:{},AQ:{},AR:{es:"es_AR"},AS:{},AT:{},AU:{},AW:{},AZ:{},BA:{},BB:{},BD:{},BE:{},BF:{},BG:{},BH:{},BI:{},BJ:{},BM:{},BN:{},BO:{},BR:{},BS:{},BT:{},BV:{},BW:{},BY:{},BZ:{},CA:{fr:"fr_CA"},CC:{},CD:{},CF:{},CG:{},CH:{},CI:{},CK:{},CL:{es:"es_LA"},CM:{},CN:{},CO:{},CR:{},CU:{},CV:{},CX:{},CY:{},CZ:{},DE:{},DJ:{},DK:{},DM:{},DO:{},DZ:{},EC:{es:"es_LA"},EE:{},EG:{},EH:{},ER:{},ES:{},ET:{},EU:{},FI:{},FJ:{},FK:{},FM:{},FO:{},FR:{},GA:{},GB:{},GD:{},GE:{},GF:{},GH:{},GI:{},GL:{},GM:{},GN:{},GP:{},GQ:{},GR:{},GS:{},GT:{},GU:{},GW:{},GY:{},HK:{zh:"zh_TW"},HM:{},HN:{},HR:{},HT:{},HU:{},ID:{},IE:{},IL:{},IN:{},IO:{},IQ:{},IR:{},IS:{},IT:{},JM:{},JO:{},JP:{},KE:{},KG:{},KH:{},KI:{},KM:{},KN:{},KP:{},KR:{},KW:{},KY:{},KZ:{},LA:{},LB:{},LC:{},LI:{},LK:{},LR:{},LS:{},LT:{},LU:{},LV:{},LY:{},MA:{},MC:{},MD:{},ME:{},MG:{},MH:{},MK:{},ML:{},MM:{},MN:{},MO:{zh:"zh_TW"},MP:{},MQ:{},MR:{},MS:{},MT:{},MU:{},MV:{},MW:{},MX:{es:"es_MX"},MY:{},MZ:{},NA:{},NC:{},NE:{},NF:{},NG:{},NI:{},NL:{},NO:{},NP:{},NR:{},NU:{},NZ:{},OM:{},PA:{es:"es_LA"},PE:{es:"es_LA"},PF:{},PG:{},PH:{},PK:{},PL:{},PM:{},PN:{},PR:{},PT:{pt:"pt_PT"},PW:{},PY:{es:"es_LA"},QA:{},RE:{},RO:{},RS:{},RU:{},RW:{},SA:{},SB:{},SC:{},SD:{},SE:{},SG:{},SH:{},SI:{},SJ:{},SK:{},SL:{},SM:{},SN:{},SO:{},SR:{},SS:{},ST:{},SV:{},SY:{},SZ:{},TC:{},TD:{},TF:{},TG:{},TH:{},TJ:{},TK:{},TL:{},TM:{},TN:{},TO:{},TR:{},TT:{},TV:{},TW:{zh:"zh_TW"},TZ:{},UA:{},UG:{},UM:{},US:{en:"en_US"},UY:{es:"es_AR"},UZ:{},VA:{},VC:{},VE:{es:"es_LA"},VG:{},VI:{},VN:{},VU:{},WF:{},WS:{},XX:{},YE:{},YT:{},ZA:{},ZM:{},ZW:{}},o=17,s={AD:16,AE:13,AF:13,AG:13,AI:16,AL:16,AM:16,AN:16,AO:13,AQ:13,AR:13,AS:13,AT:16,AU:13,AW:18,AZ:13,BA:16,BB:13,BD:13,BE:16,BF:13,BG:16,BH:13,BI:13,BJ:13,BM:13,BN:13,BO:13,BR:13,BS:13,BT:13,BV:15,BW:13,BY:16,BZ:13,CA:13,CC:13,CD:13,CF:13,CG:13,CH:16,CI:13,CK:13,CL:13,CM:13,CN:13,CO:13,CR:13,CU:13,CV:13,CX:13,CY:16,CZ:16,DE:16,DJ:13,DK:18,DM:13,DO:13,DZ:16,EC:13,EE:16,EG:16,EH:16,ER:13,ES:16,ET:13,EU:16,FI:16,FJ:13,FK:16,FM:13,FO:13,FR:16,GA:13,GB:16,GD:13,GE:16,GF:16,GH:13,GI:16,GL:13,GM:13,GN:13,GP:16,GQ:13,GR:16,GS:16,GT:13,GU:13,GW:13,GY:13,HK:13,HM:13,HN:13,HR:15,HT:13,HU:16,ID:13,IE:16,IL:18,IN:13,IO:16,IQ:13,IR:13,IS:16,IT:18,JM:13,JO:13,JP:13,KE:13,KG:13,KH:13,KI:13,KM:13,KN:13,KP:14,KR:14,KW:13,KY:13,KZ:13,LA:13,LB:13,LC:13,LI:16,LK:13,LR:13,LS:13,LT:13,LU:16,LV:16,LY:16,MA:16,MC:16,MD:16,ME:16,MG:13,MH:13,MK:16,ML:13,MM:13,MN:13,MO:13,MP:13,MQ:16,MR:13,MS:16,MT:13,MU:13,MV:13,MW:13,MX:13,MY:13,MZ:13,NA:13,NC:16,NE:13,NF:13,NG:13,NI:13,NL:16,NO:15,NP:13,NR:13,NU:13,NZ:13,OM:13,PA:13,PE:13,PF:16,PG:13,PH:13,PK:13,PL:16,PM:16,PN:16,PR:13,PT:16,PW:13,PY:13,QA:13,RE:16,RO:16,RS:16,RU:14,RW:13,SA:13,SB:13,SC:13,SD:16,SE:16,SG:13,SH:13,SI:16,SJ:13,SK:16,SL:13,SM:16,SN:13,SO:13,SR:13,SS:13,ST:13,SV:13,SY:13,SZ:13,TC:16,TD:13,TF:13,TG:13,TH:13,TJ:13,TK:13,TL:13,TM:13,TN:16,TO:13,TR:18,TT:13,TV:13,TW:13,TZ:13,UA:16,UG:13,UM:13,US:13,UY:13,UZ:13,VA:17,VC:13,VE:13,VG:16,VI:13,VN:13,VU:13,WF:16,WS:13,XX:o,YE:13,YT:16,ZA:13,ZM:13,ZW:13};return{countryDialectExceptions:r,languageDefaultDialects:i,supportedDialects:n,getDialect:e,states:t,coppaMinimumAge:s,defaultCOPPAAge:o}}),i("settingsSub/platform",["lodash","globals","utilities"],function(e,n,i){"use strict";function r(){return/iPhone/i.test(n.navigator.userAgent)||/iPad/i.test(n.navigator.userAgent)||/iPod/i.test(n.navigator.userAgent)}function o(){return/Android/i.test(n.navigator.userAgent)}function s(){var i=t("instantiation").getObject();switch(e.get(i,"dataset.mobile")){case"true":return!0;case"false":return!1;default:return o()||r()||/webOS/i.test(n.navigator.userAgent)||/BlackBerry/i.test(n.navigator.userAgent)||/Windows Phone/i.test(n.navigator.userAgent)}}function a(){var e=t("instantiation");return"true"===e.getObject().dataset["native"]}function u(){var e=(i.script.parseQueryString().androidSDKVersion||"").replace(/\s/g,"");return{delayAnalyticsUntilTouch:""!==e}}function c(){var e=(i.script.parseQueryString().iOSSDKVersion||"").replace(/\s/g,"");return{showDOMCancelButton:""===e&&a()&&r(),delayAnalyticsUntilTouch:""!==e}}var l=i.namespace("nike.unite.settings");return l.getAndroidProperties=u,l.getIOSProperties=c,{isAndroid:o,isIOS:r,isMobile:s,isNative:a,getAndroidProperties:u,getIOSProperties:c}}),i("settingsSub/localization",["lodash","globals","./mappings","settingsSub/experience","settingsSub/mappings","settingsSub/platform","utilities"],function(e,n,t,i,r,o,s){"use strict";function a(){v=null,g=null,h=null,k={}}function u(){if(!h)throw new Error("Called getCountry without first calling setLocale");return h}function c(){if(!g)throw new Error("Called getLanguage without first calling setLocale");return g}function l(){if(!v)throw new Error("Called getLocale without first calling setLocale");return v}function d(n){if(n=n.replace(/-/g,"_"),!g){var r=e.trim(n.split("_")[0]);g="en",e.has(t.languageDefaultDialects,r)&&(g=r)}h=n.split("_").slice(-1)[0].toUpperCase();var o=i.getExperience();return o.components&&o.components.country&&e.has(o.components.country.supportedList,h)||(h="XX"),v=e.trim(g)+"_"+e.trim(h)}function f(n){var t=(n||"en_US").replace(/\s+/g,"").split(/[-_]+/g),i=t[0].toLowerCase();e.has(r.languageDefaultDialects,i)||(i="en");var o=t.slice(-1).toString().toUpperCase();return e.has(r.countryDialectExceptions,o)||(o="XX"),i+"_"+o}function p(){var e=i.getEnvironmentVariables().agreementServiceUrl,t=n.document.getElementById("nike-unite"),r=t.getAttribute("data-agreements-url");return r&&""!==r.trim()&&(e=r.trim()),e}function m(t){var r={participantLink:"participant",policyLink:"privacyPolicy",swooshTermsLink:"programTerms",termsLink:"termsOfUse"};if(!r.hasOwnProperty(t))throw new Error("Called openLegalLink with an invalid agreementType");t=r[t];var s={agreementType:t,country:u(),language:c(),mobileStatus:o.isMobile(),requestType:"redirect",uxId:i.getUxId()};"participant"===t&&(s.mobileStatus=!1);var a=p(),l=[];e.each(s,function(e,n){l.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}),n.window.location=a+"?"+l.join("&")}var v=void 0,g=void 0,h=void 0,k={},b=s.namespace("nike.unite");return b.openLegalLink=m,{reset:a,getCountry:u,getLanguage:c,getLocale:l,sanitizeLocaleString:f,setLocale:d}}),i("settings",["settingsSub/experience","settingsSub/fileStructure","settingsSub/localization","settingsSub/mappings","settingsSub/platform"],function(e,n,t,i,r){"use strict";return{experience:e,fileStructure:n,localization:t,mappings:i,platform:r}}),i("controllerSub/getUserState",["networkSub/cors","Promise","settings","utilities"],function(e,n,t,i){"use strict";function r(n,r,o,s,a){if("string"!=typeof n||!n)throw new Error("state must be a non-empty string");if("string"!=typeof r||!r)throw new Error("accessToken must be a non-empty string");if("function"!=typeof o)throw new Error("onSuccess must be a function");if("function"!=typeof s)throw new Error("onError must be a function");if("function"!=typeof a)throw new Error("onTimeout must be a function");if("hasAcceptedSwooshTerms"===n)return void o(!1);var u={state:n},c=t.experience.getCorsServer()+"/userState"+i.script.buildQueryString(u);e.get(c,o,s,a,{Authorization:"Bearer "+r})}function o(e,t){return new n(function(n,i){r(e,t,n,function(e,n){i({code:"GENERIC",httpStatus:n,message:e.error_description})},function(){i({code:"TIMEOUT",message:void 0})})})}return{getUserState:r,getUserStateWithPromise:o}}),i("networkSub/subModules/userState",["lodash","controllerSub/getUserState","settings","Promise"],function(e,n,t,i){"use strict";function r(e){return"isLegallyCompliant"!==e&&"isMobileVerified"!==e&&"isSneakerHead"!==e}function o(e){return!!(e.location&&"CN"!==e.location.country||e.entity&&"CN"!==e.entity.country||e.verifiedphone&&"CN"===e.verifiedPhoneCountry&&e.location&&"CN"===e.location.country)}function s(e){return!!e.verifiedphone}function a(e){return o(e)&&s(e)}function u(e){return!!(e.emails&&e.emails.primary.email||e.entity&&e.entity.account.email)}function c(e){return!!(e.dob&&e.dob.date||e.entity&&e.entity.dateOfBirth)}function l(e,l){if(!l.user||!t.experience.isIdentityBackend()&&!r(e)||t.experience.getExperience().settings.useLegacyGetUser&&!r(e)||"isSwooshUser"===e)return n.getUserStateWithPromise(e,l.access_token);switch(e){case"isLegallyCompliant":return i.resolve(o(l.user));case"isMobileVerified":return i.resolve(s(l.user));case"isSneakerHead":return i.resolve(a(l.user));case"canCheckOut":case"canRegisterEvent":return i.resolve(u(l.user));case"hasDateOfBirth":return i.resolve(c(l.user));default:return i.reject({code:"UNSUPPORTED"})}}function d(e,n){return"isLegallyCompliant"===e&&t.experience.isIdentityBackend()&&!o(n)?{override:!0,verifyMobilePhoneNumber:{"supportedList!":[{country:"CN",text:"中国",code:"86"}],rules:[{},{},{"value!":{pattern:"^861[0-9]{10}$"}}]}}:{}}function f(n,r,o){var s=t.experience.getExperience(),a=s.settings.progressive.contexts.login,u={},c=[];return e.forEach(a,function(n){var t=e.get(s,"settings.progressive.states."+n);t&&(u[n]=t)}),e.isEmpty(u)?r(!0):(e.forIn(u,function(e,t){"userState"===e.endpoint&&c.push(l(t,n))}),void i.all(c).then(function(n){return r(e.every(n,function(e){return e===!0}))})["catch"](function(e){return o(e)}))}function p(n){var r=t.experience.getExperience();return new i(function(t,i){return e.get(r,"settings.allowSwooshSSO")?l("isSwooshUser",n).then(function(e){return e?t(!0):void f(n,t,i)})["catch"](function(e){return i(e)}):f(n,t,i)})}return{getChinaProgressiveOverride:d,getUserState:l,isValidSSO:p}}),i("controllerSub/userAcceptance",["networkSub/cors","Promise","settings","utilities"],function(e,n,t,i){"use strict";function r(r){return new n(function(n){var o={uxid:t.experience.getUxId(),agreementKey:"programTerms",requestedFields:"type,manual,nuid,link",timePeriod:365},s=t.experience.getEnvironmentVariables().acceptanceServiceUrl+"/query"+i.script.buildQueryString(o);e.get(s,function(){n(!0)},function(){n(!1)},function(){n(!1)},{Authorization:r,"X-Nike-AppId":o.uxid})})}function o(i,r,o){return new n(function(n){var s=t.experience.getEnvironmentVariables().acceptanceServiceUrl+"JWT",a={agreement:"programTerms",country:t.localization.getCountry(),language:t.localization.getLanguage(),status:!0,type:"agreement",uxid:t.experience.getUxId(),nuid:o};e.post(s,a,n,n,n,{Authorization:i,"Content-Type":"application/json","X-Nike-AppId":a.uxid,UpmId:r})})}return{getAgreement:r,postAgreement:o}}),i("controllerSub/updateUser",["networkSub/cors","Promise","settings","lodash"],function(e,n,t,i){"use strict";function r(e){var n={};return i.each(e,function(e,t){if(e){if("dateOfBirth"===t){var r=e.split("-");e=Date.UTC(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10))}if(i.isObject(e))return void i.each(e,function(e,t){s[t]&&i.set(n,s[t],e)});s[t]&&i.set(n,s[t],e)}}),n}function o(o,s){var a=t.experience.getCorsServer()+"/updateUser",u=r(o);return i.isEmpty(u)?n.resolve():new n(function(n,t){e.post(a,u,function(){n()},function(e,n){var i={httpStatus:n,message:e.errors[0].message};switch(n){case 409:99812===e.errors[0].code?i.code="DUPLICATE_EMAIL":99113===e.errors[0].code?i.code="DUPLICATE_SCREENNAME":i.code="DUPLICATE";break;case 500:i.code="SERVER_ERROR";break;default:i.code="GENERIC"}t(i)},function(){t({code:"TIMEOUT"})},{Authorization:"Bearer "+s,"Content-Type":"application/json"})})}var s={emailAddress:"emails.primary.email",dateOfBirth:"dob.date"};return{updateUser:o}}),i("sessionSub/storage",["lodash","globals","settings","instantiation","networkSub/xhrConfig"],function(e,n,t,i,r){"use strict";function o(e,n){"function"==typeof n&&(x[A]=n),e.transactionId=A++}function s(){return U}function a(){u(),_={},N=!0;var e=!1;try{n.window.localStorage.setItem("uniteLocalStorageCheck","unite")}catch(r){e=!0}return e||i.getObject().dataset.disablesession||t.platform.isNative()?(N=!1,void(U=!0)):(L=n.document.createElement("iframe"),L.onload=function(){U=!0},n.window.addEventListener("message",c,!1),L.id="nike-unite-session",L.style.display="none",L.setAttribute("data-ignore",""),T="https://unite.nike.com/","local"===t.experience.getEnvironment()&&(T=i.getObject().dataset.baseurl),L.src=T+"session.html","loading"!==n.document.readyState?n.document.body.appendChild(L):n.document.addEventListener("DOMContentLoaded",function(){L.parentNode!==n.document.body&&n.document.body.appendChild(L)}),x={},void(A=0))}function u(){U=!1,L&&(n.document.body.removeChild(L),L=null)}function c(e){if(T===e.origin+"/"){var n=JSON.parse(e.data),t=x[n.transactionId];delete x[n.transactionId],"function"==typeof t&&t(n.value)}}function l(e,n){o(e,n),L.contentWindow.postMessage(JSON.stringify(e),T)}function d(e){if("undefined"!=typeof e&&"function"!=typeof e)throw new Error("callback needs to be a function or undefined");if(!N)return _={},e();var n={type:"clear"};l(n,e)}function f(e){function n(){var n=void 0;if(e){var t=0;n=function(){3===++t&&e()}}C.setLocalStorage("visit",i,n),C.setLocalStorage("visitor",o,n),C.setSessionStorage("visitProcessed","true",n)}if("undefined"!=typeof e&&"function"!=typeof e)throw new Error("callback needs to be a function or undefined");if(!N)return e();var t={type:"clear"},i=r.getVisitData().visit||"",o=r.getVisitData().visitor||"";l(t,n)}function p(e,n){if("string"!=typeof e)throw new Error("key needs to be a string");if("function"!=typeof n)throw new Error("callback must be a function");if(!N)return n(_[e]);var t={type:"get",key:e};l(t,n)}function m(e,n){if("string"!=typeof e)throw new Error("key needs to be a string");if("function"!=typeof n)throw new Error("callback must be a function");if(!N)return n();var t={type:"getSession",key:e};l(t,n)}function v(e,n){if(!N)return n();var t={type:"getCookie",key:e};l(t,n)}function g(n,t){if("string"!=typeof n)throw new Error("pattern must be a string");if("function"!=typeof t)throw new Error("callback must be a function");if(!N){var i=new RegExp(n),r={};return e.each(_,function(e,n){i.test(n)&&(r[n]=e)}),t(r)}var o={type:"search",key:n};l(o,t)}function h(e,n,t){if("string"!=typeof e)throw new Error("key needs to be a string");if("string"!=typeof n)throw new Error("value needs to be a string");if("undefined"!=typeof t&&"function"!=typeof t)throw new Error("callback needs to be a function or undefined");if(!N)return _[e]=n,t();var i={type:"set",key:e,value:n};l(i,t)}function k(e,n,t){if("string"!=typeof e)throw new Error("key needs to be a string");if("string"!=typeof n)throw new Error("value needs to be a string");if("undefined"!=typeof t&&"function"!=typeof t)throw new Error("callback needs to be a function or undefined");if(!N)return t();var i={type:"setSession",key:e,value:n};l(i,t)}function b(e,n){if("string"!=typeof e)throw new Error("key needs to be a string");if("undefined"!=typeof n&&"function"!=typeof n)throw new Error("callback needs to be a function or undefined");if(!N)return delete _[e],n();var t={type:"remove",key:e};l(t,n)}function w(e,n){if("string"!=typeof e)throw new Error("key needs to be a string");if("undefined"!=typeof n&&"function"!=typeof n)throw new Error("callback needs to be a function or undefined");if(!N)return n();var t={type:"removeSession",key:e};l(t,n)}function y(e){if(!N)return e();var n={cors:t.experience.getCorsServer(),type:"getSessionCookie"};l(n,e)}function S(e,n){if(!N)return n();var i={cors:t.experience.getCorsServer(),type:"setSessionCookie"};i.value={user_id:e.user_id,access_token:e.access_token,refresh_token:e.refresh_token,expires_in:e.expires_in,token_type:"bearer",timestamp:e.timestamp,clientId:e.clientId,uxId:e.uxId},l(i,n)}function I(e){var n={cors:t.experience.getCorsServer(),type:"deleteSessionCookie"};l(n,e)}function E(e,n){var t=this;return function(){for(var i=arguments.length,r=Array(i),o=0;i>o;o++)r[o]=arguments[o];if(!U)throw new Error("Attempted to use session method "+e+" before session module was initialized");n.apply(t,r)}}var C=void 0,L=void 0,x=void 0,A=void 0,U=!1,T=void 0,_=void 0,N=void 0;return C={clear:E("clear",d),clearSkipVisitData:E("clearSkipVisitData",f),deleteSessionCookie:I,getCookieStorage:E("getCookieStorage",v),getLocalStorage:E("getLocalStorage",p),getSessionCookie:E("getSessionCookie",y),getSessionStorage:E("getSessionStorage",m),initialize:a,isReady:s,removeLocalStorage:E("removeLocalStorage",b),removeSessionStorage:E("removeSessionStorage",w),searchLocalStorage:E("searchLocalStorage",g),setLocalStorage:E("setLocalStorage",h),setSessionCookie:E("setSessionCookie",S),setSessionStorage:E("setSessionStorage",k),uninitialize:u}}),i("controllerSub/tokenRefresh",["networkSub/cors","settings"],function(e,n){"use strict";function t(t,i,r,o,s){if("string"!=typeof t||!t)throw new Error("refreshToken must be a non-empty string");if("function"!=typeof r)throw new Error("onSuccess must be a function");if("function"!=typeof o)throw new Error("onError must be a function");if("function"!=typeof s)throw new Error("onTimeout must be a function");var a=n.experience.getCorsServer()+"/tokenRefresh",u={refresh_token:t,client_id:i||n.experience.getClientId(),grant_type:"refresh_token"};e.post(a,u,r,o,s,{"Content-Type":"application/json"})}function i(e,n){return new Promise(function(i,r){t(e,n,i,function(e,n){var t={httpStatus:n,message:e};switch(n){case 500:t.code="SERVER_ERROR";break;default:t.code="GENERIC"}r(t)},function(){return r({code:"TIMEOUT"})})})}return{tokenRefresh:t,tokenRefreshWithPromise:i}}),i("controllerSub/cookieToToken",["networkSub/cors","settings","utilities"],function(e,n,t){"use strict";function i(i,r,o){if("function"!=typeof i)throw new Error("onSuccess must be a function");if("function"!=typeof r)throw new Error("onError must be a function");if("function"!=typeof o)throw new Error("onTimeout must be a function");var s={clientId:n.experience.getClientId()},a=n.experience.getCorsServer()+"/cookieToToken"+t.script.buildQueryString(s);e.get(a,i,r,o)}return{cookieToToken:i}}),i("controllerSub/tokenExchange",["networkSub/cors","settings","utilities"],function(e,n,t){"use strict";function i(i,r,o,s){var a={clientId:n.experience.getClientId(),token:i},u=n.experience.getCorsServer()+"/tokenExchange"+t.script.buildQueryString(a);e.get(u,r,o,s)}function r(e){return new Promise(function(n,t){i(e,n,function(e,n){var i={httpStatus:n,message:e};switch(n){case 500:i.code="SERVER_ERROR";break;default:i.code="GENERIC"}t(i)},function(){return t({code:"TIMEOUT"})})})}return{tokenExchange:i,tokenExchangeWithPromise:r}});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i("sessionSub/api",["lodash","utilities","globals","settings","sessionSub/storage","controllerSub/tokenRefresh","controllerSub/cookieToToken","controllerSub/getUserState","controllerSub/tokenExchange","networkSub/subModules/userState","utilitiesSub/cookie","Promise","networkSub/xhrConfig"],function(e,n,i,o,s,a,u,c,l,d,f,p,m){"use strict";function v(){return s.isReady()}function g(){s.initialize()}function h(e,n){return parseInt(e.timestamp)+parseInt(e.expires_in)-n<Math.floor(Date.now()/1e3)}function k(e,n,t,i){if("function"!=typeof i&&"undefined"!=typeof i)throw new Error("onSuccess must be a function or undefined");var r=void 0,a=void 0;n&&t?(r=n,a=t):(r=o.experience.getUxId(),a=o.experience.getClientId()),e.timestamp=Math.floor(Date.now()/1e3).toString(),e.clientId=a,e.uxId=r;var u=function(){s.setLocalStorage(r+".credential",JSON.stringify(e),function(){i&&i(e)})};s.setSessionCookie(e,u)}function b(e,n){s.setLocalStorage("lastGetUserTimestamp",Date.now().toString(),function(){s.setLocalStorage(o.experience.getUxId()+"."+o.experience.getBackendEnvironment()+".user",JSON.stringify(e),n)})}function w(e){s.getLocalStorage("visitor",function(t){s.getSessionStorage("visitProcessed",function(r){s.getLocalStorage("visit",function(o){o=y(r,o),t||(t=n.generateUuid(),s.setLocalStorage("visitor",t,function(){})),s.setSessionStorage("visitProcessed","true",function(){}),s.setLocalStorage("visit",o,function(){});var a={visit:o,visitor:t
};m.setVisitData(a),i.window.nike.unite.sessionData=a,e()})})})}function y(e,n){return e&&n?n:!e&&n?(parseInt(n)+1).toString():"1"}function S(e){f.clearCookie("pr_id"),f.clearCookie("pr_data"),s.clear(e)}function I(e){f.clearCookie("pr_id"),f.clearCookie("pr_data"),s.clearSkipVisitData(e)}function E(e){s.getLocalStorage("sessionExpirationTimestamp",function(n){Date.now()>parseInt(n)?(f.clearCookie("CART_SUMMARY"),B.logout(e)):s.getCookieStorage("unite_session_timestamp",function(n){n&&(n=parseInt(n)),B.getLatestCredential(function(t){n&&t&&n>parseInt(t.timestamp)?s.clear(e):e()})})})}function C(e){if("function"!=typeof e)throw new Error("callback needs to be a function");B.logoutWithoutNetwork(function(){var n=function(){nike.unite.on.logout.fire(),e.apply(this,arguments)};s.deleteSessionCookie(n)})}function L(e,n){s.getSessionCookie(function(t){if(!t)return e(null);var i=function(n){if(n){var t=f.getCookieValue("pr_id");t&&t!==n.user_id&&(f.clearCookie("pr_id"),f.clearCookie("pr_data"));var i=Date.now()-1086e4;s.setLocalStorage("lastNikeLoginTimeWithSlCheck",JSON.stringify({timestamp:""+i,nikeLogin:!1}),function(){e(n)})}else e(null)};B.performTokenExchange(t,i,n)})}function x(e,n,t){var i=function(e){var i=function(t){t.user_id=e.user_id,B.setCredential(t,null,null,n)},r=function(e,i){i&&"401"===i.toString()?(B.logout(function(){}),n(null)):t(e,i)};l.tokenExchange(e.access_token,i,r,r)},r=h(e,300);r?B.performTokenRefresh(e,function(e){e?i(e):n(null)},t):i(e)}function A(e,n,t){var r=function(t){var r=e.uxId,o=e.clientId,s={oldAccessToken:e.access_token,oldRefreshToken:e.refresh_token,user_id:t.user_id,access_token:t.access_token,refresh_token:t.refresh_token,expires_in:t.expires_in};i.nike.unite.on.tokenRefresh.fire(s),B.setCredential(t,r,o,function(e){n(e)})},o=function(e,i){i&&"401"===i.toString()?(B.logout(function(){}),n(null)):t(e,i)};a.tokenRefresh(e.refresh_token,e.clientId,r,o,o)}function U(e,n){var i=function(e){V=V||t("controllerSub/getUser"),V.getUser(e,function(){},function(){},function(){})};B.getCredential(e,n,i)}function T(e){B.validateSession(function(){s.getLocalStorage("lastNikeLoginTimeWithSlCheck",function(n){var t="D";if(n){var i=JSON.parse(n),r=parseInt(i.timestamp),o=Date.now(),s=o-r,a=6e4;t=30*a>s&&i.nikeLogin?"A":180*a>s&&i.nikeLogin?"B":"C"}e(t)})})}function _(n,t,i){function r(r){var o=e.get(r,"access_token");return o?void d.isValidSSO(r).then(function(e){return e?(n(r),void(r&&i&&i(r))):B.logout(function(){n(null)})})["catch"](function(e){t(e)}):n(null)}function a(e){var n=f.getCookieValue("pr_id");if(e&&(e=JSON.parse(e),n&&n!==e.user_id&&(e=null,s.clear())),e){var i=h(e,300);i?B.performTokenRefresh(e,r,t):r(e)}else B.getLatestCredential(function(e){e&&n&&n!==e.user_id&&(e=null,s.clear()),e?B.performTokenExchange(e,r,t):B.performSSOCookieExchange(r,t)})}if("function"!=typeof n)throw new Error("onSuccess must be a function");if("function"!=typeof t)throw new Error("onError must be a function");if(void 0!==i&&"function"!=typeof i)throw new Error("onNewAccessToken must be a function if provided");B.validateSession(function(){s.getLocalStorage(o.experience.getUxId()+".credential",a)})}function N(n){function t(t){var i=null,o=e.transform(t,function(e,n){try{var t=JSON.parse(n);"object"===("undefined"==typeof t?"undefined":r(t))&&e.push(t)}catch(i){}},[]);o=e.sortBy(o,function(e){return parseInt(e.timestamp)}),o.length>0&&(i=o[o.length-1]),n(i)}if("function"!=typeof n)throw new Error("Callback must be a function");s.searchLocalStorage("^.+\\.credential$",t)}function P(e,n,t){function i(t){t===!0?o="EMPLOYEE":t===!1&&(o="DEFAULT_USER"),s.setLocalStorage("userType",o,function(){n(e,o)})}function r(e){e?c.getUserState("isSwooshUser",e.access_token,i,t,t):n(null)}var o="UNKNOWN";B.getCredential(r,t)}function M(e,n,i){function r(t){P(t,e,n)}function a(t){t?l.getUser(t,r,n,n):e(null)}function u(t){t?s.getLocalStorage("userType",function(n){n?e(JSON.parse(t),n):r(JSON.parse(t))}):B.getCredential(a,n)}function c(e){Date.now()>parseInt(e)+36e5?B.getCredential(a,n):s.getLocalStorage(o.experience.getUxId()+"."+o.experience.getBackendEnvironment()+".user",u)}var l=t("controllerSub/getUser");if("function"!=typeof e)throw new Error("onSuccess needs to be a function or undefined");if("function"!=typeof n)throw new Error("onError needs to be a function or undefined");B.validateSession(function(){i?B.getCredential(a,n):s.getLocalStorage("lastGetUserTimestamp",c)})}function R(e,n){if("function"!=typeof e)throw new Error("onSuccess needs to be a function or undefined");if("function"!=typeof n)throw new Error("onError needs to be a function or undefined");s.getLocalStorage("visit",function(t){s.getLocalStorage("visitor",function(i){t&&i?e({visit:parseInt(t),visitor:i}):n(null)})})}function O(e){var n=e.keepMeLoggedIn,t=e.isLinked;return new p(function(e){s.setLocalStorage("lastNikeLoginTimeWithSlCheck",JSON.stringify({timestamp:Date.now().toString(),nikeLogin:o.experience.getExperience().settings.setCookieOnLogin&&!t}),function(){if(n===!1){var t=Date.now()+108e5;s.setLocalStorage("sessionExpirationTimestamp",t.toString(),e)}else e()})})}var B=void 0,V=void 0;return n.namespace("nike.unite.session"),window.nike.unite.session.getAccessLevel=function(e){B.getAccessLevel(e)},window.nike.unite.session.getUserProfile=function(e,n){B.getUserProfile(e,n,!1)},window.nike.unite.session.getUserProfileWithForceRefresh=function(e,n){B.getUserProfile(e,n,!0)},window.nike.unite.session.getCredential=function(e,n){B.getCredentialWithUserRefresh(e,n)},window.nike.unite.session.getVisitData=function(e,n){B.getVisitData(e,n)},window.nike.unite.session.logout=function(e){f.clearCookie("CART_SUMMARY"),B.logout(e)},B={getAccessLevel:T,getCredential:_,getCredentialWithUserRefresh:U,getLatestCredential:N,getUserProfile:M,getVisitData:R,initialize:g,isReady:v,validateSession:E,logout:C,logoutWithoutNetwork:S,logoutWithoutClearingVisitData:I,performSSOCookieExchange:L,performTokenExchange:x,performTokenRefresh:A,setCredential:k,setStorageTimestamp:O,setUserProfile:b,setVisitData:w}}),i("session",["sessionSub/api"],function(e){"use strict";return e}),i("flowsSub/subModules/progressive",["lodash","controllerSub/userAcceptance","controllerSub/updateUser","networkSub/subModules/userState","networkSub/errors","globals","Promise","session","settings","utilities"],function(n,t,i,r,o,s,a,u,c,l){"use strict";function d(e){return n.merge({headerUserName:e.name?e.name.latin.given:e.entity.firstName},r.getChinaProgressiveOverride(b.currentState,e))}function f(){return"isMobileVerified"===b.currentState||"isLegallyCompliant"===b.currentState||"isSneakerHead"===b.currentState}function p(){return new a(function(e){function n(n){var i=s.nike.unite.currentView().view.placeholder,r=i.querySelector(".nike-unite-form"),u=l.formData.getFormData(r);switch(n){case"submit":switch(b.endpoint){case"acceptance":return t.postAgreement(b.loginResponse.access_token,b.loginResponse.user_id,b.getUserResponse.nuId).then(function(){return e()})["catch"](function(){return e()});case"update":return m(u).then(function(){return e()})["catch"](function(){return e()});case"userState":return f()?e():m(u).then(function(){return e()})["catch"](function(e){return s.nike.unite.destroyAllViews(),o.handleUnexpected(e,e.errorCode),p()})}break;case"getAccessToken":return new a(function(e){e(b.loginResponse.access_token)});case"skip":return e()}}s.nike.unite.views.progressive.eventHandler=n,s.nike.unite.views.progressive.render(d(b.getUserResponse))})}function m(e){return i.updateUser(e,b.loginResponse.access_token).then(function(){return a.resolve()})["catch"](function(e){return a.reject(e)})}function v(e){return t.getAgreement(e).then(function(e){return e?a.resolve():p()})["catch"](function(){return p()})}function g(){switch(b.endpoint){case"update":return p();case"acceptance":return v(b.loginResponse.access_token,b.loginResponse.user_id);default:return r.getUserState(b.currentState,{access_token:b.loginResponse.access_token,user:b.getUserResponse}).then(function(e){return e?a.resolve():p()})["catch"](function(e){return a.reject(e)})}}function h(){s.nike.unite.destroyAllViews();var e=s.nike.unite.views.progressive.model.layout;return s.nike.unite.views.progressive.model.layout=b.layout,g().then(function(){return s.nike.unite.views.progressive.model.layout=e,a.resolve()})["catch"](function(e){return a.reject(e)})}function k(n,t){var i=[].concat(e(n)),r=c.experience.getExperience().settings.progressive.states;b.getUserResponse=t.getUserResponse,b.loginResponse=t.loginResponse;var o=function s(e){return e?(b.currentState=e,b.layout=r[e].layout,b.endpoint=r[e].endpoint,h().then(function(){return s(i.shift())})["catch"](function(e){return a.reject(e)})):a.resolve()};return o(i.shift())}var b={};return{start:k}}),i("apiSub/user",["lodash","networkSub/subModules/userState","flowsSub/subModules/progressive","globals","session"],function(e,n,t,i,r){"use strict";function o(e){var n={progressiveForm:{hiddenFields:{stateKey:e}}};switch(e){case"isLegallyCompliant":n.override=!0,n.verifyMobileNumber={"supportedList!":[{country:"CN",text:"中国",code:"86"}],rules:[{},{},{"value!":{pattern:"^861[0-9]{10}$"}}]}}return n}function s(e){if("string"!=typeof e||!e)throw new Error("state param must be a non-empty string");r.getUserProfile(function(n){if(!n)throw new Error("User profile not found");r.getCredential(function(r){if(!r)throw new Error("Missing credentials");t.start([e],{getUserResponse:n,loginResponse:r}).then(function(){i.nike.unite.destroyAllViews(),i.nike.unite.on.userState.success.fire({stateKey:e})})["catch"](function(n){i.nike.unite.destroyAllViews(),i.nike.unite.on.userState.fail.fire({errorMessage:n.message,stateKey:e})})},function(n){i.nike.unite.destroyAllViews(),i.nike.unite.on.userState.fail.fire({errorMessage:n.message,stateKey:e})})},function(n){i.nike.unite.destroyAllViews(),i.nike.unite.on.userState.fail.fire({errorMessage:n.message,stateKey:e})})}function a(e,n){r.setCredential(n,null,null,function(){c.completeState(e)})}function u(e,t,i){if("string"!=typeof e||!e)throw new Error("state param must be a non-empty string");if("function"!=typeof t)throw new Error("onSuccess needs to be a function or undefined");if("function"!=typeof i)throw new Error("onError needs to be a function or undefined");var o=function(o){var s={user:o},a=function(e,r){n.getUserState(e,r).then(t)["catch"](i)},u=function(n){n?(s.access_token=n.access_token,a(e,s)):t(null)};r.getCredential(u,i)};r.getUserProfile(o,i)}var c=void 0;return c={completeState:s,completeStateWithCredential:a,getViewModel:o,getState:u}}),i("api",["lodash","apiSub/error","apiSub/social","apiSub/user","utilities"],function(e,n,t,i,r){"use strict";function o(){var n=r.namespace("nike.unite.api");n=e.assign(n,e.omit(s,"expose"))}var s=void 0;return s={error:n,social:t,expose:o,user:i}}),i("analyticsSub/appInitialization",["globals","settings","utilities"],function(e,n,i){"use strict";function r(){c=setTimeout(function(){u.reportNikeUniteInit("failure"),l=!0},1e4)}function o(r){if(a=t("networkSub/cors"),"success"!==r&&"failure"!==r)throw new Error("a status must be defined and valid");l===!0&&"success"===r&&(r="delayedSuccess"),c&&(clearTimeout(c),s());var o={clientId:n.experience.getClientId(),status:r,experienceVersion:e.nike.unite.version.experiences,appVersion:e.nike.unite.version.app,uxId:n.experience.getUxId(),isAndroid:n.platform.isAndroid(),isIOS:n.platform.isIOS(),isMobile:n.platform.isMobile(),isNative:n.platform.isNative(),timeElapsed:(new Date).getTime()-d},u=n.experience.getCorsServer()+"/appInitialization"+i.script.buildQueryString(o);a.get(u,function(){},function(){},function(){})}function s(){l=void 0}var a=void 0,u=void 0,c=void 0,l=void 0,d=(new Date).getTime();return u={reportNikeUniteInit:o,nikeUniteInitTimeout:r,reset:s}}),i("analyticsSub/omniture",[],function(){"use strict";function e(e,n){window.s.clearVars();for(var t in n)window.s[t]=n[t];return window.s?void window.s["track"===e?"t":"tl"]():void console.log("ERROR: Attempting to send omniture data before initialized.")}return{sendAsyncOmniPoint:e}}),i("analyticsSub/omniProxy",["lodash","analyticsSub/omniture"],function(e,n){"use strict";function t(e,n){a.push({type:e,data:n})}function i(i){return i=e.transform(i,function(e,n,t){e[t]=n.toLowerCase()}),u?void n.sendAsyncOmniPoint("track",i):void t("track",i)}function r(i){return i=e.transform(i,function(e,n,t){e[t]=n.toLowerCase()}),u?void n.sendAsyncOmniPoint("trackLink",i):void t("trackLink",i)}function o(){u=!0,e.each(a,function(e){"track"===e.type&&i(e.data),"trackLink"===e.type&&r(e.data)}),a=[]}function s(){a=[],u=!1}var a=[],u=!1;return{track:i,trackLink:r,clearQueue:o,reset:s}}),i("analyticsSub/handlers",["analyticsSub/omniProxy","settings","globals"],function(e,n,t){"use strict";function i(){Ne=[]}function r(e,n,i){var r={};return e&&(r[ve]=e),i&&(r[se]=i),r[ge]=t.window.location.href,r[he]=Te,n&&n.meta&&(n.meta.experienceId&&(r[ue]=n.meta.experienceId),n.meta.country&&(r[re]=n.meta.country),n.meta.language&&(r[ce]=n.meta.language),r[ie]=n.meta.mobile?"unified profile:mobile":"unified profile"),r[ae]=Ne.join("|"),Ne.push(e.split(">")[1]),r}function o(e,n,i,r){var o={};i=i||{};var s=le,a=void 0;e&&(o[le]=e),o[pe]="lnk_o",o[me]="page activity click",o[ve]=n,o[ge]=t.window.location.href,o[he]=Te,r&&(o[se]=r,a=r),i&&i.meta&&(i.meta.experienceId&&(o[ue]=i.meta.experienceId,s=s+","+ue),i.meta.country&&(o[re]=i.meta.country,s=s+","+re),i.meta.language&&(o[ce]=i.meta.language,s=s+","+ce),i.meta.mobileJoinOrLogin&&(o[be]=i.meta.mobileJoinOrLogin.toString(),s=s+","+be)),i.uuid&&("login:success"===e||"registration:success"===e||/^registration\:[a-zA-Z\s]+\:success$/.test(e))&&(o[ke]=i.uuid,s=s+","+ke),o[fe]=s,a&&(o[de]=a),o[ae]=Ne.join("|");var u=e||n.split(">")[1];return Ne.push(u),o}function s(e,n){if(n&&n.code){var t=""+n.code;n.messages&&n.messages.length>0&&n.messages[0].text&&(t=t+"_"+n.messages[0].text),a(e,oe,t)}}function a(e,n,t){var i=e[fe];"string"!=typeof t&&(t+=""),e[n]=t,i=i+","+n,e[fe]=i}function u(n,t){var i=nike.unite.views[t],r=i.placeholder,o=!1;r.addEventListener("keydown",function(){o||(o=!0,e.track(n))}),r.addEventListener("mousedown",function(){o||(o=!0,e.track(n))})}function c(e){var n=r("unified profile>login or register",e);u(n,"appLanding")}function l(e){var n=r("unified profile>login",e,"event12");u(n,"login")}function d(n){if(!(t.nike.unite.on.linkAccounts.success.fired>0)){var i=t.nike.unite.currentView(),r=void 0;r=i&&"reauth"===i.name?o("reauth:success",xe,n,"event5"):n.socialProvider?o("login:"+n.socialProvider.toLowerCase()+":success",Se,n,"event5"):n.loginContinuity?o("login:sso:success",Ie,n,"event5"):o("login:success",Se,n,"event5"),e.trackLink(r)}}function f(n){if(!(t.nike.unite.on.linkAccounts.fail.fired>0)){var i=t.nike.unite.currentView(),r=void 0;r=i&&"reauth"===i.name?o("reauth:fail",xe,n):n.socialProvider?o("login:"+n.socialProvider.toLowerCase()+":fail",Se,n):n.loginContinuity?o("login:sso:fail",Ie,n):o("login:fail",Se,n),s(r,n),e.trackLink(r)}}function p(n){var t=o("login:social network:"+n.providerName,Se,n);e.trackLink(t)}function m(n){var t=o("login:join now",Se,n);e.trackLink(t)}function v(n){var t=o("login:forgot password",Se,n);e.trackLink(t)}function g(n){var t=void 0;t=n.meta.mobile?o("links accounts:footer:"+n.innerHTML,ye,n):o("login:footer:"+n.innerHTML,Se,n),e.trackLink(t)}function h(n){var t=o("login:"+n.providerName+":cancel",Se,n);e.trackLink(t)}function k(e){var n=r("unified profile>sso",e,"event12");u(n,"loginContinuity")}function b(n){var t=o("login:sso:notme",Ie,n);e.trackLink(t)}function w(e){var n=r(we,e,"event11");u(n,"emailOnlyJoin")}function y(n){var t=o("email only registration:success",we,n,"event1");e.trackLink(t)}function S(n){var t=o("email only registration:fail",we,n);s(t,n),e.trackLink(t)}function I(e){var n=r("unified profile>registration",e,"event11");u(n,"join")}function E(n){if(!(t.nike.unite.on.socialJoin.success.fired>0)){var i="event1";n.joinModel&&n.joinModel.emailSignup&&(i="event1,event3");var r=o("registration:success",Ee,n,i);e.trackLink(r)}}function C(n){if(!(t.nike.unite.on.socialJoin.fail.fired>0)){var i=o("registration:fail",Ee,n);s(i,n),e.trackLink(i)}}function L(n){var t=void 0;t=n.meta.mobile?o("registration:social:footer:"+n.innerHTML,Ue,n):o("registration:footer:"+n.innerHTML,Ee,n),e.trackLink(t)}function x(n){var t=o("registration:social network:"+n.providerName,Ee,n);e.trackLink(t)}function A(n){var t="duplicateEmailSignIn"===n.name?"already a member:":"",i=o("registration:"+t+"sign in",Ee,n);e.trackLink(i)}function U(n){var t=o("registration:"+n.providerName+":cancel",Ee,n);e.trackLink(t)}function T(e){var n=r("unified profile>forgot password",e);u(n,"resetPassword")}function _(n){var t=o("forgot password:reset success",Ae,n);e.trackLink(t)}function N(n){var t=o("forgot password:fail",Ae,n);e.trackLink(t)}function P(e){var n=r(_e,e);u(n,"updatePassword")}function M(n){var t=o("update password:success",_e,n);e.trackLink(t)}function R(n){var t=o("update password:fail",_e,n);s(t,n),e.trackLink(t)}function O(e){var n=e&&e.providerName?e.providerName.toLowerCase():"social not recognized",t=r("unified profile>link accounts:"+n,e);u(t,"link")}function B(n){var t=o("link accounts:"+n.socialProvider+":success",ye,n);e.trackLink(t)}function V(n){var t=o("link accounts:"+n.socialProvider+":fail",ye,n);e.trackLink(t)}function D(n){var t=o("link override:"+n.socialProvider+":success",ye,n);e.trackLink(t)}function j(n){var t=o("link override:"+n.socialProvider+":fail",ye,n);e.trackLink(t)}function F(n){var t=o("link accounts:forgot password",ye,n);e.trackLink(t)}function H(e){var n=r(xe,e);u(n,"reauth")}function J(n){var t=o("reauth:forgot password",xe,n);e.trackLink(t)}function z(e){var n=e&&e.providerName?e.providerName.toLowerCase():"social not recognized",t=r("unified profile>registration:"+n,e,"event11");u(t,"socialJoin")}function G(n){var t=n&&n.providerName?n.providerName.toLowerCase():"social not recognized",i=o("registration:"+t+":success",Ue,n,"event1");e.trackLink(i)}function K(n){var t=n&&n.providerName?n.providerName.toLowerCase():"social not recognized",i=o("registration:"+t+":fail",Ue,n);s(i,n),e.trackLink(i)}function W(){}function q(e){var n=r("unified profile>verification",e);u(n,"progressive")}function Y(n){var t=n.key?"progressive:"+n.key+":success":"verify:send code",i=o(t,Le,n);e.trackLink(i)}function Q(n){var t=n.key?"progressive:"+n.key+":fail":null,i=o(t,Le,n);n&&n.errorMessage&&a(i,oe,n.errorMessage),e.trackLink(i)}function Z(n){var t="userState:"+n.stateKey+":success",i=o(t,Le,n);e.trackLink(i)}function X(n){var t="userState:"+n.stateKey+":fail",i=o(t,Le,n);a(i,oe,n.errorMessage),e.trackLink(i)}function $(e){var n=r("unified profile>verification enter code",e);u(n,"mobileVerificationCode")}function ee(n){var t=o("verify:submit",Ce,n);e.trackLink(t)}function ne(n){var t=o(null,Ce,n);n&&n.errorMessage&&a(t,oe,n.errorMessage),e.trackLink(t)}function te(e,n){return function(t){try{n.call(this,t)}catch(i){console.log('Analytics caught exception in function "'+e+'": ',i)}}}var ie="prop2",re="prop14",oe="prop13",se="events",ae="eVar88",ue="prop21",ce="prop15",le="prop3",de="linkTrackEvents",fe="linkTrackVars",pe="pe",me="pev2",ve="pageName",ge="prop26",he="prop17",ke="prop50",be="prop80",we="unified profile>email only registration",ye="unified profile>link accounts",Se="unified profile>login",Ie="unified profile>sso",Ee="unified profile>registration",Ce="unified profile>verification enter code",Le="unified profile>verification",xe="unified profile>reauth",Ae="unified profile>forgot password",Ue="unified profile>registration:social",Te="unified profile",_e="unified profile>update password",Ne=[];return{appLandingView:te("appLandingView",c),emailOnlyJoinView:te("emailOnlyJoinView",w),emailOnlyJoinSuccess:te("emailOnlyJoinSuccess",y),emailOnlyJoinFail:te("emailOnlyJoinFail",S),loginView:te("loginView",l),loginSuccess:te("loginSuccess",d),loginFail:te("loginFail",f),loginSocialLink:te("loginSocialLink",p),loginJoinNowButton:te("_loginJoinNowButton",m),loginResetPasswordLink:te("loginResetPasswordLink",v),loginFooterLink:te("loginFooterLink",g),loginSocialCancel:te("loginSocialCancel",h),loginContinuityView:te("loginContinuityView",k),loginContinuityNotMeLink:te("loginContinuityNotMeLink",b),joinView:te("joinView",I),joinSuccess:te("joinSuccess",E),joinFail:te("joinFail",C),joinFooterLink:te("joinFooterLink",L),joinSocialLink:te("joinSocialLink",x),joinAlreadyAMemberLink:te("joinAlreadyAMemberLink",A),joinSocialCancel:te("joinSocialCancel",U),resetPasswordView:te("resetPasswordView",T),resetPasswordSuccess:te("resetPasswordSuccess",_),resetPasswordFail:te("resetPasswordFail",N),updatePasswordView:te("updatePasswordView",P),updatePasswordSuccess:te("updatePasswordSuccess",M),updatePasswordFail:te("updatePasswordFail",R),linkAccountsView:te("linkAccountsView",O),linkAccountsSuccess:te("linkAccountsSuccess",B),linkOverrideSuccess:te("linkOverrideSuccess",D),linkOverrideFail:te("linkOverrideFail",j),linkAccountsFail:te("linkAccountsFail",V),linkAccountsResetPasswordLink:te("linkAccountsResetPasswordLink",F),reauthView:te("reauthView",H),reauthResetPasswordLink:te("reauthResetPasswordLink",J),socialJoinView:te("socialJoinView",z),socialJoinSuccess:te("socialJoinSuccess",G),socialJoinFail:te("socialJoinFail",K),socialJoinFooterLink:te("socialJoinFooterLink",W),progressiveProfileView:te("progressiveProfileView",q),progressiveProfileSuccess:te("progressiveProfileSuccess",Y),progressiveProfileFail:te("progressiveProfileFail",Q),userStateSuccess:te("userStateSuccess",Z),userStateFail:te("userStateFail",X),mobileVerificationView:te("mobileVerificationView",$),mobileVerificationSuccess:te("mobileVerificationSuccess",ee),mobileVerificationFail:te("mobileVerificationFail",ne),reset:i}}),i("analytics",["globals","lodash","settings","utilities","analyticsSub/appInitialization","analyticsSub/handlers","analyticsSub/omniProxy"],function(e,n,t,i,r,o,s){"use strict";function a(){d.registerHandlers(),r.nikeUniteInitTimeout()}function u(){var e=window.nike;e.unite.on.appLanding.view.addHandler(o.appLandingView),e.unite.on.emailOnlyJoin.view.addHandler(o.emailOnlyJoinView),e.unite.on.emailOnlyJoin.success.addHandler(o.emailOnlyJoinSuccess),e.unite.on.emailOnlyJoin.fail.addHandler(o.emailOnlyJoinFail),e.unite.on.login.view.addHandler(o.loginView),e.unite.on.login.success.addHandler(o.loginSuccess),e.unite.on.login.fail.addHandler(o.loginFail),e.unite.on.login.socialLink.addHandler(o.loginSocialLink),e.unite.on.login.resetPasswordLink.addHandler(o.loginResetPasswordLink),e.unite.on.login.joinNowButton.addHandler(o.loginJoinNowButton),e.unite.on.login.footerLink.addHandler(o.loginFooterLink),e.unite.on.login.socialCancel.addHandler(o.loginSocialCancel),e.unite.on.loginContinuity.view.addHandler(o.loginContinuityView),e.unite.on.loginContinuity.notMeLink.addHandler(o.loginContinuityNotMeLink),e.unite.on.join.view.addHandler(o.joinView),e.unite.on.join.success.addHandler(o.joinSuccess),e.unite.on.join.fail.addHandler(o.joinFail),e.unite.on.join.footerLink.addHandler(o.joinFooterLink),e.unite.on.join.socialLink.addHandler(o.joinSocialLink),e.unite.on.join.alreadyAMemberLink.addHandler(o.joinAlreadyAMemberLink),e.unite.on.join.socialCancel.addHandler(o.joinSocialCancel),e.unite.on.resetPassword.view.addHandler(o.resetPasswordView),e.unite.on.resetPassword.success.addHandler(o.resetPasswordSuccess),e.unite.on.resetPassword.fail.addHandler(o.resetPasswordFail),e.unite.on.updatePassword.view.addHandler(o.updatePasswordView),e.unite.on.updatePassword.success.addHandler(o.updatePasswordSuccess),e.unite.on.updatePassword.fail.addHandler(o.updatePasswordFail),e.unite.on.linkAccounts.view.addHandler(o.linkAccountsView),e.unite.on.linkAccounts.success.addHandler(o.linkAccountsSuccess),e.unite.on.linkAccounts.fail.addHandler(o.linkAccountsFail),e.unite.on.linkOverride.success.addHandler(o.linkOverrideSuccess),e.unite.on.linkOverride.fail.addHandler(o.linkOverrideFail),e.unite.on.linkAccounts.resetPasswordLink.addHandler(o.linkAccountsResetPasswordLink),e.unite.on.socialJoin.view.addHandler(o.socialJoinView),e.unite.on.socialJoin.success.addHandler(o.socialJoinSuccess),e.unite.on.socialJoin.fail.addHandler(o.socialJoinFail),e.unite.on.progressiveProfile.view.addHandler(o.progressiveProfileView),e.unite.on.progressiveProfile.success.addHandler(o.progressiveProfileSuccess),e.unite.on.progressiveProfile.fail.addHandler(o.progressiveProfileFail),e.unite.on.userState.success.addHandler(o.userStateSuccess),e.unite.on.userState.fail.addHandler(o.userStateFail),e.unite.on.mobileVerification.view.addHandler(o.mobileVerificationView),e.unite.on.mobileVerification.success.addHandler(o.mobileVerificationSuccess),e.unite.on.mobileVerification.fail.addHandler(o.mobileVerificationFail),e.unite.on.reauth.view.addHandler(o.reauthView),e.unite.on.reauth.resetPasswordLink.addHandler(o.reauthResetPasswordLink)}function c(){var n="production"===t.experience.getEnvironment();t.platform.isNative()?(e.window.s_account=n?"nikeprofileprod":"nikeprofiledev",i.script.load(n?"https://web.nike.com/neo/unite-native/neo.js":"https://test-web.nike.com/neo/unite-native/neo.js",l,"nike-unite-omniture")):l()}function l(){if(e.window.s)s.clearQueue(),e.window.s.useForcedLinkTracking=0;else var n=0,t=e.window.setInterval(function(){n++,e.window.s?(s.clearQueue(),e.window.clearInterval(t),e.window.s.useForcedLinkTracking=0):60===n&&(e.window.clearInterval(t),console.log("Missing Adobe Analytics script. Please contact the Unite team."))},500)}var d={appInitialization:r,loadOmniture:c,registerHandlers:u,start:a};return d}),i("eventsSub/resultBuilder",["settings"],function(e){"use strict";function n(){var e={meta:t()};return e}function t(){var n={language:e.localization.getLanguage(),country:e.localization.getCountry(),experienceId:e.experience.getUxId(),mobile:e.platform.isMobile()};return n}return{buildBaseResult:n}}),i("eventsSub/event",["lodash","utilities","settings","eventsSub/resultBuilder"],function(e,n,t,i){"use strict";function r(e){var t=e.lastIndexOf("."),i=e.substr(0,t);i=i.length>0?f+"."+i:f;var r=e.substr(t+1),c=n.namespace(i)[r]={fired:0,handlers:[],name:i+"."+r,addHandler:function(e){return o(c,e)},getHandler:function(e){return s(c,e)},removeHandler:function(e){return a(c,e)},removeHandlers:function(){u(c)},fire:function(e){l(c,e)}};c.handlers.add=function(e){return c.addHandler(e)}}function o(e,t){var i=n.generateUuid();return e.handlers.push({key:i,"function":t}),i}function s(n,t){var i=e.find(n.handlers,function(e){return e.key===t});return i?i["function"]:null}function a(n,t){var i=e.remove(n.handlers,function(e){return e.key===t});return i.length>0?i[0]["function"]:null}function u(e){e.handlers=[]}function c(n,t){n.fired++,t=t||{};var r=i.buildBaseResult();e.each(e.clone(n.handlers),function(n){"function"==typeof n["function"]&&n["function"](e.merge(r,t))})}function l(e,n){m?c(e,n):p.push(function(){c(e,n)})}function d(){p=[]}var f="nike.unite.on",p=[],m=!1;return window.addEventListener("nikeUniteInit",function(){m=!0,0!==p.length&&(e.each(p,function(e){setTimeout(function(){e()})}),p=[])}),{create:r,reset:d}}),i("events",["eventsSub/event","eventsSub/resultBuilder"],function(e,n){"use strict";function t(){e.create("appLanding.view"),e.create("login.view"),e.create("login.fail"),e.create("login.success"),e.create("login.socialLink"),e.create("login.joinNowButton"),e.create("login.resetPasswordLink"),e.create("login.footerLink"),e.create("login.socialCancel"),e.create("partnerConnect.view"),e.create("partnerLogin.fail"),e.create("partnerLogin.success"),e.create("loginContinuity.view"),e.create("loginContinuity.notMeLink"),e.create("join.view"),e.create("join.fail"),e.create("join.success"),e.create("join.footerLink"),e.create("join.socialLink"),e.create("join.alreadyAMemberLink"),e.create("join.socialCancel"),e.create("emailOnlyJoin.view"),e.create("emailOnlyJoin.fail"),e.create("emailOnlyJoin.success"),e.create("partnerJoin.fail"),e.create("partnerJoin.success"),e.create("reauth.view"),e.create("reauth.resetPasswordLink"),e.create("resetPassword.view"),e.create("resetPassword.fail"),e.create("resetPassword.success"),e.create("updatePassword.view"),e.create("updatePassword.fail"),e.create("updatePassword.success"),e.create("userState.fail"),e.create("userState.success"),e.create("linkAccounts.view"),e.create("linkAccounts.success"),e.create("linkAccounts.fail"),e.create("linkOverride.success"),e.create("linkOverride.fail"),e.create("linkAccounts.resetPasswordLink"),e.create("socialJoin.view"),e.create("socialJoin.success"),e.create("socialJoin.fail"),e.create("progressiveProfile.view"),e.create("progressiveProfile.success"),e.create("progressiveProfile.fail"),e.create("isLegallyCompliantState.view"),e.create("isMobileVerifiedState.view"),e.create("verifyMobileCode.view"),e.create("mobileVerification.view"),e.create("mobileVerification.success"),e.create("mobileVerification.fail"),e.create("experience.load.success"),e.create("gigya.load.success"),e.create("facebooksdk.load.success"),e.create("app.load.success"),e.create("logout"),e.create("tokenRefresh")}return t(),{resultBuilder:n,reset:t}}),i("componentsSub/helpers/state",[],function(){"use strict";function e(e){e.classList.remove("blurred"),e.classList.add("focused")}function n(e){e.classList.remove("focused"),e.classList.add("blurred")}function t(e){e.classList.remove("submitted"),e.classList.add("submitting")}function i(e){e.classList.remove("submitting"),e.classList.add("submitted")}function r(){}function o(){}function s(e){e.classList.add("valid"),e.classList.remove("invalid"),e.classList.remove("validating");var n=e.querySelector(".error");n&&(n.innerHTML="")}function a(e,n){e.classList.add("invalid"),e.classList.remove("valid"),e.classList.remove("validating"),n&&(e.querySelector(".error").innerHTML=n,e.querySelector(".tip").innerHTML=n)}function u(e){e.classList.remove("valid"),e.classList.remove("invalid"),e.classList.add("validating")}function c(e){e.classList.add("selected")}function l(e){e.classList.remove("selected")}function d(e){e.classList.add("empty")}function f(e){e.classList.remove("empty")}return{onFocus:e,onBlur:n,onSubmit:t,onSubmitted:i,onKeydown:r,onKeyup:o,onValid:s,onInvalid:a,onValidating:u,onSelected:c,onDeselected:l,onEmpty:d,onNotEmpty:f}});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i("componentsSub/helpers/validators",["lodash","globals","settingsSub/mappings","utilities"],function(e,n,t,i){"use strict";function o(n,t){var r=new RegExp(t.value.pattern),o=i.deepKeys(n),s=[],a=!0;return e.each(o,function(t){if(r.test(t)){var i=e.get(n,t);if("string"!=typeof i)return;if(i=i.trim(),s.indexOf(i)>=0)return a=!1,!1;s.push(i)}}),a}function s(t,i){var r=n.document.querySelector('[name="'+i.lookup+'"]');if(!r||""===e.trim(r.value))return!0;switch(i.type){case"equal":return u(t,r);case"exclude":return c(t,r);case"notequal":return g(t,r);case"validStateForCountry":return w(t,r);case"validCountryForState":return y(t,r);default:throw new Error("Unsupported crossField type. ("+i.type+")")}}function a(e,n){e="string"==typeof e?e:"";var t=e.split("-");n.value=n.value||{};var i=new Date(parseInt(t[0],10),n.value.zeroIndexedMonth?parseInt(t[1],10):parseInt(t[1],10)-1,parseInt(t[2],10)),r=new Date,o=new Date(r.getFullYear(),r.getMonth(),r.getDate());return n.value.required===!1&&!e||!isNaN(i)&&o>i}function u(n,t){return e.trim(n)===e.trim(t.value)}function c(e,n){return n.value.indexOf(e)<0}function l(e,n){return+e>=n.value.min&&+e<=n.value.max}function d(e,n){return null===e||void 0===e?!0:!f(e,n)}function f(n,t){if(null===n||void 0===n)return!0;e.each(t.value,function(n,i){t.value[i]=e.trim(n.toLowerCase())});var i="undefined"==typeof n?"undefined":r(n);
return"object"===i&&e.isArray(n)&&(i="array"),t.value.indexOf(i)>=0}function p(e){var n=e.replace(/\D/g,"");return n.length>=9&&n.length<=15}function m(e,n){var t=new RegExp(n.value.pattern,n.value.suffix||"");return n.value.required===!1&&!e||t.test(e)}function v(n,t){if(null===n||void 0===n||!n.ulrValidateObject)return!0;if("object"!==("undefined"==typeof n?"undefined":r(n)))return!1;var i=!0;return e.each(t.value,function(r,o){return e.each(r,function(r){var s=r.name;return i=S[s](e.get(n,o),r),i===!1?(t.errorMessage=r.errorMessage,!1):void 0}),i}),i}function g(n,t){return e.trim(n)!==e.trim(t.value)}function h(e,n){var t=new RegExp(n.value.pattern);return!t.test(e)}function k(n){return""!==e.trim(n)}function b(n,t){return n=e.trim(n),t.value.required===!1&&!n||n.length>=t.value.min&&n.length<=t.value.max}function w(n,i){var r=e.trim(n).toUpperCase(),o=e.trim(i.value).toUpperCase(),s=t.states[o]||/.*/;return s.test(r)}function y(n,i){var r=e.trim(n).toUpperCase(),o=e.trim(i.value).toUpperCase(),s=t.states[r]||/.*/;return s.test(o)}var S={areValuesUniqueForPath:o,crossField:s,dateInPast:a,equal:u,exclude:c,inRange:l,isNotOfType:d,isOfType:f,isPhoneNumber:p,matchPattern:m,nestedObject:v,notEqual:g,notMatchPattern:h,required:k,stringLength:b,validCountryForState:y,validStateForCountry:w};return S}),i("componentsSub/helpers/validation",["lodash","./state","./validators"],function(e,n,t){"use strict";function i(i,o,s,a){var u=!0,c=!1,l=null;return n.onValidating(i),e.each(o,function(n){e.includes(n.events,a)&&n.keys&&n.keys.length>0&&(c=!0,r(n.keys,i,"valid"))}),e.each(o,function(n){if(!e.includes(n.events,a))return!0;var o=t[n.name](s,n);o=n.invertResult?!o:o,o||(r(n.keys,i,"invalid"),l=l||n.errorMessage,u=!1)}),u?n.onValid(i,s):n.onInvalid(i,l),u}function r(t,i,r){e.each(t,function(e){var t=i.querySelector("."+e);t&&("valid"===r&&n.onValid(t),"invalid"===r&&n.onInvalid(t))})}return{validate:i}}),i("componentsSub/helpers/dom",["lodash","globals","settings","utilities","./state","./validation"],function(e,n,t,i,r,o){"use strict";function s(e){var n=void 0;n=e.tagName?e:e.target;var t=i.parentNodes.getParentComponent(n);t&&(n.value?r.onNotEmpty(t):r.onEmpty(t))}function a(){var t=[],i=n.nike.unite.currentView().view.components;return e.each(i,function(i){if(e.get(i,"model.rules")){var r=n.document.getElementById(i.model.id),s="function"==typeof i.validate?i.validate():o.validate(r,i.model.rules,i.getValue(),"submit");s||t.push(n.document.getElementById(i.model.inputId))}}),t}function u(t){var i=n.document.querySelectorAll(".nike-unite");e.each(i,function(e){e.classList.add(t)})}return{checkIfEmpty:s,getInvalidElements:a,addClassToPlaceholders:u}}),i("componentsSub/helpers/models",["lodash"],function(e){"use strict";function n(n,t){var i=e.merge(n,t,function(n,t){return e.isArray(n)?("string"==typeof t&&(t=t.split(" ")),e.union(n,t)):void 0});return i.classes=i.classes.join(" "),i}return{merge:n}}),i("componentsSub/helpers/_module",["componentsSub/helpers/dom","componentsSub/helpers/models","componentsSub/helpers/state","componentsSub/helpers/validation"],function(e,n,t,i){"use strict";return{dom:e,models:n,state:t,validate:i.validate}}),i("templates",["lodash"],function(e){var n={actionButton:function(e){return'<div id="'+e.id+'" class="'+e.classes+' nike-unite-component">\n  <input id="'+e.inputId+'" type="button" value="'+e.label+'"/>\n</div>'},actionLink:function(e){return'<div id="'+e.id+'" class="'+e.classes+'">\n  '+e.label+'\n  <a id="'+e.linkId+'" href="javascript:void(0);">'+e.linkText+"</a>\n</div>"},checkbox:function(e){return'<div id="'+e.id+'" class="'+e.classes+' nike-unite-component">\n  <div class="shim"></div>\n  <div class="error"></div>\n  <input id="'+e.inputId+'" type="checkbox" name="'+e.dataField+'" data-componentname="'+e.name+'" '+e.checked+'/>\n  <label for="'+e.inputId+'" class="checkbox">'+e.label+'</label>\n  <div class="tip">'+e.tip+"</div>\n</div>"},coppa:function(e){return'<div id="'+e.id+'" class="'+e.classes+' nike-unite-component"></div>'},dateInput:function(e){return'<div id="'+e.id+'" class="'+e.classes+' nike-unite-component">\n  <div class="shim"></div>\n  <div class="error"></div>\n  <label for="'+e.inputId+'">'+e.label+'</label>\n  <input id="'+e.inputId+'" type="date" placeholder="'+e.label+'" value="'+e.value+'" name="'+e.dataField+'" data-componentname="'+e.name+'" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" data-ddlabel="'+e.ddLabel+'" data-mmlabel="'+e.mmLabel+'" data-yyyylabel="'+e.yyyyLabel+'"/>\n  <div class="tip">'+e.tip+"</div>\n</div>"},emailAddress:function(e){return'<div id="'+e.id+'" class="'+e.classes+' nike-unite-component">\n  <div class="shim"></div>\n  <div class="error"></div>\n  <label for="'+e.inputId+'">'+e.label+'</label>\n  <input id="'+e.inputId+'" type="'+e.keyboardType+'" placeholder="'+e.placeholder+'" value="'+e.value+'" name="'+e.dataField+'" data-componentname="'+e.name+'" '+e.focus+' autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />\n  <div class="tip">'+e.tip+'</div>\n  <div class="duplicate-email" id="'+e.duplicateEmailId+'" style="display:none">'+e.duplicateEmailMessage+"</div>\n</div>"},errorMessage:function(n){return'<div id="'+n.id+'" class="'+n.classes+' nike-unite-component">\n  <ul id='+n.inputId+">\n    "+e.map(n.messages,function(e,n){return"\n      <li>"+e.text+"</li>\n    "}).join("")+"\n  </ul>\n</div>"},errorPanel:function(n){return'<div id="'+n.id+'" class="'+n.classes+' nike-unite-component">\n    <span class="nike-unite-h1-no-image">'+n.title+"</span>\n      <ul>\n      "+e.map(n.messages,function(e,n){return"\n        <li>"+e.text+"</li>\n      "}).join("")+'\n      </ul>\n    <div id="'+n.hiddenId+'" class="nike-unite-error-code" style="display: none;">'+n.hiddenCode+" "+n.hiddenResult+'</div>\n    <div id="'+n.dismissId+'" class="nike-unite-error-close">\n      <input type="button" value="'+n.dismissMessage+'" />\n    </div>\n</div>'},form:function(n){return'<form id="'+n.id+'" class="nike-unite-form" method="post" action="javascript:;" onsubmit="return false;">\n  '+e.map(n.hiddenFields,function(e,n){return'\n    <input type="hidden" name="'+n+'" value="'+e+'" data-componentname="'+n+'" />\n  '}).join("")},genderButtons:function(n){return'<div id="'+n.id+'" class="'+n.classes+' nike-unite-component">\n  <div class="shim"></div>\n  <div class="error"></div>\n  <label for="'+n.inputId+'">'+n.label+'</label>\n\n  <input type="hidden" id="'+n.inputId+'" value="'+n.value+'" name='+n.name+' data-componentname="'+n.dataField+'"/>\n\n  <ul data-componentname="'+n.name+'">\n    '+e.map(n.options,function(e,n){return'\n      <li id="'+e.listItemId+'" class="'+e.cssClass+'">\n        <input type="button"/>\n        <span>'+e.label+"</span>\n      </li>\n    "}).join("")+'\n  </ul>\n  <div class="tip">'+n.tip+"</div>\n</div>"},hidden:function(e){return'<input id="'+e.inputId+'" type="hidden" name="'+e.key+'" value="'+e.value+'" data-componentname="'+e.name+'" />'},internationalMobileNumber:function(n){return'<div id="'+n.id+'" class="'+n.classes+" nike-unite-component "+n.disabled+'">\n  <div class="shim"></div>\n  <div class="error"></div>\n\n  <input type="hidden" class="sanitized-mobile-number" style="display: none;" value="'+n.sanitizedMobileNumberValue+'"" name="sanitizedMobileNumber" data-componentname="'+n.name+'"></input>\n  \n  <label for="'+n.inputId+'">'+n.label+'</label>\n  <div class="mobileNumber-div">\n    <input id="'+n.inputId+'" type="'+n.keyboardType+'" placeholder="'+n.label+'" name="'+n.name+'" data-componentname="phoneNumber" value="'+n.value+'" '+n.focus+' autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />\n\n    <div class="'+n.selectDivClasses+" "+n.disabled+'" id="'+n.selectDivId+'">\n      <span id="'+n.spanCodeId+'" class="'+n.spanCodeClasses+'"></span>\n    </div>\n\n    <select id="'+n.selectId+'" '+n.disabled+">\n      "+e.map(n.supportedList,function(e,n){return'\n        <option value="'+e.country+'" data-code="+'+e.code+'">'+e.text+" +"+e.code+"</option>\n      "}).join("")+'\n    </select>\n  </div>\n\n  <div class="tip">'+n.tip+"</div>\n</div>"},loginContinuityDialog:function(e){return'<div id="'+e.id+'" class="'+e.classes+' nike-unite-component">\n  <div class="avatar-container">\n    <img class="avatar" src="'+e.avatarImage+'" alt="" />\n  </div>\n  <input id="'+e.continueButtonId+'" type="button" value="'+e.continueText+'" />\n  '+e.joinTerms+'\n  <a href="javascript:;" class="notMe" id="'+e.notMeLinkId+'">\n    '+e.notMeText+'\n  </a>\n  <div class="error"></div>\n</div>'},passwordCreateInput:function(e){return'<div id="'+e.id+'" class="'+e.classes+' nike-unite-component">\n  <div class="shim"></div>\n  <div class="error"></div>\n  <label for="'+e.inputId+'">'+e.label+'</label>\n  <input id="'+e.inputId+'" type="'+e.keyboardType+'" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="'+e.label+'" value="'+e.value+'" name="'+e.dataField+'" data-componentname="'+e.name+'" maxlength="36" />\n  <button id="'+e.buttonId+'" type="button" tabindex="-1" class="nike-unite-reveal-button">'+e.buttonLabel+'</button>\n  <div class="tip">'+e.tip+'</div>\n  <div class="nike-unite-password-complexity">\n    <div class="charLength">'+e.labels.charLength+'</div>\n    <div class="upperCase">'+e.labels.upperCase+'</div>\n    <div class="lowerCase">'+e.labels.lowerCase+'</div>\n    <div class="number">'+e.labels.number+"</div>\n  </div>\n</div>"},select:function(n){return'<div id="'+n.id+'" class="'+n.classes+' nike-unite-component" style="'+n.style+'">\n  <div class="shim"></div>\n  <div class="error"></div>\n  <label for="'+n.selectId+'">'+n.label+'</label>\n  <select name="'+n.name+'" data-componentname="'+n.name+'" id="'+n.selectId+'">\n    '+e.map(n.options,function(e,n){return'\n      <option value="'+e.value+'" '+e.selectedValue+' class="'+e.cssClass+'">'+e.label+"</option>\n    "}).join("")+'\n  </select>\n  <div class="tip">'+n.tip+"</div>\n</div>"},socialLinks:function(n){return'<div id="'+n.id+'" class="'+n.classes+' nike-unite-component">\n  <div class="error" style="display: none;"></div>\n  '+e.map(n.providers,function(e,n){return'\n    <a href="javascript:void(0)" id="'+e.inputId+'" class="nike-unite-social-login-'+e.name+'">'+e.linkText+"</a>\n  "}).join("")+'\n  <span class="conjunction">'+n.conjunction+"</span>\n</div>"},submitButton:function(e){return'<div id="'+e.id+'" class="'+e.classes+' nike-unite-component">\n  <input id="'+e.inputId+'" type="button" value="'+e.label+'"/>\n</div>'},textInput:function(e){return'<div id="'+e.id+'" class="'+e.classes+' nike-unite-component">\n  <div class="shim"></div>\n  <div class="error"></div>\n  <label for="'+e.inputId+'">'+e.label+'</label>\n  <input id="'+e.inputId+'" type="'+e.keyboardType+'" placeholder="'+e.label+'" value="'+e.value+'" name="'+e.dataField+'" data-componentname="'+e.name+'" '+e.focus+' autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />\n  <div class="tip">'+e.tip+'</div>\n  <div class="help '+e.hasHelp+'">'+e.help+"</div>\n</div>"},verifyMobileNumber:function(n){return'<div id="'+n.componentId+'" class="'+n.classes+'">\n\n  <div class="sendCode" id="'+n.sendDivId+'">\n\n    <label for="'+n.phoneInputId+'">'+n.sendCodePhoneNumberInputLabel+'</label>\n    <div class="mobileNumber-div">\n      <div id="'+n.countryCodeDivId+'" class="countryFlag '+n.disabled+'">\n        <span class="code"></span>\n      </div>\n\n      <select id="'+n.countrySelectId+'" class="country" '+n.disabled+">\n\n        "+e.map(n.supportedList,function(e,n){return'\n          <option value="'+e.country+'">'+e.text+" +"+e.code+"</option>\n        "}).join("")+'\n\n      </select>\n\n      <input id="'+n.phoneInputId+'"\n        class="phoneNumber"\n        type="tel"\n        placeholder="'+n.sendCodePhoneNumberInputLabel+'"\n        data-componentname="phoneNumber"\n        value="'+n.phoneValue+'"\n        autocomplete="off"\n        autocorrect="off"\n        autocapitalize="off"\n        spellcheck="false"\n      />\n    </div>\n\n    <input id="'+n.sendButtonId+'" type="button" class="sendCodeButton" value="'+n.sendCodeButtonLabel+'" />\n\n    <div class="error"></div>\n    <div class="tip"></div>\n\n  </div>\n\n  <div class="verifyCode" id="'+n.verifyDivId+'">\n    <label for="'+n.verifyCodeInputId+'">'+n.verifyCodeCodeInputLabel+'</label>\n    <input id="'+n.verifyCodeInputId+'"\n      class="code"\n      type="number"\n      value="'+n.verifyCodeValue+'"\n      placeholder="'+n.verifyCodeCodeInputLabel+'"\n      autocomplete="off"\n      autocorrect="off"\n      autocapitalize="off"\n      spellcheck="false"\n    />\n\n    <div class="error"></div>\n    <div class="tip"></div>\n\n  </div>\n\n  <div id="'+n.sendConfirmationMsgDivId+'" class="sendCodeSubmissionConfirmation" style="display: none;"></div>\n\n</div>'},viewLink:function(e){return'<a href="javascript:void(0)" id="'+e.inputId+'" class="nike-unite-link-'+e.name+'">'+e.label+"</a>"},viewNavigation:function(e){return'<div id="'+e.id+'" class="'+e.classes+' nike-unite-component">\n  <input id="'+e.backId+'" type="button" value="'+e.backLabel+'"/>\n  <input id="'+e.nextId+'" type="button" value="'+e.nextLabel+'"/>\n</div>'}};return n}),i("componentsSub/actionButton",["componentsSub/helpers/_module","globals","lodash","templates","utilities"],function(e,n,t,i,r){"use strict";function o(t,o){var s={id:r.generateUuid(),inputId:r.generateUuid(),classes:["nike-unite-action-button",o],name:o,value:""};t=e.models.merge(s,t);var a=i.actionButton(t);return{html:a,handlers:[{target:t.inputId,event:"click",handler:function(){if(t.view){var e=void 0,i=n.nike.unite.currentView().view;if(i.placeholder){var o=i.placeholder.querySelector(".nike-unite-form");o&&(e=r.formData.getFormDataByComponent(o))}if("loginCreateButton"===t.name&&n.nike.unite.on.login.joinNowButton.fire(),i.eventHandler){var s=t.action||"render";i.eventHandler(s,t.view)}else t.action&&"skip"===t.action?i.submitHandler():(n.nike.unite.destroyAllViews(),n.nike.unite.views[t.view].render(e))}}}]}}return o}),i("componentsSub/actionLink",["componentsSub/helpers/_module","globals","lodash","templates","utilities"],function(e,n,t,i,r){"use strict";function o(t,o,s){var a={id:r.generateUuid(),linkId:r.generateUuid(),name:o,value:"",classes:["nike-unite-component","action-link"]};t=e.models.merge(a,t);var u=i.actionLink(t);return{html:u,handlers:[{target:t.linkId,event:"click",handler:function(){if(n.nike.unite.views[t.view]){if("forgotPassword"===t.name){var e=s.model&&s.model.src?s.model.src:"";switch(e){case"nike-unite-login-view":n.nike.unite.on.login.resetPasswordLink.fire();break;case"nike-unite-reauth-view":n.nike.unite.on.reauth.resetPasswordLink.fire();break;case"nike-unite-link-view":n.nike.unite.on.linkAccounts.resetPasswordLink.fire()}}"login"===t.view&&["duplicateEmailSignIn","currentMemberSignIn"].indexOf(t.name)>=0&&n.nike.unite.on.join.alreadyAMemberLink.fire(t);var i=void 0,o=void 0,a=n.nike.unite.currentView().view.placeholder;if(a){var u=a.querySelector(".nike-unite-form");u&&(i=r.formData.getFormDataByComponent(u),o={hiddenFields:{network:i.network?i.network.value:"",networkEmail:i.networkEmail?i.networkEmail.value:"",networkToken:i.networkToken?i.networkToken.value:"",networkUserId:i.networkUserId?i.networkUserId.value:""}})}var c=n.nike.unite.currentView().view;if(c.eventHandler){var l="duplicateEmailSignIn"===t.name&&"socialJoin"===c.name?"link":t.view;c.eventHandler(l+"Render",s.name)}else n.nike.unite.destroyAllViews(),n.nike.unite.views[t.view].render(i)}}}]}}return o}),i("componentsSub/block",[],function(){"use strict";function e(e){var n=e.value;return{html:n,handlers:[]}}return e}),i("componentsSub/checkbox",["componentsSub/helpers/_module","globals","lodash","settings","templates","utilities"],function(e,n,t,i,r,o){"use strict";function s(t,s){function a(){return n.document.getElementById(t.inputId).checked}var u={id:o.generateUuid(),tip:"",keyboardType:"text",inputId:o.generateUuid(),classes:["nike-unite-checkbox",s],name:s,value:""};t.hasOwnProperty("active")&&!t.active&&u.classes.push("valid"),t=e.models.merge(u,t),t.alwaysRenderWithDefaultValue&&(t.value=i.experience.getExperience().components[s].value),t.checked=t.value===!0?'checked="checked"':"";var c=r.checkbox(t);return{html:c,model:t,getValue:a,handlers:[{target:t.inputId,event:"blur",handler:function(i){var r=n.document.getElementById(t.id);e.dom.checkIfEmpty(i),e.state.onBlur(r)}},{target:t.inputId,event:"change",handler:function(n){e.dom.checkIfEmpty(n),e.validate(document.getElementById(t.id),t.rules,n.target.checked,"change")}},{target:t.inputId,event:"focus",handler:function(){var i=n.document.getElementById(t.id);e.state.onFocus(i)}}]}}return s}),i("componentsSub/coppa",["componentsSub/helpers/_module","globals","lodash","network","templates","utilities"],function(e,n,t,i,r,o){"use strict";function s(t,s){var a={id:o.generateUuid(),classes:["nike-unite-coppa",s],name:s};t=e.models.merge(a,t);var u=r.coppa(t);return{html:u,handlers:[{target:t.id,event:"render",handler:function(){document.cookie&&document.cookie.indexOf("coppa")>-1&&(n.nike.unite.on[nike.unite.currentView().name].fail.fire({code:400,messages:[{text:"not eligible"}]}),i.errors.previousCoppaFailure())}}]}}return s}),i("componentsSub/select",["componentsSub/helpers/_module","globals","lodash","templates","utilities"],function(e,n,t,i,r){"use strict";function o(o,s){function a(){return document.getElementById(o.selectId).value}var u={id:r.generateUuid(),selectId:r.generateUuid(),classes:["nike-unite-select",s],name:s,value:""};o.suppressBlank||(u.options=[{label:o.label,value:"",cssClass:"select-placeholder"}]),o=e.models.merge(u,o),t.each(o.options,function(e){e.cssClass=e.cssClass||"",o.value===e.value?e.selectedValue='selected="selected"':e.selectedValue=""});var c=i.select(o);return{getValue:a,html:c,model:o,handlers:[{target:o.selectId,event:"render",handler:function(t){var i=n.document.getElementById(o.id);e.dom.checkIfEmpty(t),t.value&&e.validate(i,o.rules,t.value,"submit")}},{target:o.selectId,event:"blur",handler:function(t){var i=n.document.getElementById(o.id);e.dom.checkIfEmpty(t),e.state.onBlur(i),e.validate(i,o.rules,t.target.value,"blur")}},{target:o.selectId,event:"change",handler:function(t){var i=n.document.getElementById(o.id);e.dom.checkIfEmpty(t),e.validate(i,o.rules,t.target.value,"change")}},{target:o.selectId,event:"focus",handler:function(){var t=n.document.getElementById(o.id);e.state.onFocus(t)}}]}}return o}),i("flowsSub/helpers/facebook",["utilities"],function(e){"use strict";function n(n,t){var i=function(e){var n=e.split("/").reverse(),t=n[2];return n[2]=n[1],n[1]=t,n.join("-")},r=function(e){switch(e){case"male":return"M";case"female":return"F";default:return"O"}},o={firstName:{value:n.first_name||""},lastName:{value:n.last_name||""},emailAddress:{value:n.email||""},gender:{value:r(n.gender)},provider:e.formData.getProviderNameDisplay("facebook"),providerKey:"facebook",dateOfBirth:{value:n.birthday?i(n.birthday):null},socialInputs:{network:"facebook",networkToken:t||"",networkEmail:n.email||"",networkUserId:n.id||""}};return o}function t(n){return n.provider=e.formData.getProviderNameDisplay("facebook"),n.providerKey="facebook",n.socialInputs={network:n.network?n.network.value:void 0,networkToken:n.networkToken?n.networkToken.value:void 0,networkEmail:n.networkEmail?n.networkEmail.value:void 0,networkUserId:n.networkUserId?n.networkUserId.value:void 0},n}return{getModel:n,mapSocialData:t}}),i("flowsSub/helpers/gigya",["lodash","utilities"],function(e,n){"use strict";function t(n,t){var i=void 0;return e.each(n.identities,function(e){e.provider===t.toLowerCase()&&(i=e.providerUID)}),i||""}function i(e,i,r){var o="O";("m"===e.gender||"f"===e.gender)&&(o=e.gender.toUpperCase());var s={firstName:{value:e.firstName||""},image:{value:e.thumbnailURL||""},lastName:{value:e.lastName||""},screenName:{value:(e.nickname||"").replace(/\s+/g,"")},avatar:{email:e.email||""},emailAddress:{value:e.email||""},gender:{value:o},zipCode:{value:e.zip||""},provider:n.formData.getProviderNameDisplay(r),providerKey:r,dateOfBirth:{value:e.birthYear?e.birthYear+"-"+("0"+e.birthMonth).slice(-2)+"-"+("0"+e.birthDay).slice(-2):null},socialInputs:{network:r,networkToken:i.authToken||i,networkSecret:i.tokenSecret||"",networkEmail:e.email,networkScreenName:e.nickname,networkUserId:t(e,r),isLinked:e.isSiteUID,resourceOwnerId:e.UID}};return s}function r(e){var t=e.network?e.network.value:void 0;return e.provider=n.formData.getProviderNameDisplay(t),e.providerKey=t,e.socialInputs={network:t,networkToken:e.networkToken?e.networkToken.value:void 0,networkSecret:e.networkSecret?e.networkSecret.value:void 0,networkEmail:e.networkEmail?e.networkEmail.value:void 0,networkScreenName:e.networkScreenName?e.networkScreenName.value:void 0,networkUserId:e.networkUserId?e.networkUserId.value:void 0,isLinked:e.isLinked?"true"===e.isLinked.value:void 0,resourceOwnerId:e.resourceOwnerId?e.resourceOwnerId.value:void 0},e}return{getModel:i,mapSocialData:r}}),i("flowsSub/helpers/wechat",["utilities"],function(e){"use strict";function n(n,t){var i={provider:e.formData.getProviderNameDisplay("wechat"),providerKey:"wechat",socialInputs:{network:"wechat",networkToken:t||"",networkEmail:n.email||"",networkUserId:n.loginProviderUID||""}};return i}function t(n){var t=n.network?n.network.value:void 0;return n.provider=e.formData.getProviderNameDisplay(t),n.providerKey=t,n.socialInputs={network:t,networkToken:n.networkToken?n.networkToken.value:void 0,networkEmail:n.networkEmail?n.networkEmail.value:void 0,networkUserId:n.networkUserId?n.networkUserId.value:void 0},n}return{getModel:n,mapSocialData:t}}),i("flowsSub/helpers/_module",["flowsSub/helpers/facebook","flowsSub/helpers/gigya","flowsSub/helpers/wechat"],function(e,n,t){"use strict";return{facebook:e,gigya:n,wechat:t}}),i("componentsSub/country",["globals","lodash","settings","componentsSub/select","componentsSub/helpers/_module","flowsSub/helpers/_module","utilities"],function(e,n,i,r,o,s,a){"use strict";function u(s,u){var c={classes:["nike-unite-country",u],selectId:a.generateUuid(),options:[],name:u,supportedList:{},value:i.localization.getCountry()};s=o.models.merge(c,s),s.options=[],n.each(s.supportedList,function(e,n){"XX"!==n&&s.options.push({label:e,value:n})}),"XX"===i.localization.getCountry()&&s.options.push({label:"",value:""}),s.options.sort(function(e,n){var t=e.label.toLowerCase(),i=n.label.toLowerCase();return t.localeCompare(i)}),s.suppressBlank=!0,s.hidden&&(s.style="display: none;");var l=r(s,u);return l.handlers.push({target:s.selectId,event:"change",handler:function(){var n=e.nike.unite.currentView();if(n.view.eventHandler)n.view.eventHandler("countryChange",n.name);else{var r=t("experienceLoad"),o=a.formData.getFormDataByComponent(),s=i.localization.getLanguage()+"_"+l.getValue();i.localization.setLocale(s),r.getExperienceForLocale(s,function(){var t=i.experience.getExperience().settings.enableMobileJoin;("join"===n.name||"mobileJoin"===n.name)&&(n.name=t?"mobileJoin":"join"),e.nike.unite.destroyAllViews(),e.nike.unite.views[n.name].render(o)})}}}),l}return u}),i("componentsSub/dateInput",["componentsSub/helpers/_module","globals","lodash","templates","utilities"],function(e,n,t,i,r){"use strict";function o(t,o){function s(){return n.document.getElementById(t.inputId).value}var a={id:r.generateUuid(),tip:"",inputId:r.generateUuid(),classes:["nike-unite-date-input",o],name:o,value:""};t=e.models.merge(a,t);var u=i.dateInput(t);return{html:u,getValue:s,model:t,handlers:[{target:t.inputId,event:"render",handler:function(i){var r=n.document.getElementById(t.id);e.dom.checkIfEmpty(i),i.value&&e.validate(r,t.rules,i.value,"submit")}},{target:t.inputId,event:"blur",handler:function(i){var r=n.document.getElementById(t.id);e.dom.checkIfEmpty(i),e.state.onBlur(r),e.validate(r,t.rules,i.target.value,"blur")}},{target:t.inputId,event:"change",handler:function(i){var r=n.document.getElementById(t.id);e.dom.checkIfEmpty(i),e.validate(r,t.rules,i.target.value,"change")}},{target:t.inputId,event:"focus",handler:function(){var i=n.document.getElementById(t.id);e.state.onFocus(i)}}]}}return o}),i("controllerSub/checkEmail",["lodash","networkSub/cors","settings","utilities"],function(e,n,t,i){"use strict";function r(r,o,s,a){var u=function(n){o(n&&!e.find(n,"emailonly"))},c=function(e,n){404===n?o(!1):s(e,n)},l={clientId:t.experience.getClientId(),email:r},d=t.experience.getCorsServer()+"/checkEmailService"+i.script.buildQueryString(l);n.get(d,u,c,a)}function o(e){return new Promise(function(n,t){r(e,function(e){n(e)},function(e,n){var i=void 0;switch(n){case 500:i="SERVER_ERROR";break;default:i="GENERIC"}t({code:i,httpStatus:n,message:e.message})},function(){t({code:"TIMEOUT"})})})}return{checkEmail:r,checkEmailWithPromise:o}}),i("componentsSub/emailAddress",["lodash","componentsSub/helpers/_module","controllerSub/checkEmail","utilities","templates","globals"],function(e,n,t,i,r,o){"use strict";function s(s,a,u){function c(){return e.trim(o.document.getElementById(s.inputId).value)}var l={id:i.generateUuid(),duplicateEmailId:i.generateUuid(),disabled:!1,tip:"",keyboardType:"text",focus:"",inputId:i.generateUuid(),classes:["nike-unite-text-input",a],name:a,value:""};s=n.models.merge(l,s),s.value=i.sanitize.htmlEntities(s.value);var d=r.emailAddress(s);return{html:d,model:s,getValue:c,handlers:[{target:s.inputId,event:"render",handler:function(e){var i=o.document.getElementById(s.id);if(n.dom.checkIfEmpty(e),e.value&&n.validate(i,s.rules,e.value,"submit")&&u.model.duplicateEmailCheck){var r=function(e){if(e){var n=o.document.getElementById(s.duplicateEmailId);n.style.display="block"}};t.checkEmail(e.value,r,function(){},function(){})}s.disabled&&e.setAttribute("disabled","disabled")}},{target:s.inputId,event:"blur",handler:function(e){var i=o.document.getElementById(s.id);if(n.dom.checkIfEmpty(e),n.state.onBlur(i),n.validate(i,s.rules,e.target.value,"blur")&&u.model.duplicateEmailCheck){var r=function(e){if(e){var n=o.document.getElementById(s.duplicateEmailId);n.style.display="block"}};t.checkEmail(e.target.value,r,function(){},function(){})}}},{target:s.inputId,event:"change",handler:function(e){n.dom.checkIfEmpty(e)}},{target:s.inputId,event:"focus",handler:function(){var e=o.document.getElementById(s.id);n.state.onFocus(e);var t=o.document.getElementById(s.duplicateEmailId);t.style.display="none"}}]}}return s}),i("componentsSub/errorMessage",["componentsSub/helpers/_module","globals","lodash","templates","utilities"],function(e,n,t,i,r){"use strict";function o(n,t){var o={id:r.generateUuid(),inputId:r.generateUuid(),classes:["nike-unite-error-message",t]};n=e.models.merge(o,n);var s=i.errorMessage(n);return{html:s,handlers:[{target:n.id,event:"render",handler:function(){var t=document.getElementById(n.id);n.messages&&n.messages.length>0?e.state.onNotEmpty(t):e.state.onEmpty(t)}}]}}return o}),i("componentsSub/errorPanel",["componentsSub/helpers/_module","globals","lodash","settings","templates","utilities"],function(e,n,t,i,r,o){"use strict";function s(t,i){var s={id:o.generateUuid(),hiddenId:o.generateUuid(),dismissId:o.generateUuid(),classes:["nike-unite-error-panel",i],hiddenCode:"",hiddenResult:""};t=e.models.merge(s,t),t.blocking&&(t.classes+=" blocked");var a=r.errorPanel(t);return{html:a,handlers:[{target:t.id,event:"render",handler:function(e,i){var r=n.document.getElementById(t.dismissId);if(r){var o=i.placeholder,s=function a(e){(e.target===o||e.currentTarget===r)&&(i.destroy(),o.removeEventListener("click",a),e.stopPropagation())};r.addEventListener("click",s,!1),o.addEventListener("click",s,!1)}}},{target:t.id,event:"click",handler:function(e){var i=n.document.getElementById(t.hiddenId);i&&("none"===i.style.display?i.style.display="block":i.style.display="none"),e.stopPropagation()}},{target:t.dismissId,event:"click",handler:function(){t.buttonLink&&""!==t.buttonLink.trim()&&n.window.open(t.buttonLink)}}]}}return s}),i("componentsSub/form",["componentsSub/helpers/_module","globals","lodash","templates"],function(e,n,t,i){"use strict";function r(){return{html:"</form>",handlers:[]}}function o(t,r){var o={classes:["nike-unite-form",r],hiddenFields:t.hiddenFields,name:r};t=e.models.merge(o,t),t.id="nike-unite-"+t.id;var s=i.form(t);return{html:s,model:t,handlers:[{target:t.id,event:"keyup",handler:function(e){var i=e.which||e.keyCode;if(13===i){var r=document.createEvent("Event");r.initEvent("submit",!0,!0),n.document.getElementById(t.id).dispatchEvent(r)}}}]}}return{open:o,close:r}}),i("componentsSub/genderButtons",["componentsSub/helpers/_module","globals","lodash","templates","utilities"],function(e,n,t,i,r){"use strict";function o(o,s){function a(){return n.document.getElementById(o.inputId).value}var u={id:r.generateUuid(),inputId:r.generateUuid(),classes:["nike-unite-gender-buttons",s],name:s,value:""},c=[];o=e.models.merge(u,o),t.each(o.options,function(t){t.listItemId=r.generateUuid(),t.cssClass=o.value===t.value?"checked":"",c.push({target:t.listItemId,event:"click",handler:function(){var i=n.document.getElementById(o.inputId);if(!i.value||i.value!==t.value){i.value=t.value;var r=n.document.querySelector(".nike-unite-gender-buttons.gender .checked");r&&(r.className=""),n.document.getElementById(t.listItemId).className="checked";var s=n.document.getElementById(o.id);e.validate(s,o.rules,t.value,"change")}}})});var l=i.genderButtons(o);return{getValue:a,html:l,handlers:c,model:o}}return o}),i("componentsSub/hidden",["componentsSub/helpers/_module","globals","lodash","templates","utilities"],function(e,n,t,i,r){"use strict";function o(o,s){function a(){return t.trim(n.document.getElementById(o.inputId).value)}var u={inputId:r.generateUuid(),classes:["nike-unite-hidden",s],name:s,value:""};u.id=u.inputId,o=e.models.merge(u,o);var c=i.hidden(o);return{getValue:a,html:c,handlers:[],model:o}}return o});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i("componentsSub/internationalMobileNumber",["componentsSub/helpers/_module","globals","lodash","settings","templates","utilities"],function(e,n,t,i,o,s){"use strict";function a(a,u){function c(){var e=n.document.getElementById(a.inputId).value,t=n.document.getElementById(a.selectId),i=t.options[t.selectedIndex].dataset.code,r=e?i.substring(1)+e:e;return{countryCode:i.substring(1),phoneNumber:e,sanitizedNumber:r}}function l(){var t=n.document.getElementById(a.id),i=n.document.getElementById(a.inputId).value,r=n.document.getElementById(a.selectId),o=r.options[r.selectedIndex].dataset.code,s=i?o.substring(1)+i:i;return e.validate(t,a.rules,s,"submit")}var d=void 0,f=void 0,p=0,m=i.localization.getCountry(),v=a.supportedList&&1===a.supportedList.length?"disabled":"";t.forEach(a.supportedList,function(e,n){return"US"!==e.country&&e.country!==m||(f=e.country,d="+"+e.code,p=n,e.country!==m)?void 0:!1}),f&&d||a.supportedList&&a.supportedList[0]&&(d="+"+a.supportedList[0].code,f=a.supportedList[0].country);var g={id:s.generateUuid(),selectDivClasses:["select-div"],spanCodeClasses:["code"],spanCodeId:s.generateUuid(),selectDivId:s.generateUuid(),inputId:s.generateUuid(),selectId:s.generateUuid(),classes:["nike-unite-internationalMobileNumber",u],name:u,country:f,code:d,index:p,disabled:v,value:"",sanitizedMobileNumberValue:""};a=e.models.merge(g,a);var h=o.internationalMobileNumber(a),k=function(t,i,r){var o=n.document.getElementById(a.id),s=n.document.querySelector(".nike-unite-internationalMobileNumber .sanitized-mobile-number");s.value=t.substring(1)+i,s.setAttribute("value",s.value),e.validate(o,a.rules,s.value,r)};return{getValue:c,validate:l,html:h,handlers:[{target:a.id,
event:"render",handler:function(){var e=void 0;"object"===r(a.value)&&a.value.countryCode&&a.value.phoneNumber?(e=a.value.phoneNumber,t.forEach(a.supportedList,function(e,n){e.code===a.value.countryCode&&(a.country=e.country,a.code="+"+e.code,a.index=n)})):e="object"===r(a.value)?"":a.value,n.document.getElementById(a.selectId).selectedIndex=a.index,n.document.getElementById(a.spanCodeId).innerHTML=a.code,n.document.getElementById(a.inputId).value=e,e&&k(a.code,e,"render")}},{target:a.selectId,event:"change",handler:function(e){var t=e.currentTarget,i=t.options[t.selectedIndex].dataset.code,r=n.document.getElementById(a.inputId).value;n.document.getElementById(a.spanCodeId).innerHTML=i,r&&k(i,r,"change")}},{target:a.inputId,event:"blur",handler:function(t){if(t.target.value){var i=n.document.getElementById(a.id),r=n.document.getElementById(a.selectId),o=r.options[r.selectedIndex].dataset.code;e.dom.checkIfEmpty(t),e.state.onBlur(i),k(o,t.target.value,"blur")}}},{target:a.inputId,event:"change",handler:function(n){e.dom.checkIfEmpty(n)}},{target:a.inputId,event:"focus",handler:function(){var t=n.document.getElementById(a.id);e.state.onFocus(t)}}],model:a}}return a}),i("componentsSub/keepMeLoggedIn",["componentsSub/helpers/_module","componentsSub/checkbox","settings"],function(e,n,t){"use strict";function i(i,r){var o={classes:[]};i=e.models.merge(o,i);var s=n(i,r);return s.handlers.push({target:i.id,event:"render",handler:function(e){t.platform.isNative()&&(e.style.display="none")}}),s}return i}),i("resourceSub/slCheckCookies",["networkSub/cors","settings","Promise","utilities"],function(e,n,t,i){"use strict";function r(t,r,o,s,a,u){var c={atgSync:n.experience.getAtgSync(),uxId:n.experience.getUxId()};"password"===o&&(c.cookieType="N"),r===!1&&(c.lifetime="session");var l=n.experience.getCorsServer()+"/auth/slcheck_cookies/v1"+i.script.buildQueryString(c);e.get(l,s,a,u,{Authorization:"Bearer "+t})}function o(e,n,i){return new t(function(t,o){r(e,n,i,t,function(e,n){switch(n){case 500:o({code:"SERVER_ERROR",httpStatus:n,message:e.error_description});break;default:o({code:"GENERIC",httpStatus:n,message:e.error_description})}},function(){o({code:"TIMEOUT",message:void 0})})})}return{create:r,createWithPromise:o}}),i("flowsSub/subModules/loginSuccess",["globals","lodash","Promise","resourceSub/slCheckCookies","session","settings","utilities"],function(e,n,t,i,r,o,s){"use strict";function a(n){var a=n.loginResponse;return a.user=n.getUserResponse,new t(function(e){r.logoutWithoutClearingVisitData(e)}).then(function(){var e=[];return e.push(new t(function(e){r.setCredential(a,null,null,e)})),n.getUserResponse&&e.push(new t(function(e){r.setUserProfile(n.getUserResponse,e)})),e.push(r.setStorageTimestamp(n.passedInData)),t.all(e)}).then(function(){return o.experience.getExperience().settings.setCookieOnLogin?i.createWithPromise(n.loginResponse.access_token,n.passedInData.keepMeLoggedIn,n.passedInData.grant_type?n.passedInData.grant_type:"password"):t.resolve()}).then(function(){return s.namespace("nike.unite.tokens"),e.nike.unite.tokens.access=a.access_token,e.nike.unite.tokens.refresh=a.refresh_token,o.experience.setUuId(a.user_id),a.uuid=a.user_id,t.resolve(a)})["catch"](function(e){return new t(function(n,t){r.logout(function(){t(e)})})})}return{start:a}}),i("controllerSub/getUser",["lodash","networkSub/cors","networkSub/errors","Promise","session","settings","settingsSub/experience","utilities"],function(e,n,t,i,r,o,s,a){"use strict";function u(e){return o.experience.isIdentityBackend()&&!o.experience.getExperience().settings.useLegacyGetUser?l(e):c(e)}function c(e){e=e||{};var n=e.entity||{},t=n.avatar||{},i=n.account||{},r={avatar:t.fullUrl,name:{latin:{given:n.firstName,family:n.lastName}},emails:{primary:{email:i.email}},location:{country:n.country}};return r}function l(n){var t=e.cloneDeep(n);if(n&&n.avatar&&0!==n.avatar.indexOf("https://")){var i=s.getEnvironmentVariables().avatarBaseUrl;t.avatar=i+"/"+t.avatar+"_100.jpg"}return t}function d(e,n,t,i){function s(e){r.setUserProfile(e,function(){n(e)})}if(!e||!e.access_token)throw new Error("tokenResult was not passed or passed as incomplete to getUser");if("function"!=typeof n)throw new Error("onSuccess function not passed to getUser");if("function"!=typeof t)throw new Error("onError function not passed to getUser");if("function"!=typeof i)throw new Error("onTimeout function not passed to getUser");return o.experience.isIdentityBackend()&&!o.experience.getExperience().settings.useLegacyGetUser?m(e,s,t,i):p(e,s,t,i)}function f(e){return new i(function(n,t){d(e,n,function(e,n){var i={httpStatus:n,message:e.error_description};switch(n){case 500:i.code="SERVER_ERROR";break;default:i.code="GENERIC"}t(i)},function(){t({code:"TIMEOUT",message:void 0})})})}function p(e,t,i,r){if(!e.user_id)throw new Error("tokenResult's user_id not passed to getUser with CAM backend");var s={uuid:e.user_id,atgSync:o.experience.getAtgSync()},u=o.experience.getCorsServer()+"/getUser"+a.script.buildQueryString(s);n.get(u,t,i,r,{Authorization:"Bearer "+e.access_token})}function m(e,t,i,r){var s=o.experience.getExperience(),u={viewId:s.settings.viewId,atgSync:o.experience.getAtgSync()},c=o.experience.getCorsServer()+"/getUserService"+a.script.buildQueryString(u);n.get(c,t,i,r,{Authorization:"Bearer "+e.access_token})}function v(e,n,t){function i(a){setTimeout(function(){var a=Date.now(),u=a-s;return u>=o?t({code:"TIMEOUT"}):(2e3===r&&u>=3e4&&(r=5e3),void g.getUser(e,n,function(){return i(r)},function(){return i(r)}))},a)}var r=2e3,o=18e4,s=Date.now();i(0)}var g=void 0;return g={getUser:d,getUserWithPolling:v,getUserWithPromise:f,standardize:u}}),i("componentsSub/loginContinuityDialog",["flowsSub/subModules/loginSuccess","flowsSub/subModules/progressive","controllerSub/getUser","controllerSub/tokenExchange","controllerSub/tokenRefresh","componentsSub/helpers/_module","componentsSub/spinner","globals","settings","templates","utilities"],function(e,n,t,i,r,o,s,a,u,c,l){"use strict";function d(t){var r={id:l.generateUuid(),continueButtonId:l.generateUuid(),notMeLinkId:l.generateUuid(),classes:["nike-unite-login-continuity","nike-unite-submit-button"],avatarImage:"/images/swoosh_black.png",email:"",userFirstName:"",userLastName:"",continueText:"",notMeText:""};t=o.models.merge(r,t);var a=c.loginContinuityDialog(t);return{html:a,handlers:[{target:t.continueButtonId,event:"click",handler:function(){s.show(),i.tokenExchangeWithPromise(v.loginResponse?v.loginResponse.access_token:null).then(function(e){return s.hide(),v.loginResponse=e,n.start(u.experience.getExperience().settings.progressive.contexts.login,{loginResponse:v.loginResponse,getUserResponse:v.getUserResponse})}).then(function(){return v.passedInData={keepMeLoggedIn:!0},e.start(v)}).then(function(){nike.unite.destroyAllViews(),v.loginResponse.loginContinuity=!0,v.loginResponse.validAccessToken=!0,nike.unite.on.login.success.fire(v.loginResponse)})["catch"](g)}},{target:t.notMeLinkId,event:"click",handler:function(){nike.unite.destroyAllViews(),nike.unite.views.login.render(),nike.unite.on.logout.fire(),nike.unite.on.loginContinuity.notMeLink.fire()}}]}}function f(e,n,t,i){if(!e)throw new Error("loginContinuity requires uuid parameter");if(!n)throw new Error("loginContinuity requires accessToken parameter");if(!t)throw new Error("loginContinuity requires refreshToken parameter");if(!i)throw new Error("loginContinuity requires expiresIn parameter")}var p=l.namespace("nike.unite",a.window),m=l.namespace("external",p),v={},g=function(){s.hide(),nike.unite.destroyAllViews(),nike.unite.views.login.render(),nike.unite.on.login.fail.fire({loginContinuity:!0})};return m.loginContinuity=function(e,n,i,o,a){if(f(e,n,i,o),v.loginResponse={user_id:e,access_token:n,refresh_token:i,expires_in:o},nike.unite.views.login.render(),"com.nike.swoosh"!==u.experience.getUxId()){s.show();var c=function(e){e=t.standardize(e),v.getUserResponse=e,nike.unite.destroyAllViews(),e=e||{};var n=e.name||{},i=n.latin||{},r=e.emails||{},o=r.primary||{};nike.unite.views.loginContinuity.render({userFirstName:i.given||"",loginContinuityDialog:{userFirstName:i.given||"",userLastName:i.family||"",avatarImage:e.avatar||"",email:o.email||""}})};a?r.tokenRefreshWithPromise(i,a).then(function(e){v.loginResponse.access_token=e.access_token;var r={oldAccessToken:n,oldRefreshToken:i,user_id:e.user_id,access_token:e.access_token,refresh_token:e.refresh_token,expires_in:e.expires_in};return nike.unite.on.tokenRefresh.fire(r),t.getUserWithPromise(e)})["catch"](function(){return t.getUserWithPromise(v.loginResponse)}).then(c)["catch"](g):t.getUserWithPromise(v.loginResponse).then(c)["catch"](g)}},d}),i("componentsSub/passwordCreateInput",["componentsSub/helpers/_module","globals","lodash","templates","utilities","settings"],function(e,n,t,i,r,o){"use strict";function s(t,s){function a(){return n.document.getElementById(t.inputId).value}var u={id:r.generateUuid(),tip:"",keyboardType:"password",inputId:r.generateUuid(),classes:["password","nike-unite-text-input",s],value:"",buttonId:r.generateUuid(),buttonLabel:t.showLabel,name:s};t=e.models.merge(u,t),t.value=r.sanitize.htmlEntities(t.value);var c=i.passwordCreateInput(t),l=!1,d=o.platform.isIOS()?"touchstart":"mousedown";return{getValue:a,html:c,handlers:[{target:t.inputId,event:"render",handler:function(i){var r=n.document.getElementById(t.id);e.dom.checkIfEmpty(i),i.value&&e.validate(r,t.rules,i.value,"submit")}},{target:t.buttonId,event:d,handler:function(){l=!0;var e=n.document.getElementById(t.buttonId),i=n.document.getElementById(t.inputId);"password"===i.getAttribute("type")?(e.innerHTML=t.hideLabel,e.classList.remove("nike-unite-reveal-button"),e.classList.add("nike-unite-hide-button"),i.setAttribute("type","text")):(e.innerHTML=t.showLabel,e.classList.remove("nike-unite-hide-button"),e.classList.add("nike-unite-reveal-button"),i.setAttribute("type","password"))}},{target:t.inputId,event:"blur",handler:function(i){if(l){l=!1;var r=this;r.focus(),setTimeout(function(){if(document.activeElement!==r){var e=r.value;r.focus(),r.value="  ",r.value=e}})}else{var o=n.document.getElementById(t.id);e.dom.checkIfEmpty(i),e.state.onBlur(o),e.validate(o,t.rules,i.target.value,"blur")}}},{target:t.inputId,event:"focus",handler:function(){var i=n.document.getElementById(t.id);e.state.onFocus(i)}},{target:t.inputId,event:"keyup",handler:function(i){var r=n.document.getElementById(t.id);e.dom.checkIfEmpty(i),e.validate(r,t.rules,i.target.value,"keyup")}}],model:t}}return s}),i("componentsSub/textInput",["componentsSub/helpers/_module","globals","lodash","templates","utilities"],function(e,n,t,i,r){"use strict";function o(o,s){function a(){return t.trim(n.document.getElementById(o.inputId).value)}var u={id:r.generateUuid(),disabled:!1,tip:"",help:"",keyboardType:"text",focus:"",inputId:r.generateUuid(),classes:["nike-unite-text-input",s],name:s,value:""};o=e.models.merge(u,o),o.value=r.sanitize.htmlEntities(o.value),o.hasHelp=o.help?"hasHelp":"";var c=i.textInput(o);return{html:c,model:o,getValue:a,handlers:[{target:o.inputId,event:"render",handler:function(t){var i=n.document.getElementById(o.id);e.dom.checkIfEmpty(t),t.value&&e.validate(i,o.rules,t.value,"submit"),o.disabled&&t.setAttribute("disabled","disabled")}},{target:o.inputId,event:"blur",handler:function(t){var i=n.document.getElementById(o.id);e.dom.checkIfEmpty(t),e.state.onBlur(i),e.validate(i,o.rules,t.target.value,"blur")}},{target:o.inputId,event:"change",handler:function(n){e.dom.checkIfEmpty(n)}},{target:o.inputId,event:"focus",handler:function(){var t=n.document.getElementById(o.id);e.state.onFocus(t)}}]}}return o}),i("componentsSub/passwordInput",["lodash","settings","componentsSub/textInput","componentsSub/helpers/_module"],function(e,n,t,i){"use strict";function r(e,n){var r={classes:["nike-unite-password-input",n],keyboardType:"password",value:"",name:n};return e=i.models.merge(r,e),t(e,n)}return r}),i("componentsSub/reauthEmailAddress",["lodash","session","componentsSub/helpers/_module","componentsSub/textInput","controllerSub/getUser","utilities"],function(e,n,t,i,r,o){"use strict";function s(e,s){e.inputId=o.generateUuid();var a={classes:[]};e=t.models.merge(a,e);var u=i(e,s);return u.handlers.push({target:e.inputId,event:"render",handler:function(e){var t=function(n){var t=r.standardize(n);e.value=t.emails.primary.email||""},i=function(){};n.getUserProfile(t,i)}}),u}return s}),i("controllerSub/emailOnlyJoin",["lodash","networkSub/cors","settings"],function(e,n,t){"use strict";function i(e,i,r,o){var s={account:{email:e.emailAddress},registrationSiteId:e.registrationSiteId,locale:t.localization.getLocale(),dateOfBirth:e.dateOfBirth,country:e.country,gender:e.gender,emailOnly:!0,shoppingGender:e.shoppingGender,welcomeEmailTemplate:t.experience.getWelcomeEmailTemplate()};n.post(t.experience.getCorsServer()+"/emailOnlyJoin",s,i,r,o,{"Content-Type":"application/json"})}return{emailOnlyJoin:i}}),i("flowsSub/emailOnlyJoinFlow",["lodash","networkSub/errors","globals","controllerSub/emailOnlyJoin","componentsSub/helpers/state"],function(e,n,t,i,r){"use strict";function o(e){return{country:{value:e.country},dateOfBirth:{value:e.dateOfBirth},emailAddress:{value:e.emailAddress},gender:{value:e.gender},shoppingGender:{value:e.shoppingGender}}}function s(s){i.emailOnlyJoin(s,function(e){t.nike.unite.destroyAllViews(),t.nike.unite.on.emailOnlyJoin.success.fire(e)},function(i,a){if(!e.isArray(i))return n.handleUnexpected(i,a),void t.nike.unite.on.emailOnlyJoin.fail.fire({code:a,messages:[]});var u=!0,c=[];e.each(i,function(e){switch(e.errorCode){case"InvalidCOPPAweb":case"INVALIDCOPPA":n.coppa(),c.push({text:"not eligible"});break;default:u&&(t.nike.unite.destroyAllViews(),t.nike.unite.views.emailOnlyJoin.render(o(s))),e.fieldName="account.email"===e.fieldName?"emailAddress":e.fieldName;var i=t.document.querySelector(".nike-unite-component."+e.fieldName);if(r.onInvalid(i,e.errorMessage),u){var a=i.querySelector("input")||i.querySelector("select");a.focus(),r.onFocus(i)}c.push({text:e.errorMessage,code:e.errorCode||"general error",field:e.fieldName}),u=!1}}),t.nike.unite.on.emailOnlyJoin.fail.fire(c)})}var a={start:s};return a}),i("controllerSub/login",["lodash","networkSub/cors","Promise","settings"],function(e,n,t,i){"use strict";function r(e,t,r,o){var s={username:e.username,password:e.password,client_id:i.experience.getClientId(),ux_id:i.experience.getUxId(),grant_type:"password"};e.swooshUser===!0&&(s.swooshUser=!0),n.post((i.experience.getCorsServerOverride()||i.experience.getCorsServer())+"/login",s,t,r,o,{"Content-Type":"application/json"})}function o(e){return new t(function(n,t){r(e,n,function(e,n){switch(n){case 401:t("invalid_request"===e.error||"BadCredentials"===e.error?{code:"UNAUTHORIZED",httpStatus:n,message:e.error_description}:{code:"INVALID_APIKEY",httpStatus:n,message:e.fault.faultstring});break;case 500:t({code:"SERVER_ERROR",httpStatus:n,message:e.error_description});break;default:t({code:"GENERIC",httpStatus:n,message:e.error_description})}},function(){t({code:"TIMEOUT"})})})}return{login:r,loginWithPromise:o}}),i("controllerSub/socialLogin",["lodash","networkSub/cors","settings","Promise"],function(e,n,t,i){"use strict";function r(e,i,r,o){var s=String(e.network).toLowerCase(),a={network:s,token:e.token,client_id:t.experience.getClientId(),ux_id:t.experience.getUxId(),grant_type:"nike:social"};e.networkUserId&&(a.network_user_id=e.networkUserId),"wechat"===s&&(a.network_app_id=t.experience.getWeChatAppId());var u="/socialLogin";"production"!==t.experience.getEnvironment()||t.experience.isIdentityBackend()||(u+="?backendEnvironment=identity"),n.post((t.experience.getCorsServerOverride()||t.experience.getCorsServer())+u,a,i,r,o,{"Content-Type":"application/json"})}function o(e){return new i(function(n,t){r(e,function(e){n(e)},function(e,n){t({code:"GENERIC",httpStatus:n,message:e})},function(){t({code:"TIMEOUT"})})})}return{socialLogin:r,socialLoginWithPromise:o}}),i("flowsSub/subModules/reactivation",["controllerSub/getUser","networkSub/errors","Promise"],function(e,n,t){"use strict";function i(t,i,r){function o(e){t.user=e,i()}return t.deactivated?(n.byKey("dpa.reactivation.user.wait.timeout"),void setTimeout(function(){return e.getUserWithPolling({access_token:t.access_token,user_id:t.user_id},o,r)},3e3)):i()}return{waitForUserReactivationIfRequired:i,waitForUserReactivationIfRequiredWithPromise:function(e){return new t(function(n,t){i(e,function(){var t=e.user;delete e.user,n(t)},t)})}}}),i("flowsSub/subModules/login",["controllerSub/getUser","controllerSub/login","controllerSub/socialLogin","flowsSub/subModules/reactivation","Promise"],function(e,n,t,i,r){"use strict";function o(e,i){return i?t.socialLoginWithPromise({network:e.network,networkUserId:e.networkUserId,token:e.token}):n.loginWithPromise({username:e.username,password:e.password,swooshUser:e.swooshUser})}function s(n,t){var s={passedInData:n};return o(n,t).then(function(e){return s.loginResponse=e,i.waitForUserReactivationIfRequiredWithPromise(e)}).then(function(n){return n?r.resolve(n):e.getUserWithPromise({access_token:s.loginResponse.access_token,user_id:s.loginResponse.user_id})}).then(function(e){return s.getUserResponse=e,r.resolve(s)})["catch"](function(e){return r.reject(e)})}return{start:s}}),i("resourceSub/user",["networkSub/cors","settings","Promise","utilities"],function(e,n,t,i){"use strict";function r(r){return new t(function(t,o){var s=n.localization.getLocale().split("_"),a={language:s[0]+"-"+s[1]},u={country:r.country,firstName:r.firstName,gender:r.gender?r.gender:"O",lastName:r.lastName,locale:n.localization.getLocale(),password:r.password,receiveEmail:r.receiveEmail,registrationSiteId:r.registrationSiteId,registrationToken:r.registrationToken,shoppingGender:r.shoppingGender,welcomeEmailTemplate:n.experience.getWelcomeEmailTemplate()};r.mobileNumber&&(u.mobileNumber="+"+r.mobileNumber),r.emailAddress&&(u.emailAddress=r.emailAddress,u.dateOfBirth=r.dateOfBirth,u.username=r.emailAddress,u.account={email:r.emailAddress,passwordSettings:{password:r.password,passwordConfirm:r.password}});var c=n.experience.getEnvironmentVariables().api.createUser,l=(n.experience.getCorsServerOverride()||c.cors)+c.path+i.script.buildQueryString(a);e.post(l,u,function(e){t(e)},function(e,n){var t={httpStatus:n,message:e.message};switch(n){case 400:switch(t.fieldName=e.fieldName,e.code){case"COPPA_ERROR":t.code="COPPA_ERROR";break;default:t.code="EMPTY"}break;case 409:t.code="DUPLICATE_ACCOUNT";break;case 500:t.code="SERVER_ERROR";break;default:t.code="GENERIC"}o(t)},function(){o({code:"TIMEOUT",message:void 0})},{"Content-Type":"application/json"})})}return{create:r}}),i("flowsSub/joinFlow",["networkSub/errors","globals","flowsSub/subModules/login","flowsSub/subModules/loginSuccess","flowsSub/subModules/progressive","settings","componentsSub/helpers/state","resourceSub/user","utilities"],function(e,n,t,i,r,o,s,a,u){"use strict";function c(c){return l.passedInData=c,a.create({country:c.country,dateOfBirth:c.dateOfBirth,emailAddress:c.emailAddress,firstName:c.firstName,gender:c.gender,lastName:c.lastName,mobileNumber:c.mobileNumber,password:c.password,receiveEmail:c.receiveEmail,registrationSiteId:c.registrationSiteId,shoppingGender:c.shoppingGender}).then(function(){return t.start({username:c.emailAddress,password:c.password})}).then(function(e){return l.loginResponse=e.loginResponse,l.getUserResponse=e.getUserResponse,r.start(o.experience.getExperience().settings.progressive.contexts.join,{loginResponse:l.loginResponse,getUserResponse:l.getUserResponse})}).then(function(){return i.start(l)}).then(function(e){e.joinModel={emailSignup:c.receiveEmail},n.nike.unite.destroyAllViews(),n.nike.unite.on.join.success.fire(e)})["catch"](function(t){var i=void 0,r=u.formData.getFormDataByComponent();switch(n.nike.unite.destroyAllViews(),n.nike.unite.views.join.render(r),t.code){case"COPPA_ERROR":t.text="not eligible",e.coppa();break;case"DUPLICATE_ACCOUNT":i=n.document.querySelector(".nike-unite-component.emailAddress"),i.querySelector("input").focus(),s.onInvalid(i,t.message);break;case"EMPTY":i=n.document.querySelector(".nike-unite-component."+t.fieldName),i?(i.querySelector("input").focus(),s.onInvalid(i,t.message)):e.handleUnexpected(t);break;default:e.handleUnexpected(t)}n.nike.unite.on.join.fail.fire(t)})}var l={};return{start:c}}),i("flowsSub/loginFlow",["networkSub/errors","flowsSub/subModules/login","flowsSub/subModules/loginSuccess","flowsSub/subModules/progressive","globals","settings"],function(e,n,t,i,r,o){"use strict";function s(s){var c=void 0;n.start({username:s.emailAddress?s.emailAddress:"+"+s.phone.sanitizedNumber,password:s.password,keepMeLoggedIn:s.keepMeLoggedIn===!0,swooshUser:s.swooshUser}).then(function(e){return c=e,i.start(o.experience.getExperience().settings.progressive.contexts.login,{loginResponse:c.loginResponse,getUserResponse:c.getUserResponse})}).then(function(){return t.start(c)}).then(function(e){s.phone&&s.phone.sanitizedNumber&&(e.meta={mobileJoinOrLogin:!0}),r.nike.unite.destroyAllViews(),r.nike.unite.on.login.success.fire(e)})["catch"](function(n){var t=r.nike.unite.currentView().name;switch(n.code){case"TIMEOUT":r.nike.unite.destroyAllViews(),r.nike.unite.views[t].render(a(s)),e.handleUnexpected({},n.code);break;case"UNAUTHORIZED":r.nike.unite.destroyAllViews(),s.errorMessage=u(s),r.nike.unite.views[t].render(a(s));break;default:e.handleUnexpected(n.httpStatus+" - "+(n.message?n.message:"No error message found."),n.code)}s.phone&&s.phone.sanitizedNumber&&(n.meta={mobileJoinOrLogin:!0}),r.nike.unite.on.login.fail.fire(n)})}var a=function(e){return{emailAddress:{value:e.emailAddress},verifyMobileNumber:{value:e.phone&&e.phone.phoneNumber,sanitizedNumber:e.phone&&e.phone.sanitizedNumber},keepMeLoggedIn:{value:e.keepMeLoggedIn},errorMessage:e.errorMessage}},u=function(e){return e.emailAddress?o.experience.getExperience().components.errorMessageLogin:o.experience.getExperience().components.errorMessageMobileLogin},c={start:s};return c}),i("flowsSub/mobileJoinFlow",["lodash","globals","networkSub/errors","componentsSub/helpers/state","flowsSub/subModules/progressive","flowsSub/subModules/login","flowsSub/subModules/loginSuccess","settings","resourceSub/user"],function(e,n,t,i,r,o,s,a,u){"use strict";function c(e){return{firstName:{value:e.firstName},lastName:{value:e.lastName},mobileJoinForm:{hiddenFields:{registrationToken:e.registrationToken}}}}function l(l){function d(l){var p=e.merge({},f,l),m=void 0,v=void 0;u.create(p).then(function(){return o.start({username:"+"+p.mobileNumber,password:p.password,keepMeLoggedIn:!1,swooshUser:!1})}).then(function(e){return m=e.loginResponse,v=e.getUserResponse,r.start(a.experience.getExperience().settings.progressive.contexts.mobileJoin,{loginResponse:m,getUserResponse:v})}).then(function(){return s.start({loginResponse:m,getUserResponse:v,passedInData:p})}).then(function(e){var t={expires_in:e.expires_in,refresh_token:e.refresh_token,uuid:e.user_id,access_token:e.access_token,joinModel:{emailSignup:p.receiveEmail},user:e.user,meta:{mobileJoinOrLogin:!0}};n.nike.unite.destroyAllViews(),n.nike.unite.on.join.success.fire(t)})["catch"](function(e){if(n.nike.unite.views.mobileJoinContinue.render(c(f),d),400===e.httpStatus&&e.fieldName){var r=n.document.querySelector(".nike-unite-component."+e.fieldName);i.onInvalid(r,e.message)}else t.handleUnexpected(e,e.code);var o={code:e.code,messages:[{text:e.message}],meta:{mobileJoinOrLogin:!0}};n.nike.unite.on.join.fail.fire(o)})}var f={country:l.country,registrationToken:l.phone.registrationToken,mobileNumber:l.phone.mobileNumber,receiveEmail:l.receiveEmail,firstName:l.firstName,lastName:l.lastName};n.nike.unite.destroyAllViews(),n.nike.unite.views.mobileJoinContinue.render(c(f),d)}return{start:l}}),i("controllerSub/partnerLogin",["networkSub/cors","settings"],function(e,n){"use strict";function t(t,i,r,o,s,a,u){var c={username:t,password:i,client_id:r,state:o},l=n.experience.getCorsServer()+"/partnerLogin";e.post(l,c,function(e){e.redirectWhitelist=new RegExp(n.experience.getExperience().settings.oauthRedirectURIWhitelist),s(e)},a,u,{"Content-Type":"application/json"})}return{partnerLogin:t}}),i("flowsSub/partnerJoinFlow",["lodash","controllerSub/partnerLogin","globals","networkSub/errors","settings","resourceSub/user","componentsSub/helpers/state","utilities"],function(e,n,t,i,r,o,s,a){"use strict";function u(e){return{country:{value:e.country},dateOfBirth:{value:e.dateOfBirth},emailAddress:{value:e.emailAddress},emailSignup:{value:e.receiveEmail},firstName:{value:e.firstName},gender:{value:e.gender},lastName:{value:e.lastName},mobileNumber:{value:e.mobileNumber},passwordCreate:{value:e.password}}}function c(e){var c={country:e.country,dateOfBirth:e.dateOfBirth,emailAddress:e.emailAddress,firstName:e.firstName,gender:e.gender,lastName:e.lastName,mobileNumber:e.mobileNumber,password:e.password,receiveEmail:e.receiveEmail,registrationSiteId:e.registrationSiteId};o.create(c).then(function(){n.partnerLogin(c.emailAddress,c.password,r.experience.getExperience().settings.clientId,{},function(e){var n={partnerName:r.experience.getExperience().settings.partnerName};t.nike.unite.destroyAllViews(),t.nike.unite.views.partnerConnect.render(n,function(){t.nike.unite.destroyAllViews(),t.nike.unite.on.partnerJoin.success.fire(e)})},function(n,r){t.nike.unite.views.join.render(u(e)),i.handleUnexpected(n,r),t.nike.unite.on.partnerJoin.fail.fire()},function(){t.nike.unite.views.join.render(u(e)),i.handleUnexpected({},"TIMEOUT")})})["catch"](function(e){var n=void 0,r=a.formData.getFormDataByComponent();switch(t.nike.unite.destroyAllViews(),t.nike.unite.views.join.render(r),e.code){case"COPPA_ERROR":e.text="not eligible",i.coppa();break;case"DUPLICATE_ACCOUNT":n=t.document.querySelector(".nike-unite-component.emailAddress"),n.querySelector("input").focus(),s.onInvalid(n,e.message);break;case"EMPTY":n=t.document.querySelector(".nike-unite-component."+e.fieldName),n?(n.querySelector("input").focus(),s.onInvalid(n,e.message)):i.handleUnexpected(e);break;default:i.handleUnexpected(e)}t.nike.unite.on.partnerJoin.fail.fire(e)})}var l={start:c};return l}),i("flowsSub/partnerLoginFlow",["controllerSub/partnerLogin","globals","networkSub/errors","settings"],function(e,n,t,i){"use strict";function r(e){return{emailAddress:{value:e.emailAddress}}}function o(o){e.partnerLogin(o.emailAddress,o.password,i.experience.getExperience().settings.clientId,{},function(e){var t={partnerName:i.experience.getExperience().settings.partnerName};n.nike.unite.destroyAllViews(),n.nike.unite.views.partnerConnect.render(t,function(){n.nike.unite.destroyAllViews(),n.nike.unite.on.partnerLogin.success.fire(e)})},function(e,s){switch(e.error){case"invalid_request":var a=i.experience.getExperience(),u=r(o);u.errorMessage=a.components.errorMessageLogin,n.nike.unite.views.login.render(u);break;default:t.handleUnexpected(e,s)}n.nike.unite.on.partnerLogin.fail.fire()},function(){n.nike.unite.views.login.render(),t.handleUnexpected({},"TIMEOUT")})}var s={start:o};return s}),i("controllerSub/resetPassword",["networkSub/cors","settings","utilities"],function(e,n,t){"use strict";function i(i,r,o,s){var a=n.experience.getExperience(),u={login:i.emailAddress||"+"+i.phone.sanitizedNumber,backendEnvironment:n.experience.getBackendEnvironment(),redirectUrl:a.settings.passwordRedirectURL,messageTemplate:a.settings.passwordResetEmailTemplate,email:i.emailAddress,ux_id:n.experience.getUxId(),emailTemplate:a.settings.passwordResetEmailTemplate};i.swooshUser&&(u.swooshUser=i.swooshUser);var c={clientId:n.experience.getClientId(),locale:n.localization.getLocale()};e.post(n.experience.getCorsServer()+"/resetPassword"+t.script.buildQueryString(c),u,r,o,s,{"Content-Type":"application/json"})}return{resetPassword:i}}),i("flowsSub/resetPasswordFlow",["lodash","networkSub/errors","globals","controllerSub/resetPassword"],function(e,n,t,i){"use strict";function r(e){return{emailAddress:{value:e.emailAddress}}}function o(e){i.resetPassword(e,function(){t.nike.unite.destroyAllViews(),t.nike.unite.views.confirmPasswordReset.render(r(e)),t.nike.unite.on.resetPassword.success.fire()},function(i,o){t.nike.unite.destroyAllViews(),t.nike.unite.views.resetPassword.render(r(e)),t.nike.unite.on.resetPassword.fail.fire(),n.handleUnexpected(i,o)})}var s={start:o};return s}),i("controllerSub/socialLink",["networkSub/cors","settings","utilities"],function(e,n,t){"use strict";function i(i,r,o,s,a,u,c,l,d){var f={network_user_access_token:a,network_user_id:u};"wechat"===s&&(f.network_app_id=n.experience.getWeChatAppId());var p={userId:r,socialProvider:s},m=n.experience.getCorsServer()+i+t.script.buildQueryString(p);e.post(m,f,c,l,d,{Authorization:"Bearer "+o,"Content-Type":"application/json"})}function r(e,n,t,r,o,s,a,u){i("/createSocialLink",e,n,t,r,o,s,a,u)}function o(e){return new Promise(function(n,t){i("/createSocialLink",e.userId,e.userToken,e.socialProvider,e.socialToken,e.networkUserId,function(){n()},function(e,n){t({code:"GENERIC",httpStatus:n,message:e})},function(){t({code:"TIMEOUT"})})})}function s(e,n,t,r,o,s,a,u){i("/updateSocialLink",e,n,t,r,o,s,a,u)}function a(e){return new Promise(function(n,t){i("/updateSocialLink",e.userId,e.userToken,e.socialProvider,e.socialToken,e.networkUserId,function(){n()},function(e,n){t({code:"GENERIC",httpStatus:n,message:e})},function(){t({code:"TIMEOUT"})})})}return{createSocialLink:r,createSocialLinkWithPromise:o,updateSocialLink:s,updateSocialLinkWithPromise:a}}),i("flowsSub/subModules/link",["controllerSub/socialLink","globals","Promise"],function(e,n,t){"use strict";function i(i){return e.createSocialLinkWithPromise({userId:i.loginResponse.user_id,userToken:i.loginResponse.access_token,socialProvider:i.socialModel.socialInputs.network,socialToken:i.socialModel.socialInputs.networkToken,networkUserId:i.socialModel.socialInputs.networkUserId}).then(function(){return n.nike.unite.on.linkAccounts.success.fire({expires_in:i.loginResponse.expires_in,refresh_token:i.loginResponse.refresh_token,uuid:i.loginResponse.user_id,access_token:i.loginResponse.access_token,socialProvider:i.socialModel.socialInputs.network.toLowerCase()}),t.resolve()})["catch"](function(r){return r.socialProvider=i.socialModel.socialInputs.network.toLowerCase(),n.nike.unite.on.linkAccounts.fail.fire(r),"TIMEOUT"===r.code?t.reject(r):e.updateSocialLinkWithPromise({userId:i.loginResponse.user_id,userToken:i.loginResponse.access_token,socialProvider:i.socialModel.socialInputs.network,socialToken:i.socialModel.socialInputs.networkToken,networkUserId:i.socialModel.socialInputs.networkUserId}).then(function(){return n.nike.unite.on.linkOverride.success.fire({socialProvider:i.socialModel.socialInputs.network.toLowerCase()}),t.resolve()})["catch"](function(e){return e.socialProvider=i.socialModel.socialInputs.network.toLowerCase(),n.nike.unite.on.linkOverride.fail.fire(e),"TIMEOUT"===e.code?t.reject(e):t.resolve()})})}return{start:i}}),i("flowsSub/socialFlow",["lodash","componentsSub/helpers/state","controllerSub/checkEmail","globals","network","networkSub/errors","flowsSub/helpers/_module","flowsSub/subModules/progressive","flowsSub/subModules/link","flowsSub/subModules/login","flowsSub/subModules/loginSuccess","resourceSub/user","settings","utilities"],function(e,n,i,r,o,s,a,u,c,l,d,f,p,m){"use strict";function v(e){var n=r.nike.unite.currentView().view.placeholder,t=n.querySelector(".nike-unite-form");return e?m.formData.getFormDataByComponent(t):m.formData.getFormData(t)}function g(e,n){var i=void 0;switch("submit"===e?i=v():(i=v(!0),r.nike.unite.destroyAllViews()),i.provider=y.passedInData.provider,i.providerKey=y.passedInData.provider.toLowerCase(),e){case"resetPasswordRender":r.nike.unite.views.resetPassword.render(i);break;case"linkRender":r.nike.unite.views.link.eventHandler=g,r.nike.unite.views.link.render(i);break;case"mobileLinkRender":r.nike.unite.views.mobileLink.eventHandler=g,
r.nike.unite.views.mobileLink.render(i);break;case"socialJoinRender":r.nike.unite.views.socialJoin.eventHandler=g,r.nike.unite.views.socialJoin.render(i);break;case"mobileSocialJoinRender":r.nike.unite.views.mobileSocialJoin.eventHandler=g,r.nike.unite.views.mobileSocialJoin.render(i);break;case"countryChange":var o=p.localization.getLanguage()+"_"+i.country.value;p.localization.setLocale(o),t("experienceLoad").getExperienceForLocale(o,function(){var e=p.experience.getExperience().settings.enableMobileJoin,n=e?"mobileSocialJoin":"socialJoin";r.nike.unite.views[n].eventHandler=g,r.nike.unite.views[n].render(i)});break;case"submit":if(r.nike.unite.spinner.show(),"socialJoin"===n)return h(i);w(i,"login").then(function(e){e.socialProvider=y.passedInData.provider.toLowerCase(),r.nike.unite.destroyAllViews(),r.nike.unite.on.login.success.fire(e)})["catch"](function(e){r.nike.unite.on.login.fail.fire(e)})}}function h(n){if(!p.experience.getExperience().settings.enableMobileJoin)return k({country:n.country,dateOfBirth:n.dateOfBirth,emailAddress:n.emailAddress,firstName:n.firstName,gender:n.gender,lastName:n.lastName,mobileNumber:n.mobileNumber,password:n.password,receiveEmail:n.receiveEmail,registrationSiteId:n.registrationSiteId},"join",g);var t=function i(t){switch(t){case"joinRender":r.nike.unite.views.mobileJoinContinue.destroy(),r.nike.unite.views.mobileSocialJoin.eventHandler=g,r.nike.unite.views.mobileSocialJoin.render();break;case"submit":var o=e.merge({},n,v());return k({country:o.country,dateOfBirth:o.dateOfBirth,emailAddress:o.emailAddress,firstName:o.firstName,gender:o.gender,lastName:o.lastName,mobileNumber:o.mobileNumber,password:o.password,receiveEmail:o.receiveEmail,registrationSiteId:o.registrationSiteId,registrationToken:o.registrationToken},"mobileJoin",i)}};r.nike.unite.views.mobileJoinContinue.eventHandler=t,r.nike.unite.views.mobileJoinContinue.render()}function k(e,t,i){return f.create(e)["catch"](function(o){var a={text:o.message,code:o.code,field:o.fieldName},u="socialJoin",c=v(!0);if(c.provider=m.formData.getProviderNameDisplay(y.passedInData.provider.toLowerCase()),c.providerKey=y.passedInData.provider.toLowerCase(),"mobileJoin"===t&&(u="mobileJoinContinue",a.meta={mobileJoinOrLogin:!0},c.mobileJoinForm={hiddenFields:{registrationToken:e.registrationToken}}),"COPPA_ERROR"===o.code)s.coppa(),a={text:"not eligible"};else if(400===o.httpStatus&&o.fieldName){r.nike.unite.views[u].eventHandler=i,r.nike.unite.views[u].render(c);var l=r.document.querySelector(".nike-unite-component."+o.fieldName);n.onInvalid(l,o.message)}else r.nike.unite.views[u].eventHandler=i,r.nike.unite.views[u].render(c),s.handleUnexpected(o,o.code);return r.nike.unite.on.socialJoin.fail.fire(a),Promise.reject()}).then(function(){return r.nike.unite.on.socialJoin.success.fire({providerName:y.passedInData.provider.toLowerCase()}),w(e,t)}).then(function(e){e.socialProvider=y.passedInData.provider.toLowerCase(),r.nike.unite.destroyAllViews(),r.nike.unite.on.join.success.fire(e)})}function b(e){return r.nike.unite.spinner.show(),y.passedInData=e,l.start({network:e.provider,networkUserId:e.user?e.user.loginProviderUID:null,token:e.token},!0).then(function(e){return y.loginResponse=e.loginResponse,y.getUserResponse=e.getUserResponse,u.start(p.experience.getExperience().settings.progressive.contexts.login,{loginResponse:y.loginResponse,getUserResponse:y.getUserResponse})}).then(function(){return y.passedInData.grant_type="nike:social",y.passedInData.isLinked=!0,d.start(y)}).then(function(e){e.socialProvider=y.passedInData.provider.toLowerCase(),r.nike.unite.destroyAllViews(),r.nike.unite.on.login.success.fire(e)})["catch"](function(){function n(e){var n="login"===r.nike.unite.currentView().name?"link":"socialJoin";return void 0!==e&&(n=e?"link":"socialJoin"),r.nike.unite.destroyAllViews(),r.nike.unite.views[n].eventHandler=g,r.nike.unite.views[n].render(t),Promise.resolve()}var t=a[e.provider.toLowerCase()]?a[e.provider.toLowerCase()].getModel(e.user,e.token):a.gigya.getModel(e.user,e.token,e.provider.toLowerCase());return y.socialModel=t,t.socialInputs.networkEmail?i.checkEmailWithPromise(t.socialInputs.networkEmail).then(n)["catch"](function(e){r.nike.unite.spinner.hide(),o.errors.social(e.message,e.httpStatus)}):void n()})}function w(e,n){return l.start({username:e.emailAddress?e.emailAddress:"+"+e.mobileNumber,password:e.password}).then(function(e){return y.loginResponse=e.loginResponse,y.getUserResponse=e.getUserResponse,u.start(p.experience.getExperience().settings.progressive.contexts[n],{loginResponse:y.loginResponse,getUserResponse:y.getUserResponse})}).then(function(){return c.start(y)}).then(function(){return y.passedInData.keepMeLoggedIn=!0,d.start(y)})["catch"](function(n){var t=v(!0);switch(t.provider=e.provider,t.providerKey=e.providerKey,r.nike.unite.destroyAllViews(),n.code){case"UNAUTHORIZED":t.errorMessage=p.experience.getExperience().components.errorMessageLogin,r.nike.unite.views.link.eventHandler=g,r.nike.unite.views.link.render(t);break;default:r.nike.unite.views.link.eventHandler=g,r.nike.unite.views.link.render(t),s.handleUnexpected(n,n.errorCode)}return Promise.reject(n)})}var y={};return{start:b}}),i("controllerSub/swooshJoin",["lodash","networkSub/cors","settings"],function(e,n,t){"use strict";function i(e,i,r,o){var s={firstName:e.firstName,lastName:e.lastName,gender:e.gender?e.gender:"O",postalCode:e.postalCode,dob:e.dateOfBirth,email:e.emailAddress,password:e.password,registrationSiteId:e.registrationSiteId,welcomeEmailTemplate:t.experience.getWelcomeEmailTemplate()};switch(e.type){case"US":s.employeeId=e.employeeId,s.ssn=e.ssn;break;case"CN":s.employeeId=e.employeeId,s.hireDate=e.hireDate,s.phoneNumber=e.mobileNumber;break;case"JP":s.employeeId=e.employeeId,s.firstNameKana=e.jpFirstNameKana,s.lastNameKana=e.jpLastNameKana;break;case"FAMILY":s.inviteToken=e.inviteToken}n.post(t.experience.getCorsServer()+"/swooshJoin?type="+e.type.toLowerCase(),s,i,r,o,{"Content-Type":"application/json"})}return{swooshJoin:i}}),i("flowsSub/swooshJoinFlow",["lodash","componentsSub/helpers/state","controllerSub/getUser","flowsSub/subModules/login","flowsSub/subModules/loginSuccess","controllerSub/swooshJoin","flowsSub/subModules/progressive","globals","instantiation","networkSub/errors","Promise","settings"],function(e,n,t,i,r,o,s,a,u,c,l,d){"use strict";function f(e){return{emailAddress:{value:e.emailAddress},firstName:{value:e.firstName},gender:{value:e.gender},lastName:{value:e.lastName},dateOfBirth:{value:e.dateOfBirth},zipCode:{value:e.postalCode}}}function p(t){var p=void 0;return t.inviteToken="FAMILY"===t.type?u.getObject().dataset.invitetoken:null,new l(function(e,n){o.swooshJoin(t,function(n){e(n)},function(e,t){n(e,t)},function(){n({code:"TIMEOUT"})})}).then(function(){return i.start({username:t.emailAddress,password:t.password,swooshUser:!0})}).then(function(e){return p=e,s.start(d.experience.getExperience().settings.progressive.contexts.join,{loginResponse:p.loginResponse,getUserResponse:p.getUserResponse})}).then(function(){return r.start(p)}).then(function(e){a.nike.unite.on.join.success.fire(e)})["catch"](function(i,r){function o(e,t){var i=a.document.querySelector(".nike-unite-component."+e);n.onInvalid(i,t)}var s={code:r};a.nike.unite.views.join.render(f(t));try{if(!e.isArray(i.errors))throw new Error;e.each(i.errors,function(e){if(s.code=e.code||s.code||"general error","99904"===e.code||"99906"===e.code)o("employeeId",e.message);else if("99905"===e.code)o("emailAddress",e.message);else if("99910"===e.code)o("firstName",e.message);else{if(!(e.metadata&&e.metadata.fieldName&&a.document.querySelector(".nike-unite-component."+e.metadata.fieldName)))throw new Error(e.message);o(e.metadata.fieldName,e.message)}})}catch(u){u.message?c.handleUnexpected(u.message,u.code):c.handleUnexpected(i.httpStatus+" - "+(i.message?i.message:"No error message found."),i.code)}a.nike.unite.on.join.fail.fire(s)})}var m={start:p};return m}),i("controllerSub/updatePassword",["networkSub/cors","settings","utilities"],function(e,n,t){"use strict";function i(i,r,o,s,a){var u={password:i,token:r,verificationCode:r},c={clientId:n.experience.getClientId()};e.post(n.experience.getCorsServer()+"/updatePassword"+t.script.buildQueryString(c),u,o,s,a,{"Content-Type":"application/json"})}return{updatePassword:i}}),i("flowsSub/updatePasswordFlow",["lodash","networkSub/errors","globals","controllerSub/updatePassword","settings","utilities"],function(e,n,t,i,r,o){"use strict";function s(e){var s=t.document.getElementById("nike-unite"),a=r.experience.getExperience();i.updatePassword(e.password,s.dataset.resetkey,function(){t.nike.unite.on.updatePassword.success.fire();var e={locale:r.localization.getLocale()};t.window.location=a.settings.passwordRedirectURL+o.script.buildQueryString(e)},function(e,i){var r={code:i,messages:[]};if(400===i){r.messages.push({text:"UpdatePasswordInvalidToken"});var o={errorMessage:a.components.errorMessageUpdatePasswordInvalidToken};t.nike.unite.destroyAllViews(),t.nike.unite.views.resetPassword.render(o)}else n.handleUnexpected(e,i);t.nike.unite.on.updatePassword.fail.fire(r)})}var a={start:s};return a}),i("controllerSub/verifyCode",["networkSub/cors","settings","utilities"],function(e,n,t){"use strict";function i(i,r,o,s,a){if("string"!=typeof i||!i)throw new Error("code must be a non-empty string");if("string"!=typeof r||!r)throw new Error("accessToken must be a non-empty string");if("function"!=typeof o)throw new Error("onSuccess must be a function");if("function"!=typeof s)throw new Error("onError must be a function");if("function"!=typeof a&&"undefined"!=typeof a)throw new Error("onTimeout must be a function or undefined");var u={code:i},c=(n.experience.getCorsServerOverride()||n.experience.getCorsServer())+"/verifyCode"+t.script.buildQueryString(u);e.post(c,{},o,s,a,{Authorization:"Bearer "+r,"Content-Type":"application/json"})}function r(e,n){return new Promise(function(t,r){i(e,n,t,function(e,n){var t={httpStatus:n,message:e.errors[0].message};switch(n){case 400:t.code=String(e.errors[0].code);break;case 500:t.code="SERVER_ERROR";break;default:t.code="GENERIC"}r(t)},function(){r({code:"TIMEOUT"})})})}return{verifyCode:i,verifyCodeWithPromise:r}}),i("flowsSub/verifyMobileCodeFlow",["lodash","networkSub/errors","globals","apiSub/user","controllerSub/verifyCode","componentsSub/helpers/state","session"],function(e,n,t,i,r,o,s){"use strict";function a(e){return{code:{value:e.code},stateKey:{value:e.stateKey}}}function u(e){s.getCredential(function(i){if(!i)throw new Error("Valid credential not found in session");r.verifyCode(e.code,i.access_token,function(){t.nike.unite.destroyAllViews(),t.nike.unite.on.userState.success.fire({stateKey:e.stateKey})},function(i,r){t.nike.unite.destroyAllViews(),t.nike.unite.views.verifyMobileCode.render(a(e));var s=t.document.querySelector(".nike-unite-component.code"),u="";i.errors&&i.errors[0]&&i.errors[0].message?(o.onInvalid(s,i.errors[0].message),u=i.errors[0].code):n.handleUnexpected(i,r),t.nike.unite.on.userState.fail.fire({errorMessage:u||r,stateKey:e.stateKey})})},function(e){throw new Error(e)})}var c={start:u};return c}),i("flows",["flowsSub/emailOnlyJoinFlow","flowsSub/joinFlow","flowsSub/loginFlow","flowsSub/mobileJoinFlow","flowsSub/partnerJoinFlow","flowsSub/partnerLoginFlow","flowsSub/resetPasswordFlow","flowsSub/socialFlow","flowsSub/swooshJoinFlow","flowsSub/updatePasswordFlow","flowsSub/verifyMobileCodeFlow","flowsSub/helpers/_module"],function(e,n,t,i,r,o,s,a,u,c,l,d){"use strict";return{emailOnlyJoinFlow:e,joinFlow:n,loginFlow:t,mobileJoinFlow:i,partnerJoinFlow:r,partnerLoginFlow:o,resetPasswordFlow:s,socialFlow:a,swooshJoinFlow:u,updatePasswordFlow:c,verifyMobileCodeFlow:l,helpers:d}}),i("socialNetworksSub/facebookService",["globals"],function(e){"use strict";function n(n,i){if(s=n,a=i,e.nike.unite.on.facebooksdk.load.success.fired)t();else var r=e.nike.unite.on.facebooksdk.load.success.addHandler(function(){t(),e.nike.unite.on.facebooksdk.load.success.removeHandler(r)})}function t(){e.window.FB.getLoginStatus(function(e){"connected"===e.status?i(e):FB.login(function(e){i(e)},{scope:"user_friends,email,user_birthday"})})}function i(n){if("connected"===n.status){var t={token:n.authResponse.accessToken,provider:"Facebook",secret:""};r(function(e){t.user=e,s(t)},function(e){a(e)})}else"unknown"===n.status||"not_authorized"===n.status?e.nike.unite.on[e.nike.unite.currentView().name].socialCancel.fire({providerName:"facebook"}):a(n)}function r(e,n,t){var i="/me?fields=id,first_name,last_name,email,birthday,gender"+(t?"&access_token="+t:"");FB.api(i,function(t){t&&!t.error?e(t):n(t)})}function o(n,t,i){if(e.nike.unite.on.facebooksdk.load.success.fired)r(n,t,i);else var o=e.nike.unite.on.facebooksdk.load.success.addHandler(function(){r(n,t,i),e.nike.unite.on.facebooksdk.load.success.removeHandler(o)})}var s=void 0,a=void 0,u={getUserData:o,getUserAndAuthData:n};return u}),i("socialNetworks",["socialNetworksSub/facebookService"],function(e){"use strict";return{facebookService:e}}),i("controllerSub/weChatCodeExchange",["networkSub/cors","settings","utilities"],function(e,n,t){"use strict";function i(i,r,o,s){if("string"!=typeof i||!i)throw new Error("code must be a non-empty string");if("function"!=typeof r)throw new Error("onSuccess must be a function");if("function"!=typeof o)throw new Error("onError must be a function");if("function"!=typeof s)throw new Error("onTimeout must be a function");var a={code:i,wechatAppId:n.experience.getWeChatAppId()},u=n.experience.getCorsServer()+"/weChatCodeExchange"+t.script.buildQueryString(a);e.get(u,r,o,s)}return{weChatCodeExchange:i}}),i("componentsSub/socialLinks",["flows","globals","componentsSub/helpers/_module","lodash","networkSub/errors","settings","socialNetworks","componentsSub/spinner","templates","utilities","controllerSub/weChatCodeExchange"],function(e,n,t,i,r,o,s,a,u,c,l){"use strict";function d(l,d){var f={id:c.generateUuid(),classes:["nike-unite-social-login",d],providers:[]},p=o.experience.getExperience();p.settings.social&&(f.providers=i.cloneDeep(p.settings.social.networks)||[],f.providers.length>1&&o.platform.isNative()&&f.classes.push("nike-unite-gigya-required")),f.classes.push("bottom"===l.conjunctionPosition?"conjunction-bottom":"conjunction-top"),l=t.models.merge(f,l),i.each(l.providers,function(e){l.linkTextOverride&&l.linkTextOverride[e.name]&&(e.linkText=l.linkTextOverride[e.name],e.type="register"),e.inputId=c.generateUuid()});var m="";l.providers.length>0&&(m=u.socialLinks(l));var v=[];return i.each(l.providers,function(t){v.push({target:t.inputId,event:"click",handler:function(){if(!o.platform.isNative()){var i=s[t.name.toLowerCase()+"Service"];i.getUserAndAuthData(function(n){e.socialFlow.start(n)},function(e){r.social(e,null)})}"WeChat"===t.name&&a.show(),"join"===n.nike.unite.currentView().name?n.nike.unite.on.join.socialLink.fire({providerName:t.name}):n.nike.unite.on.login.socialLink.fire({providerName:t.name})}})}),{html:m,handlers:v}}var f=c.namespace("nike.unite");return c.namespace("external",f),c.namespace("social",f),f.external.gigyaLogin=function(e){nike.unite.on.login.fail.fire({socialProvider:e}),r.social()},f.external.socialComplete=function(e){function n(){var n=function(n){if(n.errcode)return void f.external.gigyaError(200,n);e.token=n.access_token;var t={loginProviderUID:n.openid};f.external.gigyaComplete(t,e.token,e.secret,e.provider)},t=function(e,n){f.external.gigyaError(n,e)};l.weChatCodeExchange(e.token,n,t,t)}a.show();var t={};if(t[e.provider]={authToken:e.token},"wechat"===e.provider.toLowerCase())n();else if(e.user){var i=JSON.parse(e.user);f.external.gigyaComplete(i,e.token,e.secret,e.provider)}else{var o=s[e.provider.toLowerCase()+"Service"];o.getUserData(function(n){f.external.gigyaComplete(n,e.token,e.secret,e.provider)},function(e){a.hide(),r.social(e,e.error.code)},e.token)}},f.external.gigyaComplete=function(n,t,i,r){var o={token:t,provider:r,user:n};e.socialFlow.start(o)},f.social.complete=f.external.gigyaComplete,f.external.gigyaCancel=function(){a.hide()},f.external.gigyaError=function(e,n){a.hide(),r.social(n,e)},f.social.error=f.external.gigyaError,f.external.appRegainsFocus=function(e){"string"==typeof e&&e.indexOf("com.facebook.sdk_client_state")>=0&&e.indexOf("error_reason=user_denied")<0&&a.show()},d}),i("componentsSub/submitButton",["componentsSub/helpers/_module","flows","globals","lodash","Promise","settings","templates","utilities"],function(e,n,t,i,r,o,s,a){"use strict";function u(o,u){var c={id:a.generateUuid(),inputId:a.generateUuid(),name:u,classes:["nike-unite-submit-button",u],value:""};o=e.models.merge(c,o);var l=s.submitButton(o);return{html:l,handlers:[{target:o.inputId,event:"click",handler:function(s){var u=t.document.getElementById("nike-unite-"+o.formId);e.state.onSubmit(s.target),s.target.value=o.labelProcessing||"processing",s.target.disabled=!0;var c=e.dom.getInvalidElements(u),l=t.nike.unite.currentView().view,d=0===c.length;if("function"==typeof l.validationCallback&&l.validationCallback(d),delete l.validationCallback,d){var f=function(){var r=(l.model.flowOverride?l.model.flowOverride:l.name)+"Flow";if(l.eventHandler)l.eventHandler("submit",l.name);else if(l.submitHandler){var o=a.formData.getFormData(u);l.submitHandler(o)}else if(n[r]){var s=a.formData.getFormData(u);n[r].start(s)}e.state.onSubmitted(u),i.each(u.elements,function(n){if(n.name){var i=t.document.querySelector(".nike-unite-component."+n.dataset.componentname);i&&e.state.onSubmitted(i)}})},p=[],m=t.nike.unite.currentView().view.components;i.each(m,function(e){"function"==typeof e.submit&&p.push(e.submit())}),p.length>0?r.all(p).then(function(){f()})["catch"](function(){}):f()}else c[0].focus(),s.target.value=o.label,s.target.disabled=!1}},{target:"nike-unite-"+o.formId,event:"submit",handler:function(){document.getElementById(o.inputId).click()}},{target:o.inputId,event:"focus",handler:function(){var n=t.document.getElementById(o.id);e.state.onFocus(n)}},{target:o.inputId,event:"blur",handler:function(){var n=t.document.getElementById(o.id);e.state.onBlur(n)}}]}}return u}),i("controllerSub/phoneVerification",["networkSub/cors","Promise","settings","utilities"],function(e,n,t,i){"use strict";function r(r,o){var s={phoneNumber:r,country:o},a=t.experience.getCorsServer()+"/phoneVerification"+i.script.buildQueryString(s);return new n(function(n,t){e.post(a,{},function(e){n(e)},function(e,n){var i={httpStatus:n,message:e.errors[0].message};switch(n){case 400:i.code=e.errors[0].code;break;case 500:i.code="SERVER_ERROR";break;default:i.code="GENERIC"}t(i)},function(){t({code:"TIMEOUT",message:"The network call has timed out."})},{"Content-Type":"application/json"})})}return{create:r}}),i("controllerSub/registrationToken",["networkSub/cors","settings","utilities"],function(e,n,t){"use strict";function i(i,r){var o={phoneNumber:i},s={verificationCode:r},a=n.experience.getCorsServer()+"/registrationToken"+t.script.buildQueryString(o);return new Promise(function(n,t){e.post(a,s,function(e){n(e)},function(e,n){var i={httpStatus:n,message:e.errors[0].message};switch(n){case 400:i.code=e.errors[0].code;break;case 500:i.code="SERVER_ERROR";break;default:i.code="GENERIC"}t(i)},function(){t({code:"TIMEOUT",message:"The network call has timed out."})},{"Content-Type":"application/json"})})}return{create:i}}),i("controllerSub/sendCode",["networkSub/cors","settings","utilities"],function(e,n,t){"use strict";function i(i,r,o,s,a,u){if("string"!=typeof i||!i)throw new Error("phoneNumber must be a non-empty string");if("string"!=typeof r||!r)throw new Error("accessToken must be a non-empty string");if("function"!=typeof s)throw new Error("onSuccess must be a function");if("function"!=typeof a)throw new Error("onError must be a function");if("function"!=typeof u&&"undefined"!=typeof u)throw new Error("onTimeout must be a function or undefined");var c={phone:i,country:o},l=(n.experience.getCorsServerOverride()||n.experience.getCorsServer())+"/sendCode"+t.script.buildQueryString(c);e.post(l,{},s,a,u,{Authorization:"Bearer "+r,"Content-Type":"application/json"})}function r(e,n,t){return new Promise(function(r,o){i(e,n,t,r,function(e,n){var t={httpStatus:n,message:e.errors[0].message};switch(n){case 400:t.code=String(e.errors[0].code);break;case 500:t.code="SERVER_ERROR";break;default:t.code="GENERIC"}o(t)},function(){o({code:"TIMEOUT"})})})}return{sendCode:i,sendCodeWithPromise:r}}),i("componentsSub/verifyMobileNumber",["componentsSub/helpers/_module","controllerSub/phoneVerification","controllerSub/registrationToken","controllerSub/verifyCode","controllerSub/sendCode","componentsSub/helpers/state","globals","lodash","networkSub/errors","Promise","settings","templates","utilities"],function(e,n,t,i,r,o,s,a,u,c,l,d,f){"use strict";function p(e){E.getElementsByClassName("code")[0].innerHTML="+"+e.code}function m(e,n){var t=s.document.querySelector("."+e);o.onInvalid(t,n)}function v(n){var t=a.find(x.supportedList,function(e){return e.country===C.value}).code;return R=t+A.value,e.validate(_,x.rules.sendCode,R,n)}function g(){return v("submit")?e.validate(P,x.rules.verifyCode,N.value,"submit")?!0:(x.inputId=x.verifyCodeInputId,!1):(x.inputId=x.phoneInputId,!1)}function h(){var e=l.localization.getCountry(),t=a.find(x.supportedList,function(e){return e.country===C.value}).code;return"progressive"===s.nike.unite.currentView().name?nike.unite.currentView().view.eventHandler("getAccessToken").then(function(e){return r.sendCodeWithPromise(t+A.value,e,C.value)}):n.create(t+A.value,e)}function k(){function n(){T.style.display="none",T.innerHTML="",U.disabled=!1}if(v("submit")&&!U.disabled){U.disabled=!0;var t=30;T.style.display="block",T.innerHTML=x.sendCodeSubmissionMessage.replace("{{seconds}}",t.toString());var i=setInterval(function(){return 0===--t?(n(),clearInterval(i)):void(T.innerHTML=x.sendCodeSubmissionMessage.replace("{{seconds}}",t.toString()))},1e3);return h().then(function(){N.focus(),s.nike.unite.on.progressiveProfile.success.fire()})["catch"](function(t){switch(n(),clearInterval(i),t.code){case"99819":case"99801":case"99808":case"99704":e.state.onInvalid(_,t.message);break;default:u.handleUnexpected({},t.code)}s.nike.unite.on.progressiveProfile.fail.fire()})}}function b(){return"progressive"===s.nike.unite.currentView().name?nike.unite.currentView().view.eventHandler("getAccessToken").then(function(e){return i.verifyCodeWithPromise(N.value,e)}):t.create(R,N.value)}function w(){if(M)return c.resolve();var e=a.find(x.supportedList,function(e){return e.country===C.value}).code;return R=e+A.value,b().then(function(e){return M=e.registrationToken?e.registrationToken:null,s.nike.unite.on.mobileVerification.success.fire(),c.resolve({registrationToken:M,mobileNumber:R})})["catch"](function(e){var n=s.nike.unite.currentView().view,t=n.eventHandler,i=f.formData.getFormData();return n.render(i),n.eventHandler=t,"99704"===e.code?m("sendCode",e.message):"99980"===e.code||"99809"===e.code||"99800"===e.code?m("verifyCode",e.message):u.handleUnexpected(e.message,e.code),s.nike.unite.on.mobileVerification.fail.fire(),c.reject(e)})}function y(){M=null,L=null}function S(){return{registrationToken:M,mobileNumber:R,country:C.value}}function I(n){y(),a.forEach(n.supportedList,function(e){return e.country!==l.localization.getCountry()&&"US"!==e.country||(L=e,e.country!==l.localization.getCountry())?void 0:!1}),!L&&n.supportedList&&(L=n.supportedList[0]);var t={name:"verifyMobileNumber",componentId:f.generateUuid(),classes:["nike-unite-component","nike-unite-verifyMobileNumber"],countryCodeDivId:f.generateUuid(),countrySelectId:f.generateUuid(),phoneInputId:f.generateUuid(),sendButtonId:f.generateUuid(),sendConfirmationMsgDivId:f.generateUuid(),sendDivId:f.generateUuid(),disabled:n.supportedList&&1===n.supportedList.length?"disabled":"",verifyCodeInputId:f.generateUuid(),verifyDivId:f.generateUuid(),phoneValue:"",verifyCodeValue:""};x=e.models.merge(t,n);var i=d.verifyMobileNumber(x);return{html:i,getValue:S,submit:w,validate:g,handlers:[{target:x.componentId,event:"render",handler:function(){E=s.document.getElementById(x.countryCodeDivId),C=s.document.getElementById(x.countrySelectId),C.value=L.country,A=s.document.getElementById(x.phoneInputId),U=s.document.getElementById(x.sendButtonId),T=s.document.getElementById(x.sendConfirmationMsgDivId),_=s.document.getElementById(x.sendDivId),N=s.document.getElementById(x.verifyCodeInputId),P=s.document.getElementById(x.verifyDivId),p(L)}},{target:x.countrySelectId,event:"change",handler:function(e){p(a.find(x.supportedList,function(n){return n.country===e.target.value}))}},{target:x.phoneInputId,event:"focus",handler:function(){o.onFocus(A)}},{target:x.phoneInputId,event:"blur",handler:function(){v("blur"),o.onBlur(A)}},{target:x.phoneInputId,event:"keyup",handler:function(e){e.stopPropagation();var n=e.which||e.keyCode;13===n&&k()}},{target:x.sendButtonId,event:"click",handler:k},{target:x.verifyCodeInputId,event:"focus",handler:function(){o.onFocus(N)}},{target:x.verifyCodeInputId,event:"blur",handler:function(){e.validate(P,x.rules.verifyCode,N.value,"blur"),o.onBlur(N)}}],model:x}}var E=void 0,C=void 0,L=void 0,x=void 0,A=void 0,U=void 0,T=void 0,_=void 0,N=void 0,P=void 0,M=void 0,R=void 0;return I}),i("components",["componentsSub/actionButton","componentsSub/actionLink","componentsSub/block","componentsSub/checkbox","componentsSub/coppa","componentsSub/country","componentsSub/dateInput","componentsSub/emailAddress","componentsSub/errorMessage","componentsSub/errorPanel","componentsSub/form","componentsSub/genderButtons","componentsSub/hidden","componentsSub/internationalMobileNumber","componentsSub/keepMeLoggedIn","componentsSub/loginContinuityDialog","componentsSub/passwordCreateInput","componentsSub/passwordInput","componentsSub/reauthEmailAddress","componentsSub/select","componentsSub/socialLinks","componentsSub/spinner","componentsSub/submitButton","componentsSub/textInput","componentsSub/verifyMobileNumber","componentsSub/helpers/_module"],function(e,n,t,i,r,o,s,a,u,c,l,d,f,p,m,v,g,h,k,b,w,y,S,I,E,C){"use strict";return{actionButton:e,actionLink:n,block:t,checkbox:i,coppa:r,country:o,dateInput:s,emailAddress:a,errorMessage:u,errorPanel:c,form:l,genderButtons:d,hidden:f,internationalMobileNumber:p,keepMeLoggedIn:m,loginContinuityDialog:v,passwordCreateInput:g,passwordInput:h,reauthEmailAddress:k,select:b,socialLinks:w,spinner:y,submitButton:S,textInput:I,verifyMobileNumber:E,helpers:C}}),i("viewsSub/component",["components"],function(e){"use strict";function n(e,n,t){if(e&&e.type){if("undefined"==typeof i[e.type])throw new Error("Tried to call render using component model type "+e.type+" that doesn't exist");return i[e.type](e,n,t)}}function t(e){return{html:"<p>"+e.type+"</p>",handlers:[]}}var i={actionButton:e.actionButton,actionLink:e.actionLink,avatar:t,block:e.block,checkbox:e.checkbox,coppa:e.coppa,country:e.country,dateOfBirth:e.dateInput,emailAddress:e.emailAddress,errorMessage:e.errorMessage,errorPanel:e.errorPanel,form:e.form.open,formClose:e.form.close,genderButtons:e.genderButtons,hidden:e.hidden,internationalMobileNumber:e.internationalMobileNumber,keepMeLoggedIn:e.keepMeLoggedIn,loginContinuityDialog:e.loginContinuityDialog,passwordCreateInput:e.passwordCreateInput,passwordInput:e.passwordInput,reauthEmailAddress:e.reauthEmailAddress,select:e.select,socialInputs:e.socialInputs,socialLinks:e.socialLinks,submitButton:e.submitButton,textInput:e.textInput,verifyMobileNumber:e.verifyMobileNumber,viewLink:e.viewLink};return{render:n}});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i("viewsSub/layout",["lodash","viewsSub/component"],function(e,n){"use strict";function t(n,t){var r=n.model.layout;for(c=[],l=[],f=n,t&&(t.override?s(a,t):a=e.merge(a,t));r.match(d);)r=r.replace(d,i);return a=e.clone(u,!0),{html:r,handlers:c,components:l}}function i(e,t,i){if("/"===t&&(a[i].type+="Close"),"object"===r(a[i])){var o=n.render(a[i],i,f);return l.push(o),o.handlers.length>0&&(c=c.concat(o.handlers)),o.html}return a[i]}function o(n){u=n,a=e.clone(n,!0)}function s(n,t){"object"===("undefined"==typeof t?"undefined":r(t))&&e.each(t,function(i,o){"object"!==("undefined"==typeof i?"undefined":r(i))||e.trim(o).match(/!$/)?("string"==typeof o&&(o=o.replace(/!$/,"")),n[o]=i):("object"!==r(n[o])&&(n[o]={}),s(n[o],t[o]))})}var a=void 0,u=void 0,c=void 0,l=void 0,d=/\{{\s*([#\/]?)(\w+)\s*([^}]*)\}}/g,f=void 0;return{render:t,setComponentsModel:o}}),i("views",["viewsSub/component","viewsSub/layout","viewsSub/views"],function(e,n,t){"use strict";return{component:e.render,layout:n.render,views:t,setComponentsModel:n.setComponentsModel}}),i("viewsSub/views",["globals","lodash","views","settings","utilities"],function(e,n,t,i,r){"use strict";function o(n){return e.nike.unite.views[n]}function s(e){var n=o(e);delete n.submitHandler,delete n.components,n.eventHandler=null,n.placeholder&&(n.placeholder.innerHTML="",n.placeholder.style.display="none"),n.rendered=!1}function a(n,t){var i={};switch(n.name){case"appLanding":e.nike.unite.on.appLanding.view.fire();break;case"login":e.nike.unite.on.login.view.fire();break;case"loginContinuity":e.nike.unite.on.loginContinuity.view.fire();break;case"emailOnlyJoin":e.nike.unite.on.emailOnlyJoin.view.fire();break;case"join":e.nike.unite.on.join.view.fire();break;case"socialJoin":i.providerName=t?t.providerKey:"",e.nike.unite.on.socialJoin.view.fire(i);break;case"reauth":e.nike.unite.on.reauth.view.fire();break;case"resetPassword":e.nike.unite.on.resetPassword.view.fire();break;case"updatePassword":e.nike.unite.on.updatePassword.view.fire();break;case"link":i.providerName=t?t.providerKey:"",e.nike.unite.on.linkAccounts.view.fire(i);break;case"mobileJoin":e.nike.unite.on.join.view.fire();break;case"mobileJoinContinue":e.nike.unite.on.join.view.fire();break;case"partnerConnect":e.nike.unite.on.partnerConnect.view.fire();break;case"progressive":e.nike.unite.on.progressiveProfile.view.fire();break;case"verifyMobileCode":e.nike.unite.on.verifyMobileCode.view.fire();break;case"mobileVerificationCode":e.nike.unite.on.mobileVerification.view.fire();break;case"isMobileVerifiedState":e.nike.unite.on.isMobileVerifiedState.view.fire();break;case"isLegallyCompliantState":e.nike.unite.on.isLegallyCompliantState.view.fire()}}function u(e){var t=null,i=o(e);if(i.placeholder){var s=i.placeholder.querySelector(".nike-unite-form");if(s){var a=r.formData.getFormDataByComponent(s);t=n.isEmpty(a)?t:a}}return t}function c(e,t){for(var i=o(e).components||[],r=0;r<i.length;r++){var s=i[r];if(n.get(s,"model.id")===t)return s}return null}function l(i,r,s){var u=o(i);u.rendered&&u.destroy();var c=t.layout(u,r);if(u.placeholder=e.document.getElementById(u.model.src),!u.placeholder)throw new Error("The placeholder for "+i+" is missing. ("+u.model.src+")");u.model.classes&&"string"==typeof u.model.classes&&(u.model.classes=u.model.classes.split(" ")),u.model.classes||(u.model.classes=[]),n.includes(u.model.classes,"nike-unite")||u.model.classes.push("nike-unite"),n.each(u.model.classes,function(e){u.placeholder.classList.add(e)}),u.placeholder.innerHTML=c.html,u.placeholder.setAttribute("data-view",i),u.rendered=!0,u.components=c.components;var l=u.placeholder.querySelectorAll(".nike-unite-component input");if(n.each(l,function(e){"function"==typeof e.uniteShim&&e.uniteShim()}),n.each(c.handlers,function(n){var t=e.document.getElementById(n.target);t&&("render"===n.event&&"function"==typeof n.handler?n.handler(t,u):t.addEventListener(n.event,n.handler,!1))}),u.placeholder.style.display="block","undefined"!=typeof s){if("function"!=typeof s)throw new Error("The submit handler for a view MUST be a function if passed.");u.submitHandler=s}a(u,r)}function d(e,n){var t=o(e);if(n&&(t.validationCallback=n),
!t.placeholder||!t.placeholder.querySelector(".nike-unite-submit-button input[type=button]"))throw new Error("View does not exist or is not rendered with a submit button.");t.placeholder.querySelector(".nike-unite-submit-button input[type=button]").click()}function f(n,t){return n.aliasFor?(r.namespace("nike.unite.views")[t]={},!0):void(r.namespace("nike.unite.views")[t]={destroy:function(){return e.nike.unite.views[t].rendered?s(t):r.noop()},getComponentById:function(e){return c(t,e)},getFormData:function(){return u(t)},model:n,placeholder:null,render:function(e,n){return l(t,e,n)},rendered:!1,submit:function(e){return d(t,e)},values:{},name:t,eventHandler:null})}function p(r){var o=r||i.experience.getExperience();t.setComponentsModel(o.components),n.each(o.views,f),n.each(o.views,function(n,t){n.aliasFor&&(e.nike.unite.views[t]=e.nike.unite.views[n.aliasFor])})}return e.nike.unite.destroyAllViews=function(){n.each(e.nike.unite.views,function(e){e.destroy()})},e.nike.unite.currentView=function(){var t=void 0;return n.each(e.nike.unite.views,function(e,n){return e.rendered?(t={name:n,view:e},!1):void 0}),t},{create:p}}),i("experienceLoad",["lodash","analytics","components","globals","instantiation","session","settings","viewsSub/views","utilities"],function(e,n,t,i,r,o,s,a,u){"use strict";function c(){i.window.nike.unite.isInitialized=!1,u.namespace("nike.unite.experience"),i.window.nike.unite.experience.load=d;var e=r.getObject(),n=s.localization.sanitizeLocaleString(e.dataset.locale);k.getExperienceForLocale(n)}function l(e,n){var t=r.getObject(),i=s.experience.getEnvironment(),o=t.dataset.baseurl+"unite/experiences/"+t.dataset.experienceVersion+"/";"local"!==i&&t.dataset.experienceVersion||(o=t.dataset.baseurl+"experiences/");var a=t.dataset.uxid||"com.nike.unite",c=u.script.load(o+a+"/"+e+".js",n);c.onerror=function(i){i.target.parentNode.removeChild(i.target),u.script.load("https://unite.nike.com/getExperience?version="+t.dataset.experienceVersion+"&uxId="+a+"&language="+e.split("_")[0]+"&country="+e.split("_")[1],n)}}function d(e){var n=void 0===g;g=e,s.experience.setExperience(e,r.getObject().dataset),s.localization.setLocale(e.settings.locale),t.helpers.dom.addClassToPlaceholders("language_"+s.localization.getLanguage()),a.create(),n&&k.initialLoad(e),nike.unite.on.experience.load.success.fire(e)}function f(){var e=r.getObject().dataset;s.experience.getExperience().settings.enableAnalytics&&n.loadOmniture();var a=e.appVersion,c=e.theme||(g||{settings:{}}).settings.theme||"unite",l="local"===s.experience.getEnvironment(),d=e.baseurl+"unite/app/"+a+"/styles/"+c+"/import.css";(l||!a)&&(d=e.baseurl+"styles/"+c+"/import.css");var f=!0;u.loadCss(d,function(){s.platform.isMobile()&&t.helpers.dom.addClassToPlaceholders("unite-mobile-web"),t.helpers.dom.addClassToPlaceholders("theme_"+c);var n=e.defaultview||"appLanding";if("none"!==n){if(!i.nike.unite.views[n])throw new Error('Unable to render unknown view "'+n+'"');i.nike.unite.views[n].render()}f=!1}),clearInterval(h),h=setInterval(function(){o.isReady()&&!f&&(clearInterval(h),k.finalizeLoad())},100)}function p(){if(!g)throw new Error("Cannot finalize loading when no experience has been loaded!");n.appInitialization.reportNikeUniteInit("success"),i.window.nike.unite.isInitialized=!0,nike.unite.on.app.load.success.fire(),o.setVisitData(function(){var e=i.document.createEvent("Event");e.initEvent("nikeUniteInit",!0,!0),i.window.dispatchEvent(e),"function"==typeof window.nikeUniteInit&&window.nikeUniteInit()});var r=e.get(g,"settings.social.networks");r&&e.findIndex(r,function(n){return e.has(n,"name")&&"facebook"===n.name.toLowerCase()})>=0&&m(),r&&r.length>1&&s.platform.isNative()&&t.helpers.dom.addClassToPlaceholders("gigyaLoaded")}function m(){u.script.load("https://connect.facebook.net/en_US/sdk.js",function(){i.window.FB.init({appId:s.experience.getEnvironmentVariables().facebookAppId,version:"v2.8"}),t.helpers.dom.addClassToPlaceholders("facebookLoaded"),nike.unite.on.facebooksdk.load.success.fire()},"facebooks-jssdk")}function v(){i.window.nike.unite.isInitialized=!1,g=void 0,clearInterval(h)}var g=void 0,h=void 0,k={finalizeLoad:p,getExperienceForLocale:l,getRawExperienceObject:function(){return g},initialLoad:f,loadExperience:d,reset:v,start:c};return k}),i("_boot/bootloader",["api","analytics","events","experienceLoad","instantiation","session"],function(e,n,t,i,r,o){"use strict";t.reset(),n.start(),r.start(),o.initialize(),e.expose(),i.start()}),t(["_boot/bootloader"])}();